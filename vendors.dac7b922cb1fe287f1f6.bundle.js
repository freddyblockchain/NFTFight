/*! For license information please see vendors.dac7b922cb1fe287f1f6.bundle.js.LICENSE.txt */
(self.webpackChunknftfight=self.webpackChunknftfight||[]).push([[216],{19824:(t,e)=>{"use strict";const i="undefined"!=typeof BigUint64Array,r=Symbol(),n=1024;function s(t,e){const i=new Uint32Array(t),r=new Uint16Array(t);var s=i[e+-4>>>2]>>>1,o=e>>>1;if(s<=n)return String.fromCharCode.apply(String,r.subarray(o,o+s));const a=[];do{const t=r[o+n-1],e=t>=55296&&t<56320?1023:n;a.push(String.fromCharCode.apply(String,r.subarray(o,o+=e))),s-=e}while(s>n);return a.join("")+String.fromCharCode.apply(String,r.subarray(o,o+s))}function o(t){const e={};function i(t,e){return t?s(t.buffer,e):"<yet unknown>"}const r=t.env=t.env||{};return r.abort=r.abort||function(t,n,s,o){const a=e.memory||r.memory;throw Error("abort: "+i(a,t)+" at "+i(a,n)+":"+s+":"+o)},r.trace=r.trace||function(t,n){const s=e.memory||r.memory;console.log("trace: "+i(s,t)+(n?" ":"")+Array.prototype.slice.call(arguments,2,2+n).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function a(t,e){const r=e.exports,n=r.memory,o=r.table,a=r.__alloc,h=r.__retain,c=r.__rtti_base||-1;function l(t){const e=new Uint32Array(n.buffer);if((t>>>=0)>=e[c>>>2])throw Error("invalid id: "+t);return e[(c+4>>>2)+2*t]}function d(t){const e=new Uint32Array(n.buffer);if((t>>>=0)>=e[c>>>2])throw Error("invalid id: "+t);return e[(c+4>>>2)+2*t+1]}function f(t){return 31-Math.clz32(t>>>5&31)}function p(t,e,i){const r=n.buffer;if(i)switch(t){case 2:return new Float32Array(r);case 3:return new Float64Array(r)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(r);case 1:return new(e?Int16Array:Uint16Array)(r);case 2:return new(e?Int32Array:Uint32Array)(r);case 3:return new(e?BigInt64Array:BigUint64Array)(r)}throw Error("unsupported align: "+t)}function g(t){const e=new Uint32Array(n.buffer),i=e[t+-8>>>2],r=l(i);if(!(1&r))throw Error("not an array: "+i);const s=f(r);var o=e[t+4>>>2];const a=2&r?e[t+12>>>2]:e[o+-4>>>2]>>>s;return p(s,1024&r,2048&r).subarray(o>>>=s,o+a)}function y(t,e,i){return new t(m(t,e,i))}function m(t,e,i){const r=n.buffer,s=new Uint32Array(r),o=s[i+4>>>2];return new t(r,o,s[o+-4>>>2]>>>e)}return t.__allocString=function(t){const e=t.length,i=a(e<<1,1),r=new Uint16Array(n.buffer);for(var s=0,o=i>>>1;s<e;++s)r[o+s]=t.charCodeAt(s);return i},t.__getString=function(t){const e=n.buffer;if(1!==new Uint32Array(e)[t+-8>>>2])throw Error("not a string: "+t);return s(e,t)},t.__allocArray=function(t,e){const i=l(t);if(!(3&i))throw Error("not an array: "+t+" @ "+i);const r=f(i),s=e.length,o=a(s<<r,0),c=a(2&i?16:12,t),u=new Uint32Array(n.buffer);u[c+0>>>2]=h(o),u[c+4>>>2]=o,u[c+8>>>2]=s<<r,2&i&&(u[c+12>>>2]=s);const d=p(r,1024&i,2048&i);if(8192&i)for(let t=0;t<s;++t)d[(o>>>r)+t]=h(e[t]);else d.set(e,o>>>r);return c},t.__getArrayView=g,t.__getArray=function(t){const e=g(t),i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]=e[t];return r},t.__getArrayBuffer=function(t){const e=n.buffer,i=new Uint32Array(e)[t+-4>>>2];return e.slice(t,t+i)},t.__getInt8Array=y.bind(null,Int8Array,0),t.__getInt8ArrayView=m.bind(null,Int8Array,0),t.__getUint8Array=y.bind(null,Uint8Array,0),t.__getUint8ArrayView=m.bind(null,Uint8Array,0),t.__getUint8ClampedArray=y.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=m.bind(null,Uint8ClampedArray,0),t.__getInt16Array=y.bind(null,Int16Array,1),t.__getInt16ArrayView=m.bind(null,Int16Array,1),t.__getUint16Array=y.bind(null,Uint16Array,1),t.__getUint16ArrayView=m.bind(null,Uint16Array,1),t.__getInt32Array=y.bind(null,Int32Array,2),t.__getInt32ArrayView=m.bind(null,Int32Array,2),t.__getUint32Array=y.bind(null,Uint32Array,2),t.__getUint32ArrayView=m.bind(null,Uint32Array,2),i&&(t.__getInt64Array=y.bind(null,BigInt64Array,3),t.__getInt64ArrayView=m.bind(null,BigInt64Array,3),t.__getUint64Array=y.bind(null,BigUint64Array,3),t.__getUint64ArrayView=m.bind(null,BigUint64Array,3)),t.__getFloat32Array=y.bind(null,Float32Array,2),t.__getFloat32ArrayView=m.bind(null,Float32Array,2),t.__getFloat64Array=y.bind(null,Float64Array,3),t.__getFloat64ArrayView=m.bind(null,Float64Array,3),t.__instanceof=function(t,e){const i=new Uint32Array(n.buffer);var r=i[t+-8>>>2];if(r<=i[c>>>2])do{if(r==e)return!0}while(r=d(r));return!1},t.memory=t.memory||n,t.table=t.table||o,u(r,t)}function h(t){return"undefined"!=typeof Response&&t instanceof Response}async function c(t,e){return h(t=await t)?l(t,e):a(o(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}async function l(t,e){return WebAssembly.instantiateStreaming?a(o(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):c(h(t=await t)?t.arrayBuffer():t,e)}function u(t,e){var i=e?Object.create(e):{},n=t.__argumentsLength?function(e){t.__argumentsLength.value=e}:t.__setArgumentsLength||t.__setargc||function(){};for(let e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const s=t[e];let o=e.split("."),a=i;for(;o.length>1;){let t=o.shift();Object.prototype.hasOwnProperty.call(a,t)||(a[t]={}),a=a[t]}let h=o[0],c=h.indexOf("#");if(c>=0){let i=h.substring(0,c),o=a[i];if(void 0===o||!o.prototype){let t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf:function(){return this[r]}},t.wrap=function(e){return Object.create(t.prototype,{[r]:{value:e,writable:!1}})},o&&Object.getOwnPropertyNames(o).forEach((e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e)))),a[i]=t}if(h=h.substring(c+1),a=a[i].prototype,/^(get|set):/.test(h)){if(!Object.prototype.hasOwnProperty.call(a,h=h.substring(4))){let i=t[e.replace("set:","get:")],n=t[e.replace("get:","set:")];Object.defineProperty(a,h,{get:function(){return i(this[r])},set:function(t){n(this[r],t)},enumerable:!0})}}else"constructor"===h?(a[h]=(...t)=>(n(t.length),s(...t))).original=s:(a[h]=function(...t){return n(t.length),s(this[r],...t)}).original=s}else/^(get|set):/.test(h)?Object.prototype.hasOwnProperty.call(a,h=h.substring(4))||Object.defineProperty(a,h,{get:t[e.replace("set:","get:")],set:t[e.replace("get:","set:")],enumerable:!0}):"function"==typeof s&&s!==n?(a[h]=(...t)=>(n(t.length),s(...t))).original=s:a[h]=s}return i}e.instantiate=c,e.instantiateSync=function(t,e){return a(o(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))},e.instantiateStreaming=l,e.demangle=u},93619:(t,e,i)=>{"use strict";var r=i(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.DUMP_SESSION_KEYS=e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES=void 0,e.NOISE_MSG_MAX_LENGTH_BYTES=65535,e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES-16,e.DUMP_SESSION_KEYS=r.env.DUMP_SESSION_KEYS},14510:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decryptStream=e.encryptStream=void 0;const r=i(93619);e.encryptStream=function(t){return async function*(e){for await(const i of e)for(let e=0;e<i.length;e+=r.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let n=e+r.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;n>i.length&&(n=i.length);const s=t.encrypt(i.slice(e,n),t.session);yield s}}},e.decryptStream=function(t){return async function*(e){for await(const i of e)for(let e=0;e<i.length;e+=r.NOISE_MSG_MAX_LENGTH_BYTES){let n=e+r.NOISE_MSG_MAX_LENGTH_BYTES;n>i.length&&(n=i.length);const{plaintext:s,valid:o}=await t.decrypt(i.slice(e,n),t.session);if(!o)throw new Error("Failed to validate decrypted chunk");yield s}}}},33477:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decode2=e.decode1=e.decode0=e.encode2=e.encode1=e.encode0=e.uint16BEDecode=e.uint16BEEncode=void 0;const n=r(i(9668)),s=i(20605);e.uint16BEEncode=(t,e,i)=>(e=e||(2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(2):new Uint8Array(2)),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(i,t,!1),e),e.uint16BEEncode.bytes=2,e.uint16BEDecode=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof n.default?t.readUInt16BE(0):new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1)},e.uint16BEDecode.bytes=2,e.encode0=function(t){return(0,s.concat)([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)},e.encode1=function(t){return(0,s.concat)([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)},e.encode2=function(t){return(0,s.concat)([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)},e.decode0=function(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:new Uint8Array(0)}},e.decode1=function(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}},e.decode2=function(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}},42692:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FailedIKError=void 0;class i extends Error{constructor(t,e){super(e),this.initialMsg=t,this.name="FailedIKhandshake"}}e.FailedIKError=i},59454:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IKHandshake=void 0;const r=i(4240),n=i(33477),s=i(48338),o=i(42692),a=i(87123);e.IKHandshake=class{constructor(t,e,i,n,s,o,a,h){this.isInitiator=t,this.payload=e,this.prologue=i,this.staticKeypair=n,this.connection=s,a&&(this.remotePeer=a),this.ik=null!=h?h:new r.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=new Uint8Array}async stage0(){if((0,a.logLocalStaticKeys)(this.session.hs.s),(0,a.logRemoteStaticKey)(this.session.hs.rs),this.isInitiator){(0,a.logger)("IK Stage 0 - Initiator sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,n.encode1)(t)),(0,a.logger)("IK Stage 0 - Initiator sent message."),(0,a.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,a.logger)("IK Stage 0 - Responder receiving message...");const t=await this.connection.readLP();try{const e=(0,n.decode1)(t.slice()),{plaintext:i,valid:r}=this.ik.recvMessage(this.session,e);if(!r)throw new Error("ik handshake stage 0 decryption validation fail");(0,a.logger)("IK Stage 0 - Responder got message, going to verify payload.");const o=await(0,s.decodePayload)(i);this.remotePeer=this.remotePeer||await(0,s.getPeerIdFromPayload)(o),await(0,s.verifySignedPayload)(this.session.hs.rs,o,this.remotePeer),this.setRemoteEarlyData(o.data),(0,a.logger)("IK Stage 0 - Responder successfully verified payload!"),(0,a.logRemoteEphemeralKey)(this.session.hs.re)}catch(e){const i=e;throw(0,a.logger)("Responder breaking up with IK handshake in stage 0."),new o.FailedIKError(t,`Error occurred while verifying initiator's signed payload: ${i.message}`)}}}async stage1(){if(this.isInitiator){(0,a.logger)("IK Stage 1 - Initiator receiving message...");const t=(await this.connection.readLP()).slice(),e=(0,n.decode0)(t),{plaintext:i,valid:r}=this.ik.recvMessage(this.session,e);(0,a.logger)("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!r)throw new Error("ik stage 1 decryption validation fail");const t=await(0,s.decodePayload)(i);this.remotePeer=this.remotePeer||await(0,s.getPeerIdFromPayload)(t),await(0,s.verifySignedPayload)(e.ns.slice(0,32),t,this.remotePeer),this.setRemoteEarlyData(t.data),(0,a.logger)("IK Stage 1 - Initiator successfully verified payload!"),(0,a.logRemoteEphemeralKey)(this.session.hs.re)}catch(e){const i=e;throw(0,a.logger)("Initiator breaking up with IK handshake in stage 1."),new o.FailedIKError(t,`Error occurred while verifying responder's signed payload: ${i.message}`)}}else{(0,a.logger)("IK Stage 1 - Responder sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,n.encode0)(t)),(0,a.logger)("IK Stage 1 - Responder sent message..."),(0,a.logLocalEphemeralKeys)(this.session.hs.e)}(0,a.logCipherState)(this.session)}decrypt(t,e){const i=this.getCS(e,!1);return this.ik.decryptWithAd(i,new Uint8Array(0),t)}encrypt(t,e){const i=this.getCS(e);return this.ik.encryptWithAd(i,new Uint8Array(0),t)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(t,e=!0){if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}},37558:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XXFallbackHandshake=void 0;const r=i(70461),n=i(48338),s=i(87123),o=i(33477);class a extends r.XXHandshake{constructor(t,e,i,r,n,s,o,a,h){super(t,e,i,r,n,o,h),a&&(this.ephemeralKeys=a),this.initialMsg=s}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),(0,s.logger)("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),(0,s.logLocalEphemeralKeys)(this.session.hs.e);else{(0,s.logger)("XX Fallback Stage 0 - Responder decoding initial msg from IK.");const t=(0,o.decode0)(this.initialMsg),{valid:e}=this.xx.recvMessage(this.session,{ne:t.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!e)throw new Error("xx fallback stage 0 decryption validation fail");(0,s.logger)("XX Fallback Stage 0 - Responder used received message from IK."),(0,s.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){const t=(0,o.decode1)(this.initialMsg),{plaintext:e,valid:i}=this.xx.recvMessage(this.session,t);if(!i)throw new Error("xx fallback stage 1 decryption validation fail");(0,s.logger)("XX Fallback Stage 1 - Initiator used received message from IK."),(0,s.logRemoteEphemeralKey)(this.session.hs.re),(0,s.logRemoteStaticKey)(this.session.hs.rs),(0,s.logger)("Initiator going to check remote's signature...");try{const t=await(0,n.decodePayload)(e);this.remotePeer=this.remotePeer||await(0,n.getPeerIdFromPayload)(t),await(0,n.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){throw new Error(`Error occurred while verifying signed payload from responder: ${t.message}`)}(0,s.logger)("All good with the signature!")}else(0,s.logger)("XX Fallback Stage 1 - Responder start"),await super.exchange(),(0,s.logger)("XX Fallback Stage 1 - Responder end")}}e.XXFallbackHandshake=a},70461:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XXHandshake=void 0;const r=i(64604),n=i(48338),s=i(87123),o=i(33477);e.XXHandshake=class{constructor(t,e,i,n,s,o,a){this.isInitiator=t,this.payload=e,this.prologue=i,this.staticKeypair=n,this.connection=s,o&&(this.remotePeer=o),this.xx=null!=a?a:new r.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if((0,s.logLocalStaticKeys)(this.session.hs.s),this.isInitiator){(0,s.logger)("Stage 0 - Initiator starting to send first message.");const t=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP((0,o.encode0)(t)),(0,s.logger)("Stage 0 - Initiator finished sending first message."),(0,s.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,s.logger)("Stage 0 - Responder waiting to receive first message...");const t=(0,o.decode0)((await this.connection.readLP()).slice()),{valid:e}=this.xx.recvMessage(this.session,t);if(!e)throw new Error("xx handshake stage 0 validation fail");(0,s.logger)("Stage 0 - Responder received first message."),(0,s.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){(0,s.logger)("Stage 1 - Initiator waiting to receive first message from responder...");const t=(0,o.decode1)((await this.connection.readLP()).slice()),{plaintext:e,valid:i}=this.xx.recvMessage(this.session,t);if(!i)throw new Error("xx handshake stage 1 validation fail");(0,s.logger)("Stage 1 - Initiator received the message."),(0,s.logRemoteEphemeralKey)(this.session.hs.re),(0,s.logRemoteStaticKey)(this.session.hs.rs),(0,s.logger)("Initiator going to check remote's signature...");try{const t=await(0,n.decodePayload)(e);this.remotePeer=this.remotePeer||await(0,n.getPeerIdFromPayload)(t),this.remotePeer=await(0,n.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){throw new Error(`Error occurred while verifying signed payload: ${t.message}`)}(0,s.logger)("All good with the signature!")}else{(0,s.logger)("Stage 1 - Responder sending out first message with signed payload and static key.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,o.encode1)(t)),(0,s.logger)("Stage 1 - Responder sent the second handshake message with signed payload."),(0,s.logLocalEphemeralKeys)(this.session.hs.e)}}async finish(){if(this.isInitiator){(0,s.logger)("Stage 2 - Initiator sending third handshake message.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,o.encode2)(t)),(0,s.logger)("Stage 2 - Initiator sent message with signed payload.")}else{(0,s.logger)("Stage 2 - Responder waiting for third handshake message...");const t=(0,o.decode2)((await this.connection.readLP()).slice()),{plaintext:e,valid:i}=this.xx.recvMessage(this.session,t);if(!i)throw new Error("xx handshake stage 2 validation fail");(0,s.logger)("Stage 2 - Responder received the message, finished handshake.");try{const t=await(0,n.decodePayload)(e);this.remotePeer=this.remotePeer||await(0,n.getPeerIdFromPayload)(t),await(0,n.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){throw new Error(`Error occurred while verifying signed payload: ${t.message}`)}}(0,s.logCipherState)(this.session)}encrypt(t,e){const i=this.getCS(e);return this.xx.encryptWithAd(i,new Uint8Array(0),t)}decrypt(t,e){const i=this.getCS(e,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),t)}getRemoteStaticKey(){return this.session.hs.rs}getCS(t,e=!0){if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}},88538:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractHandshake=e.MAX_NONCE=e.MIN_NONCE=void 0;const o=s(i(57664)),a=s(i(73294)),h=i(15501),c=i(19588),l=i(20605),u=i(37466),d=i(48338),f=i(87123);e.MIN_NONCE=0,e.MAX_NONCE=Number.MAX_SAFE_INTEGER;const p="Cipherstate has reached maximum n, a new handshake must be performed";e.AbstractHandshake=class{encryptWithAd(t,e,i){const r=this.encrypt(t.k,t.n,e,i);return this.setNonce(t,this.incrementNonce(t.n)),r}decryptWithAd(t,e,i){const{plaintext:r,valid:n}=this.decrypt(t.k,t.n,e,i);return this.setNonce(t,this.incrementNonce(t.n)),{plaintext:r,valid:n}}hasKey(t){return!this.isEmptyKey(t.k)}setNonce(t,e){t.n=e}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(t){const e=this.createEmptyKey();return(0,c.equals)(e,t)}incrementNonce(t){return t+1}nonceToBytes(t){const e=new Uint8Array(12);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(4,t,!0),e}encrypt(t,i,r,n){if(i>e.MAX_NONCE)throw new Error(p);const s=this.nonceToBytes(i);return new h.ChaCha20Poly1305(t).seal(s,n,r)}encryptAndHash(t,e){let i;return i=this.hasKey(t.cs)?this.encryptWithAd(t.cs,t.h,e):e,this.mixHash(t,i),i}decrypt(t,i,r,n){if(i>e.MAX_NONCE)throw new Error(p);const s=this.nonceToBytes(i),o=new h.ChaCha20Poly1305(t).open(s,n,r);return o?{plaintext:o,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(t,e){let i,r=!0;return this.hasKey(t.cs)?({plaintext:i,valid:r}=this.decryptWithAd(t.cs,t.h,e)):i=e,this.mixHash(t,e),{plaintext:i,valid:r}}dh(t,e){try{const i=o.sharedKey(t,e);return 32===i.length?i:i.slice(0,32)}catch(t){return(0,f.logger)(t.message),new Uint8Array(32)}}mixHash(t,e){t.h=this.getHash(t.h,e)}getHash(t,e){return a.hash((0,l.concat)([t,e],t.length+e.length))}mixKey(t,e){const[i,r]=(0,d.getHkdf)(t.ck,e);t.cs=this.initializeKey(r),t.ck=i}initializeKey(t){return{k:t,n:e.MIN_NONCE}}initializeSymmetric(t){const e=(0,u.fromString)(t,"utf-8"),i=this.hashProtocolName(e),r=i,n=this.createEmptyKey();return{cs:this.initializeKey(n),ck:r,h:i}}hashProtocolName(t){if(t.length<=32){const e=new Uint8Array(32);return e.set(t),e}return this.getHash(t,new Uint8Array(0))}split(t){const[e,i]=(0,d.getHkdf)(t.ck,new Uint8Array(0));return{cs1:this.initializeKey(e),cs2:this.initializeKey(i)}}writeMessageRegular(t,e){const i=this.encryptWithAd(t,new Uint8Array(0),e);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:i}}readMessageRegular(t,e){return this.decryptWithAd(t,new Uint8Array(0),e.ciphertext)}}},4240:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IK=void 0;const r=i(48338),n=i(88538);class s extends n.AbstractHandshake{initSession(t,e,i,r){const n=this.createEmptyKey();let s;return s=t?this.initializeInitiator(e,i,r,n):this.initializeResponder(e,i,r,n),{hs:s,i:t,mc:0}}sendMessage(t,e){let i;if(0===t.mc)i=this.writeMessageA(t.hs,e);else if(1===t.mc){const{messageBuffer:r,h:n,cs1:s,cs2:o}=this.writeMessageB(t.hs,e);i=r,t.h=n,t.cs1=s,t.cs2=o}else{if(!(t.mc>1))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(t.cs2,e)}}return t.mc++,i}recvMessage(t,e){let i=new Uint8Array(0),r=!1;if(0===t.mc&&({plaintext:i,valid:r}=this.readMessageA(t.hs,e)),1===t.mc){const{plaintext:n,valid:s,h:o,cs1:a,cs2:h}=this.readMessageB(t.hs,e);i=n,r=s,t.h=o,t.cs1=a,t.cs2=h}return t.mc++,{plaintext:i,valid:r}}writeMessageA(t,e){t.e=(0,r.generateKeypair)();const i=t.e.publicKey;this.mixHash(t.ss,i),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const n=t.s.publicKey,s=this.encryptAndHash(t.ss,n);return this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs)),{ne:i,ns:s,ciphertext:this.encryptAndHash(t.ss,e)}}writeMessageB(t,e){t.e=(0,r.generateKeypair)();const i=t.e.publicKey;this.mixHash(t.ss,i),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const n=this.encryptAndHash(t.ss,e),s={ne:i,ns:this.createEmptyKey(),ciphertext:n},{cs1:o,cs2:a}=this.split(t.ss);return{messageBuffer:s,cs1:o,cs2:a,h:t.ss.h}}readMessageA(t,e){(0,r.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:i,valid:n}=this.decryptAndHash(t.ss,e.ns);n&&32===i.length&&(0,r.isValidPublicKey)(i)&&(t.rs=i),this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));const{plaintext:s,valid:o}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:s,valid:n&&o}}readMessageB(t,e){if((0,r.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:i,valid:n}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:s,cs2:o}=this.split(t.ss);return{h:t.ss.h,valid:n,plaintext:i,cs1:s,cs2:o}}initializeInitiator(t,e,i,r){const n=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");return this.mixHash(n,t),this.mixHash(n,i),{ss:n,s:e,rs:i,re:new Uint8Array(32),psk:r}}initializeResponder(t,e,i,r){const n=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");return this.mixHash(n,t),this.mixHash(n,e.publicKey),{ss:n,s:e,rs:i,re:new Uint8Array(32),psk:r}}}e.IK=s},64604:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XX=void 0;const r=i(48338),n=i(88538);class s extends n.AbstractHandshake{initializeInitiator(t,e,i,r){const n=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(n,t),{ss:n,s:e,rs:i,psk:r,re:new Uint8Array(32)}}initializeResponder(t,e,i,r){const n=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(n,t),{ss:n,s:e,rs:i,psk:r,re:new Uint8Array(32)}}writeMessageA(t,e,i){const n=new Uint8Array(0);t.e=void 0!==i?i:(0,r.generateKeypair)();const s=t.e.publicKey;return this.mixHash(t.ss,s),{ne:s,ns:n,ciphertext:this.encryptAndHash(t.ss,e)}}writeMessageB(t,e){t.e=(0,r.generateKeypair)();const i=t.e.publicKey;this.mixHash(t.ss,i),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const n=t.s.publicKey,s=this.encryptAndHash(t.ss,n);return this.mixKey(t.ss,this.dh(t.s.privateKey,t.re)),{ne:i,ns:s,ciphertext:this.encryptAndHash(t.ss,e)}}writeMessageC(t,e){const i=t.s.publicKey,r=this.encryptAndHash(t.ss,i);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const n=this.encryptAndHash(t.ss,e),s={ne:this.createEmptyKey(),ns:r,ciphertext:n},{cs1:o,cs2:a}=this.split(t.ss);return{h:t.ss.h,messageBuffer:s,cs1:o,cs2:a}}readMessageA(t,e){return(0,r.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.decryptAndHash(t.ss,e.ciphertext)}readMessageB(t,e){if((0,r.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const{plaintext:i,valid:n}=this.decryptAndHash(t.ss,e.ns);n&&32===i.length&&(0,r.isValidPublicKey)(i)&&(t.rs=i),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:s,valid:o}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:s,valid:n&&o}}readMessageC(t,e){const{plaintext:i,valid:n}=this.decryptAndHash(t.ss,e.ns);if(n&&32===i.length&&(0,r.isValidPublicKey)(i)&&(t.rs=i),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:s,valid:o}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:a,cs2:h}=this.split(t.ss);return{h:t.ss.h,plaintext:s,valid:n&&o,cs1:a,cs2:h}}initSession(t,e,i){const r=this.createEmptyKey(),n=new Uint8Array(32);let s;return s=t?this.initializeInitiator(e,i,n,r):this.initializeResponder(e,i,n,r),{hs:s,i:t,mc:0}}sendMessage(t,e,i){let r;if(0===t.mc)r=this.writeMessageA(t.hs,e,i);else if(1===t.mc)r=this.writeMessageB(t.hs,e);else if(2===t.mc){const{h:i,messageBuffer:n,cs1:s,cs2:o}=this.writeMessageC(t.hs,e);r=n,t.h=i,t.cs1=s,t.cs2=o}else{if(!(t.mc>2))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(t.cs2,e)}}return t.mc++,r}recvMessage(t,e){let i=new Uint8Array(0),r=!1;if(0===t.mc)({plaintext:i,valid:r}=this.readMessageA(t.hs,e));else if(1===t.mc)({plaintext:i,valid:r}=this.readMessageB(t.hs,e));else if(2===t.mc){const{h:n,plaintext:s,valid:o,cs1:a,cs2:h}=this.readMessageC(t.hs,e);i=s,r=o,t.h=n,t.cs1=a,t.cs2=h}return t.mc++,{plaintext:i,valid:r}}}e.XX=s},42641:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.NOISE=void 0;const s=i(88895);n(i(88895),e),e.NOISE=new s.Noise},23786:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCache=void 0;const i=new class{constructor(){this.storage=new Map}store(t,e){this.storage.set(t.id,e)}load(t){var e;return t&&null!==(e=this.storage.get(t.id))&&void 0!==e?e:null}resetStorage(){this.storage.clear()}};e.KeyCache=i},87123:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logCipherState=e.logRemoteEphemeralKey=e.logRemoteStaticKey=e.logLocalEphemeralKeys=e.logLocalStaticKeys=e.logger=void 0;const n=r(i(11227)),s=i(93619),o=i(92263);let a;e.logger=(0,n.default)("libp2p:noise"),a=s.DUMP_SESSION_KEYS?e.logger:()=>{},e.logLocalStaticKeys=function(t){a(`LOCAL_STATIC_PUBLIC_KEY ${(0,o.toString)(t.publicKey,"hex")}`),a(`LOCAL_STATIC_PRIVATE_KEY ${(0,o.toString)(t.privateKey,"hex")}`)},e.logLocalEphemeralKeys=function(t){t?(a(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,o.toString)(t.publicKey,"hex")}`),a(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,o.toString)(t.privateKey,"hex")}`)):a("Missing local ephemeral keys.")},e.logRemoteStaticKey=function(t){a(`REMOTE_STATIC_PUBLIC_KEY ${(0,o.toString)(t,"hex")}`)},e.logRemoteEphemeralKey=function(t){a(`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,o.toString)(t,"hex")}`)},e.logCipherState=function(t){t.cs1&&t.cs2?(a(`CIPHER_STATE_1 ${t.cs1.n} ${(0,o.toString)(t.cs1.k,"hex")}`),a(`CIPHER_STATE_2 ${t.cs2.n} ${(0,o.toString)(t.cs2.k,"hex")}`)):a("Missing cipher state.")}},88895:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;const a=s(i(57664)),h=o(i(11712)),c=o(i(63184)),l=o(i(96653)),u=o(i(60618)),d=i(48963),f=i(70461),p=i(59454),g=i(37558),y=i(48338),m=i(33477),v=i(14510),b=i(23786),w=i(87123),_=i(93619);e.Noise=class{constructor(t,e){if(this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=null!=e?e:new Uint8Array(0),this.useNoisePipes=!1,t){const e=a.generateKeyPairFromSeed(t);this.staticKeys={privateKey:e.secretKey,publicKey:e.publicKey}}else this.staticKeys=(0,y.generateKeypair)()}async secureOutbound(t,e,i){const r=(0,h.default)(e,{lengthEncoder:m.uint16BEEncode,lengthDecoder:m.uint16BEDecode,maxDataLength:_.NOISE_MSG_MAX_LENGTH_BYTES}),n=await this.performHandshake({connection:r,isInitiator:!0,localPeer:t,remotePeer:i});return{conn:await this.createSecureConnection(r,n),remoteEarlyData:n.remoteEarlyData,remotePeer:n.remotePeer}}async secureInbound(t,e,i){const r=(0,h.default)(e,{lengthEncoder:m.uint16BEEncode,lengthDecoder:m.uint16BEDecode,maxDataLength:_.NOISE_MSG_MAX_LENGTH_BYTES}),n=await this.performHandshake({connection:r,isInitiator:!1,localPeer:t,remotePeer:i});return{conn:await this.createSecureConnection(r,n),remoteEarlyData:n.remoteEarlyData,remotePeer:n.remotePeer}}async performHandshake(t){var e;const i=await(0,y.getPayload)(t.localPeer,this.staticKeys.publicKey,this.earlyData);let r=this.useNoisePipes;if(t.isInitiator&&null===b.KeyCache.load(t.remotePeer)&&(r=!1),!r)return await this.performXXHandshake(t,i);{const{remotePeer:r,connection:n,isInitiator:s}=t,o=new p.IKHandshake(s,i,this.prologue,this.staticKeys,n,null!==(e=b.KeyCache.load(t.remotePeer))&&void 0!==e?e:new Uint8Array(32),r);try{return await this.performIKHandshake(o)}catch(e){let r;return t.isInitiator&&(r=o.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(t,i,e.initialMsg,r)}}}async performXXFallbackHandshake(t,e,i,r){const{isInitiator:n,remotePeer:s,connection:o}=t,a=new g.XXFallbackHandshake(n,e,this.prologue,this.staticKeys,o,i,s,r);try{await a.propose(),await a.exchange(),await a.finish()}catch(t){throw(0,w.logger)(t),new Error(`Error occurred during XX Fallback handshake: ${t.message}`)}return a}async performXXHandshake(t,e){const{isInitiator:i,remotePeer:r,connection:n}=t,s=new f.XXHandshake(i,e,this.prologue,this.staticKeys,n,r);try{await s.propose(),await s.exchange(),await s.finish(),this.useNoisePipes&&s.remotePeer&&b.KeyCache.store(s.remotePeer,s.getRemoteStaticKey())}catch(t){throw new Error(`Error occurred during XX handshake: ${t.message}`)}return s}async performIKHandshake(t){return await t.stage0(),await t.stage1(),t}async createSecureConnection(t,e){const[i,r]=(0,c.default)(),n=t.unwrap();return await(0,u.default)(i,l.default,(0,v.encryptStream)(e),(0,d.encode)({lengthEncoder:m.uint16BEEncode}),n,(0,d.decode)({lengthDecoder:m.uint16BEDecode}),l.default,(0,v.decryptStream)(e),i),r}}},47144:function(t,e,i){"use strict";var r,n,s;n=[i(62100)],void 0===(s="function"==typeof(r=function(t){var e,i=t.Reader,r=t.Writer,n=t.util,s=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return s.pb=((e={}).NoiseHandshakePayload=function(){function e(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return e.prototype.identityKey=n.newBuffer([]),e.prototype.identitySig=n.newBuffer([]),e.prototype.data=n.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(t,e){return e||(e=r.create()),null!=t.identityKey&&Object.hasOwnProperty.call(t,"identityKey")&&e.uint32(10).bytes(t.identityKey),null!=t.identitySig&&Object.hasOwnProperty.call(t,"identitySig")&&e.uint32(18).bytes(t.identitySig),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(26).bytes(t.data),e},e.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},e.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new s.pb.NoiseHandshakePayload;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.identityKey=t.bytes();break;case 2:n.identitySig=t.bytes();break;case 3:n.data=t.bytes();break;default:t.skipType(7&o)}}return n},e.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},e.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.identityKey&&t.hasOwnProperty("identityKey")&&!(t.identityKey&&"number"==typeof t.identityKey.length||n.isString(t.identityKey))?"identityKey: buffer expected":null!=t.identitySig&&t.hasOwnProperty("identitySig")&&!(t.identitySig&&"number"==typeof t.identitySig.length||n.isString(t.identitySig))?"identitySig: buffer expected":null!=t.data&&t.hasOwnProperty("data")&&!(t.data&&"number"==typeof t.data.length||n.isString(t.data))?"data: buffer expected":null},e.fromObject=function(t){if(t instanceof s.pb.NoiseHandshakePayload)return t;var e=new s.pb.NoiseHandshakePayload;return null!=t.identityKey&&("string"==typeof t.identityKey?n.base64.decode(t.identityKey,e.identityKey=n.newBuffer(n.base64.length(t.identityKey)),0):t.identityKey.length&&(e.identityKey=t.identityKey)),null!=t.identitySig&&("string"==typeof t.identitySig?n.base64.decode(t.identitySig,e.identitySig=n.newBuffer(n.base64.length(t.identitySig)),0):t.identitySig.length&&(e.identitySig=t.identitySig)),null!=t.data&&("string"==typeof t.data?n.base64.decode(t.data,e.data=n.newBuffer(n.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},e.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.identityKey="":(i.identityKey=[],e.bytes!==Array&&(i.identityKey=n.newBuffer(i.identityKey))),e.bytes===String?i.identitySig="":(i.identitySig=[],e.bytes!==Array&&(i.identitySig=n.newBuffer(i.identitySig))),e.bytes===String?i.data="":(i.data=[],e.bytes!==Array&&(i.data=n.newBuffer(i.data)))),null!=t.identityKey&&t.hasOwnProperty("identityKey")&&(i.identityKey=e.bytes===String?n.base64.encode(t.identityKey,0,t.identityKey.length):e.bytes===Array?Array.prototype.slice.call(t.identityKey):t.identityKey),null!=t.identitySig&&t.hasOwnProperty("identitySig")&&(i.identitySig=e.bytes===String?n.base64.encode(t.identitySig,0,t.identitySig.length):e.bytes===Array?Array.prototype.slice.call(t.identitySig):t.identitySig),null!=t.data&&t.hasOwnProperty("data")&&(i.data=e.bytes===String?n.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},e}(),e),s})?r.apply(e,n):r)||(t.exports=s)},48338:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidPublicKey=e.getHkdf=e.verifySignedPayload=e.getHandshakePayload=e.decodePayload=e.getPeerIdFromPayload=e.signPayload=e.createHandshakePayload=e.getPayload=e.generateKeypair=void 0;const a=i(512),h=i(73294),c=s(i(57664)),l=o(i(88785)),u=i(47144),d=i(19588),f=i(52217),p=i(20605),g=u.pb.NoiseHandshakePayload;function y(t,e,i){const r=g.create({identityKey:t,identitySig:e,data:null!=i?i:null});return g.encode(r).finish()}async function m(t,e){return await t.privKey.sign(e)}function v(t){const e=(0,f.fromString)("noise-libp2p-static-key:");return(0,p.concat)([e,t],e.length+t.length)}e.generateKeypair=function(){const t=c.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}},e.getPayload=async function(t,e,i){const r=await m(t,v(e)),n=null!=i?i:new Uint8Array(0);return y(t.marshalPubKey(),r,n)},e.createHandshakePayload=y,e.signPayload=m,e.getPeerIdFromPayload=async function(t){return await l.default.createFromPubKey(t.identityKey)},e.decodePayload=function(t){return g.toObject(g.decode(t))},e.getHandshakePayload=v,e.verifySignedPayload=async function(t,e,i){const r=e.identityKey;if(!await async function(t,e){const i=await l.default.createFromPubKey(e);return(0,d.equals)(i.id,t)}(i.id,r))throw new Error("Peer ID doesn't match libp2p public key.");const n=v(t),s=await l.default.createFromPubKey(r);if(!e.identitySig||!await s.pubKey.verify(n,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return s},e.getHkdf=function(t,e){const i=new a.HKDF(h.SHA256,e,t).expand(96);return[i.slice(0,32),i.slice(32,64),i.slice(64,96)]},e.isValidPublicKey=function(t){return t instanceof Uint8Array&&32===t.length}},50222:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.curve25519=e.getSharedSecret=e.verify=e.sign=e.getPublicKey=e.Signature=e.Point=e.RistrettoPoint=e.ExtendedPoint=e.CURVE=void 0;const n=r(i(43094)),s=BigInt(0),o=BigInt(1),a=BigInt(2),h=BigInt(255),c=a**BigInt(252)+BigInt("27742317777372353535851937790883648493"),l={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:a**h-BigInt(19),l:c,n:c,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};e.CURVE=l;const u=a**BigInt(256),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),f=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),p=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),g=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),y=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class m{constructor(t,e,i,r){this.x=t,this.y=e,this.z=i,this.t=r}static fromAffine(t){if(!(t instanceof E))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(E.ZERO)?m.ZERO:new m(t.x,t.y,o,M(t.x*t.y))}static toAffineBatch(t){const e=function(t,e=l.P){const i=new Array(t.length),r=D(t.reduce(((t,r,n)=>r===s?t:(i[n]=t,M(t*r,e))),o),e);return t.reduceRight(((t,r,n)=>r===s?t:(i[n]=M(t*i[n],e),M(t*r,e))),r),i}(t.map((t=>t.z)));return t.map(((t,i)=>t.toAffine(e[i])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){v(t);const{x:e,y:i,z:r}=this,{x:n,y:s,z:o}=t,a=M(e*o),h=M(n*r),c=M(i*o),l=M(s*r);return a===h&&c===l}negate(){return new m(M(-this.x),this.y,this.z,M(-this.t))}double(){const{x:t,y:e,z:i}=this,{a:r}=l,n=M(t**a),s=M(e**a),o=M(a*M(i**a)),h=M(r*n),c=M(M((t+e)**a)-n-s),u=h+s,d=u-o,f=h-s,p=M(c*d),g=M(u*f),y=M(c*f),v=M(d*u);return new m(p,g,v,y)}add(t){v(t);const{x:e,y:i,z:r,t:n}=this,{x:o,y:h,z:c,t:l}=t,u=M((i-e)*(h+o)),d=M((i+e)*(h-o)),f=M(d-u);if(f===s)return this.double();const p=M(r*a*l),g=M(n*a*c),y=g+p,b=d+u,w=g-p,_=M(y*f),x=M(b*w),E=M(y*w),S=M(f*b);return new m(_,x,S,E)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,i=[];let r=this,n=r;for(let s=0;s<e;s++){n=r,i.push(n);for(let e=1;e<2**(t-1);e++)n=n.add(r),i.push(n);r=n.double()}return i}wNAF(t,e){!e&&this.equals(m.BASE)&&(e=E.BASE);const i=e&&e._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&x.get(e);r||(r=this.precomputeWindow(i),e&&1!==i&&(r=m.normalizeZ(r),x.set(e,r)));let n=m.ZERO,s=m.ZERO;const a=1+256/i,h=2**(i-1),c=BigInt(2**i-1),l=2**i,u=BigInt(i);for(let e=0;e<a;e++){const i=e*h;let a=Number(t&c);if(t>>=u,a>h&&(a-=l,t+=o),0===a){let t=r[i];e%2&&(t=t.negate()),s=s.add(t)}else{let t=r[i+Math.abs(a)-1];a<0&&(t=t.negate()),n=n.add(t)}}return m.normalizeZ([n,s])[0]}multiply(t,e){return this.wNAF(j(t,l.l),e)}multiplyUnsafe(t){let e=j(t,l.l,!1);const i=m.BASE,r=m.ZERO;if(e===s)return r;if(this.equals(r)||e===o)return this;if(this.equals(i))return this.wNAF(e);let n=r,a=this;for(;e>s;)e&o&&(n=n.add(a)),a=a.double(),e>>=o;return n}isSmallOrder(){return this.multiplyUnsafe(l.h).equals(m.ZERO)}isTorsionFree(){return this.multiplyUnsafe(l.l).equals(m.ZERO)}toAffine(t=D(this.z)){const{x:e,y:i,z:r}=this,n=M(e*t),s=M(i*t);if(M(r*t)!==o)throw new Error("invZ was invalid");return new E(n,s)}fromRistrettoBytes(){w()}toRistrettoBytes(){w()}fromRistrettoHash(){w()}}function v(t){if(!(t instanceof m))throw new TypeError("ExtendedPoint expected")}function b(t){if(!(t instanceof _))throw new TypeError("RistrettoPoint expected")}function w(){throw new Error("Legacy method: switch to RistrettoPoint")}e.ExtendedPoint=m,m.BASE=new m(l.Gx,l.Gy,o,M(l.Gx*l.Gy)),m.ZERO=new m(s,o,o,s);class _{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=l,i=M(d*t*t),r=M((i+o)*g);let n=BigInt(-1);const s=M((n-e*i)*M(i+e));let{isValid:a,value:h}=N(r,s),c=M(h*t);P(c)||(c=M(-c)),a||(h=c),a||(n=i);const u=M(n*(i-o)*y-s),p=h*h,v=M((h+h)*s),b=M(u*f),w=M(o-p),_=M(o+p);return new m(M(v*_),M(w*b),M(b*_),M(v*w))}static hashToCurve(t){const e=O((t=z(t,64)).slice(0,32)),i=this.calcElligatorRistrettoMap(e),r=O(t.slice(32,64)),n=this.calcElligatorRistrettoMap(r);return new _(i.add(n))}static fromHex(t){t=z(t,32);const{a:e,d:i}=l,r="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",n=O(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(R(n),t)||P(n))throw new Error(r);const a=M(n*n),h=M(o+e*a),c=M(o-e*a),u=M(h*h),d=M(c*c),f=M(e*i*u-d),{isValid:p,value:g}=U(M(f*d)),y=M(g*c),v=M(g*y*f);let b=M((n+n)*y);P(b)&&(b=M(-b));const w=M(h*v),x=M(b*w);if(!p||P(x)||w===s)throw new Error(r);return new _(new m(b,w,o,x))}toRawBytes(){let{x:t,y:e,z:i,t:r}=this.ep;const n=M(M(i+e)*M(i-e)),s=M(t*e),{value:o}=U(M(n*s**a)),h=M(o*n),c=M(o*s),l=M(h*c*r);let u;if(P(r*l)){let i=M(e*d),r=M(t*d);t=i,e=r,u=M(h*p)}else u=c;P(t*l)&&(e=M(-e));let f=M((i-e)*u);return P(f)&&(f=M(-f)),R(f)}toHex(){return A(this.toRawBytes())}toString(){return this.toHex()}equals(t){b(t);const e=this.ep,i=t.ep,r=M(e.x*i.y)===M(e.y*i.x),n=M(e.y*i.y)===M(e.x*i.x);return r||n}add(t){return b(t),new _(this.ep.add(t.ep))}subtract(t){return b(t),new _(this.ep.subtract(t.ep))}multiply(t){return new _(this.ep.multiply(t))}multiplyUnsafe(t){return new _(this.ep.multiplyUnsafe(t))}}e.RistrettoPoint=_,_.BASE=new _(m.BASE),_.ZERO=new _(m.ZERO);const x=new WeakMap;class E{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,x.delete(this)}static fromHex(t,e=!0){const{d:i,P:r}=l,n=(t=z(t,32)).slice();n[31]=-129&t[31];const s=I(n);if(e&&s>=r)throw new Error("Expected 0 < hex < P");if(!e&&s>=u)throw new Error("Expected 0 < hex < 2**256");const a=M(s*s),h=M(a-o),c=M(i*a+o);let{isValid:d,value:f}=N(h,c);if(!d)throw new Error("Point.fromHex: invalid y coordinate");const p=(f&o)===o;return 0!=(128&t[31])!==p&&(f=M(-f)),new E(f,s)}static async fromPrivateKey(t){return(await G(t)).point}toRawBytes(){const t=R(this.y);return t[31]|=this.x&o?128:0,t}toHex(){return A(this.toRawBytes())}toX25519(){const{y:t}=this;return R(M((o+t)*D(o-t)))}isTorsionFree(){return m.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new E(M(-this.x),this.y)}add(t){return m.fromAffine(this).add(m.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return m.fromAffine(this).multiply(t,this).toAffine()}}e.Point=E,E.BASE=new E(l.Gx,l.Gy),E.ZERO=new E(s,o);class S{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=z(t,64),i=E.fromHex(e.slice(0,32),!1),r=I(e.slice(32,64));return new S(i,r)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof E))throw new Error("Expected Point instance");return j(e,l.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(R(this.s),32),t}toHex(){return A(this.toRawBytes())}}e.Signature=S;const T=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function A(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let i=0;i<t.length;i++)e+=T[t[i]];return e}function C(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let i=0;i<e.length;i++){const r=2*i,n=t.slice(r,r+2),s=Number.parseInt(n,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[i]=s}return e}function k(t){return C(t.toString(16).padStart(64,"0"))}function R(t){return k(t).reverse()}function P(t){return(M(t)&o)===o}function I(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+A(Uint8Array.from(t).reverse()))}function O(t){return M(I(t)&a**h-o)}function M(t,e=l.P){const i=t%e;return i>=s?i:e+i}function D(t,e=l.P){if(t===s||e<=s)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let i=M(t,e),r=e,n=s,a=o,h=o,c=s;for(;i!==s;){const t=r/i,e=r%i,s=n-h*t,o=a-c*t;r=i,i=e,n=h,a=c,h=s,c=o}if(r!==o)throw new Error("invert: does not exist");return M(n,e)}function B(t,e){const{P:i}=l;let r=t;for(;e-- >s;)r*=r,r%=i;return r}function L(t){const{P:e}=l,i=BigInt(5),r=BigInt(10),n=BigInt(20),s=BigInt(40),h=BigInt(80),c=t*t%e*t%e,u=B(c,a)*c%e,d=B(u,o)*t%e,f=B(d,i)*d%e,p=B(f,r)*f%e,g=B(p,n)*p%e,y=B(g,s)*g%e,m=B(y,h)*y%e,v=B(m,h)*y%e,b=B(v,r)*f%e;return{pow_p_5_8:B(b,a)*t%e,b2:c}}function N(t,e){const i=M(e*e*e),r=M(i*i*e);let n=M(t*i*L(t*r).pow_p_5_8);const s=M(e*n*n),o=n,a=M(n*d),h=s===t,c=s===M(-t),l=s===M(-t*d);return h&&(n=o),(c||l)&&(n=a),P(n)&&(n=M(-n)),{isValid:h||c,value:n}}function U(t){return N(o,t)}async function F(...t){return M(I(await e.utils.sha512(function(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),i=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const n=t[e];i.set(n,r),r+=n.length}return i}(...t))),l.l)}function z(t,e){const i=t instanceof Uint8Array?Uint8Array.from(t):C(t);if("number"==typeof e&&i.length!==e)throw new Error(`Expected ${e} bytes`);return i}function j(t,e,i=!0){if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(i){if(s<t)return t}else if(s<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function V(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}async function G(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?k(j(t,u)):z(t)).length)throw new Error("Expected 32 bytes");const i=await e.utils.sha512(t),r=V(i.slice(0,32)),n=i.slice(32,64),s=M(I(r),l.l),o=E.BASE.multiply(s),a=o.toRawBytes();return{head:r,prefix:n,scalar:s,point:o,pointBytes:a}}function H(t,e,i){const r=M(t*(e-i));return[e=M(e-r),i=M(i+r)]}e.getPublicKey=async function(t){return(await G(t)).pointBytes},e.sign=async function(t,e){t=z(t);const{prefix:i,scalar:r,pointBytes:n}=await G(e),s=await F(i,t),o=E.BASE.multiply(s),a=M(s+await F(o.toRawBytes(),n,t)*r,l.l);return new S(o,a).toRawBytes()},e.verify=async function(t,e,i){e=z(e),i instanceof E||(i=E.fromHex(i,!1));const{r,s:n}=t instanceof S?t.assertValidity():S.fromHex(t),s=m.BASE.multiplyUnsafe(n),o=await F(r.toRawBytes(),i.toRawBytes(),e),a=m.fromAffine(i).multiplyUnsafe(o);return m.fromAffine(r).add(a).subtract(s).multiplyUnsafe(l.h).equals(m.ZERO)},e.getSharedSecret=async function(t,i){const{head:r}=await G(t),n=E.fromHex(i).toX25519();return e.curve25519.scalarMult(r,n)},E.BASE._setWindowSize(8),e.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const i=function(t,e){const{P:i}=l,r=j(t,i),n=j(e,i),h=BigInt(121665),c=r;let u,d=o,f=s,p=r,g=o,y=s;for(let t=BigInt(254);t>=s;t--){const e=n>>t&o;y^=e,u=H(y,d,p),d=u[0],p=u[1],u=H(y,f,g),f=u[0],g=u[1],y=e;const i=d+f,r=M(i*i),s=d-f,l=M(s*s),m=r-l,v=p+g,b=M((p-g)*i),w=M(v*s);p=M((b+w)**a),g=M(c*(b-w)**a),d=M(r*l),f=M(m*(r+M(h*m)))}u=H(y,d,p),d=u[0],p=u[1],u=H(y,f,g),f=u[0],g=u[1];const{pow_p_5_8:m,b2:v}=L(f),b=M(B(m,BigInt(3))*v);return M(d*b)}(function(t){const e=z(t,32);return e[31]&=127,I(e)}(e),I(V(z(t,32))));if(i===s)throw new Error("Invalid private or public key received");return R(M(i,l.P))},scalarMultBase:t=>e.curve25519.scalarMult(t,e.curve25519.BASE_POINT_U)};const Y={node:n.default,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0};e.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:A,getExtendedPublicKey:G,mod:M,invert:D,hashToPrivateScalar:t=>{if((t=z(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=M(I(t),l.l);if(e===s||e===o)throw new Error("Invalid private key");return e},randomBytes:(t=32)=>{if(Y.web)return Y.web.getRandomValues(new Uint8Array(t));if(Y.node){const{randomBytes:e}=Y.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>e.utils.randomBytes(32),sha512:async t=>{if(Y.web){const e=await Y.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(Y.node)return Uint8Array.from(Y.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(t=8,e=E.BASE){const i=e.equals(E.BASE)?e:new E(e.x,e.y);return i._setWindowSize(t),i.multiply(a),i}}},79656:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.schnorr=e.verify=e.signSync=e.sign=e.getSharedSecret=e.recoverPublicKey=e.getPublicKey=e.Signature=e.Point=e.CURVE=void 0;const n=r(i(69159)),s=BigInt(0),o=BigInt(1),a=BigInt(2),h=BigInt(3),c=BigInt(8),l=a**BigInt(256),u={a:s,b:BigInt(7),P:l-a**BigInt(32)-BigInt(977),n:l-BigInt("432420386565659656852420866394968145599"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function d(t){const{a:e,b:i}=u,r=O(t*t),n=O(r*t);return O(n+e*t+i)}e.CURVE=u;const f=u.a===s;class p{constructor(t,e,i){this.x=t,this.y=e,this.z=i}static fromAffine(t){if(!(t instanceof y))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new p(t.x,t.y,o)}static toAffineBatch(t){const e=function(t,e=u.P){const i=new Array(t.length),r=D(t.reduce(((t,r,n)=>r===s?t:(i[n]=t,O(t*r,e))),o),e);return t.reduceRight(((t,r,n)=>r===s?t:(i[n]=O(t*i[n],e),O(t*r,e))),r),i}(t.map((t=>t.z)));return t.map(((t,i)=>t.toAffine(e[i])))}static normalizeZ(t){return p.toAffineBatch(t).map(p.fromAffine)}equals(t){if(!(t instanceof p))throw new TypeError("JacobianPoint expected");const{x:e,y:i,z:r}=this,{x:n,y:s,z:o}=t,h=O(r**a),c=O(o**a),l=O(e*c),u=O(n*h),d=O(O(i*o)*c),f=O(O(s*r)*h);return l===u&&d===f}negate(){return new p(this.x,O(-this.y),this.z)}double(){const{x:t,y:e,z:i}=this,r=O(t**a),n=O(e**a),s=O(n**a),o=O(a*(O((t+n)**a)-r-s)),l=O(h*r),u=O(l**a),d=O(u-a*o),f=O(l*(o-d)-c*s),g=O(a*e*i);return new p(d,f,g)}add(t){if(!(t instanceof p))throw new TypeError("JacobianPoint expected");const{x:e,y:i,z:r}=this,{x:n,y:o,z:h}=t;if(n===s||o===s)return this;if(e===s||i===s)return t;const c=O(r**a),l=O(h**a),u=O(e*l),d=O(n*c),f=O(O(i*h)*l),g=O(O(o*r)*c),y=O(d-u),m=O(g-f);if(y===s)return m===s?this.double():p.ZERO;const v=O(y**a),b=O(y*v),w=O(u*v),_=O(m**a-b-a*w),x=O(m*(w-_)-f*b),E=O(r*h*y);return new p(_,x,E)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let e=I(t);p.BASE;const i=p.ZERO;if(e===s)return i;if(e===o)return this;if(!f){let t=i,r=this;for(;e>s;)e&o&&(t=t.add(r)),r=r.double(),e>>=o;return t}let{k1neg:r,k1:n,k2neg:a,k2:h}=N(e),c=i,l=i,d=this;for(;n>s||h>s;)n&o&&(c=c.add(d)),h&o&&(l=l.add(d)),d=d.double(),n>>=o,h>>=o;return r&&(c=c.negate()),a&&(l=l.negate()),l=new p(O(l.x*u.beta),l.y,l.z),c.add(l)}precomputeWindow(t){const e=f?128/t+1:256/t+1,i=[];let r=this,n=r;for(let s=0;s<e;s++){n=r,i.push(n);for(let e=1;e<2**(t-1);e++)n=n.add(r),i.push(n);r=n.double()}return i}wNAF(t,e){!e&&this.equals(p.BASE)&&(e=y.BASE);const i=e&&e._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&g.get(e);r||(r=this.precomputeWindow(i),e&&1!==i&&(r=p.normalizeZ(r),g.set(e,r)));let n=p.ZERO,s=p.ZERO;const a=1+(f?128/i:256/i),h=2**(i-1),c=BigInt(2**i-1),l=2**i,u=BigInt(i);for(let e=0;e<a;e++){const i=e*h;let a=Number(t&c);if(t>>=u,a>h&&(a-=l,t+=o),0===a){let t=r[i];e%2&&(t=t.negate()),s=s.add(t)}else{let t=r[i+Math.abs(a)-1];a<0&&(t=t.negate()),n=n.add(t)}}return{p:n,f:s}}multiply(t,e){let i,r,n=I(t);if(f){const{k1neg:t,k1:s,k2neg:o,k2:a}=N(n);let{p:h,f:c}=this.wNAF(s,e),{p:l,f:d}=this.wNAF(a,e);t&&(h=h.negate()),o&&(l=l.negate()),l=new p(O(l.x*u.beta),l.y,l.z),i=h.add(l),r=c.add(d)}else{const{p:t,f:s}=this.wNAF(n,e);i=t,r=s}return p.normalizeZ([i,r])[0]}toAffine(t=D(this.z)){const{x:e,y:i,z:r}=this,n=t,s=O(n*n),a=O(s*n),h=O(e*s),c=O(i*a);if(O(r*n)!==o)throw new Error("invZ was invalid");return new y(h,c)}}p.BASE=new p(u.Gx,u.Gy,o),p.ZERO=new p(s,o,s);const g=new WeakMap;class y{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,g.delete(this)}static fromCompressedHex(t){const e=32===t.length,i=R(e?t:t.subarray(1));if(!j(i))throw new Error("Point is not on curve");let r=function(t){const{P:e}=u,i=BigInt(6),r=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,d=l*l*t%e,f=M(d,h)*d%e,p=M(f,h)*d%e,g=M(p,a)*l%e,y=M(g,r)*g%e,m=M(y,n)*y%e,v=M(m,o)*m%e,b=M(v,c)*v%e,w=M(b,o)*m%e,_=M(w,h)*d%e,x=M(_,s)*y%e,E=M(x,i)*l%e;return M(E,a)}(d(i));const n=(r&o)===o;e?n&&(r=O(-r)):1==(1&t[0])!==n&&(r=O(-r));const s=new y(i,r);return s.assertValidity(),s}static fromUncompressedHex(t){const e=R(t.subarray(1,33)),i=R(t.subarray(33,65)),r=new y(e,i);return r.assertValidity(),r}static fromHex(t){const e=P(t),i=e.length,r=e[0];if(32===i||33===i&&(2===r||3===r))return this.fromCompressedHex(e);if(65===i&&4===r)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${i}`)}static fromPrivateKey(t){return y.BASE.multiply(G(t))}static fromSignature(t,e,i){const r=U(t=P(t)),{r:n,s:o}=Y(e);if(0!==i&&1!==i)throw new Error("Cannot recover signature: invalid recovery bit");if(r===s)throw new Error("Cannot recover signature: msgHash cannot be 0");const a=1&i?"03":"02",h=y.fromHex(a+S(n)),{n:c}=u,l=D(n,c),d=O(-r*l,c),f=O(o*l,c),p=y.BASE.multiplyAndAddUnsafe(h,d,f);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(t=!1){return k(this.toHex(t))}toHex(t=!1){const e=S(this.x);return t?`${this.y&o?"03":"02"}${e}`:`04${e}${S(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:i}=this;if(!j(e)||!j(i))throw new Error(t);const r=O(i*i);if(O(r-d(e))!==s)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new y(this.x,O(-this.y))}double(){return p.fromAffine(this).double().toAffine()}add(t){return p.fromAffine(this).add(p.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return p.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,i){const r=p.fromAffine(this).multiply(e),n=p.fromAffine(t).multiplyUnsafe(i),s=r.add(n);return s.equals(p.ZERO)?void 0:s.toAffine()}}function m(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function v(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${E(t)}`);const e=t[1],i=t.subarray(2,e+2);if(!e||i.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===i[0]&&i[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:R(i),left:t.subarray(e+2)}}e.Point=y,y.BASE=new y(u.Gx,u.Gy),y.ZERO=new y(s,s);class b{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=_(t),i="Signature.fromCompact";if("string"!=typeof t&&!e)throw new TypeError(`${i}: Expected string or Uint8Array`);const r=e?E(t):t;if(128!==r.length)throw new Error(`${i}: Expected 64-byte hex`);return new b(C(r.slice(0,64)),C(r.slice(64,128)))}static fromDER(t){const e=_(t);if("string"!=typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:i,s:r}=function(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${E(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:i}=v(t.subarray(2)),{data:r,left:n}=v(i);if(n.length)throw new Error(`Invalid signature: left bytes after parsing: ${E(n)}`);return{r:e,s:r}}(e?t:k(t));return new b(i,r)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!z(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!z(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=u.n>>o;return this.s>t}normalizeS(){return this.hasHighS()?new b(this.r,u.n-this.s):this}toDERRawBytes(t=!1){return k(this.toDERHex(t))}toDERHex(t=!1){const e=m(A(this.s));if(t)return e;const i=m(A(this.r)),r=A(i.length/2),n=A(e.length/2);return`30${A(i.length/2+e.length/2+4)}02${r}${i}02${n}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return k(this.toCompactHex())}toCompactHex(){return S(this.r)+S(this.s)}}function w(...t){if(!t.every(_))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),i=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const n=t[e];i.set(n,r),r+=n.length}return i}function _(t){return t instanceof Uint8Array}e.Signature=b;const x=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function E(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let i=0;i<t.length;i++)e+=x[t[i]];return e}function S(t){if(t>l)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function T(t){return k(S(t))}function A(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function C(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function k(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let i=0;i<e.length;i++){const r=2*i,n=t.slice(r,r+2),s=Number.parseInt(n,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[i]=s}return e}function R(t){return C(E(t))}function P(t){return t instanceof Uint8Array?Uint8Array.from(t):k(t)}function I(t){if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"==typeof t&&z(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function O(t,e=u.P){const i=t%e;return i>=s?i:e+i}function M(t,e){const{P:i}=u;let r=t;for(;e-- >s;)r*=r,r%=i;return r}function D(t,e=u.P){if(t===s||e<=s)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let i=O(t,e),r=e,n=s,a=o,h=o,c=s;for(;i!==s;){const t=r/i,e=r%i,s=n-h*t,o=a-c*t;r=i,i=e,n=h,a=c,h=s,c=o}if(r!==o)throw new Error("invert: does not exist");return O(n,e)}const B=(t,e)=>(t+e/a)/e,L=a**BigInt(128);function N(t){const{n:e}=u,i=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=i,a=B(s*t,e),h=B(-r*t,e);let c=O(t-a*i-h*n,e),l=O(-a*r-h*s,e);const d=c>L,f=l>L;if(d&&(c=e-c),f&&(l=e-l),c>L||l>L)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:l}}function U(t){const{n:e}=u,i=8*t.length-256;let r=R(t);return i>0&&(r>>=BigInt(i)),r>=e&&(r-=e),r}class F{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return e.utils.hmacSha256(this.k,...t)}hmacSync(...t){if("function"!=typeof e.utils.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const i=e.utils.hmacSha256Sync(this.k,...t);if(i instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return i}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function z(t){return s<t&&t<u.n}function j(t){return s<t&&t<u.P}function V(t,e,i){const r=R(t);if(!z(r))return;const{n}=u,a=y.BASE.multiply(r),h=O(a.x,n);if(h===s)return;const c=O(D(r,n)*O(e+i*h,n),n);if(c===s)return;const l=new b(h,c);return{sig:l,recovery:(a.x===l.r?0:2)|Number(a.y&o)}}function G(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"==typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=C(t)}else{if(!_(t))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=R(t)}if(!z(e))throw new Error("Expected private key: 0 < key < n");return e}function H(t){return t instanceof y?(t.assertValidity(),t):y.fromHex(t)}function Y(t){if(t instanceof b)return t.assertValidity(),t;try{return b.fromDER(t)}catch(e){return b.fromCompact(t)}}function K(t){const e=_(t),i="string"==typeof t,r=(e||i)&&t.length;return e?33===r||65===r:i?66===r||130===r:t instanceof y}function W(t){return R(t.length>32?t.slice(0,32):t)}function X(t){const e=W(t),i=O(e,u.n);return q(i<s?e:i)}function q(t){if("bigint"!=typeof t)throw new Error("Expected bigint");return k(S(t))}function $(t,i,r){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const n=P(t),s=G(i),o=[q(s),X(n)];if(null!=r){!0===r&&(r=e.utils.randomBytes(32));const t=P(r);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");o.push(t)}return{seed:w(...o),m:W(n),d:s}}function J(t,e){let{sig:i,recovery:r}=t;const{canonical:n,der:s,recovered:o}=Object.assign({canonical:!0,der:!0},e);n&&i.hasHighS()&&(i=i.normalizeS(),r^=1);const a=s?i.toDERRawBytes():i.toCompactRawBytes();return o?[a,r]:a}e.getPublicKey=function(t,e=!1){return y.fromPrivateKey(t).toRawBytes(e)},e.recoverPublicKey=function(t,e,i,r=!1){return y.fromSignature(t,e,i).toRawBytes(r)},e.getSharedSecret=function(t,e,i=!1){if(K(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!K(e))throw new TypeError("getSharedSecret: second arg must be public key");const r=H(e);return r.assertValidity(),r.multiply(G(t)).toRawBytes(i)},e.sign=async function(t,e,i={}){const{seed:r,m:n,d:s}=$(t,e,i.extraEntropy);let o;const a=new F;for(await a.reseed(r);!(o=V(await a.generate(),n,s));)await a.reseed();return J(o,i)},e.signSync=function(t,e,i={}){const{seed:r,m:n,d:s}=$(t,e,i.extraEntropy);let o;const a=new F;for(a.reseedSync(r);!(o=V(a.generateSync(),n,s));)a.reseedSync();return J(o,i)};const Z={strict:!0};async function Q(t,...i){const r=new Uint8Array(t.split("").map((t=>t.charCodeAt(0)))),n=await e.utils.sha256(r);return R(await e.utils.sha256(w(n,n,...i)))}async function tt(t,e,i){const r=T(t);return O(await Q("BIP0340/challenge",r,e.toRawX(),i),u.n)}function et(t){return(t.y&o)===s}e.verify=function(t,e,i,r=Z){let n;try{n=Y(t),e=P(e)}catch(t){return!1}const{r:o,s:a}=n;if(r.strict&&n.hasHighS())return!1;const h=U(e);if(h===s)return!1;let c;try{c=H(i)}catch(t){return!1}const{n:l}=u,d=D(a,l),f=O(h*d,l),p=O(o*d,l),g=y.BASE.multiplyAndAddUnsafe(c,f,p);return!!g&&O(g.x,l)===o};class it{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=P(t);if(64!==e.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${e.length}`);const i=R(e.subarray(0,32)),r=R(e.subarray(32,64));return new it(i,r)}assertValidity(){const{r:t,s:e}=this;if(!j(t)||!z(e))throw new Error("Invalid signature")}toHex(){return S(this.r)+S(this.s)}toRawBytes(){return k(this.toHex())}}async function rt(t,e,i){const r=t instanceof it;let n;try{n=r?t:it.fromHex(t),r&&n.assertValidity()}catch(t){return!1}const{r:s,s:o}=n,a=P(e);let h;try{h=H(i)}catch(t){return!1}const c=await tt(s,h,a),l=y.BASE.multiplyAndAddUnsafe(h,G(o),O(-c,u.n));return!(!l||!et(l)||l.x!==s)}e.schnorr={Signature:it,getPublicKey:function(t){return y.fromPrivateKey(t).toRawX()},sign:async function(t,i,r=e.utils.randomBytes()){if(null==t)throw new TypeError(`sign: Expected valid message, not "${t}"`);const{n}=u,o=P(t),a=G(i),h=P(r);if(32!==h.length)throw new TypeError("sign: Expected 32 bytes of aux randomness");const c=y.fromPrivateKey(a),l=et(c)?a:n-a,d=l^await Q("BIP0340/aux",h),f=O(await Q("BIP0340/nonce",T(d),c.toRawX(),o),n);if(f===s)throw new Error("sign: Creation of signature failed. k is zero");const p=y.fromPrivateKey(f),g=et(p)?f:n-f,m=await tt(p.x,c,o),v=new it(p.x,O(g+m*l,n)).toRawBytes();if(!await rt(v,o,c.toRawX()))throw new Error("sign: Invalid signature produced");return v},verify:rt},y.BASE._setWindowSize(8);const nt={node:n.default,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0};e.utils={isValidPrivateKey(t){try{return G(t),!0}catch(t){return!1}},hashToPrivateKey:t=>{if((t=P(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=O(R(t),u.n);if(e===s||e===o)throw new Error("Invalid private key");return T(e)},randomBytes:(t=32)=>{if(nt.web)return nt.web.getRandomValues(new Uint8Array(t));if(nt.node){const{randomBytes:e}=nt.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>e.utils.hashToPrivateKey(e.utils.randomBytes(40)),bytesToHex:E,mod:O,sha256:async t=>{if(nt.web){const e=await nt.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}if(nt.node){const{createHash:e}=nt.node;return Uint8Array.from(e("sha256").update(t).digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(nt.web){const i=await nt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=w(...e),n=await nt.web.subtle.sign("HMAC",i,r);return new Uint8Array(n)}if(nt.node){const{createHmac:i}=nt.node,r=i("sha256",t);return e.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=y.BASE){const i=e===y.BASE?e:new y(e.x,e.y);return i._setWindowSize(t),i.multiply(h),i}}},34537:t=>{"use strict";t.exports=function(t,e){for(var i=new Array(arguments.length-1),r=0,n=2,s=!0;n<arguments.length;)i[r++]=arguments[n++];return new Promise((function(n,o){i[r]=function(t){if(s)if(s=!1,t)o(t);else{for(var e=new Array(arguments.length-1),i=0;i<e.length;)e[i++]=arguments[i];n.apply(null,e)}};try{t.apply(e||null,i)}catch(t){s&&(s=!1,o(t))}}))}},97419:(t,e)=>{"use strict";var i=e;i.length=function(t){var e=t.length;if(!e)return 0;for(var i=0;--e%4>1&&"="===t.charAt(e);)++i;return Math.ceil(3*t.length)/4-i};for(var r=new Array(64),n=new Array(123),s=0;s<64;)n[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;i.encode=function(t,e,i){for(var n,s=null,o=[],a=0,h=0;e<i;){var c=t[e++];switch(h){case 0:o[a++]=r[c>>2],n=(3&c)<<4,h=1;break;case 1:o[a++]=r[n|c>>4],n=(15&c)<<2,h=2;break;case 2:o[a++]=r[n|c>>6],o[a++]=r[63&c],h=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return h&&(o[a++]=r[n],o[a++]=61,1===h&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";i.decode=function(t,e,i){for(var r,s=i,a=0,h=0;h<t.length;){var c=t.charCodeAt(h++);if(61===c&&a>1)break;if(void 0===(c=n[c]))throw Error(o);switch(a){case 0:r=c,a=1;break;case 1:e[i++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:e[i++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:e[i++]=(3&r)<<6|c,a=0}}if(1===a)throw Error(o);return i-s},i.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},19211:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:i||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var i=this._listeners[t],r=0;r<i.length;)i[r].fn===e?i.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,i)}return this}},10945:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),i=new Uint8Array(e.buffer),r=128===i[3];function n(t,r,n){e[0]=t,r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],r[n+3]=i[3]}function s(t,r,n){e[0]=t,r[n]=i[3],r[n+1]=i[2],r[n+2]=i[1],r[n+3]=i[0]}function o(t,r){return i[0]=t[r],i[1]=t[r+1],i[2]=t[r+2],i[3]=t[r+3],e[0]}function a(t,r){return i[3]=t[r],i[2]=t[r+1],i[1]=t[r+2],i[0]=t[r+3],e[0]}t.writeFloatLE=r?n:s,t.writeFloatBE=r?s:n,t.readFloatLE=r?o:a,t.readFloatBE=r?a:o}():function(){function e(t,e,i,r){var n=e<0?1:0;if(n&&(e=-e),0===e)t(1/e>0?0:2147483648,i,r);else if(isNaN(e))t(2143289344,i,r);else if(e>34028234663852886e22)t((n<<31|2139095040)>>>0,i,r);else if(e<11754943508222875e-54)t((n<<31|Math.round(e/1401298464324817e-60))>>>0,i,r);else{var s=Math.floor(Math.log(e)/Math.LN2);t((n<<31|s+127<<23|8388607&Math.round(e*Math.pow(2,-s)*8388608))>>>0,i,r)}}function o(t,e,i){var r=t(e,i),n=2*(r>>31)+1,s=r>>>23&255,o=8388607&r;return 255===s?o?NaN:n*(1/0):0===s?1401298464324817e-60*n*o:n*Math.pow(2,s-150)*(o+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,r),t.readFloatLE=o.bind(null,n),t.readFloatBE=o.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),i=new Uint8Array(e.buffer),r=128===i[7];function n(t,r,n){e[0]=t,r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],r[n+3]=i[3],r[n+4]=i[4],r[n+5]=i[5],r[n+6]=i[6],r[n+7]=i[7]}function s(t,r,n){e[0]=t,r[n]=i[7],r[n+1]=i[6],r[n+2]=i[5],r[n+3]=i[4],r[n+4]=i[3],r[n+5]=i[2],r[n+6]=i[1],r[n+7]=i[0]}function o(t,r){return i[0]=t[r],i[1]=t[r+1],i[2]=t[r+2],i[3]=t[r+3],i[4]=t[r+4],i[5]=t[r+5],i[6]=t[r+6],i[7]=t[r+7],e[0]}function a(t,r){return i[7]=t[r],i[6]=t[r+1],i[5]=t[r+2],i[4]=t[r+3],i[3]=t[r+4],i[2]=t[r+5],i[1]=t[r+6],i[0]=t[r+7],e[0]}t.writeDoubleLE=r?n:s,t.writeDoubleBE=r?s:n,t.readDoubleLE=r?o:a,t.readDoubleBE=r?a:o}():function(){function e(t,e,i,r,n,s){var o=r<0?1:0;if(o&&(r=-r),0===r)t(0,n,s+e),t(1/r>0?0:2147483648,n,s+i);else if(isNaN(r))t(0,n,s+e),t(2146959360,n,s+i);else if(r>17976931348623157e292)t(0,n,s+e),t((o<<31|2146435072)>>>0,n,s+i);else{var a;if(r<22250738585072014e-324)t((a=r/5e-324)>>>0,n,s+e),t((o<<31|a/4294967296)>>>0,n,s+i);else{var h=Math.floor(Math.log(r)/Math.LN2);1024===h&&(h=1023),t(4503599627370496*(a=r*Math.pow(2,-h))>>>0,n,s+e),t((o<<31|h+1023<<20|1048576*a&1048575)>>>0,n,s+i)}}}function o(t,e,i,r,n){var s=t(r,n+e),o=t(r,n+i),a=2*(o>>31)+1,h=o>>>20&2047,c=4294967296*(1048575&o)+s;return 2047===h?c?NaN:a*(1/0):0===h?5e-324*a*c:a*Math.pow(2,h-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=o.bind(null,n,0,4),t.readDoubleBE=o.bind(null,s,4,0)}(),t}function i(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}function r(t,e,i){e[i]=t>>>24,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t}function n(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},67199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},76662:t=>{"use strict";t.exports=function(t,e,i){var r=i||8192,n=r>>>1,s=null,o=r;return function(i){if(i<1||i>n)return t(i);o+i>r&&(s=t(r),o=0);var a=e.call(s,o,o+=i);return 7&o&&(o=1+(7|o)),a}}},94997:(t,e)=>{"use strict";var i=e;i.length=function(t){for(var e=0,i=0,r=0;r<t.length;++r)(i=t.charCodeAt(r))<128?e+=1:i<2048?e+=2:55296==(64512&i)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},i.read=function(t,e,i){if(i-e<1)return"";for(var r,n=null,s=[],o=0;e<i;)(r=t[e++])<128?s[o++]=r:r>191&&r<224?s[o++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[o++]=55296+(r>>10),s[o++]=56320+(1023&r)):s[o++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,s.slice(0,o))),n.join("")):String.fromCharCode.apply(String,s.slice(0,o))},i.write=function(t,e,i){for(var r,n,s=i,o=0;o<t.length;++o)(r=t.charCodeAt(o))<128?e[i++]=r:r<2048?(e[i++]=r>>6|192,e[i++]=63&r|128):55296==(64512&r)&&56320==(64512&(n=t.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&n),++o,e[i++]=r>>18|240,e[i++]=r>>12&63|128,e[i++]=r>>6&63|128,e[i++]=63&r|128):(e[i++]=r>>12|224,e[i++]=r>>6&63|128,e[i++]=63&r|128);return i-s}},98099:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(97117);function n(t,e,i){return void 0===e&&(e=new Uint8Array(2)),void 0===i&&(i=0),e[i+0]=t>>>8,e[i+1]=t>>>0,e}function s(t,e,i){return void 0===e&&(e=new Uint8Array(2)),void 0===i&&(i=0),e[i+0]=t>>>0,e[i+1]=t>>>8,e}function o(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function a(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function h(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function c(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function l(t,e,i){return void 0===e&&(e=new Uint8Array(4)),void 0===i&&(i=0),e[i+0]=t>>>24,e[i+1]=t>>>16,e[i+2]=t>>>8,e[i+3]=t>>>0,e}function u(t,e,i){return void 0===e&&(e=new Uint8Array(4)),void 0===i&&(i=0),e[i+0]=t>>>0,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24,e}function d(t,e,i){return void 0===e&&(e=new Uint8Array(8)),void 0===i&&(i=0),l(t/4294967296>>>0,e,i),l(t>>>0,e,i+4),e}function f(t,e,i){return void 0===e&&(e=new Uint8Array(8)),void 0===i&&(i=0),u(t>>>0,e,i),u(t/4294967296>>>0,e,i+4),e}e.readInt16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16},e.readUint16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0},e.readInt16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16},e.readUint16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0},e.writeUint16BE=n,e.writeInt16BE=n,e.writeUint16LE=s,e.writeInt16LE=s,e.readInt32BE=o,e.readUint32BE=a,e.readInt32LE=h,e.readUint32LE=c,e.writeUint32BE=l,e.writeInt32BE=l,e.writeUint32LE=u,e.writeInt32LE=u,e.readInt64BE=function(t,e){void 0===e&&(e=0);var i=o(t,e),r=o(t,e+4);return 4294967296*i+r-4294967296*(r>>31)},e.readUint64BE=function(t,e){return void 0===e&&(e=0),4294967296*a(t,e)+a(t,e+4)},e.readInt64LE=function(t,e){void 0===e&&(e=0);var i=h(t,e);return 4294967296*h(t,e+4)+i-4294967296*(i>>31)},e.readUint64LE=function(t,e){void 0===e&&(e=0);var i=c(t,e);return 4294967296*c(t,e+4)+i},e.writeUint64BE=d,e.writeInt64BE=d,e.writeUint64LE=f,e.writeInt64LE=f,e.readUintBE=function(t,e,i){if(void 0===i&&(i=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-i)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,n=1,s=t/8+i-1;s>=i;s--)r+=e[s]*n,n*=256;return r},e.readUintLE=function(t,e,i){if(void 0===i&&(i=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-i)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,n=1,s=i;s<i+t/8;s++)r+=e[s]*n,n*=256;return r},e.writeUintBE=function(t,e,i,n){if(void 0===i&&(i=new Uint8Array(t/8)),void 0===n&&(n=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=t/8+n-1;o>=n;o--)i[o]=e/s&255,s*=256;return i},e.writeUintLE=function(t,e,i,n){if(void 0===i&&(i=new Uint8Array(t/8)),void 0===n&&(n=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=n;o<n+t/8;o++)i[o]=e/s&255,s*=256;return i},e.readFloat32BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e)},e.readFloat32LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},e.readFloat64BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e)},e.readFloat64LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},e.writeFloat32BE=function(t,e,i){return void 0===e&&(e=new Uint8Array(4)),void 0===i&&(i=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(i,t),e},e.writeFloat32LE=function(t,e,i){return void 0===e&&(e=new Uint8Array(4)),void 0===i&&(i=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(i,t,!0),e},e.writeFloat64BE=function(t,e,i){return void 0===e&&(e=new Uint8Array(8)),void 0===i&&(i=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(i,t),e},e.writeFloat64LE=function(t,e,i){return void 0===e&&(e=new Uint8Array(8)),void 0===i&&(i=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(i,t,!0),e}},25439:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(98099),n=i(17309);function s(t,e,i){for(var n=1634760805,s=857760878,o=2036477234,a=1797285236,h=i[3]<<24|i[2]<<16|i[1]<<8|i[0],c=i[7]<<24|i[6]<<16|i[5]<<8|i[4],l=i[11]<<24|i[10]<<16|i[9]<<8|i[8],u=i[15]<<24|i[14]<<16|i[13]<<8|i[12],d=i[19]<<24|i[18]<<16|i[17]<<8|i[16],f=i[23]<<24|i[22]<<16|i[21]<<8|i[20],p=i[27]<<24|i[26]<<16|i[25]<<8|i[24],g=i[31]<<24|i[30]<<16|i[29]<<8|i[28],y=e[3]<<24|e[2]<<16|e[1]<<8|e[0],m=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=n,_=s,x=o,E=a,S=h,T=c,A=l,C=u,k=d,R=f,P=p,I=g,O=y,M=m,D=v,B=b,L=0;L<20;L+=2)S=(S^=k=k+(O=(O^=w=w+S|0)>>>16|O<<16)|0)>>>20|S<<12,T=(T^=R=R+(M=(M^=_=_+T|0)>>>16|M<<16)|0)>>>20|T<<12,A=(A^=P=P+(D=(D^=x=x+A|0)>>>16|D<<16)|0)>>>20|A<<12,C=(C^=I=I+(B=(B^=E=E+C|0)>>>16|B<<16)|0)>>>20|C<<12,A=(A^=P=P+(D=(D^=x=x+A|0)>>>24|D<<8)|0)>>>25|A<<7,C=(C^=I=I+(B=(B^=E=E+C|0)>>>24|B<<8)|0)>>>25|C<<7,T=(T^=R=R+(M=(M^=_=_+T|0)>>>24|M<<8)|0)>>>25|T<<7,S=(S^=k=k+(O=(O^=w=w+S|0)>>>24|O<<8)|0)>>>25|S<<7,T=(T^=P=P+(B=(B^=w=w+T|0)>>>16|B<<16)|0)>>>20|T<<12,A=(A^=I=I+(O=(O^=_=_+A|0)>>>16|O<<16)|0)>>>20|A<<12,C=(C^=k=k+(M=(M^=x=x+C|0)>>>16|M<<16)|0)>>>20|C<<12,S=(S^=R=R+(D=(D^=E=E+S|0)>>>16|D<<16)|0)>>>20|S<<12,C=(C^=k=k+(M=(M^=x=x+C|0)>>>24|M<<8)|0)>>>25|C<<7,S=(S^=R=R+(D=(D^=E=E+S|0)>>>24|D<<8)|0)>>>25|S<<7,A=(A^=I=I+(O=(O^=_=_+A|0)>>>24|O<<8)|0)>>>25|A<<7,T=(T^=P=P+(B=(B^=w=w+T|0)>>>24|B<<8)|0)>>>25|T<<7;r.writeUint32LE(w+n|0,t,0),r.writeUint32LE(_+s|0,t,4),r.writeUint32LE(x+o|0,t,8),r.writeUint32LE(E+a|0,t,12),r.writeUint32LE(S+h|0,t,16),r.writeUint32LE(T+c|0,t,20),r.writeUint32LE(A+l|0,t,24),r.writeUint32LE(C+u|0,t,28),r.writeUint32LE(k+d|0,t,32),r.writeUint32LE(R+f|0,t,36),r.writeUint32LE(P+p|0,t,40),r.writeUint32LE(I+g|0,t,44),r.writeUint32LE(O+y|0,t,48),r.writeUint32LE(M+m|0,t,52),r.writeUint32LE(D+v|0,t,56),r.writeUint32LE(B+b|0,t,60)}function o(t,e,i,r,o){if(void 0===o&&(o=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(r.length<i.length)throw new Error("ChaCha: destination is shorter than source");var h,c;if(0===o){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=(h=new Uint8Array(16)).length-e.length,h.set(e,c)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");h=e,c=o}for(var l=new Uint8Array(64),u=0;u<i.length;u+=64){s(l,h,t);for(var d=u;d<u+64&&d<i.length;d++)r[d]=i[d]^l[d-u];a(h,0,c)}return n.wipe(l),0===o&&n.wipe(h),r}function a(t,e,i){for(var r=1;i--;)r=r+(255&t[e])|0,t[e]=255&r,r>>>=8,e++;if(r>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=o,e.stream=function(t,e,i,r){return void 0===r&&(r=0),n.wipe(i),o(t,e,i,i,r)}},15501:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(25439),n=i(63027),s=i(17309),o=i(98099),a=i(4153);e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var h=new Uint8Array(16),c=function(){function t(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,i,n){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);r.stream(this._key,o,a,4);var h,c=e.length+this.tagLength;if(n){if(n.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");h=n}else h=new Uint8Array(c);return r.streamXOR(this._key,o,e,h,4),this._authenticate(h.subarray(h.length-this.tagLength,h.length),a,h.subarray(0,h.length-this.tagLength),i),s.wipe(o),h},t.prototype.open=function(t,e,i,n){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(t,o.length-t.length);var h=new Uint8Array(32);r.stream(this._key,o,h,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,h,e.subarray(0,e.length-this.tagLength),i),!a.equal(c,e.subarray(e.length-this.tagLength,e.length)))return null;var l,u=e.length-this.tagLength;if(n){if(n.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");l=n}else l=new Uint8Array(u);return r.streamXOR(this._key,o,e.subarray(0,e.length-this.tagLength),l,4),s.wipe(o),l},t.prototype.clean=function(){return s.wipe(this._key),this},t.prototype._authenticate=function(t,e,i,r){var a=new n.Poly1305(e);r&&(a.update(r),r.length%16>0&&a.update(h.subarray(r.length%16))),a.update(i),i.length%16>0&&a.update(h.subarray(i.length%16));var c=new Uint8Array(8);r&&o.writeUint64LE(r.length,c),a.update(c),o.writeUint64LE(i.length,c),a.update(c);for(var l=a.digest(),u=0;u<l.length;u++)t[u]=l[u];a.clean(),s.wipe(l),s.wipe(c)},t}();e.ChaCha20Poly1305=c},4153:(t,e)=>{"use strict";function i(t,e){if(t.length!==e.length)return 0;for(var i=0,r=0;r<t.length;r++)i|=t[r]^e[r];return 1&i-1>>>8}Object.defineProperty(e,"__esModule",{value:!0}),e.select=function(t,e,i){return~(t-1)&e|t-1&i},e.lessOrEqual=function(t,e){return(0|t)-(0|e)-1>>>31&1},e.compare=i,e.equal=function(t,e){return 0!==t.length&&0!==e.length&&0!==i(t,e)}},79984:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=function(t){return void 0!==t.saveState&&void 0!==t.restoreState&&void 0!==t.cleanSavedState}},512:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(25629),n=i(17309),s=function(){function t(t,e,i,n){void 0===i&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=n;var s=r.hmac(this._hash,i,e);this._hmac=new r.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),i=0;i<e.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[i]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),n.wipe(this._buffer),n.wipe(this._counter),this._bufpos=0},t}();e.HKDF=s},25629:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(79984),n=i(4153),s=i(17309),o=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(i).clean():i.set(e);for(var n=0;n<i.length;n++)i[n]^=54;for(this._inner.update(i),n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(i)}return t.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();e.HMAC=o,e.hmac=function(t,e,i){var r=new o(t,e);r.update(i);var n=r.digest();return r.clean(),n},e.equal=n.equal},97117:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(t,e){var i=65535&t,r=65535&e;return i*r+((t>>>16&65535)*r+i*(e>>>16&65535)<<16>>>0)|0},e.add=function(t,e){return t+e|0},e.sub=function(t,e){return t-e|0},e.rotl=function(t,e){return t<<e|t>>>32-e},e.rotr=function(t,e){return t<<32-e|t>>>e},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},63027:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4153),n=i(17309);e.DIGEST_LENGTH=16;var s=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var i=t[0]|t[1]<<8;this._r[0]=8191&i;var r=t[2]|t[3]<<8;this._r[1]=8191&(i>>>13|r<<3);var n=t[4]|t[5]<<8;this._r[2]=7939&(r>>>10|n<<6);var s=t[6]|t[7]<<8;this._r[3]=8191&(n>>>7|s<<9);var o=t[8]|t[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var h=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|h<<5);var c=t[14]|t[15]<<8;this._r[8]=8191&(h>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,i){for(var r=this._fin?0:2048,n=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],h=this._h[4],c=this._h[5],l=this._h[6],u=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],y=this._r[2],m=this._r[3],v=this._r[4],b=this._r[5],w=this._r[6],_=this._r[7],x=this._r[8],E=this._r[9];i>=16;){var S=t[e+0]|t[e+1]<<8;n+=8191&S;var T=t[e+2]|t[e+3]<<8;s+=8191&(S>>>13|T<<3);var A=t[e+4]|t[e+5]<<8;o+=8191&(T>>>10|A<<6);var C=t[e+6]|t[e+7]<<8;a+=8191&(A>>>7|C<<9);var k=t[e+8]|t[e+9]<<8;h+=8191&(C>>>4|k<<12),c+=k>>>1&8191;var R=t[e+10]|t[e+11]<<8;l+=8191&(k>>>14|R<<2);var P=t[e+12]|t[e+13]<<8;u+=8191&(R>>>11|P<<5);var I=t[e+14]|t[e+15]<<8,O=0,M=O;M+=n*p,M+=s*(5*E),M+=o*(5*x),M+=a*(5*_),O=(M+=h*(5*w))>>>13,M&=8191,M+=c*(5*b),M+=l*(5*v),M+=u*(5*m),M+=(d+=8191&(P>>>8|I<<8))*(5*y);var D=O+=(M+=(f+=I>>>5|r)*(5*g))>>>13;D+=n*g,D+=s*p,D+=o*(5*E),D+=a*(5*x),O=(D+=h*(5*_))>>>13,D&=8191,D+=c*(5*w),D+=l*(5*b),D+=u*(5*v),D+=d*(5*m),O+=(D+=f*(5*y))>>>13,D&=8191;var B=O;B+=n*y,B+=s*g,B+=o*p,B+=a*(5*E),O=(B+=h*(5*x))>>>13,B&=8191,B+=c*(5*_),B+=l*(5*w),B+=u*(5*b),B+=d*(5*v);var L=O+=(B+=f*(5*m))>>>13;L+=n*m,L+=s*y,L+=o*g,L+=a*p,O=(L+=h*(5*E))>>>13,L&=8191,L+=c*(5*x),L+=l*(5*_),L+=u*(5*w),L+=d*(5*b);var N=O+=(L+=f*(5*v))>>>13;N+=n*v,N+=s*m,N+=o*y,N+=a*g,O=(N+=h*p)>>>13,N&=8191,N+=c*(5*E),N+=l*(5*x),N+=u*(5*_),N+=d*(5*w);var U=O+=(N+=f*(5*b))>>>13;U+=n*b,U+=s*v,U+=o*m,U+=a*y,O=(U+=h*g)>>>13,U&=8191,U+=c*p,U+=l*(5*E),U+=u*(5*x),U+=d*(5*_);var F=O+=(U+=f*(5*w))>>>13;F+=n*w,F+=s*b,F+=o*v,F+=a*m,O=(F+=h*y)>>>13,F&=8191,F+=c*g,F+=l*p,F+=u*(5*E),F+=d*(5*x);var z=O+=(F+=f*(5*_))>>>13;z+=n*_,z+=s*w,z+=o*b,z+=a*v,O=(z+=h*m)>>>13,z&=8191,z+=c*y,z+=l*g,z+=u*p,z+=d*(5*E);var j=O+=(z+=f*(5*x))>>>13;j+=n*x,j+=s*_,j+=o*w,j+=a*b,O=(j+=h*v)>>>13,j&=8191,j+=c*m,j+=l*y,j+=u*g,j+=d*p;var V=O+=(j+=f*(5*E))>>>13;V+=n*E,V+=s*x,V+=o*_,V+=a*w,O=(V+=h*b)>>>13,V&=8191,V+=c*v,V+=l*m,V+=u*y,V+=d*g,n=M=8191&(O=(O=((O+=(V+=f*p)>>>13)<<2)+O|0)+(M&=8191)|0),s=D+=O>>>=13,o=B&=8191,a=L&=8191,h=N&=8191,c=U&=8191,l=F&=8191,u=z&=8191,d=j&=8191,f=V&=8191,e+=16,i-=16}this._h[0]=n,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=h,this._h[5]=c,this._h[6]=l,this._h[7]=u,this._h[8]=d,this._h[9]=f},t.prototype.finish=function(t,e){void 0===e&&(e=0);var i,r,n,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=i,i=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*i,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,o[0]=this._h[0]+5,i=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+i,i=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,r=(1^i)-1,s=0;s<10;s++)o[s]&=r;for(r=~r,s=0;s<10;s++)this._h[s]=this._h[s]&r|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),n=this._h[0]+this._pad[0],this._h[0]=65535&n,s=1;s<8;s++)n=(this._h[s]+this._pad[s]|0)+(n>>>16)|0,this._h[s]=65535&n;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,i=0,r=t.length;if(this._leftover){(e=16-this._leftover)>r&&(e=r);for(var n=0;n<e;n++)this._buffer[this._leftover+n]=t[i+n];if(r-=e,i+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(r>=16&&(e=r-r%16,this._blocks(t,i,e),i+=e,r-=e),r){for(n=0;n<r;n++)this._buffer[this._leftover+n]=t[i+n];this._leftover+=r}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();e.Poly1305=s,e.oneTimeAuth=function(t,e){var i=new s(t);i.update(e);var r=i.digest();return i.clean(),r},e.equal=function(t,i){return t.length===e.DIGEST_LENGTH&&i.length===e.DIGEST_LENGTH&&r.equal(t,i)}},31416:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(46008),n=i(98099),s=i(17309);function o(t,i){return void 0===i&&(i=e.defaultRandomSource),i.randomBytes(t)}e.defaultRandomSource=new r.SystemRandomSource,e.randomBytes=o,e.randomUint32=function(t){void 0===t&&(t=e.defaultRandomSource);var i=o(4,t),r=n.readUint32LE(i);return s.wipe(i),r};var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function h(t,i,r){if(void 0===i&&(i=a),void 0===r&&(r=e.defaultRandomSource),i.length<2)throw new Error("randomString charset is too short");if(i.length>256)throw new Error("randomString charset is too long");for(var n="",h=i.length,c=256-256%h;t>0;){for(var l=o(Math.ceil(256*t/c),r),u=0;u<l.length&&t>0;u++){var d=l[u];d<c&&(n+=i.charAt(d%h),t--)}s.wipe(l)}return n}e.randomString=h,e.randomStringForEntropy=function(t,i,r){return void 0===i&&(i=a),void 0===r&&(r=e.defaultRandomSource),h(Math.ceil(t/(Math.log(i.length)/Math.LN2)),i,r)}},75455:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var e=new Uint8Array(t),i=0;i<e.length;i+=65536)this._crypto.getRandomValues(e.subarray(i,i+Math.min(e.length-i,65536)));return e},t}();e.BrowserRandomSource=i},58871:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(17309),n=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t=i(35883);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(t),n=0;n<i.length;n++)i[n]=e[n];return r.wipe(e),i},t}();e.NodeRandomSource=n},46008:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(75455),n=i(58871),s=function(){function t(){return this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new n.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)},t}();e.SystemRandomSource=s},73294:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(98099),n=i(17309);e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var s=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=e,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&e>0;)this._buffer[this._bufferLength++]=t[i++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(e>=this.blockSize&&(i=a(this._temp,this._state,t,i,e),e%=this.blockSize);e>0;)this._buffer[this._bufferLength++]=t[i++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,i=this._bufferLength,n=e/536870912|0,s=e<<3,o=e%64<56?64:128;this._buffer[i]=128;for(var h=i+1;h<o-8;h++)this._buffer[h]=0;r.writeUint32BE(n,this._buffer,o-8),r.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(h=0;h<this.digestLength/4;h++)r.writeUint32BE(this._state[h],t,4*h);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){n.wipe(t.state),t.buffer&&n.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,i,n,s){for(;s>=64;){for(var a=e[0],h=e[1],c=e[2],l=e[3],u=e[4],d=e[5],f=e[6],p=e[7],g=0;g<16;g++){var y=n+4*g;t[g]=r.readUint32BE(i,y)}for(g=16;g<64;g++){var m=t[g-2],v=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,b=((m=t[g-15])>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;t[g]=(v+t[g-7]|0)+(b+t[g-16]|0)}for(g=0;g<64;g++)v=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&f)|0)+(p+(o[g]+t[g]|0)|0)|0,b=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&h^a&c^h&c)|0,p=f,f=d,d=u,u=l+v|0,l=c,c=h,h=a,a=v+b|0;e[0]+=a,e[1]+=h,e[2]+=c,e[3]+=l,e[4]+=u,e[5]+=d,e[6]+=f,e[7]+=p,n+=64,s-=64}return n}e.hash=function(t){var e=new s;e.update(t);var i=e.digest();return e.clean(),i}},17309:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(t){for(var e=0;e<t.length;e++)t[e]=0;return t}},57664:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(31416),n=i(17309);function s(t){var e=new Float64Array(16);if(t)for(var i=0;i<t.length;i++)e[i]=t[i];return e}e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;var o=new Uint8Array(32);o[0]=9;var a=s([56129,1]);function h(t){for(var e=1,i=0;i<16;i++){var r=t[i]+e+65535;e=Math.floor(r/65536),t[i]=r-65536*e}t[0]+=e-1+37*(e-1)}function c(t,e,i){for(var r=~(i-1),n=0;n<16;n++){var s=r&(t[n]^e[n]);t[n]^=s,e[n]^=s}}function l(t,e,i){for(var r=0;r<16;r++)t[r]=e[r]+i[r]}function u(t,e,i){for(var r=0;r<16;r++)t[r]=e[r]-i[r]}function d(t,e,i){var r,n,s=0,o=0,a=0,h=0,c=0,l=0,u=0,d=0,f=0,p=0,g=0,y=0,m=0,v=0,b=0,w=0,_=0,x=0,E=0,S=0,T=0,A=0,C=0,k=0,R=0,P=0,I=0,O=0,M=0,D=0,B=0,L=i[0],N=i[1],U=i[2],F=i[3],z=i[4],j=i[5],V=i[6],G=i[7],H=i[8],Y=i[9],K=i[10],W=i[11],X=i[12],q=i[13],$=i[14],J=i[15];s+=(r=e[0])*L,o+=r*N,a+=r*U,h+=r*F,c+=r*z,l+=r*j,u+=r*V,d+=r*G,f+=r*H,p+=r*Y,g+=r*K,y+=r*W,m+=r*X,v+=r*q,b+=r*$,w+=r*J,o+=(r=e[1])*L,a+=r*N,h+=r*U,c+=r*F,l+=r*z,u+=r*j,d+=r*V,f+=r*G,p+=r*H,g+=r*Y,y+=r*K,m+=r*W,v+=r*X,b+=r*q,w+=r*$,_+=r*J,a+=(r=e[2])*L,h+=r*N,c+=r*U,l+=r*F,u+=r*z,d+=r*j,f+=r*V,p+=r*G,g+=r*H,y+=r*Y,m+=r*K,v+=r*W,b+=r*X,w+=r*q,_+=r*$,x+=r*J,h+=(r=e[3])*L,c+=r*N,l+=r*U,u+=r*F,d+=r*z,f+=r*j,p+=r*V,g+=r*G,y+=r*H,m+=r*Y,v+=r*K,b+=r*W,w+=r*X,_+=r*q,x+=r*$,E+=r*J,c+=(r=e[4])*L,l+=r*N,u+=r*U,d+=r*F,f+=r*z,p+=r*j,g+=r*V,y+=r*G,m+=r*H,v+=r*Y,b+=r*K,w+=r*W,_+=r*X,x+=r*q,E+=r*$,S+=r*J,l+=(r=e[5])*L,u+=r*N,d+=r*U,f+=r*F,p+=r*z,g+=r*j,y+=r*V,m+=r*G,v+=r*H,b+=r*Y,w+=r*K,_+=r*W,x+=r*X,E+=r*q,S+=r*$,T+=r*J,u+=(r=e[6])*L,d+=r*N,f+=r*U,p+=r*F,g+=r*z,y+=r*j,m+=r*V,v+=r*G,b+=r*H,w+=r*Y,_+=r*K,x+=r*W,E+=r*X,S+=r*q,T+=r*$,A+=r*J,d+=(r=e[7])*L,f+=r*N,p+=r*U,g+=r*F,y+=r*z,m+=r*j,v+=r*V,b+=r*G,w+=r*H,_+=r*Y,x+=r*K,E+=r*W,S+=r*X,T+=r*q,A+=r*$,C+=r*J,f+=(r=e[8])*L,p+=r*N,g+=r*U,y+=r*F,m+=r*z,v+=r*j,b+=r*V,w+=r*G,_+=r*H,x+=r*Y,E+=r*K,S+=r*W,T+=r*X,A+=r*q,C+=r*$,k+=r*J,p+=(r=e[9])*L,g+=r*N,y+=r*U,m+=r*F,v+=r*z,b+=r*j,w+=r*V,_+=r*G,x+=r*H,E+=r*Y,S+=r*K,T+=r*W,A+=r*X,C+=r*q,k+=r*$,R+=r*J,g+=(r=e[10])*L,y+=r*N,m+=r*U,v+=r*F,b+=r*z,w+=r*j,_+=r*V,x+=r*G,E+=r*H,S+=r*Y,T+=r*K,A+=r*W,C+=r*X,k+=r*q,R+=r*$,P+=r*J,y+=(r=e[11])*L,m+=r*N,v+=r*U,b+=r*F,w+=r*z,_+=r*j,x+=r*V,E+=r*G,S+=r*H,T+=r*Y,A+=r*K,C+=r*W,k+=r*X,R+=r*q,P+=r*$,I+=r*J,m+=(r=e[12])*L,v+=r*N,b+=r*U,w+=r*F,_+=r*z,x+=r*j,E+=r*V,S+=r*G,T+=r*H,A+=r*Y,C+=r*K,k+=r*W,R+=r*X,P+=r*q,I+=r*$,O+=r*J,v+=(r=e[13])*L,b+=r*N,w+=r*U,_+=r*F,x+=r*z,E+=r*j,S+=r*V,T+=r*G,A+=r*H,C+=r*Y,k+=r*K,R+=r*W,P+=r*X,I+=r*q,O+=r*$,M+=r*J,b+=(r=e[14])*L,w+=r*N,_+=r*U,x+=r*F,E+=r*z,S+=r*j,T+=r*V,A+=r*G,C+=r*H,k+=r*Y,R+=r*K,P+=r*W,I+=r*X,O+=r*q,M+=r*$,D+=r*J,w+=(r=e[15])*L,o+=38*(x+=r*U),a+=38*(E+=r*F),h+=38*(S+=r*z),c+=38*(T+=r*j),l+=38*(A+=r*V),u+=38*(C+=r*G),d+=38*(k+=r*H),f+=38*(R+=r*Y),p+=38*(P+=r*K),g+=38*(I+=r*W),y+=38*(O+=r*X),m+=38*(M+=r*q),v+=38*(D+=r*$),b+=38*(B+=r*J),s=(r=(s+=38*(_+=r*N))+(n=1)+65535)-65536*(n=Math.floor(r/65536)),o=(r=o+n+65535)-65536*(n=Math.floor(r/65536)),a=(r=a+n+65535)-65536*(n=Math.floor(r/65536)),h=(r=h+n+65535)-65536*(n=Math.floor(r/65536)),c=(r=c+n+65535)-65536*(n=Math.floor(r/65536)),l=(r=l+n+65535)-65536*(n=Math.floor(r/65536)),u=(r=u+n+65535)-65536*(n=Math.floor(r/65536)),d=(r=d+n+65535)-65536*(n=Math.floor(r/65536)),f=(r=f+n+65535)-65536*(n=Math.floor(r/65536)),p=(r=p+n+65535)-65536*(n=Math.floor(r/65536)),g=(r=g+n+65535)-65536*(n=Math.floor(r/65536)),y=(r=y+n+65535)-65536*(n=Math.floor(r/65536)),m=(r=m+n+65535)-65536*(n=Math.floor(r/65536)),v=(r=v+n+65535)-65536*(n=Math.floor(r/65536)),b=(r=b+n+65535)-65536*(n=Math.floor(r/65536)),w=(r=w+n+65535)-65536*(n=Math.floor(r/65536)),s=(r=(s+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(r/65536)),o=(r=o+n+65535)-65536*(n=Math.floor(r/65536)),a=(r=a+n+65535)-65536*(n=Math.floor(r/65536)),h=(r=h+n+65535)-65536*(n=Math.floor(r/65536)),c=(r=c+n+65535)-65536*(n=Math.floor(r/65536)),l=(r=l+n+65535)-65536*(n=Math.floor(r/65536)),u=(r=u+n+65535)-65536*(n=Math.floor(r/65536)),d=(r=d+n+65535)-65536*(n=Math.floor(r/65536)),f=(r=f+n+65535)-65536*(n=Math.floor(r/65536)),p=(r=p+n+65535)-65536*(n=Math.floor(r/65536)),g=(r=g+n+65535)-65536*(n=Math.floor(r/65536)),y=(r=y+n+65535)-65536*(n=Math.floor(r/65536)),m=(r=m+n+65535)-65536*(n=Math.floor(r/65536)),v=(r=v+n+65535)-65536*(n=Math.floor(r/65536)),b=(r=b+n+65535)-65536*(n=Math.floor(r/65536)),w=(r=w+n+65535)-65536*(n=Math.floor(r/65536)),s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=h,t[4]=c,t[5]=l,t[6]=u,t[7]=d,t[8]=f,t[9]=p,t[10]=g,t[11]=y,t[12]=m,t[13]=v,t[14]=b,t[15]=w}function f(t,e){d(t,e,e)}function p(t,e){for(var i=new Uint8Array(32),r=new Float64Array(80),n=s(),o=s(),p=s(),g=s(),y=s(),m=s(),v=0;v<31;v++)i[v]=t[v];for(i[31]=127&t[31]|64,i[0]&=248,function(t,e){for(var i=0;i<16;i++)t[i]=e[2*i]+(e[2*i+1]<<8);t[15]&=32767}(r,e),v=0;v<16;v++)o[v]=r[v];for(n[0]=g[0]=1,v=254;v>=0;--v){var b=i[v>>>3]>>>(7&v)&1;c(n,o,b),c(p,g,b),l(y,n,p),u(n,n,p),l(p,o,g),u(o,o,g),f(g,y),f(m,n),d(n,p,n),d(p,o,y),l(y,n,p),u(n,n,p),f(o,n),u(p,g,m),d(n,p,a),l(n,n,g),d(p,p,n),d(n,g,m),d(g,o,r),f(o,y),c(n,o,b),c(p,g,b)}for(v=0;v<16;v++)r[v+16]=n[v],r[v+32]=p[v],r[v+48]=o[v],r[v+64]=g[v];var w=r.subarray(32),_=r.subarray(16);!function(t,e){for(var i=s(),r=0;r<16;r++)i[r]=e[r];for(r=253;r>=0;r--)f(i,i),2!==r&&4!==r&&d(i,i,e);for(r=0;r<16;r++)t[r]=i[r]}(w,w),d(_,_,w);var x=new Uint8Array(32);return function(t,e){for(var i=s(),r=s(),n=0;n<16;n++)r[n]=e[n];h(r),h(r),h(r);for(var o=0;o<2;o++){for(i[0]=r[0]-65517,n=1;n<15;n++)i[n]=r[n]-65535-(i[n-1]>>16&1),i[n-1]&=65535;i[15]=r[15]-32767-(i[14]>>16&1);var a=i[15]>>16&1;i[14]&=65535,c(r,i,1-a)}for(n=0;n<16;n++)t[2*n]=255&r[n],t[2*n+1]=r[n]>>8}(x,_),x}function g(t){return p(t,o)}function y(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var i=new Uint8Array(t);return{publicKey:g(i),secretKey:i}}e.scalarMult=p,e.scalarMultBase=g,e.generateKeyPairFromSeed=y,e.generateKeyPair=function(t){var e=r.randomBytes(32,t),i=y(e);return n.wipe(e),i},e.sharedKey=function(t,i,r){if(void 0===r&&(r=!1),t.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(i.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var n=p(t,i);if(r){for(var s=0,o=0;o<n.length;o++)s|=n[o];if(0===s)throw new Error("X25519: invalid shared key")}return n}},63573:(t,e)=>{"use strict";const i=Math.exp;t.exports=function(t){if("number"!=typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let e,r,n=0,s=0,o=0,a={push:function(a,h){if(r){const c=1-i(-(a-r)/t),l=h-e;e=c*h+(1-c)*e,n=(1-c)*(n+l*(c*l)),s=Math.sqrt(n),o=e+c*l}else e=h;r=a},movingAverage:function(){return e},variance:function(){return n},deviation:function(){return s},forecast:function(){return o}};return a}},42235:t=>{t.exports=class extends Error{constructor(t,e){super(t||"The operation was aborted"),this.type="aborted",this.code=e||"ABORT_ERR"}}},61623:(t,e,i)=>{const r=i(22412),n=i(42235),s=(t,e,i)=>o(t,Array.isArray(e)?e:[{signal:e,options:i}]),o=(t,e)=>(t=r(t),e=e.map((({signal:t,options:e})=>({signal:t,options:e||{}}))),async function*(){let i;const r=()=>{i&&i()};for(const{signal:t}of e)t.addEventListener("abort",r);for(;;){let s;try{for(const{signal:t,options:i}of e)if(t.aborted){const{abortMessage:t,abortCode:e}=i;throw new n(t,e)}const r=new Promise(((t,r)=>{i=()=>{const{options:t}=e.find((({signal:t})=>t.aborted)),{abortMessage:i,abortCode:s}=t;r(new n(i,s))}}));s=await Promise.race([r,t.next()]),i=null}catch(i){for(const{signal:t}of e)t.removeEventListener("abort",r);const n=e.find((({signal:t})=>t.aborted)),s="aborted"===i.type&&n;if(s&&n.options.onAbort&&await n.options.onAbort(t),"function"==typeof t.return)try{const e=t.return();e instanceof Promise&&e.catch((t=>{null!=n.options.onReturnError&&n.options.onReturnError(t)}))}catch(t){null!=n.options.onReturnError&&n.options.onReturnError(t)}if(s&&n.options.returnOnAbort)return;throw i}if(s.done)break;yield s.value}for(const{signal:t}of e)t.removeEventListener("abort",r)}()),a=(t,e,i)=>h(t,Array.isArray(e)?e:[{signal:e,options:i}]),h=(t,e)=>i=>t(o(i,e));t.exports=s,t.exports.AbortError=n,t.exports.source=s,t.exports.sink=a,t.exports.transform=a,t.exports.duplex=(t,e,i)=>((t,e)=>({sink:h(t.sink,e),source:o(t.source,e)}))(t,Array.isArray(e)?e:[{signal:e,options:i}])},18508:(t,e,i)=>{"use strict";const r=Object.freeze({});function n(t){if("object"!=typeof t||null===t)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._operations=[],this._written=!1}n.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},n.prototype.put=function(t,e,i){this._checkWritten();const n=this.db._checkKey(t)||this.db._checkValue(e);if(n)throw n;return t=this.db._serializeKey(t),e=this.db._serializeValue(e),this._put(t,e,null!=i?i:r),this},n.prototype._put=function(t,e,i){this._operations.push({...i,type:"put",key:t,value:e})},n.prototype.del=function(t,e){this._checkWritten();const i=this.db._checkKey(t);if(i)throw i;return t=this.db._serializeKey(t),this._del(t,null!=e?e:r),this},n.prototype._del=function(t,e){this._operations.push({...e,type:"del",key:t})},n.prototype.clear=function(){return this._checkWritten(),this._clear(),this},n.prototype._clear=function(){this._operations=[]},n.prototype.write=function(t,e){if(this._checkWritten(),"function"==typeof t&&(e=t),"function"!=typeof e)throw new Error("write() requires a callback argument");"object"==typeof t&&null!==t||(t={}),this._written=!0,this._write(t,e)},n.prototype._write=function(t,e){this.db._batch(this._operations,t,e)},n.prototype._nextTick=i(17212),t.exports=n},43538:(t,e,i)=>{"use strict";function r(t){if("object"!=typeof t||null===t)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){let e=this;if(void 0===t)e=new Promise((function(e,i){t=function(t,r,n){t?i(t):void 0===r&&void 0===n?e():e([r,n])}}));else if("function"!=typeof t)throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(t,new Error("cannot call next() after end()")),e):this._nexting?(this._nextTick(t,new Error("cannot call next() before previous next() has completed")),e):(this._nexting=!0,this._next(((e,...i)=>{this._nexting=!1,t(e,...i)})),e)},r.prototype._next=function(t){this._nextTick(t)},r.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)},r.prototype._seek=function(t){},r.prototype.end=function(t){let e;if(void 0===t)e=new Promise((function(e,i){t=function(t){t?i(t):e()}}));else if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(t,new Error("end() already called on iterator")),e):(this._ended=!0,this._end(t),e)},r.prototype._end=function(t){this._nextTick(t)},r.prototype[Symbol.asyncIterator]=async function*(){try{let t;for(;void 0!==(t=await this.next());)yield t}finally{this._ended||await this.end()}},r.prototype._nextTick=i(17212),t.exports=r},32554:(t,e,i)=>{"use strict";const r=i(51675),n=i(35214),s=i(16957),o=i(43538),a=i(18508),h=i(90070).R,c=i(90070).F,l=Object.prototype.hasOwnProperty,u=["lt","lte","gt","gte"];function d(t){this.status="new",this.supports=r(t,{status:!0})}function f(t,e){const i={};for(const r in e){if(!l.call(e,r))continue;if("start"===r||"end"===r)throw new Error('Legacy range options ("start" and "end") have been removed');let n=e[r];p(r)&&(n=t._serializeKey(n)),i[r]=n}return i}function p(t){return-1!==u.indexOf(t)}d.prototype.open=function(t,e){const i=this.status;if("function"==typeof t&&(e=t),"function"!=typeof e)throw new Error("open() requires a callback argument");"object"==typeof t&&null!==t||(t={}),t.createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists,this.status="opening",this._open(t,(t=>{if(t)return this.status=i,e(t);this.status="open",e()}))},d.prototype._open=function(t,e){this._nextTick(e)},d.prototype.close=function(t){const e=this.status;if("function"!=typeof t)throw new Error("close() requires a callback argument");this.status="closing",this._close((i=>{if(i)return this.status=e,t(i);this.status="closed",t()}))},d.prototype._close=function(t){this._nextTick(t)},d.prototype.get=function(t,e,i){if("function"==typeof e&&(i=e),"function"!=typeof i)throw new Error("get() requires a callback argument");const r=this._checkKey(t);if(r)return this._nextTick(i,r);t=this._serializeKey(t),"object"==typeof e&&null!==e||(e={}),e.asBuffer=!1!==e.asBuffer,this._get(t,e,i)},d.prototype._get=function(t,e,i){this._nextTick((function(){i(new Error("NotFound"))}))},d.prototype.getMany=function(t,e,i){if(i=h(e,i),i=s.fromCallback(i),e=c(e),function(t,e){return!t.isOperational()&&(t._nextTick(e,new Error("Database is not open")),!0)}(this,i))return i.promise;if(!Array.isArray(t))return this._nextTick(i,new Error("getMany() requires an array argument")),i.promise;if(0===t.length)return this._nextTick(i,null,[]),i.promise;"boolean"!=typeof e.asBuffer&&(e={...e,asBuffer:!0});const r=new Array(t.length);for(let e=0;e<t.length;e++){const n=t[e],s=this._checkKey(n);if(s)return this._nextTick(i,s),i.promise;r[e]=this._serializeKey(n)}return this._getMany(r,e,i),i.promise},d.prototype._getMany=function(t,e,i){this._nextTick(i,null,new Array(t.length).fill(void 0))},d.prototype.put=function(t,e,i,r){if("function"==typeof i&&(r=i),"function"!=typeof r)throw new Error("put() requires a callback argument");const n=this._checkKey(t)||this._checkValue(e);if(n)return this._nextTick(r,n);t=this._serializeKey(t),e=this._serializeValue(e),"object"==typeof i&&null!==i||(i={}),this._put(t,e,i,r)},d.prototype._put=function(t,e,i,r){this._nextTick(r)},d.prototype.del=function(t,e,i){if("function"==typeof e&&(i=e),"function"!=typeof i)throw new Error("del() requires a callback argument");const r=this._checkKey(t);if(r)return this._nextTick(i,r);t=this._serializeKey(t),"object"==typeof e&&null!==e||(e={}),this._del(t,e,i)},d.prototype._del=function(t,e,i){this._nextTick(i)},d.prototype.batch=function(t,e,i){if(!arguments.length)return this._chainedBatch();if("function"==typeof e&&(i=e),"function"==typeof t&&(i=t),"function"!=typeof i)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return this._nextTick(i,new Error("batch(array) requires an array argument"));if(0===t.length)return this._nextTick(i);"object"==typeof e&&null!==e||(e={});const r=new Array(t.length);for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this._nextTick(i,new Error("batch(array) element must be an object and not `null`"));const n=Object.assign({},t[e]);if("put"!==n.type&&"del"!==n.type)return this._nextTick(i,new Error("`type` must be 'put' or 'del'"));const s=this._checkKey(n.key);if(s)return this._nextTick(i,s);if(n.key=this._serializeKey(n.key),"put"===n.type){const t=this._checkValue(n.value);if(t)return this._nextTick(i,t);n.value=this._serializeValue(n.value)}r[e]=n}this._batch(r,e,i)},d.prototype._batch=function(t,e,i){this._nextTick(i)},d.prototype.clear=function(t,e){if("function"==typeof t)e=t;else if("function"!=typeof e)throw new Error("clear() requires a callback argument");(t=f(this,t)).reverse=!!t.reverse,t.limit="limit"in t?t.limit:-1,this._clear(t,e)},d.prototype._clear=function(t,e){t.keys=!0,t.values=!1,t.keyAsBuffer=!0,t.valueAsBuffer=!0;const i=this._iterator(t),r={},n=t=>{if(t)return i.end((function(){e(t)}));i.next(((t,s)=>t?n(t):void 0===s?i.end(e):void this._del(s,r,n)))};n()},d.prototype._setupIteratorOptions=function(t){return(t=f(this,t)).reverse=!!t.reverse,t.keys=!1!==t.keys,t.values=!1!==t.values,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=!1!==t.keyAsBuffer,t.valueAsBuffer=!1!==t.valueAsBuffer,t},d.prototype.iterator=function(t){return"object"==typeof t&&null!==t||(t={}),t=this._setupIteratorOptions(t),this._iterator(t)},d.prototype._iterator=function(t){return new o(this)},d.prototype._chainedBatch=function(){return new a(this)},d.prototype._serializeKey=function(t){return t},d.prototype._serializeValue=function(t){return t},d.prototype._checkKey=function(t){return null==t?new Error("key cannot be `null` or `undefined`"):n(t)&&0===t.length?new Error("key cannot be an empty Buffer"):""===t?new Error("key cannot be an empty String"):Array.isArray(t)&&0===t.length?new Error("key cannot be an empty Array"):void 0},d.prototype._checkValue=function(t){if(null==t)return new Error("value cannot be `null` or `undefined`")},d.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},d.prototype._isOperational=function(){return!1},d.prototype._nextTick=i(17212),t.exports=d},24012:(t,e,i)=>{"use strict";e.AbstractLevelDOWN=i(32554),e.AbstractIterator=i(43538),e.AbstractChainedBatch=i(18508)},90070:(t,e)=>{"use strict";e.R=function(t,e){return"function"==typeof t?t:e},e.F=function(t){return"object"==typeof t&&null!==t?t:{}}},17212:(t,e,i)=>{"use strict";const r=i(54375);t.exports=function(t,...e){0===e.length?r(t):r((()=>t(...e)))}},35214:t=>{t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},56455:(t,e,i)=>{"use strict";const r=i(95602),n=i(75281);class s extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);let e=(t=[...t].map((t=>t instanceof Error?t:null!==t&&"object"==typeof t?Object.assign(new Error(t.message),t):new Error(t)))).map((t=>"string"==typeof t.stack?n(t.stack).replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""):String(t))).join("\n");e="\n"+r(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors)yield t}}t.exports=s},44050:(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__(34155),t;self,t=function(){return(()=>{var __webpack_modules__={5406:function(t){t.exports=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"encode",(function(){return k})),i.d(e,"decode",(function(){return V})),i.d(e,"decodeAsync",(function(){return X})),i.d(e,"decodeArrayStream",(function(){return q})),i.d(e,"decodeStream",(function(){return $})),i.d(e,"Decoder",(function(){return z})),i.d(e,"Encoder",(function(){return A})),i.d(e,"ExtensionCodec",(function(){return E})),i.d(e,"ExtData",(function(){return f})),i.d(e,"EXT_TIMESTAMP",(function(){return y})),i.d(e,"encodeDateToTimeSpec",(function(){return v})),i.d(e,"encodeTimeSpecToTimestamp",(function(){return m})),i.d(e,"decodeTimestampToTimeSpec",(function(){return w})),i.d(e,"encodeTimestampExtension",(function(){return b})),i.d(e,"decodeTimestampExtension",(function(){return _}));var r=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,s=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o},n=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},s=void 0!==process&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function o(t){for(var e=t.length,i=0,r=0;r<e;){var n=t.charCodeAt(r++);if(0!=(4294967168&n))if(0==(4294965248&n))i+=2;else{if(n>=55296&&n<=56319&&r<e){var s=t.charCodeAt(r);56320==(64512&s)&&(++r,n=((1023&n)<<10)+(1023&s)+65536)}i+=0==(4294901760&n)?3:4}else i++}return i}var a=s?new TextEncoder:void 0,h=void 0!==process?200:0,c=(null==a?void 0:a.encodeInto)?function(t,e,i){a.encodeInto(t,e.subarray(i))}:function(t,e,i){e.set(a.encode(t),i)};function l(t,e,i){for(var r=e,s=r+i,o=[],a="";r<s;){var h=t[r++];if(0==(128&h))o.push(h);else if(192==(224&h)){var c=63&t[r++];o.push((31&h)<<6|c)}else if(224==(240&h)){c=63&t[r++];var l=63&t[r++];o.push((31&h)<<12|c<<6|l)}else if(240==(248&h)){var u=(7&h)<<18|(c=63&t[r++])<<12|(l=63&t[r++])<<6|63&t[r++];u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u)}else o.push(h);o.length>=4096&&(a+=String.fromCharCode.apply(String,n(o)),o.length=0)}return o.length>0&&(a+=String.fromCharCode.apply(String,n(o))),a}var u=s?new TextDecoder:null,d=void 0!==process?200:0,f=function(t,e){this.type=t,this.data=e};function p(t,e,i){var r=Math.floor(i/4294967296),n=i;t.setUint32(e,r),t.setUint32(e+4,n)}function g(t,e){var i=t.getInt32(e),r=t.getUint32(e+4),n=i<Math.floor(Number.MIN_SAFE_INTEGER/4294967296)||i===Math.floor(Number.MIN_SAFE_INTEGER/4294967296)&&0===r,s=i>Math.floor(Number.MAX_SAFE_INTEGER/4294967296);return n||s?BigInt(i)*BigInt(4294967296)+BigInt(r):4294967296*i+r}var y=-1;function m(t){var e,i=t.sec,r=t.nsec;if(i>=0&&r>=0&&i<=17179869183){if(0===r&&i<=4294967295){var n=new Uint8Array(4);return(e=new DataView(n.buffer)).setUint32(0,i),n}var s=i/4294967296,o=4294967295&i;return n=new Uint8Array(8),(e=new DataView(n.buffer)).setUint32(0,r<<2|3&s),e.setUint32(4,o),n}return n=new Uint8Array(12),(e=new DataView(n.buffer)).setUint32(0,r),p(e,4,i),n}function v(t){var e=t.getTime(),i=Math.floor(e/1e3),r=1e6*(e-1e3*i),n=Math.floor(r/1e9);return{sec:i+n,nsec:r-1e9*n}}function b(t){return t instanceof Date?m(v(t)):null}function w(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:var i=e.getUint32(0);return{sec:4294967296*(3&i)+e.getUint32(4),nsec:i>>>2};case 12:return{sec:g(e,4),nsec:e.getUint32(0)};default:throw new Error("Unrecognized data size for timestamp: "+t.length)}}function _(t){var e=w(t);return new Date(1e3*e.sec+e.nsec/1e6)}var x={type:y,encode:b,decode:_},E=function(){function t(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(x)}return t.prototype.register=function(t){var e=t.type,i=t.encode,r=t.decode;if(e>=0)this.encoders[e]=i,this.decoders[e]=r;else{var n=1+e;this.builtInEncoders[n]=i,this.builtInDecoders[n]=r}},t.prototype.tryToEncode=function(t,e){for(var i=0;i<this.builtInEncoders.length;i++)if(null!=(r=this.builtInEncoders[i])&&null!=(n=r(t,e)))return new f(-1-i,n);for(i=0;i<this.encoders.length;i++){var r,n;if(null!=(r=this.encoders[i])&&null!=(n=r(t,e)))return new f(i,n)}return t instanceof f?t:null},t.prototype.decode=function(t,e,i){var r=e<0?this.builtInDecoders[-1-e]:this.decoders[e];return r?r(t,e,i):new f(e,t)},t.defaultCodec=new t,t}();function S(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}var T=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(){function t(t,e,i,r,n,s,o,a){void 0===t&&(t=E.defaultCodec),void 0===e&&(e=void 0),void 0===i&&(i=100),void 0===r&&(r=2048),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),this.extensionCodec=t,this.context=e,this.maxDepth=i,this.initialBufferSize=r,this.sortKeys=n,this.forceFloat32=s,this.ignoreUndefined=o,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encode=function(t){return this.reinitializeState(),this.doEncode(t,1),this.getUint8Array()},t.prototype.doEncode=function(t,e){if(e>this.maxDepth)throw new Error("Too deep objects in depth "+e);null==t?this.encodeNil():"boolean"==typeof t?this.encodeBoolean(t):"number"==typeof t?this.encodeNumber(t):"string"==typeof t?this.encodeString(t):"bigint"==typeof t?this.encodebigint(t):this.encodeObject(t,e)},t.prototype.ensureBufferSizeToWrite=function(t){var e=this.pos+t;this.view.byteLength<e&&this.resizeBuffer(2*e)},t.prototype.resizeBuffer=function(t){var e=new ArrayBuffer(t),i=new Uint8Array(e),r=new DataView(e);i.set(this.bytes),this.view=r,this.bytes=i},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(t){!1===t?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(t){Number.isSafeInteger(t)&&!this.forceIntegerToFloat?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):(this.writeU8(211),this.writeI64(t)):this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))},t.prototype.encodebigint=function(t){t>=BigInt(0)?t<BigInt(128)?this.writeU8(Number(t)):t<BigInt(256)?(this.writeU8(204),this.writeU8(Number(t))):t<BigInt(65536)?(this.writeU8(205),this.writeU16(Number(t))):t<BigInt(4294967296)?(this.writeU8(206),this.writeU32(Number(t))):(this.writeU8(207),this.writeBig64(t)):t>=BigInt(-32)?this.writeU8(224|Number(t)+32):t>=BigInt(-128)?(this.writeU8(208),this.writeI8(Number(t))):t>=BigInt(-32768)?(this.writeU8(209),this.writeI16(Number(t))):t>=BigInt(-2147483648)?(this.writeU8(210),this.writeI32(Number(t))):(this.writeU8(211),this.writeBig64(t))},t.prototype.writeStringHeader=function(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too long string: "+t+" bytes in UTF-8");this.writeU8(219),this.writeU32(t)}},t.prototype.encodeString=function(t){var e=t.length;if(s&&e>h){var i=o(t);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),c(t,this.bytes,this.pos),this.pos+=i}else i=o(t),this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),function(t,e,i){for(var r=t.length,n=i,s=0;s<r;){var o=t.charCodeAt(s++);if(0!=(4294967168&o)){if(0==(4294965248&o))e[n++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){var a=t.charCodeAt(s);56320==(64512&a)&&(++s,o=((1023&o)<<10)+(1023&a)+65536)}0==(4294901760&o)?(e[n++]=o>>12&15|224,e[n++]=o>>6&63|128):(e[n++]=o>>18&7|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128)}e[n++]=63&o|128}else e[n++]=o}}(t,this.bytes,this.pos),this.pos+=i},t.prototype.encodeObject=function(t,e){var i=this.extensionCodec.tryToEncode(t,this.context);if(null!=i)this.encodeExtension(i);else if(Array.isArray(t))this.encodeArray(t,e);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else{if("object"!=typeof t)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(t));this.encodeMap(t,e)}},t.prototype.encodeBinary=function(t){var e=t.byteLength;if(e<256)this.writeU8(196),this.writeU8(e);else if(e<65536)this.writeU8(197),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large binary: "+e);this.writeU8(198),this.writeU32(e)}var i=S(t);this.writeU8a(i)},t.prototype.encodeArray=function(t,e){var i,r,n=t.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: "+n);this.writeU8(221),this.writeU32(n)}try{for(var s=T(t),o=s.next();!o.done;o=s.next()){var a=o.value;this.doEncode(a,e+1)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},t.prototype.countWithoutUndefined=function(t,e){var i,r,n=0;try{for(var s=T(e),o=s.next();!o.done;o=s.next())void 0!==t[o.value]&&n++}catch(t){i={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return n},t.prototype.encodeMap=function(t,e){var i,r,n=Object.keys(t);this.sortKeys&&n.sort();var s=this.ignoreUndefined?this.countWithoutUndefined(t,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else{if(!(s<4294967296))throw new Error("Too large map object: "+s);this.writeU8(223),this.writeU32(s)}try{for(var o=T(n),a=o.next();!a.done;a=o.next()){var h=a.value,c=t[h];this.ignoreUndefined&&void 0===c||(this.encodeString(h),this.doEncode(c,e+1))}}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.encodeExtension=function(t){var e=t.data.length;if(1===e)this.writeU8(212);else if(2===e)this.writeU8(213);else if(4===e)this.writeU8(214);else if(8===e)this.writeU8(215);else if(16===e)this.writeU8(216);else if(e<256)this.writeU8(199),this.writeU8(e);else if(e<65536)this.writeU8(200),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large extension object: "+e);this.writeU8(201),this.writeU32(e)}this.writeI8(t.type),this.writeU8a(t.data)},t.prototype.writeU8=function(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++},t.prototype.writeU8a=function(t){var e=t.length;this.ensureBufferSizeToWrite(e),this.bytes.set(t,this.pos),this.pos+=e},t.prototype.writeI8=function(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++},t.prototype.writeU16=function(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2},t.prototype.writeI16=function(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2},t.prototype.writeU32=function(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4},t.prototype.writeI32=function(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4},t.prototype.writeF32=function(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4},t.prototype.writeF64=function(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8},t.prototype.writeU64=function(t){this.ensureBufferSizeToWrite(8),function(t,e,i){var r=i/4294967296,n=i;t.setUint32(e,r),t.setUint32(e+4,n)}(this.view,this.pos,t),this.pos+=8},t.prototype.writeI64=function(t){this.ensureBufferSizeToWrite(8),p(this.view,this.pos,t),this.pos+=8},t.prototype.writeBig64=function(t){this.ensureBufferSizeToWrite(8),function(t,e,i){var r=Number(i/BigInt(4294967296)),n=Number(i%BigInt(4294967296));r<0&&0!==n&&(r-=1),t.setUint32(e,r),t.setUint32(e+4,n)}(this.view,this.pos,t),this.pos+=8},t}(),C={};function k(t,e){return void 0===e&&(e=C),new A(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encode(t)}function R(t){return(t<0?"-":"")+"0x"+Math.abs(t).toString(16).padStart(2,"0")}var P=function(){function t(t,e){void 0===t&&(t=16),void 0===e&&(e=16),this.maxKeyLength=t,this.maxLengthPerKey=e,this.hit=0,this.miss=0,this.caches=[];for(var i=0;i<this.maxKeyLength;i++)this.caches.push([])}return t.prototype.canBeCached=function(t){return t>0&&t<=this.maxKeyLength},t.prototype.get=function(t,e,i){var r=this.caches[i-1],n=r.length;t:for(var s=0;s<n;s++){for(var o=r[s],a=o.bytes,h=0;h<i;h++)if(a[h]!==t[e+h])continue t;return o.value}return null},t.prototype.store=function(t,e){var i=this.caches[t.length-1],r={bytes:t,value:e};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=r:i.push(r)},t.prototype.decode=function(t,e,i){var r=this.get(t,e,i);if(null!=r)return this.hit++,r;this.miss++;var n=l(t,e,i),s=Uint8Array.prototype.slice.call(t,e,e+i);return this.store(s,n),n},t}(),I=function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},O=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=t[i]&&function(e){return new Promise((function(r,n){!function(t,e,i,r){Promise.resolve(r).then((function(e){t({value:e,done:i})}),e)}(r,n,(e=t[i](e)).done,e.value)}))}}},M=function(t){return this instanceof M?(this.v=t,this):new M(t)},D=function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){n[t]&&(r[t]=function(e){return new Promise((function(i,r){s.push([t,e,i,r])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof M?Promise.resolve(i.value.v).then(h,c):l(s[0][2],i)}catch(t){l(s[0][3],t)}var i}function h(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}},B=new DataView(new ArrayBuffer(0)),L=new Uint8Array(B.buffer),N=function(){try{B.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")}(),U=new N("Insufficient data"),F=new P,z=function(){function t(t,e,i,r,n,s,o,a){void 0===t&&(t=E.defaultCodec),void 0===e&&(e=void 0),void 0===i&&(i=4294967295),void 0===r&&(r=4294967295),void 0===n&&(n=4294967295),void 0===s&&(s=4294967295),void 0===o&&(o=4294967295),void 0===a&&(a=F),this.extensionCodec=t,this.context=e,this.maxStrLength=i,this.maxBinLength=r,this.maxArrayLength=n,this.maxMapLength=s,this.maxExtLength=o,this.keyDecoder=a,this.totalPos=0,this.pos=0,this.view=B,this.bytes=L,this.headByte=-1,this.stack=[]}return t.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1},t.prototype.setBuffer=function(t){this.bytes=S(t),this.view=function(t){if(t instanceof ArrayBuffer)return new DataView(t);var e=S(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}(this.bytes),this.pos=0},t.prototype.appendBuffer=function(t){if(-1!==this.headByte||this.hasRemaining()){var e=this.bytes.subarray(this.pos),i=S(t),r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),this.setBuffer(r)}else this.setBuffer(t)},t.prototype.hasRemaining=function(t){return void 0===t&&(t=1),this.view.byteLength-this.pos>=t},t.prototype.createNoExtraBytesError=function(t){var e=this.view,i=this.pos;return new RangeError("Extra "+(e.byteLength-i)+" of "+e.byteLength+" byte(s) found at buffer["+t+"]")},t.prototype.decode=function(t){return this.reinitializeState(),this.setBuffer(t),this.doDecodeSingleSync()},t.prototype.doDecodeSingleSync=function(){var t=this.doDecodeSync();if(this.hasRemaining())throw this.createNoExtraBytesError(this.pos);return t},t.prototype.decodeAsync=function(t){var e,i,r,n;return function(t,e,i,r){return new(i||(i=Promise))((function(e,n){function s(t){try{a(r.next(t))}catch(t){n(t)}}function o(t){try{a(r.throw(t))}catch(t){n(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(t){t(r)}))).then(s,o)}a((r=r.apply(t,[])).next())}))}(this,0,void 0,(function(){var s,o,a,h,c,l,u,d;return I(this,(function(f){switch(f.label){case 0:s=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),e=O(t),f.label=2;case 2:return[4,e.next()];case 3:if((i=f.sent()).done)return[3,5];if(a=i.value,s)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(a);try{o=this.doDecodeSync(),s=!0}catch(t){if(!(t instanceof N))throw t}this.totalPos+=this.pos,f.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return h=f.sent(),r={error:h},[3,12];case 7:return f.trys.push([7,,10,11]),i&&!i.done&&(n=e.return)?[4,n.call(e)]:[3,9];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(s){if(this.hasRemaining())throw this.createNoExtraBytesError(this.totalPos);return[2,o]}throw l=(c=this).headByte,u=c.pos,d=c.totalPos,new RangeError("Insufficient data in parcing "+R(l)+" at "+d+" ("+u+" in the current buffer)")}}))}))},t.prototype.decodeArrayStream=function(t){return this.decodeMultiAsync(t,!0)},t.prototype.decodeStream=function(t){return this.decodeMultiAsync(t,!1)},t.prototype.decodeMultiAsync=function(t,e){return D(this,arguments,(function(){var i,r,n,s,o,a,h,c,l;return I(this,(function(u){switch(u.label){case 0:i=e,r=-1,u.label=1;case 1:u.trys.push([1,13,14,19]),n=O(t),u.label=2;case 2:return[4,M(n.next())];case 3:if((s=u.sent()).done)return[3,12];if(o=s.value,e&&0===r)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(o),i&&(r=this.readArraySize(),i=!1,this.complete()),u.label=4;case 4:u.trys.push([4,9,,10]),u.label=5;case 5:return[4,M(this.doDecodeSync())];case 6:return[4,u.sent()];case 7:return u.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=u.sent())instanceof N))throw a;return[3,10];case 10:this.totalPos+=this.pos,u.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return h=u.sent(),c={error:h},[3,19];case 14:return u.trys.push([14,,17,18]),s&&!s.done&&(l=n.return)?[4,M(l.call(n))]:[3,16];case 15:u.sent(),u.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}}))}))},t.prototype.doDecodeSync=function(){t:for(;;){var t=this.readHeadByte(),e=void 0;if(t>=224)e=t-256;else if(t<192)if(t<128)e=t;else if(t<144){if(0!=(r=t-128)){this.pushMapState(r),this.complete();continue t}e={}}else if(t<160){if(0!=(r=t-144)){this.pushArrayState(r),this.complete();continue t}e=[]}else{var i=t-160;e=this.decodeUtf8String(i,0)}else if(192===t)e=null;else if(194===t)e=!1;else if(195===t)e=!0;else if(202===t)e=this.readF32();else if(203===t)e=this.readF64();else if(204===t)e=this.readU8();else if(205===t)e=this.readU16();else if(206===t)e=this.readU32();else if(207===t)e=this.readU64();else if(208===t)e=this.readI8();else if(209===t)e=this.readI16();else if(210===t)e=this.readI32();else if(211===t)e=this.readI64();else if(217===t)i=this.lookU8(),e=this.decodeUtf8String(i,1);else if(218===t)i=this.lookU16(),e=this.decodeUtf8String(i,2);else if(219===t)i=this.lookU32(),e=this.decodeUtf8String(i,4);else if(220===t){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue t}e=[]}else if(221===t){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue t}e=[]}else if(222===t){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue t}e={}}else if(223===t){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue t}e={}}else if(196===t){var r=this.lookU8();e=this.decodeBinary(r,1)}else if(197===t)r=this.lookU16(),e=this.decodeBinary(r,2);else if(198===t)r=this.lookU32(),e=this.decodeBinary(r,4);else if(212===t)e=this.decodeExtension(1,0);else if(213===t)e=this.decodeExtension(2,0);else if(214===t)e=this.decodeExtension(4,0);else if(215===t)e=this.decodeExtension(8,0);else if(216===t)e=this.decodeExtension(16,0);else if(199===t)r=this.lookU8(),e=this.decodeExtension(r,1);else if(200===t)r=this.lookU16(),e=this.decodeExtension(r,2);else{if(201!==t)throw new Error("Unrecognized type byte: "+R(t));r=this.lookU32(),e=this.decodeExtension(r,4)}this.complete();for(var n=this.stack;n.length>0;){var s=n[n.length-1];if(0===s.type){if(s.array[s.position]=e,s.position++,s.position!==s.size)continue t;n.pop(),e=s.array}else{if(1===s.type){if("string"!=(o=typeof e)&&"number"!==o)throw new Error("The type of key must be string or number but "+typeof e);s.key=e,s.type=2;continue t}if(s.map[s.key]=e,s.readCount++,s.readCount!==s.size){s.key=null,s.type=1;continue t}n.pop(),e=s.map}}return e}var o},t.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},t.prototype.complete=function(){this.headByte=-1},t.prototype.readArraySize=function(){var t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:if(t<160)return t-144;throw new Error("Unrecognized array type byte: "+R(t))}},t.prototype.pushMapState=function(t){if(t>this.maxMapLength)throw new Error("Max length exceeded: map length ("+t+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:t,key:null,readCount:0,map:{}})},t.prototype.pushArrayState=function(t){if(t>this.maxArrayLength)throw new Error("Max length exceeded: array length ("+t+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:t,array:new Array(t),position:0})},t.prototype.decodeUtf8String=function(t,e){var i;if(t>this.maxStrLength)throw new Error("Max length exceeded: UTF-8 byte length ("+t+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+e+t)throw U;var r,n=this.pos+e;return r=this.stateIsMapKey()&&(null===(i=this.keyDecoder)||void 0===i?void 0:i.canBeCached(t))?this.keyDecoder.decode(this.bytes,n,t):s&&t>d?function(t,e,i){var r=t.subarray(e,e+i);return u.decode(r)}(this.bytes,n,t):l(this.bytes,n,t),this.pos+=e+t,r},t.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},t.prototype.decodeBinary=function(t,e){if(t>this.maxBinLength)throw new Error("Max length exceeded: bin length ("+t+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(t+e))throw U;var i=this.pos+e,r=this.bytes.subarray(i,i+t);return this.pos+=e+t,r},t.prototype.decodeExtension=function(t,e){if(t>this.maxExtLength)throw new Error("Max length exceeded: ext length ("+t+") > maxExtLength ("+this.maxExtLength+")");var i=this.view.getInt8(this.pos+e),r=this.decodeBinary(t,e+1);return this.extensionCodec.decode(r,i,this.context)},t.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t.prototype.readU8=function(){var t=this.view.getUint8(this.pos);return this.pos++,t},t.prototype.readI8=function(){var t=this.view.getInt8(this.pos);return this.pos++,t},t.prototype.readU16=function(){var t=this.view.getUint16(this.pos);return this.pos+=2,t},t.prototype.readI16=function(){var t=this.view.getInt16(this.pos);return this.pos+=2,t},t.prototype.readU32=function(){var t=this.view.getUint32(this.pos);return this.pos+=4,t},t.prototype.readI32=function(){var t=this.view.getInt32(this.pos);return this.pos+=4,t},t.prototype.readU64=function(){var t,e,i,r,n=(t=this.view,e=this.pos,i=t.getUint32(e),r=t.getUint32(e+4),i>Math.floor(Number.MAX_SAFE_INTEGER/4294967296)?BigInt(i)*BigInt(4294967296)+BigInt(r):4294967296*i+r);return this.pos+=8,n},t.prototype.readI64=function(){var t=g(this.view,this.pos);return this.pos+=8,t},t.prototype.readF32=function(){var t=this.view.getFloat32(this.pos);return this.pos+=4,t},t.prototype.readF64=function(){var t=this.view.getFloat64(this.pos);return this.pos+=8,t},t}(),j={};function V(t,e){return void 0===e&&(e=j),new z(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}var G=function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},H=function(t){return this instanceof H?(this.v=t,this):new H(t)},Y=function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){n[t]&&(r[t]=function(e){return new Promise((function(i,r){s.push([t,e,i,r])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof H?Promise.resolve(i.value.v).then(h,c):l(s[0][2],i)}catch(t){l(s[0][3],t)}var i}function h(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}};function K(t){if(null==t)throw new Error("Assertion Failure: value must not be null nor undefined")}function W(t){return null!=t[Symbol.asyncIterator]?t:function(t){return Y(this,arguments,(function(){var e,i,r,n;return G(this,(function(s){switch(s.label){case 0:e=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,H(e.read())];case 3:return i=s.sent(),r=i.done,n=i.value,r?[4,H(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return K(n),[4,H(n)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}(t)}function X(t,e){return void 0===e&&(e=j),function(t,e,i,r){return new(i||(i=Promise))((function(e,n){function s(t){try{a(r.next(t))}catch(t){n(t)}}function o(t){try{a(r.throw(t))}catch(t){n(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(t){t(r)}))).then(s,o)}a((r=r.apply(t,[])).next())}))}(this,0,void 0,(function(){var i;return function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(r){return i=W(t),[2,new z(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(i)]}))}))}function q(t,e){void 0===e&&(e=j);var i=W(t);return new z(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(i)}function $(t,e){void 0===e&&(e=j);var i=W(t);return new z(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(i)}}])},5155:(t,e)=>{"use strict";e.byteLength=function(t){var e=h(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,s=h(t),o=s[0],a=s[1],c=new n(function(t,e,i){return 3*(e+i)/4-i}(0,o,a)),l=0,u=a>0?o-4:o;for(i=0;i<u;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===a&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,c[l++]=255&e),1===a&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,s=[],o=16383,a=0,h=r-n;a<h;a+=o)s.push(c(t,a,a+o>h?h:a+o));return 1===n?(e=t[r-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,r){for(var n,s,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(i[(s=n)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},5117:function(t,e,i){var r;!function(n){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,h=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",u=1e14,d=14,f=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,y=1e9;function m(t){var e=0|t;return t>0||t===e?e:e-1}function v(t){for(var e,i,r=1,n=t.length,s=t[0]+"";r<n;){for(e=t[r++]+"",i=d-e.length;i--;e="0"+e);s+=e}for(n=s.length;48===s.charCodeAt(--n););return s.slice(0,n+1||1)}function b(t,e){var i,r,n=t.c,s=e.c,o=t.s,a=e.s,h=t.e,c=e.e;if(!o||!a)return null;if(i=n&&!n[0],r=s&&!s[0],i||r)return i?r?0:-a:o;if(o!=a)return o;if(i=o<0,r=h==c,!n||!s)return r?0:!n^i?1:-1;if(!r)return h>c^i?1:-1;for(a=(h=n.length)<(c=s.length)?h:c,o=0;o<a;o++)if(n[o]!=s[o])return n[o]>s[o]^i?1:-1;return h==c?0:h>c^i?1:-1}function w(t,e,i,r){if(t<e||t>i||t!==h(t))throw Error(c+(r||"Argument")+("number"==typeof t?t<e||t>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _(t){var e=t.c.length-1;return m(t.e/d)==e&&t.c[e]%2!=0}function x(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function E(t,e,i){var r,n;if(e<0){for(n=i+".";++e;n+=i);t=n+t}else if(++e>(r=t.length)){for(n=i,e-=r;--e;n+=i);t+=n}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}(s=function t(e){var i,r,n,s,S,T,A,C,k,R,P=G.prototype={constructor:G,toString:null,valueOf:null},I=new G(1),O=20,M=4,D=-7,B=21,L=-1e7,N=1e7,U=!1,F=1,z=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz";function G(t,e){var i,s,a,c,u,p,g,y,m=this;if(!(m instanceof G))return new G(t,e);if(null==e){if(t&&!0===t._isBigNumber)return m.s=t.s,void(!t.c||t.e>N?m.c=m.e=null:t.e<L?m.c=[m.e=0]:(m.e=t.e,m.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,u=t;u>=10;u/=10,c++);return void(c>N?m.c=m.e=null:(m.e=c,m.c=[t]))}y=String(t)}else{if(!o.test(y=String(t)))return n(m,y,p);m.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(c=y.indexOf("."))>-1&&(y=y.replace(".","")),(u=y.search(/e/i))>0?(c<0&&(c=u),c+=+y.slice(u+1),y=y.substring(0,u)):c<0&&(c=y.length)}else{if(w(e,2,V.length,"Base"),10==e)return W(m=new G(t),O+m.e+1,M);if(y=String(t),p="number"==typeof t){if(0*t!=0)return n(m,y,p,e);if(m.s=1/t<0?(y=y.slice(1),-1):1,G.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(l+t)}else m.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(i=V.slice(0,e),c=u=0,g=y.length;u<g;u++)if(i.indexOf(s=y.charAt(u))<0){if("."==s){if(u>c){c=g;continue}}else if(!a&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){a=!0,u=-1,c=0;continue}return n(m,String(t),p,e)}p=!1,(c=(y=r(y,e,10,m.s)).indexOf("."))>-1?y=y.replace(".",""):c=y.length}for(u=0;48===y.charCodeAt(u);u++);for(g=y.length;48===y.charCodeAt(--g););if(y=y.slice(u,++g)){if(g-=u,p&&G.DEBUG&&g>15&&(t>f||t!==h(t)))throw Error(l+m.s*t);if((c=c-u-1)>N)m.c=m.e=null;else if(c<L)m.c=[m.e=0];else{if(m.e=c,m.c=[],u=(c+1)%d,c<0&&(u+=d),u<g){for(u&&m.c.push(+y.slice(0,u)),g-=d;u<g;)m.c.push(+y.slice(u,u+=d));u=d-(y=y.slice(u)).length}else u-=g;for(;u--;y+="0");m.c.push(+y)}}else m.c=[m.e=0]}function H(t,e,i,r){var n,s,o,a,h;if(null==i?i=M:w(i,0,8),!t.c)return t.toString();if(n=t.c[0],o=t.e,null==e)h=v(t.c),h=1==r||2==r&&(o<=D||o>=B)?x(h,o):E(h,o,"0");else if(s=(t=W(new G(t),e,i)).e,a=(h=v(t.c)).length,1==r||2==r&&(e<=s||s<=D)){for(;a<e;h+="0",a++);h=x(h,s)}else if(e-=o,h=E(h,s,"0"),s+1>a){if(--e>0)for(h+=".";e--;h+="0");}else if((e+=s-a)>0)for(s+1==a&&(h+=".");e--;h+="0");return t.s<0&&n?"-"+h:h}function Y(t,e){for(var i,r=1,n=new G(t[0]);r<t.length;r++){if(!(i=new G(t[r])).s){n=i;break}e.call(n,i)&&(n=i)}return n}function K(t,e,i){for(var r=1,n=e.length;!e[--n];e.pop());for(n=e[0];n>=10;n/=10,r++);return(i=r+i*d-1)>N?t.c=t.e=null:i<L?t.c=[t.e=0]:(t.e=i,t.c=e),t}function W(t,e,i,r){var n,s,o,c,l,f,g,y=t.c,m=p;if(y){t:{for(n=1,c=y[0];c>=10;c/=10,n++);if((s=e-n)<0)s+=d,o=e,g=(l=y[f=0])/m[n-o-1]%10|0;else if((f=a((s+1)/d))>=y.length){if(!r)break t;for(;y.length<=f;y.push(0));l=g=0,n=1,o=(s%=d)-d+1}else{for(l=c=y[f],n=1;c>=10;c/=10,n++);g=(o=(s%=d)-d+n)<0?0:l/m[n-o-1]%10|0}if(r=r||e<0||null!=y[f+1]||(o<0?l:l%m[n-o-1]),r=i<4?(g||r)&&(0==i||i==(t.s<0?3:2)):g>5||5==g&&(4==i||r||6==i&&(s>0?o>0?l/m[n-o]:0:y[f-1])%10&1||i==(t.s<0?8:7)),e<1||!y[0])return y.length=0,r?(e-=t.e+1,y[0]=m[(d-e%d)%d],t.e=-e||0):y[0]=t.e=0,t;if(0==s?(y.length=f,c=1,f--):(y.length=f+1,c=m[d-s],y[f]=o>0?h(l/m[n-o]%m[o])*c:0),r)for(;;){if(0==f){for(s=1,o=y[0];o>=10;o/=10,s++);for(o=y[0]+=c,c=1;o>=10;o/=10,c++);s!=c&&(t.e++,y[0]==u&&(y[0]=1));break}if(y[f]+=c,y[f]!=u)break;y[f--]=0,c=1}for(s=y.length;0===y[--s];y.pop());}t.e>N?t.c=t.e=null:t.e<L&&(t.c=[t.e=0])}return t}function X(t){var e,i=t.e;return null===i?t.toString():(e=v(t.c),e=i<=D||i>=B?x(e,i):E(e,i,"0"),t.s<0?"-"+e:e)}return G.clone=t,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(t){var e,i;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(w(i=t[e],0,y,e),O=i),t.hasOwnProperty(e="ROUNDING_MODE")&&(w(i=t[e],0,8,e),M=i),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((i=t[e])&&i.pop?(w(i[0],-y,0,e),w(i[1],0,y,e),D=i[0],B=i[1]):(w(i,-y,y,e),D=-(B=i<0?-i:i))),t.hasOwnProperty(e="RANGE"))if((i=t[e])&&i.pop)w(i[0],-y,-1,e),w(i[1],1,y,e),L=i[0],N=i[1];else{if(w(i,-y,y,e),!i)throw Error(c+e+" cannot be zero: "+i);L=-(N=i<0?-i:i)}if(t.hasOwnProperty(e="CRYPTO")){if((i=t[e])!==!!i)throw Error(c+e+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!i,Error(c+"crypto unavailable");U=i}else U=i}if(t.hasOwnProperty(e="MODULO_MODE")&&(w(i=t[e],0,9,e),F=i),t.hasOwnProperty(e="POW_PRECISION")&&(w(i=t[e],0,y,e),z=i),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(i=t[e]))throw Error(c+e+" not an object: "+i);j=i}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(i=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(c+e+" invalid: "+i);V=i}}return{DECIMAL_PLACES:O,ROUNDING_MODE:M,EXPONENTIAL_AT:[D,B],RANGE:[L,N],CRYPTO:U,MODULO_MODE:F,POW_PRECISION:z,FORMAT:j,ALPHABET:V}},G.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!G.DEBUG)return!0;var e,i,r=t.c,n=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===s||-1===s)&&n>=-y&&n<=y&&n===h(n)){if(0===r[0]){if(0===n&&1===r.length)return!0;break t}if((e=(n+1)%d)<1&&(e+=d),String(r[0]).length==e){for(e=0;e<r.length;e++)if((i=r[e])<0||i>=u||i!==h(i))break t;if(0!==i)return!0}}}else if(null===r&&null===n&&(null===s||1===s||-1===s))return!0;throw Error(c+"Invalid BigNumber: "+t)},G.maximum=G.max=function(){return Y(arguments,P.lt)},G.minimum=G.min=function(){return Y(arguments,P.gt)},G.random=(s=9007199254740992,S=Math.random()*s&2097151?function(){return h(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,i,r,n,s,o=0,l=[],u=new G(I);if(null==t?t=O:w(t,0,y),n=a(t/d),U)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(n*=2));o<n;)(s=131072*e[o]+(e[o+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),e[o]=i[0],e[o+1]=i[1]):(l.push(s%1e14),o+=2);o=n/2}else{if(!crypto.randomBytes)throw U=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(n*=7);o<n;)(s=281474976710656*(31&e[o])+1099511627776*e[o+1]+4294967296*e[o+2]+16777216*e[o+3]+(e[o+4]<<16)+(e[o+5]<<8)+e[o+6])>=9e15?crypto.randomBytes(7).copy(e,o):(l.push(s%1e14),o+=7);o=n/7}if(!U)for(;o<n;)(s=S())<9e15&&(l[o++]=s%1e14);for(n=l[--o],t%=d,n&&t&&(s=p[d-t],l[o]=h(n/s)*s);0===l[o];l.pop(),o--);if(o<0)l=[r=0];else{for(r=-1;0===l[0];l.splice(0,1),r-=d);for(o=1,s=l[0];s>=10;s/=10,o++);o<d&&(r-=d-o)}return u.e=r,u.c=l,u}),G.sum=function(){for(var t=1,e=arguments,i=new G(e[0]);t<e.length;)i=i.plus(e[t++]);return i},r=function(){var t="0123456789";function e(t,e,i,r){for(var n,s,o=[0],a=0,h=t.length;a<h;){for(s=o.length;s--;o[s]*=e);for(o[0]+=r.indexOf(t.charAt(a++)),n=0;n<o.length;n++)o[n]>i-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/i|0,o[n]%=i)}return o.reverse()}return function(r,n,s,o,a){var h,c,l,u,d,f,p,g,y=r.indexOf("."),m=O,b=M;for(y>=0&&(u=z,z=0,r=r.replace(".",""),f=(g=new G(n)).pow(r.length-y),z=u,g.c=e(E(v(f.c),f.e,"0"),10,s,t),g.e=g.c.length),l=u=(p=e(r,n,s,a?(h=V,t):(h=t,V))).length;0==p[--u];p.pop());if(!p[0])return h.charAt(0);if(y<0?--l:(f.c=p,f.e=l,f.s=o,p=(f=i(f,g,m,b,s)).c,d=f.r,l=f.e),y=p[c=l+m+1],u=s/2,d=d||c<0||null!=p[c+1],d=b<4?(null!=y||d)&&(0==b||b==(f.s<0?3:2)):y>u||y==u&&(4==b||d||6==b&&1&p[c-1]||b==(f.s<0?8:7)),c<1||!p[0])r=d?E(h.charAt(1),-m,h.charAt(0)):h.charAt(0);else{if(p.length=c,d)for(--s;++p[--c]>s;)p[c]=0,c||(++l,p=[1].concat(p));for(u=p.length;!p[--u];);for(y=0,r="";y<=u;r+=h.charAt(p[y++]));r=E(r,l,h.charAt(0))}return r}}(),i=function(){function t(t,e,i){var r,n,s,o,a=0,h=t.length,c=e%g,l=e/g|0;for(t=t.slice();h--;)a=((n=c*(s=t[h]%g)+(r=l*s+(o=t[h]/g|0)*c)%g*g+a)/i|0)+(r/g|0)+l*o,t[h]=n%i;return a&&(t=[a].concat(t)),t}function e(t,e,i,r){var n,s;if(i!=r)s=i>r?1:-1;else for(n=s=0;n<i;n++)if(t[n]!=e[n]){s=t[n]>e[n]?1:-1;break}return s}function i(t,e,i,r){for(var n=0;i--;)t[i]-=n,n=t[i]<e[i]?1:0,t[i]=n*r+t[i]-e[i];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,n,s,o,a){var c,l,f,p,g,y,v,b,w,_,x,E,S,T,A,C,k,R=r.s==n.s?1:-1,P=r.c,I=n.c;if(!(P&&P[0]&&I&&I[0]))return new G(r.s&&n.s&&(P?!I||P[0]!=I[0]:I)?P&&0==P[0]||!I?0*R:R/0:NaN);for(w=(b=new G(R)).c=[],R=s+(l=r.e-n.e)+1,a||(a=u,l=m(r.e/d)-m(n.e/d),R=R/d|0),f=0;I[f]==(P[f]||0);f++);if(I[f]>(P[f]||0)&&l--,R<0)w.push(1),p=!0;else{for(T=P.length,C=I.length,f=0,R+=2,(g=h(a/(I[0]+1)))>1&&(I=t(I,g,a),P=t(P,g,a),C=I.length,T=P.length),S=C,x=(_=P.slice(0,C)).length;x<C;_[x++]=0);k=I.slice(),k=[0].concat(k),A=I[0],I[1]>=a/2&&A++;do{if(g=0,(c=e(I,_,C,x))<0){if(E=_[0],C!=x&&(E=E*a+(_[1]||0)),(g=h(E/A))>1)for(g>=a&&(g=a-1),v=(y=t(I,g,a)).length,x=_.length;1==e(y,_,v,x);)g--,i(y,C<v?k:I,v,a),v=y.length,c=1;else 0==g&&(c=g=1),v=(y=I.slice()).length;if(v<x&&(y=[0].concat(y)),i(_,y,x,a),x=_.length,-1==c)for(;e(I,_,C,x)<1;)g++,i(_,C<x?k:I,x,a),x=_.length}else 0===c&&(g++,_=[0]);w[f++]=g,_[0]?_[x++]=P[S]||0:(_=[P[S]],x=1)}while((S++<T||null!=_[0])&&R--);p=null!=_[0],w[0]||w.splice(0,1)}if(a==u){for(f=1,R=w[0];R>=10;R/=10,f++);W(b,s+(b.e=f+l*d-1)+1,o,p)}else b.e=l,b.r=+p;return b}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,C=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(t,e,i,r){var n,s=i?e:e.replace(R,"");if(k.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!i&&(s=s.replace(T,(function(t,e,i){return n="x"==(i=i.toLowerCase())?16:"b"==i?2:8,r&&r!=n?t:e})),r&&(n=r,s=s.replace(A,"$1").replace(C,"0.$1")),e!=s))return new G(s,n);if(G.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},P.absoluteValue=P.abs=function(){var t=new G(this);return t.s<0&&(t.s=1),t},P.comparedTo=function(t,e){return b(this,new G(t,e))},P.decimalPlaces=P.dp=function(t,e){var i,r,n,s=this;if(null!=t)return w(t,0,y),null==e?e=M:w(e,0,8),W(new G(s),t+s.e+1,e);if(!(i=s.c))return null;if(r=((n=i.length-1)-m(this.e/d))*d,n=i[n])for(;n%10==0;n/=10,r--);return r<0&&(r=0),r},P.dividedBy=P.div=function(t,e){return i(this,new G(t,e),O,M)},P.dividedToIntegerBy=P.idiv=function(t,e){return i(this,new G(t,e),0,1)},P.exponentiatedBy=P.pow=function(t,e){var i,r,n,s,o,l,u,f,p=this;if((t=new G(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+X(t));if(null!=e&&(e=new G(e)),o=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new G(Math.pow(+X(p),o?2-_(t):+X(t))),e?f.mod(e):f;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new G(NaN);(r=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return s=p.s<0&&_(t)?-0:0,p.e>-1&&(s=1/s),new G(l?1/s:s);z&&(s=a(z/d+2))}for(o?(i=new G(.5),l&&(t.s=1),u=_(t)):u=(n=Math.abs(+X(t)))%2,f=new G(I);;){if(u){if(!(f=f.times(p)).c)break;s?f.c.length>s&&(f.c.length=s):r&&(f=f.mod(e))}if(n){if(0===(n=h(n/2)))break;u=n%2}else if(W(t=t.times(i),t.e+1,1),t.e>14)u=_(t);else{if(0==(n=+X(t)))break;u=n%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):r&&(p=p.mod(e))}return r?f:(l&&(f=I.div(f)),e?f.mod(e):s?W(f,z,M,void 0):f)},P.integerValue=function(t){var e=new G(this);return null==t?t=M:w(t,0,8),W(e,e.e+1,t)},P.isEqualTo=P.eq=function(t,e){return 0===b(this,new G(t,e))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(t,e){return b(this,new G(t,e))>0},P.isGreaterThanOrEqualTo=P.gte=function(t,e){return 1===(e=b(this,new G(t,e)))||0===e},P.isInteger=function(){return!!this.c&&m(this.e/d)>this.c.length-2},P.isLessThan=P.lt=function(t,e){return b(this,new G(t,e))<0},P.isLessThanOrEqualTo=P.lte=function(t,e){return-1===(e=b(this,new G(t,e)))||0===e},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(t,e){var i,r,n,s,o=this,a=o.s;if(e=(t=new G(t,e)).s,!a||!e)return new G(NaN);if(a!=e)return t.s=-e,o.plus(t);var h=o.e/d,c=t.e/d,l=o.c,f=t.c;if(!h||!c){if(!l||!f)return l?(t.s=-e,t):new G(f?o:NaN);if(!l[0]||!f[0])return f[0]?(t.s=-e,t):new G(l[0]?o:3==M?-0:0)}if(h=m(h),c=m(c),l=l.slice(),a=h-c){for((s=a<0)?(a=-a,n=l):(c=h,n=f),n.reverse(),e=a;e--;n.push(0));n.reverse()}else for(r=(s=(a=l.length)<(e=f.length))?a:e,a=e=0;e<r;e++)if(l[e]!=f[e]){s=l[e]<f[e];break}if(s&&(n=l,l=f,f=n,t.s=-t.s),(e=(r=f.length)-(i=l.length))>0)for(;e--;l[i++]=0);for(e=u-1;r>a;){if(l[--r]<f[r]){for(i=r;i&&!l[--i];l[i]=e);--l[i],l[r]+=u}l[r]-=f[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?K(t,l,c):(t.s=3==M?-1:1,t.c=[t.e=0],t)},P.modulo=P.mod=function(t,e){var r,n,s=this;return t=new G(t,e),!s.c||!t.s||t.c&&!t.c[0]?new G(NaN):!t.c||s.c&&!s.c[0]?new G(s):(9==F?(n=t.s,t.s=1,r=i(s,t,0,3),t.s=n,r.s*=n):r=i(s,t,0,F),(t=s.minus(r.times(t))).c[0]||1!=F||(t.s=s.s),t)},P.multipliedBy=P.times=function(t,e){var i,r,n,s,o,a,h,c,l,f,p,y,v,b,w,_=this,x=_.c,E=(t=new G(t,e)).c;if(!(x&&E&&x[0]&&E[0]))return!_.s||!t.s||x&&!x[0]&&!E||E&&!E[0]&&!x?t.c=t.e=t.s=null:(t.s*=_.s,x&&E?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=m(_.e/d)+m(t.e/d),t.s*=_.s,(h=x.length)<(f=E.length)&&(v=x,x=E,E=v,n=h,h=f,f=n),n=h+f,v=[];n--;v.push(0));for(b=u,w=g,n=f;--n>=0;){for(i=0,p=E[n]%w,y=E[n]/w|0,s=n+(o=h);s>n;)i=((c=p*(c=x[--o]%w)+(a=y*c+(l=x[o]/w|0)*p)%w*w+v[s]+i)/b|0)+(a/w|0)+y*l,v[s--]=c%b;v[s]=i}return i?++r:v.splice(0,1),K(t,v,r)},P.negated=function(){var t=new G(this);return t.s=-t.s||null,t},P.plus=function(t,e){var i,r=this,n=r.s;if(e=(t=new G(t,e)).s,!n||!e)return new G(NaN);if(n!=e)return t.s=-e,r.minus(t);var s=r.e/d,o=t.e/d,a=r.c,h=t.c;if(!s||!o){if(!a||!h)return new G(n/0);if(!a[0]||!h[0])return h[0]?t:new G(a[0]?r:0*n)}if(s=m(s),o=m(o),a=a.slice(),n=s-o){for(n>0?(o=s,i=h):(n=-n,i=a),i.reverse();n--;i.push(0));i.reverse()}for((n=a.length)-(e=h.length)<0&&(i=h,h=a,a=i,e=n),n=0;e;)n=(a[--e]=a[e]+h[e]+n)/u|0,a[e]=u===a[e]?0:a[e]%u;return n&&(a=[n].concat(a),++o),K(t,a,o)},P.precision=P.sd=function(t,e){var i,r,n,s=this;if(null!=t&&t!==!!t)return w(t,1,y),null==e?e=M:w(e,0,8),W(new G(s),t,e);if(!(i=s.c))return null;if(r=(n=i.length-1)*d+1,n=i[n]){for(;n%10==0;n/=10,r--);for(n=i[0];n>=10;n/=10,r++);}return t&&s.e+1>r&&(r=s.e+1),r},P.shiftedBy=function(t){return w(t,-9007199254740991,f),this.times("1e"+t)},P.squareRoot=P.sqrt=function(){var t,e,r,n,s,o=this,a=o.c,h=o.s,c=o.e,l=O+4,u=new G("0.5");if(1!==h||!a||!a[0])return new G(!h||h<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(h=Math.sqrt(+X(o)))||h==1/0?(((e=v(a)).length+c)%2==0&&(e+="0"),h=Math.sqrt(+e),c=m((c+1)/2)-(c<0||c%2),r=new G(e=h==1/0?"5e"+c:(e=h.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new G(h+""),r.c[0])for((h=(c=r.e)+l)<3&&(h=0);;)if(s=r,r=u.times(s.plus(i(o,s,l,1))),v(s.c).slice(0,h)===(e=v(r.c)).slice(0,h)){if(r.e<c&&--h,"9999"!=(e=e.slice(h-3,h+1))&&(n||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(W(r,r.e+O+2,1),t=!r.times(r).eq(o));break}if(!n&&(W(s,s.e+O+2,0),s.times(s).eq(o))){r=s;break}l+=4,h+=4,n=1}return W(r,r.e+O+1,M,t)},P.toExponential=function(t,e){return null!=t&&(w(t,0,y),t++),H(this,t,e,1)},P.toFixed=function(t,e){return null!=t&&(w(t,0,y),t=t+this.e+1),H(this,t,e)},P.toFormat=function(t,e,i){var r,n=this;if(null==i)null!=t&&e&&"object"==typeof e?(i=e,e=null):t&&"object"==typeof t?(i=t,t=e=null):i=j;else if("object"!=typeof i)throw Error(c+"Argument not an object: "+i);if(r=n.toFixed(t,e),n.c){var s,o=r.split("."),a=+i.groupSize,h=+i.secondaryGroupSize,l=i.groupSeparator||"",u=o[0],d=o[1],f=n.s<0,p=f?u.slice(1):u,g=p.length;if(h&&(s=a,a=h,h=s,g-=s),a>0&&g>0){for(s=g%a||a,u=p.substr(0,s);s<g;s+=a)u+=l+p.substr(s,a);h>0&&(u+=l+p.slice(s)),f&&(u="-"+u)}r=d?u+(i.decimalSeparator||"")+((h=+i.fractionGroupSize)?d.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):d):u}return(i.prefix||"")+r+(i.suffix||"")},P.toFraction=function(t){var e,r,n,s,o,a,h,l,u,f,g,y,m=this,b=m.c;if(null!=t&&(!(h=new G(t)).isInteger()&&(h.c||1!==h.s)||h.lt(I)))throw Error(c+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+X(h));if(!b)return new G(m);for(e=new G(I),u=r=new G(I),n=l=new G(I),y=v(b),o=e.e=y.length-m.e-1,e.c[0]=p[(a=o%d)<0?d+a:a],t=!t||h.comparedTo(e)>0?o>0?e:u:h,a=N,N=1/0,h=new G(y),l.c[0]=0;f=i(h,e,0,1),1!=(s=r.plus(f.times(n))).comparedTo(t);)r=n,n=s,u=l.plus(f.times(s=u)),l=s,e=h.minus(f.times(s=e)),h=s;return s=i(t.minus(r),n,0,1),l=l.plus(s.times(u)),r=r.plus(s.times(n)),l.s=u.s=m.s,g=i(u,n,o*=2,M).minus(m).abs().comparedTo(i(l,r,o,M).minus(m).abs())<1?[u,n]:[l,r],N=a,g},P.toNumber=function(){return+X(this)},P.toPrecision=function(t,e){return null!=t&&w(t,1,y),H(this,t,e,2)},P.toString=function(t){var e,i=this,n=i.s,s=i.e;return null===s?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(null==t?e=s<=D||s>=B?x(v(i.c),s):E(v(i.c),s,"0"):10===t?e=E(v((i=W(new G(i),O+s+1,M)).c),i.e,"0"):(w(t,2,V.length,"Base"),e=r(E(v(i.c),s,"0"),10,t,n,!0)),n<0&&i.c[0]&&(e="-"+e)),e},P.valueOf=P.toJSON=function(){return X(this)},P._isBigNumber=!0,null!=e&&G.set(e),G}()).default=s.BigNumber=s,void 0===(r=function(){return s}.call(e,i,e,t))||(t.exports=r)}()},2486:(t,e,i)=>{"use strict";const r=i(5155),n=i(4525),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return c(t,e,i)}function c(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|g(t,e);let r=a(i);const n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return f(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return f(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return h.from(r,e,i);const n=function(t){if(h.isBuffer(t)){const e=0|p(t.length),i=a(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||$(t.length)?a(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return l(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),i=a(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function f(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,h.prototype),r}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function g(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return W(t).length;default:if(n)return r?-1:K(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return k(this,e,i);case"latin1":case"binary":return R(this,e,i);case"base64":return T(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function v(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),$(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:b(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):b(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function b(t,e,i,r,n){let s,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let r=-1;for(s=i;s<a;s++)if(c(t,s)===c(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===h)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(i+h>a&&(i=a-h),s=i;s>=0;s--){let i=!0;for(let r=0;r<h;r++)if(c(t,s+r)!==c(e,r)){i=!1;break}if(i)return s}return-1}function w(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if($(r))return o;t[i+o]=r}return o}function _(t,e,i,r){return X(K(e,t.length-i),t,i,r)}function x(t,e,i,r){return X(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function E(t,e,i,r){return X(W(e),t,i,r)}function S(t,e,i,r){return X(function(t,e){let i,r,n;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function T(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,r,a,h;switch(o){case 1:e<128&&(s=e);break;case 2:i=t[n+1],128==(192&i)&&(h=(31&e)<<6|63&i,h>127&&(s=h));break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(h=(15&e)<<12|(63&i)<<6|63&r,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:i=t[n+1],r=t[n+2],a=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&a)&&(h=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=o}return function(t){const e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=C));return i}(r)}e.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,i){return c(t,e,i)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,i){return function(t,e,i){return l(t),t<=0?a(t):void 0!==e?"string"==typeof i?a(t).fill(e,i):a(t).fill(e):a(t)}(t,e,i)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(q(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=h.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(q(e,Uint8Array))n+e.length>r.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},h.byteLength=g,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,i,r,n){if(q(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let s=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(e>>>=0);const a=Math.min(s,o),c=this.slice(r,n),l=t.slice(e,i);for(let t=0;t<a;++t)if(c[t]!==l[t]){s=c[t],o=l[t];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},h.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return w(this,t,e,i);case"utf8":case"utf-8":return _(this,t,e,i);case"ascii":case"latin1":case"binary":return x(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function k(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function R(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function P(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=J[t[r]];return n}function I(t,e,i){const r=t.slice(e,i);let n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function O(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,i,r,n,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function D(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function B(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i+7]=s,s>>=8,t[i+6]=s,s>>=8,t[i+5]=s,s>>=8,t[i+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function L(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function N(t,e,i,r,s){return e=+e,i>>>=0,s||L(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function U(t,e,i,r,s){return e=+e,i>>>=0,s||L(t,0,i,8),n.write(t,e,i,r,52,8),i+8}h.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))})),h.prototype.readBigUInt64BE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)})),h.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=e,n=1,s=this[t+--r];for(;r>0&&(n*=256);)s+=this[t+--r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),n.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),n.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),n.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),n.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||M(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||M(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=Z((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=Z((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);M(this,t,e,i,r-1,-r)}let n=0,s=1,o=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/s>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);M(this,t,e,i,r-1,-r)}let n=i-1,s=1,o=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/s>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=Z((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=Z((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,i){return N(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return N(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},h.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const s=h.isBuffer(t)?t:h.from(t,r),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=s[n%o]}return this};const F={};function z(t,e,i){F[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function V(t,e,i,r,n,s){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new F.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){G(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||H(e,t.length-(i+1))}(r,n,s)}function G(t,e){if("number"!=typeof t)throw new F.ERR_INVALID_ARG_TYPE(e,"number",t)}function H(t,e,i){if(Math.floor(t)!==t)throw G(t,i),new F.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=j(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=j(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function K(t,e){let i;e=e||1/0;const r=t.length;let n=null;const s=[];for(let o=0;o<r;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},7615:(t,e,i)=>{"use strict";var r=i(1801),n=i(2550),s=n(r("String.prototype.indexOf"));t.exports=function(t,e){var i=r(t,!!e);return"function"==typeof i&&s(t,".prototype.")>-1?n(i):i}},2550:(t,e,i)=>{"use strict";var r=i(1930),n=i(1801),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||r.call(o,s),h=n("%Object.getOwnPropertyDescriptor%",!0),c=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(r,o,arguments);if(h&&c){var i=h(e,"length");i.configurable&&c(e,"length",{value:1+l(0,t.length-(arguments.length-1))})}return e};var u=function(){return a(r,s,arguments)};c?c(t.exports,"apply",{value:u}):t.exports.apply=u},1069:t=>{function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<r.length;n++)if((i=r[n])===e||i.fn===e){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){r=0;for(var n=(i=i.slice(0)).length;r<n;++r)i[r].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},5799:t=>{t.exports=r,r.default=r,r.stable=o,r.stableStringify=o;var e=[],i=[];function r(t,r,s){var o;for(n(t,"",[],void 0),o=0===i.length?JSON.stringify(t,r,s):JSON.stringify(t,h(r),s);0!==e.length;){var a=e.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}return o}function n(t,r,s,o){var a;if("object"==typeof t&&null!==t){for(a=0;a<s.length;a++)if(s[a]===t){var h=Object.getOwnPropertyDescriptor(o,r);return void(void 0!==h.get?h.configurable?(Object.defineProperty(o,r,{value:"[Circular]"}),e.push([o,r,t,h])):i.push([t,r]):(o[r]="[Circular]",e.push([o,r,t])))}if(s.push(t),Array.isArray(t))for(a=0;a<t.length;a++)n(t[a],a,s,t);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];n(t[l],l,s,t)}}s.pop()}}function s(t,e){return t<e?-1:t>e?1:0}function o(t,r,n){var s,o=a(t,"",[],void 0)||t;for(s=0===i.length?JSON.stringify(o,r,n):JSON.stringify(o,h(r),n);0!==e.length;){var c=e.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}return s}function a(t,r,n,o){var h;if("object"==typeof t&&null!==t){for(h=0;h<n.length;h++)if(n[h]===t){var c=Object.getOwnPropertyDescriptor(o,r);return void(void 0!==c.get?c.configurable?(Object.defineProperty(o,r,{value:"[Circular]"}),e.push([o,r,t,c])):i.push([t,r]):(o[r]="[Circular]",e.push([o,r,t])))}if("function"==typeof t.toJSON)return;if(n.push(t),Array.isArray(t))for(h=0;h<t.length;h++)a(t[h],h,n,t);else{var l={},u=Object.keys(t).sort(s);for(h=0;h<u.length;h++){var d=u[h];a(t[d],d,n,t),l[d]=t[d]}if(void 0===o)return l;e.push([o,r,t]),o[r]=l}n.pop()}}function h(t){return t=void 0!==t?t:function(t,e){return e},function(e,r){if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n];if(s[1]===e&&s[0]===r){r="[Circular]",i.splice(n,1);break}}return t.call(this,e,r)}}},9930:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,r=Object.prototype.toString,n="[object Function]";t.exports=function(t){var s=this;if("function"!=typeof s||r.call(s)!==n)throw new TypeError(e+s);for(var o,a=i.call(arguments,1),h=function(){if(this instanceof o){var e=s.apply(this,a.concat(i.call(arguments)));return Object(e)===e?e:this}return s.apply(t,a.concat(i.call(arguments)))},c=Math.max(0,s.length-a.length),l=[],u=0;u<c;u++)l.push("$"+u);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(h),s.prototype){var d=function(){};d.prototype=s.prototype,o.prototype=new d,d.prototype=null}return o}},1930:(t,e,i)=>{"use strict";var r=i(9930);t.exports=Function.prototype.bind||r},1801:(t,e,i)=>{"use strict";var r,n=SyntaxError,s=Function,o=TypeError,a=function(t){try{return s('"use strict"; return ('+t+").constructor;")()}catch(t){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(t){h=null}var c=function(){throw new o},l=h?function(){try{return c}catch(t){try{return h(arguments,"callee").get}catch(t){return c}}}():c,u=i(9905)(),d=Object.getPrototypeOf||function(t){return t.__proto__},f={},p="undefined"==typeof Uint8Array?r:d(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":u?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?d(d([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?d(""[Symbol.iterator]()):r,"%Symbol%":u?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":l,"%TypedArray%":p,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},y=function t(e){var i;if("%AsyncFunction%"===e)i=a("async function () {}");else if("%GeneratorFunction%"===e)i=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=a("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(i=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&(i=d(n.prototype))}return g[e]=i,i},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=i(1930),b=i(9284),w=v.call(Function.call,Array.prototype.concat),_=v.call(Function.apply,Array.prototype.splice),x=v.call(Function.call,String.prototype.replace),E=v.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,A=function(t){var e=E(t,0,1),i=E(t,-1);if("%"===e&&"%"!==i)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new n("invalid intrinsic syntax, expected opening `%`");var r=[];return x(t,S,(function(t,e,i,n){r[r.length]=i?x(n,T,"$1"):e||t})),r},C=function(t,e){var i,r=t;if(b(m,r)&&(r="%"+(i=m[r])[0]+"%"),b(g,r)){var s=g[r];if(s===f&&(s=y(r)),void 0===s&&!e)throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new n("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new o('"allowMissing" argument must be a boolean');var i=A(t),r=i.length>0?i[0]:"",s=C("%"+r+"%",e),a=s.name,c=s.value,l=!1,u=s.alias;u&&(r=u[0],_(i,w([0,1],u)));for(var d=1,f=!0;d<i.length;d+=1){var p=i[d],y=E(p,0,1),m=E(p,-1);if(('"'===y||"'"===y||"`"===y||'"'===m||"'"===m||"`"===m)&&y!==m)throw new n("property names with quotes must have matching quotes");if("constructor"!==p&&f||(l=!0),b(g,a="%"+(r+="."+p)+"%"))c=g[a];else if(null!=c){if(!(p in c)){if(!e)throw new o("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&d+1>=i.length){var v=h(c,p);c=(f=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[p]}else f=b(c,p),c=c[p];f&&!l&&(g[a]=c)}}return c}},9905:(t,e,i)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,n=i(5682);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&n()}},5682:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},9284:(t,e,i)=>{"use strict";var r=i(1930);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},7267:(t,e,i)=>{var r;!function(){"use strict";var e="object"==typeof window?window:{};!e.HI_BASE32_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(e=i.g);var n=!e.HI_BASE32_NO_COMMON_JS&&t.exports,s=i.amdO,o="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),a={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},h=[0,0,0,0,0,0,0,0],c=function(t,e){e.length>10&&(e="..."+e.substr(-10));var i=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+e+" <-");throw i.position=t,i},l=function(t){if(""===t)return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");for(var e,i,r,n,s,o,h,c,l=[],u=0,d=(t=t.replace(/=/g,"")).length,f=0,p=d>>3<<3;f<p;)e=a[t.charAt(f++)],i=a[t.charAt(f++)],r=a[t.charAt(f++)],n=a[t.charAt(f++)],s=a[t.charAt(f++)],o=a[t.charAt(f++)],h=a[t.charAt(f++)],c=a[t.charAt(f++)],l[u++]=255&(e<<3|i>>>2),l[u++]=255&(i<<6|r<<1|n>>>4),l[u++]=255&(n<<4|s>>>1),l[u++]=255&(s<<7|o<<2|h>>>3),l[u++]=255&(h<<5|c);var g=d-p;return 2===g?(e=a[t.charAt(f++)],i=a[t.charAt(f++)],l[u++]=255&(e<<3|i>>>2)):4===g?(e=a[t.charAt(f++)],i=a[t.charAt(f++)],r=a[t.charAt(f++)],n=a[t.charAt(f++)],l[u++]=255&(e<<3|i>>>2),l[u++]=255&(i<<6|r<<1|n>>>4)):5===g?(e=a[t.charAt(f++)],i=a[t.charAt(f++)],r=a[t.charAt(f++)],n=a[t.charAt(f++)],s=a[t.charAt(f++)],l[u++]=255&(e<<3|i>>>2),l[u++]=255&(i<<6|r<<1|n>>>4),l[u++]=255&(n<<4|s>>>1)):7===g&&(e=a[t.charAt(f++)],i=a[t.charAt(f++)],r=a[t.charAt(f++)],n=a[t.charAt(f++)],s=a[t.charAt(f++)],o=a[t.charAt(f++)],h=a[t.charAt(f++)],l[u++]=255&(e<<3|i>>>2),l[u++]=255&(i<<6|r<<1|n>>>4),l[u++]=255&(n<<4|s>>>1),l[u++]=255&(s<<7|o<<2|h>>>3)),l},u=function(t,e){if(!e)return function(t){for(var e,i,r="",n=t.length,s=0,o=0;s<n;)if((e=t[s++])<=127)r+=String.fromCharCode(e);else{e>191&&e<=223?(i=31&e,o=1):e<=239?(i=15&e,o=2):e<=247?(i=7&e,o=3):c(s,r);for(var a=0;a<o;++a)((e=t[s++])<128||e>191)&&c(s,r),i<<=6,i+=63&e;i>=55296&&i<=57343&&c(s,r),i>1114111&&c(s,r),i<=65535?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296+(i>>10)),r+=String.fromCharCode(56320+(1023&i)))}return r}(l(t));if(""===t)return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var i,r,n,s,o,h,u,d,f="",p=t.indexOf("=");-1===p&&(p=t.length);for(var g=0,y=p>>3<<3;g<y;)i=a[t.charAt(g++)],r=a[t.charAt(g++)],n=a[t.charAt(g++)],s=a[t.charAt(g++)],o=a[t.charAt(g++)],h=a[t.charAt(g++)],u=a[t.charAt(g++)],d=a[t.charAt(g++)],f+=String.fromCharCode(255&(i<<3|r>>>2))+String.fromCharCode(255&(r<<6|n<<1|s>>>4))+String.fromCharCode(255&(s<<4|o>>>1))+String.fromCharCode(255&(o<<7|h<<2|u>>>3))+String.fromCharCode(255&(u<<5|d));var m=p-y;return 2===m?(i=a[t.charAt(g++)],r=a[t.charAt(g++)],f+=String.fromCharCode(255&(i<<3|r>>>2))):4===m?(i=a[t.charAt(g++)],r=a[t.charAt(g++)],n=a[t.charAt(g++)],s=a[t.charAt(g++)],f+=String.fromCharCode(255&(i<<3|r>>>2))+String.fromCharCode(255&(r<<6|n<<1|s>>>4))):5===m?(i=a[t.charAt(g++)],r=a[t.charAt(g++)],n=a[t.charAt(g++)],s=a[t.charAt(g++)],o=a[t.charAt(g++)],f+=String.fromCharCode(255&(i<<3|r>>>2))+String.fromCharCode(255&(r<<6|n<<1|s>>>4))+String.fromCharCode(255&(s<<4|o>>>1))):7===m&&(i=a[t.charAt(g++)],r=a[t.charAt(g++)],n=a[t.charAt(g++)],s=a[t.charAt(g++)],o=a[t.charAt(g++)],h=a[t.charAt(g++)],u=a[t.charAt(g++)],f+=String.fromCharCode(255&(i<<3|r>>>2))+String.fromCharCode(255&(r<<6|n<<1|s>>>4))+String.fromCharCode(255&(s<<4|o>>>1))+String.fromCharCode(255&(o<<7|h<<2|u>>>3))),f},d={encode:function(t,e){var i="string"!=typeof t;return i&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),i?function(t){for(var e,i,r,n,s,a="",h=t.length,c=0,l=5*parseInt(h/5);c<l;)e=t[c++],i=t[c++],r=t[c++],n=t[c++],s=t[c++],a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[31&(r<<1|n>>>7)]+o[n>>>2&31]+o[31&(n<<3|s>>>5)]+o[31&s];var u=h-l;return 1===u?(e=t[c],a+=o[e>>>3]+o[e<<2&31]+"======"):2===u?(e=t[c++],i=t[c],a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[i<<4&31]+"===="):3===u?(e=t[c++],i=t[c++],r=t[c],a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[r<<1&31]+"==="):4===u&&(e=t[c++],i=t[c++],r=t[c++],n=t[c],a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[31&(r<<1|n>>>7)]+o[n>>>2&31]+o[n<<3&31]+"="),a}(t):e?function(t){for(var e,i,r,n,s,a="",h=t.length,c=0,l=5*parseInt(h/5);c<l;)e=t.charCodeAt(c++),i=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),s=t.charCodeAt(c++),a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[31&(r<<1|n>>>7)]+o[n>>>2&31]+o[31&(n<<3|s>>>5)]+o[31&s];var u=h-l;return 1===u?(e=t.charCodeAt(c),a+=o[e>>>3]+o[e<<2&31]+"======"):2===u?(e=t.charCodeAt(c++),i=t.charCodeAt(c),a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[i<<4&31]+"===="):3===u?(e=t.charCodeAt(c++),i=t.charCodeAt(c++),r=t.charCodeAt(c),a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[r<<1&31]+"==="):4===u&&(e=t.charCodeAt(c++),i=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c),a+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[31&(r<<1|n>>>7)]+o[n>>>2&31]+o[n<<3&31]+"="),a}(t):function(t){var e,i,r,n,s,a,c,l=!1,u="",d=0,f=0,p=t.length;if(""===t)return u;do{for(h[0]=h[5],h[1]=h[6],h[2]=h[7],c=f;d<p&&c<5;++d)(a=t.charCodeAt(d))<128?h[c++]=a:a<2048?(h[c++]=192|a>>6,h[c++]=128|63&a):a<55296||a>=57344?(h[c++]=224|a>>12,h[c++]=128|a>>6&63,h[c++]=128|63&a):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++d)),h[c++]=240|a>>18,h[c++]=128|a>>12&63,h[c++]=128|a>>6&63,h[c++]=128|63&a);f=c-5,d===p&&++d,d>p&&c<6&&(l=!0),e=h[0],c>4?(i=h[1],r=h[2],n=h[3],s=h[4],u+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[31&(r<<1|n>>>7)]+o[n>>>2&31]+o[31&(n<<3|s>>>5)]+o[31&s]):1===c?u+=o[e>>>3]+o[e<<2&31]+"======":2===c?(i=h[1],u+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[i<<4&31]+"===="):3===c?(i=h[1],r=h[2],u+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[r<<1&31]+"==="):(i=h[1],r=h[2],n=h[3],u+=o[e>>>3]+o[31&(e<<2|i>>>6)]+o[i>>>1&31]+o[31&(i<<4|r>>>4)]+o[31&(r<<1|n>>>7)]+o[n>>>2&31]+o[n<<3&31]+"=")}while(!l);return u}(t)},decode:u};u.asBytes=l,n?t.exports=d:(e.base32=d,s&&(void 0===(r=function(){return d}.call(d,i,d,t))||(t.exports=r)))}()},4525:(t,e)=>{e.read=function(t,e,i,r,n){var s,o,a=8*n-r-1,h=(1<<a)-1,c=h>>1,l=-7,u=i?n-1:0,d=i?-1:1,f=t[e+u];for(u+=d,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+u],u+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+u],u+=d,l-=8);if(0===s)s=1-c;else{if(s===h)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var o,a,h,c=8*s-n-1,l=(1<<c)-1,u=l>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=l?(a=0,o=l):o+u>=1?(a=(e*h-1)*Math.pow(2,n),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;t[i+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;t[i+f]=255&o,f+=p,o/=256,c-=8);t[i+f-p]|=128*g}},3477:(module,exports,__nested_webpack_require_96669__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__nested_webpack_require_96669__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=__nested_webpack_require_96669__.amdO,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(i){return new Sha256(e,!0).update(i)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(t){return e.create().update(t)};for(var i=0;i<OUTPUT_TYPES.length;++i){var r=OUTPUT_TYPES[i];e[r]=createOutputMethod(r,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if("string"==typeof t)return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(null==t)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(i,r){return new HmacSha256(i,e,!0).update(r)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(e){return new HmacSha256(e,t)},e.update=function(t,i){return e.create(t).update(i)};for(var i=0;i<OUTPUT_TYPES.length;++i){var r=OUTPUT_TYPES[i];e[r]=createHmacOutputMethod(r,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function HmacSha256(t,e,i){var r,n=typeof t;if("string"===n){var s,o=[],a=t.length,h=0;for(r=0;r<a;++r)(s=t.charCodeAt(r))<128?o[h++]=s:s<2048?(o[h++]=192|s>>6,o[h++]=128|63&s):s<55296||s>=57344?(o[h++]=224|s>>12,o[h++]=128|s>>6&63,o[h++]=128|63&s):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++r)),o[h++]=240|s>>18,o[h++]=128|s>>12&63,o[h++]=128|s>>6&63,o[h++]=128|63&s);t=o}else{if("object"!==n)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR)}t.length>64&&(t=new Sha256(e,!0).update(t).array());var c=[],l=[];for(r=0;r<64;++r){var u=t[r]||0;c[r]=92^u,l[r]=54^u}Sha256.call(this,e,i),this.update(l),this.oKeyPad=c,this.inner=!0,this.sharedMemory=i}Sha256.prototype.update=function(t){if(!this.finalized){var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR);e=!0}for(var r,n,s=0,o=t.length,a=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(n=this.start;s<o&&n<64;++s)a[n>>2]|=t[s]<<SHIFT[3&n++];else for(n=this.start;s<o&&n<64;++s)(r=t.charCodeAt(s))<128?a[n>>2]|=r<<SHIFT[3&n++]:r<2048?(a[n>>2]|=(192|r>>6)<<SHIFT[3&n++],a[n>>2]|=(128|63&r)<<SHIFT[3&n++]):r<55296||r>=57344?(a[n>>2]|=(224|r>>12)<<SHIFT[3&n++],a[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],a[n>>2]|=(128|63&r)<<SHIFT[3&n++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++s)),a[n>>2]|=(240|r>>18)<<SHIFT[3&n++],a[n>>2]|=(128|r>>12&63)<<SHIFT[3&n++],a[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],a[n>>2]|=(128|63&r)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t,e,i,r,n,s,o,a,h,c=this.h0,l=this.h1,u=this.h2,d=this.h3,f=this.h4,p=this.h5,g=this.h6,y=this.h7,m=this.blocks;for(t=16;t<64;++t)e=((n=m[t-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,i=((n=m[t-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,m[t]=m[t-16]+e+m[t-7]+i<<0;for(h=l&u,t=0;t<64;t+=4)this.first?(this.is224?(s=300032,y=(n=m[0]-1413257819)-150054599<<0,d=n+24177077<<0):(s=704751109,y=(n=m[0]-210244248)-1521486534<<0,d=n+143694565<<0),this.first=!1):(e=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(s=c&l)^c&u^h,y=d+(n=y+(i=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&p^~f&g)+K[t]+m[t])<<0,d=n+(e+r)<<0),e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(o=d&c)^d&l^s,g=u+(n=g+(i=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&f^~y&p)+K[t+1]+m[t+1])<<0,e=((u=n+(e+r)<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(a=u&d)^u&c^o,p=l+(n=p+(i=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&y^~g&f)+K[t+2]+m[t+2])<<0,e=((l=n+(e+r)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),r=(h=l&u)^l&d^a,f=c+(n=f+(i=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&g^~p&y)+K[t+3]+m[t+3])<<0,c=n+(e+r)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+l<<0,this.h2=this.h2+u<<0,this.h3=this.h3+d<<0,this.h4=this.h4+f<<0,this.h5=this.h5+p<<0,this.h6=this.h6+g<<0,this.h7=this.h7+y<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3,n=this.h4,s=this.h5,o=this.h6,a=this.h7,h=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o];return this.is224||(h+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]),h},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3,n=this.h4,s=this.h5,o=this.h6,a=this.h7,h=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||h.push(a>>24&255,a>>16&255,a>>8&255,255&a),h},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__nested_webpack_require_96669__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},583:(t,e,i)=>{var r;!function(){"use strict";var n="input is invalid type",s="object"==typeof window,o=s?window:{};o.JS_SHA3_NO_WINDOW&&(s=!1);var a=!s&&"object"==typeof self;!o.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?o=i.g:a&&(o=self);var h=!o.JS_SHA3_NO_COMMON_JS&&t.exports,c=i.amdO,l=!o.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),d=[4,1024,262144,67108864],f=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],y=[128,256],m=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136};!o.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!l||!o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var b=function(t,e,i){return function(r){return new D(t,e,t).update(r)[i]()}},w=function(t,e,i){return function(r,n){return new D(t,e,n).update(r)[i]()}},_=function(t,e,i){return function(e,r,n,s){return A["cshake"+t].update(e,r,n,s)[i]()}},x=function(t,e,i){return function(e,r,n,s){return A["kmac"+t].update(e,r,n,s)[i]()}},E=function(t,e,i,r){for(var n=0;n<m.length;++n){var s=m[n];t[s]=e(i,r,s)}return t},S=function(t,e){var i=b(t,e,"hex");return i.create=function(){return new D(t,e,t)},i.update=function(t){return i.create().update(t)},E(i,b,t,e)},T=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:S},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:S},{name:"shake",padding:[31,7936,2031616,520093696],bits:y,createMethod:function(t,e){var i=w(t,e,"hex");return i.create=function(i){return new D(t,e,i)},i.update=function(t,e){return i.create(e).update(t)},E(i,w,t,e)}},{name:"cshake",padding:d,bits:y,createMethod:function(t,e){var i=v[t],r=_(t,0,"hex");return r.create=function(r,n,s){return n||s?new D(t,e,r).bytepad([n,s],i):A["shake"+t].create(r)},r.update=function(t,e,i,n){return r.create(e,i,n).update(t)},E(r,_,t,e)}},{name:"kmac",padding:d,bits:y,createMethod:function(t,e){var i=v[t],r=x(t,0,"hex");return r.create=function(r,n,s){return new B(t,e,n).bytepad(["KMAC",s],i).bytepad([r],i)},r.update=function(t,e,i,n){return r.create(t,i,n).update(e)},E(r,x,t,e)}}],A={},C=[],k=0;k<T.length;++k)for(var R=T[k],P=R.bits,I=0;I<P.length;++I){var O=R.name+"_"+P[I];if(C.push(O),A[O]=R.createMethod(P[I],R.padding),"sha3"!==R.name){var M=R.name+P[I];C.push(M),A[M]=A[O]}}function D(t,e,i){this.blocks=[],this.s=[],this.padding=e,this.outputBits=i,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=i>>5,this.extraBytes=(31&i)>>3;for(var r=0;r<50;++r)this.s[r]=0}function B(t,e,i){D.call(this,t,e,i)}D.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(n);if(null===t)throw new Error(n);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(n);e=!0}for(var r,s,o=this.blocks,a=this.byteCount,h=t.length,c=this.blockCount,u=0,d=this.s;u<h;){if(this.reset)for(this.reset=!1,o[0]=this.block,r=1;r<c+1;++r)o[r]=0;if(e)for(r=this.start;u<h&&r<a;++u)o[r>>2]|=t[u]<<f[3&r++];else for(r=this.start;u<h&&r<a;++u)(s=t.charCodeAt(u))<128?o[r>>2]|=s<<f[3&r++]:s<2048?(o[r>>2]|=(192|s>>6)<<f[3&r++],o[r>>2]|=(128|63&s)<<f[3&r++]):s<55296||s>=57344?(o[r>>2]|=(224|s>>12)<<f[3&r++],o[r>>2]|=(128|s>>6&63)<<f[3&r++],o[r>>2]|=(128|63&s)<<f[3&r++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++u)),o[r>>2]|=(240|s>>18)<<f[3&r++],o[r>>2]|=(128|s>>12&63)<<f[3&r++],o[r>>2]|=(128|s>>6&63)<<f[3&r++],o[r>>2]|=(128|63&s)<<f[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=o[c],r=0;r<c;++r)d[r]^=o[r];L(d),this.reset=!0}else this.start=r}return this},D.prototype.encode=function(t,e){var i=255&t,r=1,n=[i];for(i=255&(t>>=8);i>0;)n.unshift(i),i=255&(t>>=8),++r;return e?n.push(r):n.unshift(r),this.update(n),n.length},D.prototype.encodeString=function(t){var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(n);if(null===t)throw new Error(n);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(n);e=!0}var r=0,s=t.length;if(e)r=s;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?r+=1:a<2048?r+=2:a<55296||a>=57344?r+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),r+=4)}return r+=this.encode(8*r),this.update(t),r},D.prototype.bytepad=function(t,e){for(var i=this.encode(e),r=0;r<t.length;++r)i+=this.encodeString(t[r]);var n=e-i%e,s=[];return s.length=n,this.update(s),this},D.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,i=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[i],e=1;e<i+1;++e)t[e]=0;for(t[i-1]|=2147483648,e=0;e<i;++e)r[e]^=t[e];L(r)}},D.prototype.toString=D.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,i=this.s,r=this.outputBlocks,n=this.extraBytes,s=0,o=0,a="";o<r;){for(s=0;s<e&&o<r;++s,++o)t=i[s],a+=u[t>>4&15]+u[15&t]+u[t>>12&15]+u[t>>8&15]+u[t>>20&15]+u[t>>16&15]+u[t>>28&15]+u[t>>24&15];o%e==0&&(L(i),s=0)}return n&&(t=i[s],a+=u[t>>4&15]+u[15&t],n>1&&(a+=u[t>>12&15]+u[t>>8&15]),n>2&&(a+=u[t>>20&15]+u[t>>16&15])),a},D.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,i=this.s,r=this.outputBlocks,n=this.extraBytes,s=0,o=0,a=this.outputBits>>3;t=n?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var h=new Uint32Array(t);o<r;){for(s=0;s<e&&o<r;++s,++o)h[o]=i[s];o%e==0&&L(i)}return n&&(h[s]=i[s],t=t.slice(0,a)),t},D.prototype.buffer=D.prototype.arrayBuffer,D.prototype.digest=D.prototype.array=function(){this.finalize();for(var t,e,i=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,o=0,a=0,h=[];a<n;){for(o=0;o<i&&a<n;++o,++a)t=a<<2,e=r[o],h[t]=255&e,h[t+1]=e>>8&255,h[t+2]=e>>16&255,h[t+3]=e>>24&255;a%i==0&&L(r)}return s&&(t=a<<2,e=r[o],h[t]=255&e,s>1&&(h[t+1]=e>>8&255),s>2&&(h[t+2]=e>>16&255)),h},B.prototype=new D,B.prototype.finalize=function(){return this.encode(this.outputBits,!0),D.prototype.finalize.call(this)};var L=function(t){var e,i,r,n,s,o,a,h,c,l,u,d,f,g,y,m,v,b,w,_,x,E,S,T,A,C,k,R,P,I,O,M,D,B,L,N,U,F,z,j,V,G,H,Y,K,W,X,q,$,J,Z,Q,tt,et,it,rt,nt,st,ot,at,ht,ct,lt;for(r=0;r<48;r+=2)n=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],h=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],l=t[6]^t[16]^t[26]^t[36]^t[46],u=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(o<<1|a>>>31),i=(f=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|o>>>31),t[0]^=e,t[1]^=i,t[10]^=e,t[11]^=i,t[20]^=e,t[21]^=i,t[30]^=e,t[31]^=i,t[40]^=e,t[41]^=i,e=n^(h<<1|c>>>31),i=s^(c<<1|h>>>31),t[2]^=e,t[3]^=i,t[12]^=e,t[13]^=i,t[22]^=e,t[23]^=i,t[32]^=e,t[33]^=i,t[42]^=e,t[43]^=i,e=o^(l<<1|u>>>31),i=a^(u<<1|l>>>31),t[4]^=e,t[5]^=i,t[14]^=e,t[15]^=i,t[24]^=e,t[25]^=i,t[34]^=e,t[35]^=i,t[44]^=e,t[45]^=i,e=h^(d<<1|f>>>31),i=c^(f<<1|d>>>31),t[6]^=e,t[7]^=i,t[16]^=e,t[17]^=i,t[26]^=e,t[27]^=i,t[36]^=e,t[37]^=i,t[46]^=e,t[47]^=i,e=l^(n<<1|s>>>31),i=u^(s<<1|n>>>31),t[8]^=e,t[9]^=i,t[18]^=e,t[19]^=i,t[28]^=e,t[29]^=i,t[38]^=e,t[39]^=i,t[48]^=e,t[49]^=i,g=t[0],y=t[1],W=t[11]<<4|t[10]>>>28,X=t[10]<<4|t[11]>>>28,R=t[20]<<3|t[21]>>>29,P=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ht=t[30]<<9|t[31]>>>23,G=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,B=t[2]<<1|t[3]>>>31,L=t[3]<<1|t[2]>>>31,m=t[13]<<12|t[12]>>>20,v=t[12]<<12|t[13]>>>20,q=t[22]<<10|t[23]>>>22,$=t[23]<<10|t[22]>>>22,I=t[33]<<13|t[32]>>>19,O=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,lt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,it=t[4]<<30|t[5]>>>2,N=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,J=t[34]<<15|t[35]>>>17,Z=t[35]<<15|t[34]>>>17,M=t[45]<<29|t[44]>>>3,D=t[44]<<29|t[45]>>>3,T=t[6]<<28|t[7]>>>4,A=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,nt=t[16]<<23|t[17]>>>9,F=t[26]<<25|t[27]>>>7,z=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,x=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,Y=t[8]<<27|t[9]>>>5,K=t[9]<<27|t[8]>>>5,C=t[18]<<20|t[19]>>>12,k=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,j=t[38]<<8|t[39]>>>24,V=t[39]<<8|t[38]>>>24,E=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=g^~m&b,t[1]=y^~v&w,t[10]=T^~C&R,t[11]=A^~k&P,t[20]=B^~N&F,t[21]=L^~U&z,t[30]=Y^~W&q,t[31]=K^~X&$,t[40]=et^~rt&st,t[41]=it^~nt&ot,t[2]=m^~b&_,t[3]=v^~w&x,t[12]=C^~R&I,t[13]=k^~P&O,t[22]=N^~F&j,t[23]=U^~z&V,t[32]=W^~q&J,t[33]=X^~$&Z,t[42]=rt^~st&at,t[43]=nt^~ot&ht,t[4]=b^~_&E,t[5]=w^~x&S,t[14]=R^~I&M,t[15]=P^~O&D,t[24]=F^~j&G,t[25]=z^~V&H,t[34]=q^~J&Q,t[35]=$^~Z&tt,t[44]=st^~at&ct,t[45]=ot^~ht&lt,t[6]=_^~E&g,t[7]=x^~S&y,t[16]=I^~M&T,t[17]=O^~D&A,t[26]=j^~G&B,t[27]=V^~H&L,t[36]=J^~Q&Y,t[37]=Z^~tt&K,t[46]=at^~ct&et,t[47]=ht^~lt&it,t[8]=E^~g&m,t[9]=S^~y&v,t[18]=M^~T&C,t[19]=D^~A&k,t[28]=G^~B&N,t[29]=H^~L&U,t[38]=Q^~Y&W,t[39]=tt^~K&X,t[48]=ct^~et&rt,t[49]=lt^~it&nt,t[0]^=p[r],t[1]^=p[r+1]};if(h)t.exports=A;else{for(k=0;k<C.length;++k)o[C[k]]=A[C[k]];c&&(void 0===(r=function(){return A}.call(e,i,e,t))||(t.exports=r))}}()},9757:(t,e,i)=>{var r;!function(){"use strict";var e="input is invalid type",n="object"==typeof window,s=n?window:{};s.JS_SHA512_NO_WINDOW&&(n=!1);var o=!n&&"object"==typeof self;!s.JS_SHA512_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?s=i.g:o&&(s=self);var a=!s.JS_SHA512_NO_COMMON_JS&&t.exports,h=i.amdO,c=!s.JS_SHA512_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),u=[-2147483648,8388608,32768,128],d=[24,16,8,0],f=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],p=["hex","array","digest","arrayBuffer"],g=[];!s.JS_SHA512_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!c||!s.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var y=function(t,e){return function(i){return new w(e,!0).update(i)[t]()}},m=function(t){var e=y("hex",t);e.create=function(){return new w(t)},e.update=function(t){return e.create().update(t)};for(var i=0;i<p.length;++i){var r=p[i];e[r]=y(r,t)}return e},v=function(t,e){return function(i,r){return new _(i,e,!0).update(r)[t]()}},b=function(t){var e=v("hex",t);e.create=function(e){return new _(e,t)},e.update=function(t,i){return e.create(t).update(i)};for(var i=0;i<p.length;++i){var r=p[i];e[r]=v(r,t)}return e};function w(t,e){e?(g[0]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=g[16]=g[17]=g[18]=g[19]=g[20]=g[21]=g[22]=g[23]=g[24]=g[25]=g[26]=g[27]=g[28]=g[29]=g[30]=g[31]=g[32]=0,this.blocks=g):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],384==t?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):256==t?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):224==t?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=t,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}function _(t,i,r){var n,s=typeof t;if("string"!==s){if("object"!==s)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||c&&ArrayBuffer.isView(t)))throw new Error(e);n=!0}var o=t.length;if(!n){for(var a,h=[],l=(o=t.length,0),u=0;u<o;++u)(a=t.charCodeAt(u))<128?h[l++]=a:a<2048?(h[l++]=192|a>>6,h[l++]=128|63&a):a<55296||a>=57344?(h[l++]=224|a>>12,h[l++]=128|a>>6&63,h[l++]=128|63&a):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++u)),h[l++]=240|a>>18,h[l++]=128|a>>12&63,h[l++]=128|a>>6&63,h[l++]=128|63&a);t=h}t.length>128&&(t=new w(i,!0).update(t).array());var d=[],f=[];for(u=0;u<128;++u){var p=t[u]||0;d[u]=92^p,f[u]=54^p}w.call(this,i,r),this.update(f),this.oKeyPad=d,this.inner=!0,this.sharedMemory=r}w.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var i,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||c&&ArrayBuffer.isView(t)))throw new Error(e);i=!0}for(var n,s,o=0,a=t.length,h=this.blocks;o<a;){if(this.hashed&&(this.hashed=!1,h[0]=this.block,h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=h[16]=h[17]=h[18]=h[19]=h[20]=h[21]=h[22]=h[23]=h[24]=h[25]=h[26]=h[27]=h[28]=h[29]=h[30]=h[31]=h[32]=0),i)for(s=this.start;o<a&&s<128;++o)h[s>>2]|=t[o]<<d[3&s++];else for(s=this.start;o<a&&s<128;++o)(n=t.charCodeAt(o))<128?h[s>>2]|=n<<d[3&s++]:n<2048?(h[s>>2]|=(192|n>>6)<<d[3&s++],h[s>>2]|=(128|63&n)<<d[3&s++]):n<55296||n>=57344?(h[s>>2]|=(224|n>>12)<<d[3&s++],h[s>>2]|=(128|n>>6&63)<<d[3&s++],h[s>>2]|=(128|63&n)<<d[3&s++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++o)),h[s>>2]|=(240|n>>18)<<d[3&s++],h[s>>2]|=(128|n>>12&63)<<d[3&s++],h[s>>2]|=(128|n>>6&63)<<d[3&s++],h[s>>2]|=(128|63&n)<<d[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=128?(this.block=h[32],this.start=s-128,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[32]=this.block,t[e>>2]|=u[3&e],this.block=t[32],e>=112&&(this.hashed||this.hash(),t[0]=this.block,t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=t[16]=t[17]=t[18]=t[19]=t[20]=t[21]=t[22]=t[23]=t[24]=t[25]=t[26]=t[27]=t[28]=t[29]=t[30]=t[31]=t[32]=0),t[30]=this.hBytes<<3|this.bytes>>>29,t[31]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var t,e,i,r,n,s,o,a,h,c,l,u,d,p,g,y,m,v,b,w,_,x,E,S,T,A=this.h0h,C=this.h0l,k=this.h1h,R=this.h1l,P=this.h2h,I=this.h2l,O=this.h3h,M=this.h3l,D=this.h4h,B=this.h4l,L=this.h5h,N=this.h5l,U=this.h6h,F=this.h6l,z=this.h7h,j=this.h7l,V=this.blocks;for(t=32;t<160;t+=2)e=((w=V[t-30])>>>1|(_=V[t-29])<<31)^(w>>>8|_<<24)^w>>>7,i=(_>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25),r=((w=V[t-4])>>>19|(_=V[t-3])<<13)^(_>>>29|w<<3)^w>>>6,n=(_>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26),w=V[t-32],_=V[t-31],h=((x=V[t-14])>>>16)+(w>>>16)+(e>>>16)+(r>>>16)+((a=(65535&x)+(65535&w)+(65535&e)+(65535&r)+((o=((E=V[t-13])>>>16)+(_>>>16)+(i>>>16)+(n>>>16)+((s=(65535&E)+(65535&_)+(65535&i)+(65535&n))>>>16))>>>16))>>>16),V[t]=h<<16|65535&a,V[t+1]=o<<16|65535&s;var G=A,H=C,Y=k,K=R,W=P,X=I,q=O,$=M,J=D,Z=B,Q=L,tt=N,et=U,it=F,rt=z,nt=j;for(y=Y&W,m=K&X,t=0;t<160;t+=8)e=(G>>>28|H<<4)^(H>>>2|G<<30)^(H>>>7|G<<25),i=(H>>>28|G<<4)^(G>>>2|H<<30)^(G>>>7|H<<25),r=(J>>>14|Z<<18)^(J>>>18|Z<<14)^(Z>>>9|J<<23),n=(Z>>>14|J<<18)^(Z>>>18|J<<14)^(J>>>9|Z<<23),v=(c=G&Y)^G&W^y,b=(l=H&K)^H&X^m,S=J&Q^~J&et,T=Z&tt^~Z&it,w=V[t],_=V[t+1],w=(h=((x=f[t])>>>16)+(w>>>16)+(S>>>16)+(r>>>16)+(rt>>>16)+((a=(65535&x)+(65535&w)+(65535&S)+(65535&r)+(65535&rt)+((o=((E=f[t+1])>>>16)+(_>>>16)+(T>>>16)+(n>>>16)+(nt>>>16)+((s=(65535&E)+(65535&_)+(65535&T)+(65535&n)+(65535&nt))>>>16))>>>16))>>>16))<<16|65535&a,_=o<<16|65535&s,x=(h=(v>>>16)+(e>>>16)+((a=(65535&v)+(65535&e)+((o=(b>>>16)+(i>>>16)+((s=(65535&b)+(65535&i))>>>16))>>>16))>>>16))<<16|65535&a,E=o<<16|65535&s,rt=(h=(q>>>16)+(w>>>16)+((a=(65535&q)+(65535&w)+((o=($>>>16)+(_>>>16)+((s=(65535&$)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a,nt=o<<16|65535&s,e=((q=(h=(x>>>16)+(w>>>16)+((a=(65535&x)+(65535&w)+((o=(E>>>16)+(_>>>16)+((s=(65535&E)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a)>>>28|($=o<<16|65535&s)<<4)^($>>>2|q<<30)^($>>>7|q<<25),i=($>>>28|q<<4)^(q>>>2|$<<30)^(q>>>7|$<<25),r=(rt>>>14|nt<<18)^(rt>>>18|nt<<14)^(nt>>>9|rt<<23),n=(nt>>>14|rt<<18)^(nt>>>18|rt<<14)^(rt>>>9|nt<<23),v=(u=q&G)^q&Y^c,b=(d=$&H)^$&K^l,S=rt&J^~rt&Q,T=nt&Z^~nt&tt,w=V[t+2],_=V[t+3],w=(h=((x=f[t+2])>>>16)+(w>>>16)+(S>>>16)+(r>>>16)+(et>>>16)+((a=(65535&x)+(65535&w)+(65535&S)+(65535&r)+(65535&et)+((o=((E=f[t+3])>>>16)+(_>>>16)+(T>>>16)+(n>>>16)+(it>>>16)+((s=(65535&E)+(65535&_)+(65535&T)+(65535&n)+(65535&it))>>>16))>>>16))>>>16))<<16|65535&a,_=o<<16|65535&s,x=(h=(v>>>16)+(e>>>16)+((a=(65535&v)+(65535&e)+((o=(b>>>16)+(i>>>16)+((s=(65535&b)+(65535&i))>>>16))>>>16))>>>16))<<16|65535&a,E=o<<16|65535&s,et=(h=(W>>>16)+(w>>>16)+((a=(65535&W)+(65535&w)+((o=(X>>>16)+(_>>>16)+((s=(65535&X)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a,it=o<<16|65535&s,e=((W=(h=(x>>>16)+(w>>>16)+((a=(65535&x)+(65535&w)+((o=(E>>>16)+(_>>>16)+((s=(65535&E)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a)>>>28|(X=o<<16|65535&s)<<4)^(X>>>2|W<<30)^(X>>>7|W<<25),i=(X>>>28|W<<4)^(W>>>2|X<<30)^(W>>>7|X<<25),r=(et>>>14|it<<18)^(et>>>18|it<<14)^(it>>>9|et<<23),n=(it>>>14|et<<18)^(it>>>18|et<<14)^(et>>>9|it<<23),v=(p=W&q)^W&G^u,b=(g=X&$)^X&H^d,S=et&rt^~et&J,T=it&nt^~it&Z,w=V[t+4],_=V[t+5],w=(h=((x=f[t+4])>>>16)+(w>>>16)+(S>>>16)+(r>>>16)+(Q>>>16)+((a=(65535&x)+(65535&w)+(65535&S)+(65535&r)+(65535&Q)+((o=((E=f[t+5])>>>16)+(_>>>16)+(T>>>16)+(n>>>16)+(tt>>>16)+((s=(65535&E)+(65535&_)+(65535&T)+(65535&n)+(65535&tt))>>>16))>>>16))>>>16))<<16|65535&a,_=o<<16|65535&s,x=(h=(v>>>16)+(e>>>16)+((a=(65535&v)+(65535&e)+((o=(b>>>16)+(i>>>16)+((s=(65535&b)+(65535&i))>>>16))>>>16))>>>16))<<16|65535&a,E=o<<16|65535&s,Q=(h=(Y>>>16)+(w>>>16)+((a=(65535&Y)+(65535&w)+((o=(K>>>16)+(_>>>16)+((s=(65535&K)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a,tt=o<<16|65535&s,e=((Y=(h=(x>>>16)+(w>>>16)+((a=(65535&x)+(65535&w)+((o=(E>>>16)+(_>>>16)+((s=(65535&E)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a)>>>28|(K=o<<16|65535&s)<<4)^(K>>>2|Y<<30)^(K>>>7|Y<<25),i=(K>>>28|Y<<4)^(Y>>>2|K<<30)^(Y>>>7|K<<25),r=(Q>>>14|tt<<18)^(Q>>>18|tt<<14)^(tt>>>9|Q<<23),n=(tt>>>14|Q<<18)^(tt>>>18|Q<<14)^(Q>>>9|tt<<23),v=(y=Y&W)^Y&q^p,b=(m=K&X)^K&$^g,S=Q&et^~Q&rt,T=tt&it^~tt&nt,w=V[t+6],_=V[t+7],w=(h=((x=f[t+6])>>>16)+(w>>>16)+(S>>>16)+(r>>>16)+(J>>>16)+((a=(65535&x)+(65535&w)+(65535&S)+(65535&r)+(65535&J)+((o=((E=f[t+7])>>>16)+(_>>>16)+(T>>>16)+(n>>>16)+(Z>>>16)+((s=(65535&E)+(65535&_)+(65535&T)+(65535&n)+(65535&Z))>>>16))>>>16))>>>16))<<16|65535&a,_=o<<16|65535&s,x=(h=(v>>>16)+(e>>>16)+((a=(65535&v)+(65535&e)+((o=(b>>>16)+(i>>>16)+((s=(65535&b)+(65535&i))>>>16))>>>16))>>>16))<<16|65535&a,E=o<<16|65535&s,J=(h=(G>>>16)+(w>>>16)+((a=(65535&G)+(65535&w)+((o=(H>>>16)+(_>>>16)+((s=(65535&H)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a,Z=o<<16|65535&s,G=(h=(x>>>16)+(w>>>16)+((a=(65535&x)+(65535&w)+((o=(E>>>16)+(_>>>16)+((s=(65535&E)+(65535&_))>>>16))>>>16))>>>16))<<16|65535&a,H=o<<16|65535&s;h=(A>>>16)+(G>>>16)+((a=(65535&A)+(65535&G)+((o=(C>>>16)+(H>>>16)+((s=(65535&C)+(65535&H))>>>16))>>>16))>>>16),this.h0h=h<<16|65535&a,this.h0l=o<<16|65535&s,h=(k>>>16)+(Y>>>16)+((a=(65535&k)+(65535&Y)+((o=(R>>>16)+(K>>>16)+((s=(65535&R)+(65535&K))>>>16))>>>16))>>>16),this.h1h=h<<16|65535&a,this.h1l=o<<16|65535&s,h=(P>>>16)+(W>>>16)+((a=(65535&P)+(65535&W)+((o=(I>>>16)+(X>>>16)+((s=(65535&I)+(65535&X))>>>16))>>>16))>>>16),this.h2h=h<<16|65535&a,this.h2l=o<<16|65535&s,h=(O>>>16)+(q>>>16)+((a=(65535&O)+(65535&q)+((o=(M>>>16)+($>>>16)+((s=(65535&M)+(65535&$))>>>16))>>>16))>>>16),this.h3h=h<<16|65535&a,this.h3l=o<<16|65535&s,h=(D>>>16)+(J>>>16)+((a=(65535&D)+(65535&J)+((o=(B>>>16)+(Z>>>16)+((s=(65535&B)+(65535&Z))>>>16))>>>16))>>>16),this.h4h=h<<16|65535&a,this.h4l=o<<16|65535&s,h=(L>>>16)+(Q>>>16)+((a=(65535&L)+(65535&Q)+((o=(N>>>16)+(tt>>>16)+((s=(65535&N)+(65535&tt))>>>16))>>>16))>>>16),this.h5h=h<<16|65535&a,this.h5l=o<<16|65535&s,h=(U>>>16)+(et>>>16)+((a=(65535&U)+(65535&et)+((o=(F>>>16)+(it>>>16)+((s=(65535&F)+(65535&it))>>>16))>>>16))>>>16),this.h6h=h<<16|65535&a,this.h6l=o<<16|65535&s,h=(z>>>16)+(rt>>>16)+((a=(65535&z)+(65535&rt)+((o=(j>>>16)+(nt>>>16)+((s=(65535&j)+(65535&nt))>>>16))>>>16))>>>16),this.h7h=h<<16|65535&a,this.h7l=o<<16|65535&s},w.prototype.hex=function(){this.finalize();var t=this.h0h,e=this.h0l,i=this.h1h,r=this.h1l,n=this.h2h,s=this.h2l,o=this.h3h,a=this.h3l,h=this.h4h,c=this.h4l,u=this.h5h,d=this.h5l,f=this.h6h,p=this.h6l,g=this.h7h,y=this.h7l,m=this.bits,v=l[t>>28&15]+l[t>>24&15]+l[t>>20&15]+l[t>>16&15]+l[t>>12&15]+l[t>>8&15]+l[t>>4&15]+l[15&t]+l[e>>28&15]+l[e>>24&15]+l[e>>20&15]+l[e>>16&15]+l[e>>12&15]+l[e>>8&15]+l[e>>4&15]+l[15&e]+l[i>>28&15]+l[i>>24&15]+l[i>>20&15]+l[i>>16&15]+l[i>>12&15]+l[i>>8&15]+l[i>>4&15]+l[15&i]+l[r>>28&15]+l[r>>24&15]+l[r>>20&15]+l[r>>16&15]+l[r>>12&15]+l[r>>8&15]+l[r>>4&15]+l[15&r]+l[n>>28&15]+l[n>>24&15]+l[n>>20&15]+l[n>>16&15]+l[n>>12&15]+l[n>>8&15]+l[n>>4&15]+l[15&n]+l[s>>28&15]+l[s>>24&15]+l[s>>20&15]+l[s>>16&15]+l[s>>12&15]+l[s>>8&15]+l[s>>4&15]+l[15&s]+l[o>>28&15]+l[o>>24&15]+l[o>>20&15]+l[o>>16&15]+l[o>>12&15]+l[o>>8&15]+l[o>>4&15]+l[15&o];return m>=256&&(v+=l[a>>28&15]+l[a>>24&15]+l[a>>20&15]+l[a>>16&15]+l[a>>12&15]+l[a>>8&15]+l[a>>4&15]+l[15&a]),m>=384&&(v+=l[h>>28&15]+l[h>>24&15]+l[h>>20&15]+l[h>>16&15]+l[h>>12&15]+l[h>>8&15]+l[h>>4&15]+l[15&h]+l[c>>28&15]+l[c>>24&15]+l[c>>20&15]+l[c>>16&15]+l[c>>12&15]+l[c>>8&15]+l[c>>4&15]+l[15&c]+l[u>>28&15]+l[u>>24&15]+l[u>>20&15]+l[u>>16&15]+l[u>>12&15]+l[u>>8&15]+l[u>>4&15]+l[15&u]+l[d>>28&15]+l[d>>24&15]+l[d>>20&15]+l[d>>16&15]+l[d>>12&15]+l[d>>8&15]+l[d>>4&15]+l[15&d]),512==m&&(v+=l[f>>28&15]+l[f>>24&15]+l[f>>20&15]+l[f>>16&15]+l[f>>12&15]+l[f>>8&15]+l[f>>4&15]+l[15&f]+l[p>>28&15]+l[p>>24&15]+l[p>>20&15]+l[p>>16&15]+l[p>>12&15]+l[p>>8&15]+l[p>>4&15]+l[15&p]+l[g>>28&15]+l[g>>24&15]+l[g>>20&15]+l[g>>16&15]+l[g>>12&15]+l[g>>8&15]+l[g>>4&15]+l[15&g]+l[y>>28&15]+l[y>>24&15]+l[y>>20&15]+l[y>>16&15]+l[y>>12&15]+l[y>>8&15]+l[y>>4&15]+l[15&y]),v},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var t=this.h0h,e=this.h0l,i=this.h1h,r=this.h1l,n=this.h2h,s=this.h2l,o=this.h3h,a=this.h3l,h=this.h4h,c=this.h4l,l=this.h5h,u=this.h5l,d=this.h6h,f=this.h6l,p=this.h7h,g=this.h7l,y=this.bits,m=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o];return y>=256&&m.push(a>>24&255,a>>16&255,a>>8&255,255&a),y>=384&&m.push(h>>24&255,h>>16&255,h>>8&255,255&h,c>>24&255,c>>16&255,c>>8&255,255&c,l>>24&255,l>>16&255,l>>8&255,255&l,u>>24&255,u>>16&255,u>>8&255,255&u),512==y&&m.push(d>>24&255,d>>16&255,d>>8&255,255&d,f>>24&255,f>>16&255,f>>8&255,255&f,p>>24&255,p>>16&255,p>>8&255,255&p,g>>24&255,g>>16&255,g>>8&255,255&g),m},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var t=this.bits,e=new ArrayBuffer(t/8),i=new DataView(e);return i.setUint32(0,this.h0h),i.setUint32(4,this.h0l),i.setUint32(8,this.h1h),i.setUint32(12,this.h1l),i.setUint32(16,this.h2h),i.setUint32(20,this.h2l),i.setUint32(24,this.h3h),t>=256&&i.setUint32(28,this.h3l),t>=384&&(i.setUint32(32,this.h4h),i.setUint32(36,this.h4l),i.setUint32(40,this.h5h),i.setUint32(44,this.h5l)),512==t&&(i.setUint32(48,this.h6h),i.setUint32(52,this.h6l),i.setUint32(56,this.h7h),i.setUint32(60,this.h7l)),e},w.prototype.clone=function(){var t=new w(this.bits,!1);return this.copyTo(t),t},w.prototype.copyTo=function(t){var e=0,i=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(e=0;e<i.length;++e)t[i[e]]=this[i[e]];for(e=0;e<this.blocks.length;++e)t.blocks[e]=this.blocks[e]},_.prototype=new w,_.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();w.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(t),w.prototype.finalize.call(this)}},_.prototype.clone=function(){var t=new _([],this.bits,!1);this.copyTo(t),t.inner=this.inner;for(var e=0;e<this.oKeyPad.length;++e)t.oKeyPad[e]=this.oKeyPad[e];return t};var x=m(512);x.sha512=x,x.sha384=m(384),x.sha512_256=m(256),x.sha512_224=m(224),x.sha512.hmac=b(512),x.sha384.hmac=b(384),x.sha512_256.hmac=b(256),x.sha512_224.hmac=b(224),a?t.exports=x:(s.sha512=x.sha512,s.sha384=x.sha384,s.sha512_256=x.sha512_256,s.sha512_224=x.sha512_224,h&&(void 0===(r=function(){return x}.call(x,i,x,t))||(t.exports=r)))}()},4360:(t,e,i)=>{var r=i(592).stringify,n=i(9385);t.exports=function(t){return{parse:n(t),stringify:r}},t.exports.parse=n(),t.exports.stringify=r},9385:(t,e,i)=>{var r=null;const n=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,s=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;t.exports=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=t){if(!0===t.strict&&(e.strict=!0),!0===t.storeAsString&&(e.storeAsString=!0),e.alwaysParseAsBig=!0===t.alwaysParseAsBig&&t.alwaysParseAsBig,e.useNativeBigInt=!0===t.useNativeBigInt&&t.useNativeBigInt,void 0!==t.constructorAction){if("error"!==t.constructorAction&&"ignore"!==t.constructorAction&&"preserve"!==t.constructorAction)throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);e.constructorAction=t.constructorAction}if(void 0!==t.protoAction){if("error"!==t.protoAction&&"ignore"!==t.protoAction&&"preserve"!==t.protoAction)throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`);e.protoAction=t.protoAction}}var o,a,h,c,l={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=function(t){throw{name:"SyntaxError",message:t,at:o,text:h}},d=function(t){return t&&t!==a&&u("Expected '"+t+"' instead of '"+a+"'"),a=h.charAt(o),o+=1,a},f=function(){var t,n="";for("-"===a&&(n="-",d("-"));a>="0"&&a<="9";)n+=a,d();if("."===a)for(n+=".";d()&&a>="0"&&a<="9";)n+=a;if("e"===a||"E"===a)for(n+=a,d(),"-"!==a&&"+"!==a||(n+=a,d());a>="0"&&a<="9";)n+=a,d();if(t=+n,isFinite(t))return null==r&&(r=i(5117)),n.length>15?e.storeAsString?n:e.useNativeBigInt?BigInt(n):new r(n):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(t):new r(t):t;u("Bad number")},p=function(){var t,e,i,r="";if('"'===a)for(var n=o;d();){if('"'===a)return o-1>n&&(r+=h.substring(n,o-1)),d(),r;if("\\"===a){if(o-1>n&&(r+=h.substring(n,o-1)),d(),"u"===a){for(i=0,e=0;e<4&&(t=parseInt(d(),16),isFinite(t));e+=1)i=16*i+t;r+=String.fromCharCode(i)}else{if("string"!=typeof l[a])break;r+=l[a]}n=o}}u("Bad string")},g=function(){for(;a&&a<=" ";)d()};return c=function(){switch(g(),a){case"{":return function(){var t,i=Object.create(null);if("{"===a){if(d("{"),g(),"}"===a)return d("}"),i;for(;a;){if(t=p(),g(),d(":"),!0===e.strict&&Object.hasOwnProperty.call(i,t)&&u('Duplicate key "'+t+'"'),!0===n.test(t)?"error"===e.protoAction?u("Object contains forbidden prototype property"):"ignore"===e.protoAction?c():i[t]=c():!0===s.test(t)?"error"===e.constructorAction?u("Object contains forbidden constructor property"):"ignore"===e.constructorAction?c():i[t]=c():i[t]=c(),g(),"}"===a)return d("}"),i;d(","),g()}}u("Bad object")}();case"[":return function(){var t=[];if("["===a){if(d("["),g(),"]"===a)return d("]"),t;for(;a;){if(t.push(c()),g(),"]"===a)return d("]"),t;d(","),g()}}u("Bad array")}();case'"':return p();case"-":return f();default:return a>="0"&&a<="9"?f():function(){switch(a){case"t":return d("t"),d("r"),d("u"),d("e"),!0;case"f":return d("f"),d("a"),d("l"),d("s"),d("e"),!1;case"n":return d("n"),d("u"),d("l"),d("l"),null}u("Unexpected '"+a+"'")}()}},function(t,e){var i;return h=t+"",o=0,a=" ",i=c(),g(),a&&u("Syntax error"),"function"==typeof e?function t(i,r){var n,s=i[r];return s&&"object"==typeof s&&Object.keys(s).forEach((function(e){void 0!==(n=t(s,e))?s[e]=n:delete s[e]})),e.call(i,r,s)}({"":i},""):i}}},592:(t,e,i)=>{var r=i(5117),n=t.exports;!function(){"use strict";var t,e,i,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(t){return s.lastIndex=0,s.test(t)?'"'+t.replace(s,(function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function h(n,s){var o,c,l,u,d,f=t,p=s[n],g=null!=p&&(p instanceof r||r.isBigNumber(p));switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(n)),"function"==typeof i&&(p=i.call(s,n,p)),typeof p){case"string":return g?p:a(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":case"bigint":return String(p);case"object":if(!p)return"null";if(t+=e,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(u=p.length,o=0;o<u;o+=1)d[o]=h(o,p)||"null";return l=0===d.length?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+f+"]":"["+d.join(",")+"]",t=f,l}if(i&&"object"==typeof i)for(u=i.length,o=0;o<u;o+=1)"string"==typeof i[o]&&(l=h(c=i[o],p))&&d.push(a(c)+(t?": ":":")+l);else Object.keys(p).forEach((function(e){var i=h(e,p);i&&d.push(a(e)+(t?": ":":")+i)}));return l=0===d.length?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+f+"}":"{"+d.join(",")+"}",t=f,l}}"function"!=typeof n.stringify&&(n.stringify=function(r,n,s){var o;if(t="",e="","number"==typeof s)for(o=0;o<s;o+=1)e+=" ";else"string"==typeof s&&(e=s);if(i=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return h("",{"":r})})}()},3126:(t,e,i)=>{var r="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=r&&n&&"function"==typeof n.get?n.get:null,o=r&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,h=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&h&&"function"==typeof h.get?h.get:null,l=a&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,y=Function.prototype.toString,m=String.prototype.match,v="function"==typeof BigInt?BigInt.prototype.valueOf:null,b=Object.getOwnPropertySymbols,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,_="function"==typeof Symbol&&"object"==typeof Symbol.iterator,x=Object.prototype.propertyIsEnumerable,E=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),S=i(4654).custom,T=S&&P(S)?S:null,A="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function C(t,e,i){var r="double"===(i.quoteStyle||e)?'"':"'";return r+t+r}function k(t){return String(t).replace(/"/g,"&quot;")}function R(t){return!("[object Array]"!==M(t)||A&&"object"==typeof t&&A in t)}function P(t){if(_)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!w)return!1;try{return w.call(t),!0}catch(t){}return!1}t.exports=function t(e,i,r,n){var a=i||{};if(O(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(O(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var h=!O(a,"customInspect")||a.customInspect;if("boolean"!=typeof h)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(O(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return B(e,a);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var g=void 0===a.depth?5:a.depth;if(void 0===r&&(r=0),r>=g&&g>0&&"object"==typeof e)return R(e)?"[Array]":"[Object]";var b,x=function(t,e){var i;if("\t"===t.indent)i="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;i=Array(t.indent+1).join(" ")}return{base:i,prev:Array(e+1).join(i)}}(a,r);if(void 0===n)n=[];else if(D(n,e)>=0)return"[Circular]";function S(e,i,s){if(i&&(n=n.slice()).push(i),s){var o={depth:a.depth};return O(a,"quoteStyle")&&(o.quoteStyle=a.quoteStyle),t(e,o,r+1,n)}return t(e,a,r+1,n)}if("function"==typeof e){var I=function(t){if(t.name)return t.name;var e=m.call(y.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e),L=j(e,S);return"[Function"+(I?": "+I:" (anonymous)")+"]"+(L.length>0?" { "+L.join(", ")+" }":"")}if(P(e)){var V=_?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):w.call(e);return"object"!=typeof e||_?V:N(V)}if((b=e)&&"object"==typeof b&&("undefined"!=typeof HTMLElement&&b instanceof HTMLElement||"string"==typeof b.nodeName&&"function"==typeof b.getAttribute)){for(var G="<"+String(e.nodeName).toLowerCase(),H=e.attributes||[],Y=0;Y<H.length;Y++)G+=" "+H[Y].name+"="+C(k(H[Y].value),"double",a);return G+=">",e.childNodes&&e.childNodes.length&&(G+="..."),G+"</"+String(e.nodeName).toLowerCase()+">"}if(R(e)){if(0===e.length)return"[]";var K=j(e,S);return x&&!function(t){for(var e=0;e<t.length;e++)if(D(t[e],"\n")>=0)return!1;return!0}(K)?"["+z(K,x)+"]":"[ "+K.join(", ")+" ]"}if(function(t){return!("[object Error]"!==M(t)||A&&"object"==typeof t&&A in t)}(e)){var W=j(e,S);return 0===W.length?"["+String(e)+"]":"{ ["+String(e)+"] "+W.join(", ")+" }"}if("object"==typeof e&&h){if(T&&"function"==typeof e[T])return e[T]();if("function"==typeof e.inspect)return e.inspect()}if(function(t){if(!s||!t||"object"!=typeof t)return!1;try{s.call(t);try{c.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var X=[];return o.call(e,(function(t,i){X.push(S(i,e,!0)+" => "+S(t,e))})),F("Map",s.call(e),X,x)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t);try{s.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var q=[];return l.call(e,(function(t){q.push(S(t,e))})),F("Set",c.call(e),q,x)}if(function(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t,u);try{d.call(t,d)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return U("WeakMap");if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{d.call(t,d);try{u.call(t,u)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return U("WeakSet");if(function(t){if(!f||!t||"object"!=typeof t)return!1;try{return f.call(t),!0}catch(t){}return!1}(e))return U("WeakRef");if(function(t){return!("[object Number]"!==M(t)||A&&"object"==typeof t&&A in t)}(e))return N(S(Number(e)));if(function(t){if(!t||"object"!=typeof t||!v)return!1;try{return v.call(t),!0}catch(t){}return!1}(e))return N(S(v.call(e)));if(function(t){return!("[object Boolean]"!==M(t)||A&&"object"==typeof t&&A in t)}(e))return N(p.call(e));if(function(t){return!("[object String]"!==M(t)||A&&"object"==typeof t&&A in t)}(e))return N(S(String(e)));if(!function(t){return!("[object Date]"!==M(t)||A&&"object"==typeof t&&A in t)}(e)&&!function(t){return!("[object RegExp]"!==M(t)||A&&"object"==typeof t&&A in t)}(e)){var $=j(e,S),J=E?E(e)===Object.prototype:e instanceof Object||e.constructor===Object,Z=e instanceof Object?"":"null prototype",Q=!J&&A&&Object(e)===e&&A in e?M(e).slice(8,-1):Z?"Object":"",tt=(J||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(Q||Z?"["+[].concat(Q||[],Z||[]).join(": ")+"] ":"");return 0===$.length?tt+"{}":x?tt+"{"+z($,x)+"}":tt+"{ "+$.join(", ")+" }"}return String(e)};var I=Object.prototype.hasOwnProperty||function(t){return t in this};function O(t,e){return I.call(t,e)}function M(t){return g.call(t)}function D(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function B(t,e){if(t.length>e.maxStringLength){var i=t.length-e.maxStringLength,r="... "+i+" more character"+(i>1?"s":"");return B(t.slice(0,e.maxStringLength),e)+r}return C(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,L),"single",e)}function L(t){var e=t.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return i?"\\"+i:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function N(t){return"Object("+t+")"}function U(t){return t+" { ? }"}function F(t,e,i,r){return t+" ("+e+") {"+(r?z(i,r):i.join(", "))+"}"}function z(t,e){if(0===t.length)return"";var i="\n"+e.prev+e.base;return i+t.join(","+i)+"\n"+e.prev}function j(t,e){var i=R(t),r=[];if(i){r.length=t.length;for(var n=0;n<t.length;n++)r[n]=O(t,n)?e(t[n],t):""}var s,o="function"==typeof b?b(t):[];if(_){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var h in t)O(t,h)&&(i&&String(Number(h))===h&&h<t.length||_&&s["$"+h]instanceof Symbol||(/[^\w$]/.test(h)?r.push(e(h,t)+": "+e(t[h],t)):r.push(h+": "+e(t[h],t))));if("function"==typeof b)for(var c=0;c<o.length;c++)x.call(t,o[c])&&r.push("["+e(o[c])+"]: "+e(t[o[c]],t));return r}},9368:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function i(t,e){for(var i,r="",n=0,s=-1,o=0,a=0;a<=t.length;++a){if(a<t.length)i=t.charCodeAt(a);else{if(47===i)break;i=47}if(47===i){if(s===a-1||1===o);else if(s!==a-1&&2===o){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var h=r.lastIndexOf("/");if(h!==r.length-1){-1===h?(r="",n=0):n=(r=r.slice(0,h)).length-1-r.lastIndexOf("/"),s=a,o=0;continue}}else if(2===r.length||1===r.length){r="",n=0,s=a,o=0;continue}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,o=0}else 46===i&&-1!==o?++o:o=-1}return r}var r={resolve:function(){for(var t,r="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o;s>=0?o=arguments[s]:(void 0===t&&(t=process.cwd()),o=t),e(o),0!==o.length&&(r=o+"/"+r,n=47===o.charCodeAt(0))}return r=i(r,!n),n?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(e(t),0===t.length)return".";var r=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1);return 0!==(t=i(t,!r)).length||r||(t="."),t.length>0&&n&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,i=0;i<arguments.length;++i){var n=arguments[i];e(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":r.normalize(t)},relative:function(t,i){if(e(t),e(i),t===i)return"";if((t=r.resolve(t))===(i=r.resolve(i)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var s=t.length,o=s-n,a=1;a<i.length&&47===i.charCodeAt(a);++a);for(var h=i.length-a,c=o<h?o:h,l=-1,u=0;u<=c;++u){if(u===c){if(h>c){if(47===i.charCodeAt(a+u))return i.slice(a+u+1);if(0===u)return i.slice(a+u)}else o>c&&(47===t.charCodeAt(n+u)?l=u:0===u&&(l=0));break}var d=t.charCodeAt(n+u);if(d!==i.charCodeAt(a+u))break;47===d&&(l=u)}var f="";for(u=n+l+1;u<=s;++u)u!==s&&47!==t.charCodeAt(u)||(0===f.length?f+="..":f+="/..");return f.length>0?f+i.slice(a+l):(a+=l,47===i.charCodeAt(a)&&++a,i.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var i=t.charCodeAt(0),r=47===i,n=-1,s=!0,o=t.length-1;o>=1;--o)if(47===(i=t.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?r?"/":".":r&&1===n?"//":t.slice(0,n)},basename:function(t,i){if(void 0!==i&&"string"!=typeof i)throw new TypeError('"ext" argument must be a string');e(t);var r,n=0,s=-1,o=!0;if(void 0!==i&&i.length>0&&i.length<=t.length){if(i.length===t.length&&i===t)return"";var a=i.length-1,h=-1;for(r=t.length-1;r>=0;--r){var c=t.charCodeAt(r);if(47===c){if(!o){n=r+1;break}}else-1===h&&(o=!1,h=r+1),a>=0&&(c===i.charCodeAt(a)?-1==--a&&(s=r):(a=-1,s=h))}return n===s?s=h:-1===s&&(s=t.length),t.slice(n,s)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!o){n=r+1;break}}else-1===s&&(o=!1,s=r+1);return-1===s?"":t.slice(n,s)},extname:function(t){e(t);for(var i=-1,r=0,n=-1,s=!0,o=0,a=t.length-1;a>=0;--a){var h=t.charCodeAt(a);if(47!==h)-1===n&&(s=!1,n=a+1),46===h?-1===i?i=a:1!==o&&(o=1):-1!==i&&(o=-1);else if(!s){r=a+1;break}}return-1===i||-1===n||0===o||1===o&&i===n-1&&i===r+1?"":t.slice(i,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+"/"+r:r}(0,t)},parse:function(t){e(t);var i={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return i;var r,n=t.charCodeAt(0),s=47===n;s?(i.root="/",r=1):r=0;for(var o=-1,a=0,h=-1,c=!0,l=t.length-1,u=0;l>=r;--l)if(47!==(n=t.charCodeAt(l)))-1===h&&(c=!1,h=l+1),46===n?-1===o?o=l:1!==u&&(u=1):-1!==o&&(u=-1);else if(!c){a=l+1;break}return-1===o||-1===h||0===u||1===u&&o===h-1&&o===a+1?-1!==h&&(i.base=i.name=0===a&&s?t.slice(1,h):t.slice(a,h)):(0===a&&s?(i.name=t.slice(1,o),i.base=t.slice(1,h)):(i.name=t.slice(a,o),i.base=t.slice(a,h)),i.ext=t.slice(o,h)),a>0?i.dir=t.slice(0,a-1):s&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r},9370:(t,e)=>{"use strict";var i=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function n(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,s,o=[];for(s in"string"!=typeof e&&(e="?"),t)if(i.call(t,s)){if((r=t[s])||null!=r&&!isNaN(r)||(r=""),s=n(s),r=n(r),null===s||null===r)continue;o.push(s+"="+r)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,i=/([^=?#&]+)=?([^&]*)/g,n={};e=i.exec(t);){var s=r(e[1]),o=r(e[2]);null===s||null===o||s in n||(n[s]=o)}return n}},1926:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},3680:(t,e,i)=>{"use strict";var r=i(1801),n=i(7615),s=i(3126),o=r("%TypeError%"),a=r("%WeakMap%",!0),h=r("%Map%",!0),c=n("WeakMap.prototype.get",!0),l=n("WeakMap.prototype.set",!0),u=n("WeakMap.prototype.has",!0),d=n("Map.prototype.get",!0),f=n("Map.prototype.set",!0),p=n("Map.prototype.has",!0),g=function(t,e){for(var i,r=t;null!==(i=r.next);r=i)if(i.key===e)return r.next=i.next,i.next=t.next,t.next=i,i};t.exports=function(){var t,e,i,r={assert:function(t){if(!r.has(t))throw new o("Side channel does not contain "+s(t))},get:function(r){if(a&&r&&("object"==typeof r||"function"==typeof r)){if(t)return c(t,r)}else if(h){if(e)return d(e,r)}else if(i)return function(t,e){var i=g(t,e);return i&&i.value}(i,r)},has:function(r){if(a&&r&&("object"==typeof r||"function"==typeof r)){if(t)return u(t,r)}else if(h){if(e)return p(e,r)}else if(i)return function(t,e){return!!g(t,e)}(i,r);return!1},set:function(r,n){a&&r&&("object"==typeof r||"function"==typeof r)?(t||(t=new a),l(t,r,n)):h?(e||(e=new h),f(e,r,n)):(i||(i={key:{},next:null}),function(t,e,i){var r=g(t,e);r?r.value=i:t.next={key:e,next:t.next,value:i}}(i,r,n))}};return r}},2858:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function i(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(t){i.prototype[t]=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return this._defaults.push({fn:t,args:i}),this}})),i.prototype._setDefaults=function(t){this._defaults.forEach((function(i){var r;t[i.fn].apply(t,function(t){if(Array.isArray(t))return e(t)}(r=i.args)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,i):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}))},t.exports=i},5391:(t,e,i)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;"undefined"!=typeof window?n=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),n=void 0):n=self;var s=i(1069),o=i(5799),a=i(3065),h=i(4287),c=i(1960),l=i(969),u=i(2858);function d(){}t.exports=function(t,i){return"function"==typeof i?new e.Request("GET",t).end(i):1===arguments.length?new e.Request("GET",t):new e.Request(t,i)};var f=e=t.exports;e.Request=w,f.getXHR=function(){if(n.XMLHttpRequest&&(!n.location||"file:"!==n.location.protocol||!n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw new Error("Browser-only version of superagent could not find XHR")};var p="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function g(t){if(!c(t))return t;var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&y(e,i,t[i]);return e.join("&")}function y(t,e,i){if(void 0!==i)if(null!==i)if(Array.isArray(i))i.forEach((function(i){y(t,e,i)}));else if(c(i))for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&y(t,"".concat(e,"[").concat(r,"]"),i[r]);else t.push(encodeURI(e)+"="+encodeURIComponent(i));else t.push(encodeURI(e))}function m(t){for(var e,i,r={},n=t.split("&"),s=0,o=n.length;s<o;++s)-1===(i=(e=n[s]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,i))]=decodeURIComponent(e.slice(i+1));return r}function v(t){return/[/+]json($|[^-\w])/i.test(t)}function b(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,i,r,n,s=t.split(/\r?\n/),o={},a=0,h=s.length;a<h;++a)-1!==(e=(i=s[a]).indexOf(":"))&&(r=i.slice(0,e).toLowerCase(),n=p(i.slice(e+1)),o[r]=n);return o}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function w(t,e){var i=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",(function(){var t,e=null,r=null;try{r=new b(i)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,i.xhr?(e.rawResponse=void 0===i.xhr.responseType?i.xhr.responseText:i.xhr.response,e.status=i.xhr.status?i.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),i.callback(e)}i.emit("response",r);try{i._isResponseOK(r)||(t=new Error(r.statusText||r.text||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=r,t.status=r.status,i.callback(t,r)):i.callback(null,r)}))}function _(t,e,i){var r=f("DELETE",t);return"function"==typeof e&&(i=e,e=null),e&&r.send(e),i&&r.end(i),r}f.serializeObject=g,f.parseString=m,f.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},f.serialize={"application/x-www-form-urlencoded":a.stringify,"application/json":o},f.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse},l(b.prototype),b.prototype._parseBody=function(t){var e=f.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&v(this.type)&&(e=f.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},b.prototype.toError=function(){var t=this.req,e=t.method,i=t.url,r="cannot ".concat(e," ").concat(i," (").concat(this.status,")"),n=new Error(r);return n.status=this.status,n.method=e,n.url=i,n},f.Response=b,s(w.prototype),h(w.prototype),w.prototype.type=function(t){return this.set("Content-Type",f.types[t]||t),this},w.prototype.accept=function(t){return this.set("Accept",f.types[t]||t),this},w.prototype.auth=function(t,e,i){1===arguments.length&&(e=""),"object"===r(e)&&null!==e&&(i=e,e=""),i||(i={type:"function"==typeof btoa?"basic":"auto"});var n=function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(t,e,i,n)},w.prototype.query=function(t){return"string"!=typeof t&&(t=g(t)),t&&this._query.push(t),this},w.prototype.attach=function(t,e,i){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,i||e.name)}return this},w.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},w.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var i=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),i(t,e)},w.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},w.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},w.prototype.ca=w.prototype.agent,w.prototype.buffer=w.prototype.ca,w.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},w.prototype.pipe=w.prototype.write,w.prototype._isHost=function(t){return t&&"object"===r(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},w.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||d,this._finalizeQueryString(),this._end()},w.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},w.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=f.getXHR();var e=this.xhr,i=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var i=e.readyState;if(i>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===i){var r;try{r=e.status}catch(t){r=0}if(!r){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var r=function(e,i){i.total>0&&(i.percent=i.loaded/i.total*100,100===i.percent&&clearTimeout(t._uploadTimeoutTimer)),i.direction=e,t.emit("progress",i)};if(this.hasListeners("progress"))try{e.addEventListener("progress",r.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",r.bind(null,"upload"))}catch(t){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof i&&!this._isHost(i)){var n=this._header["content-type"],s=this._serializer||f.serialize[n?n.split(";")[0]:""];!s&&v(n)&&(s=f.serialize["application/json"]),s&&(i=s(i))}for(var o in this.header)null!==this.header[o]&&Object.prototype.hasOwnProperty.call(this.header,o)&&e.setRequestHeader(o,this.header[o]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===i?null:i)},f.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(t){u.prototype[t.toLowerCase()]=function(e,i){var r=new f.Request(t,e);return this._setDefaults(r),i&&r.end(i),r}})),u.prototype.del=u.prototype.delete,f.get=function(t,e,i){var r=f("GET",t);return"function"==typeof e&&(i=e,e=null),e&&r.query(e),i&&r.end(i),r},f.head=function(t,e,i){var r=f("HEAD",t);return"function"==typeof e&&(i=e,e=null),e&&r.query(e),i&&r.end(i),r},f.options=function(t,e,i){var r=f("OPTIONS",t);return"function"==typeof e&&(i=e,e=null),e&&r.send(e),i&&r.end(i),r},f.del=_,f.delete=_,f.patch=function(t,e,i){var r=f("PATCH",t);return"function"==typeof e&&(i=e,e=null),e&&r.send(e),i&&r.end(i),r},f.post=function(t,e,i){var r=f("POST",t);return"function"==typeof e&&(i=e,e=null),e&&r.send(e),i&&r.end(i),r},f.put=function(t,e,i){var r=f("PUT",t);return"function"==typeof e&&(i=e,e=null),e&&r.send(e),i&&r.end(i),r}},1960:t=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!==t&&"object"===e(t)}},4287:(t,e,i)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=i(1960);function s(t){if(t)return function(t){for(var e in s.prototype)Object.prototype.hasOwnProperty.call(s.prototype,e)&&(t[e]=s.prototype[e]);return t}(t)}t.exports=s,s.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},s.prototype.parse=function(t){return this._parser=t,this},s.prototype.responseType=function(t){return this._responseType=t,this},s.prototype.serialize=function(t){return this._serializer=t,this},s.prototype.timeout=function(t){if(!t||"object"!==r(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},s.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var o=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),a=new Set([408,413,429,500,502,503,504,521,522,524]);s.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var i=this._retryCallback(t,e);if(!0===i)return!0;if(!1===i)return!1}catch(t){console.error(t)}if(e&&e.status&&a.has(e.status))return!0;if(t){if(t.code&&o.has(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},s.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},s.prototype.then=function(t,e){var i=this;if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(t,e){r.on("abort",(function(){if(!(i._maxRetries&&i._maxRetries>i._retries))if(i.timedout&&i.timedoutError)e(i.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=i.status,t.method=i.method,t.url=i.url,e(t)}})),r.end((function(i,r){i?e(i):t(r)}))}))}return this._fullfilledPromise.then(t,e)},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.use=function(t){return t(this),this},s.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},s.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},s.prototype.get=function(t){return this._header[t.toLowerCase()]},s.prototype.getHeader=s.prototype.get,s.prototype.set=function(t,e){if(n(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.set(i,t[i]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},s.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},s.prototype.field=function(t,e){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(n(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.field(i,t[i]);return this}if(Array.isArray(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.field(t,e[r]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),this._getFormData().append(t,e),this},s.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},s.prototype._auth=function(t,e,i,r){switch(i.type){case"basic":this.set("Authorization","Basic ".concat(r("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},s.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},s.prototype.redirects=function(t){return this._maxRedirects=t,this},s.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},s.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},s.prototype.send=function(t){var e=n(t),i=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&n(this._data))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this._data[r]=t[r]);else"string"==typeof t?(i||this.type("form"),(i=this._header["content-type"])&&(i=i.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===i?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||i||this.type("json"),this},s.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},s.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var i=this.url.slice(e+1).split("&");"function"==typeof this._sort?i.sort(this._sort):i.sort(),this.url=this.url.slice(0,e)+"?"+i.join("&")}}},s.prototype._appendQueryString=function(){console.warn("Unsupported")},s.prototype._timeoutError=function(t,e,i){if(!this._aborted){var r=new Error("".concat(t+e,"ms exceeded"));r.timeout=e,r.code="ECONNABORTED",r.errno=i,this.timedout=!0,this.timedoutError=r,this.abort(),this.callback(r)}},s.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},969:(t,e,i)=>{"use strict";var r=i(3094);function n(t){if(t)return function(t){for(var e in n.prototype)Object.prototype.hasOwnProperty.call(n.prototype,e)&&(t[e]=n.prototype[e]);return t}(t)}t.exports=n,n.prototype.get=function(t){return this.header[t.toLowerCase()]},n.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=r.type(e);var i=r.params(e);for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(this[n]=i[n]);this.links={};try{t.link&&(this.links=r.parseLinks(t.link))}catch(t){}},n.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},3094:(t,e)=>{"use strict";function i(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){var e,r={},n=i(t.split(/ *; */));try{for(n.s();!(e=n.n()).done;){var s=e.value.split(/ *= */),o=s.shift(),a=s.shift();o&&a&&(r[o]=a)}}catch(t){n.e(t)}finally{n.f()}return r},e.parseLinks=function(t){var e,r={},n=i(t.split(/ *, */));try{for(n.s();!(e=n.n()).done;){var s=e.value.split(/ *; */),o=s[0].slice(1,-1);r[s[1].split(/ *= */)[1].slice(1,-1)]=o}}catch(t){n.e(t)}finally{n.f()}return r},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},5335:t=>{"use strict";var e=String.prototype.replace,i=/%20/g,r="RFC3986";t.exports={default:r,formatters:{RFC1738:function(t){return e.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:r}},3065:(t,e,i)=>{"use strict";var r=i(4246),n=i(1688),s=i(5335);t.exports={formats:s,parse:n,stringify:r}},1688:(t,e,i)=>{"use strict";var r=i(4562),n=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},h=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},c=function(t,e,i,r){if(t){var s=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=i.depth>0&&/(\[[^[\]]*])/.exec(s),c=a?s.slice(0,a.index):s,l=[];if(c){if(!i.plainObjects&&n.call(Object.prototype,c)&&!i.allowPrototypes)return;l.push(c)}for(var u=0;i.depth>0&&null!==(a=o.exec(s))&&u<i.depth;){if(u+=1,!i.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+s.slice(a.index)+"]"),function(t,e,i,r){for(var n=r?e:h(e,i),s=t.length-1;s>=0;--s){var o,a=t[s];if("[]"===a&&i.parseArrays)o=[].concat(n);else{o=i.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(c,10);i.parseArrays||""!==c?!isNaN(l)&&a!==c&&String(l)===c&&l>=0&&i.parseArrays&&l<=i.arrayLimit?(o=[])[l]=n:o[c]=n:o={0:n}}n=o}return n}(l,e,i,r)}};t.exports=function(t,e){var i=function(t){if(!t)return o;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?o.charset:t.charset;return{allowDots:void 0===t.allowDots?o.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:o.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:o.comma,decoder:"function"==typeof t.decoder?t.decoder:o.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:o.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling}}(e);if(""===t||null==t)return i.plainObjects?Object.create(null):{};for(var l="string"==typeof t?function(t,e){var i,c={},l=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,u=e.parameterLimit===1/0?void 0:e.parameterLimit,d=l.split(e.delimiter,u),f=-1,p=e.charset;if(e.charsetSentinel)for(i=0;i<d.length;++i)0===d[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[i]?p="utf-8":"utf8=%26%2310003%3B"===d[i]&&(p="iso-8859-1"),f=i,i=d.length);for(i=0;i<d.length;++i)if(i!==f){var g,y,m=d[i],v=m.indexOf("]="),b=-1===v?m.indexOf("="):v+1;-1===b?(g=e.decoder(m,o.decoder,p,"key"),y=e.strictNullHandling?null:""):(g=e.decoder(m.slice(0,b),o.decoder,p,"key"),y=r.maybeMap(h(m.slice(b+1),e),(function(t){return e.decoder(t,o.decoder,p,"value")}))),y&&e.interpretNumericEntities&&"iso-8859-1"===p&&(y=a(y)),m.indexOf("[]=")>-1&&(y=s(y)?[y]:y),n.call(c,g)?c[g]=r.combine(c[g],y):c[g]=y}return c}(t,i):t,u=i.plainObjects?Object.create(null):{},d=Object.keys(l),f=0;f<d.length;++f){var p=d[f],g=c(p,l[p],i,"string"==typeof t);u=r.merge(u,g,i)}return!0===i.allowSparse?u:r.compact(u)}},4246:(t,e,i)=>{"use strict";var r=i(3680),n=i(4562),s=i(5335),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},h=Array.isArray,c=Array.prototype.push,l=function(t,e){c.apply(t,h(e)?e:[e])},u=Date.prototype.toISOString,d=s.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(t){return u.call(t)},skipNulls:!1,strictNullHandling:!1},p=function t(e,i,s,o,a,c,u,d,p,g,y,m,v,b,w){var _,x=e;if(w.has(e))throw new RangeError("Cyclic object value");if("function"==typeof u?x=u(i,x):x instanceof Date?x=g(x):"comma"===s&&h(x)&&(x=n.maybeMap(x,(function(t){return t instanceof Date?g(t):t}))),null===x){if(o)return c&&!v?c(i,f.encoder,b,"key",y):i;x=""}if("string"==typeof(_=x)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||n.isBuffer(x))return c?[m(v?i:c(i,f.encoder,b,"key",y))+"="+m(c(x,f.encoder,b,"value",y))]:[m(i)+"="+m(String(x))];var E,S=[];if(void 0===x)return S;if("comma"===s&&h(x))E=[{value:x.length>0?x.join(",")||null:void 0}];else if(h(u))E=u;else{var T=Object.keys(x);E=d?T.sort(d):T}for(var A=0;A<E.length;++A){var C=E[A],k="object"==typeof C&&void 0!==C.value?C.value:x[C];if(!a||null!==k){var R=h(x)?"function"==typeof s?s(i,C):i:i+(p?"."+C:"["+C+"]");w.set(e,!0);var P=r();l(S,t(k,R,s,o,a,c,u,d,p,g,y,m,v,b,P))}}return S};t.exports=function(t,e){var i,n=t,c=function(t){if(!t)return f;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=s.default;if(void 0!==t.format){if(!o.call(s.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var r=s.formatters[i],n=f.filter;return("function"==typeof t.filter||h(t.filter))&&(n=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===t.allowDots?f.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,delimiter:void 0===t.delimiter?f.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:f.encode,encoder:"function"==typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:n,format:i,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}}(e);"function"==typeof c.filter?n=(0,c.filter)("",n):h(c.filter)&&(i=c.filter);var u,d=[];if("object"!=typeof n||null===n)return"";u=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var g=a[u];i||(i=Object.keys(n)),c.sort&&i.sort(c.sort);for(var y=r(),m=0;m<i.length;++m){var v=i[m];c.skipNulls&&null===n[v]||l(d,p(n[v],v,g,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,y))}var b=d.join(c.delimiter),w=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}},4562:(t,e,i)=>{"use strict";var r=i(5335),n=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(i[r]=t[r]);return i};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,i){return t[i]=e[i],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],r=0;r<e.length;++r)for(var n=e[r],o=n.obj[n.prop],a=Object.keys(o),h=0;h<a.length;++h){var c=a[h],l=o[c];"object"==typeof l&&null!==l&&-1===i.indexOf(l)&&(e.push({obj:o,prop:c}),i.push(l))}return function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(s(i)){for(var r=[],n=0;n<i.length;++n)void 0!==i[n]&&r.push(i[n]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,i){var r=t.replace(/\+/g," ");if("iso-8859-1"===i)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,i,n,s){if(0===t.length)return t;var a=t;if("symbol"==typeof t?a=Symbol.prototype.toString.call(t):"string"!=typeof t&&(a=String(t)),"iso-8859-1"===i)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var h="",c=0;c<a.length;++c){var l=a.charCodeAt(c);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===r.RFC1738&&(40===l||41===l)?h+=a.charAt(c):l<128?h+=o[l]:l<2048?h+=o[192|l>>6]+o[128|63&l]:l<55296||l>=57344?h+=o[224|l>>12]+o[128|l>>6&63]+o[128|63&l]:(c+=1,l=65536+((1023&l)<<10|1023&a.charCodeAt(c)),h+=o[240|l>>18]+o[128|l>>12&63]+o[128|l>>6&63]+o[128|63&l])}return h},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(s(t)){for(var i=[],r=0;r<t.length;r+=1)i.push(e(t[r]));return i}return e(t)},merge:function t(e,i,r){if(!i)return e;if("object"!=typeof i){if(s(e))e.push(i);else{if(!e||"object"!=typeof e)return[e,i];(r&&(r.plainObjects||r.allowPrototypes)||!n.call(Object.prototype,i))&&(e[i]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(i);var o=e;return s(e)&&!s(i)&&(o=a(e,r)),s(e)&&s(i)?(i.forEach((function(i,s){if(n.call(e,s)){var o=e[s];o&&"object"==typeof o&&i&&"object"==typeof i?e[s]=t(o,i,r):e.push(i)}else e[s]=i})),e):Object.keys(i).reduce((function(e,s){var o=i[s];return n.call(e,s)?e[s]=t(e[s],o,r):e[s]=o,e}),o)}}},7765:function(t,e){!function(t){"use strict";var e=function(t){var e,i=new Float64Array(16);if(t)for(e=0;e<t.length;e++)i[e]=t[e];return i},i=function(){throw new Error("no PRNG")},r=new Uint8Array(16),n=new Uint8Array(32);n[0]=9;var s=e(),o=e([1]),a=e([56129,1]),h=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(t,e,i,r){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i,t[e+4]=r>>24&255,t[e+5]=r>>16&255,t[e+6]=r>>8&255,t[e+7]=255&r}function p(t,e,i,r,n){var s,o=0;for(s=0;s<n;s++)o|=t[e+s]^i[r+s];return(1&o-1>>>8)-1}function g(t,e,i,r){return p(t,e,i,r,16)}function y(t,e,i,r){return p(t,e,i,r,32)}function m(t,e,i,r){!function(t,e,i,r){for(var n,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,o=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,a=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,c=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,y=255&i[16]|(255&i[17])<<8|(255&i[18])<<16|(255&i[19])<<24,m=255&i[20]|(255&i[21])<<8|(255&i[22])<<16|(255&i[23])<<24,v=255&i[24]|(255&i[25])<<8|(255&i[26])<<16|(255&i[27])<<24,b=255&i[28]|(255&i[29])<<8|(255&i[30])<<16|(255&i[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,_=s,x=o,E=a,S=h,T=c,A=l,C=u,k=d,R=f,P=p,I=g,O=y,M=m,D=v,B=b,L=w,N=0;N<20;N+=2)_^=(n=(M^=(n=(R^=(n=(T^=(n=_+M|0)<<7|n>>>25)+_|0)<<9|n>>>23)+T|0)<<13|n>>>19)+R|0)<<18|n>>>14,A^=(n=(x^=(n=(D^=(n=(P^=(n=A+x|0)<<7|n>>>25)+A|0)<<9|n>>>23)+P|0)<<13|n>>>19)+D|0)<<18|n>>>14,I^=(n=(C^=(n=(E^=(n=(B^=(n=I+C|0)<<7|n>>>25)+I|0)<<9|n>>>23)+B|0)<<13|n>>>19)+E|0)<<18|n>>>14,L^=(n=(O^=(n=(k^=(n=(S^=(n=L+O|0)<<7|n>>>25)+L|0)<<9|n>>>23)+S|0)<<13|n>>>19)+k|0)<<18|n>>>14,_^=(n=(S^=(n=(E^=(n=(x^=(n=_+S|0)<<7|n>>>25)+_|0)<<9|n>>>23)+x|0)<<13|n>>>19)+E|0)<<18|n>>>14,A^=(n=(T^=(n=(k^=(n=(C^=(n=A+T|0)<<7|n>>>25)+A|0)<<9|n>>>23)+C|0)<<13|n>>>19)+k|0)<<18|n>>>14,I^=(n=(P^=(n=(R^=(n=(O^=(n=I+P|0)<<7|n>>>25)+I|0)<<9|n>>>23)+O|0)<<13|n>>>19)+R|0)<<18|n>>>14,L^=(n=(B^=(n=(D^=(n=(M^=(n=L+B|0)<<7|n>>>25)+L|0)<<9|n>>>23)+M|0)<<13|n>>>19)+D|0)<<18|n>>>14;_=_+s|0,x=x+o|0,E=E+a|0,S=S+h|0,T=T+c|0,A=A+l|0,C=C+u|0,k=k+d|0,R=R+f|0,P=P+p|0,I=I+g|0,O=O+y|0,M=M+m|0,D=D+v|0,B=B+b|0,L=L+w|0,t[0]=_>>>0&255,t[1]=_>>>8&255,t[2]=_>>>16&255,t[3]=_>>>24&255,t[4]=x>>>0&255,t[5]=x>>>8&255,t[6]=x>>>16&255,t[7]=x>>>24&255,t[8]=E>>>0&255,t[9]=E>>>8&255,t[10]=E>>>16&255,t[11]=E>>>24&255,t[12]=S>>>0&255,t[13]=S>>>8&255,t[14]=S>>>16&255,t[15]=S>>>24&255,t[16]=T>>>0&255,t[17]=T>>>8&255,t[18]=T>>>16&255,t[19]=T>>>24&255,t[20]=A>>>0&255,t[21]=A>>>8&255,t[22]=A>>>16&255,t[23]=A>>>24&255,t[24]=C>>>0&255,t[25]=C>>>8&255,t[26]=C>>>16&255,t[27]=C>>>24&255,t[28]=k>>>0&255,t[29]=k>>>8&255,t[30]=k>>>16&255,t[31]=k>>>24&255,t[32]=R>>>0&255,t[33]=R>>>8&255,t[34]=R>>>16&255,t[35]=R>>>24&255,t[36]=P>>>0&255,t[37]=P>>>8&255,t[38]=P>>>16&255,t[39]=P>>>24&255,t[40]=I>>>0&255,t[41]=I>>>8&255,t[42]=I>>>16&255,t[43]=I>>>24&255,t[44]=O>>>0&255,t[45]=O>>>8&255,t[46]=O>>>16&255,t[47]=O>>>24&255,t[48]=M>>>0&255,t[49]=M>>>8&255,t[50]=M>>>16&255,t[51]=M>>>24&255,t[52]=D>>>0&255,t[53]=D>>>8&255,t[54]=D>>>16&255,t[55]=D>>>24&255,t[56]=B>>>0&255,t[57]=B>>>8&255,t[58]=B>>>16&255,t[59]=B>>>24&255,t[60]=L>>>0&255,t[61]=L>>>8&255,t[62]=L>>>16&255,t[63]=L>>>24&255}(t,e,i,r)}function v(t,e,i,r){!function(t,e,i,r){for(var n,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,o=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,a=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,c=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,y=255&i[16]|(255&i[17])<<8|(255&i[18])<<16|(255&i[19])<<24,m=255&i[20]|(255&i[21])<<8|(255&i[22])<<16|(255&i[23])<<24,v=255&i[24]|(255&i[25])<<8|(255&i[26])<<16|(255&i[27])<<24,b=255&i[28]|(255&i[29])<<8|(255&i[30])<<16|(255&i[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,_=0;_<20;_+=2)s^=(n=(m^=(n=(f^=(n=(c^=(n=s+m|0)<<7|n>>>25)+s|0)<<9|n>>>23)+c|0)<<13|n>>>19)+f|0)<<18|n>>>14,l^=(n=(o^=(n=(v^=(n=(p^=(n=l+o|0)<<7|n>>>25)+l|0)<<9|n>>>23)+p|0)<<13|n>>>19)+v|0)<<18|n>>>14,g^=(n=(u^=(n=(a^=(n=(b^=(n=g+u|0)<<7|n>>>25)+g|0)<<9|n>>>23)+b|0)<<13|n>>>19)+a|0)<<18|n>>>14,w^=(n=(y^=(n=(d^=(n=(h^=(n=w+y|0)<<7|n>>>25)+w|0)<<9|n>>>23)+h|0)<<13|n>>>19)+d|0)<<18|n>>>14,s^=(n=(h^=(n=(a^=(n=(o^=(n=s+h|0)<<7|n>>>25)+s|0)<<9|n>>>23)+o|0)<<13|n>>>19)+a|0)<<18|n>>>14,l^=(n=(c^=(n=(d^=(n=(u^=(n=l+c|0)<<7|n>>>25)+l|0)<<9|n>>>23)+u|0)<<13|n>>>19)+d|0)<<18|n>>>14,g^=(n=(p^=(n=(f^=(n=(y^=(n=g+p|0)<<7|n>>>25)+g|0)<<9|n>>>23)+y|0)<<13|n>>>19)+f|0)<<18|n>>>14,w^=(n=(b^=(n=(v^=(n=(m^=(n=w+b|0)<<7|n>>>25)+w|0)<<9|n>>>23)+m|0)<<13|n>>>19)+v|0)<<18|n>>>14;t[0]=s>>>0&255,t[1]=s>>>8&255,t[2]=s>>>16&255,t[3]=s>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=g>>>0&255,t[9]=g>>>8&255,t[10]=g>>>16&255,t[11]=g>>>24&255,t[12]=w>>>0&255,t[13]=w>>>8&255,t[14]=w>>>16&255,t[15]=w>>>24&255,t[16]=u>>>0&255,t[17]=u>>>8&255,t[18]=u>>>16&255,t[19]=u>>>24&255,t[20]=d>>>0&255,t[21]=d>>>8&255,t[22]=d>>>16&255,t[23]=d>>>24&255,t[24]=f>>>0&255,t[25]=f>>>8&255,t[26]=f>>>16&255,t[27]=f>>>24&255,t[28]=p>>>0&255,t[29]=p>>>8&255,t[30]=p>>>16&255,t[31]=p>>>24&255}(t,e,i,r)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(t,e,i,r,n,s,o){var a,h,c=new Uint8Array(16),l=new Uint8Array(64);for(h=0;h<16;h++)c[h]=0;for(h=0;h<8;h++)c[h]=s[h];for(;n>=64;){for(m(l,c,o,b),h=0;h<64;h++)t[e+h]=i[r+h]^l[h];for(a=1,h=8;h<16;h++)a=a+(255&c[h])|0,c[h]=255&a,a>>>=8;n-=64,e+=64,r+=64}if(n>0)for(m(l,c,o,b),h=0;h<n;h++)t[e+h]=i[r+h]^l[h];return 0}function _(t,e,i,r,n){var s,o,a=new Uint8Array(16),h=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=r[o];for(;i>=64;){for(m(h,a,n,b),o=0;o<64;o++)t[e+o]=h[o];for(s=1,o=8;o<16;o++)s=s+(255&a[o])|0,a[o]=255&s,s>>>=8;i-=64,e+=64}if(i>0)for(m(h,a,n,b),o=0;o<i;o++)t[e+o]=h[o];return 0}function x(t,e,i,r,n){var s=new Uint8Array(32);v(s,r,n,b);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=r[a+16];return _(t,e,i,o,s)}function E(t,e,i,r,n,s,o){var a=new Uint8Array(32);v(a,s,o,b);for(var h=new Uint8Array(8),c=0;c<8;c++)h[c]=s[c+16];return w(t,e,i,r,n,h,a)}var S=function(t){var e,i,r,n,s,o,a,h;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,i=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|i<<3),r=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(i>>>10|r<<6),n=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(r>>>7|n<<9),s=255&t[8]|(255&t[9])<<8,this.r[4]=255&(n>>>4|s<<12),this.r[5]=s>>>1&8190,o=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(s>>>14|o<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(o>>>11|a<<5),h=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|h<<8),this.r[9]=h>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function T(t,e,i,r,n,s){var o=new S(s);return o.update(i,r,n),o.finish(t,e),0}function A(t,e,i,r,n,s){var o=new Uint8Array(16);return T(o,0,i,r,n,s),g(t,e,o,0)}function C(t,e,i,r,n){var s;if(i<32)return-1;for(E(t,0,e,0,i,r,n),T(t,16,t,32,i-32,t),s=0;s<16;s++)t[s]=0;return 0}function k(t,e,i,r,n){var s,o=new Uint8Array(32);if(i<32)return-1;if(x(o,0,32,r,n),0!==A(e,16,e,32,i-32,o))return-1;for(E(t,0,e,0,i,r,n),s=0;s<32;s++)t[s]=0;return 0}function R(t,e){var i;for(i=0;i<16;i++)t[i]=0|e[i]}function P(t){var e,i,r=1;for(e=0;e<16;e++)i=t[e]+r+65535,r=Math.floor(i/65536),t[e]=i-65536*r;t[0]+=r-1+37*(r-1)}function I(t,e,i){for(var r,n=~(i-1),s=0;s<16;s++)r=n&(t[s]^e[s]),t[s]^=r,e[s]^=r}function O(t,i){var r,n,s,o=e(),a=e();for(r=0;r<16;r++)a[r]=i[r];for(P(a),P(a),P(a),n=0;n<2;n++){for(o[0]=a[0]-65517,r=1;r<15;r++)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,I(a,o,1-s)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function M(t,e){var i=new Uint8Array(32),r=new Uint8Array(32);return O(i,t),O(r,e),y(i,0,r,0)}function D(t){var e=new Uint8Array(32);return O(e,t),1&e[0]}function B(t,e){var i;for(i=0;i<16;i++)t[i]=e[2*i]+(e[2*i+1]<<8);t[15]&=32767}function L(t,e,i){for(var r=0;r<16;r++)t[r]=e[r]+i[r]}function N(t,e,i){for(var r=0;r<16;r++)t[r]=e[r]-i[r]}function U(t,e,i){var r,n,s=0,o=0,a=0,h=0,c=0,l=0,u=0,d=0,f=0,p=0,g=0,y=0,m=0,v=0,b=0,w=0,_=0,x=0,E=0,S=0,T=0,A=0,C=0,k=0,R=0,P=0,I=0,O=0,M=0,D=0,B=0,L=i[0],N=i[1],U=i[2],F=i[3],z=i[4],j=i[5],V=i[6],G=i[7],H=i[8],Y=i[9],K=i[10],W=i[11],X=i[12],q=i[13],$=i[14],J=i[15];s+=(r=e[0])*L,o+=r*N,a+=r*U,h+=r*F,c+=r*z,l+=r*j,u+=r*V,d+=r*G,f+=r*H,p+=r*Y,g+=r*K,y+=r*W,m+=r*X,v+=r*q,b+=r*$,w+=r*J,o+=(r=e[1])*L,a+=r*N,h+=r*U,c+=r*F,l+=r*z,u+=r*j,d+=r*V,f+=r*G,p+=r*H,g+=r*Y,y+=r*K,m+=r*W,v+=r*X,b+=r*q,w+=r*$,_+=r*J,a+=(r=e[2])*L,h+=r*N,c+=r*U,l+=r*F,u+=r*z,d+=r*j,f+=r*V,p+=r*G,g+=r*H,y+=r*Y,m+=r*K,v+=r*W,b+=r*X,w+=r*q,_+=r*$,x+=r*J,h+=(r=e[3])*L,c+=r*N,l+=r*U,u+=r*F,d+=r*z,f+=r*j,p+=r*V,g+=r*G,y+=r*H,m+=r*Y,v+=r*K,b+=r*W,w+=r*X,_+=r*q,x+=r*$,E+=r*J,c+=(r=e[4])*L,l+=r*N,u+=r*U,d+=r*F,f+=r*z,p+=r*j,g+=r*V,y+=r*G,m+=r*H,v+=r*Y,b+=r*K,w+=r*W,_+=r*X,x+=r*q,E+=r*$,S+=r*J,l+=(r=e[5])*L,u+=r*N,d+=r*U,f+=r*F,p+=r*z,g+=r*j,y+=r*V,m+=r*G,v+=r*H,b+=r*Y,w+=r*K,_+=r*W,x+=r*X,E+=r*q,S+=r*$,T+=r*J,u+=(r=e[6])*L,d+=r*N,f+=r*U,p+=r*F,g+=r*z,y+=r*j,m+=r*V,v+=r*G,b+=r*H,w+=r*Y,_+=r*K,x+=r*W,E+=r*X,S+=r*q,T+=r*$,A+=r*J,d+=(r=e[7])*L,f+=r*N,p+=r*U,g+=r*F,y+=r*z,m+=r*j,v+=r*V,b+=r*G,w+=r*H,_+=r*Y,x+=r*K,E+=r*W,S+=r*X,T+=r*q,A+=r*$,C+=r*J,f+=(r=e[8])*L,p+=r*N,g+=r*U,y+=r*F,m+=r*z,v+=r*j,b+=r*V,w+=r*G,_+=r*H,x+=r*Y,E+=r*K,S+=r*W,T+=r*X,A+=r*q,C+=r*$,k+=r*J,p+=(r=e[9])*L,g+=r*N,y+=r*U,m+=r*F,v+=r*z,b+=r*j,w+=r*V,_+=r*G,x+=r*H,E+=r*Y,S+=r*K,T+=r*W,A+=r*X,C+=r*q,k+=r*$,R+=r*J,g+=(r=e[10])*L,y+=r*N,m+=r*U,v+=r*F,b+=r*z,w+=r*j,_+=r*V,x+=r*G,E+=r*H,S+=r*Y,T+=r*K,A+=r*W,C+=r*X,k+=r*q,R+=r*$,P+=r*J,y+=(r=e[11])*L,m+=r*N,v+=r*U,b+=r*F,w+=r*z,_+=r*j,x+=r*V,E+=r*G,S+=r*H,T+=r*Y,A+=r*K,C+=r*W,k+=r*X,R+=r*q,P+=r*$,I+=r*J,m+=(r=e[12])*L,v+=r*N,b+=r*U,w+=r*F,_+=r*z,x+=r*j,E+=r*V,S+=r*G,T+=r*H,A+=r*Y,C+=r*K,k+=r*W,R+=r*X,P+=r*q,I+=r*$,O+=r*J,v+=(r=e[13])*L,b+=r*N,w+=r*U,_+=r*F,x+=r*z,E+=r*j,S+=r*V,T+=r*G,A+=r*H,C+=r*Y,k+=r*K,R+=r*W,P+=r*X,I+=r*q,O+=r*$,M+=r*J,b+=(r=e[14])*L,w+=r*N,_+=r*U,x+=r*F,E+=r*z,S+=r*j,T+=r*V,A+=r*G,C+=r*H,k+=r*Y,R+=r*K,P+=r*W,I+=r*X,O+=r*q,M+=r*$,D+=r*J,w+=(r=e[15])*L,o+=38*(x+=r*U),a+=38*(E+=r*F),h+=38*(S+=r*z),c+=38*(T+=r*j),l+=38*(A+=r*V),u+=38*(C+=r*G),d+=38*(k+=r*H),f+=38*(R+=r*Y),p+=38*(P+=r*K),g+=38*(I+=r*W),y+=38*(O+=r*X),m+=38*(M+=r*q),v+=38*(D+=r*$),b+=38*(B+=r*J),s=(r=(s+=38*(_+=r*N))+(n=1)+65535)-65536*(n=Math.floor(r/65536)),o=(r=o+n+65535)-65536*(n=Math.floor(r/65536)),a=(r=a+n+65535)-65536*(n=Math.floor(r/65536)),h=(r=h+n+65535)-65536*(n=Math.floor(r/65536)),c=(r=c+n+65535)-65536*(n=Math.floor(r/65536)),l=(r=l+n+65535)-65536*(n=Math.floor(r/65536)),u=(r=u+n+65535)-65536*(n=Math.floor(r/65536)),d=(r=d+n+65535)-65536*(n=Math.floor(r/65536)),f=(r=f+n+65535)-65536*(n=Math.floor(r/65536)),p=(r=p+n+65535)-65536*(n=Math.floor(r/65536)),g=(r=g+n+65535)-65536*(n=Math.floor(r/65536)),y=(r=y+n+65535)-65536*(n=Math.floor(r/65536)),m=(r=m+n+65535)-65536*(n=Math.floor(r/65536)),v=(r=v+n+65535)-65536*(n=Math.floor(r/65536)),b=(r=b+n+65535)-65536*(n=Math.floor(r/65536)),w=(r=w+n+65535)-65536*(n=Math.floor(r/65536)),s=(r=(s+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(r/65536)),o=(r=o+n+65535)-65536*(n=Math.floor(r/65536)),a=(r=a+n+65535)-65536*(n=Math.floor(r/65536)),h=(r=h+n+65535)-65536*(n=Math.floor(r/65536)),c=(r=c+n+65535)-65536*(n=Math.floor(r/65536)),l=(r=l+n+65535)-65536*(n=Math.floor(r/65536)),u=(r=u+n+65535)-65536*(n=Math.floor(r/65536)),d=(r=d+n+65535)-65536*(n=Math.floor(r/65536)),f=(r=f+n+65535)-65536*(n=Math.floor(r/65536)),p=(r=p+n+65535)-65536*(n=Math.floor(r/65536)),g=(r=g+n+65535)-65536*(n=Math.floor(r/65536)),y=(r=y+n+65535)-65536*(n=Math.floor(r/65536)),m=(r=m+n+65535)-65536*(n=Math.floor(r/65536)),v=(r=v+n+65535)-65536*(n=Math.floor(r/65536)),b=(r=b+n+65535)-65536*(n=Math.floor(r/65536)),w=(r=w+n+65535)-65536*(n=Math.floor(r/65536)),s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=h,t[4]=c,t[5]=l,t[6]=u,t[7]=d,t[8]=f,t[9]=p,t[10]=g,t[11]=y,t[12]=m,t[13]=v,t[14]=b,t[15]=w}function F(t,e){U(t,e,e)}function z(t,i){var r,n=e();for(r=0;r<16;r++)n[r]=i[r];for(r=253;r>=0;r--)F(n,n),2!==r&&4!==r&&U(n,n,i);for(r=0;r<16;r++)t[r]=n[r]}function j(t,i){var r,n=e();for(r=0;r<16;r++)n[r]=i[r];for(r=250;r>=0;r--)F(n,n),1!==r&&U(n,n,i);for(r=0;r<16;r++)t[r]=n[r]}function V(t,i,r){var n,s,o=new Uint8Array(32),h=new Float64Array(80),c=e(),l=e(),u=e(),d=e(),f=e(),p=e();for(s=0;s<31;s++)o[s]=i[s];for(o[31]=127&i[31]|64,o[0]&=248,B(h,r),s=0;s<16;s++)l[s]=h[s],d[s]=c[s]=u[s]=0;for(c[0]=d[0]=1,s=254;s>=0;--s)I(c,l,n=o[s>>>3]>>>(7&s)&1),I(u,d,n),L(f,c,u),N(c,c,u),L(u,l,d),N(l,l,d),F(d,f),F(p,c),U(c,u,c),U(u,l,f),L(f,c,u),N(c,c,u),F(l,c),N(u,d,p),U(c,u,a),L(c,c,d),U(u,u,c),U(c,d,p),U(d,l,h),F(l,f),I(c,l,n),I(u,d,n);for(s=0;s<16;s++)h[s+16]=c[s],h[s+32]=u[s],h[s+48]=l[s],h[s+64]=d[s];var g=h.subarray(32),y=h.subarray(16);return z(g,g),U(y,y,g),O(t,y),0}function G(t,e){return V(t,e,n)}function H(t,e){return i(e,32),G(t,e)}function Y(t,e,i){var n=new Uint8Array(32);return V(n,i,e),v(t,r,n,b)}S.prototype.blocks=function(t,e,i){for(var r,n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b,w,_,x=this.fin?0:2048,E=this.h[0],S=this.h[1],T=this.h[2],A=this.h[3],C=this.h[4],k=this.h[5],R=this.h[6],P=this.h[7],I=this.h[8],O=this.h[9],M=this.r[0],D=this.r[1],B=this.r[2],L=this.r[3],N=this.r[4],U=this.r[5],F=this.r[6],z=this.r[7],j=this.r[8],V=this.r[9];i>=16;)d=u=0,d+=(E+=8191&(r=255&t[e+0]|(255&t[e+1])<<8))*M,d+=(S+=8191&(r>>>13|(n=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*V),d+=(T+=8191&(n>>>10|(s=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*j),d+=(A+=8191&(s>>>7|(o=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*z),u=(d+=(C+=8191&(o>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*F))>>>13,d&=8191,d+=(k+=a>>>1&8191)*(5*U),d+=(R+=8191&(a>>>14|(h=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*N),d+=(P+=8191&(h>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*L),d+=(I+=8191&(c>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*B),f=u+=(d+=(O+=l>>>5|x)*(5*D))>>>13,f+=E*D,f+=S*M,f+=T*(5*V),f+=A*(5*j),u=(f+=C*(5*z))>>>13,f&=8191,f+=k*(5*F),f+=R*(5*U),f+=P*(5*N),f+=I*(5*L),u+=(f+=O*(5*B))>>>13,f&=8191,p=u,p+=E*B,p+=S*D,p+=T*M,p+=A*(5*V),u=(p+=C*(5*j))>>>13,p&=8191,p+=k*(5*z),p+=R*(5*F),p+=P*(5*U),p+=I*(5*N),g=u+=(p+=O*(5*L))>>>13,g+=E*L,g+=S*B,g+=T*D,g+=A*M,u=(g+=C*(5*V))>>>13,g&=8191,g+=k*(5*j),g+=R*(5*z),g+=P*(5*F),g+=I*(5*U),y=u+=(g+=O*(5*N))>>>13,y+=E*N,y+=S*L,y+=T*B,y+=A*D,u=(y+=C*M)>>>13,y&=8191,y+=k*(5*V),y+=R*(5*j),y+=P*(5*z),y+=I*(5*F),m=u+=(y+=O*(5*U))>>>13,m+=E*U,m+=S*N,m+=T*L,m+=A*B,u=(m+=C*D)>>>13,m&=8191,m+=k*M,m+=R*(5*V),m+=P*(5*j),m+=I*(5*z),v=u+=(m+=O*(5*F))>>>13,v+=E*F,v+=S*U,v+=T*N,v+=A*L,u=(v+=C*B)>>>13,v&=8191,v+=k*D,v+=R*M,v+=P*(5*V),v+=I*(5*j),b=u+=(v+=O*(5*z))>>>13,b+=E*z,b+=S*F,b+=T*U,b+=A*N,u=(b+=C*L)>>>13,b&=8191,b+=k*B,b+=R*D,b+=P*M,b+=I*(5*V),w=u+=(b+=O*(5*j))>>>13,w+=E*j,w+=S*z,w+=T*F,w+=A*U,u=(w+=C*N)>>>13,w&=8191,w+=k*L,w+=R*B,w+=P*D,w+=I*M,_=u+=(w+=O*(5*V))>>>13,_+=E*V,_+=S*j,_+=T*z,_+=A*F,u=(_+=C*U)>>>13,_&=8191,_+=k*N,_+=R*L,_+=P*B,_+=I*D,E=d=8191&(u=(u=((u+=(_+=O*M)>>>13)<<2)+u|0)+(d&=8191)|0),S=f+=u>>>=13,T=p&=8191,A=g&=8191,C=y&=8191,k=m&=8191,R=v&=8191,P=b&=8191,I=w&=8191,O=_&=8191,e+=16,i-=16;this.h[0]=E,this.h[1]=S,this.h[2]=T,this.h[3]=A,this.h[4]=C,this.h[5]=k,this.h[6]=R,this.h[7]=P,this.h[8]=I,this.h[9]=O},S.prototype.finish=function(t,e){var i,r,n,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(i=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=i,i=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*i,i=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=i,i=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=i,o[0]=this.h[0]+5,i=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+i,i=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,r=(1^i)-1,s=0;s<10;s++)o[s]&=r;for(r=~r,s=0;s<10;s++)this.h[s]=this.h[s]&r|o[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),n=this.h[0]+this.pad[0],this.h[0]=65535&n,s=1;s<8;s++)n=(this.h[s]+this.pad[s]|0)+(n>>>16)|0,this.h[s]=65535&n;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},S.prototype.update=function(t,e,i){var r,n;if(this.leftover){for((n=16-this.leftover)>i&&(n=i),r=0;r<n;r++)this.buffer[this.leftover+r]=t[e+r];if(i-=n,e+=n,this.leftover+=n,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(i>=16&&(n=i-i%16,this.blocks(t,e,n),e+=n,i-=n),i){for(r=0;r<i;r++)this.buffer[this.leftover+r]=t[e+r];this.leftover+=i}};var K=C,W=k,X=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function q(t,e,i,r){for(var n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b,w,_,x,E,S,T,A,C,k,R,P=new Int32Array(16),I=new Int32Array(16),O=t[0],M=t[1],D=t[2],B=t[3],L=t[4],N=t[5],U=t[6],F=t[7],z=e[0],j=e[1],V=e[2],G=e[3],H=e[4],Y=e[5],K=e[6],W=e[7],q=0;r>=128;){for(x=0;x<16;x++)E=8*x+q,P[x]=i[E+0]<<24|i[E+1]<<16|i[E+2]<<8|i[E+3],I[x]=i[E+4]<<24|i[E+5]<<16|i[E+6]<<8|i[E+7];for(x=0;x<80;x++)if(n=O,s=M,o=D,a=B,h=L,c=N,l=U,d=z,f=j,p=V,g=G,y=H,m=Y,v=K,A=65535&(T=W),C=T>>>16,k=65535&(S=F),R=S>>>16,A+=65535&(T=(H>>>14|L<<18)^(H>>>18|L<<14)^(L>>>9|H<<23)),C+=T>>>16,k+=65535&(S=(L>>>14|H<<18)^(L>>>18|H<<14)^(H>>>9|L<<23)),R+=S>>>16,A+=65535&(T=H&Y^~H&K),C+=T>>>16,k+=65535&(S=L&N^~L&U),R+=S>>>16,A+=65535&(T=X[2*x+1]),C+=T>>>16,k+=65535&(S=X[2*x]),R+=S>>>16,S=P[x%16],C+=(T=I[x%16])>>>16,k+=65535&S,R+=S>>>16,k+=(C+=(A+=65535&T)>>>16)>>>16,A=65535&(T=_=65535&A|C<<16),C=T>>>16,k=65535&(S=w=65535&k|(R+=k>>>16)<<16),R=S>>>16,A+=65535&(T=(z>>>28|O<<4)^(O>>>2|z<<30)^(O>>>7|z<<25)),C+=T>>>16,k+=65535&(S=(O>>>28|z<<4)^(z>>>2|O<<30)^(z>>>7|O<<25)),R+=S>>>16,C+=(T=z&j^z&V^j&V)>>>16,k+=65535&(S=O&M^O&D^M&D),R+=S>>>16,u=65535&(k+=(C+=(A+=65535&T)>>>16)>>>16)|(R+=k>>>16)<<16,b=65535&A|C<<16,A=65535&(T=g),C=T>>>16,k=65535&(S=a),R=S>>>16,C+=(T=_)>>>16,k+=65535&(S=w),R+=S>>>16,M=n,D=s,B=o,L=a=65535&(k+=(C+=(A+=65535&T)>>>16)>>>16)|(R+=k>>>16)<<16,N=h,U=c,F=l,O=u,j=d,V=f,G=p,H=g=65535&A|C<<16,Y=y,K=m,W=v,z=b,x%16==15)for(E=0;E<16;E++)S=P[E],A=65535&(T=I[E]),C=T>>>16,k=65535&S,R=S>>>16,S=P[(E+9)%16],A+=65535&(T=I[(E+9)%16]),C+=T>>>16,k+=65535&S,R+=S>>>16,w=P[(E+1)%16],A+=65535&(T=((_=I[(E+1)%16])>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25)),C+=T>>>16,k+=65535&(S=(w>>>1|_<<31)^(w>>>8|_<<24)^w>>>7),R+=S>>>16,w=P[(E+14)%16],C+=(T=((_=I[(E+14)%16])>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26))>>>16,k+=65535&(S=(w>>>19|_<<13)^(_>>>29|w<<3)^w>>>6),R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,P[E]=65535&k|R<<16,I[E]=65535&A|C<<16;A=65535&(T=z),C=T>>>16,k=65535&(S=O),R=S>>>16,S=t[0],C+=(T=e[0])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[0]=O=65535&k|R<<16,e[0]=z=65535&A|C<<16,A=65535&(T=j),C=T>>>16,k=65535&(S=M),R=S>>>16,S=t[1],C+=(T=e[1])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[1]=M=65535&k|R<<16,e[1]=j=65535&A|C<<16,A=65535&(T=V),C=T>>>16,k=65535&(S=D),R=S>>>16,S=t[2],C+=(T=e[2])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[2]=D=65535&k|R<<16,e[2]=V=65535&A|C<<16,A=65535&(T=G),C=T>>>16,k=65535&(S=B),R=S>>>16,S=t[3],C+=(T=e[3])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[3]=B=65535&k|R<<16,e[3]=G=65535&A|C<<16,A=65535&(T=H),C=T>>>16,k=65535&(S=L),R=S>>>16,S=t[4],C+=(T=e[4])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[4]=L=65535&k|R<<16,e[4]=H=65535&A|C<<16,A=65535&(T=Y),C=T>>>16,k=65535&(S=N),R=S>>>16,S=t[5],C+=(T=e[5])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[5]=N=65535&k|R<<16,e[5]=Y=65535&A|C<<16,A=65535&(T=K),C=T>>>16,k=65535&(S=U),R=S>>>16,S=t[6],C+=(T=e[6])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[6]=U=65535&k|R<<16,e[6]=K=65535&A|C<<16,A=65535&(T=W),C=T>>>16,k=65535&(S=F),R=S>>>16,S=t[7],C+=(T=e[7])>>>16,k+=65535&S,R+=S>>>16,R+=(k+=(C+=(A+=65535&T)>>>16)>>>16)>>>16,t[7]=F=65535&k|R<<16,e[7]=W=65535&A|C<<16,q+=128,r-=128}return r}function $(t,e,i){var r,n=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),a=i;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,q(n,s,e,i),i%=128,r=0;r<i;r++)o[r]=e[a-i+r];for(o[i]=128,o[(i=256-128*(i<112?1:0))-9]=0,f(o,i-8,a/536870912|0,a<<3),q(n,s,o,i),r=0;r<8;r++)f(t,8*r,n[r],s[r]);return 0}function J(t,i){var r=e(),n=e(),s=e(),o=e(),a=e(),h=e(),l=e(),u=e(),d=e();N(r,t[1],t[0]),N(d,i[1],i[0]),U(r,r,d),L(n,t[0],t[1]),L(d,i[0],i[1]),U(n,n,d),U(s,t[3],i[3]),U(s,s,c),U(o,t[2],i[2]),L(o,o,o),N(a,n,r),N(h,o,s),L(l,o,s),L(u,n,r),U(t[0],a,h),U(t[1],u,l),U(t[2],l,h),U(t[3],a,u)}function Z(t,e,i){var r;for(r=0;r<4;r++)I(t[r],e[r],i)}function Q(t,i){var r=e(),n=e(),s=e();z(s,i[2]),U(r,i[0],s),U(n,i[1],s),O(t,n),t[31]^=D(r)<<7}function tt(t,e,i){var r,n;for(R(t[0],s),R(t[1],o),R(t[2],o),R(t[3],s),n=255;n>=0;--n)Z(t,e,r=i[n/8|0]>>(7&n)&1),J(e,t),J(t,t),Z(t,e,r)}function et(t,i){var r=[e(),e(),e(),e()];R(r[0],l),R(r[1],u),R(r[2],o),U(r[3],l,u),tt(t,r,i)}function it(t,r,n){var s,o=new Uint8Array(64),a=[e(),e(),e(),e()];for(n||i(r,32),$(o,r,32),o[0]&=248,o[31]&=127,o[31]|=64,et(a,o),Q(t,a),s=0;s<32;s++)r[s+32]=t[s];return 0}var rt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function nt(t,e){var i,r,n,s;for(r=63;r>=32;--r){for(i=0,n=r-32,s=r-12;n<s;++n)e[n]+=i-16*e[r]*rt[n-(r-32)],i=Math.floor((e[n]+128)/256),e[n]-=256*i;e[n]+=i,e[r]=0}for(i=0,n=0;n<32;n++)e[n]+=i-(e[31]>>4)*rt[n],i=e[n]>>8,e[n]&=255;for(n=0;n<32;n++)e[n]-=i*rt[n];for(r=0;r<32;r++)e[r+1]+=e[r]>>8,t[r]=255&e[r]}function st(t){var e,i=new Float64Array(64);for(e=0;e<64;e++)i[e]=t[e];for(e=0;e<64;e++)t[e]=0;nt(t,i)}function ot(t,i,r,n){var s,o,a=new Uint8Array(64),h=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),u=[e(),e(),e(),e()];$(a,n,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=r+64;for(s=0;s<r;s++)t[64+s]=i[s];for(s=0;s<32;s++)t[32+s]=a[32+s];for($(c,t.subarray(32),r+32),st(c),et(u,c),Q(t,u),s=32;s<64;s++)t[s]=n[s];for($(h,t,r+64),st(h),s=0;s<64;s++)l[s]=0;for(s=0;s<32;s++)l[s]=c[s];for(s=0;s<32;s++)for(o=0;o<32;o++)l[s+o]+=h[s]*a[o];return nt(t.subarray(32),l),d}function at(t,i,r,n){var a,c=new Uint8Array(32),l=new Uint8Array(64),u=[e(),e(),e(),e()],f=[e(),e(),e(),e()];if(r<64)return-1;if(function(t,i){var r=e(),n=e(),a=e(),c=e(),l=e(),u=e(),f=e();return R(t[2],o),B(t[1],i),F(a,t[1]),U(c,a,h),N(a,a,t[2]),L(c,t[2],c),F(l,c),F(u,l),U(f,u,l),U(r,f,a),U(r,r,c),j(r,r),U(r,r,a),U(r,r,c),U(r,r,c),U(t[0],r,c),F(n,t[0]),U(n,n,c),M(n,a)&&U(t[0],t[0],d),F(n,t[0]),U(n,n,c),M(n,a)?-1:(D(t[0])===i[31]>>7&&N(t[0],s,t[0]),U(t[3],t[0],t[1]),0)}(f,n))return-1;for(a=0;a<r;a++)t[a]=i[a];for(a=0;a<32;a++)t[a+32]=n[a];if($(l,t,r),st(l),tt(u,f,l),et(f,i.subarray(32)),J(u,f),Q(c,u),r-=64,y(i,0,c,0)){for(a=0;a<r;a++)t[a]=0;return-1}for(a=0;a<r;a++)t[a]=i[a+64];return r}var ht=64,ct=32,lt=64;function ut(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function dt(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ft(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:E,crypto_stream:x,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:_,crypto_onetimeauth:T,crypto_onetimeauth_verify:A,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:C,crypto_secretbox_open:k,crypto_scalarmult:V,crypto_scalarmult_base:G,crypto_box_beforenm:Y,crypto_box_afternm:K,crypto_box:function(t,e,i,r,n,s){var o=new Uint8Array(32);return Y(o,n,s),K(t,e,i,r,o)},crypto_box_open:function(t,e,i,r,n,s){var o=new Uint8Array(32);return Y(o,n,s),W(t,e,i,r,o)},crypto_box_keypair:H,crypto_hash:$,crypto_sign:ot,crypto_sign_keypair:it,crypto_sign_open:at,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ht,crypto_sign_PUBLICKEYBYTES:ct,crypto_sign_SECRETKEYBYTES:lt,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:e,D:h,L:rt,pack25519:O,unpack25519:B,M:U,A:L,S:F,Z:N,pow2523:j,add:J,set25519:R,modL:nt,scalarmult:tt,scalarbase:et},t.randomBytes=function(t){var e=new Uint8Array(t);return i(e,t),e},t.secretbox=function(t,e,i){dt(t,e,i),ut(i,e);for(var r=new Uint8Array(32+t.length),n=new Uint8Array(r.length),s=0;s<t.length;s++)r[s+32]=t[s];return C(n,r,r.length,e,i),n.subarray(16)},t.secretbox.open=function(t,e,i){dt(t,e,i),ut(i,e);for(var r=new Uint8Array(16+t.length),n=new Uint8Array(r.length),s=0;s<t.length;s++)r[s+16]=t[s];return r.length<32||0!==k(n,r,r.length,e,i)?null:n.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(dt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var i=new Uint8Array(32);return V(i,t,e),i},t.scalarMult.base=function(t){if(dt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return G(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,i,r,n){var s=t.box.before(r,n);return t.secretbox(e,i,s)},t.box.before=function(t,e){dt(t,e),function(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")}(t,e);var i=new Uint8Array(32);return Y(i,t,e),i},t.box.after=t.secretbox,t.box.open=function(e,i,r,n){var s=t.box.before(r,n);return t.secretbox.open(e,i,s)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return H(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(dt(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return G(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(dt(t,e),e.length!==lt)throw new Error("bad secret key size");var i=new Uint8Array(ht+t.length);return ot(i,t,t.length,e),i},t.sign.open=function(t,e){if(dt(t,e),e.length!==ct)throw new Error("bad public key size");var i=new Uint8Array(t.length),r=at(i,t,t.length,e);if(r<0)return null;for(var n=new Uint8Array(r),s=0;s<n.length;s++)n[s]=i[s];return n},t.sign.detached=function(e,i){for(var r=t.sign(e,i),n=new Uint8Array(ht),s=0;s<n.length;s++)n[s]=r[s];return n},t.sign.detached.verify=function(t,e,i){if(dt(t,e,i),e.length!==ht)throw new Error("bad signature size");if(i.length!==ct)throw new Error("bad public key size");var r,n=new Uint8Array(ht+t.length),s=new Uint8Array(ht+t.length);for(r=0;r<ht;r++)n[r]=e[r];for(r=0;r<t.length;r++)n[r+ht]=t[r];return at(s,n,n.length,i)>=0},t.sign.keyPair=function(){var t=new Uint8Array(ct),e=new Uint8Array(lt);return it(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(dt(t),t.length!==lt)throw new Error("bad secret key size");for(var e=new Uint8Array(ct),i=0;i<e.length;i++)e[i]=t[32+i];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(dt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(ct),i=new Uint8Array(lt),r=0;r<32;r++)i[r]=t[r];return it(e,i,!0),{publicKey:e,secretKey:i}},t.sign.publicKeyLength=ct,t.sign.secretKeyLength=lt,t.sign.seedLength=32,t.sign.signatureLength=ht,t.hash=function(t){dt(t);var e=new Uint8Array(64);return $(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return dt(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===p(t,0,e,0,t.length)},t.setPRNG=function(t){i=t},function(){var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&e.getRandomValues?t.setPRNG((function(t,i){var r,n=new Uint8Array(i);for(r=0;r<i;r+=65536)e.getRandomValues(n.subarray(r,r+Math.min(i-r,65536)));for(r=0;r<i;r++)t[r]=n[r];ft(n)})):(e=__webpack_require__(55835))&&e.randomBytes&&t.setPRNG((function(t,i){var r,n=e.randomBytes(i);for(r=0;r<i;r++)t[r]=n[r];ft(n)}))}()}(void 0!==t&&t.exports?t.exports:self.nacl=self.nacl||{})},1042:(t,e,i)=>{"use strict";var r=i(1926),n=i(9370),s=/[\n\r\t]/g,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,h=/^[a-zA-Z]:/,c=/^[ \f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;function l(t){return(t||"").toString().replace(c,"")}var u=[["#","hash"],["?","query"],function(t,e){return p(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function f(t){var e,r=("undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{}).location||{},n={},s=typeof(t=t||r);if("blob:"===t.protocol)n=new y(unescape(t.pathname),{});else if("string"===s)for(e in n=new y(t,{}),d)delete n[e];else if("object"===s){for(e in t)e in d||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=o.test(t.href))}return n}function p(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function g(t,e){t=(t=l(t)).replace(s,""),e=e||{};var i,r=a.exec(t),n=r[1]?r[1].toLowerCase():"",o=!!r[2],h=!!r[3],c=0;return o?h?(i=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(i=r[2]+r[4],c=r[2].length):h?(i=r[3]+r[4],c=r[3].length):i=r[4],"file:"===n?c>=2&&(i=i.slice(2)):p(n)?i=r[4]:n?o&&(i=i.slice(2)):c>=2&&p(e.protocol)&&(i=r[4]),{protocol:n,slashes:o||p(n),slashesCount:c,rest:i}}function y(t,e,i){if(t=(t=l(t)).replace(s,""),!(this instanceof y))return new y(t,e,i);var o,a,c,d,m,v,b=u.slice(),w=typeof e,_=this,x=0;for("object"!==w&&"string"!==w&&(i=e,e=null),i&&"function"!=typeof i&&(i=n.parse),o=!(a=g(t||"",e=f(e))).protocol&&!a.slashes,_.slashes=a.slashes||o&&e.slashes,_.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||h.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!p(_.protocol)))&&(b[3]=[/(.*)/,"pathname"]);x<b.length;x++)"function"!=typeof(d=b[x])?(c=d[0],v=d[1],c!=c?_[v]=t:"string"==typeof c?~(m="@"===c?t.lastIndexOf(c):t.indexOf(c))&&("number"==typeof d[2]?(_[v]=t.slice(0,m),t=t.slice(m+d[2])):(_[v]=t.slice(m),t=t.slice(0,m))):(m=c.exec(t))&&(_[v]=m[1],t=t.slice(0,m.index)),_[v]=_[v]||o&&d[3]&&e[v]||"",d[4]&&(_[v]=_[v].toLowerCase())):t=d(t,_);i&&(_.query=i(_.query)),o&&e.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==e.pathname)&&(_.pathname=function(t,e){if(""===t)return e;for(var i=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=i.length,n=i[r-1],s=!1,o=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),o++):o&&(0===r&&(s=!0),i.splice(r,1),o--);return s&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}(_.pathname,e.pathname)),"/"!==_.pathname.charAt(0)&&p(_.protocol)&&(_.pathname="/"+_.pathname),r(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(m=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,m),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(m+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&p(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}y.prototype={set:function(t,e,i){var s=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(i||n.parse)(e)),s[t]=e;break;case"port":s[t]=e,r(e,s.protocol)?e&&(s.host=s.hostname+":"+e):(s.host=s.hostname,s[t]="");break;case"hostname":s[t]=e,s.port&&(e+=":"+s.port),s.host=e;break;case"host":s[t]=e,/:\d+$/.test(e)?(e=e.split(":"),s.port=e.pop(),s.hostname=e.join(":")):(s.hostname=e,s.port="");break;case"protocol":s.protocol=e.toLowerCase(),s.slashes=!i;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";s[t]=e.charAt(0)!==o?o+e:e}else s[t]=e;break;case"username":case"password":s[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(s.username=e.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=e.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(e))}for(var h=0;h<u.length;h++){var c=u[h];c[4]&&(s[c[1]]=s[c[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&p(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(t){t&&"function"==typeof t||(t=n.stringify);var e,i=this,r=i.host,s=i.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var o=s+(i.protocol&&i.slashes||p(i.protocol)?"//":"");return i.username?(o+=i.username,i.password&&(o+=":"+i.password),o+="@"):i.password?(o+=":"+i.password,o+="@"):"file:"!==i.protocol&&p(i.protocol)&&!r&&"/"!==i.pathname&&(o+="@"),":"===r[r.length-1]&&(r+=":"),o+=r+i.pathname,(e="object"==typeof i.query?t(i.query):i.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),i.hash&&(o+=i.hash),o}},y.extractProtocol=g,y.location=f,y.trimLeft=l,y.qs=n,t.exports=y},5922:(t,e,i)=>{var r=i(2486).Buffer;const{default:n}=i(1113),{setSendTransactionHeaders:s}=i(5180);t.exports={Algod:function(t="",e="http://r2.algorand.network",i=4180,o={}){let a=t;"string"==typeof a&&(a={"X-Algo-API-Token":a});const h=new n(a,e,i,o);function c(t){return void 0!==t.noteb64&&null!==t.noteb64&&(t.note=r.from(t.noteb64,"base64")),t}this.status=async(t={})=>(await h.get("/v1/status",{},t)).body,this.healthCheck=async(t={})=>{const e=await h.get("/health",{},t);if(!e.ok)throw new Error(`Health response: ${e.status}`);return{}},this.statusAfterBlock=async(t,e={})=>{if(!Number.isInteger(t))throw Error("roundNumber should be an integer");return(await h.get(`/v1/status/wait-for-block-after/${t}`,{},e)).body},this.pendingTransactions=async(t,e={})=>{if(!Number.isInteger(t))throw Error("maxTxns should be an integer");const i=await h.get("/v1/transactions/pending",{max:t},e);if(200===i.statusCode&&void 0!==i.body.truncatedTxns.transactions)for(let t=0;t<i.body.truncatedTxns.transactions.length;t++)i.body.truncatedTxns.transactions[t]=c(i.body.truncatedTxns.transactions[t]);return i.body},this.versions=async(t={})=>(await h.get("/versions",{},t)).body,this.ledgerSupply=async(t={})=>(await h.get("/v1/ledger/supply",{},t)).body,this.transactionByAddress=async(t,e=null,i=null,r=null,n={})=>{if(null!==e&&!Number.isInteger(e))throw Error("first round should be an integer");if(null!==i&&!Number.isInteger(i))throw Error("last round should be an integer");const s=await h.get(`/v1/account/${t}/transactions`,{firstRound:e,lastRound:i,max:r},n);if(200===s.statusCode&&void 0!==s.body.transactions)for(let t=0;t<s.body.transactions.length;t++)s.body.transactions[t]=c(s.body.transactions[t]);return s.body},this.transactionByAddressAndDate=async(t,e,i,r=null,n={})=>{const s=await h.get(`/v1/account/${t}/transactions`,{fromDate:e,toDate:i,max:r},n);if(200===s.statusCode&&void 0!==s.body.transactions)for(let t=0;t<s.body.transactions.length;t++)s.body.transactions[t]=c(s.body.transactions[t]);return s.body},this.transactionById=async(t,e={})=>{const i=await h.get(`/v1/transaction/${t}`,{},e);return 200===i.statusCode&&(i.body=c(i.body)),i.body},this.transactionInformation=async(t,e,i={})=>{const r=await h.get(`/v1/account/${t}/transaction/${e}`,{},i);return 200===r.statusCode&&(r.body=c(r.body)),r.body},this.pendingTransactionInformation=async(t,e={})=>{const i=await h.get(`/v1/transactions/pending/${t}`,{},e);return 200===i.statusCode&&(i.body=c(i.body)),i.body},this.accountInformation=async(t,e={})=>(await h.get(`/v1/account/${t}`,{},e)).body,this.assetInformation=async(t,e={})=>(await h.get(`/v1/asset/${t}`,{},e)).body,this.suggestedFee=async(t={})=>(await h.get("/v1/transactions/fee",{},t)).body,this.sendRawTransaction=async(t,e={})=>{const i=s(e);return(await h.post("/v1/transactions",r.from(t),i)).body},this.sendRawTransactions=async(t,e={})=>{const i=s(e),n=Array.prototype.concat(...t.map((t=>Array.from(t))));return(await h.post("/v1/transactions",r.from(n),i)).body},this.getTransactionParams=async(t={})=>(await h.get("/v1/transactions/params",{},t)).body,this.suggestParams=async(t={})=>{const e=await this.getTransactionParams(t);return{flatFee:!1,fee:e.fee,firstRound:e.lastRound,lastRound:e.lastRound+1e3,genesisID:e.genesisID,genesisHash:e.genesishashb64}},this.block=async(t,e={})=>{if(!Number.isInteger(t))throw Error("roundNumber should be an integer");const i=await h.get(`/v1/block/${t}`,{},e);if(200===i.statusCode&&void 0!==i.body.txns.transactions)for(let t=0;t<i.body.txns.transactions.length;t++)i.body.txns.transactions[t]=c(i.body.txns.transactions[t]);return i.body}}}},1834:(t,e,i)=>{var r=i(2486).Buffer;const n=i(7116),s=i(3033),o=i(1063),a=i(5583),h=i(8800),c=i(9404),l=i(2514),u=i(9417);t.exports={DynamicFee:class{constructor(t,e,i,s,o,a){if(!Number.isSafeInteger(e)||e<0)throw Error("amount must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(i)||i<0)throw Error("firstValid must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(s)||s<0)throw Error("lastValid must be a positive number and smaller than 2^53-1");if(void 0===o&&(o=n.ALGORAND_ZERO_ADDRESS_STRING),void 0===a){const t=c.randomBytes(32);a=r.from(t).toString("base64")}const u=r.from("ASAFAgEHBgUmAyD+vKC7FEpaTqe0OKRoGsgObKEFvLYH/FZTJclWlfaiEyDmmpYeby1feshmB5JlUr6YI17TM2PKiJGLuck4qRW2+SB/g7Flf/H8U7ktwYFIodZd/C1LH6PWdyhK3dIAEm2QaTIEIhIzABAjEhAzAAcxABIQMwAIMQESEDEWIxIQMRAjEhAxBygSEDEJKRIQMQgkEhAxAiUSEDEEIQQSEDEGKhIQ","base64"),d=[e,i,s,t,o,a],f=[l.valTypes.INT,l.valTypes.INT,l.valTypes.INT,l.valTypes.ADDRESS,l.valTypes.ADDRESS,l.valTypes.BASE64],p=l.inject(u,[5,6,7,11,44,76],d,f);this.programBytes=p;const g=new h.LogicSig(p,void 0);this.address=g.address()}getProgram(){return this.programBytes}getAddress(){return this.address}},getDynamicFeeTransactions:function(t,e,i,r){if(!e.verify(n.decodeAddress(t.from).publicKey))throw new Error("invalid signature");t.fee=r,t.fee<u.ALGORAND_MIN_TX_FEE&&(t.fee=u.ALGORAND_MIN_TX_FEE);const a=c.keyPairFromSecretKey(i),h=n.encodeAddress(a.publicKey),{lease:l}=t;delete t.lease;const d=new u.Transaction(t);d.addLease(l,r);const f={from:h,to:t.from,fee:r,amount:d.fee,firstRound:t.firstRound,lastRound:t.lastRound,genesisHash:t.genesisHash,type:"pay"},p=new u.Transaction(f);p.addLease(l,r);const g=o.assignGroupID([p,d],void 0),y=g[0],m=g[1],v={lsig:e.get_obj_for_encoding(),txn:m.get_obj_for_encoding()},b=y.signTxn(i),w=s.encode(v),_=new Uint8Array(b.length+w.length);return _.set(b),_.set(w,b.length),_},signDynamicFee:function(t,e,i){const r=a.readProgram(t,void 0),s=r[0],o=r[1],l=c.keyPairFromSecretKey(e),u={from:n.encodeAddress(l.publicKey),to:n.encodeAddress(o[0]),fee:0,amount:s[2],closeRemainderTo:n.encodeAddress(o[1]),firstRound:s[3],lastRound:s[4],genesisHash:i,type:"pay",lease:new Uint8Array(o[2])},d=new h.LogicSig(t,void 0);return d.sign(e),{txn:u,lsig:d}}}},1786:(t,e,i)=>{var r=i(2486).Buffer;const n=i(3477),{keccak256:s}=i(583),o=i(5583),a=i(8800),h=i(2514),c=i(9417);t.exports={HTLC:class{constructor(t,e,i,n,s,o){if(!Number.isSafeInteger(s)||s<0)throw Error("expiryRound must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(o)||o<0)throw Error("maxFee must be a positive number and smaller than 2^53-1");let c="";if("sha256"===i)c="ASAECAEACSYDIOaalh5vLV96yGYHkmVSvpgjXtMzY8qIkYu5yTipFbb5IH+DsWV/8fxTuS3BgUih1l38LUsfo9Z3KErd0gASbZBpIP68oLsUSlpOp7Q4pGgayA5soQW8tgf8VlMlyVaV9qITMQEiDjEQIxIQMQcyAxIQMQgkEhAxCSgSLQEpEhAxCSoSMQIlDRAREA==";else{if("keccak256"!==i)throw Error("hash function unrecognized");c="ASAECAEACSYDIOaalh5vLV96yGYHkmVSvpgjXtMzY8qIkYu5yTipFbb5IH+DsWV/8fxTuS3BgUih1l38LUsfo9Z3KErd0gASbZBpIP68oLsUSlpOp7Q4pGgayA5soQW8tgf8VlMlyVaV9qITMQEiDjEQIxIQMQcyAxIQMQgkEhAxCSgSLQIpEhAxCSoSMQIlDRAREA=="}if(32!==r.from(n,"base64").length)throw Error("hash image must be 32 bytes");const l=r.from(c,"base64"),u=[o,s,e,n,t],d=[h.valTypes.INT,h.valTypes.INT,h.valTypes.ADDRESS,h.valTypes.BASE64,h.valTypes.ADDRESS],f=h.inject(l,[3,6,10,42,76],u,d);this.programBytes=f;const p=new a.LogicSig(f,void 0);this.address=p.address()}getProgram(){return this.programBytes}getAddress(){return this.address}},signTransactionWithHTLCUnlock:function(t,e,i){const h=r.from(i,"base64"),l=o.readProgram(t,void 0),u=l[0],d=l[1][1],f=t[t.length-15];if(1===f){const t=n.create();if(t.update(h),!r.from(t.hex(),"hex").equals(d))throw new Error("sha256 hash of preimage did not match stored contract hash")}else{if(2!==f)throw new Error("hash function in contract unrecognized");{const t=s.create();if(t.update(h),!r.from(t.hex(),"hex").equals(d))throw new Error("keccak256 hash of preimage did not match stored contract hash")}}const p=[h],g=new a.LogicSig(t,p);delete e.to;const y=u[0],m=new c.Transaction(e);if(m.fee>y)throw new Error(`final fee of payment transaction${m.fee.toString()}greater than transaction max fee${y.toString()}`);return a.signLogicSigTransaction(e,g)}}},8886:(t,e,i)=>{const r=i(1834),n=i(1786),s=i(4748),o=i(3758),a=i(2200);t.exports={DynamicFee:r.DynamicFee,getDynamicFeeTransactions:r.getDynamicFeeTransactions,signDynamicFee:r.signDynamicFee,HTLC:n.HTLC,signTransactionWithHTLCUnlock:n.signTransactionWithHTLCUnlock,LimitOrder:s.LimitOrder,getSwapAssetsTransaction:s.getSwapAssetsTransaction,Split:o.Split,getSplitFundsTransaction:o.getSplitFundsTransaction,PeriodicPayment:a.PeriodicPayment,getPeriodicPaymentWithdrawalTransaction:a.getPeriodicPaymentWithdrawalTransaction}},4748:(t,e,i)=>{var r=i(2486).Buffer;const n=i(7116),s=i(1988),o=i(1063),a=i(5583),h=i(8800),c=i(9404),l=i(2514),u=i(413);t.exports={LimitOrder:class{constructor(t,e,i,n,s,o,a){if(!Number.isSafeInteger(e)||e<0)throw Error("assetid must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(i)||i<0)throw Error("ratn must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(n)||n<0)throw Error("ratd must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(s)||s<0)throw Error("expiryRound must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(o)||o<0)throw Error("minTrade must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(a)||a<0)throw Error("maxFee must be a positive number and smaller than 2^53-1");const c=r.from("ASAKAAEFAgYEBwgJCiYBIP68oLsUSlpOp7Q4pGgayA5soQW8tgf8VlMlyVaV9qITMRYiEjEQIxIQMQEkDhAyBCMSQABVMgQlEjEIIQQNEDEJMgMSEDMBECEFEhAzAREhBhIQMwEUKBIQMwETMgMSEDMBEiEHHTUCNQExCCEIHTUENQM0ATQDDUAAJDQBNAMSNAI0BA8QQAAWADEJKBIxAiEJDRAxBzIDEhAxCCISEBA=","base64"),u=[a,o,e,n,i,s,t],d=[l.valTypes.INT,l.valTypes.INT,l.valTypes.INT,l.valTypes.INT,l.valTypes.INT,l.valTypes.INT,l.valTypes.ADDRESS],f=l.inject(c,[5,7,9,10,11,12,16],u,d);this.programBytes=f;const p=new h.LogicSig(f,void 0);this.address=p.address(),this.owner=t,this.assetid=e}getProgram(){return this.programBytes}getAddress(){return this.address}},getSwapAssetsTransaction:function(t,e,i,r,l,d,f,p){const g=c.keyPairFromSecretKey(r),y=n.encodeAddress(g.publicKey),m=a.readProgram(t,void 0),v=m[0],b=m[1];let w;const _=v[6],x=n.encodeAddress(b[0]),E=h.makeLogicSig(t,void 0),S=E.address(),T=[s.makePaymentTxn(S,y,l,i,w,d,f,void 0,p,void 0),s.makeAssetTransferTxn(y,x,w,void 0,l,e,d,f,void 0,p,void 0,_)],A=o.assignGroupID(T),C=v[7],k=v[8];if(e*C<i*k)throw new Error(`bad payment ratio, ${e.toString()}*${C.toString()} !>= ${i.toString()}*${k.toString()}`);const R=v[4];if(i<R)throw new Error(`payment amount ${i.toString()} less than minimum trade ${R.toString()}`);const P=v[2];if(A[0].fee>P)throw new Error(`final fee of payment transaction ${A[0].fee.toString()} greater than transaction max fee ${P.toString()}`);if(A[1].fee>P)throw new Error(`final fee of asset transaction ${A[1].fee.toString()} greater than transaction max fee ${P.toString()}`);const I=h.signLogicSigTransactionObject(A[0],E),O=A[1].signTxn(r);return u.concatArrays(I.blob,O)}}},2200:(t,e,i)=>{var r=i(2486).Buffer;const n=i(7116),s=i(1988),o=i(5583),a=i(8800),h=i(9404),c=i(2514);t.exports={PeriodicPayment:class{constructor(t,e,i,n,s,o,c){if(this.receiver=t,!Number.isSafeInteger(e)||e<0)throw Error("amount must be a positive number and smaller than 2^53-1");if(this.amount=e,!Number.isSafeInteger(i)||i<0)throw Error("withdrawalWindow must be a positive number and smaller than 2^53-1");if(this.withdrawalWindow=i,!Number.isSafeInteger(n)||n<0)throw Error("period must be a positive number and smaller than 2^53-1");if(this.period=n,!Number.isSafeInteger(s)||s<0)throw Error("expiryRound must be a positive number and smaller than 2^53-1");if(this.expiryRound=s,!Number.isSafeInteger(o)||o<0)throw Error("maxFee must be a positive number and smaller than 2^53-1");if(this.maxFee=o,void 0===c){const t=h.randomBytes(32);this.lease=r.from(t).toString("base64")}else this.lease=c;this.programBytes=this.getProgram();const l=new a.LogicSig(this.programBytes,void 0);this.address=l.address()}getProgram(){const t=r.from("ASAHAQYFAAQDByYCIAECAwQFBgcIAQIDBAUGBwgBAgMEBQYHCAECAwQFBgcIIJKvkYTkEzwJf2arzJOxERsSogG9nQzKPkpIoc4TzPTFMRAiEjEBIw4QMQIkGCUSEDEEIQQxAggSEDEGKBIQMQkyAxIxBykSEDEIIQUSEDEJKRIxBzIDEhAxAiEGDRAxCCUSEBEQ","base64"),e=[this.maxFee,this.period,this.withdrawalWindow,this.amount,this.expiryRound,this.lease,this.receiver],i=[c.valTypes.INT,c.valTypes.INT,c.valTypes.INT,c.valTypes.INT,c.valTypes.INT,c.valTypes.BASE64,c.valTypes.ADDRESS];return c.inject(t,[4,5,7,8,9,12,46],e,i)}getAddress(){return this.address}},getPeriodicPaymentWithdrawalTransaction:function(t,e,i,r){const h=o.readProgram(t,void 0),c=h[0],l=h[1],u=c[2],d=c[4],f=c[5];if(i%u!=0)throw new Error(`firstValid round ${i.toString()} was not a multiple of contract period ${u.toString()}`);const p=l[1],g=n.encodeAddress(p),y=l[0],m=new Uint8Array(y),v=i+d,b=g;let w,_;const x=a.makeLogicSig(t,void 0),E=x.address(),S={from:E,to:b,fee:e,amount:f,closeRemainderTo:w,firstRound:i,lastRound:v,note:_,genesisHash:r,genesisID:"",type:"pay",lease:m},T=s.makePaymentTxn(E,b,e,f,w,i,v,_,r,"");if(T.fee>c[1])throw new Error(`final fee of payment transaction${T.fee.toString()}greater than transaction max fee${c[1].toString()}`);return a.signLogicSigTransaction(S,x)}}},3758:(t,e,i)=>{var r=i(2486).Buffer;const n=i(7116),s=i(1988),o=i(1063),a=i(8800),h=i(5583),c=i(2514),l=i(413);t.exports={Split:class{constructor(t,e,i,n,s,o,h,l){if(!Number.isSafeInteger(s)||s<0)throw Error("rat2 must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(n)||n<0)throw Error("rat1 must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(o)||o<0)throw Error("expiryRound must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(h)||h<0)throw Error("minPay must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(l)||l<0)throw Error("maxFee must be a positive number and smaller than 2^53-1");const u=r.from("ASAIAQUCAAYHCAkmAyCztwQn0+DycN+vsk+vJWcsoz/b7NDS6i33HOkvTpf+YiC3qUpIgHGWE8/1LPh9SGCalSN7IaITeeWSXbfsS5wsXyC4kBQ38Z8zcwWVAym4S8vpFB/c0XC6R4mnPi9EBADsPDEQIhIxASMMEDIEJBJAABkxCSgSMQcyAxIQMQglEhAxAiEEDRAiQAAuMwAAMwEAEjEJMgMSEDMABykSEDMBByoSEDMACCEFCzMBCCEGCxIQMwAIIQcPEBA=","base64"),d=[l,o,s,n,h,t,e,i],f=[c.valTypes.INT,c.valTypes.INT,c.valTypes.INT,c.valTypes.INT,c.valTypes.INT,c.valTypes.ADDRESS,c.valTypes.ADDRESS,c.valTypes.ADDRESS],p=c.inject(u,[4,7,8,9,10,14,47,80],d,f);this.programBytes=p;const g=a.makeLogicSig(p,void 0);this.address=g.address()}getProgram(){return this.programBytes}getAddress(){return this.address}},getSplitFundsTransaction:function(t,e,i,r,c,u){const d=h.readProgram(t,void 0),f=d[0],p=d[1];let g=f[6],y=f[5],m=0;const v=(t,e)=>{if("number"!=typeof t||"number"!=typeof e)throw new Error("gcd operates only on positive integers");return e?v(e,t%e):t},b=v(g,y);g=Math.floor(g/b),y=Math.floor(y/b);const w=y/g;m=Math.round(e/(1+w));const _=e-m;if(y*m!=g*_)throw Error("could not split funds in a way that satisfied the contract ratio");const x=a.makeLogicSig(t,void 0).address(),E=n.encodeAddress(p[1]),S=n.encodeAddress(p[2]),T=[s.makePaymentTxn(x,E,c,m,void 0,i,r,void 0,u),s.makePaymentTxn(x,S,c,_,void 0,i,r,void 0,u)],A=o.assignGroupID(T).map((t=>a.signLogicSigTransactionObject(t,a).blob));return l.concatArrays(A[0],A[1])}}},2514:(t,e,i)=>{var r=i(2486).Buffer;const n=i(7116);function s(t,e){let i=0;for(;e>128;)t.push(255&e|128),e>>=7,i+=1;return t.push(255&e),i+1}const o={INT:1,ADDRESS:2,BASE64:3};t.exports={inject:function(t,e,i,a){if(e.length!==i.length||e.length!==a.length)throw new Error("Lengths do not match");let h=t;function c(t,e,i,n){const s=t.slice(0,i),o=t.slice(i+n,t.length),a=[s,r.from(e),o];return r.concat(a)}for(let t=0;t<e.length;t++){let l=0,u=i[t];switch(a[t]){case o.INT:const i=[];l=s(i,u),h=c(h,i,e[t],1);break;case o.ADDRESS:u=n.decodeAddress(u),h=c(h,u.publicKey,e[t],32);break;case o.BASE64:const a=[];u=r.from(u,"base64"),s(a,u.length),u=r.concat([r.from(a),u]),h=c(h,u,e[t],33);break;default:throw new Error("unrecognized value type")}if(0!==l)for(let t=0;t<e.length;t++)e[t]+=l-1}return h},valTypes:o}},7677:(t,e,i)=>{"use strict";i.d(e,{JQ:()=>m,_4:()=>x,X3:()=>_,R0:()=>v,jD:()=>b,Yh:()=>M,bL:()=>D,Ls:()=>O,UV:()=>C,Ax:()=>w,A9:()=>A,w1:()=>E,NK:()=>p,RY:()=>y,Pu:()=>g,Vk:()=>h,nh:()=>u,kG:()=>a,qH:()=>l,JH:()=>c,vJ:()=>P,o5:()=>I,AE:()=>R});var r=i(7116),n=i(8922),s=i(413),o=i(2486).Buffer;const a=65535,h=32,c=1,l=1,u=2,d=/^([a-z\d[\](),]+)\[([1-9][\d]*)]$/,f=/^ufixed([1-9][\d]*)x([1-9][\d]*)$/;class p{static from(t){if(t.endsWith("[]")){const e=p.from(t.slice(0,t.length-2));return new x(e)}if(t.endsWith("]")){const e=t.match(d);if(3!==e.length)throw new Error(`malformed static array string: ${t}`);const i=e[2],r=parseInt(i,10);if(r>a)throw new Error(`array length exceeds limit ${a}`);const n=p.from(e[1]);return new _(n,r)}if(t.startsWith("uint")){const e=t=>[...t].every((t=>"0123456789".includes(t))),i=t.slice(4,t.length);if(!e(i))throw new Error(`malformed uint string: ${i}`);const r=parseInt(i,10);if(r>a)throw new Error(`malformed uint string: ${r}`);return new g(r)}if("byte"===t)return new b;if(t.startsWith("ufixed")){const e=t.match(f);if(3!==e.length)throw new Error(`malformed ufixed type: ${t}`);const i=parseInt(e[1],10),r=parseInt(e[2],10);return new y(i,r)}if("bool"===t)return new v;if("address"===t)return new m;if("string"===t)return new w;if(t.length>=2&&"("===t[0]&&")"===t[t.length-1]){const e=E.parseTupleContent(t.slice(1,t.length-1)),i=[];for(let t=0;t<e.length;t++){const r=p.from(e[t]);i.push(r)}return new E(i)}throw new Error(`cannot convert a string ${t} to an ABI type`)}}class g extends p{constructor(t){if(super(),t%8!=0||t<8||t>512)throw new Error(`unsupported uint type bitSize: ${t}`);this.bitSize=t}toString(){return`uint${this.bitSize}`}equals(t){return t instanceof g&&this.bitSize===t.bitSize}isDynamic(){return!1}byteLen(){return this.bitSize/8}encode(t){if("bigint"!=typeof t&&"number"!=typeof t)throw new Error(`Cannot encode value as uint${this.bitSize}: ${t}`);if(t>=BigInt(2**this.bitSize)||t<BigInt(0))throw new Error(`${t} is not a non-negative int or too big to fit in size uint${this.bitSize}`);if("number"==typeof t&&!Number.isSafeInteger(t))throw new Error(`${t} should be converted into a BigInt before it is encoded`);return(0,n.j)(t,this.bitSize/8)}decode(t){if(t.length!==this.bitSize/8)throw new Error(`byte string must correspond to a uint${this.bitSize}`);return(0,n.v)(t)}}class y extends p{constructor(t,e){if(super(),t%8!=0||t<8||t>512)throw new Error(`unsupported ufixed type bitSize: ${t}`);if(e>160||e<1)throw new Error(`unsupported ufixed type precision: ${e}`);this.bitSize=t,this.precision=e}toString(){return`ufixed${this.bitSize}x${this.precision}`}equals(t){return t instanceof y&&this.bitSize===t.bitSize&&this.precision===t.precision}isDynamic(){return!1}byteLen(){return this.bitSize/8}encode(t){if("bigint"!=typeof t&&"number"!=typeof t)throw new Error(`Cannot encode value as ${this.toString()}: ${t}`);if(t>=BigInt(2**this.bitSize)||t<BigInt(0))throw new Error(`${t} is not a non-negative int or too big to fit in size ${this.toString()}`);if("number"==typeof t&&!Number.isSafeInteger(t))throw new Error(`${t} should be converted into a BigInt before it is encoded`);return(0,n.j)(t,this.bitSize/8)}decode(t){if(t.length!==this.bitSize/8)throw new Error(`byte string must correspond to a ${this.toString()}`);return(0,n.v)(t)}}class m extends p{toString(){return"address"}equals(t){return t instanceof m}isDynamic(){return!1}byteLen(){return h}encode(t){if("string"!=typeof t&&!(t instanceof Uint8Array))throw new Error(`Cannot encode value as ${this.toString()}: ${t}`);if("string"==typeof t)return(0,r.decodeAddress)(t).publicKey;if(32!==t.byteLength)throw new Error("byte string must be 32 bytes long for an address");return t}decode(t){if(32!==t.byteLength)throw new Error("byte string must be 32 bytes long for an address");return(0,r.encodeAddress)(t)}}class v extends p{toString(){return"bool"}equals(t){return t instanceof v}isDynamic(){return!1}byteLen(){return l}encode(t){if("boolean"!=typeof t)throw new Error(`Cannot encode value as bool: ${t}`);return t?new Uint8Array([128]):new Uint8Array([0])}decode(t){if(1!==t.byteLength)throw new Error("bool string must be 1 byte long");const e=t[0];if(128===e)return!0;if(0===e)return!1;throw new Error("boolean could not be decoded from the byte string")}}class b extends p{toString(){return"byte"}equals(t){return t instanceof b}isDynamic(){return!1}byteLen(){return c}encode(t){if("number"!=typeof t&&"bigint"!=typeof t)throw new Error(`Cannot encode value as byte: ${t}`);if("bigint"==typeof t&&(t=Number(t)),t<0||t>255)throw new Error(`${t} cannot be encoded into a byte`);return new Uint8Array([t])}decode(t){if(1!==t.byteLength)throw new Error("byte string must be 1 byte long");return t[0]}}class w extends p{toString(){return"string"}equals(t){return t instanceof w}isDynamic(){return!0}byteLen(){throw new Error(`${this.toString()} is a dynamic type`)}encode(t){if("string"!=typeof t&&!(t instanceof Uint8Array))throw new Error(`Cannot encode value as string: ${t}`);const e=o.from(t),i=(0,n.j)(t.length,u),r=new Uint8Array(t.length+u);return r.set(i),r.set(e,u),r}decode(t){if(t.length<u)throw new Error(`byte string is too short to be decoded. Actual length is ${t.length}, but expected at least ${u}`);const e=o.from(t).readUIntBE(0,u),i=t.slice(u,t.length);if(e!==i.length)throw new Error(`string length bytes do not match the actual length of string. Expected ${e}, got ${i.length}`);return o.from(i).toString("utf-8")}}class _ extends p{constructor(t,e){if(super(),e<1)throw new Error(`static array must have a length greater than 0: ${e}`);this.childType=t,this.staticLength=e}toString(){return`${this.childType.toString()}[${this.staticLength}]`}equals(t){return t instanceof _&&this.staticLength===t.staticLength&&this.childType.equals(t.childType)}isDynamic(){return this.childType.isDynamic()}byteLen(){return this.childType.constructor===v?Math.ceil(this.staticLength/8):this.staticLength*this.childType.byteLen()}encode(t){if(!(Array.isArray(t)||t instanceof Uint8Array))throw new Error(`Cannot encode value as ${this.toString()}: ${t}`);if(t.length!==this.staticLength)throw new Error(`Value array does not match static array length. Expected ${this.staticLength}, got ${t.length}`);return this.toABITupleType().encode(t)}decode(t){return this.toABITupleType().decode(t)}toABITupleType(){return new E(Array(this.staticLength).fill(this.childType))}}class x extends p{constructor(t){super(),this.childType=t}toString(){return`${this.childType.toString()}[]`}equals(t){return t instanceof x&&this.childType.equals(t.childType)}isDynamic(){return!0}byteLen(){throw new Error(`${this.toString()} is a dynamic type`)}encode(t){if(!(Array.isArray(t)||t instanceof Uint8Array))throw new Error(`Cannot encode value as ${this.toString()}: ${t}`);const e=this.toABITupleType(t.length),i=e.encode(t),r=(0,n.j)(e.childTypes.length,u);return(0,s.concatArrays)(r,i)}decode(t){const e=o.from(t).readUIntBE(0,u);return this.toABITupleType(e).decode(t.slice(u,t.length))}toABITupleType(t){return new E(Array(t).fill(this.childType))}}class E extends p{constructor(t){if(super(),t.length>=a)throw new Error("tuple type child type number larger than maximum uint16 error");this.childTypes=t}toString(){const t=[];for(let e=0;e<this.childTypes.length;e++)t[e]=this.childTypes[e].toString();return`(${t.join(",")})`}equals(t){return t instanceof E&&this.childTypes.length===t.childTypes.length&&this.childTypes.every(((e,i)=>e.equals(t.childTypes[i])))}isDynamic(){return this.childTypes.some((t=>t.isDynamic()))}byteLen(){let t=0;for(let e=0;e<this.childTypes.length;e++)if(this.childTypes[e].constructor===v){const i=T(this.childTypes,e,1),r=i+1;e+=i,t+=Math.trunc((r+7)/8)}else t+=this.childTypes[e].byteLen();return t}encode(t){if(!(Array.isArray(t)||t instanceof Uint8Array))throw new Error(`Cannot encode value as ${this.toString()}: ${t}`);const e=Array.from(t);if(t.length>a)throw new Error("length of tuple array should not exceed a uint16");const i=this.childTypes,r=[],o=[],h=new Map;let c=0;for(;c<i.length;){const t=i[c];if(t.isDynamic())h.set(r.length,!0),r.push(new Uint8Array([0,0])),o.push(t.encode(e[c]));else{if(t.constructor===v){const t=T(i,c,-1);let s=T(i,c,1);if(t%8!=0)throw new Error("expected before index should have number of bool mod 8 equal 0");s=Math.min(7,s);const o=S(e.slice(c,c+s+1));r.push((0,n.j)(o,1)),c+=s}else{const i=t.encode(e[c]);r.push(i)}h.set(c,!1),o.push(new Uint8Array)}c+=1}let l=0;for(const t of r)l+=t.length;let d=0;for(let t=0;t<r.length;t++){if(h.get(t)){const e=l+d;if(e>a)throw new Error(`byte length of ${e} should not exceed a uint16`);r[t]=(0,n.j)(e,u)}d+=o[t].length}return(0,s.concatArrays)(...r,...o)}decode(t){const e=this.childTypes,i=[],r=[];let n=0,s=0;const a=o.from(t);for(;n<e.length;){const o=e[n];if(o.isDynamic()){if(t.slice(s,t.length).length<u)throw new Error("dynamic type in tuple is too short to be decoded");const e=a.readUIntBE(s,u);if(i.length>0&&(i[i.length-1].right=e,e<i[i.length-1].left))throw new Error("dynamic index segment miscalculation: left is greater than right index");const n={left:e,right:-1};i.push(n),r.push(null),s+=u}else if(o.constructor===v){const e=T(this.childTypes,n,-1);let i=T(this.childTypes,n,1);if(e%8!=0)throw new Error("expected before bool number mod 8 === 0");i=Math.min(7,i);for(let e=0;e<=i;e++){const i=128>>e;(t[s]&i)>0?r.push(new Uint8Array([128])):r.push(new Uint8Array([0]))}n+=i,s+=1}else{const e=o.byteLen();r.push(t.slice(s,s+e)),s+=e}if(n!==e.length-1&&s>=t.length)throw new Error("input byte not enough to decode");n+=1}if(i.length>0&&(i[i.length-1].right=t.length,s=t.length),s<t.length)throw new Error("input byte not fully consumed");for(let t=0;t<i.length;t++){const e=i[t];if(e.left>e.right)throw new Error("dynamic segment should display a [l, r] space with l <= r");if(t!==i.length-1&&e.right!==i[t+1].left)throw new Error("dynamic segment should be consecutive")}let h=0;for(let n=0;n<e.length;n++)e[n].isDynamic()&&(r[n]=t.slice(i[h].left,i[h].right),h+=1);const c=[];for(let t=0;t<e.length;t++){const i=e[t].decode(r[t]);c.push(i)}return c}static parseTupleContent(t){if(0===t.length)return[];if(t.endsWith(",")||t.startsWith(","))throw new Error("tuple string should not start with comma");if(t.includes(",,"))throw new Error("tuple string should not have consecutive commas");const e=[];let i=0,r="";for(const n of t)r+=n,"("===n?i+=1:")"===n?i-=1:","===n&&0===i&&(e.push(r.slice(0,r.length-1)),r="");if(0!==r.length&&e.push(r),0!==i)throw new Error("tuple string has mismatched parentheses");return e}}function S(t){let e=0;if(t.length>8)throw new Error("value list passed in should be no greater than length 8");for(let i=0;i<t.length;i++){const r=t[i];if("boolean"!=typeof r)throw new Error("non-boolean values cannot be compressed into a byte");r&&(e|=1<<7-i)}return e}function T(t,e,i){let r=0;for(;;){const n=e+i*r;if(t[n].constructor!==v){r-=1;break}if(n!==t.length-1&&1===i)r+=1;else{if(!(n>0&&-1===i))break;r+=1}}return r}var A,C,k=i(9404);function R(t){return t===A.any||t===A.pay||t===A.keyreg||t===A.acfg||t===A.axfer||t===A.afrz||t===A.appl}function P(t,e){return t===A.any||e.type&&e.type.toString()===t.toString()}function I(t){return t===C.account||t===C.application||t===C.asset}!function(t){t.any="txn",t.pay="pay",t.keyreg="keyreg",t.acfg="acfg",t.axfer="axfer",t.afrz="afrz",t.appl="appl"}(A||(A={})),function(t){t.account="account",t.application="application",t.asset="asset"}(C||(C={}));class O{constructor(t){if("string"!=typeof t.name||"object"!=typeof t.returns||!Array.isArray(t.args))throw new Error("Invalid ABIMethod parameters");this.name=t.name,this.description=t.desc,this.args=t.args.map((({type:t,name:e,desc:i})=>R(t)||I(t)?{type:t,name:e,description:i}:{type:p.from(t),name:e,description:i})),this.returns={type:"void"===t.returns.type?t.returns.type:p.from(t.returns.type),description:t.returns.desc}}getSignature(){const t=this.args.map((t=>t.type.toString())).join(","),e=this.returns.type.toString();return`${this.name}(${t})${e}`}getSelector(){const t=(0,k.genericHash)(this.getSignature());return new Uint8Array(t.slice(0,4))}txnCount(){let t=1;for(const e of this.args)"string"==typeof e.type&&R(e.type)&&(t+=1);return t}toJSON(){return{name:this.name,desc:this.description,args:this.args.map((({type:t,name:e,description:i})=>({type:t.toString(),name:e,desc:i}))),returns:{type:this.returns.type.toString(),desc:this.returns.description}}}static fromSignature(t){const{name:e,args:i,returns:r}=function(t){const e=t.indexOf("(");if(-1===e)throw new Error(`Invalid method signature: ${t}`);let i=-1,r=0;for(let n=e;n<t.length;n++){const e=t[n];if("("===e)r+=1;else if(")"===e){if(0===r)break;if(r-=1,0===r){i=n;break}}}if(-1===i)throw new Error(`Invalid method signature: ${t}`);return{name:t.slice(0,e),args:E.parseTupleContent(t.slice(e+1,i)),returns:t.slice(i+1)}}(t);return new O({name:e,args:i.map((t=>({type:t}))),returns:{type:r}})}}class M{constructor(t){if("string"!=typeof t.name||!Array.isArray(t.methods)||t.networks&&"object"!=typeof t.networks)throw new Error("Invalid ABIContract parameters");this.name=t.name,this.description=t.desc,this.networks=t.networks?{...t.networks}:{},this.methods=t.methods.map((t=>new O(t)))}toJSON(){return{name:this.name,desc:this.description,networks:this.networks,methods:this.methods.map((t=>t.toJSON()))}}}class D{constructor(t){if("string"!=typeof t.name||!Array.isArray(t.methods))throw new Error("Invalid ABIInterface parameters");this.name=t.name,this.description=t.desc,this.methods=t.methods.map((t=>new O(t)))}toJSON(){return{name:this.name,desc:this.description,methods:this.methods.map((t=>t.toJSON()))}}}},7988:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(9404),n=i(7116);function s(){const t=r.keyPair();return{addr:n.encodeAddress(t.publicKey),sk:t.secretKey}}},2691:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(7116),n=i(3033),s=i(9404),o=i(413),a=i(2486).Buffer;class h{constructor({bidderKey:t,bidAmount:e,bidID:i,auctionKey:n,auctionID:s,maxPrice:o}){this.name="Bid",this.tag=a.from([97,66]);const h=r.decodeAddress(t),c=r.decodeAddress(n);if(!Number.isSafeInteger(e)||e<0)throw Error("Bid amount must be positive and 2^53-1");if(!Number.isSafeInteger(i)||i<0)throw Error("BidID must be positive and 2^53-1");if(!Number.isSafeInteger(s)||s<0)throw Error("auctionID must be positive");Object.assign(this,{bidderKey:h,bidAmount:e,bidID:i,auctionKey:c,auctionID:s,maxPrice:o})}get_obj_for_encoding(){return{bidder:a.from(this.bidderKey.publicKey),cur:this.bidAmount,price:this.maxPrice,id:this.bidID,auc:a.from(this.auctionKey.publicKey),aid:this.auctionID}}signBid(t){const e=n.encode(this.get_obj_for_encoding()),i=a.from(o.concatArrays(this.tag,e)),r=s.sign(i,t),h={t:"b",b:{sig:a.from(r),bid:this.get_obj_for_encoding()}};return new Uint8Array(n.encode(h))}}},1113:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>f});var r=i(413),n=i(1042),s=i.n(n),o=i(9368),a=i.n(o),h=i(5391),c=i(2486).Buffer;class l{constructor(t,e,i,r={}){this.defaultHeaders=r;const n=new(s())(e,{});if(void 0!==i&&n.set("port",i.toString()),0===n.protocol.length)throw new Error("Invalid base server URL, protocol must be defined.");this.baseURL=n,this.tokenHeader=t}addressWithPath(t){return new(s())(a().posix.join(this.baseURL.pathname,t),this.baseURL).toString()}static superagentToHTTPClientResponse(t){return t.body instanceof ArrayBuffer&&(t.body=new Uint8Array(t.body)),t}static formatSuperagentError(t){if(t.response)try{const e=JSON.parse(c.from(t.response.body).toString());t.message=`Network request error. Received status ${t.response.status}: ${e.message}`}catch(t){}return t}async get(t,e,i={}){const r=h.get(this.addressWithPath(t)).set(this.tokenHeader).set(this.defaultHeaders).set(i).responseType("arraybuffer").query(e);try{const t=await r;return l.superagentToHTTPClientResponse(t)}catch(t){throw l.formatSuperagentError(t)}}async post(t,e,i,r={}){const n=h.post(this.addressWithPath(t)).set(this.tokenHeader).set(this.defaultHeaders).set(r).query(i).serialize((t=>t)).responseType("arraybuffer").send(c.from(e));try{const t=await n;return l.superagentToHTTPClientResponse(t)}catch(t){throw l.formatSuperagentError(t)}}async delete(t,e,i,r={}){const n=h.delete(this.addressWithPath(t)).set(this.tokenHeader).set(this.defaultHeaders).set(r).query(i).serialize((t=>t)).responseType("arraybuffer").send(c.from(e));try{const t=await n;return l.superagentToHTTPClientResponse(t)}catch(t){throw l.formatSuperagentError(t)}}}var u=i(2486).Buffer;function d(t){return Object.keys(t).reduce(((e,i)=>(e[i.toLowerCase()]=t[i],e)),{})}class f{constructor(t,e,i,r={}){this.bc=void 0!==e?new l(t,e,i,r):t}static parseJSON(t,e,i={}){try{return 0===Object.keys(i).length?t&&JSON.parse(t):t&&r.parseJSON(t,i)}catch(i){const r=i;throw r.rawResponse=t||null,r.statusCode=e,r}}static serializeData(t,e){if(!t)return new Uint8Array(0);if("application/json"===e["content-type"])return new Uint8Array(u.from(JSON.stringify(t)));if("string"==typeof t)return new Uint8Array(u.from(t));if(t instanceof Uint8Array)return t;throw new Error("provided data is neither a string nor a Uint8Array and content-type is not application/json")}static prepareResponse(t,e,i={}){let r,{body:n}=t;return"application/msgpack"!==e&&(r=n&&u.from(n).toString()||""),"application/json"===e&&(n=f.parseJSON(r,t.status,i)),{...t,body:n,text:r,ok:2===Math.trunc(t.status/100)}}static prepareResponseError(t){return t.response&&(t.response=f.prepareResponse(t.response,"application/json"),t.status=t.response.status),t}async get(t,e,i={},r={}){const n=function(t){return void 0!==t&&Object.prototype.hasOwnProperty.call(t,"format")&&"msgpack"===t.format?"application/msgpack":"application/json"}(e),s={...i,accept:n};try{const i=await this.bc.get(t,function(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]&&0!==t[e].length||delete t[e]);return t}(e),s);return f.prepareResponse(i,n,r)}catch(t){throw f.prepareResponseError(t)}}async post(t,e,i={}){const r={"content-type":"application/json",...d(i)};try{const i=await this.bc.post(t,f.serializeData(e,r),void 0,r);return f.prepareResponse(i,"application/json")}catch(t){throw f.prepareResponseError(t)}}async delete(t,e,i={}){const r={"content-type":"application/json",...d(i)},n=await this.bc.delete(t,f.serializeData(e,r),void 0,r);return f.prepareResponse(n,"application/json")}}},6477:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var r=i(3480),n=i(9417),s=i(2486).Buffer;class o extends r.Z{constructor(t,e="http://127.0.0.1",i=7833,r={}){super("X-KMD-API-Token",t,e,i,r)}async versions(){return(await this.c.get("/versions")).body}async listWallets(){return(await this.c.get("/v1/wallets")).body}async createWallet(t,e,i=new Uint8Array,r="sqlite"){const n={wallet_name:t,wallet_driver_name:r,wallet_password:e,master_derivation_key:s.from(i).toString("base64")};return(await this.c.post("/v1/wallet",n)).body}async initWalletHandle(t,e){const i={wallet_id:t,wallet_password:e};return(await this.c.post("/v1/wallet/init",i)).body}async releaseWalletHandle(t){const e={wallet_handle_token:t};return(await this.c.post("/v1/wallet/release",e)).body}async renewWalletHandle(t){const e={wallet_handle_token:t};return(await this.c.post("/v1/wallet/renew",e)).body}async renameWallet(t,e,i){const r={wallet_id:t,wallet_password:e,wallet_name:i};return(await this.c.post("/v1/wallet/rename",r)).body}async getWallet(t){const e={wallet_handle_token:t};return(await this.c.post("/v1/wallet/info",e)).body}async exportMasterDerivationKey(t,e){const i={wallet_handle_token:t,wallet_password:e},r=await this.c.post("/v1/master-key/export",i);return{master_derivation_key:s.from(r.body.master_derivation_key,"base64")}}async importKey(t,e){const i={wallet_handle_token:t,private_key:s.from(e).toString("base64")};return(await this.c.post("/v1/key/import",i)).body}async exportKey(t,e,i){const r={wallet_handle_token:t,address:i,wallet_password:e},n=await this.c.post("/v1/key/export",r);return{private_key:s.from(n.body.private_key,"base64")}}async generateKey(t){const e={wallet_handle_token:t,display_mnemonic:!1};return(await this.c.post("/v1/key",e)).body}async deleteKey(t,e,i){const r={wallet_handle_token:t,address:i,wallet_password:e};return(await this.c.delete("/v1/key",r)).body}async listKeys(t){const e={wallet_handle_token:t};return(await this.c.post("/v1/key/list",e)).body}async signTransaction(t,e,i){const r=n.instantiateTxnIfNeeded(i),o={wallet_handle_token:t,wallet_password:e,transaction:s.from(r.toByte()).toString("base64")},a=await this.c.post("/v1/transaction/sign",o);return 200===a.status?s.from(a.body.signed_transaction,"base64"):a.body}async signTransactionWithSpecificPublicKey(t,e,i,r){const o=n.instantiateTxnIfNeeded(i),a={wallet_handle_token:t,wallet_password:e,transaction:s.from(o.toByte()).toString("base64"),public_key:s.from(r).toString("base64")},h=await this.c.post("/v1/transaction/sign",a);return 200===h.status?s.from(h.body.signed_transaction,"base64"):h.body}async listMultisig(t){const e={wallet_handle_token:t};return(await this.c.post("/v1/multisig/list",e)).body}async importMultisig(t,e,i,r){const n={wallet_handle_token:t,multisig_version:e,threshold:i,pks:r};return(await this.c.post("/v1/multisig/import",n)).body}async exportMultisig(t,e){const i={wallet_handle_token:t,address:e};return(await this.c.post("/v1/multisig/export",i)).body}async signMultisigTransaction(t,e,i,r,o){const a=n.instantiateTxnIfNeeded(i),h={wallet_handle_token:t,transaction:s.from(a.toByte()).toString("base64"),public_key:s.from(r).toString("base64"),partial_multisig:o,wallet_password:e};return(await this.c.post("/v1/multisig/sign",h)).body}async deleteMultisig(t,e,i){const r={wallet_handle_token:t,address:i,wallet_password:e};return(await this.c.delete("/v1/multisig",r)).body}}},1663:(t,e,i)=>{"use strict";i.d(e,{Z:()=>R});var r=i(3480),n=i(8680);class s extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}`}exclude(t){return this.query.exclude=t,this}}class o extends n.Z{constructor(t,e,i,r){super(t,e),this.account=i,this.assetID=r,this.account=i,this.assetID=r}path(){return`/v2/accounts/${this.account}/assets/${this.assetID}`}}class a extends n.Z{constructor(t,e,i,r){super(t,e),this.account=i,this.applicationID=r,this.account=i,this.applicationID=r}path(){return`/v2/accounts/${this.account}/applications/${this.applicationID}`}}var h=i(3033);class c extends n.Z{constructor(t,e){if(super(t),!Number.isInteger(e))throw Error("roundNumber should be an integer");this.round=e,this.query={format:"msgpack"}}path(){return`/v2/blocks/${this.round}`}prepare(t){if(t&&t.byteLength>0)return h.decode(t)}}var l=i(2486).Buffer;function u(t={}){let e=t;return Object.keys(e).every((t=>"content-type"!==t.toLowerCase()))&&(e={...t},e["Content-Type"]="text/plain"),e}class d extends n.Z{constructor(t,e){super(t),this.source=e,this.source=e}path(){return"/v2/teal/compile"}async do(t={}){const e=u(t);return(await this.c.post(this.path(),l.from(this.source),e)).body}}var f=i(2486).Buffer;class p extends n.Z{constructor(t,e){super(t),this.blob=h.encode(e.get_obj_for_encoding(!0))}path(){return"/v2/teal/dryrun"}async do(t={}){const e=u(t);return(await this.c.post(this.path(),f.from(this.blob),e)).body}}class g extends n.Z{constructor(t,e,i){super(t,e),this.index=i,this.index=i}path(){return`/v2/assets/${this.index}`}}class y extends n.Z{constructor(t,e,i){super(t,e),this.index=i,this.index=i}path(){return`/v2/applications/${this.index}`}}class m extends n.Z{path(){return"/health"}async do(t={}){const e=await this.c.get(this.path(),{},t);if(!e.ok)throw new Error(`Health response: ${e.status}`);return{}}}class v extends n.Z{constructor(t,e){super(t),this.txid=e,this.txid=e,this.query.format="msgpack"}prepare(t){if(t&&t.byteLength>0)return h.decode(t)}path(){return`/v2/transactions/pending/${this.txid}`}max(t){return this.query.max=t,this}}class b extends n.Z{constructor(t){super(t),this.query.format="msgpack"}path(){return"/v2/transactions/pending"}prepare(t){if(t&&t.byteLength>0)return h.decode(t)}max(t){return this.query.max=t,this}}class w extends n.Z{constructor(t,e){super(t),this.address=e,this.address=e,this.query.format="msgpack"}prepare(t){if(t&&t.byteLength>0)return h.decode(t)}path(){return`/v2/accounts/${this.address}/transactions/pending`}max(t){return this.query.max=t,this}}var _=i(5180);class x extends n.Z{path(){return"/v2/status"}}class E extends n.Z{constructor(t,e,i){if(super(t,e),this.round=i,!Number.isInteger(i))throw Error("round should be an integer");this.round=i}path(){return`/v2/status/wait-for-block-after/${this.round}`}}class S extends n.Z{path(){return"/v2/transactions/params"}prepare(t){return{flatFee:!1,fee:t.fee,firstRound:t["last-round"],lastRound:t["last-round"]+1e3,genesisID:t["genesis-id"],genesisHash:t["genesis-hash"]}}}class T extends n.Z{path(){return"/v2/ledger/supply"}}class A extends n.Z{path(){return"/versions"}}class C extends n.Z{path(){return"/genesis"}}class k extends n.Z{constructor(t,e,i,r){super(t,e),this.round=i,this.txID=r,this.round=i,this.txID=r}path(){return`/v2/blocks/${this.round}/transactions/${this.txID}/proof`}}class R extends r.Z{constructor(t,e="http://r2.algorand.network",i=4180,r={}){super("X-Algo-API-Token",t,e,i,r)}healthCheck(){return new m(this.c)}versionsCheck(){return new A(this.c)}sendRawTransaction(t){return new _.default(this.c,t)}accountInformation(t){return new s(this.c,this.intDecoding,t)}accountAssetInformation(t,e){return new o(this.c,this.intDecoding,t,e)}accountApplicationInformation(t,e){return new a(this.c,this.intDecoding,t,e)}block(t){return new c(this.c,t)}pendingTransactionInformation(t){return new v(this.c,t)}pendingTransactionsInformation(){return new b(this.c)}pendingTransactionByAddress(t){return new w(this.c,t)}status(){return new x(this.c,this.intDecoding)}statusAfterBlock(t){return new E(this.c,this.intDecoding,t)}getTransactionParams(){return new S(this.c)}supply(){return new T(this.c,this.intDecoding)}compile(t){return new d(this.c,t)}dryrun(t){return new p(this.c,t)}getAssetByID(t){return new g(this.c,this.intDecoding,t)}getApplicationByID(t){return new y(this.c,this.intDecoding,t)}genesis(){return new C(this.c,this.intDecoding)}getProof(t,e){return new k(this.c,this.intDecoding,t,e)}}},227:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Account:()=>a,AccountApplicationResponse:()=>h,AccountAssetResponse:()=>c,AccountParticipation:()=>l,AccountStateDelta:()=>u,Application:()=>d,ApplicationLocalState:()=>f,ApplicationParams:()=>p,ApplicationStateSchema:()=>g,Asset:()=>y,AssetHolding:()=>m,AssetParams:()=>v,BlockResponse:()=>b,BuildVersion:()=>w,CatchpointAbortResponse:()=>_,CatchpointStartResponse:()=>x,CompileResponse:()=>E,DryrunRequest:()=>S,DryrunResponse:()=>T,DryrunSource:()=>A,DryrunState:()=>C,DryrunTxnResult:()=>k,ErrorResponse:()=>R,EvalDelta:()=>P,EvalDeltaKeyValue:()=>I,NodeStatusResponse:()=>O,PendingTransactionResponse:()=>M,PendingTransactionsResponse:()=>D,PostTransactionsResponse:()=>B,ProofResponse:()=>L,SupplyResponse:()=>N,TealKeyValue:()=>U,TealValue:()=>F,TransactionParametersResponse:()=>z,Version:()=>j});var r=i(2486).Buffer;function n(t,e){let i;if(t instanceof Uint8Array)i=e?t:r.from(t).toString("base64");else if("function"==typeof t.get_obj_for_encoding)i=t.get_obj_for_encoding(e);else if(Array.isArray(t)){i=[];for(const r of t)i.push(n(r,e))}else if("object"==typeof t){const r={};for(const i of Object.keys(t))r[i]=n(t[i],e);i=r}else{if(!function(t){return void 0===t||null==t||"object"!=typeof t&&"function"!=typeof t}(t))throw new Error(`Unsupported value: ${String(t)}`);i=t}return i}class s{get_obj_for_encoding(t=!1){const e={};for(const i of Object.keys(this.attribute_map)){const r=this.attribute_map[i],s=this[i];void 0!==s&&(e[r]=null===s?null:n(s,t))}return e}}var o=i(2486).Buffer;class a extends s{constructor({address:t,amount:e,amountWithoutPendingRewards:i,minBalance:r,pendingRewards:n,rewards:s,round:o,status:a,totalAppsOptedIn:h,totalAssetsOptedIn:c,totalCreatedApps:l,totalCreatedAssets:u,appsLocalState:d,appsTotalExtraPages:f,appsTotalSchema:p,assets:g,authAddr:y,createdApps:m,createdAssets:v,participation:b,rewardBase:w,sigType:_}){super(),this.address=t,this.amount=e,this.amountWithoutPendingRewards=i,this.minBalance=r,this.pendingRewards=n,this.rewards=s,this.round=o,this.status=a,this.totalAppsOptedIn=h,this.totalAssetsOptedIn=c,this.totalCreatedApps=l,this.totalCreatedAssets=u,this.appsLocalState=d,this.appsTotalExtraPages=f,this.appsTotalSchema=p,this.assets=g,this.authAddr=y,this.createdApps=m,this.createdAssets=v,this.participation=b,this.rewardBase=w,this.sigType=_,this.attribute_map={address:"address",amount:"amount",amountWithoutPendingRewards:"amount-without-pending-rewards",minBalance:"min-balance",pendingRewards:"pending-rewards",rewards:"rewards",round:"round",status:"status",totalAppsOptedIn:"total-apps-opted-in",totalAssetsOptedIn:"total-assets-opted-in",totalCreatedApps:"total-created-apps",totalCreatedAssets:"total-created-assets",appsLocalState:"apps-local-state",appsTotalExtraPages:"apps-total-extra-pages",appsTotalSchema:"apps-total-schema",assets:"assets",authAddr:"auth-addr",createdApps:"created-apps",createdAssets:"created-assets",participation:"participation",rewardBase:"reward-base",sigType:"sig-type"}}}class h extends s{constructor(t,e,i){super(),this.round=t,this.appLocalState=e,this.createdApp=i,this.attribute_map={round:"round",appLocalState:"app-local-state",createdApp:"created-app"}}}class c extends s{constructor(t,e,i){super(),this.round=t,this.assetHolding=e,this.createdAsset=i,this.attribute_map={round:"round",assetHolding:"asset-holding",createdAsset:"created-asset"}}}class l extends s{constructor({selectionParticipationKey:t,voteFirstValid:e,voteKeyDilution:i,voteLastValid:r,voteParticipationKey:n,stateProofKey:s}){super(),this.selectionParticipationKey="string"==typeof t?new Uint8Array(o.from(t,"base64")):t,this.voteFirstValid=e,this.voteKeyDilution=i,this.voteLastValid=r,this.voteParticipationKey="string"==typeof n?new Uint8Array(o.from(n,"base64")):n,this.stateProofKey="string"==typeof s?new Uint8Array(o.from(s,"base64")):s,this.attribute_map={selectionParticipationKey:"selection-participation-key",voteFirstValid:"vote-first-valid",voteKeyDilution:"vote-key-dilution",voteLastValid:"vote-last-valid",voteParticipationKey:"vote-participation-key",stateProofKey:"state-proof-key"}}}class u extends s{constructor(t,e){super(),this.address=t,this.delta=e,this.attribute_map={address:"address",delta:"delta"}}}class d extends s{constructor(t,e){super(),this.id=t,this.params=e,this.attribute_map={id:"id",params:"params"}}}class f extends s{constructor(t,e,i){super(),this.id=t,this.schema=e,this.keyValue=i,this.attribute_map={id:"id",schema:"schema",keyValue:"key-value"}}}class p extends s{constructor({approvalProgram:t,clearStateProgram:e,creator:i,extraProgramPages:r,globalState:n,globalStateSchema:s,localStateSchema:a}){super(),this.approvalProgram="string"==typeof t?new Uint8Array(o.from(t,"base64")):t,this.clearStateProgram="string"==typeof e?new Uint8Array(o.from(e,"base64")):e,this.creator=i,this.extraProgramPages=r,this.globalState=n,this.globalStateSchema=s,this.localStateSchema=a,this.attribute_map={approvalProgram:"approval-program",clearStateProgram:"clear-state-program",creator:"creator",extraProgramPages:"extra-program-pages",globalState:"global-state",globalStateSchema:"global-state-schema",localStateSchema:"local-state-schema"}}}class g extends s{constructor(t,e){super(),this.numUint=t,this.numByteSlice=e,this.attribute_map={numUint:"num-uint",numByteSlice:"num-byte-slice"}}}class y extends s{constructor(t,e){super(),this.index=t,this.params=e,this.attribute_map={index:"index",params:"params"}}}class m extends s{constructor(t,e,i){super(),this.amount=t,this.assetId=e,this.isFrozen=i,this.attribute_map={amount:"amount",assetId:"asset-id",isFrozen:"is-frozen"}}}class v extends s{constructor({creator:t,decimals:e,total:i,clawback:r,defaultFrozen:n,freeze:s,manager:a,metadataHash:h,name:c,nameB64:l,reserve:u,unitName:d,unitNameB64:f,url:p,urlB64:g}){super(),this.creator=t,this.decimals=e,this.total=i,this.clawback=r,this.defaultFrozen=n,this.freeze=s,this.manager=a,this.metadataHash="string"==typeof h?new Uint8Array(o.from(h,"base64")):h,this.name=c,this.nameB64="string"==typeof l?new Uint8Array(o.from(l,"base64")):l,this.reserve=u,this.unitName=d,this.unitNameB64="string"==typeof f?new Uint8Array(o.from(f,"base64")):f,this.url=p,this.urlB64="string"==typeof g?new Uint8Array(o.from(g,"base64")):g,this.attribute_map={creator:"creator",decimals:"decimals",total:"total",clawback:"clawback",defaultFrozen:"default-frozen",freeze:"freeze",manager:"manager",metadataHash:"metadata-hash",name:"name",nameB64:"name-b64",reserve:"reserve",unitName:"unit-name",unitNameB64:"unit-name-b64",url:"url",urlB64:"url-b64"}}}class b extends s{constructor(t,e){super(),this.block=t,this.cert=e,this.attribute_map={block:"block",cert:"cert"}}}class w extends s{constructor({branch:t,buildNumber:e,channel:i,commitHash:r,major:n,minor:s}){super(),this.branch=t,this.buildNumber=e,this.channel=i,this.commitHash=r,this.major=n,this.minor=s,this.attribute_map={branch:"branch",buildNumber:"build_number",channel:"channel",commitHash:"commit_hash",major:"major",minor:"minor"}}}class _ extends s{constructor(t){super(),this.catchupMessage=t,this.attribute_map={catchupMessage:"catchup-message"}}}class x extends s{constructor(t){super(),this.catchupMessage=t,this.attribute_map={catchupMessage:"catchup-message"}}}class E extends s{constructor(t,e){super(),this.hash=t,this.result=e,this.attribute_map={hash:"hash",result:"result"}}}class S extends s{constructor({accounts:t,apps:e,latestTimestamp:i,protocolVersion:r,round:n,sources:s,txns:o}){super(),this.accounts=t,this.apps=e,this.latestTimestamp=i,this.protocolVersion=r,this.round=n,this.sources=s,this.txns=o,this.attribute_map={accounts:"accounts",apps:"apps",latestTimestamp:"latest-timestamp",protocolVersion:"protocol-version",round:"round",sources:"sources",txns:"txns"}}}class T extends s{constructor(t,e,i){super(),this.error=t,this.protocolVersion=e,this.txns=i,this.attribute_map={error:"error",protocolVersion:"protocol-version",txns:"txns"}}}class A extends s{constructor(t,e,i,r){super(),this.fieldName=t,this.source=e,this.txnIndex=i,this.appIndex=r,this.attribute_map={fieldName:"field-name",source:"source",txnIndex:"txn-index",appIndex:"app-index"}}}class C extends s{constructor({line:t,pc:e,stack:i,error:r,scratch:n}){super(),this.line=t,this.pc=e,this.stack=i,this.error=r,this.scratch=n,this.attribute_map={line:"line",pc:"pc",stack:"stack",error:"error",scratch:"scratch"}}}class k extends s{constructor({disassembly:t,appCallMessages:e,appCallTrace:i,cost:r,globalDelta:n,localDeltas:s,logicSigDisassembly:o,logicSigMessages:a,logicSigTrace:h,logs:c}){super(),this.disassembly=t,this.appCallMessages=e,this.appCallTrace=i,this.cost=r,this.globalDelta=n,this.localDeltas=s,this.logicSigDisassembly=o,this.logicSigMessages=a,this.logicSigTrace=h,this.logs=c,this.attribute_map={disassembly:"disassembly",appCallMessages:"app-call-messages",appCallTrace:"app-call-trace",cost:"cost",globalDelta:"global-delta",localDeltas:"local-deltas",logicSigDisassembly:"logic-sig-disassembly",logicSigMessages:"logic-sig-messages",logicSigTrace:"logic-sig-trace",logs:"logs"}}}class R extends s{constructor(t,e){super(),this.message=t,this.data=e,this.attribute_map={message:"message",data:"data"}}}class P extends s{constructor(t,e,i){super(),this.action=t,this.bytes=e,this.uint=i,this.attribute_map={action:"action",bytes:"bytes",uint:"uint"}}}class I extends s{constructor(t,e){super(),this.key=t,this.value=e,this.attribute_map={key:"key",value:"value"}}}class O extends s{constructor({catchupTime:t,lastRound:e,lastVersion:i,nextVersion:r,nextVersionRound:n,nextVersionSupported:s,stoppedAtUnsupportedRound:o,timeSinceLastRound:a,catchpoint:h,catchpointAcquiredBlocks:c,catchpointProcessedAccounts:l,catchpointTotalAccounts:u,catchpointTotalBlocks:d,catchpointVerifiedAccounts:f,lastCatchpoint:p}){super(),this.catchupTime=t,this.lastRound=e,this.lastVersion=i,this.nextVersion=r,this.nextVersionRound=n,this.nextVersionSupported=s,this.stoppedAtUnsupportedRound=o,this.timeSinceLastRound=a,this.catchpoint=h,this.catchpointAcquiredBlocks=c,this.catchpointProcessedAccounts=l,this.catchpointTotalAccounts=u,this.catchpointTotalBlocks=d,this.catchpointVerifiedAccounts=f,this.lastCatchpoint=p,this.attribute_map={catchupTime:"catchup-time",lastRound:"last-round",lastVersion:"last-version",nextVersion:"next-version",nextVersionRound:"next-version-round",nextVersionSupported:"next-version-supported",stoppedAtUnsupportedRound:"stopped-at-unsupported-round",timeSinceLastRound:"time-since-last-round",catchpoint:"catchpoint",catchpointAcquiredBlocks:"catchpoint-acquired-blocks",catchpointProcessedAccounts:"catchpoint-processed-accounts",catchpointTotalAccounts:"catchpoint-total-accounts",catchpointTotalBlocks:"catchpoint-total-blocks",catchpointVerifiedAccounts:"catchpoint-verified-accounts",lastCatchpoint:"last-catchpoint"}}}class M extends s{constructor({poolError:t,txn:e,applicationIndex:i,assetClosingAmount:r,assetIndex:n,closeRewards:s,closingAmount:o,confirmedRound:a,globalStateDelta:h,innerTxns:c,localStateDelta:l,logs:u,receiverRewards:d,senderRewards:f}){super(),this.poolError=t,this.txn=e,this.applicationIndex=i,this.assetClosingAmount=r,this.assetIndex=n,this.closeRewards=s,this.closingAmount=o,this.confirmedRound=a,this.globalStateDelta=h,this.innerTxns=c,this.localStateDelta=l,this.logs=u,this.receiverRewards=d,this.senderRewards=f,this.attribute_map={poolError:"pool-error",txn:"txn",applicationIndex:"application-index",assetClosingAmount:"asset-closing-amount",assetIndex:"asset-index",closeRewards:"close-rewards",closingAmount:"closing-amount",confirmedRound:"confirmed-round",globalStateDelta:"global-state-delta",innerTxns:"inner-txns",localStateDelta:"local-state-delta",logs:"logs",receiverRewards:"receiver-rewards",senderRewards:"sender-rewards"}}}class D extends s{constructor(t,e){super(),this.topTransactions=t,this.totalTransactions=e,this.attribute_map={topTransactions:"top-transactions",totalTransactions:"total-transactions"}}}class B extends s{constructor(t){super(),this.txid=t,this.attribute_map={txid:"txId"}}}class L extends s{constructor({idx:t,proof:e,stibhash:i,treedepth:r,hashtype:n}){super(),this.idx=t,this.proof="string"==typeof e?new Uint8Array(o.from(e,"base64")):e,this.stibhash="string"==typeof i?new Uint8Array(o.from(i,"base64")):i,this.treedepth=r,this.hashtype=n,this.attribute_map={idx:"idx",proof:"proof",stibhash:"stibhash",treedepth:"treedepth",hashtype:"hashtype"}}}class N extends s{constructor(t,e,i){super(),this.currentRound=t,this.onlineMoney=e,this.totalMoney=i,this.attribute_map={currentRound:"current_round",onlineMoney:"online-money",totalMoney:"total-money"}}}class U extends s{constructor(t,e){super(),this.key=t,this.value=e,this.attribute_map={key:"key",value:"value"}}}class F extends s{constructor(t,e,i){super(),this.type=t,this.bytes=e,this.uint=i,this.attribute_map={type:"type",bytes:"bytes",uint:"uint"}}}class z extends s{constructor({consensusVersion:t,fee:e,genesisHash:i,genesisId:r,lastRound:n,minFee:s}){super(),this.consensusVersion=t,this.fee=e,this.genesisHash="string"==typeof i?new Uint8Array(o.from(i,"base64")):i,this.genesisId=r,this.lastRound=n,this.minFee=s,this.attribute_map={consensusVersion:"consensus-version",fee:"fee",genesisHash:"genesis-hash",genesisId:"genesis-id",lastRound:"last-round",minFee:"min-fee"}}}class j extends s{constructor(t,e,i,r){super(),this.build=t,this.genesisHashB64="string"==typeof e?new Uint8Array(o.from(e,"base64")):e,this.genesisId=i,this.versions=r,this.attribute_map={build:"build",genesisHashB64:"genesis_hash_b64",genesisId:"genesis_id",versions:"versions"}}}},5180:(t,e,i)=>{"use strict";i.r(e),i.d(e,{setSendTransactionHeaders:()=>o,default:()=>h});var r=i(8680),n=i(413),s=i(2486).Buffer;function o(t={}){let e=t;return Object.keys(e).every((t=>"content-type"!==t.toLowerCase()))&&(e={...t},e["Content-Type"]="application/x-binary"),e}function a(t){return t&&void 0!==t.byteLength}class h extends r.Z{constructor(t,e){super(t);let i=e;if(Array.isArray(e)){if(!e.every(a))throw new TypeError("Array elements must be byte arrays");i=(0,n.concatArrays)(...e)}else if(!a(i))throw new TypeError("Argument must be byte array");this.txnBytesToPost=i}path(){return"/v2/transactions"}async do(t={}){const e=o(t);return(await this.c.post(this.path(),s.from(this.txnBytesToPost),e)).body}}},9582:(t,e,i)=>{"use strict";i.d(e,{Z:()=>T});var r=i(3480),n=i(8680);class s extends n.Z{path(){return"/health"}}class o extends n.Z{constructor(t,e,i){super(t,e),this.index=i,this.index=i}path(){return`/v2/assets/${this.index}/balances`}limit(t){return this.query.limit=t,this}currencyGreaterThan(t){return this.query["currency-greater-than"]=t,this}currencyLessThan(t){return this.query["currency-less-than"]=t,this}nextToken(t){return this.query.next=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}}var a=i(2486).Buffer;function h(t){return"string"==typeof t?t:a.from(t).toString("base64")}class c extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}/transactions`}notePrefix(t){return this.query["note-prefix"]=h(t),this}txType(t){return this.query["tx-type"]=t,this}sigType(t){return this.query["sig-type"]=t,this}txid(t){return this.query.txid=t,this}round(t){return this.query.round=t,this}minRound(t){return this.query["min-round"]=t,this}maxRound(t){return this.query["max-round"]=t,this}assetID(t){return this.query["asset-id"]=t,this}limit(t){return this.query.limit=t,this}beforeTime(t){return this.query["before-time"]=t,this}afterTime(t){return this.query["after-time"]=t,this}currencyGreaterThan(t){return this.query["currency-greater-than"]=t,this}currencyLessThan(t){return this.query["currency-less-than"]=t,this}nextToken(t){return this.query.next=t,this}rekeyTo(t){return this.query["rekey-to"]=t,this}}class l extends n.Z{constructor(t,e,i){super(t,e),this.index=i,this.index=i}path(){return`/v2/assets/${this.index}/transactions`}notePrefix(t){return this.query["note-prefix"]=h(t),this}txType(t){return this.query["tx-type"]=t,this}sigType(t){return this.query["sig-type"]=t,this}txid(t){return this.query.txid=t,this}round(t){return this.query.round=t,this}minRound(t){return this.query["min-round"]=t,this}maxRound(t){return this.query["max-round"]=t,this}assetID(t){return this.query["asset-id"]=t,this}limit(t){return this.query.limit=t,this}beforeTime(t){return this.query["before-time"]=t,this}afterTime(t){return this.query["after-time"]=t,this}currencyGreaterThan(t){return this.query["currency-greater-than"]=t,this}currencyLessThan(t){return this.query["currency-less-than"]=t,this}addressRole(t){return this.query["address-role"]=t,this}address(t){return this.query.address=t,this}excludeCloseTo(t){return this.query["exclude-close-to"]=t,this}nextToken(t){return this.query.next=t,this}rekeyTo(t){return this.query["rekey-to"]=t,this}}class u extends n.Z{constructor(t,e,i){super(t,e),this.round=i,this.round=i}path(){return`/v2/blocks/${this.round}`}}class d extends n.Z{constructor(t,e,i){super(t,e),this.txID=i,this.txID=i}path(){return`/v2/transactions/${this.txID}`}}class f extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}`}round(t){return this.query.round=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}exclude(t){return this.query.exclude=t,this}}class p extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}/assets`}limit(t){return this.query.limit=t,this}round(t){return this.query.round=t,this}nextToken(t){return this.query.next=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}assetId(t){return this.query["asset-id"]=t,this}}class g extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}/created-assets`}limit(t){return this.query.limit=t,this}round(t){return this.query.round=t,this}nextToken(t){return this.query.next=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}assetID(t){return this.query["asset-id"]=t,this}}class y extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}/apps-local-state`}limit(t){return this.query.limit=t,this}round(t){return this.query.round=t,this}nextToken(t){return this.query.next=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}applicationID(t){return this.query["application-id"]=t,this}}class m extends n.Z{constructor(t,e,i){super(t,e),this.account=i,this.account=i}path(){return`/v2/accounts/${this.account}/created-applications`}limit(t){return this.query.limit=t,this}round(t){return this.query.round=t,this}nextToken(t){return this.query.next=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}applicationID(t){return this.query["application-id"]=t,this}}class v extends n.Z{constructor(t,e,i){super(t,e),this.index=i,this.index=i}path(){return`/v2/assets/${this.index}`}includeAll(t=!0){return this.query["include-all"]=t,this}}class b extends n.Z{constructor(t,e,i){super(t,e),this.index=i,this.index=i}path(){return`/v2/applications/${this.index}`}includeAll(t=!0){return this.query["include-all"]=t,this}}class w extends n.Z{constructor(t,e,i){super(t,e),this.appID=i,this.appID=i}path(){return`/v2/applications/${this.appID}/logs`}limit(t){return this.query.limit=t,this}minRound(t){return this.query["min-round"]=t,this}maxRound(t){return this.query["max-round"]=t,this}nextToken(t){return this.query.next=t,this}sender(t){return this.query["sender-address"]=t,this}txid(t){return this.query.txid=t,this}}class _ extends n.Z{path(){return"/v2/accounts"}currencyGreaterThan(t){return this.query["currency-greater-than"]=t,this}currencyLessThan(t){return this.query["currency-less-than"]=t,this}limit(t){return this.query.limit=t,this}assetID(t){return this.query["asset-id"]=t,this}nextToken(t){return this.query.next=t,this}round(t){return this.query.round=t,this}authAddr(t){return this.query["auth-addr"]=t,this}applicationID(t){return this.query["application-id"]=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}exclude(t){return this.query.exclude=t,this}}class x extends n.Z{path(){return"/v2/transactions"}notePrefix(t){return this.query["note-prefix"]=h(t),this}txType(t){return this.query["tx-type"]=t,this}sigType(t){return this.query["sig-type"]=t,this}txid(t){return this.query.txid=t,this}round(t){return this.query.round=t,this}minRound(t){return this.query["min-round"]=t,this}maxRound(t){return this.query["max-round"]=t,this}assetID(t){return this.query["asset-id"]=t,this}limit(t){return this.query.limit=t,this}beforeTime(t){return this.query["before-time"]=t,this}afterTime(t){return this.query["after-time"]=t,this}currencyGreaterThan(t){return this.query["currency-greater-than"]=t,this}currencyLessThan(t){return this.query["currency-less-than"]=t,this}addressRole(t){return this.query["address-role"]=t,this}address(t){return this.query.address=t,this}excludeCloseTo(t){return this.query["exclude-close-to"]=t,this}nextToken(t){return this.query.next=t,this}rekeyTo(t){return this.query["rekey-to"]=t,this}applicationID(t){return this.query["application-id"]=t,this}}class E extends n.Z{path(){return"/v2/assets"}limit(t){return this.query.limit=t,this}creator(t){return this.query.creator=t,this}name(t){return this.query.name=t,this}unit(t){return this.query.unit=t,this}index(t){return this.query["asset-id"]=t,this}nextToken(t){return this.query.next=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}}class S extends n.Z{path(){return"/v2/applications"}index(t){return this.query["application-id"]=t,this}creator(t){return this.query.creator=t,this}nextToken(t){return this.query.next=t,this}limit(t){return this.query.limit=t,this}includeAll(t=!0){return this.query["include-all"]=t,this}}class T extends r.Z{constructor(t,e="http://127.0.0.1",i=8080,r={}){super("X-Indexer-API-Token",t,e,i,r)}makeHealthCheck(){return new s(this.c,this.intDecoding)}lookupAssetBalances(t){return new o(this.c,this.intDecoding,t)}lookupAssetTransactions(t){return new l(this.c,this.intDecoding,t)}lookupAccountTransactions(t){return new c(this.c,this.intDecoding,t)}lookupBlock(t){return new u(this.c,this.intDecoding,t)}lookupTransactionByID(t){return new d(this.c,this.intDecoding,t)}lookupAccountByID(t){return new f(this.c,this.intDecoding,t)}lookupAccountAssets(t){return new p(this.c,this.intDecoding,t)}lookupAccountCreatedAssets(t){return new g(this.c,this.intDecoding,t)}lookupAccountAppLocalStates(t){return new y(this.c,this.intDecoding,t)}lookupAccountCreatedApplications(t){return new m(this.c,this.intDecoding,t)}lookupAssetByID(t){return new v(this.c,this.intDecoding,t)}lookupApplications(t){return new b(this.c,this.intDecoding,t)}lookupApplicationLogs(t){return new w(this.c,this.intDecoding,t)}searchAccounts(){return new _(this.c,this.intDecoding)}searchForTransactions(){return new x(this.c,this.intDecoding)}searchForAssets(){return new E(this.c,this.intDecoding)}searchForApplications(){return new S(this.c,this.intDecoding)}}},8680:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(7197);class n{constructor(t,e){this.c=t,this.query={},this.intDecoding=e||r.Z.DEFAULT}prepare(t){return t}async do(t={}){const e={};"default"!==this.intDecoding&&(e.intDecoding=this.intDecoding);const i=await this.c.get(this.path(),this.query,t,e);return this.prepare(i.body)}setIntDecoding(t){if("default"!==t&&"safe"!==t&&"mixed"!==t&&"bigint"!==t)throw new Error(`Invalid method for int decoding: ${t}`);return this.intDecoding=t,this}}},3480:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(1113),n=i(7197);class s{constructor(t,e,i,s,o={}){if("function"==typeof e.get)this.c=new r.default(e);else{let n;n="string"==typeof e?function(t="",e){const i={};return i[e]=t,i}(e,t):e,this.c=new r.default(n,i,s,o)}this.intDecoding=n.Z.DEFAULT}setIntEncoding(t){this.intDecoding=t}getIntEncoding(){return this.intDecoding}}},3458:(t,e,i)=>{"use strict";i.d(e,{b:()=>d,A:()=>p});var r=i(7677),n=i(9417),s=i(1988),o=i(1063),a=i(5062),h=i(834),c=i(1624),l=i(2486).Buffer;const u=l.from([21,31,124,117]);var d;function f(t,e,i){if(null!=i&&t===i)return 0;const r=null==i?0:1;for(let i=0;i<e.length;i++)if(t===e[i])return i+r;return e.push(t),e.length-1+r}!function(t){t[t.BUILDING=0]="BUILDING",t[t.BUILT=1]="BUILT",t[t.SIGNED=2]="SIGNED",t[t.SUBMITTED=3]="SUBMITTED",t[t.COMMITTED=4]="COMMITTED"}(d||(d={}));class p{constructor(){this.status=d.BUILDING,this.transactions=[],this.methodCalls=new Map,this.signedTxns=[],this.txIDs=[]}getStatus(){return this.status}count(){return this.transactions.length}clone(){const t=new p;return t.transactions=this.transactions.map((({txn:t,signer:e})=>({txn:n.Transaction.from_obj_for_encoding({...t.get_obj_for_encoding(),grp:void 0}),signer:e}))),t.methodCalls=new Map(this.methodCalls),t}addTransaction(t){if(this.status!==d.BUILDING)throw new Error("Cannot add transactions when composer status is not BUILDING");if(this.transactions.length===p.MAX_GROUP_SIZE)throw new Error(`Adding an additional transaction exceeds the maximum atomic group size of ${p.MAX_GROUP_SIZE}`);if(t.txn.group&&t.txn.group.some((t=>0!==t)))throw new Error("Cannot add a transaction with nonzero group ID");this.transactions.push(t)}addMethodCall({appID:t,method:e,methodArgs:i,sender:n,suggestedParams:o,onComplete:a,approvalProgram:l,clearProgram:u,numGlobalInts:g,numGlobalByteSlices:y,numLocalInts:m,numLocalByteSlices:v,extraPages:b,note:w,lease:_,rekeyTo:x,signer:E}){if(this.status!==d.BUILDING)throw new Error("Cannot add transactions when composer status is not BUILDING");if(this.transactions.length+e.txnCount()>p.MAX_GROUP_SIZE)throw new Error(`Adding additional transactions exceeds the maximum atomic group size of ${p.MAX_GROUP_SIZE}`);if(0===t){if(null==l||null==u||null==g||null==y||null==m||null==v)throw new Error("One of the following required parameters for application creation is missing: approvalProgram, clearProgram, numGlobalInts, numGlobalByteSlices, numLocalInts, numLocalByteSlices")}else if(a===c.hq.UpdateApplicationOC){if(null==l||null==u)throw new Error("One of the following required parameters for OnApplicationComplete.UpdateApplicationOC is missing: approvalProgram, clearProgram");if(null!=g||null!=y||null!=m||null!=v||null!=b)throw new Error("One of the following application creation parameters were set on a non-creation call: numGlobalInts, numGlobalByteSlices, numLocalInts, numLocalByteSlices, extraPages")}else if(null!=l||null!=u||null!=g||null!=y||null!=m||null!=v||null!=b)throw new Error("One of the following application creation parameters were set on a non-creation call: approvalProgram, clearProgram, numGlobalInts, numGlobalByteSlices, numLocalInts, numLocalByteSlices, extraPages");if(null==i&&(i=[]),i.length!==e.args.length)throw new Error(`Incorrect number of method arguments. Expected ${e.args.length}, got ${i.length}`);let S=[],T=[];const A=[],C=[],k=[],R=new Map;for(let t=0;t<i.length;t++){let n=e.args[t].type;const s=i[t];if((0,r.AE)(n)){if(!(0,h.Xw)(s)||!(0,r.vJ)(n,s.txn))throw new Error(`Expected ${n} transaction for argument at index ${t}`);if(s.txn.group&&s.txn.group.some((t=>0!==t)))throw new Error("Cannot add a transaction with nonzero group ID");A.push(s)}else{if((0,h.Xw)(s))throw new Error(`Expected non-transaction value for argument at index ${t}`);if((0,r.o5)(n)&&(R.set(C.length,S.length),C.push(n),k.push(s),n=new r.Pu(8)),"string"==typeof n)throw new Error(`Unknown ABI type: ${n}`);S.push(n),T.push(s)}}const P=[],I=[],O=[],M=[];for(let e=0;e<C.length;e++){const i=C[e],s=k[e];let o=0;switch(i){case r.UV.account:{const t=new r.JQ;o=f(t.decode(t.encode(s)),I,n);break}case r.UV.application:{const e=new r.Pu(64),i=e.decode(e.encode(s));if(i>Number.MAX_SAFE_INTEGER)throw new Error(`Expected safe integer for application value, got ${i}`);o=f(Number(i),O,t);break}case r.UV.asset:{const t=new r.Pu(64),e=t.decode(t.encode(s));if(e>Number.MAX_SAFE_INTEGER)throw new Error(`Expected safe integer for asset value, got ${e}`);o=f(Number(e),M);break}default:throw new Error(`Unknown reference type: ${i}`)}P.push(o)}for(let t=0;t<P.length;t++)T[R.get(t)]=P[t];if(S.length>15){const t=S.slice(14),e=T.slice(14);S=S.slice(0,14),T=T.slice(0,14),S.push(new r.w1(t)),T.push(e)}const D=[e.getSelector()];for(let t=0;t<S.length;t++)D.push(S[t].encode(T[t]));const B={txn:(0,s.makeApplicationCallTxnFromObject)({from:n,appIndex:t,appArgs:D,accounts:I,foreignApps:O,foreignAssets:M,onComplete:null==a?c.hq.NoOpOC:a,approvalProgram:l,clearProgram:u,numGlobalInts:g,numGlobalByteSlices:y,numLocalInts:m,numLocalByteSlices:v,extraPages:b,lease:_,note:w,rekeyTo:x,suggestedParams:o}),signer:E};this.transactions.push(...A,B),this.methodCalls.set(this.transactions.length-1,e)}buildGroup(){if(this.status===d.BUILDING){if(0===this.transactions.length)throw new Error("Cannot build a group with 0 transactions");this.transactions.length>1&&(0,o.assignGroupID)(this.transactions.map((t=>t.txn))),this.status=d.BUILT}return this.transactions}async gatherSignatures(){if(this.status>=d.SIGNED)return this.signedTxns;const t=this.buildGroup(),e=t.map((t=>t.txn)),i=new Map;for(let e=0;e<t.length;e++){const{signer:r}=t[e];i.has(r)||i.set(r,[]),i.get(r).push(e)}const r=Array.from(i),s=await Promise.all(r.map((([t,i])=>t(e,i)))),o=t.map((()=>null));for(let t=0;t<r.length;t++){const e=r[t][1],i=s[t];for(let t=0;t<e.length;t++)o[e[t]]=i[t]}if(!o.every((t=>null!=t)))throw new Error(`Missing signatures. Got ${o}`);const a=o.map(((t,e)=>{try{return(0,n.decodeSignedTransaction)(t).txn.txID()}catch(t){throw new Error(`Cannot decode signed transaction at index ${e}. ${t}`)}}));return this.signedTxns=o,this.txIDs=a,this.status=d.SIGNED,o}async submit(t){if(this.status>d.SUBMITTED)throw new Error("Transaction group cannot be resubmitted");const e=await this.gatherSignatures();return await t.sendRawTransaction(e).do(),this.status=d.SUBMITTED,this.txIDs}async execute(t,e){if(this.status===d.COMMITTED)throw new Error("Transaction group has already been executed successfully");const i=await this.submit(t);this.status=d.SUBMITTED;const r=this.transactions.findIndex(((t,e)=>this.methodCalls.has(e))),n=-1===r?0:r,s=await(0,a.K)(t,i[n],e);this.status=d.COMMITTED;const o=s["confirmed-round"],h=[];for(const[e,n]of this.methodCalls){const o=i[e],a={txID:o,rawReturnValue:new Uint8Array};try{const i=e===r?s:await t.pendingTransactionInformation(o).do();if(a.txInfo=i,"void"!==n.returns.type){const t=i.logs||[];if(0===t.length)throw new Error("App call transaction did not log a return value");const e=l.from(t[t.length-1],"base64");if(e.byteLength<4||!e.slice(0,4).equals(u))throw new Error("App call transaction did not log a return value");a.rawReturnValue=new Uint8Array(e.slice(4)),a.returnValue=n.returns.type.decode(a.rawReturnValue)}}catch(t){a.decodeError=t}h.push(a)}return{confirmedRound:o,txIDs:i,methodResults:h}}}p.MAX_GROUP_SIZE=16},9070:(t,e,i)=>{"use strict";i.d(e,{rD:()=>n,_:()=>s,HN:()=>o});const r=1e6,n="Microalgos should be positive and less than 2^53 - 1.";function s(t){if(t<0||!Number.isSafeInteger(t))throw new Error(n);return t/r}function o(t){const e=t*r;return Math.round(e)}},4383:(t,e,i)=>{"use strict";i.d(e,{P:()=>h,x:()=>y});var r=i(227),n=i(1824),s=i(7116),o=i(2486).Buffer;function a(t){return t.params["approval-program"]=o.from(t.params["approval-program"].toString(),"base64"),t.params["clear-state-program"]=o.from(t.params["clear-state-program"].toString(),"base64"),t}async function h({client:t,txns:e,protocolVersion:i,latestTimestamp:o,round:h,sources:c}){const l=[],u=[],d=[],f=[],p=[];for(const t of e)t.txn.type===n.i.appl&&(p.push((0,s.encodeAddress)(t.txn.from.publicKey)),t.txn.appAccounts&&p.push(...t.txn.appAccounts.map((t=>(0,s.encodeAddress)(t.publicKey)))),t.txn.appForeignApps&&(d.push(...t.txn.appForeignApps),p.push(...t.txn.appForeignApps.map((t=>(0,s.getApplicationAddress)(t))))),t.txn.appForeignAssets&&f.push(...t.txn.appForeignAssets),void 0===t.txn.appIndex||0===t.txn.appIndex?l.push(new r.Application(1380011588,new r.ApplicationParams({creator:(0,s.encodeAddress)(t.txn.from.publicKey),approvalProgram:t.txn.appApprovalProgram,clearStateProgram:t.txn.appClearProgram,localStateSchema:new r.ApplicationStateSchema(t.txn.appLocalInts,t.txn.appLocalByteSlices),globalStateSchema:new r.ApplicationStateSchema(t.txn.appGlobalInts,t.txn.appGlobalByteSlices)}))):(d.push(t.txn.appIndex),p.push((0,s.getApplicationAddress)(t.txn.appIndex))));const g=[];for(const e of[...new Set(f)])g.push(t.getAssetByID(e).do().then((t=>{p.push(t.params.creator)})));await Promise.all(g);const y=[];for(const e of[...new Set(d)])y.push(t.getApplicationByID(e).do().then((t=>{const e=a(t);l.push(e),p.push(e.params.creator)})));await Promise.all(y);const m=[];for(const e of[...new Set(p)])m.push(t.accountInformation(e).do().then((t=>{"created-apps"in t&&(t["created-apps"]=t["created-apps"].map((t=>a(t)))),u.push(t)})));return await Promise.all(m),new r.DryrunRequest({txns:e.map((t=>({...t,txn:t.txn.get_obj_for_encoding()}))),accounts:u,apps:l,latestTimestamp:o,round:h,protocolVersion:i,sources:c})}class c{constructor(t){this.type=0,this.bytes="",this.uint=0,this.type=t.type,this.bytes=t.bytes,this.uint=t.uint}toString(){return 1===this.type?`0x${o.from(this.bytes,"base64").toString("hex")}`:this.uint.toString()}}class l{constructor(t){this.error="",this.line=0,this.pc=0,this.scratch=[],this.stack=[],this.error=void 0===t.error?"":t.error,this.line=t.line,this.pc=t.pc,this.scratch=t.scratch,this.stack=t.stack.map((t=>new c(t)))}}class u{constructor(t){this.trace=[],void 0!==t&&(this.trace=t.map((t=>new l(t))))}}function d(t,e){return t.length>e&&e>0?`${t.slice(0,e)}...`:t}function f(t,e){if(0===e.length)return"";let i=null;for(let r=0;r<e.length;r++)(r>t.length||JSON.stringify(t[r])!==JSON.stringify(e[r]))&&(i=r);if(null==i)return"";const r=e[i];return r.bytes.length>0?`${i} = 0x${o.from(r.bytes,"base64").toString("hex")}`:`${i} = ${r.uint.toString()}`}function p(t,e){return`[${(e?t.reverse():t).map((t=>{switch(t.type){case 1:return`0x${o.from(t.bytes,"base64").toString("hex")}`;case 2:return`${t.uint.toString()}`;default:return""}})).join(", ")}]`}class g{constructor(t){this.disassembly=[],this.appCallMessages=[],this.localDeltas=[],this.globalDelta=[],this.cost=0,this.logicSigMessages=[],this.logicSigDisassembly=[],this.logs=[],this.appCallTrace=void 0,this.logicSigTrace=void 0,this.required=["disassembly"],this.optionals=["app-call-messages","local-deltas","global-delta","cost","logic-sig-messages","logic-sig-disassembly","logs"],this.traces=["app-call-trace","logic-sig-trace"],this.disassembly=t.disassembly,this.appCallMessages=t["app-call-messages"],this.localDeltas=t["local-deltas"],this.globalDelta=t["global-delta"],this.cost=t.cost,this.logicSigMessages=t["logic-sig-messages"],this.logicSigDisassembly=t["logic-sig-disassembly"],this.logs=t.logs,this.appCallTrace=new u(t["app-call-trace"]),this.logicSigTrace=new u(t["logic-sig-trace"])}appCallRejected(){return void 0!==this.appCallMessages&&this.appCallMessages.includes("REJECT")}logicSigRejected(){return void 0!==this.logicSigMessages&&this.logicSigMessages.includes("REJECT")}static trace(t,e,i){let r=30;void 0===i.maxValueWidth&&(r=i.maxValueWidth);const n=[["pc#","ln#","source","scratch","stack"]];for(let s=0;s<t.trace.length;s++){const{line:o,error:a,pc:h,scratch:c,stack:l}=t.trace[s],u=void 0!==c?c:[],g=s>0&&void 0!==t.trace[s-1].scratch?t.trace[s-1].scratch:[],y=""===a?e[o]:`!! ${a} !!`;n.push([h.toString().padEnd(3," "),o.toString().padEnd(3," "),d(y,r),d(f(g,u),r),d(p(l,i.topOfStackFirst),r)])}const s=n.reduce(((t,e)=>{const i=new Array(n[0].length).fill(0);for(let r=0;r<t.length;r++)i[r]=e[r].length>t[r]?e[r].length:t[r];return i}),new Array(n[0].length).fill(0));return`${n.map((t=>t.map(((t,e)=>t.padEnd(s[e]+1," "))).join("|").trim())).join("\n")}\n`}appTrace(t){if(void 0===this.appCallTrace||!this.disassembly)return"";let e=t;return void 0===t&&(e={maxValueWidth:30,topOfStackFirst:!1}),g.trace(this.appCallTrace,this.disassembly,e)}lsigTrace(t){if(void 0===this.logicSigTrace||void 0===this.logicSigDisassembly)return"";let e=t;return void 0===t&&(e={maxValueWidth:30,topOfStackFirst:!0}),g.trace(this.logicSigTrace,this.logicSigDisassembly,e)}}class y{constructor(t){this.error="",this.protocolVersion="",this.txns=[],this.error=t.error,this.protocolVersion=t["protocol-version"],this.txns=t.txns.map((t=>new g(t)))}}},7116:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ALGORAND_ZERO_ADDRESS_STRING:()=>c,MALFORMED_ADDRESS_ERROR_MSG:()=>d,CHECKSUM_ADDRESS_ERROR_MSG:()=>f,INVALID_MSIG_VERSION_ERROR_MSG:()=>p,INVALID_MSIG_THRESHOLD_ERROR_MSG:()=>g,INVALID_MSIG_PK_ERROR_MSG:()=>y,UNEXPECTED_PK_LEN_ERROR_MSG:()=>m,decodeAddress:()=>v,isValidAddress:()=>b,encodeAddress:()=>w,fromMultisigPreImg:()=>_,fromMultisigPreImgAddrs:()=>x,getApplicationAddress:()=>E});var r=i(7267),n=i.n(r),s=i(9404),o=i(413),a=i(6963),h=i(2486).Buffer;const c="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5HFKQ",l=new Uint8Array([77,117,108,116,105,115,105,103,65,100,100,114]),u=h.from("appID"),d="address seems to be malformed",f="wrong checksum for address",p="invalid multisig version",g="bad multisig threshold",y="bad multisig public key - wrong length",m="nacl public key length is not 32 bytes";function v(t){if("string"!=typeof t||58!==t.length)throw new Error(d);const e=n().decode.asBytes(t.toString());if(36!==e.length)throw new Error(d);const i=new Uint8Array(e.slice(0,32)),r=new Uint8Array(e.slice(s.PUBLIC_KEY_LENGTH,36)),a=s.genericHash(i).slice(s.HASH_BYTES_LENGTH-4,s.HASH_BYTES_LENGTH);if(!o.arrayEqual(a,r))throw new Error(f);return{publicKey:i,checksum:r}}function b(t){try{v(t)}catch(t){return!1}return!0}function w(t){const e=s.genericHash(t).slice(s.PUBLIC_KEY_LENGTH-4,s.PUBLIC_KEY_LENGTH);return n().encode(o.concatArrays(t,e)).toString().slice(0,58)}function _({version:t,threshold:e,pks:i}){if(1!==t||t>255||t<0)throw new Error(p);if(0===e||0===i.length||e>i.length||e>255)throw new Error(g);if(32!==s.PUBLIC_KEY_LENGTH)throw new Error(m);const r=new Uint8Array(l.length+2+32*i.length);r.set(l,0),r.set([t],l.length),r.set([e],l.length+1);for(let t=0;t<i.length;t++){if(32!==i[t].length)throw new Error(y);r.set(i[t],l.length+2+32*t)}return new Uint8Array(s.genericHash(r))}function x({version:t,threshold:e,addrs:i}){return w(_({version:t,threshold:e,pks:i.map((t=>v(t).publicKey))}))}function E(t){const e=o.concatArrays(u,(0,a.T)(t)),i=s.genericHash(e);return w(new Uint8Array(i))}},8922:(t,e,i)=>{"use strict";i.d(e,{j:()=>n,v:()=>s});var r=i(2486).Buffer;function n(t,e){let i=t.toString(16);i.length!==2*e&&(i=i.padStart(2*e,"0"));const r=new Uint8Array(i.length/2);for(let t=0,e=0;t<i.length/2;t++,e+=2)r[t]=parseInt(i.slice(e,e+2),16);return r}function s(t){let e=BigInt(0);const i=r.from(t);for(let r=0;r<t.length;r++)e=BigInt(Number(i.readUIntBE(r,1)))+e*BigInt(256);return e}},3033:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ERROR_CONTAINS_EMPTY_STRING:()=>n,encode:()=>s,decode:()=>o});var r=i(5406);const n="The object contains empty or 0 values. First empty or 0 value encountered during encoding: ";function s(t){const e=function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&(!t[e]||0===t[e].length))return{containsEmpty:!0,firstEmptyKey:e};return{containsEmpty:!1,firstEmptyKey:void 0}}(t);if(e.containsEmpty)throw new Error(n+e.firstEmptyKey);return r.encode(t,{sortKeys:!0})}function o(t){return r.decode(t)}},6963:(t,e,i)=>{"use strict";i.d(e,{T:()=>n,u:()=>s});var r=i(2486).Buffer;function n(t){if("bigint"!=typeof t&&!Number.isInteger(t)||t<0||t>BigInt("0xffffffffffffffff"))throw new Error("Input is not a 64-bit unsigned integer");const e=r.allocUnsafe(8);return e.writeBigUInt64BE(BigInt(t)),new Uint8Array(e)}function s(t,e="safe"){if("safe"!==e&&"mixed"!==e&&"bigint"!==e)throw new Error(`Unknown decodingMode option: ${e}`);if(0===t.byteLength||t.byteLength>8)throw new Error(`Data has unacceptable length. Expected length is between 1 and 8, got ${t.byteLength}`);const i=r.allocUnsafe(8-t.byteLength);i.fill(0);const n=r.concat([i,r.from(t)]).readBigUInt64BE(),s=n>Number.MAX_SAFE_INTEGER;if("safe"===e){if(s)throw new Error(`Integer exceeds maximum safe integer: ${n.toString()}. Try decoding with "mixed" or "safe" decodingMode.`);return Number(n)}return"mixed"!==e||s?n:Number(n)}},1063:(t,e,i)=>{"use strict";i.r(e),i.d(e,{TxGroup:()=>c,computeGroupID:()=>l,assignGroupID:()=>u,default:()=>d});var r=i(9417),n=i(9404),s=i(3033),o=i(7116),a=i(413),h=i(2486).Buffer;class c{constructor(t){if(this.name="Transaction group",this.tag=h.from("TG"),t.length>16){const e=`${t.length.toString()} transactions grouped together but max group size is ${16..toString()}`;throw Error(e)}this.txGroupHashes=t}get_obj_for_encoding(){return{txlist:this.txGroupHashes}}static from_obj_for_encoding(t){const e=Object.create(this.prototype);e.name="Transaction group",e.tag=h.from("TG"),e.txGroupHashes=[];for(const i of t.txlist)e.txGroupHashes.push(h.from(i));return e}toByte(){return s.encode(this.get_obj_for_encoding())}}function l(t){const e=[];for(const i of t){const t=r.instantiateTxnIfNeeded(i);e.push(t.rawTxID())}const i=new c(e),s=i.toByte(),o=h.from(a.concatArrays(i.tag,s)),l=n.genericHash(o);return h.from(l)}function u(t,e){const i=l(t),n=[];for(const s of t){const t=r.instantiateTxnIfNeeded(s);e&&o.encodeAddress(t.from.publicKey)!==e||(t.group=i,n.push(t))}return n}const d=c},5583:(t,e,i)=>{"use strict";i.r(e),i.d(e,{checkByteConstBlock:()=>f,checkIntConstBlock:()=>d,checkProgram:()=>u,checkPushByteOp:()=>g,checkPushIntOp:()=>p,langspecEvalMaxVersion:()=>y,langspecLogicSigVersion:()=>m,parseUvarint:()=>s,readProgram:()=>l});const r=JSON.parse('{"z_":6,"BV":5,"AP":[{"Opcode":0,"Name":"err","Cost":1,"Size":1,"Doc":"Fail immediately.","Groups":["Flow Control"]},{"Opcode":1,"Name":"sha256","Args":"B","Returns":"B","Cost":35,"Size":1,"Doc":"SHA256 hash of value A, yields [32]byte","Groups":["Arithmetic"]},{"Opcode":2,"Name":"keccak256","Args":"B","Returns":"B","Cost":130,"Size":1,"Doc":"Keccak256 hash of value A, yields [32]byte","Groups":["Arithmetic"]},{"Opcode":3,"Name":"sha512_256","Args":"B","Returns":"B","Cost":45,"Size":1,"Doc":"SHA512_256 hash of value A, yields [32]byte","Groups":["Arithmetic"]},{"Opcode":4,"Name":"ed25519verify","Args":"BBB","Returns":"U","Cost":1900,"Size":1,"Doc":"for (data A, signature B, pubkey C) verify the signature of (\\"ProgData\\" || program_hash || data) against the pubkey => {0 or 1}","DocExtra":"The 32 byte public key is the last element on the stack, preceded by the 64 byte signature at the second-to-last element on the stack, preceded by the data which was signed at the third-to-last element on the stack.","Groups":["Arithmetic"]},{"Opcode":5,"Name":"ecdsa_verify","Args":"BBBBB","Returns":"U","Cost":1700,"Size":2,"Doc":"for (data A, signature B, C and pubkey D, E) verify the signature of the data against the pubkey => {0 or 1}","DocExtra":"The 32 byte Y-component of a public key is the last element on the stack, preceded by X-component of a pubkey, preceded by S and R components of a signature, preceded by the data that is fifth element on the stack. All values are big-endian encoded. The signed data must be 32 bytes long, and signatures in lower-S form are only accepted.","ImmediateNote":"{uint8 curve index}","Groups":["Arithmetic"]},{"Opcode":6,"Name":"ecdsa_pk_decompress","Args":"B","Returns":"BB","Cost":650,"Size":2,"Doc":"decompress pubkey A into components X, Y","DocExtra":"The 33 byte public key in a compressed form to be decompressed into X and Y (top) components. All values are big-endian encoded.","ImmediateNote":"{uint8 curve index}","Groups":["Arithmetic"]},{"Opcode":7,"Name":"ecdsa_pk_recover","Args":"BUBB","Returns":"BB","Cost":2000,"Size":2,"Doc":"for (data A, recovery id B, signature C, D) recover a public key","DocExtra":"S (top) and R elements of a signature, recovery id and data (bottom) are expected on the stack and used to deriver a public key. All values are big-endian encoded. The signed data must be 32 bytes long.","ImmediateNote":"{uint8 curve index}","Groups":["Arithmetic"]},{"Opcode":8,"Name":"+","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A plus B. Fail on overflow.","DocExtra":"Overflow is an error condition which halts execution and fails the transaction. Full precision is available from `addw`.","Groups":["Arithmetic"]},{"Opcode":9,"Name":"-","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A minus B. Fail if B > A.","Groups":["Arithmetic"]},{"Opcode":10,"Name":"/","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A divided by B (truncated division). Fail if B == 0.","DocExtra":"`divmodw` is available to divide the two-element values produced by `mulw` and `addw`.","Groups":["Arithmetic"]},{"Opcode":11,"Name":"*","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A times B. Fail on overflow.","DocExtra":"Overflow is an error condition which halts execution and fails the transaction. Full precision is available from `mulw`.","Groups":["Arithmetic"]},{"Opcode":12,"Name":"<","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A less than B => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":13,"Name":">","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A greater than B => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":14,"Name":"<=","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A less than or equal to B => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":15,"Name":">=","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A greater than or equal to B => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":16,"Name":"&&","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A is not zero and B is not zero => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":17,"Name":"||","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A is not zero or B is not zero => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":18,"Name":"==","Args":"..","Returns":"U","Cost":1,"Size":1,"Doc":"A is equal to B => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":19,"Name":"!=","Args":"..","Returns":"U","Cost":1,"Size":1,"Doc":"A is not equal to B => {0 or 1}","Groups":["Arithmetic"]},{"Opcode":20,"Name":"!","Args":"U","Returns":"U","Cost":1,"Size":1,"Doc":"A == 0 yields 1; else 0","Groups":["Arithmetic"]},{"Opcode":21,"Name":"len","Args":"B","Returns":"U","Cost":1,"Size":1,"Doc":"yields length of byte value A","Groups":["Arithmetic"]},{"Opcode":22,"Name":"itob","Args":"U","Returns":"B","Cost":1,"Size":1,"Doc":"converts uint64 A to big endian bytes","Groups":["Arithmetic"]},{"Opcode":23,"Name":"btoi","Args":"B","Returns":"U","Cost":1,"Size":1,"Doc":"converts bytes A as big endian to uint64","DocExtra":"`btoi` fails if the input is longer than 8 bytes.","Groups":["Arithmetic"]},{"Opcode":24,"Name":"%","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A modulo B. Fail if B == 0.","Groups":["Arithmetic"]},{"Opcode":25,"Name":"|","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A bitwise-or B","Groups":["Arithmetic"]},{"Opcode":26,"Name":"&","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A bitwise-and B","Groups":["Arithmetic"]},{"Opcode":27,"Name":"^","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A bitwise-xor B","Groups":["Arithmetic"]},{"Opcode":28,"Name":"~","Args":"U","Returns":"U","Cost":1,"Size":1,"Doc":"bitwise invert value A","Groups":["Arithmetic"]},{"Opcode":29,"Name":"mulw","Args":"UU","Returns":"UU","Cost":1,"Size":1,"Doc":"A times B as a 128-bit result in two uint64s. X is the high 64 bits, Y is the low","Groups":["Arithmetic"]},{"Opcode":30,"Name":"addw","Args":"UU","Returns":"UU","Cost":1,"Size":1,"Doc":"A plus B as a 128-bit result. X is the carry-bit, Y is the low-order 64 bits.","Groups":["Arithmetic"]},{"Opcode":31,"Name":"divmodw","Args":"UUUU","Returns":"UUUU","Cost":20,"Size":1,"Doc":"W,X = (A,B / C,D); Y,Z = (A,B modulo C,D)","DocExtra":"The notation J,K indicates that two uint64 values J and K are interpreted as a uint128 value, with J as the high uint64 and K the low.","Groups":["Arithmetic"]},{"Opcode":32,"Name":"intcblock","Cost":1,"Size":0,"Doc":"prepare block of uint64 constants for use by intc","DocExtra":"`intcblock` loads following program bytes into an array of integer constants in the evaluator. These integer constants can be referred to by `intc` and `intc_*` which will push the value onto the stack. Subsequent calls to `intcblock` reset and replace the integer constants available to the script.","ImmediateNote":"{varuint length} [{varuint value}, ...]","Groups":["Loading Values"]},{"Opcode":33,"Name":"intc","Returns":"U","Cost":1,"Size":2,"Doc":"Ith constant from intcblock","ImmediateNote":"{uint8 int constant index}","Groups":["Loading Values"]},{"Opcode":34,"Name":"intc_0","Returns":"U","Cost":1,"Size":1,"Doc":"constant 0 from intcblock","Groups":["Loading Values"]},{"Opcode":35,"Name":"intc_1","Returns":"U","Cost":1,"Size":1,"Doc":"constant 1 from intcblock","Groups":["Loading Values"]},{"Opcode":36,"Name":"intc_2","Returns":"U","Cost":1,"Size":1,"Doc":"constant 2 from intcblock","Groups":["Loading Values"]},{"Opcode":37,"Name":"intc_3","Returns":"U","Cost":1,"Size":1,"Doc":"constant 3 from intcblock","Groups":["Loading Values"]},{"Opcode":38,"Name":"bytecblock","Cost":1,"Size":0,"Doc":"prepare block of byte-array constants for use by bytec","DocExtra":"`bytecblock` loads the following program bytes into an array of byte-array constants in the evaluator. These constants can be referred to by `bytec` and `bytec_*` which will push the value onto the stack. Subsequent calls to `bytecblock` reset and replace the bytes constants available to the script.","ImmediateNote":"{varuint length} [({varuint value length} bytes), ...]","Groups":["Loading Values"]},{"Opcode":39,"Name":"bytec","Returns":"B","Cost":1,"Size":2,"Doc":"Ith constant from bytecblock","ImmediateNote":"{uint8 byte constant index}","Groups":["Loading Values"]},{"Opcode":40,"Name":"bytec_0","Returns":"B","Cost":1,"Size":1,"Doc":"constant 0 from bytecblock","Groups":["Loading Values"]},{"Opcode":41,"Name":"bytec_1","Returns":"B","Cost":1,"Size":1,"Doc":"constant 1 from bytecblock","Groups":["Loading Values"]},{"Opcode":42,"Name":"bytec_2","Returns":"B","Cost":1,"Size":1,"Doc":"constant 2 from bytecblock","Groups":["Loading Values"]},{"Opcode":43,"Name":"bytec_3","Returns":"B","Cost":1,"Size":1,"Doc":"constant 3 from bytecblock","Groups":["Loading Values"]},{"Opcode":44,"Name":"arg","Returns":"B","Cost":1,"Size":2,"Doc":"Nth LogicSig argument","ImmediateNote":"{uint8 arg index N}","Groups":["Loading Values"]},{"Opcode":45,"Name":"arg_0","Returns":"B","Cost":1,"Size":1,"Doc":"LogicSig argument 0","Groups":["Loading Values"]},{"Opcode":46,"Name":"arg_1","Returns":"B","Cost":1,"Size":1,"Doc":"LogicSig argument 1","Groups":["Loading Values"]},{"Opcode":47,"Name":"arg_2","Returns":"B","Cost":1,"Size":1,"Doc":"LogicSig argument 2","Groups":["Loading Values"]},{"Opcode":48,"Name":"arg_3","Returns":"B","Cost":1,"Size":1,"Doc":"LogicSig argument 3","Groups":["Loading Values"]},{"Opcode":49,"Name":"txn","Returns":".","Cost":1,"Size":2,"ArgEnum":["Sender","Fee","FirstValid","FirstValidTime","LastValid","Note","Lease","Receiver","Amount","CloseRemainderTo","VotePK","SelectionPK","VoteFirst","VoteLast","VoteKeyDilution","Type","TypeEnum","XferAsset","AssetAmount","AssetSender","AssetReceiver","AssetCloseTo","GroupIndex","TxID","ApplicationID","OnCompletion","ApplicationArgs","NumAppArgs","Accounts","NumAccounts","ApprovalProgram","ClearStateProgram","RekeyTo","ConfigAsset","ConfigAssetTotal","ConfigAssetDecimals","ConfigAssetDefaultFrozen","ConfigAssetUnitName","ConfigAssetName","ConfigAssetURL","ConfigAssetMetadataHash","ConfigAssetManager","ConfigAssetReserve","ConfigAssetFreeze","ConfigAssetClawback","FreezeAsset","FreezeAssetAccount","FreezeAssetFrozen","Assets","NumAssets","Applications","NumApplications","GlobalNumUint","GlobalNumByteSlice","LocalNumUint","LocalNumByteSlice","ExtraProgramPages","Nonparticipation","Logs","NumLogs","CreatedAssetID","CreatedApplicationID","LastLog","StateProofPK"],"ArgEnumTypes":"BUUUUBBBUBBBUUUBUUUBBBUBUUBUBUBBBUUUUBBBBBBBBUBUUUUUUUUUUUBUUUBB","Doc":"field F of current transaction","DocExtra":"FirstValidTime causes the program to fail. The field is reserved for future use.","ImmediateNote":"{uint8 transaction field index}","Groups":["Loading Values"]},{"Opcode":50,"Name":"global","Returns":".","Cost":1,"Size":2,"Doc":"global field F","ImmediateNote":"{uint8 global field index}","Groups":["Loading Values"]},{"Opcode":51,"Name":"gtxn","Returns":".","Cost":1,"Size":3,"ArgEnum":["Sender","Fee","FirstValid","FirstValidTime","LastValid","Note","Lease","Receiver","Amount","CloseRemainderTo","VotePK","SelectionPK","VoteFirst","VoteLast","VoteKeyDilution","Type","TypeEnum","XferAsset","AssetAmount","AssetSender","AssetReceiver","AssetCloseTo","GroupIndex","TxID","ApplicationID","OnCompletion","ApplicationArgs","NumAppArgs","Accounts","NumAccounts","ApprovalProgram","ClearStateProgram","RekeyTo","ConfigAsset","ConfigAssetTotal","ConfigAssetDecimals","ConfigAssetDefaultFrozen","ConfigAssetUnitName","ConfigAssetName","ConfigAssetURL","ConfigAssetMetadataHash","ConfigAssetManager","ConfigAssetReserve","ConfigAssetFreeze","ConfigAssetClawback","FreezeAsset","FreezeAssetAccount","FreezeAssetFrozen","Assets","NumAssets","Applications","NumApplications","GlobalNumUint","GlobalNumByteSlice","LocalNumUint","LocalNumByteSlice","ExtraProgramPages","Nonparticipation","Logs","NumLogs","CreatedAssetID","CreatedApplicationID","LastLog","StateProofPK"],"ArgEnumTypes":"BUUUUBBBUBBBUUUBUUUBBBUBUUBUBUBBBUUUUBBBBBBBBUBUUUUUUUUUUUBUUUBB","Doc":"field F of the Tth transaction in the current group","DocExtra":"for notes on transaction fields available, see `txn`. If this transaction is _i_ in the group, `gtxn i field` is equivalent to `txn field`.","ImmediateNote":"{uint8 transaction group index} {uint8 transaction field index}","Groups":["Loading Values"]},{"Opcode":52,"Name":"load","Returns":".","Cost":1,"Size":2,"Doc":"Ith scratch space value. All scratch spaces are 0 at program start.","ImmediateNote":"{uint8 position in scratch space to load from}","Groups":["Loading Values"]},{"Opcode":53,"Name":"store","Args":".","Cost":1,"Size":2,"Doc":"store A to the Ith scratch space","ImmediateNote":"{uint8 position in scratch space to store to}","Groups":["Loading Values"]},{"Opcode":54,"Name":"txna","Returns":".","Cost":1,"Size":3,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ith value of the array field F of the current transaction","ImmediateNote":"{uint8 transaction field index} {uint8 transaction field array index}","Groups":["Loading Values"]},{"Opcode":55,"Name":"gtxna","Returns":".","Cost":1,"Size":4,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ith value of the array field F from the Tth transaction in the current group","ImmediateNote":"{uint8 transaction group index} {uint8 transaction field index} {uint8 transaction field array index}","Groups":["Loading Values"]},{"Opcode":56,"Name":"gtxns","Args":"U","Returns":".","Cost":1,"Size":2,"ArgEnum":["Sender","Fee","FirstValid","FirstValidTime","LastValid","Note","Lease","Receiver","Amount","CloseRemainderTo","VotePK","SelectionPK","VoteFirst","VoteLast","VoteKeyDilution","Type","TypeEnum","XferAsset","AssetAmount","AssetSender","AssetReceiver","AssetCloseTo","GroupIndex","TxID","ApplicationID","OnCompletion","ApplicationArgs","NumAppArgs","Accounts","NumAccounts","ApprovalProgram","ClearStateProgram","RekeyTo","ConfigAsset","ConfigAssetTotal","ConfigAssetDecimals","ConfigAssetDefaultFrozen","ConfigAssetUnitName","ConfigAssetName","ConfigAssetURL","ConfigAssetMetadataHash","ConfigAssetManager","ConfigAssetReserve","ConfigAssetFreeze","ConfigAssetClawback","FreezeAsset","FreezeAssetAccount","FreezeAssetFrozen","Assets","NumAssets","Applications","NumApplications","GlobalNumUint","GlobalNumByteSlice","LocalNumUint","LocalNumByteSlice","ExtraProgramPages","Nonparticipation","Logs","NumLogs","CreatedAssetID","CreatedApplicationID","LastLog","StateProofPK"],"ArgEnumTypes":"BUUUUBBBUBBBUUUBUUUBBBUBUUBUBUBBBUUUUBBBBBBBBUBUUUUUUUUUUUBUUUBB","Doc":"field F of the Ath transaction in the current group","DocExtra":"for notes on transaction fields available, see `txn`. If top of stack is _i_, `gtxns field` is equivalent to `gtxn _i_ field`. gtxns exists so that _i_ can be calculated, often based on the index of the current transaction.","ImmediateNote":"{uint8 transaction field index}","Groups":["Loading Values"]},{"Opcode":57,"Name":"gtxnsa","Args":"U","Returns":".","Cost":1,"Size":3,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ith value of the array field F from the Ath transaction in the current group","ImmediateNote":"{uint8 transaction field index} {uint8 transaction field array index}","Groups":["Loading Values"]},{"Opcode":58,"Name":"gload","Returns":".","Cost":1,"Size":3,"Doc":"Ith scratch space value of the Tth transaction in the current group","DocExtra":"`gload` fails unless the requested transaction is an ApplicationCall and T < GroupIndex.","ImmediateNote":"{uint8 transaction group index} {uint8 position in scratch space to load from}","Groups":["Loading Values"]},{"Opcode":59,"Name":"gloads","Args":"U","Returns":".","Cost":1,"Size":2,"Doc":"Ith scratch space value of the Ath transaction in the current group","DocExtra":"`gloads` fails unless the requested transaction is an ApplicationCall and A < GroupIndex.","ImmediateNote":"{uint8 position in scratch space to load from}","Groups":["Loading Values"]},{"Opcode":60,"Name":"gaid","Returns":"U","Cost":1,"Size":2,"Doc":"ID of the asset or application created in the Tth transaction of the current group","DocExtra":"`gaid` fails unless the requested transaction created an asset or application and T < GroupIndex.","ImmediateNote":"{uint8 transaction group index}","Groups":["Loading Values"]},{"Opcode":61,"Name":"gaids","Args":"U","Returns":"U","Cost":1,"Size":1,"Doc":"ID of the asset or application created in the Ath transaction of the current group","DocExtra":"`gaids` fails unless the requested transaction created an asset or application and A < GroupIndex.","Groups":["Loading Values"]},{"Opcode":62,"Name":"loads","Args":"U","Returns":".","Cost":1,"Size":1,"Doc":"Ath scratch space value.  All scratch spaces are 0 at program start.","Groups":["Loading Values"]},{"Opcode":63,"Name":"stores","Args":"U.","Cost":1,"Size":1,"Doc":"store B to the Ath scratch space","Groups":["Loading Values"]},{"Opcode":64,"Name":"bnz","Args":"U","Cost":1,"Size":3,"Doc":"branch to TARGET if value A is not zero","DocExtra":"The `bnz` instruction opcode 0x40 is followed by two immediate data bytes which are a high byte first and low byte second which together form a 16 bit offset which the instruction may branch to. For a bnz instruction at `pc`, if the last element of the stack is not zero then branch to instruction at `pc + 3 + N`, else proceed to next instruction at `pc + 3`. Branch targets must be aligned instructions. (e.g. Branching to the second byte of a 2 byte op will be rejected.) Starting at v4, the offset is treated as a signed 16 bit integer allowing for backward branches and looping. In prior version (v1 to v3), branch offsets are limited to forward branches only, 0-0x7fff.\\n\\nAt v2 it became allowed to branch to the end of the program exactly after the last instruction: bnz to byte N (with 0-indexing) was illegal for a TEAL program with N bytes before v2, and is legal after it. This change eliminates the need for a last instruction of no-op as a branch target at the end. (Branching beyond the end--in other words, to a byte larger than N--is still illegal and will cause the program to fail.)","ImmediateNote":"{int16 branch offset, big endian}","Groups":["Flow Control"]},{"Opcode":65,"Name":"bz","Args":"U","Cost":1,"Size":3,"Doc":"branch to TARGET if value A is zero","DocExtra":"See `bnz` for details on how branches work. `bz` inverts the behavior of `bnz`.","ImmediateNote":"{int16 branch offset, big endian}","Groups":["Flow Control"]},{"Opcode":66,"Name":"b","Cost":1,"Size":3,"Doc":"branch unconditionally to TARGET","DocExtra":"See `bnz` for details on how branches work. `b` always jumps to the offset.","ImmediateNote":"{int16 branch offset, big endian}","Groups":["Flow Control"]},{"Opcode":67,"Name":"return","Args":"U","Cost":1,"Size":1,"Doc":"use A as success value; end","Groups":["Flow Control"]},{"Opcode":68,"Name":"assert","Args":"U","Cost":1,"Size":1,"Doc":"immediately fail unless A is a non-zero number","Groups":["Flow Control"]},{"Opcode":72,"Name":"pop","Args":".","Cost":1,"Size":1,"Doc":"discard A","Groups":["Flow Control"]},{"Opcode":73,"Name":"dup","Args":".","Returns":"..","Cost":1,"Size":1,"Doc":"duplicate A","Groups":["Flow Control"]},{"Opcode":74,"Name":"dup2","Args":"..","Returns":"....","Cost":1,"Size":1,"Doc":"duplicate A and B","Groups":["Flow Control"]},{"Opcode":75,"Name":"dig","Args":".","Returns":"..","Cost":1,"Size":2,"Doc":"Nth value from the top of the stack. dig 0 is equivalent to dup","ImmediateNote":"{uint8 depth}","Groups":["Flow Control"]},{"Opcode":76,"Name":"swap","Args":"..","Returns":"..","Cost":1,"Size":1,"Doc":"swaps A and B on stack","Groups":["Flow Control"]},{"Opcode":77,"Name":"select","Args":"..U","Returns":".","Cost":1,"Size":1,"Doc":"selects one of two values based on top-of-stack: B if C != 0, else A","Groups":["Flow Control"]},{"Opcode":78,"Name":"cover","Args":".","Returns":".","Cost":1,"Size":2,"Doc":"remove top of stack, and place it deeper in the stack such that N elements are above it. Fails if stack depth <= N.","ImmediateNote":"{uint8 depth}","Groups":["Flow Control"]},{"Opcode":79,"Name":"uncover","Args":".","Returns":".","Cost":1,"Size":2,"Doc":"remove the value at depth N in the stack and shift above items down so the Nth deep value is on top of the stack. Fails if stack depth <= N.","ImmediateNote":"{uint8 depth}","Groups":["Flow Control"]},{"Opcode":80,"Name":"concat","Args":"BB","Returns":"B","Cost":1,"Size":1,"Doc":"join A and B","DocExtra":"`concat` fails if the result would be greater than 4096 bytes.","Groups":["Arithmetic"]},{"Opcode":81,"Name":"substring","Args":"B","Returns":"B","Cost":1,"Size":3,"Doc":"A range of bytes from A starting at S up to but not including E. If E < S, or either is larger than the array length, the program fails","ImmediateNote":"{uint8 start position} {uint8 end position}","Groups":["Byte Array Manipulation"]},{"Opcode":82,"Name":"substring3","Args":"BUU","Returns":"B","Cost":1,"Size":1,"Doc":"A range of bytes from A starting at B up to but not including C. If C < B, or either is larger than the array length, the program fails","Groups":["Byte Array Manipulation"]},{"Opcode":83,"Name":"getbit","Args":".U","Returns":"U","Cost":1,"Size":1,"Doc":"Bth bit of (byte-array or integer) A.","DocExtra":"see explanation of bit ordering in setbit","Groups":["Arithmetic"]},{"Opcode":84,"Name":"setbit","Args":".UU","Returns":".","Cost":1,"Size":1,"Doc":"Copy of (byte-array or integer) A, with the Bth bit set to (0 or 1) C","DocExtra":"When A is a uint64, index 0 is the least significant bit. Setting bit 3 to 1 on the integer 0 yields 8, or 2^3. When A is a byte array, index 0 is the leftmost bit of the leftmost byte. Setting bits 0 through 11 to 1 in a 4-byte-array of 0s yields the byte array 0xfff00000. Setting bit 3 to 1 on the 1-byte-array 0x00 yields the byte array 0x10.","Groups":["Arithmetic"]},{"Opcode":85,"Name":"getbyte","Args":"BU","Returns":"U","Cost":1,"Size":1,"Doc":"Bth byte of A, as an integer","Groups":["Arithmetic"]},{"Opcode":86,"Name":"setbyte","Args":"BUU","Returns":"B","Cost":1,"Size":1,"Doc":"Copy of A with the Bth byte set to small integer (between 0..255) C","Groups":["Arithmetic"]},{"Opcode":87,"Name":"extract","Args":"B","Returns":"B","Cost":1,"Size":3,"Doc":"A range of bytes from A starting at S up to but not including S+L. If L is 0, then extract to the end of the string. If S or S+L is larger than the array length, the program fails","ImmediateNote":"{uint8 start position} {uint8 length}","Groups":["Byte Array Manipulation"]},{"Opcode":88,"Name":"extract3","Args":"BUU","Returns":"B","Cost":1,"Size":1,"Doc":"A range of bytes from A starting at B up to but not including B+C. If B+C is larger than the array length, the program fails","Groups":["Byte Array Manipulation"]},{"Opcode":89,"Name":"extract_uint16","Args":"BU","Returns":"U","Cost":1,"Size":1,"Doc":"A uint16 formed from a range of big-endian bytes from A starting at B up to but not including B+2. If B+2 is larger than the array length, the program fails","Groups":["Byte Array Manipulation"]},{"Opcode":90,"Name":"extract_uint32","Args":"BU","Returns":"U","Cost":1,"Size":1,"Doc":"A uint32 formed from a range of big-endian bytes from A starting at B up to but not including B+4. If B+4 is larger than the array length, the program fails","Groups":["Byte Array Manipulation"]},{"Opcode":91,"Name":"extract_uint64","Args":"BU","Returns":"U","Cost":1,"Size":1,"Doc":"A uint64 formed from a range of big-endian bytes from A starting at B up to but not including B+8. If B+8 is larger than the array length, the program fails","Groups":["Byte Array Manipulation"]},{"Opcode":96,"Name":"balance","Args":".","Returns":"U","Cost":1,"Size":1,"Doc":"get balance for account A, in microalgos. The balance is observed after the effects of previous transactions in the group, and after the fee for the current transaction is deducted.","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), _available_ application id (or, since v4, a Txn.ForeignApps offset). Return: value.","Groups":["State Access"]},{"Opcode":97,"Name":"app_opted_in","Args":".U","Returns":"U","Cost":1,"Size":1,"Doc":"1 if account A is opted in to application B, else 0","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), _available_ application id (or, since v4, a Txn.ForeignApps offset). Return: 1 if opted in and 0 otherwise.","Groups":["State Access"]},{"Opcode":98,"Name":"app_local_get","Args":".B","Returns":".","Cost":1,"Size":1,"Doc":"local state of the key B in the current application in account A","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), state key. Return: value. The value is zero (of type uint64) if the key does not exist.","Groups":["State Access"]},{"Opcode":99,"Name":"app_local_get_ex","Args":".UB","Returns":".U","Cost":1,"Size":1,"Doc":"X is the local state of application B, key C in account A. Y is 1 if key existed, else 0","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), _available_ application id (or, since v4, a Txn.ForeignApps offset), state key. Return: did_exist flag (top of the stack, 1 if the application and key existed and 0 otherwise), value. The value is zero (of type uint64) if the key does not exist.","Groups":["State Access"]},{"Opcode":100,"Name":"app_global_get","Args":"B","Returns":".","Cost":1,"Size":1,"Doc":"global state of the key A in the current application","DocExtra":"params: state key. Return: value. The value is zero (of type uint64) if the key does not exist.","Groups":["State Access"]},{"Opcode":101,"Name":"app_global_get_ex","Args":"UB","Returns":".U","Cost":1,"Size":1,"Doc":"X is the global state of application A, key B. Y is 1 if key existed, else 0","DocExtra":"params: Txn.ForeignApps offset (or, since v4, an _available_ application id), state key. Return: did_exist flag (top of the stack, 1 if the application and key existed and 0 otherwise), value. The value is zero (of type uint64) if the key does not exist.","Groups":["State Access"]},{"Opcode":102,"Name":"app_local_put","Args":".B.","Cost":1,"Size":1,"Doc":"write C to key B in account A\'s local state of the current application","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), state key, value.","Groups":["State Access"]},{"Opcode":103,"Name":"app_global_put","Args":"B.","Cost":1,"Size":1,"Doc":"write B to key A in the global state of the current application","Groups":["State Access"]},{"Opcode":104,"Name":"app_local_del","Args":".B","Cost":1,"Size":1,"Doc":"delete key B from account A\'s local state of the current application","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), state key.\\n\\nDeleting a key which is already absent has no effect on the application local state. (In particular, it does _not_ cause the program to fail.)","Groups":["State Access"]},{"Opcode":105,"Name":"app_global_del","Args":"B","Cost":1,"Size":1,"Doc":"delete key A from the global state of the current application","DocExtra":"params: state key.\\n\\nDeleting a key which is already absent has no effect on the application global state. (In particular, it does _not_ cause the program to fail.)","Groups":["State Access"]},{"Opcode":112,"Name":"asset_holding_get","Args":".U","Returns":".U","Cost":1,"Size":2,"ArgEnum":["AssetBalance","AssetFrozen"],"ArgEnumTypes":"UU","Doc":"X is field F from account A\'s holding of asset B. Y is 1 if A is opted into B, else 0","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ address), asset id (or, since v4, a Txn.ForeignAssets offset). Return: did_exist flag (1 if the asset existed and 0 otherwise), value.","ImmediateNote":"{uint8 asset holding field index}","Groups":["State Access"]},{"Opcode":113,"Name":"asset_params_get","Args":"U","Returns":".U","Cost":1,"Size":2,"ArgEnum":["AssetTotal","AssetDecimals","AssetDefaultFrozen","AssetUnitName","AssetName","AssetURL","AssetMetadataHash","AssetManager","AssetReserve","AssetFreeze","AssetClawback","AssetCreator"],"ArgEnumTypes":"UUUBBBBBBBBB","Doc":"X is field F from asset A. Y is 1 if A exists, else 0","DocExtra":"params: Txn.ForeignAssets offset (or, since v4, an _available_ asset id. Return: did_exist flag (1 if the asset existed and 0 otherwise), value.","ImmediateNote":"{uint8 asset params field index}","Groups":["State Access"]},{"Opcode":114,"Name":"app_params_get","Args":"U","Returns":".U","Cost":1,"Size":2,"ArgEnum":["AppApprovalProgram","AppClearStateProgram","AppGlobalNumUint","AppGlobalNumByteSlice","AppLocalNumUint","AppLocalNumByteSlice","AppExtraProgramPages","AppCreator","AppAddress"],"ArgEnumTypes":"BBUUUUUBB","Doc":"X is field F from app A. Y is 1 if A exists, else 0","DocExtra":"params: Txn.ForeignApps offset or an _available_ app id. Return: did_exist flag (1 if the application existed and 0 otherwise), value.","ImmediateNote":"{uint8 app params field index}","Groups":["State Access"]},{"Opcode":115,"Name":"acct_params_get","Args":".","Returns":".U","Cost":1,"Size":2,"Doc":"X is field F from account A. Y is 1 if A owns positive algos, else 0","ImmediateNote":"{uint8 account params field index}","Groups":["State Access"]},{"Opcode":120,"Name":"min_balance","Args":".","Returns":"U","Cost":1,"Size":1,"Doc":"get minimum required balance for account A, in microalgos. Required balance is affected by [ASA](https://developer.algorand.org/docs/features/asa/#assets-overview) and [App](https://developer.algorand.org/docs/features/asc1/stateful/#minimum-balance-requirement-for-a-smart-contract) usage. When creating or opting into an app, the minimum balance grows before the app code runs, therefore the increase is visible there. When deleting or closing out, the minimum balance decreases after the app executes.","DocExtra":"params: Txn.Accounts offset (or, since v4, an _available_ account address), _available_ application id (or, since v4, a Txn.ForeignApps offset). Return: value.","Groups":["State Access"]},{"Opcode":128,"Name":"pushbytes","Returns":"B","Cost":1,"Size":0,"Doc":"immediate BYTES","DocExtra":"pushbytes args are not added to the bytecblock during assembly processes","ImmediateNote":"{varuint length} {bytes}","Groups":["Loading Values"]},{"Opcode":129,"Name":"pushint","Returns":"U","Cost":1,"Size":0,"Doc":"immediate UINT","DocExtra":"pushint args are not added to the intcblock during assembly processes","ImmediateNote":"{varuint int}","Groups":["Loading Values"]},{"Opcode":136,"Name":"callsub","Cost":1,"Size":3,"Doc":"branch unconditionally to TARGET, saving the next instruction on the call stack","DocExtra":"The call stack is separate from the data stack. Only `callsub` and `retsub` manipulate it.","ImmediateNote":"{int16 branch offset, big endian}","Groups":["Flow Control"]},{"Opcode":137,"Name":"retsub","Cost":1,"Size":1,"Doc":"pop the top instruction from the call stack and branch to it","DocExtra":"The call stack is separate from the data stack. Only `callsub` and `retsub` manipulate it.","Groups":["Flow Control"]},{"Opcode":144,"Name":"shl","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A times 2^B, modulo 2^64","Groups":["Arithmetic"]},{"Opcode":145,"Name":"shr","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A divided by 2^B","Groups":["Arithmetic"]},{"Opcode":146,"Name":"sqrt","Args":"U","Returns":"U","Cost":4,"Size":1,"Doc":"The largest integer I such that I^2 <= A","Groups":["Arithmetic"]},{"Opcode":147,"Name":"bitlen","Args":".","Returns":"U","Cost":1,"Size":1,"Doc":"The highest set bit in A. If A is a byte-array, it is interpreted as a big-endian unsigned integer. bitlen of 0 is 0, bitlen of 8 is 4","DocExtra":"bitlen interprets arrays as big-endian integers, unlike setbit/getbit","Groups":["Arithmetic"]},{"Opcode":148,"Name":"exp","Args":"UU","Returns":"U","Cost":1,"Size":1,"Doc":"A raised to the Bth power. Fail if A == B == 0 and on overflow","Groups":["Arithmetic"]},{"Opcode":149,"Name":"expw","Args":"UU","Returns":"UU","Cost":10,"Size":1,"Doc":"A raised to the Bth power as a 128-bit result in two uint64s. X is the high 64 bits, Y is the low. Fail if A == B == 0 or if the results exceeds 2^128-1","Groups":["Arithmetic"]},{"Opcode":150,"Name":"bsqrt","Args":"B","Returns":"B","Cost":40,"Size":1,"Doc":"The largest integer I such that I^2 <= A. A and I are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":151,"Name":"divw","Args":"UUU","Returns":"U","Cost":1,"Size":1,"Doc":"A,B / C. Fail if C == 0 or if result overflows.","DocExtra":"The notation A,B indicates that A and B are interpreted as a uint128 value, with A as the high uint64 and B the low.","Groups":["Arithmetic"]},{"Opcode":160,"Name":"b+","Args":"BB","Returns":"B","Cost":10,"Size":1,"Doc":"A plus B. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":161,"Name":"b-","Args":"BB","Returns":"B","Cost":10,"Size":1,"Doc":"A minus B. A and B are interpreted as big-endian unsigned integers. Fail on underflow.","Groups":["Byte Array Arithmetic"]},{"Opcode":162,"Name":"b/","Args":"BB","Returns":"B","Cost":20,"Size":1,"Doc":"A divided by B (truncated division). A and B are interpreted as big-endian unsigned integers. Fail if B is zero.","Groups":["Byte Array Arithmetic"]},{"Opcode":163,"Name":"b*","Args":"BB","Returns":"B","Cost":20,"Size":1,"Doc":"A times B. A and B are interpreted as big-endian unsigned integers.","Groups":["Byte Array Arithmetic"]},{"Opcode":164,"Name":"b<","Args":"BB","Returns":"U","Cost":1,"Size":1,"Doc":"1 if A is less than B, else 0. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":165,"Name":"b>","Args":"BB","Returns":"U","Cost":1,"Size":1,"Doc":"1 if A is greater than B, else 0. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":166,"Name":"b<=","Args":"BB","Returns":"U","Cost":1,"Size":1,"Doc":"1 if A is less than or equal to B, else 0. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":167,"Name":"b>=","Args":"BB","Returns":"U","Cost":1,"Size":1,"Doc":"1 if A is greater than or equal to B, else 0. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":168,"Name":"b==","Args":"BB","Returns":"U","Cost":1,"Size":1,"Doc":"1 if A is equal to B, else 0. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":169,"Name":"b!=","Args":"BB","Returns":"U","Cost":1,"Size":1,"Doc":"0 if A is equal to B, else 1. A and B are interpreted as big-endian unsigned integers","Groups":["Byte Array Arithmetic"]},{"Opcode":170,"Name":"b%","Args":"BB","Returns":"B","Cost":20,"Size":1,"Doc":"A modulo B. A and B are interpreted as big-endian unsigned integers. Fail if B is zero.","Groups":["Byte Array Arithmetic"]},{"Opcode":171,"Name":"b|","Args":"BB","Returns":"B","Cost":6,"Size":1,"Doc":"A bitwise-or B. A and B are zero-left extended to the greater of their lengths","Groups":["Byte Array Logic"]},{"Opcode":172,"Name":"b&","Args":"BB","Returns":"B","Cost":6,"Size":1,"Doc":"A bitwise-and B. A and B are zero-left extended to the greater of their lengths","Groups":["Byte Array Logic"]},{"Opcode":173,"Name":"b^","Args":"BB","Returns":"B","Cost":6,"Size":1,"Doc":"A bitwise-xor B. A and B are zero-left extended to the greater of their lengths","Groups":["Byte Array Logic"]},{"Opcode":174,"Name":"b~","Args":"B","Returns":"B","Cost":4,"Size":1,"Doc":"A with all bits inverted","Groups":["Byte Array Logic"]},{"Opcode":175,"Name":"bzero","Args":"U","Returns":"B","Cost":1,"Size":1,"Doc":"zero filled byte-array of length A","Groups":["Loading Values"]},{"Opcode":176,"Name":"log","Args":"B","Cost":1,"Size":1,"Doc":"write A to log state of the current application","DocExtra":"`log` fails if called more than MaxLogCalls times in a program, or if the sum of logged bytes exceeds 1024 bytes.","Groups":["State Access"]},{"Opcode":177,"Name":"itxn_begin","Cost":1,"Size":1,"Doc":"begin preparation of a new inner transaction in a new transaction group","DocExtra":"`itxn_begin` initializes Sender to the application address; Fee to the minimum allowable, taking into account MinTxnFee and credit from overpaying in earlier transactions; FirstValid/LastValid to the values in the invoking transaction, and all other fields to zero or empty values.","Groups":["Inner Transactions"]},{"Opcode":178,"Name":"itxn_field","Args":".","Cost":1,"Size":2,"ArgEnum":["Sender","Fee","FirstValid","FirstValidTime","LastValid","Note","Lease","Receiver","Amount","CloseRemainderTo","VotePK","SelectionPK","VoteFirst","VoteLast","VoteKeyDilution","Type","TypeEnum","XferAsset","AssetAmount","AssetSender","AssetReceiver","AssetCloseTo","GroupIndex","TxID","ApplicationID","OnCompletion","ApplicationArgs","NumAppArgs","Accounts","NumAccounts","ApprovalProgram","ClearStateProgram","RekeyTo","ConfigAsset","ConfigAssetTotal","ConfigAssetDecimals","ConfigAssetDefaultFrozen","ConfigAssetUnitName","ConfigAssetName","ConfigAssetURL","ConfigAssetMetadataHash","ConfigAssetManager","ConfigAssetReserve","ConfigAssetFreeze","ConfigAssetClawback","FreezeAsset","FreezeAssetAccount","FreezeAssetFrozen","Assets","NumAssets","Applications","NumApplications","GlobalNumUint","GlobalNumByteSlice","LocalNumUint","LocalNumByteSlice","ExtraProgramPages","Nonparticipation","Logs","NumLogs","CreatedAssetID","CreatedApplicationID","LastLog","StateProofPK"],"ArgEnumTypes":"BUUUUBBBUBBBUUUBUUUBBBUBUUBUBUBBBUUUUBBBBBBBBUBUUUUUUUUUUUBUUUBB","Doc":"set field F of the current inner transaction to A","DocExtra":"`itxn_field` fails if A is of the wrong type for F, including a byte array of the wrong size for use as an address when F is an address field. `itxn_field` also fails if A is an account, asset, or app that is not _available_, or an attempt is made extend an array field beyond the limit imposed by consensus parameters. (Addresses set into asset params of acfg transactions need not be _available_.)","ImmediateNote":"{uint8 transaction field index}","Groups":["Inner Transactions"]},{"Opcode":179,"Name":"itxn_submit","Cost":1,"Size":1,"Doc":"execute the current inner transaction group. Fail if executing this group would exceed the inner transaction limit, or if any transaction in the group fails.","DocExtra":"`itxn_submit` resets the current transaction so that it can not be resubmitted. A new `itxn_begin` is required to prepare another inner transaction.","Groups":["Inner Transactions"]},{"Opcode":180,"Name":"itxn","Returns":".","Cost":1,"Size":2,"ArgEnum":["Sender","Fee","FirstValid","FirstValidTime","LastValid","Note","Lease","Receiver","Amount","CloseRemainderTo","VotePK","SelectionPK","VoteFirst","VoteLast","VoteKeyDilution","Type","TypeEnum","XferAsset","AssetAmount","AssetSender","AssetReceiver","AssetCloseTo","GroupIndex","TxID","ApplicationID","OnCompletion","ApplicationArgs","NumAppArgs","Accounts","NumAccounts","ApprovalProgram","ClearStateProgram","RekeyTo","ConfigAsset","ConfigAssetTotal","ConfigAssetDecimals","ConfigAssetDefaultFrozen","ConfigAssetUnitName","ConfigAssetName","ConfigAssetURL","ConfigAssetMetadataHash","ConfigAssetManager","ConfigAssetReserve","ConfigAssetFreeze","ConfigAssetClawback","FreezeAsset","FreezeAssetAccount","FreezeAssetFrozen","Assets","NumAssets","Applications","NumApplications","GlobalNumUint","GlobalNumByteSlice","LocalNumUint","LocalNumByteSlice","ExtraProgramPages","Nonparticipation","Logs","NumLogs","CreatedAssetID","CreatedApplicationID","LastLog","StateProofPK"],"ArgEnumTypes":"BUUUUBBBUBBBUUUBUUUBBBUBUUBUBUBBBUUUUBBBBBBBBUBUUUUUUUUUUUBUUUBB","Doc":"field F of the last inner transaction","ImmediateNote":"{uint8 transaction field index}","Groups":["Inner Transactions"]},{"Opcode":181,"Name":"itxna","Returns":".","Cost":1,"Size":3,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ith value of the array field F of the last inner transaction","ImmediateNote":"{uint8 transaction field index} {uint8 transaction field array index}","Groups":["Inner Transactions"]},{"Opcode":182,"Name":"itxn_next","Cost":1,"Size":1,"Doc":"begin preparation of a new inner transaction in the same transaction group","DocExtra":"`itxn_next` initializes the transaction exactly as `itxn_begin` does","Groups":["Inner Transactions"]},{"Opcode":183,"Name":"gitxn","Returns":".","Cost":1,"Size":3,"ArgEnum":["Sender","Fee","FirstValid","FirstValidTime","LastValid","Note","Lease","Receiver","Amount","CloseRemainderTo","VotePK","SelectionPK","VoteFirst","VoteLast","VoteKeyDilution","Type","TypeEnum","XferAsset","AssetAmount","AssetSender","AssetReceiver","AssetCloseTo","GroupIndex","TxID","ApplicationID","OnCompletion","ApplicationArgs","NumAppArgs","Accounts","NumAccounts","ApprovalProgram","ClearStateProgram","RekeyTo","ConfigAsset","ConfigAssetTotal","ConfigAssetDecimals","ConfigAssetDefaultFrozen","ConfigAssetUnitName","ConfigAssetName","ConfigAssetURL","ConfigAssetMetadataHash","ConfigAssetManager","ConfigAssetReserve","ConfigAssetFreeze","ConfigAssetClawback","FreezeAsset","FreezeAssetAccount","FreezeAssetFrozen","Assets","NumAssets","Applications","NumApplications","GlobalNumUint","GlobalNumByteSlice","LocalNumUint","LocalNumByteSlice","ExtraProgramPages","Nonparticipation","Logs","NumLogs","CreatedAssetID","CreatedApplicationID","LastLog","StateProofPK"],"ArgEnumTypes":"BUUUUBBBUBBBUUUBUUUBBBUBUUBUBUBBBUUUUBBBBBBBBUBUUUUUUUUUUUBUUUBB","Doc":"field F of the Tth transaction in the last inner group submitted","ImmediateNote":"{uint8 transaction group index} {uint8 transaction field index}","Groups":["Inner Transactions"]},{"Opcode":184,"Name":"gitxna","Returns":".","Cost":1,"Size":4,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ith value of the array field F from the Tth transaction in the last inner group submitted","ImmediateNote":"{uint8 transaction group index} {uint8 transaction field index} {uint8 transaction field array index}","Groups":["Inner Transactions"]},{"Opcode":192,"Name":"txnas","Args":"U","Returns":".","Cost":1,"Size":2,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ath value of the array field F of the current transaction","ImmediateNote":"{uint8 transaction field index}","Groups":["Loading Values"]},{"Opcode":193,"Name":"gtxnas","Args":"U","Returns":".","Cost":1,"Size":3,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Ath value of the array field F from the Tth transaction in the current group","ImmediateNote":"{uint8 transaction group index} {uint8 transaction field index}","Groups":["Loading Values"]},{"Opcode":194,"Name":"gtxnsas","Args":"UU","Returns":".","Cost":1,"Size":2,"ArgEnum":["ApplicationArgs","Accounts","Assets","Applications","Logs"],"ArgEnumTypes":"BBUUB","Doc":"Bth value of the array field F from the Ath transaction in the current group","ImmediateNote":"{uint8 transaction field index}","Groups":["Loading Values"]},{"Opcode":195,"Name":"args","Args":"U","Returns":"B","Cost":1,"Size":1,"Doc":"Ath LogicSig argument","Groups":["Loading Values"]},{"Opcode":196,"Name":"gloadss","Args":"UU","Returns":".","Cost":1,"Size":1,"Doc":"Bth scratch space value of the Ath transaction in the current group","Groups":["Loading Values"]},{"Opcode":197,"Name":"itxnas","Args":"U","Returns":".","Cost":1,"Size":2,"Doc":"Ath value of the array field F of the last inner transaction","ImmediateNote":"{uint8 transaction field index}","Groups":["Inner Transactions"]},{"Opcode":198,"Name":"gitxnas","Args":"U","Returns":".","Cost":1,"Size":3,"Doc":"Ath value of the array field F from the Tth transaction in the last inner group submitted","ImmediateNote":"{uint8 transaction group index} {uint8 transaction field index}","Groups":["Inner Transactions"]}]}');let n;function s(t){let e=0,i=0;for(let r=0;r<t.length;r++){const n=t[r];if(n<128)return r>9||9===r&&n>1?[0,-(r+1)]:[e|n<<i,r+1];e+=(127&n)<<i,i+=7}return[0,0]}function o(t,e){let i=1;const r=s(t.slice(e+i)),n=r[0];let o=r[1];if(o<=0)throw new Error(`could not decode int const block size at pc=${e+i}`);const a=[];i+=o;for(let r=0;r<n;r++){if(e+i>=t.length)throw new Error("intcblock ran past end of program");let n;if([n,o]=s(t.slice(e+i)),o<=0)throw new Error(`could not decode int const[${r}] block size at pc=${e+i}`);a.push(n),i+=o}return[i,a]}function a(t,e){let i=1;const r=s(t.slice(e+i)),n=r[0];let o=r[1];if(o<=0)throw new Error(`could not decode []byte const block size at pc=${e+i}`);const a=[];i+=o;for(let r=0;r<n;r++){if(e+i>=t.length)throw new Error("bytecblock ran past end of program");let n;if([n,o]=s(t.slice(e+i)),o<=0)throw new Error(`could not decode []byte] const[${r}] block size at pc=${e+i}`);if(i+=o,e+i+n>t.length)throw new Error("bytecblock ran past end of program");const h=t.slice(e+i,e+i+n);a.push(h),i+=n}return[i,a]}function h(t,e){let i=1;const[r,n]=s(t.slice(e+i));if(n<=0)throw new Error(`could not decode push int const at pc=${e+i}`);return i+=n,[i,r]}function c(t,e){let i=1;const[r,n]=s(t.slice(e+i));if(n<=0)throw new Error(`could not decode push []byte const size at pc=${e+i}`);if(i+=n,e+i+r>t.length)throw new Error("pushbytes ran past end of program");const o=t.slice(e+i,e+i+r);return i+=r,[i,o]}function l(t,e){if(!t)throw new Error("empty program");if(void 0===e&&(e=[]),!Array.isArray(e))throw new Error("invalid arguments");const[i,l]=s(t);if(l<=0)throw new Error("version parsing error");if(i>r.z_)throw new Error("unsupported version");let u=0,{length:d}=t;for(const t of e)d+=t.length;if(d>1e3)throw new Error("program too long");if(!n){n={};for(const t of r.AP)n[t.Opcode]=t}let f=l,p=[],g=[];for(;f<t.length;){const e=n[t[f]];if(void 0===e)throw new Error("invalid instruction");u+=e.Cost;let i=e.Size;if(0===i)switch(e.Opcode){case 32:{let e;[i,e]=o(t,f),p=p.concat(e);break}case 38:{let e;[i,e]=a(t,f),g=g.concat(e);break}case 129:{let e;[i,e]=h(t,f),p.push(e);break}case 128:{let e;[i,e]=c(t,f),g.push(e);break}default:throw new Error("invalid instruction")}f+=i}if(i<4&&u>2e4)throw new Error("program too costly for Teal version < 4. consider using v4.");return[p,g,!0]}function u(t,e){const[,,i]=l(t,e);return i}function d(t,e){const[i]=o(t,e);return i}function f(t,e){const[i]=a(t,e);return i}function p(t,e){const[i]=h(t,e);return i}function g(t,e){const[i]=c(t,e);return i}const y=r.z_,m=r.BV},8800:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LogicSig:()=>u,LogicSigAccount:()=>d,makeLogicSig:()=>f,signLogicSigTransactionObject:()=>p,signLogicSigTransaction:()=>g,logicSigFromByte:()=>y,tealSign:()=>v,tealSignFromProgram:()=>b});var r=i(9404),n=i(7116),s=i(3033),o=i(5583),a=i(4158),h=i(413),c=i(9417),l=i(2486).Buffer;class u{constructor(t,e){if(this.tag=l.from("Program"),e&&(!Array.isArray(e)||!e.every((t=>t.constructor===Uint8Array||l.isBuffer(t)))))throw new TypeError("Invalid arguments");let i;if(null!=e&&(i=e.map((t=>new Uint8Array(t)))),!o.checkProgram(t,i))throw new Error("Invalid program");this.logic=t,this.args=i,this.sig=void 0,this.msig=void 0}get_obj_for_encoding(){const t={l:this.logic};return this.args&&(t.arg=this.args),this.sig?t.sig=this.sig:this.msig&&(t.msig=this.msig),t}static from_obj_for_encoding(t){const e=new u(t.l,t.arg);return e.sig=t.sig,e.msig=t.msig,e}verify(t){if(this.sig&&this.msig)return!1;try{o.checkProgram(this.logic,this.args)}catch(t){return!1}const e=h.concatArrays(this.tag,this.logic);if(!this.sig&&!this.msig){const i=r.genericHash(e);return h.arrayEqual(i,t)}return this.sig?r.verify(e,this.sig,t):(0,a.F2)(e,this.msig,t)}address(){const t=h.concatArrays(this.tag,this.logic),e=r.genericHash(t);return n.encodeAddress(new Uint8Array(e))}sign(t,e){if(null==e)this.sig=this.signProgram(t);else{const i=e.addrs.map((t=>({pk:n.decodeAddress(t).publicKey})));this.msig={v:e.version,thr:e.threshold,subsig:i};const[r,s]=this.singleSignMultisig(t,this.msig);this.msig.subsig[s].s=r}}appendToMultisig(t){if(void 0===this.msig)throw new Error("no multisig present");const[e,i]=this.singleSignMultisig(t,this.msig);this.msig.subsig[i].s=e}signProgram(t){const e=h.concatArrays(this.tag,this.logic);return r.sign(e,t)}singleSignMultisig(t,e){let i=-1;const n=r.keyPairFromSecretKey(t).publicKey;for(let t=0;t<e.subsig.length;t++){const{pk:r}=e.subsig[t];if(h.arrayEqual(r,n)){i=t;break}}if(-1===i)throw new Error("invalid secret key");return[this.signProgram(t),i]}toByte(){return s.encode(this.get_obj_for_encoding())}static fromByte(t){const e=s.decode(t);return u.from_obj_for_encoding(e)}}class d{constructor(t,e){this.lsig=new u(t,e),this.sigkey=void 0}get_obj_for_encoding(){const t={lsig:this.lsig.get_obj_for_encoding()};return this.sigkey&&(t.sigkey=this.sigkey),t}static from_obj_for_encoding(t){const e=new d(t.lsig.l,t.lsig.arg);return e.lsig=u.from_obj_for_encoding(t.lsig),e.sigkey=t.sigkey,e}toByte(){return s.encode(this.get_obj_for_encoding())}static fromByte(t){const e=s.decode(t);return d.from_obj_for_encoding(e)}isDelegated(){return!(!this.lsig.sig&&!this.lsig.msig)}verify(){const t=this.address();return this.lsig.verify(n.decodeAddress(t).publicKey)}address(){if(this.lsig.sig&&this.lsig.msig)throw new Error("LogicSig has too many signatures. At most one of sig or msig may be present");if(this.lsig.sig){if(!this.sigkey)throw new Error("Signing key for delegated account is missing");return n.encodeAddress(this.sigkey)}if(this.lsig.msig){const t={version:this.lsig.msig.v,threshold:this.lsig.msig.thr,pks:this.lsig.msig.subsig.map((t=>t.pk))};return n.encodeAddress(n.fromMultisigPreImg(t))}return this.lsig.address()}signMultisig(t,e){this.lsig.sign(e,t)}appendToMultisig(t){this.lsig.appendToMultisig(t)}sign(t){this.lsig.sign(t),this.sigkey=r.keyPairFromSecretKey(t).publicKey}}function f(t,e){return new u(t,e)}function p(t,e){let i,o;if(e instanceof d)i=e.lsig,o=n.decodeAddress(e.address()).publicKey;else if(i=e,i.sig)o=t.from.publicKey;else if(i.msig){const t={version:i.msig.v,threshold:i.msig.thr,pks:i.msig.subsig.map((t=>t.pk))};o=n.fromMultisigPreImg(t)}else o=n.decodeAddress(i.address()).publicKey;return function(t,e,i){if(!e.verify(i))throw new Error("Logic signature verification failed. Ensure the program and signature are valid.");const n={lsig:e.get_obj_for_encoding(),txn:t.get_obj_for_encoding()};return r.bytesEqual(i,t.from.publicKey)||(n.sgnr=l.from(i)),{txID:t.txID().toString(),blob:s.encode(n)}}(t,i,o)}function g(t,e){return p(c.instantiateTxnIfNeeded(t),e)}function y(t){return u.fromByte(t)}const m=l.from("ProgData");function v(t,e,i){const s=h.concatArrays(n.decodeAddress(i).publicKey,e),o=l.from(h.concatArrays(m,s));return r.sign(o,t)}function b(t,e,i){return v(t,e,new u(i).address())}},6608:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MULTISIG_BAD_SENDER_ERROR_MSG:()=>B,signTransaction:()=>L,signBid:()=>N,signBytes:()=>U,verifyBytes:()=>F,encodeObj:()=>z,decodeObj:()=>j,ERROR_MULTISIG_BAD_SENDER:()=>V,ERROR_INVALID_MICROALGOS:()=>G,Algodv2:()=>p.Z,Kmd:()=>g.Z,IntDecoding:()=>y.Z,Indexer:()=>m.Z,waitForConfirmation:()=>v.K,isValidAddress:()=>n.isValidAddress,encodeAddress:()=>n.encodeAddress,decodeAddress:()=>n.decodeAddress,getApplicationAddress:()=>n.getApplicationAddress,bytesToBigInt:()=>b.v,bigIntToBytes:()=>b.j,encodeUint64:()=>w.T,decodeUint64:()=>w.u,generateAccount:()=>_.Z,modelsv2:()=>x,mnemonicToMasterDerivationKey:()=>E.OF,masterDerivationKeyToMnemonic:()=>E.vC,secretKeyToMnemonic:()=>E.QX,mnemonicToSecretKey:()=>E.Ch,seedFromMnemonic:()=>E.mE,mnemonicFromSeed:()=>E.w3,microalgosToAlgos:()=>l._,algosToMicroalgos:()=>l.HN,INVALID_MICROALGOS_ERROR_MSG:()=>l.rD,computeGroupID:()=>S.computeGroupID,assignGroupID:()=>S.assignGroupID,LogicSigAccount:()=>T.LogicSigAccount,makeLogicSig:()=>T.makeLogicSig,signLogicSigTransaction:()=>T.signLogicSigTransaction,signLogicSigTransactionObject:()=>T.signLogicSigTransactionObject,logicSigFromByte:()=>T.logicSigFromByte,tealSign:()=>T.tealSign,tealSignFromProgram:()=>T.tealSignFromProgram,signMultisigTransaction:()=>A.PU,mergeMultisigTransactions:()=>A.J6,appendSignMultisigTransaction:()=>A.PO,multisigAddress:()=>A.vH,LogicTemplates:()=>H,DryrunResult:()=>C.x,createDryrun:()=>C.P,OnApplicationComplete:()=>k.OnApplicationComplete,makeApplicationCallTxnFromObject:()=>k.makeApplicationCallTxnFromObject,makeApplicationClearStateTxn:()=>k.makeApplicationClearStateTxn,makeApplicationClearStateTxnFromObject:()=>k.makeApplicationClearStateTxnFromObject,makeApplicationCloseOutTxn:()=>k.makeApplicationCloseOutTxn,makeApplicationCloseOutTxnFromObject:()=>k.makeApplicationCloseOutTxnFromObject,makeApplicationCreateTxn:()=>k.makeApplicationCreateTxn,makeApplicationCreateTxnFromObject:()=>k.makeApplicationCreateTxnFromObject,makeApplicationDeleteTxn:()=>k.makeApplicationDeleteTxn,makeApplicationDeleteTxnFromObject:()=>k.makeApplicationDeleteTxnFromObject,makeApplicationNoOpTxn:()=>k.makeApplicationNoOpTxn,makeApplicationNoOpTxnFromObject:()=>k.makeApplicationNoOpTxnFromObject,makeApplicationOptInTxn:()=>k.makeApplicationOptInTxn,makeApplicationOptInTxnFromObject:()=>k.makeApplicationOptInTxnFromObject,makeApplicationUpdateTxn:()=>k.makeApplicationUpdateTxn,makeApplicationUpdateTxnFromObject:()=>k.makeApplicationUpdateTxnFromObject,makeAssetConfigTxn:()=>k.makeAssetConfigTxn,makeAssetConfigTxnWithSuggestedParams:()=>k.makeAssetConfigTxnWithSuggestedParams,makeAssetConfigTxnWithSuggestedParamsFromObject:()=>k.makeAssetConfigTxnWithSuggestedParamsFromObject,makeAssetCreateTxn:()=>k.makeAssetCreateTxn,makeAssetCreateTxnWithSuggestedParams:()=>k.makeAssetCreateTxnWithSuggestedParams,makeAssetCreateTxnWithSuggestedParamsFromObject:()=>k.makeAssetCreateTxnWithSuggestedParamsFromObject,makeAssetDestroyTxn:()=>k.makeAssetDestroyTxn,makeAssetDestroyTxnWithSuggestedParams:()=>k.makeAssetDestroyTxnWithSuggestedParams,makeAssetDestroyTxnWithSuggestedParamsFromObject:()=>k.makeAssetDestroyTxnWithSuggestedParamsFromObject,makeAssetFreezeTxn:()=>k.makeAssetFreezeTxn,makeAssetFreezeTxnWithSuggestedParams:()=>k.makeAssetFreezeTxnWithSuggestedParams,makeAssetFreezeTxnWithSuggestedParamsFromObject:()=>k.makeAssetFreezeTxnWithSuggestedParamsFromObject,makeAssetTransferTxn:()=>k.makeAssetTransferTxn,makeAssetTransferTxnWithSuggestedParams:()=>k.makeAssetTransferTxnWithSuggestedParams,makeAssetTransferTxnWithSuggestedParamsFromObject:()=>k.makeAssetTransferTxnWithSuggestedParamsFromObject,makeKeyRegistrationTxn:()=>k.makeKeyRegistrationTxn,makeKeyRegistrationTxnWithSuggestedParams:()=>k.makeKeyRegistrationTxnWithSuggestedParams,makeKeyRegistrationTxnWithSuggestedParamsFromObject:()=>k.makeKeyRegistrationTxnWithSuggestedParamsFromObject,makePaymentTxn:()=>k.makePaymentTxn,makePaymentTxnWithSuggestedParams:()=>k.makePaymentTxnWithSuggestedParams,makePaymentTxnWithSuggestedParamsFromObject:()=>k.makePaymentTxnWithSuggestedParamsFromObject,ALGORAND_MIN_TX_FEE:()=>o.ALGORAND_MIN_TX_FEE,Transaction:()=>o.Transaction,decodeSignedTransaction:()=>o.decodeSignedTransaction,decodeUnsignedTransaction:()=>o.decodeUnsignedTransaction,encodeUnsignedTransaction:()=>o.encodeUnsignedTransaction,instantiateTxnIfNeeded:()=>o.instantiateTxnIfNeeded,isTransactionWithSigner:()=>R.Xw,makeBasicAccountTransactionSigner:()=>R.x7,makeLogicSigAccountTransactionSigner:()=>R.i1,makeMultiSigAccountTransactionSigner:()=>R.Vj,AtomicTransactionComposer:()=>P.A,AtomicTransactionComposerStatus:()=>P.b,TransactionType:()=>I.i,ABIAddressType:()=>O.JQ,ABIArrayDynamicType:()=>O._4,ABIArrayStaticType:()=>O.X3,ABIBoolType:()=>O.R0,ABIByteType:()=>O.jD,ABIContract:()=>O.Yh,ABIInterface:()=>O.bL,ABIMethod:()=>O.Ls,ABIReferenceType:()=>O.UV,ABIStringType:()=>O.Ax,ABITransactionType:()=>O.A9,ABITupleType:()=>O.w1,ABIType:()=>O.NK,ABIUfixedType:()=>O.RY,ABIUintType:()=>O.Pu,ADDR_BYTE_SIZE:()=>O.Vk,LENGTH_ENCODE_BYTE_SIZE:()=>O.nh,MAX_LEN:()=>O.kG,SINGLE_BOOL_SIZE:()=>O.qH,SINGLE_BYTE_SIZE:()=>O.JH,abiCheckTransactionType:()=>O.vJ,abiTypeIsReference:()=>O.o5,abiTypeIsTransaction:()=>O.AE});var r=i(9404),n=i(7116),s=i(3033),o=i(9417),a=i(8886),h=i.n(a),c=i(2691),l=i(9070),u=i(413),d=i(5922),f={};for(const t in d)["default","MULTISIG_BAD_SENDER_ERROR_MSG","signTransaction","signBid","signBytes","verifyBytes","encodeObj","decodeObj","ERROR_MULTISIG_BAD_SENDER","ERROR_INVALID_MICROALGOS","Algodv2","Kmd","IntDecoding","Indexer","waitForConfirmation","isValidAddress","encodeAddress","decodeAddress","getApplicationAddress","bytesToBigInt","bigIntToBytes","encodeUint64","decodeUint64","generateAccount","modelsv2","mnemonicToMasterDerivationKey","masterDerivationKeyToMnemonic","secretKeyToMnemonic","mnemonicToSecretKey","seedFromMnemonic","mnemonicFromSeed","microalgosToAlgos","algosToMicroalgos","INVALID_MICROALGOS_ERROR_MSG","computeGroupID","assignGroupID","LogicSigAccount","makeLogicSig","signLogicSigTransaction","signLogicSigTransactionObject","logicSigFromByte","tealSign","tealSignFromProgram","signMultisigTransaction","mergeMultisigTransactions","appendSignMultisigTransaction","multisigAddress","LogicTemplates"].indexOf(t)<0&&(f[t]=()=>d[t]);i.d(e,f);var p=i(1663),g=i(6477),y=i(7197),m=i(9582),v=i(5062),b=i(8922),w=i(6963),_=i(7988),x=i(227),E=i(3510),S=i(1063),T=i(8800),A=i(4158),C=i(4383),k=i(1988),R=i(834),P=i(3458),I=i(2380),O=i(7677),M=i(2486).Buffer;const D=M.from([77,88]),B="The transaction sender address and multisig preimage do not match.";function L(t,e){if(void 0===t.from){const i=r.keyPairFromSecretKey(e);t.from=n.encodeAddress(i.publicKey)}const i=o.instantiateTxnIfNeeded(t);return{txID:i.txID().toString(),blob:i.signTxn(e)}}function N(t,e){return new c.Z(t).signBid(e)}function U(t,e){const i=M.from(u.concatArrays(D,t));return r.sign(i,e)}function F(t,e,i){const s=M.from(u.concatArrays(D,t)),o=n.decodeAddress(i).publicKey;return r.verify(s,e,o)}function z(t){return new Uint8Array(s.encode(t))}function j(t){return s.decode(t)}const V=new Error(B),G=new Error(l.rD),H=h()},1988:(t,e,i)=>{"use strict";i.r(e),i.d(e,{makePaymentTxnWithSuggestedParams:()=>o,makePaymentTxn:()=>a,makePaymentTxnWithSuggestedParamsFromObject:()=>h,makeKeyRegistrationTxnWithSuggestedParams:()=>c,makeKeyRegistrationTxn:()=>l,makeKeyRegistrationTxnWithSuggestedParamsFromObject:()=>u,makeAssetCreateTxnWithSuggestedParams:()=>d,makeAssetCreateTxn:()=>f,makeAssetCreateTxnWithSuggestedParamsFromObject:()=>p,makeAssetConfigTxnWithSuggestedParams:()=>g,makeAssetConfigTxn:()=>y,makeAssetConfigTxnWithSuggestedParamsFromObject:()=>m,makeAssetDestroyTxnWithSuggestedParams:()=>v,makeAssetDestroyTxn:()=>b,makeAssetDestroyTxnWithSuggestedParamsFromObject:()=>w,makeAssetFreezeTxnWithSuggestedParams:()=>_,makeAssetFreezeTxn:()=>x,makeAssetFreezeTxnWithSuggestedParamsFromObject:()=>E,makeAssetTransferTxnWithSuggestedParams:()=>S,makeAssetTransferTxn:()=>T,makeAssetTransferTxnWithSuggestedParamsFromObject:()=>A,makeApplicationCreateTxn:()=>C,makeApplicationCreateTxnFromObject:()=>k,makeApplicationUpdateTxn:()=>R,makeApplicationUpdateTxnFromObject:()=>P,makeApplicationDeleteTxn:()=>I,makeApplicationDeleteTxnFromObject:()=>O,makeApplicationOptInTxn:()=>M,makeApplicationOptInTxnFromObject:()=>D,makeApplicationCloseOutTxn:()=>B,makeApplicationCloseOutTxnFromObject:()=>L,makeApplicationClearStateTxn:()=>N,makeApplicationClearStateTxnFromObject:()=>U,makeApplicationNoOpTxn:()=>F,makeApplicationNoOpTxnFromObject:()=>z,OnApplicationComplete:()=>n.hq,makeApplicationCallTxnFromObject:()=>j});var r=i(9417),n=i(1624),s=i(1824);function o(t,e,i,n,o,a,h){const c={from:t,to:e,amount:i,closeRemainderTo:n,note:o,suggestedParams:a,type:s.i.pay,reKeyTo:h};return new r.Transaction(c)}function a(t,e,i,r,n,s,a,h,c,l,u){return o(t,e,r,n,h,{genesisHash:c,genesisID:l,firstRound:s,lastRound:a,fee:i},u)}function h(t){return o(t.from,t.to,t.amount,t.closeRemainderTo,t.note,t.suggestedParams,t.rekeyTo)}function c(t,e,i,n,o,a,h,c,l,u=!1,d){const f={from:t,note:e,voteKey:i,selectionKey:n,voteFirst:o,voteLast:a,voteKeyDilution:h,suggestedParams:c,type:s.i.keyreg,reKeyTo:l,nonParticipation:u,stateProofKey:d};return new r.Transaction(f)}function l(t,e,i,r,n,s,o,a,h,l,u,d,f,p=!1,g){return c(t,n,a,h,l,u,d,{genesisHash:s,genesisID:o,firstRound:i,lastRound:r,fee:e},f,p,g)}function u(t){return c(t.from,t.note,t.voteKey,t.selectionKey,t.voteFirst,t.voteLast,t.voteKeyDilution,t.suggestedParams,t.rekeyTo,t.nonParticipation,t.stateProofKey)}function d(t,e,i,n,o,a,h,c,l,u,d,f,p,g,y){const m={from:t,note:e,suggestedParams:g,assetTotal:i,assetDecimals:n,assetDefaultFrozen:o,assetUnitName:u,assetName:d,assetURL:f,assetMetadataHash:p,assetManager:a,assetReserve:h,assetFreeze:c,assetClawback:l,type:s.i.acfg,reKeyTo:y};return new r.Transaction(m)}function f(t,e,i,r,n,s,o,a,h,c,l,u,f,p,g,y,m,v,b){return d(t,n,a,h,c,l,u,f,p,g,y,m,v,{genesisHash:s,genesisID:o,firstRound:i,lastRound:r,fee:e},b)}function p(t){return d(t.from,t.note,t.total,t.decimals,t.defaultFrozen,t.manager,t.reserve,t.freeze,t.clawback,t.unitName,t.assetName,t.assetURL,t.assetMetadataHash,t.suggestedParams,t.rekeyTo)}function g(t,e,i,n,o,a,h,c,l=!0,u){if(l&&(void 0===n||void 0===o||void 0===a||void 0===h))throw Error("strict empty address checking was turned on, but at least one empty address was provided");const d={from:t,suggestedParams:c,assetIndex:i,assetManager:n,assetReserve:o,assetFreeze:a,assetClawback:h,type:s.i.acfg,note:e,reKeyTo:u};return new r.Transaction(d)}function y(t,e,i,r,n,s,o,a,h,c,l,u,d=!0,f){return g(t,n,a,h,c,l,u,{genesisHash:s,genesisID:o,firstRound:i,lastRound:r,fee:e},d,f)}function m(t){return g(t.from,t.note,t.assetIndex,t.manager,t.reserve,t.freeze,t.clawback,t.suggestedParams,t.strictEmptyAddressChecking,t.rekeyTo)}function v(t,e,i,n,o){const a={from:t,suggestedParams:n,assetIndex:i,type:s.i.acfg,note:e,reKeyTo:o};return new r.Transaction(a)}function b(t,e,i,r,n,s,o,a,h){return v(t,n,a,{genesisHash:s,genesisID:o,firstRound:i,lastRound:r,fee:e},h)}function w(t){return v(t.from,t.note,t.assetIndex,t.suggestedParams,t.rekeyTo)}function _(t,e,i,n,o,a,h){const c={from:t,type:s.i.afrz,freezeAccount:n,assetIndex:i,freezeState:o,note:e,suggestedParams:a,reKeyTo:h};return new r.Transaction(c)}function x(t,e,i,r,n,s,o,a,h,c,l){return _(t,n,a,h,c,{genesisHash:s,genesisID:o,firstRound:i,lastRound:r,fee:e},l)}function E(t){return _(t.from,t.note,t.assetIndex,t.freezeTarget,t.freezeState,t.suggestedParams,t.rekeyTo)}function S(t,e,i,n,o,a,h,c,l){const u={type:s.i.axfer,from:t,to:e,amount:o,suggestedParams:c,assetIndex:h,note:a,assetRevocationTarget:n,closeRemainderTo:i,reKeyTo:l};return new r.Transaction(u)}function T(t,e,i,r,n,s,o,a,h,c,l,u,d){return S(t,e,i,r,s,h,u,{genesisHash:c,genesisID:l,firstRound:o,lastRound:a,fee:n},d)}function A(t){return S(t.from,t.to,t.closeRemainderTo,t.revocationTarget,t.amount,t.note,t.assetIndex,t.suggestedParams,t.rekeyTo)}function C(t,e,i,n,o,a,h,c,l,u,d,f,p,g,y,m,v){const b={type:s.i.appl,from:t,suggestedParams:e,appIndex:0,appOnComplete:i,appLocalInts:a,appLocalByteSlices:h,appGlobalInts:c,appGlobalByteSlices:l,appApprovalProgram:n,appClearProgram:o,appArgs:u,appAccounts:d,appForeignApps:f,appForeignAssets:p,note:g,lease:y,reKeyTo:m,extraPages:v};return new r.Transaction(b)}function k(t){return C(t.from,t.suggestedParams,t.onComplete,t.approvalProgram,t.clearProgram,t.numLocalInts,t.numLocalByteSlices,t.numGlobalInts,t.numGlobalByteSlices,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo,t.extraPages)}function R(t,e,i,o,a,h,c,l,u,d,f,p){const g={type:s.i.appl,from:t,suggestedParams:e,appIndex:i,appApprovalProgram:o,appOnComplete:n.hq.UpdateApplicationOC,appClearProgram:a,appArgs:h,appAccounts:c,appForeignApps:l,appForeignAssets:u,note:d,lease:f,reKeyTo:p};return new r.Transaction(g)}function P(t){return R(t.from,t.suggestedParams,t.appIndex,t.approvalProgram,t.clearProgram,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo)}function I(t,e,i,o,a,h,c,l,u,d){const f={type:s.i.appl,from:t,suggestedParams:e,appIndex:i,appOnComplete:n.hq.DeleteApplicationOC,appArgs:o,appAccounts:a,appForeignApps:h,appForeignAssets:c,note:l,lease:u,reKeyTo:d};return new r.Transaction(f)}function O(t){return I(t.from,t.suggestedParams,t.appIndex,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo)}function M(t,e,i,o,a,h,c,l,u,d){const f={type:s.i.appl,from:t,suggestedParams:e,appIndex:i,appOnComplete:n.hq.OptInOC,appArgs:o,appAccounts:a,appForeignApps:h,appForeignAssets:c,note:l,lease:u,reKeyTo:d};return new r.Transaction(f)}function D(t){return M(t.from,t.suggestedParams,t.appIndex,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo)}function B(t,e,i,o,a,h,c,l,u,d){const f={type:s.i.appl,from:t,suggestedParams:e,appIndex:i,appOnComplete:n.hq.CloseOutOC,appArgs:o,appAccounts:a,appForeignApps:h,appForeignAssets:c,note:l,lease:u,reKeyTo:d};return new r.Transaction(f)}function L(t){return B(t.from,t.suggestedParams,t.appIndex,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo)}function N(t,e,i,o,a,h,c,l,u,d){const f={type:s.i.appl,from:t,suggestedParams:e,appIndex:i,appOnComplete:n.hq.ClearStateOC,appArgs:o,appAccounts:a,appForeignApps:h,appForeignAssets:c,note:l,lease:u,reKeyTo:d};return new r.Transaction(f)}function U(t){return N(t.from,t.suggestedParams,t.appIndex,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo)}function F(t,e,i,o,a,h,c,l,u,d){const f={type:s.i.appl,from:t,suggestedParams:e,appIndex:i,appOnComplete:n.hq.NoOpOC,appArgs:o,appAccounts:a,appForeignApps:h,appForeignAssets:c,note:l,lease:u,reKeyTo:d};return new r.Transaction(f)}function z(t){return F(t.from,t.suggestedParams,t.appIndex,t.appArgs,t.accounts,t.foreignApps,t.foreignAssets,t.note,t.lease,t.rekeyTo)}function j(t){const e={type:s.i.appl,from:t.from,suggestedParams:t.suggestedParams,appIndex:t.appIndex,appOnComplete:t.onComplete,appLocalInts:t.numLocalInts,appLocalByteSlices:t.numLocalByteSlices,appGlobalInts:t.numGlobalInts,appGlobalByteSlices:t.numGlobalByteSlices,appApprovalProgram:t.approvalProgram,appClearProgram:t.clearProgram,appArgs:t.appArgs,appAccounts:t.accounts,appForeignApps:t.foreignApps,appForeignAssets:t.foreignAssets,note:t.note,lease:t.lease,reKeyTo:t.rekeyTo,extraPages:t.extraPages};return new r.Transaction(e)}},3510:(t,e,i)=>{"use strict";i.d(e,{vC:()=>g,w3:()=>l,OF:()=>p,Ch:()=>d,QX:()=>f,mE:()=>u});const r=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];var n=i(9404),s=i(7116);const o="failed to decode mnemonic";function a(t){const e=[];let i=0,r=0;return t.forEach((function(t){i|=t<<r,r+=8,r>=11&&(e.push(2047&i),i>>=11,r-=11)})),r&&e.push(i),e}function h(t){return t.map((t=>r[t]))}function c(t){return h(a(n.genericHash(t)))[0]}function l(t){if(t.length!==n.SEED_BTYES_LENGTH)throw new RangeError(`Seed length must be ${n.SEED_BTYES_LENGTH}`);const e=h(a(t)),i=c(t);return`${e.join(" ")} ${i}`}function u(t){const e=t.split(" "),i=e.slice(0,24);for(const t of i)if(-1===r.indexOf(t))throw new Error("the mnemonic contains a word that is not in the wordlist");const n=e[e.length-1];let s=function(t){const e=[];let i=0,r=0;return t.forEach((function(t){for(i|=t<<r,r+=11;r>=8;)e.push(255&i),i>>=8,r-=8})),r&&e.push(i),new Uint8Array(e)}(i.map((t=>r.indexOf(t))));if(33!==s.length)throw new Error(o);if(0!==s[s.length-1])throw new Error(o);if(s=s.slice(0,s.length-1),c(s)===n)return s;throw new Error(o)}function d(t){const e=u(t),i=n.keyPairFromSeed(e);return{addr:s.encodeAddress(i.publicKey),sk:i.secretKey}}function f(t){return l(t.slice(0,n.SEED_BTYES_LENGTH))}function p(t){return u(t)}function g(t){return l(t)}},4158:(t,e,i)=>{"use strict";i.d(e,{J6:()=>d,F2:()=>f,PU:()=>p,PO:()=>g,vH:()=>y});var r=i(9404),n=i(7116),s=i(3033),o=i(9417),a=i(413),h=i(2486).Buffer;const c="Cannot merge txs. Multisig preimages differ",l="Cannot mutate a multisig field as it would invalidate all existing signatures.";class u extends o.Transaction{addLease(){throw new Error(l)}addRekey(){throw new Error(l)}signTxn(t){throw new Error("Cannot sign a multisig transaction using `signTxn`. Use `partialSignTxn` instead.")}partialSignTxn({version:t,threshold:e,pks:i},o){const a=r.keyPairFromSecretKey(o).publicKey;return function(t,{rawSig:e,myPk:i},{version:o,threshold:a,pks:c}){let l=!1;const u=c.map((t=>r.bytesEqual(t,i)?(l=!0,{pk:h.from(t),s:e}):{pk:h.from(t)}));if(!1===l)throw new Error("Key does not exist");const d={msig:{v:o,thr:a,subsig:u},txn:t},f=n.fromMultisigPreImg({version:o,threshold:a,pks:c});return n.encodeAddress(t.snd)!==n.encodeAddress(f)&&(d.sgnr=h.from(f)),new Uint8Array(s.encode(d))}(this.get_obj_for_encoding(),{rawSig:this.rawSignTxn(o),myPk:a},{version:t,threshold:e,pks:i})}static from_obj_for_encoding(t){return super.from_obj_for_encoding(t)}}function d(t){if(t.length<2)throw new Error("Not enough multisig transactions to merge. Need at least two");const e=s.decode(t[0]),i=u.from_obj_for_encoding(e.txn).txID(),r=e.sgnr?n.encodeAddress(e.sgnr):void 0,o={version:e.msig.v,threshold:e.msig.thr,pks:e.msig.subsig.map((t=>t.pk))},a=n.encodeAddress(n.fromMultisigPreImg(o));let l=e.msig.subsig;for(let o=0;o<t.length;o++){const d=s.decode(t[o]);if(u.from_obj_for_encoding(d.txn).txID()!==i)throw new Error("Cannot merge txs. txIDs differ");if(r!==(d.sgnr?n.encodeAddress(d.sgnr):void 0))throw new Error("Cannot merge txs. Auth addrs differ");if(d.msig.subsig.length!==e.msig.subsig.length)throw new Error(c);const f={version:d.msig.v,threshold:d.msig.thr,pks:d.msig.subsig.map((t=>t.pk))};if(a!==n.encodeAddress(n.fromMultisigPreImg(f)))throw new Error(c);l=d.msig.subsig.map(((t,i)=>{const r=e.msig.subsig[i];if(r.s){if(t.s&&0!==h.compare(h.from(t.s),h.from(r.s)))throw new Error("Cannot merge txs. subsigs are mismatched.");return{pk:r.pk,s:r.s}}return t.s?{pk:r.pk,s:t.s}:r}))}const d={msig:{v:e.msig.v,thr:e.msig.thr,subsig:l},txn:e.txn};return void 0!==r&&(d.sgnr=h.from(n.decodeAddress(r).publicKey)),new Uint8Array(s.encode(d))}function f(t,e,i){const s=e.v,o=e.thr,h=e.subsig,c=h.map((t=>t.pk));if(e.subsig.length<o)return!1;let l;try{l=n.fromMultisigPreImg({version:s,threshold:o,pks:c})}catch(t){return!1}if(!a.arrayEqual(l,i))return!1;let u=0;for(const t of h)void 0!==t.s&&(u+=1);if(u<o)return!1;let d=0;for(const e of h)void 0!==e.s&&r.verify(t,e.s,e.pk)&&(d+=1);return!(d<o)}function p(t,{version:e,threshold:i,addrs:r},s){const a=n.fromMultisigPreImgAddrs({version:e,threshold:i,addrs:r});Object.prototype.hasOwnProperty.call(t,"from")||(t.from=a);const h=r.map((t=>n.decodeAddress(t).publicKey));let c,l;return t instanceof o.Transaction?(c=t,l=u.prototype.partialSignTxn.call(c,{version:e,threshold:i,pks:h},s)):(c=new u(t),l=c.partialSignTxn({version:e,threshold:i,pks:h},s)),{txID:c.txID().toString(),blob:l}}function g(t,{version:e,threshold:i,addrs:r},o){const a=r.map((t=>n.decodeAddress(t).publicKey)),h=s.decode(t),c=u.from_obj_for_encoding(h.txn),l=c.partialSignTxn({version:e,threshold:i,pks:a},o);return{txID:c.txID().toString(),blob:d([t,l])}}function y({version:t,threshold:e,addrs:i}){return n.fromMultisigPreImgAddrs({version:t,threshold:e,addrs:i})}},9404:(t,e,i)=>{"use strict";i.r(e),i.d(e,{genericHash:()=>a,randomBytes:()=>h,keyPairFromSeed:()=>c,keyPair:()=>l,keyPairFromSecretKey:()=>u,sign:()=>d,bytesEqual:()=>f,verify:()=>p,PUBLIC_KEY_LENGTH:()=>g,SECRET_KEY_LENGTH:()=>y,HASH_BYTES_LENGTH:()=>m,SEED_BTYES_LENGTH:()=>v});var r=i(7765),n=i.n(r),s=i(9757),o=i.n(s);function a(t){return o().sha512_256.array(t)}function h(t){return n().randomBytes(t)}function c(t){return n().sign.keyPair.fromSeed(t)}function l(){return c(h(n().box.secretKeyLength))}function u(t){return n().sign.keyPair.fromSecretKey(t)}function d(t,e){return n().sign.detached(t,e)}function f(t,e){return n().verify(t,e)}function p(t,e,i){return n().sign.detached.verify(t,e,i)}const g=n().sign.publicKeyLength,y=n().sign.secretKeyLength,m=32,v=32},834:(t,e,i)=>{"use strict";i.d(e,{x7:()=>s,i1:()=>o,Vj:()=>a,Xw:()=>h});var r=i(8800),n=i(4158);function s(t){return(e,i)=>{const r=[];for(const n of i)r.push(e[n].signTxn(t.sk));return Promise.resolve(r)}}function o(t){return(e,i)=>{const n=[];for(const s of i){const{blob:i}=(0,r.signLogicSigTransactionObject)(e[s],t);n.push(i)}return Promise.resolve(n)}}function a(t,e){return(i,r)=>{const s=[];for(const o of r){const r=i[o],a=[];for(const i of e){const{blob:e}=(0,n.PU)(r,t,i);a.push(e)}s.push((0,n.J6)(a))}return Promise.resolve(s)}}function h(t){return"object"==typeof t&&2===Object.keys(t).length&&"object"==typeof t.txn&&"function"==typeof t.signer}},9417:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ALGORAND_MIN_TX_FEE:()=>u,Transaction:()=>f,encodeUnsignedTransaction:()=>p,decodeUnsignedTransaction:()=>g,decodeSignedTransaction:()=>y,instantiateTxnIfNeeded:()=>m,default:()=>v});var r=i(7267),n=i.n(r),s=i(7116),o=i(3033),a=i(9404),h=i(413),c=i(1624),l=i(2486).Buffer;const u=1e3;function d(t,e,i){if(null==t)return;let r;if("string"==typeof t?r=l.from(t,"base64"):t.constructor===Uint8Array?r=l.from(t):l.isBuffer(t)&&(r=t),null==r||r.byteLength!==i)throw Error(`${e} must be a ${i} byte Uint8Array or Buffer or base64 string.`);return r}class f{constructor({...t}){this.name="Transaction",this.tag=l.from("TX");const e={type:c.iU.pay,flatFee:!1,nonParticipation:!1};if(void 0===t.type&&(t.type=e.type),void 0===t.flatFee&&(t.flatFee=e.flatFee),t.type===c.iU.keyreg&&void 0!==t.voteKey&&void 0===t.nonParticipation&&(t.nonParticipation=e.nonParticipation),void 0!==t.suggestedParams){const e=t;e.genesisHash=e.suggestedParams.genesisHash,e.fee=e.suggestedParams.fee,void 0!==e.suggestedParams.flatFee&&(e.flatFee=e.suggestedParams.flatFee),e.firstRound=e.suggestedParams.firstRound,e.lastRound=e.suggestedParams.lastRound,e.genesisID=e.suggestedParams.genesisID}const i=t;if(i.from=s.decodeAddress(i.from),void 0!==i.to&&(i.to=s.decodeAddress(i.to)),void 0!==i.closeRemainderTo&&(i.closeRemainderTo=s.decodeAddress(i.closeRemainderTo)),void 0!==i.assetManager&&(i.assetManager=s.decodeAddress(i.assetManager)),void 0!==i.assetReserve&&(i.assetReserve=s.decodeAddress(i.assetReserve)),void 0!==i.assetFreeze&&(i.assetFreeze=s.decodeAddress(i.assetFreeze)),void 0!==i.assetClawback&&(i.assetClawback=s.decodeAddress(i.assetClawback)),void 0!==i.assetRevocationTarget&&(i.assetRevocationTarget=s.decodeAddress(i.assetRevocationTarget)),void 0!==i.freezeAccount&&(i.freezeAccount=s.decodeAddress(i.freezeAccount)),void 0!==i.reKeyTo&&(i.reKeyTo=s.decodeAddress(i.reKeyTo)),void 0===i.genesisHash)throw Error("genesis hash must be specified and in a base64 string.");if(i.genesisHash=l.from(i.genesisHash,"base64"),void 0!==i.amount&&(!(Number.isSafeInteger(i.amount)||"bigint"==typeof i.amount&&i.amount<=BigInt("0xffffffffffffffff"))||i.amount<0))throw Error("Amount must be a positive number and smaller than 2^64-1. If the number is larger than 2^53-1, use bigint.");if(!Number.isSafeInteger(i.fee)||i.fee<0)throw Error("fee must be a positive number and smaller than 2^53-1");if(!Number.isSafeInteger(i.firstRound)||i.firstRound<0)throw Error("firstRound must be a positive number");if(!Number.isSafeInteger(i.lastRound)||i.lastRound<0)throw Error("lastRound must be a positive number");if(void 0!==i.extraPages&&(!Number.isInteger(i.extraPages)||i.extraPages<0||i.extraPages>3))throw Error("extraPages must be an Integer between and including 0 to 3");if(void 0!==i.assetTotal&&(!(Number.isSafeInteger(i.assetTotal)||"bigint"==typeof i.assetTotal&&i.assetTotal<=BigInt("0xffffffffffffffff"))||i.assetTotal<0))throw Error("Total asset issuance must be a positive number and smaller than 2^64-1. If the number is larger than 2^53-1, use bigint.");if(void 0!==i.assetDecimals&&(!Number.isSafeInteger(i.assetDecimals)||i.assetDecimals<0||i.assetDecimals>19))throw Error(`assetDecimals must be a positive number and smaller than ${19..toString()}`);if(void 0!==i.assetIndex&&(!Number.isSafeInteger(i.assetIndex)||i.assetIndex<0))throw Error("Asset index must be a positive number and smaller than 2^53-1");if(void 0!==i.appIndex&&(!Number.isSafeInteger(i.appIndex)||i.appIndex<0))throw Error("Application index must be a positive number and smaller than 2^53-1");if(void 0!==i.appLocalInts&&(!Number.isSafeInteger(i.appLocalInts)||i.appLocalInts<0))throw Error("Application local ints count must be a positive number and smaller than 2^53-1");if(void 0!==i.appLocalByteSlices&&(!Number.isSafeInteger(i.appLocalByteSlices)||i.appLocalByteSlices<0))throw Error("Application local byte slices count must be a positive number and smaller than 2^53-1");if(void 0!==i.appGlobalInts&&(!Number.isSafeInteger(i.appGlobalInts)||i.appGlobalInts<0))throw Error("Application global ints count must be a positive number and smaller than 2^53-1");if(void 0!==i.appGlobalByteSlices&&(!Number.isSafeInteger(i.appGlobalByteSlices)||i.appGlobalByteSlices<0))throw Error("Application global byte slices count must be a positive number and smaller than 2^53-1");if(void 0!==i.appApprovalProgram&&i.appApprovalProgram.constructor!==Uint8Array)throw Error("appApprovalProgram must be a Uint8Array.");if(void 0!==i.appClearProgram&&i.appClearProgram.constructor!==Uint8Array)throw Error("appClearProgram must be a Uint8Array.");if(void 0!==i.appArgs){if(!Array.isArray(i.appArgs))throw Error("appArgs must be an Array of Uint8Array.");i.appArgs=i.appArgs.slice(),i.appArgs.forEach((t=>{if(t.constructor!==Uint8Array)throw Error("each element of AppArgs must be a Uint8Array.")}))}else i.appArgs=[];if(void 0!==i.appAccounts){if(!Array.isArray(i.appAccounts))throw Error("appAccounts must be an Array of addresses.");i.appAccounts=i.appAccounts.map((t=>s.decodeAddress(t)))}if(void 0!==i.appForeignApps){if(!Array.isArray(i.appForeignApps))throw Error("appForeignApps must be an Array of integers.");i.appForeignApps=i.appForeignApps.slice(),i.appForeignApps.forEach((t=>{if(!Number.isSafeInteger(t)||t<0)throw Error("each foreign application index must be a positive number and smaller than 2^53-1")}))}if(void 0!==i.appForeignAssets){if(!Array.isArray(i.appForeignAssets))throw Error("appForeignAssets must be an Array of integers.");i.appForeignAssets=i.appForeignAssets.slice(),i.appForeignAssets.forEach((t=>{if(!Number.isSafeInteger(t)||t<0)throw Error("each foreign asset index must be a positive number and smaller than 2^53-1")}))}if(void 0!==i.assetMetadataHash&&0!==i.assetMetadataHash.length){if("string"==typeof i.assetMetadataHash&&(i.assetMetadataHash=new Uint8Array(l.from(i.assetMetadataHash))),i.assetMetadataHash.constructor!==Uint8Array||32!==i.assetMetadataHash.byteLength)throw Error("assetMetadataHash must be a 32 byte Uint8Array or string.");i.assetMetadataHash.every((t=>0===t))&&(i.assetMetadataHash=void 0)}else i.assetMetadataHash=void 0;if(void 0!==i.note){if(i.note.constructor!==Uint8Array)throw Error("note must be a Uint8Array.")}else i.note=new Uint8Array(0);if(void 0!==i.lease){if(i.lease.constructor!==Uint8Array)throw Error("lease must be a Uint8Array.");if(32!==i.lease.length)throw Error(`lease must be of length ${32..toString()}.`);i.lease.every((t=>0===t))&&(i.lease=new Uint8Array(0))}else i.lease=new Uint8Array(0);if(i.voteKey=d(i.voteKey,"voteKey",32),i.selectionKey=d(i.selectionKey,"selectionKey",32),i.stateProofKey=d(i.stateProofKey,"stateProofKey",64),i.nonParticipation&&(i.voteKey||i.selectionKey||i.voteFirst||i.stateProofKey||i.voteLast||i.voteKeyDilution))throw new Error("nonParticipation is true but participation params are present.");if(!i.nonParticipation&&(i.voteKey||i.selectionKey||i.stateProofKey||i.voteFirst||i.voteLast||i.voteKeyDilution)&&!(i.voteKey&&i.selectionKey&&i.voteFirst&&i.voteLast&&i.voteKeyDilution))throw new Error("online key registration missing at least one of the following fields: voteKey, selectionKey, voteFirst, voteLast, voteKeyDilution");delete i.suggestedParams,Object.assign(this,h.removeUndefinedProperties(i)),i.flatFee||(this.fee*=this.estimateSize(),this.fee<u&&(this.fee=u)),this.group=void 0}get_obj_for_encoding(){if("pay"===this.type){const t={amt:this.amount,fee:this.fee,fv:this.firstRound,lv:this.lastRound,note:l.from(this.note),snd:l.from(this.from.publicKey),type:"pay",gen:this.genesisID,gh:this.genesisHash,lx:l.from(this.lease),grp:this.group};return void 0!==this.closeRemainderTo&&s.encodeAddress(this.closeRemainderTo.publicKey)!==s.ALGORAND_ZERO_ADDRESS_STRING&&(t.close=l.from(this.closeRemainderTo.publicKey)),void 0!==this.reKeyTo&&(t.rekey=l.from(this.reKeyTo.publicKey)),void 0!==this.to&&(t.rcv=l.from(this.to.publicKey)),t.note.length||delete t.note,t.amt||delete t.amt,t.fee||delete t.fee,t.fv||delete t.fv,t.gen||delete t.gen,void 0===t.grp&&delete t.grp,t.lx.length||delete t.lx,t.rekey||delete t.rekey,t}if("keyreg"===this.type){const t={fee:this.fee,fv:this.firstRound,lv:this.lastRound,note:l.from(this.note),snd:l.from(this.from.publicKey),type:this.type,gen:this.genesisID,gh:this.genesisHash,lx:l.from(this.lease),grp:this.group,votekey:this.voteKey,selkey:this.selectionKey,sprfkey:this.stateProofKey,votefst:this.voteFirst,votelst:this.voteLast,votekd:this.voteKeyDilution};return t.note.length||delete t.note,t.lx.length||delete t.lx,t.fee||delete t.fee,t.fv||delete t.fv,t.gen||delete t.gen,void 0===t.grp&&delete t.grp,void 0!==this.reKeyTo&&(t.rekey=l.from(this.reKeyTo.publicKey)),this.nonParticipation&&(t.nonpart=!0),t.selkey||delete t.selkey,t.votekey||delete t.votekey,t.sprfkey||delete t.sprfkey,t.votefst||delete t.votefst,t.votelst||delete t.votelst,t.votekd||delete t.votekd,t}if("acfg"===this.type){const t={fee:this.fee,fv:this.firstRound,lv:this.lastRound,note:l.from(this.note),snd:l.from(this.from.publicKey),type:this.type,gen:this.genesisID,gh:this.genesisHash,lx:l.from(this.lease),grp:this.group,caid:this.assetIndex,apar:{t:this.assetTotal,df:this.assetDefaultFrozen,dc:this.assetDecimals}};return void 0!==this.assetManager&&(t.apar.m=l.from(this.assetManager.publicKey)),void 0!==this.assetReserve&&(t.apar.r=l.from(this.assetReserve.publicKey)),void 0!==this.assetFreeze&&(t.apar.f=l.from(this.assetFreeze.publicKey)),void 0!==this.assetClawback&&(t.apar.c=l.from(this.assetClawback.publicKey)),void 0!==this.assetName&&(t.apar.an=this.assetName),void 0!==this.assetUnitName&&(t.apar.un=this.assetUnitName),void 0!==this.assetURL&&(t.apar.au=this.assetURL),void 0!==this.assetMetadataHash&&(t.apar.am=l.from(this.assetMetadataHash)),t.note.length||delete t.note,t.lx.length||delete t.lx,t.amt||delete t.amt,t.fee||delete t.fee,t.fv||delete t.fv,t.gen||delete t.gen,void 0!==this.reKeyTo&&(t.rekey=l.from(this.reKeyTo.publicKey)),t.caid||delete t.caid,t.apar.t||t.apar.un||t.apar.an||t.apar.df||t.apar.m||t.apar.r||t.apar.f||t.apar.c||t.apar.au||t.apar.am||t.apar.dc?(t.apar.t||delete t.apar.t,t.apar.dc||delete t.apar.dc,t.apar.un||delete t.apar.un,t.apar.an||delete t.apar.an,t.apar.df||delete t.apar.df,t.apar.m||delete t.apar.m,t.apar.r||delete t.apar.r,t.apar.f||delete t.apar.f,t.apar.c||delete t.apar.c,t.apar.au||delete t.apar.au,t.apar.am||delete t.apar.am):delete t.apar,void 0===t.grp&&delete t.grp,t}if("axfer"===this.type){const t={aamt:this.amount,fee:this.fee,fv:this.firstRound,lv:this.lastRound,note:l.from(this.note),snd:l.from(this.from.publicKey),arcv:l.from(this.to.publicKey),type:this.type,gen:this.genesisID,gh:this.genesisHash,lx:l.from(this.lease),grp:this.group,xaid:this.assetIndex};return void 0!==this.closeRemainderTo&&(t.aclose=l.from(this.closeRemainderTo.publicKey)),void 0!==this.assetRevocationTarget&&(t.asnd=l.from(this.assetRevocationTarget.publicKey)),t.note.length||delete t.note,t.lx.length||delete t.lx,t.aamt||delete t.aamt,t.amt||delete t.amt,t.fee||delete t.fee,t.fv||delete t.fv,t.gen||delete t.gen,void 0===t.grp&&delete t.grp,t.aclose||delete t.aclose,t.asnd||delete t.asnd,t.rekey||delete t.rekey,void 0!==this.reKeyTo&&(t.rekey=l.from(this.reKeyTo.publicKey)),t}if("afrz"===this.type){const t={fee:this.fee,fv:this.firstRound,lv:this.lastRound,note:l.from(this.note),snd:l.from(this.from.publicKey),type:this.type,gen:this.genesisID,gh:this.genesisHash,lx:l.from(this.lease),grp:this.group,faid:this.assetIndex,afrz:this.freezeState};return void 0!==this.freezeAccount&&(t.fadd=l.from(this.freezeAccount.publicKey)),t.note.length||delete t.note,t.lx.length||delete t.lx,t.amt||delete t.amt,t.fee||delete t.fee,t.fv||delete t.fv,t.gen||delete t.gen,t.afrz||delete t.afrz,void 0===t.grp&&delete t.grp,void 0!==this.reKeyTo&&(t.rekey=l.from(this.reKeyTo.publicKey)),t}if("appl"===this.type){const t={fee:this.fee,fv:this.firstRound,lv:this.lastRound,note:l.from(this.note),snd:l.from(this.from.publicKey),type:this.type,gen:this.genesisID,gh:this.genesisHash,lx:l.from(this.lease),grp:this.group,apid:this.appIndex,apan:this.appOnComplete,apls:{nui:this.appLocalInts,nbs:this.appLocalByteSlices},apgs:{nui:this.appGlobalInts,nbs:this.appGlobalByteSlices},apfa:this.appForeignApps,apas:this.appForeignAssets,apep:this.extraPages};return void 0!==this.reKeyTo&&(t.rekey=l.from(this.reKeyTo.publicKey)),void 0!==this.appApprovalProgram&&(t.apap=l.from(this.appApprovalProgram)),void 0!==this.appClearProgram&&(t.apsu=l.from(this.appClearProgram)),void 0!==this.appArgs&&(t.apaa=this.appArgs.map((t=>l.from(t)))),void 0!==this.appAccounts&&(t.apat=this.appAccounts.map((t=>l.from(t.publicKey)))),t.note.length||delete t.note,t.lx.length||delete t.lx,t.amt||delete t.amt,t.fee||delete t.fee,t.fv||delete t.fv,t.gen||delete t.gen,t.apid||delete t.apid,t.apls.nui||delete t.apls.nui,t.apls.nbs||delete t.apls.nbs,t.apls.nui||t.apls.nbs||delete t.apls,t.apgs.nui||delete t.apgs.nui,t.apgs.nbs||delete t.apgs.nbs,t.apaa&&t.apaa.length||delete t.apaa,t.apgs.nui||t.apgs.nbs||delete t.apgs,t.apap||delete t.apap,t.apsu||delete t.apsu,t.apan||delete t.apan,t.apfa&&t.apfa.length||delete t.apfa,t.apas&&t.apas.length||delete t.apas,t.apat&&t.apat.length||delete t.apat,t.apep||delete t.apep,void 0===t.grp&&delete t.grp,t}}static from_obj_for_encoding(t){const e=Object.create(this.prototype);if(e.name="Transaction",e.tag=l.from("TX"),e.genesisID=t.gen,e.genesisHash=l.from(t.gh),!(0,c.v8)(t.type))throw new Error(`Unrecognized transaction type: ${t.type}`);return e.type=t.type,e.fee=t.fee,e.firstRound=t.fv,e.lastRound=t.lv,e.note=new Uint8Array(t.note),e.lease=new Uint8Array(t.lx),e.from=s.decodeAddress(s.encodeAddress(new Uint8Array(t.snd))),void 0!==t.grp&&(e.group=l.from(t.grp)),void 0!==t.rekey&&(e.reKeyTo=s.decodeAddress(s.encodeAddress(new Uint8Array(t.rekey)))),"pay"===t.type?(e.amount=t.amt,e.to=s.decodeAddress(s.encodeAddress(new Uint8Array(t.rcv))),void 0!==t.close&&(e.closeRemainderTo=s.decodeAddress(s.encodeAddress(t.close)))):"keyreg"===t.type?(void 0!==t.votekey&&(e.voteKey=l.from(t.votekey)),void 0!==t.selkey&&(e.selectionKey=l.from(t.selkey)),void 0!==t.sprfkey&&(e.stateProofKey=l.from(t.sprfkey)),void 0!==t.votekd&&(e.voteKeyDilution=t.votekd),void 0!==t.votefst&&(e.voteFirst=t.votefst),void 0!==t.votelst&&(e.voteLast=t.votelst),void 0!==t.nonpart&&(e.nonParticipation=t.nonpart)):"acfg"===t.type?(void 0!==t.caid&&(e.assetIndex=t.caid),void 0!==t.apar&&(e.assetTotal=t.apar.t,e.assetDefaultFrozen=t.apar.df,void 0!==t.apar.dc&&(e.assetDecimals=t.apar.dc),void 0!==t.apar.m&&(e.assetManager=s.decodeAddress(s.encodeAddress(new Uint8Array(t.apar.m)))),void 0!==t.apar.r&&(e.assetReserve=s.decodeAddress(s.encodeAddress(new Uint8Array(t.apar.r)))),void 0!==t.apar.f&&(e.assetFreeze=s.decodeAddress(s.encodeAddress(new Uint8Array(t.apar.f)))),void 0!==t.apar.c&&(e.assetClawback=s.decodeAddress(s.encodeAddress(new Uint8Array(t.apar.c)))),void 0!==t.apar.un&&(e.assetUnitName=t.apar.un),void 0!==t.apar.an&&(e.assetName=t.apar.an),void 0!==t.apar.au&&(e.assetURL=t.apar.au),void 0!==t.apar.am&&(e.assetMetadataHash=t.apar.am))):"axfer"===t.type?(void 0!==t.xaid&&(e.assetIndex=t.xaid),void 0!==t.aamt&&(e.amount=t.aamt),void 0!==t.aclose&&(e.closeRemainderTo=s.decodeAddress(s.encodeAddress(new Uint8Array(t.aclose)))),void 0!==t.asnd&&(e.assetRevocationTarget=s.decodeAddress(s.encodeAddress(new Uint8Array(t.asnd)))),e.to=s.decodeAddress(s.encodeAddress(new Uint8Array(t.arcv)))):"afrz"===t.type?(void 0!==t.afrz&&(e.freezeState=t.afrz),void 0!==t.faid&&(e.assetIndex=t.faid),e.freezeAccount=s.decodeAddress(s.encodeAddress(new Uint8Array(t.fadd)))):"appl"===t.type&&(void 0!==t.apid&&(e.appIndex=t.apid),void 0!==t.apan&&(e.appOnComplete=t.apan),void 0!==t.apls&&(void 0!==t.apls.nui&&(e.appLocalInts=t.apls.nui),void 0!==t.apls.nbs&&(e.appLocalByteSlices=t.apls.nbs)),void 0!==t.apgs&&(void 0!==t.apgs.nui&&(e.appGlobalInts=t.apgs.nui),void 0!==t.apgs.nbs&&(e.appGlobalByteSlices=t.apgs.nbs)),void 0!==t.apep&&(e.extraPages=t.apep),void 0!==t.apap&&(e.appApprovalProgram=new Uint8Array(t.apap)),void 0!==t.apsu&&(e.appClearProgram=new Uint8Array(t.apsu)),void 0!==t.apaa&&(e.appArgs=t.apaa.map((t=>new Uint8Array(t)))),void 0!==t.apat&&(e.appAccounts=t.apat.map((t=>s.decodeAddress(s.encodeAddress(new Uint8Array(t)))))),void 0!==t.apfa&&(e.appForeignApps=t.apfa),void 0!==t.apas&&(e.appForeignAssets=t.apas)),e}estimateSize(){return this.toByte().length+75}bytesToSign(){const t=this.toByte();return l.from(h.concatArrays(this.tag,t))}toByte(){return o.encode(this.get_obj_for_encoding())}rawSignTxn(t){const e=this.bytesToSign(),i=a.sign(e,t);return l.from(i)}signTxn(t){const e={sig:this.rawSignTxn(t),txn:this.get_obj_for_encoding()},i=a.keyPairFromSecretKey(t).publicKey;return s.encodeAddress(i)!==s.encodeAddress(this.from.publicKey)&&(e.sgnr=l.from(i)),new Uint8Array(o.encode(e))}rawTxID(){const t=this.toByte(),e=l.from(h.concatArrays(this.tag,t));return l.from(a.genericHash(e))}txID(){const t=this.rawTxID();return n().encode(t).slice(0,52)}addLease(t,e=0){let i;if(void 0!==t){if(t.constructor!==Uint8Array)throw Error("lease must be a Uint8Array.");if(32!==t.length)throw Error(`lease must be of length ${32..toString()}.`);i=new Uint8Array(t)}else i=new Uint8Array(0);this.lease=i,0!==e&&(this.fee+=37*e)}addRekey(t,e=0){void 0!==t&&(this.reKeyTo=s.decodeAddress(t)),0!==e&&(this.fee+=37*e)}_getDictForDisplay(){const t={...this};return t.tag=t.tag.toString(),t.from=s.encodeAddress(t.from.publicKey),void 0!==t.to&&(t.to=s.encodeAddress(t.to.publicKey)),void 0!==t.freezeAccount&&(t.freezeAccount=s.encodeAddress(t.freezeAccount.publicKey)),void 0!==t.closeRemainderTo&&(t.closeRemainderTo=s.encodeAddress(t.closeRemainderTo.publicKey)),void 0!==t.assetManager&&(t.assetManager=s.encodeAddress(t.assetManager.publicKey)),void 0!==t.assetReserve&&(t.assetReserve=s.encodeAddress(t.assetReserve.publicKey)),void 0!==t.assetFreeze&&(t.assetFreeze=s.encodeAddress(t.assetFreeze.publicKey)),void 0!==t.assetClawback&&(t.assetClawback=s.encodeAddress(t.assetClawback.publicKey)),void 0!==t.assetRevocationTarget&&(t.assetRevocationTarget=s.encodeAddress(t.assetRevocationTarget.publicKey)),void 0!==t.reKeyTo&&(t.reKeyTo=s.encodeAddress(t.reKeyTo.publicKey)),t.genesisHash=t.genesisHash.toString("base64"),t}prettyPrint(){console.log(this._getDictForDisplay())}toString(){return JSON.stringify(this._getDictForDisplay())}}function p(t){const e=t.get_obj_for_encoding();return o.encode(e)}function g(t){const e=o.decode(t);return f.from_obj_for_encoding(e)}function y(t){const e=o.decode(t);return{...e,txn:f.from_obj_for_encoding(e.txn)}}function m(t){return t instanceof f?t:new f(t)}const v=f},2380:(t,e,i)=>{"use strict";i.d(e,{i:()=>r.i});var r=i(1824)},7197:(t,e,i)=>{"use strict";var r;i.d(e,{Z:()=>n}),function(t){t.DEFAULT="default",t.SAFE="safe",t.MIXED="mixed",t.BIGINT="bigint"}(r||(r={}));const n=r},1624:(t,e,i)=>{"use strict";var r,n;function s(t){return t===r.pay||t===r.keyreg||t===r.acfg||t===r.axfer||t===r.afrz||t===r.appl}i.d(e,{iU:()=>r,v8:()=>s,hq:()=>n}),function(t){t.pay="pay",t.keyreg="keyreg",t.acfg="acfg",t.axfer="axfer",t.afrz="afrz",t.appl="appl"}(r||(r={})),function(t){t[t.NoOpOC=0]="NoOpOC",t[t.OptInOC=1]="OptInOC",t[t.CloseOutOC=2]="CloseOutOC",t[t.ClearStateOC=3]="ClearStateOC",t[t.UpdateApplicationOC=4]="UpdateApplicationOC",t[t.DeleteApplicationOC=5]="DeleteApplicationOC"}(n||(n={}))},1824:(t,e,i)=>{"use strict";i.d(e,{i:()=>r.iU});var r=i(1624)},413:(t,e,i)=>{"use strict";i.r(e),i.d(e,{parseJSON:()=>a,arrayEqual:()=>h,concatArrays:()=>c,removeUndefinedProperties:()=>l,isNode:()=>u});var r=i(4360),n=i.n(r),s=i(7197);const o=n()({useNativeBigInt:!0,strict:!0});function a(t,e){const i=e&&e.intDecoding?e.intDecoding:s.Z.DEFAULT;return o.parse(t,((t,e)=>{if(null!=e&&"object"==typeof e&&null==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,Object.prototype),"bigint"==typeof e){if("bigint"===i||"mixed"===i&&e>Number.MAX_SAFE_INTEGER)return e;if("default"===i||"mixed"===i)return Number(e);throw new Error(`Integer exceeds maximum safe integer: ${e.toString()}. Try parsing with a different intDecoding option.`)}return"number"==typeof e&&"bigint"===i&&Number.isInteger(e)?BigInt(e):e}))}function h(t,e){return t.length===e.length&&Array.from(t).every(((t,i)=>t===e[i]))}function c(...t){const e=t.reduce(((t,e)=>t+e.length),0),i=new Uint8Array(e);let r=0;for(let e=0;e<t.length;e++)i.set(t[e],r),r+=t[e].length;return i}function l(t){const e={...t};return Object.keys(e).forEach((t=>{void 0===e[t]&&delete e[t]})),e}function u(){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node}},5062:(t,e,i)=>{"use strict";async function r(t,e,i){const r=await t.status().do();if(void 0===r)throw new Error("Unable to get node status");const n=r["last-round"]+1;let s=n;for(;s<n+i;){let i=!1;try{const r=await t.pendingTransactionInformation(e).do();if(r["confirmed-round"])return r;if(r["pool-error"])throw i=!0,new Error(`Transaction Rejected: ${r["pool-error"]}`)}catch(t){if(i)throw t}await t.statusAfterBlock(s).do(),s+=1}throw new Error(`Transaction not confirmed after ${i} rounds`)}i.d(e,{K:()=>r})},4654:()=>{}},__webpack_module_cache__={};function __nested_webpack_require_416982__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__nested_webpack_require_416982__),i.exports}__nested_webpack_require_416982__.amdO={},__nested_webpack_require_416982__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __nested_webpack_require_416982__.d(e,{a:e}),e},__nested_webpack_require_416982__.d=(t,e)=>{for(var i in e)__nested_webpack_require_416982__.o(e,i)&&!__nested_webpack_require_416982__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__nested_webpack_require_416982__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__nested_webpack_require_416982__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__nested_webpack_require_416982__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__nested_webpack_require_416982__.r(__webpack_exports__),__nested_webpack_require_416982__.d(__webpack_exports__,{default:()=>i});var t=__nested_webpack_require_416982__(6608),e={};for(const i in t)"default"!==i&&(e[i]=()=>t[i]);__nested_webpack_require_416982__.d(__webpack_exports__,e);const i=t})(),__webpack_exports__})()},module.exports=t()},32044:t=>{function e(t){const e=new globalThis.AbortController;function i(){e.abort();for(const e of t)e&&e.removeEventListener&&e.removeEventListener("abort",i)}for(const e of t)if(e&&e.addEventListener){if(e.aborted){i();break}e.addEventListener("abort",i)}return e.signal}t.exports=e,t.exports.anySignal=e},6323:t=>{"use strict";t.exports=t=>{if(!Array.isArray(t))throw new TypeError("Expected an array, got "+typeof t);for(let e=(t=[...t]).length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}},39809:(t,e,i)=>{"use strict";const r=e;r.bignum=i(13550),r.define=i(22500).define,r.base=i(71979),r.constants=i(36826),r.decoders=i(78307),r.encoders=i(56579)},22500:(t,e,i)=>{"use strict";const r=i(56579),n=i(78307),s=i(35717);function o(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new o(t,e)},o.prototype._createNamed=function(t){const e=this.name;function i(t){this._initNamed(t,e)}return s(i,t),i.prototype._initNamed=function(e,i){t.call(this,e,i)},new i(this)},o.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(n[t])),this.decoders[t]},o.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},o.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r[t])),this.encoders[t]},o.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}},36625:(t,e,i)=>{"use strict";const r=i(35717),n=i(98465).b,s=i(2399).Buffer;function o(t,e){n.call(this,e),s.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=s.byteLength(t);else{if(!s.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(o,n),e.C=o,o.isDecoderBuffer=function(t){return t instanceof o||"object"==typeof t&&s.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},o.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},o.prototype.restore=function(t){const e=new o(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,n.prototype.restore.call(this,t.reporter),e},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},o.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const i=new o(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},o.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.R=a,a.isEncoderBuffer=function(t){return t instanceof a||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},a.prototype.join=function(t,e){return t||(t=s.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(i){i.join(t,e),e+=i.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):s.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},71979:(t,e,i)=>{"use strict";const r=e;r.Reporter=i(98465).b,r.DecoderBuffer=i(36625).C,r.EncoderBuffer=i(36625).R,r.Node=i(41949)},41949:(t,e,i)=>{"use strict";const r=i(98465).b,n=i(36625).R,s=i(36625).C,o=i(79746),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],h=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(t,e,i){const r={};this._baseState=r,r.name=i,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=c;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const t=this._baseState,e={};l.forEach((function(i){e[i]=t[i]}));const i=new this.constructor(e.parent);return i._baseState=e,i},c.prototype._wrap=function(){const t=this._baseState;h.forEach((function(e){this[e]=function(){const i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}}),this)},c.prototype._init=function(t){const e=this._baseState;o(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),o.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(t){const e=this._baseState,i=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==i.length&&(o(null===e.children),e.children=i,i.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(o(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(i){i==(0|i)&&(i|=0);const r=t[i];e[r]=i})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){c.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),a.forEach((function(t){c.prototype[t]=function(){const e=this._baseState,i=Array.prototype.slice.call(arguments);return o(null===e.tag),e.tag=t,this._useArgs(i),this}})),c.prototype.use=function(t){o(t);const e=this._baseState;return o(null===e.use),e.use=t,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(t){const e=this._baseState;return o(null===e.default),e.default=t,e.optional=!0,this},c.prototype.explicit=function(t){const e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.explicit=t,this},c.prototype.implicit=function(t){const e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.implicit=t,this},c.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},c.prototype.key=function(t){const e=this._baseState;return o(null===e.key),e.key=t,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(t){const e=this._baseState;return o(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},c.prototype.contains=function(t){const e=this._baseState;return o(null===e.use),e.contains=t,this},c.prototype._decode=function(t,e){const i=this._baseState;if(null===i.parent)return t.wrapResult(i.children[0]._decode(t,e));let r,n=i.default,o=!0,a=null;if(null!==i.key&&(a=t.enterKey(i.key)),i.optional){let r=null;if(null!==i.explicit?r=i.explicit:null!==i.implicit?r=i.implicit:null!==i.tag&&(r=i.tag),null!==r||i.any){if(o=this._peekTag(t,r,i.any),t.isError(o))return o}else{const r=t.save();try{null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),o=!0}catch(t){o=!1}t.restore(r)}}if(i.obj&&o&&(r=t.enterObject()),o){if(null!==i.explicit){const e=this._decodeTag(t,i.explicit);if(t.isError(e))return e;t=e}const r=t.offset;if(null===i.use&&null===i.choice){let e;i.any&&(e=t.save());const r=this._decodeTag(t,null!==i.implicit?i.implicit:i.tag,i.any);if(t.isError(r))return r;i.any?n=t.raw(e):t=r}if(e&&e.track&&null!==i.tag&&e.track(t.path(),r,t.length,"tagged"),e&&e.track&&null!==i.tag&&e.track(t.path(),t.offset,t.length,"content"),i.any||(n=null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e)),t.isError(n))return n;if(i.any||null!==i.choice||null===i.children||i.children.forEach((function(i){i._decode(t,e)})),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){const r=new s(n);n=this._getUse(i.contains,t._reporterState.obj)._decode(r,e)}}return i.obj&&o&&(n=t.leaveObject(r)),null===i.key||null===n&&!0!==o?null!==a&&t.exitKey(a):t.leaveKey(a,i.key,n),n},c.prototype._decodeGeneric=function(t,e,i){const r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],i):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},c.prototype._getUse=function(t,e){const i=this._baseState;return i.useDecoder=this._use(t,e),o(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},c.prototype._decodeChoice=function(t,e){const i=this._baseState;let r=null,n=!1;return Object.keys(i.choice).some((function(s){const o=t.save(),a=i.choice[s];try{const i=a._decode(t,e);if(t.isError(i))return!1;r={type:s,value:i},n=!0}catch(e){return t.restore(o),!1}return!0}),this),n?r:t.error("Choice not matched")},c.prototype._createEncoderBuffer=function(t){return new n(t,this.reporter)},c.prototype._encode=function(t,e,i){const r=this._baseState;if(null!==r.default&&r.default===t)return;const n=this._encodeValue(t,e,i);return void 0===n||this._skipDefault(n,e,i)?void 0:n},c.prototype._encodeValue=function(t,e,i){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,e||new r);let s=null;if(this.reporter=e,n.optional&&void 0===t){if(null===n.default)return;t=n.default}let o=null,a=!1;if(n.any)s=this._createEncoderBuffer(t);else if(n.choice)s=this._encodeChoice(t,e);else if(n.contains)o=this._getUse(n.contains,i)._encode(t,e),a=!0;else if(n.children)o=n.children.map((function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");const r=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const n=i._encode(t[i._baseState.key],e,t);return e.leaveKey(r),n}),this).filter((function(t){return t})),o=this._createEncoderBuffer(o);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const i=this.clone();i._baseState.implicit=null,o=this._createEncoderBuffer(t.map((function(i){const r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)}),i))}else null!==n.use?s=this._getUse(n.use,i)._encode(t,e):(o=this._encodePrimitive(n.tag,t),a=!0);if(!n.any&&null===n.choice){const t=null!==n.implicit?n.implicit:n.tag,i=null===n.implicit?"universal":"context";null===t?null===n.use&&e.error("Tag could be omitted only for .use()"):null===n.use&&(s=this._encodeComposite(t,a,i,o))}return null!==n.explicit&&(s=this._encodeComposite(n.explicit,!1,"context",s)),s},c.prototype._encodeChoice=function(t,e){const i=this._baseState,r=i.choice[t.type];return r||o(!1,t.type+" not found in "+JSON.stringify(Object.keys(i.choice))),r._encode(t.value,e)},c.prototype._encodePrimitive=function(t,e){const i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},c.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},c.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},98465:(t,e,i)=>{"use strict";const r=i(35717);function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function s(t,e){this.path=t,this.rethrow(e)}e.b=n,n.prototype.isError=function(t){return t instanceof s},n.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},n.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},n.prototype.leaveKey=function(t,e,i){const r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){const e=this._reporterState,i=e.obj;return e.obj=t,i},n.prototype.error=function(t){let e;const i=this._reporterState,r=t instanceof s;if(e=r?t:new s(i.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!i.options.partial)throw e;return r||i.errors.push(e),e},n.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(s,Error),s.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},70160:(t,e)=>{"use strict";function i(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);const r=t[i];e[r]=i})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=i(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=i(e.tag)},36826:(t,e,i)=>{"use strict";const r=e;r._reverse=function(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);const r=t[i];e[r]=i})),e},r.der=i(70160)},41671:(t,e,i)=>{"use strict";const r=i(35717),n=i(13550),s=i(36625).C,o=i(41949),a=i(70160);function h(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){o.call(this,"der",t)}function l(t,e){let i=t.readUInt8(e);if(t.isError(i))return i;const r=a.tagClass[i>>6],n=0==(32&i);if(31==(31&i)){let r=i;for(i=0;128==(128&r);){if(r=t.readUInt8(e),t.isError(r))return r;i<<=7,i|=127&r}}else i&=31;return{cls:r,primitive:n,tag:i,tagStr:a.tag[i]}}function u(t,e,i){let r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;const n=127&r;if(n>4)return t.error("length octect is too long");r=0;for(let e=0;e<n;e++){r<<=8;const e=t.readUInt8(i);if(t.isError(e))return e;r|=e}return r}t.exports=h,h.prototype.decode=function(t,e){return s.isDecoderBuffer(t)||(t=new s(t,e)),this.tree._decode(t,e)},r(c,o),c.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;const r=t.save(),n=l(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(r),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||i)},c.prototype._decodeTag=function(t,e,i){const r=l(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;let n=u(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');const s=t.save(),o=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(o)?o:(n=t.offset-s.offset,t.restore(s),t.skip(n,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(t,e){for(;;){const i=l(t,e);if(t.isError(i))return i;const r=u(t,i.primitive,e);if(t.isError(r))return r;let n;if(n=i.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(n))return n;if("end"===i.tagStr)break}},c.prototype._decodeList=function(t,e,i,r){const n=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const s=i.decode(t,"der",r);if(t.isError(s)&&e)break;n.push(s)}return n},c.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let i="";for(let t=0;t<e.length/2;t++)i+=String.fromCharCode(e.readUInt16BE(2*t));return i}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(t,e,i){let r;const n=[];let s=0,o=0;for(;!t.isEmpty();)o=t.readUInt8(),s<<=7,s|=127&o,0==(128&o)&&(n.push(s),s=0);128&o&&n.push(s);const a=n[0]/40|0,h=n[0]%40;if(r=i?n:[a,h].concat(n.slice(1)),e){let t=e[r.join(" ")];void 0===t&&(t=e[r.join(".")]),void 0!==t&&(r=t)}return r},c.prototype._decodeTime=function(t,e){const i=t.raw().toString();let r,n,s,o,a,h;if("gentime"===e)r=0|i.slice(0,4),n=0|i.slice(4,6),s=0|i.slice(6,8),o=0|i.slice(8,10),a=0|i.slice(10,12),h=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|i.slice(0,2),n=0|i.slice(2,4),s=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),h=0|i.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,s,o,a,h,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},c.prototype._decodeInt=function(t,e){const i=t.raw();let r=new n(i);return e&&(r=e[r.toString(10)]||r),r},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},78307:(t,e,i)=>{"use strict";const r=e;r.der=i(41671),r.pem=i(59631)},59631:(t,e,i)=>{"use strict";const r=i(35717),n=i(2399).Buffer,s=i(41671);function o(t){s.call(this,t),this.enc="pem"}r(o,s),t.exports=o,o.prototype.decode=function(t,e){const i=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,h=-1;for(let t=0;t<i.length;t++){const e=i[t].match(o);if(null!==e&&e[2]===r){if(-1!==a){if("END"!==e[1])break;h=t;break}if("BEGIN"!==e[1])break;a=t}}if(-1===a||-1===h)throw new Error("PEM section not found for: "+r);const c=i.slice(a+1,h).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const l=n.from(c,"base64");return s.prototype.decode.call(this,l,e)}},66984:(t,e,i)=>{"use strict";const r=i(35717),n=i(2399).Buffer,s=i(41949),o=i(70160);function a(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new h,this.tree._init(t.body)}function h(t){s.call(this,"der",t)}function c(t){return t<10?"0"+t:t}t.exports=a,a.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(h,s),h.prototype._encodeComposite=function(t,e,i,r){const s=function(t,e,i,r){let n;if("seqof"===t?t="seq":"setof"===t&&(t="set"),o.tagByName.hasOwnProperty(t))n=o.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);n=t}return n>=31?r.error("Multi-octet tag encoding unsupported"):(e||(n|=32),n|=o.tagClassByName[i||"universal"]<<6,n)}(t,e,i,this.reporter);if(r.length<128){const t=n.alloc(2);return t[0]=s,t[1]=r.length,this._createEncoderBuffer([t,r])}let a=1;for(let t=r.length;t>=256;t>>=8)a++;const h=n.alloc(2+a);h[0]=s,h[1]=128|a;for(let t=1+a,e=r.length;e>0;t--,e>>=8)h[t]=255&e;return this._createEncoderBuffer([h,r])},h.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=n.alloc(2*t.length);for(let i=0;i<t.length;i++)e.writeUInt16BE(t.charCodeAt(i),2*i);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},h.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let r=0;for(let e=0;e<t.length;e++){let i=t[e];for(r++;i>=128;i>>=7)r++}const s=n.alloc(r);let o=s.length-1;for(let e=t.length-1;e>=0;e--){let i=t[e];for(s[o--]=127&i;(i>>=7)>0;)s[o--]=128|127&i}return this._createEncoderBuffer(s)},h.prototype._encodeTime=function(t,e){let i;const r=new Date(t);return"gentime"===e?i=[c(r.getUTCFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[c(r.getUTCFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},h.prototype._encodeNull=function(){return this._createEncoderBuffer("")},h.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!n.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=n.from(e)}if(n.isBuffer(t)){let e=t.length;0===t.length&&e++;const i=n.alloc(e);return t.copy(i),0===t.length&&(i[0]=0),this._createEncoderBuffer(i)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let i=1;for(let e=t;e>=256;e>>=8)i++;const r=new Array(i);for(let e=r.length-1;e>=0;e--)r[e]=255&t,t>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(n.from(r))},h.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},h.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},h.prototype._skipDefault=function(t,e,i){const r=this._baseState;let n;if(null===r.default)return!1;const s=t.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,e,i).join()),s.length!==r.defaultBuffer.length)return!1;for(n=0;n<s.length;n++)if(s[n]!==r.defaultBuffer[n])return!1;return!0}},56579:(t,e,i)=>{"use strict";const r=e;r.der=i(66984),r.pem=i(2883)},2883:(t,e,i)=>{"use strict";const r=i(35717),n=i(66984);function s(t){n.call(this,t),this.enc="pem"}r(s,n),t.exports=s,s.prototype.encode=function(t,e){const i=n.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"];for(let t=0;t<i.length;t+=64)r.push(i.slice(t,t+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},79742:(t,e)=>{"use strict";e.byteLength=function(t){var e=h(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,s=h(t),o=s[0],a=s[1],c=new n(function(t,e,i){return 3*(e+i)/4-i}(0,o,a)),l=0,u=a>0?o-4:o;for(i=0;i<u;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===a&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,c[l++]=255&e),1===a&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,s=[],o=16383,a=0,h=r-n;a<h;a+=o)s.push(c(t,a,a+o>h?h:a+o));return 1===n?(e=t[r-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,r){for(var n,s,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(i[(s=n)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},44431:function(t,e,i){var r;!function(n){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,h=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",u=1e14,d=14,f=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,y=1e9;function m(t){var e=0|t;return t>0||t===e?e:e-1}function v(t){for(var e,i,r=1,n=t.length,s=t[0]+"";r<n;){for(e=t[r++]+"",i=d-e.length;i--;e="0"+e);s+=e}for(n=s.length;48===s.charCodeAt(--n););return s.slice(0,n+1||1)}function b(t,e){var i,r,n=t.c,s=e.c,o=t.s,a=e.s,h=t.e,c=e.e;if(!o||!a)return null;if(i=n&&!n[0],r=s&&!s[0],i||r)return i?r?0:-a:o;if(o!=a)return o;if(i=o<0,r=h==c,!n||!s)return r?0:!n^i?1:-1;if(!r)return h>c^i?1:-1;for(a=(h=n.length)<(c=s.length)?h:c,o=0;o<a;o++)if(n[o]!=s[o])return n[o]>s[o]^i?1:-1;return h==c?0:h>c^i?1:-1}function w(t,e,i,r){if(t<e||t>i||t!==h(t))throw Error(c+(r||"Argument")+("number"==typeof t?t<e||t>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _(t){var e=t.c.length-1;return m(t.e/d)==e&&t.c[e]%2!=0}function x(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function E(t,e,i){var r,n;if(e<0){for(n=i+".";++e;n+=i);t=n+t}else if(++e>(r=t.length)){for(n=i,e-=r;--e;n+=i);t+=n}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}s=function t(e){var i,r,n,s,S,T,A,C,k,R,P=H.prototype={constructor:H,toString:null,valueOf:null},I=new H(1),O=20,M=4,D=-7,B=21,L=-1e7,N=1e7,U=!1,F=1,z=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function H(t,e){var i,s,a,c,u,p,g,y,m=this;if(!(m instanceof H))return new H(t,e);if(null==e){if(t&&!0===t._isBigNumber)return m.s=t.s,void(!t.c||t.e>N?m.c=m.e=null:t.e<L?m.c=[m.e=0]:(m.e=t.e,m.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,u=t;u>=10;u/=10,c++);return void(c>N?m.c=m.e=null:(m.e=c,m.c=[t]))}y=String(t)}else{if(!o.test(y=String(t)))return n(m,y,p);m.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(c=y.indexOf("."))>-1&&(y=y.replace(".","")),(u=y.search(/e/i))>0?(c<0&&(c=u),c+=+y.slice(u+1),y=y.substring(0,u)):c<0&&(c=y.length)}else{if(w(e,2,V.length,"Base"),10==e&&G)return X(m=new H(t),O+m.e+1,M);if(y=String(t),p="number"==typeof t){if(0*t!=0)return n(m,y,p,e);if(m.s=1/t<0?(y=y.slice(1),-1):1,H.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(l+t)}else m.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(i=V.slice(0,e),c=u=0,g=y.length;u<g;u++)if(i.indexOf(s=y.charAt(u))<0){if("."==s){if(u>c){c=g;continue}}else if(!a&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){a=!0,u=-1,c=0;continue}return n(m,String(t),p,e)}p=!1,(c=(y=r(y,e,10,m.s)).indexOf("."))>-1?y=y.replace(".",""):c=y.length}for(u=0;48===y.charCodeAt(u);u++);for(g=y.length;48===y.charCodeAt(--g););if(y=y.slice(u,++g)){if(g-=u,p&&H.DEBUG&&g>15&&(t>f||t!==h(t)))throw Error(l+m.s*t);if((c=c-u-1)>N)m.c=m.e=null;else if(c<L)m.c=[m.e=0];else{if(m.e=c,m.c=[],u=(c+1)%d,c<0&&(u+=d),u<g){for(u&&m.c.push(+y.slice(0,u)),g-=d;u<g;)m.c.push(+y.slice(u,u+=d));u=d-(y=y.slice(u)).length}else u-=g;for(;u--;y+="0");m.c.push(+y)}}else m.c=[m.e=0]}function Y(t,e,i,r){var n,s,o,a,h;if(null==i?i=M:w(i,0,8),!t.c)return t.toString();if(n=t.c[0],o=t.e,null==e)h=v(t.c),h=1==r||2==r&&(o<=D||o>=B)?x(h,o):E(h,o,"0");else if(s=(t=X(new H(t),e,i)).e,a=(h=v(t.c)).length,1==r||2==r&&(e<=s||s<=D)){for(;a<e;h+="0",a++);h=x(h,s)}else if(e-=o,h=E(h,s,"0"),s+1>a){if(--e>0)for(h+=".";e--;h+="0");}else if((e+=s-a)>0)for(s+1==a&&(h+=".");e--;h+="0");return t.s<0&&n?"-"+h:h}function K(t,e){for(var i,r=1,n=new H(t[0]);r<t.length;r++){if(!(i=new H(t[r])).s){n=i;break}e.call(n,i)&&(n=i)}return n}function W(t,e,i){for(var r=1,n=e.length;!e[--n];e.pop());for(n=e[0];n>=10;n/=10,r++);return(i=r+i*d-1)>N?t.c=t.e=null:i<L?t.c=[t.e=0]:(t.e=i,t.c=e),t}function X(t,e,i,r){var n,s,o,c,l,f,g,y=t.c,m=p;if(y){t:{for(n=1,c=y[0];c>=10;c/=10,n++);if((s=e-n)<0)s+=d,o=e,g=(l=y[f=0])/m[n-o-1]%10|0;else if((f=a((s+1)/d))>=y.length){if(!r)break t;for(;y.length<=f;y.push(0));l=g=0,n=1,o=(s%=d)-d+1}else{for(l=c=y[f],n=1;c>=10;c/=10,n++);g=(o=(s%=d)-d+n)<0?0:l/m[n-o-1]%10|0}if(r=r||e<0||null!=y[f+1]||(o<0?l:l%m[n-o-1]),r=i<4?(g||r)&&(0==i||i==(t.s<0?3:2)):g>5||5==g&&(4==i||r||6==i&&(s>0?o>0?l/m[n-o]:0:y[f-1])%10&1||i==(t.s<0?8:7)),e<1||!y[0])return y.length=0,r?(e-=t.e+1,y[0]=m[(d-e%d)%d],t.e=-e||0):y[0]=t.e=0,t;if(0==s?(y.length=f,c=1,f--):(y.length=f+1,c=m[d-s],y[f]=o>0?h(l/m[n-o]%m[o])*c:0),r)for(;;){if(0==f){for(s=1,o=y[0];o>=10;o/=10,s++);for(o=y[0]+=c,c=1;o>=10;o/=10,c++);s!=c&&(t.e++,y[0]==u&&(y[0]=1));break}if(y[f]+=c,y[f]!=u)break;y[f--]=0,c=1}for(s=y.length;0===y[--s];y.pop());}t.e>N?t.c=t.e=null:t.e<L&&(t.c=[t.e=0])}return t}function q(t){var e,i=t.e;return null===i?t.toString():(e=v(t.c),e=i<=D||i>=B?x(e,i):E(e,i,"0"),t.s<0?"-"+e:e)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(t){var e,i;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(w(i=t[e],0,y,e),O=i),t.hasOwnProperty(e="ROUNDING_MODE")&&(w(i=t[e],0,8,e),M=i),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((i=t[e])&&i.pop?(w(i[0],-y,0,e),w(i[1],0,y,e),D=i[0],B=i[1]):(w(i,-y,y,e),D=-(B=i<0?-i:i))),t.hasOwnProperty(e="RANGE"))if((i=t[e])&&i.pop)w(i[0],-y,-1,e),w(i[1],1,y,e),L=i[0],N=i[1];else{if(w(i,-y,y,e),!i)throw Error(c+e+" cannot be zero: "+i);L=-(N=i<0?-i:i)}if(t.hasOwnProperty(e="CRYPTO")){if((i=t[e])!==!!i)throw Error(c+e+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!i,Error(c+"crypto unavailable");U=i}else U=i}if(t.hasOwnProperty(e="MODULO_MODE")&&(w(i=t[e],0,9,e),F=i),t.hasOwnProperty(e="POW_PRECISION")&&(w(i=t[e],0,y,e),z=i),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(i=t[e]))throw Error(c+e+" not an object: "+i);j=i}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(i=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(c+e+" invalid: "+i);G="0123456789"==i.slice(0,10),V=i}}return{DECIMAL_PLACES:O,ROUNDING_MODE:M,EXPONENTIAL_AT:[D,B],RANGE:[L,N],CRYPTO:U,MODULO_MODE:F,POW_PRECISION:z,FORMAT:j,ALPHABET:V}},H.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!H.DEBUG)return!0;var e,i,r=t.c,n=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===s||-1===s)&&n>=-y&&n<=y&&n===h(n)){if(0===r[0]){if(0===n&&1===r.length)return!0;break t}if((e=(n+1)%d)<1&&(e+=d),String(r[0]).length==e){for(e=0;e<r.length;e++)if((i=r[e])<0||i>=u||i!==h(i))break t;if(0!==i)return!0}}}else if(null===r&&null===n&&(null===s||1===s||-1===s))return!0;throw Error(c+"Invalid BigNumber: "+t)},H.maximum=H.max=function(){return K(arguments,P.lt)},H.minimum=H.min=function(){return K(arguments,P.gt)},H.random=(s=9007199254740992,S=Math.random()*s&2097151?function(){return h(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,i,r,n,s,o=0,l=[],u=new H(I);if(null==t?t=O:w(t,0,y),n=a(t/d),U)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(n*=2));o<n;)(s=131072*e[o]+(e[o+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),e[o]=i[0],e[o+1]=i[1]):(l.push(s%1e14),o+=2);o=n/2}else{if(!crypto.randomBytes)throw U=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(n*=7);o<n;)(s=281474976710656*(31&e[o])+1099511627776*e[o+1]+4294967296*e[o+2]+16777216*e[o+3]+(e[o+4]<<16)+(e[o+5]<<8)+e[o+6])>=9e15?crypto.randomBytes(7).copy(e,o):(l.push(s%1e14),o+=7);o=n/7}if(!U)for(;o<n;)(s=S())<9e15&&(l[o++]=s%1e14);for(n=l[--o],t%=d,n&&t&&(s=p[d-t],l[o]=h(n/s)*s);0===l[o];l.pop(),o--);if(o<0)l=[r=0];else{for(r=-1;0===l[0];l.splice(0,1),r-=d);for(o=1,s=l[0];s>=10;s/=10,o++);o<d&&(r-=d-o)}return u.e=r,u.c=l,u}),H.sum=function(){for(var t=1,e=arguments,i=new H(e[0]);t<e.length;)i=i.plus(e[t++]);return i},r=function(){var t="0123456789";function e(t,e,i,r){for(var n,s,o=[0],a=0,h=t.length;a<h;){for(s=o.length;s--;o[s]*=e);for(o[0]+=r.indexOf(t.charAt(a++)),n=0;n<o.length;n++)o[n]>i-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/i|0,o[n]%=i)}return o.reverse()}return function(r,n,s,o,a){var h,c,l,u,d,f,p,g,y=r.indexOf("."),m=O,b=M;for(y>=0&&(u=z,z=0,r=r.replace(".",""),f=(g=new H(n)).pow(r.length-y),z=u,g.c=e(E(v(f.c),f.e,"0"),10,s,t),g.e=g.c.length),l=u=(p=e(r,n,s,a?(h=V,t):(h=t,V))).length;0==p[--u];p.pop());if(!p[0])return h.charAt(0);if(y<0?--l:(f.c=p,f.e=l,f.s=o,p=(f=i(f,g,m,b,s)).c,d=f.r,l=f.e),y=p[c=l+m+1],u=s/2,d=d||c<0||null!=p[c+1],d=b<4?(null!=y||d)&&(0==b||b==(f.s<0?3:2)):y>u||y==u&&(4==b||d||6==b&&1&p[c-1]||b==(f.s<0?8:7)),c<1||!p[0])r=d?E(h.charAt(1),-m,h.charAt(0)):h.charAt(0);else{if(p.length=c,d)for(--s;++p[--c]>s;)p[c]=0,c||(++l,p=[1].concat(p));for(u=p.length;!p[--u];);for(y=0,r="";y<=u;r+=h.charAt(p[y++]));r=E(r,l,h.charAt(0))}return r}}(),i=function(){function t(t,e,i){var r,n,s,o,a=0,h=t.length,c=e%g,l=e/g|0;for(t=t.slice();h--;)a=((n=c*(s=t[h]%g)+(r=l*s+(o=t[h]/g|0)*c)%g*g+a)/i|0)+(r/g|0)+l*o,t[h]=n%i;return a&&(t=[a].concat(t)),t}function e(t,e,i,r){var n,s;if(i!=r)s=i>r?1:-1;else for(n=s=0;n<i;n++)if(t[n]!=e[n]){s=t[n]>e[n]?1:-1;break}return s}function i(t,e,i,r){for(var n=0;i--;)t[i]-=n,n=t[i]<e[i]?1:0,t[i]=n*r+t[i]-e[i];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,n,s,o,a){var c,l,f,p,g,y,v,b,w,_,x,E,S,T,A,C,k,R=r.s==n.s?1:-1,P=r.c,I=n.c;if(!(P&&P[0]&&I&&I[0]))return new H(r.s&&n.s&&(P?!I||P[0]!=I[0]:I)?P&&0==P[0]||!I?0*R:R/0:NaN);for(w=(b=new H(R)).c=[],R=s+(l=r.e-n.e)+1,a||(a=u,l=m(r.e/d)-m(n.e/d),R=R/d|0),f=0;I[f]==(P[f]||0);f++);if(I[f]>(P[f]||0)&&l--,R<0)w.push(1),p=!0;else{for(T=P.length,C=I.length,f=0,R+=2,(g=h(a/(I[0]+1)))>1&&(I=t(I,g,a),P=t(P,g,a),C=I.length,T=P.length),S=C,x=(_=P.slice(0,C)).length;x<C;_[x++]=0);k=I.slice(),k=[0].concat(k),A=I[0],I[1]>=a/2&&A++;do{if(g=0,(c=e(I,_,C,x))<0){if(E=_[0],C!=x&&(E=E*a+(_[1]||0)),(g=h(E/A))>1)for(g>=a&&(g=a-1),v=(y=t(I,g,a)).length,x=_.length;1==e(y,_,v,x);)g--,i(y,C<v?k:I,v,a),v=y.length,c=1;else 0==g&&(c=g=1),v=(y=I.slice()).length;if(v<x&&(y=[0].concat(y)),i(_,y,x,a),x=_.length,-1==c)for(;e(I,_,C,x)<1;)g++,i(_,C<x?k:I,x,a),x=_.length}else 0===c&&(g++,_=[0]);w[f++]=g,_[0]?_[x++]=P[S]||0:(_=[P[S]],x=1)}while((S++<T||null!=_[0])&&R--);p=null!=_[0],w[0]||w.splice(0,1)}if(a==u){for(f=1,R=w[0];R>=10;R/=10,f++);X(b,s+(b.e=f+l*d-1)+1,o,p)}else b.e=l,b.r=+p;return b}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,C=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(t,e,i,r){var n,s=i?e:e.replace(R,"");if(k.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!i&&(s=s.replace(T,(function(t,e,i){return n="x"==(i=i.toLowerCase())?16:"b"==i?2:8,r&&r!=n?t:e})),r&&(n=r,s=s.replace(A,"$1").replace(C,"0.$1")),e!=s))return new H(s,n);if(H.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},P.absoluteValue=P.abs=function(){var t=new H(this);return t.s<0&&(t.s=1),t},P.comparedTo=function(t,e){return b(this,new H(t,e))},P.decimalPlaces=P.dp=function(t,e){var i,r,n,s=this;if(null!=t)return w(t,0,y),null==e?e=M:w(e,0,8),X(new H(s),t+s.e+1,e);if(!(i=s.c))return null;if(r=((n=i.length-1)-m(this.e/d))*d,n=i[n])for(;n%10==0;n/=10,r--);return r<0&&(r=0),r},P.dividedBy=P.div=function(t,e){return i(this,new H(t,e),O,M)},P.dividedToIntegerBy=P.idiv=function(t,e){return i(this,new H(t,e),0,1)},P.exponentiatedBy=P.pow=function(t,e){var i,r,n,s,o,l,u,f,p=this;if((t=new H(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+q(t));if(null!=e&&(e=new H(e)),o=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new H(Math.pow(+q(p),o?2-_(t):+q(t))),e?f.mod(e):f;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new H(NaN);(r=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return s=p.s<0&&_(t)?-0:0,p.e>-1&&(s=1/s),new H(l?1/s:s);z&&(s=a(z/d+2))}for(o?(i=new H(.5),l&&(t.s=1),u=_(t)):u=(n=Math.abs(+q(t)))%2,f=new H(I);;){if(u){if(!(f=f.times(p)).c)break;s?f.c.length>s&&(f.c.length=s):r&&(f=f.mod(e))}if(n){if(0===(n=h(n/2)))break;u=n%2}else if(X(t=t.times(i),t.e+1,1),t.e>14)u=_(t);else{if(0==(n=+q(t)))break;u=n%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):r&&(p=p.mod(e))}return r?f:(l&&(f=I.div(f)),e?f.mod(e):s?X(f,z,M,void 0):f)},P.integerValue=function(t){var e=new H(this);return null==t?t=M:w(t,0,8),X(e,e.e+1,t)},P.isEqualTo=P.eq=function(t,e){return 0===b(this,new H(t,e))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(t,e){return b(this,new H(t,e))>0},P.isGreaterThanOrEqualTo=P.gte=function(t,e){return 1===(e=b(this,new H(t,e)))||0===e},P.isInteger=function(){return!!this.c&&m(this.e/d)>this.c.length-2},P.isLessThan=P.lt=function(t,e){return b(this,new H(t,e))<0},P.isLessThanOrEqualTo=P.lte=function(t,e){return-1===(e=b(this,new H(t,e)))||0===e},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(t,e){var i,r,n,s,o=this,a=o.s;if(e=(t=new H(t,e)).s,!a||!e)return new H(NaN);if(a!=e)return t.s=-e,o.plus(t);var h=o.e/d,c=t.e/d,l=o.c,f=t.c;if(!h||!c){if(!l||!f)return l?(t.s=-e,t):new H(f?o:NaN);if(!l[0]||!f[0])return f[0]?(t.s=-e,t):new H(l[0]?o:3==M?-0:0)}if(h=m(h),c=m(c),l=l.slice(),a=h-c){for((s=a<0)?(a=-a,n=l):(c=h,n=f),n.reverse(),e=a;e--;n.push(0));n.reverse()}else for(r=(s=(a=l.length)<(e=f.length))?a:e,a=e=0;e<r;e++)if(l[e]!=f[e]){s=l[e]<f[e];break}if(s&&(n=l,l=f,f=n,t.s=-t.s),(e=(r=f.length)-(i=l.length))>0)for(;e--;l[i++]=0);for(e=u-1;r>a;){if(l[--r]<f[r]){for(i=r;i&&!l[--i];l[i]=e);--l[i],l[r]+=u}l[r]-=f[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?W(t,l,c):(t.s=3==M?-1:1,t.c=[t.e=0],t)},P.modulo=P.mod=function(t,e){var r,n,s=this;return t=new H(t,e),!s.c||!t.s||t.c&&!t.c[0]?new H(NaN):!t.c||s.c&&!s.c[0]?new H(s):(9==F?(n=t.s,t.s=1,r=i(s,t,0,3),t.s=n,r.s*=n):r=i(s,t,0,F),(t=s.minus(r.times(t))).c[0]||1!=F||(t.s=s.s),t)},P.multipliedBy=P.times=function(t,e){var i,r,n,s,o,a,h,c,l,f,p,y,v,b,w,_=this,x=_.c,E=(t=new H(t,e)).c;if(!(x&&E&&x[0]&&E[0]))return!_.s||!t.s||x&&!x[0]&&!E||E&&!E[0]&&!x?t.c=t.e=t.s=null:(t.s*=_.s,x&&E?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=m(_.e/d)+m(t.e/d),t.s*=_.s,(h=x.length)<(f=E.length)&&(v=x,x=E,E=v,n=h,h=f,f=n),n=h+f,v=[];n--;v.push(0));for(b=u,w=g,n=f;--n>=0;){for(i=0,p=E[n]%w,y=E[n]/w|0,s=n+(o=h);s>n;)i=((c=p*(c=x[--o]%w)+(a=y*c+(l=x[o]/w|0)*p)%w*w+v[s]+i)/b|0)+(a/w|0)+y*l,v[s--]=c%b;v[s]=i}return i?++r:v.splice(0,1),W(t,v,r)},P.negated=function(){var t=new H(this);return t.s=-t.s||null,t},P.plus=function(t,e){var i,r=this,n=r.s;if(e=(t=new H(t,e)).s,!n||!e)return new H(NaN);if(n!=e)return t.s=-e,r.minus(t);var s=r.e/d,o=t.e/d,a=r.c,h=t.c;if(!s||!o){if(!a||!h)return new H(n/0);if(!a[0]||!h[0])return h[0]?t:new H(a[0]?r:0*n)}if(s=m(s),o=m(o),a=a.slice(),n=s-o){for(n>0?(o=s,i=h):(n=-n,i=a),i.reverse();n--;i.push(0));i.reverse()}for((n=a.length)-(e=h.length)<0&&(i=h,h=a,a=i,e=n),n=0;e;)n=(a[--e]=a[e]+h[e]+n)/u|0,a[e]=u===a[e]?0:a[e]%u;return n&&(a=[n].concat(a),++o),W(t,a,o)},P.precision=P.sd=function(t,e){var i,r,n,s=this;if(null!=t&&t!==!!t)return w(t,1,y),null==e?e=M:w(e,0,8),X(new H(s),t,e);if(!(i=s.c))return null;if(r=(n=i.length-1)*d+1,n=i[n]){for(;n%10==0;n/=10,r--);for(n=i[0];n>=10;n/=10,r++);}return t&&s.e+1>r&&(r=s.e+1),r},P.shiftedBy=function(t){return w(t,-9007199254740991,f),this.times("1e"+t)},P.squareRoot=P.sqrt=function(){var t,e,r,n,s,o=this,a=o.c,h=o.s,c=o.e,l=O+4,u=new H("0.5");if(1!==h||!a||!a[0])return new H(!h||h<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(h=Math.sqrt(+q(o)))||h==1/0?(((e=v(a)).length+c)%2==0&&(e+="0"),h=Math.sqrt(+e),c=m((c+1)/2)-(c<0||c%2),r=new H(e=h==1/0?"5e"+c:(e=h.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new H(h+""),r.c[0])for((h=(c=r.e)+l)<3&&(h=0);;)if(s=r,r=u.times(s.plus(i(o,s,l,1))),v(s.c).slice(0,h)===(e=v(r.c)).slice(0,h)){if(r.e<c&&--h,"9999"!=(e=e.slice(h-3,h+1))&&(n||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(X(r,r.e+O+2,1),t=!r.times(r).eq(o));break}if(!n&&(X(s,s.e+O+2,0),s.times(s).eq(o))){r=s;break}l+=4,h+=4,n=1}return X(r,r.e+O+1,M,t)},P.toExponential=function(t,e){return null!=t&&(w(t,0,y),t++),Y(this,t,e,1)},P.toFixed=function(t,e){return null!=t&&(w(t,0,y),t=t+this.e+1),Y(this,t,e)},P.toFormat=function(t,e,i){var r,n=this;if(null==i)null!=t&&e&&"object"==typeof e?(i=e,e=null):t&&"object"==typeof t?(i=t,t=e=null):i=j;else if("object"!=typeof i)throw Error(c+"Argument not an object: "+i);if(r=n.toFixed(t,e),n.c){var s,o=r.split("."),a=+i.groupSize,h=+i.secondaryGroupSize,l=i.groupSeparator||"",u=o[0],d=o[1],f=n.s<0,p=f?u.slice(1):u,g=p.length;if(h&&(s=a,a=h,h=s,g-=s),a>0&&g>0){for(s=g%a||a,u=p.substr(0,s);s<g;s+=a)u+=l+p.substr(s,a);h>0&&(u+=l+p.slice(s)),f&&(u="-"+u)}r=d?u+(i.decimalSeparator||"")+((h=+i.fractionGroupSize)?d.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):d):u}return(i.prefix||"")+r+(i.suffix||"")},P.toFraction=function(t){var e,r,n,s,o,a,h,l,u,f,g,y,m=this,b=m.c;if(null!=t&&(!(h=new H(t)).isInteger()&&(h.c||1!==h.s)||h.lt(I)))throw Error(c+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+q(h));if(!b)return new H(m);for(e=new H(I),u=r=new H(I),n=l=new H(I),y=v(b),o=e.e=y.length-m.e-1,e.c[0]=p[(a=o%d)<0?d+a:a],t=!t||h.comparedTo(e)>0?o>0?e:u:h,a=N,N=1/0,h=new H(y),l.c[0]=0;f=i(h,e,0,1),1!=(s=r.plus(f.times(n))).comparedTo(t);)r=n,n=s,u=l.plus(f.times(s=u)),l=s,e=h.minus(f.times(s=e)),h=s;return s=i(t.minus(r),n,0,1),l=l.plus(s.times(u)),r=r.plus(s.times(n)),l.s=u.s=m.s,g=i(u,n,o*=2,M).minus(m).abs().comparedTo(i(l,r,o,M).minus(m).abs())<1?[u,n]:[l,r],N=a,g},P.toNumber=function(){return+q(this)},P.toPrecision=function(t,e){return null!=t&&w(t,1,y),Y(this,t,e,2)},P.toString=function(t){var e,i=this,n=i.s,s=i.e;return null===s?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(null==t?e=s<=D||s>=B?x(v(i.c),s):E(v(i.c),s,"0"):10===t&&G?e=E(v((i=X(new H(i),O+s+1,M)).c),i.e,"0"):(w(t,2,V.length,"Base"),e=r(E(v(i.c),s,"0"),10,t,n,!0)),n<0&&i.c[0]&&(e="-"+e)),e},P.valueOf=P.toJSON=function(){return q(this)},P._isBigNumber=!0,null!=e&&H.set(e),H}(),s.default=s.BigNumber=s,void 0===(r=function(){return s}.call(e,i,e,t))||(t.exports=r)}()},9668:(t,e,i)=>{"use strict";const{Buffer:r}=i(48764),n=Symbol.for("BufferList");function s(t){if(!(this instanceof s))return new s(t);s._init.call(this,t)}s._init=function(t){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},s.prototype._new=function(t){return new s(t)},s.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let i=0;i<this._bufs.length;i++){const r=e+this._bufs[i].length;if(t<r||i===this._bufs.length-1)return[i,t-e];e=r}},s.prototype._reverseOffset=function(t){const e=t[0];let i=t[1];for(let t=0;t<e;t++)i+=this._bufs[t].length;return i},s.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},s.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},s.prototype.copy=function(t,e,i,n){if(("number"!=typeof i||i<0)&&(i=0),("number"!=typeof n||n>this.length)&&(n=this.length),i>=this.length)return t||r.alloc(0);if(n<=0)return t||r.alloc(0);const s=!!t,o=this._offset(i),a=n-i;let h=a,c=s&&e||0,l=o[1];if(0===i&&n===this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(h<=this._bufs[o[0]].length-l)return s?this._bufs[o[0]].copy(t,e,l,l+h):this._bufs[o[0]].slice(l,l+h);s||(t=r.allocUnsafe(a));for(let e=o[0];e<this._bufs.length;e++){const i=this._bufs[e].length-l;if(!(h>i)){this._bufs[e].copy(t,c,l,l+h),c+=i;break}this._bufs[e].copy(t,c,l),c+=i,h-=i,l&&(l=0)}return t.length>c?t.slice(0,c):t},s.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!=typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const i=this._offset(t),r=this._offset(e),n=this._bufs.slice(i[0],r[0]+1);return 0===r[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,r[1]),0!==i[1]&&(n[0]=n[0].slice(i[1])),this._new(n)},s.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},s.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},s.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(r.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(r.from(t));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype.indexOf=function(t,e,i){if(void 0===i&&"string"==typeof e&&(i=e,e=void 0),"function"==typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof t?t=r.from([t]):"string"==typeof t?t=r.from(t,i):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=r.from(t.buffer,t.byteOffset,t.byteLength):r.isBuffer(t)||(t=r.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const n=this._offset(e);let s=n[0],o=n[1];for(;s<this._bufs.length;s++){const e=this._bufs[s];for(;o<e.length;)if(e.length-o>=t.length){const i=e.indexOf(t,o);if(-1!==i)return this._reverseOffset([s,i]);o=e.length-t.length+1}else{const e=this._reverseOffset([s,o]);if(this._match(e,t))return e;o++}o=0}return-1},s.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let i=0;i<e.length;i++)if(this.get(t+i)!==e[i])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)!function(e){s.prototype[e]=null===t[e]?function(t,i){return this.slice(t,t+i)[e](0,i)}:function(i=0){return this.slice(i,i+t[e])[e](0)}}(e)}(),s.prototype._isBufferList=function(t){return t instanceof s||s.isBufferList(t)},s.isBufferList=function(t){return null!=t&&t[n]},t.exports=s},23294:(t,e,i)=>{"use strict";const r=i(86154);t.exports=function(t){return"function"==typeof t.stream?r(t.stream()):r(new Response(t).body)}},13550:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(46601).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function c(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,l=i;l<a;l+=r)h=c(t,l,l+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var u=1;for(h=c(t,l,t.length,e),l=0;l<o;l++)u*=e;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var c=1;c<r;c++){for(var l=h>>>26,u=67108863&h,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[f])+u)/67108864|0,u=67108863&o}i.words[c]=0|u,h=0|l}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);i=0!=(s=a>>>24-n&16777215)||o!==this.length-1?l[6-h.length]+h+i:h+i,(n+=2)>=26&&(n-=26,o--)}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=u[t],f=d[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(t);i=(p=p.idivn(f)).isZero()?g+i:l[c-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===e,c=new t(s),l=this.clone();if(h){for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),c[a]=o;for(;a<s;a++)c[a]=0}else{for(a=0;a<s-n;a++)c[a]=0;for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),c[s-a-1]=o}return c},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,c=0,l=0|o[0],u=8191&l,d=l>>>13,f=0|o[1],p=8191&f,g=f>>>13,y=0|o[2],m=8191&y,v=y>>>13,b=0|o[3],w=8191&b,_=b>>>13,x=0|o[4],E=8191&x,S=x>>>13,T=0|o[5],A=8191&T,C=T>>>13,k=0|o[6],R=8191&k,P=k>>>13,I=0|o[7],O=8191&I,M=I>>>13,D=0|o[8],B=8191&D,L=D>>>13,N=0|o[9],U=8191&N,F=N>>>13,z=0|a[0],j=8191&z,V=z>>>13,G=0|a[1],H=8191&G,Y=G>>>13,K=0|a[2],W=8191&K,X=K>>>13,q=0|a[3],$=8191&q,J=q>>>13,Z=0|a[4],Q=8191&Z,tt=Z>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,ct=at>>>13,lt=0|a[8],ut=8191&lt,dt=lt>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(c+(r=Math.imul(u,j))|0)+((8191&(n=(n=Math.imul(u,V))+Math.imul(d,j)|0))<<13)|0;c=((s=Math.imul(d,V))+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(p,j),n=(n=Math.imul(p,V))+Math.imul(g,j)|0,s=Math.imul(g,V);var mt=(c+(r=r+Math.imul(u,H)|0)|0)+((8191&(n=(n=n+Math.imul(u,Y)|0)+Math.imul(d,H)|0))<<13)|0;c=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,j),n=(n=Math.imul(m,V))+Math.imul(v,j)|0,s=Math.imul(v,V),r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,Y)|0;var vt=(c+(r=r+Math.imul(u,W)|0)|0)+((8191&(n=(n=n+Math.imul(u,X)|0)+Math.imul(d,W)|0))<<13)|0;c=((s=s+Math.imul(d,X)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(w,j),n=(n=Math.imul(w,V))+Math.imul(_,j)|0,s=Math.imul(_,V),r=r+Math.imul(m,H)|0,n=(n=n+Math.imul(m,Y)|0)+Math.imul(v,H)|0,s=s+Math.imul(v,Y)|0,r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,X)|0;var bt=(c+(r=r+Math.imul(u,$)|0)|0)+((8191&(n=(n=n+Math.imul(u,J)|0)+Math.imul(d,$)|0))<<13)|0;c=((s=s+Math.imul(d,J)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(E,j),n=(n=Math.imul(E,V))+Math.imul(S,j)|0,s=Math.imul(S,V),r=r+Math.imul(w,H)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(_,H)|0,s=s+Math.imul(_,Y)|0,r=r+Math.imul(m,W)|0,n=(n=n+Math.imul(m,X)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,X)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,$)|0,s=s+Math.imul(g,J)|0;var wt=(c+(r=r+Math.imul(u,Q)|0)|0)+((8191&(n=(n=n+Math.imul(u,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(A,j),n=(n=Math.imul(A,V))+Math.imul(C,j)|0,s=Math.imul(C,V),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,Y)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(w,W)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,X)|0,r=r+Math.imul(m,$)|0,n=(n=n+Math.imul(m,J)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,J)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var _t=(c+(r=r+Math.imul(u,it)|0)|0)+((8191&(n=(n=n+Math.imul(u,rt)|0)+Math.imul(d,it)|0))<<13)|0;c=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(R,j),n=(n=Math.imul(R,V))+Math.imul(P,j)|0,s=Math.imul(P,V),r=r+Math.imul(A,H)|0,n=(n=n+Math.imul(A,Y)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(E,W)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(S,W)|0,s=s+Math.imul(S,X)|0,r=r+Math.imul(w,$)|0,n=(n=n+Math.imul(w,J)|0)+Math.imul(_,$)|0,s=s+Math.imul(_,J)|0,r=r+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(g,it)|0,s=s+Math.imul(g,rt)|0;var xt=(c+(r=r+Math.imul(u,st)|0)|0)+((8191&(n=(n=n+Math.imul(u,ot)|0)+Math.imul(d,st)|0))<<13)|0;c=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,j),n=(n=Math.imul(O,V))+Math.imul(M,j)|0,s=Math.imul(M,V),r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,Y)|0)+Math.imul(P,H)|0,s=s+Math.imul(P,Y)|0,r=r+Math.imul(A,W)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,X)|0,r=r+Math.imul(E,$)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(S,$)|0,s=s+Math.imul(S,J)|0,r=r+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,tt)|0,r=r+Math.imul(m,it)|0,n=(n=n+Math.imul(m,rt)|0)+Math.imul(v,it)|0,s=s+Math.imul(v,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var Et=(c+(r=r+Math.imul(u,ht)|0)|0)+((8191&(n=(n=n+Math.imul(u,ct)|0)+Math.imul(d,ht)|0))<<13)|0;c=((s=s+Math.imul(d,ct)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,j),n=(n=Math.imul(B,V))+Math.imul(L,j)|0,s=Math.imul(L,V),r=r+Math.imul(O,H)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(M,H)|0,s=s+Math.imul(M,Y)|0,r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(P,W)|0,s=s+Math.imul(P,X)|0,r=r+Math.imul(A,$)|0,n=(n=n+Math.imul(A,J)|0)+Math.imul(C,$)|0,s=s+Math.imul(C,J)|0,r=r+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(w,it)|0,n=(n=n+Math.imul(w,rt)|0)+Math.imul(_,it)|0,s=s+Math.imul(_,rt)|0,r=r+Math.imul(m,st)|0,n=(n=n+Math.imul(m,ot)|0)+Math.imul(v,st)|0,s=s+Math.imul(v,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,ct)|0)+Math.imul(g,ht)|0,s=s+Math.imul(g,ct)|0;var St=(c+(r=r+Math.imul(u,ut)|0)|0)+((8191&(n=(n=n+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;c=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(U,j),n=(n=Math.imul(U,V))+Math.imul(F,j)|0,s=Math.imul(F,V),r=r+Math.imul(B,H)|0,n=(n=n+Math.imul(B,Y)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,Y)|0,r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,X)|0,r=r+Math.imul(R,$)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(P,$)|0,s=s+Math.imul(P,J)|0,r=r+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,tt)|0,r=r+Math.imul(E,it)|0,n=(n=n+Math.imul(E,rt)|0)+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(w,st)|0,n=(n=n+Math.imul(w,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,r=r+Math.imul(m,ht)|0,n=(n=n+Math.imul(m,ct)|0)+Math.imul(v,ht)|0,s=s+Math.imul(v,ct)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(g,ut)|0,s=s+Math.imul(g,dt)|0;var Tt=(c+(r=r+Math.imul(u,pt)|0)|0)+((8191&(n=(n=n+Math.imul(u,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((s=s+Math.imul(d,gt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,H),n=(n=Math.imul(U,Y))+Math.imul(F,H)|0,s=Math.imul(F,Y),r=r+Math.imul(B,W)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,X)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,J)|0,r=r+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(P,Q)|0,s=s+Math.imul(P,tt)|0,r=r+Math.imul(A,it)|0,n=(n=n+Math.imul(A,rt)|0)+Math.imul(C,it)|0,s=s+Math.imul(C,rt)|0,r=r+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(w,ht)|0,n=(n=n+Math.imul(w,ct)|0)+Math.imul(_,ht)|0,s=s+Math.imul(_,ct)|0,r=r+Math.imul(m,ut)|0,n=(n=n+Math.imul(m,dt)|0)+Math.imul(v,ut)|0,s=s+Math.imul(v,dt)|0;var At=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((s=s+Math.imul(g,gt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,W),n=(n=Math.imul(U,X))+Math.imul(F,W)|0,s=Math.imul(F,X),r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,J)|0)+Math.imul(L,$)|0,s=s+Math.imul(L,J)|0,r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(R,it)|0,n=(n=n+Math.imul(R,rt)|0)+Math.imul(P,it)|0,s=s+Math.imul(P,rt)|0,r=r+Math.imul(A,st)|0,n=(n=n+Math.imul(A,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,r=r+Math.imul(E,ht)|0,n=(n=n+Math.imul(E,ct)|0)+Math.imul(S,ht)|0,s=s+Math.imul(S,ct)|0,r=r+Math.imul(w,ut)|0,n=(n=n+Math.imul(w,dt)|0)+Math.imul(_,ut)|0,s=s+Math.imul(_,dt)|0;var Ct=(c+(r=r+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,gt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((s=s+Math.imul(v,gt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,$),n=(n=Math.imul(U,J))+Math.imul(F,$)|0,s=Math.imul(F,J),r=r+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(R,st)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(P,st)|0,s=s+Math.imul(P,ot)|0,r=r+Math.imul(A,ht)|0,n=(n=n+Math.imul(A,ct)|0)+Math.imul(C,ht)|0,s=s+Math.imul(C,ct)|0,r=r+Math.imul(E,ut)|0,n=(n=n+Math.imul(E,dt)|0)+Math.imul(S,ut)|0,s=s+Math.imul(S,dt)|0;var kt=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(n=(n=n+Math.imul(w,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((s=s+Math.imul(_,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),n=(n=Math.imul(U,tt))+Math.imul(F,Q)|0,s=Math.imul(F,tt),r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(L,it)|0,s=s+Math.imul(L,rt)|0,r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(R,ht)|0,n=(n=n+Math.imul(R,ct)|0)+Math.imul(P,ht)|0,s=s+Math.imul(P,ct)|0,r=r+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,dt)|0)+Math.imul(C,ut)|0,s=s+Math.imul(C,dt)|0;var Rt=(c+(r=r+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,gt)|0)+Math.imul(S,pt)|0))<<13)|0;c=((s=s+Math.imul(S,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(U,it),n=(n=Math.imul(U,rt))+Math.imul(F,it)|0,s=Math.imul(F,rt),r=r+Math.imul(B,st)|0,n=(n=n+Math.imul(B,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,r=r+Math.imul(O,ht)|0,n=(n=n+Math.imul(O,ct)|0)+Math.imul(M,ht)|0,s=s+Math.imul(M,ct)|0,r=r+Math.imul(R,ut)|0,n=(n=n+Math.imul(R,dt)|0)+Math.imul(P,ut)|0,s=s+Math.imul(P,dt)|0;var Pt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(n=(n=n+Math.imul(A,gt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((s=s+Math.imul(C,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(U,st),n=(n=Math.imul(U,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),r=r+Math.imul(B,ht)|0,n=(n=n+Math.imul(B,ct)|0)+Math.imul(L,ht)|0,s=s+Math.imul(L,ct)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,dt)|0)+Math.imul(M,ut)|0,s=s+Math.imul(M,dt)|0;var It=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,gt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((s=s+Math.imul(P,gt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,ht),n=(n=Math.imul(U,ct))+Math.imul(F,ht)|0,s=Math.imul(F,ct),r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,dt)|0)+Math.imul(L,ut)|0,s=s+Math.imul(L,dt)|0;var Ot=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((s=s+Math.imul(M,gt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(U,ut),n=(n=Math.imul(U,dt))+Math.imul(F,ut)|0,s=Math.imul(F,dt);var Mt=(c+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((s=s+Math.imul(L,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863;var Dt=(c+(r=Math.imul(U,pt))|0)+((8191&(n=(n=Math.imul(U,gt))+Math.imul(F,pt)|0))<<13)|0;return c=((s=Math.imul(F,gt))+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,h[0]=yt,h[1]=mt,h[2]=vt,h[3]=bt,h[4]=wt,h[5]=_t,h[6]=xt,h[7]=Et,h[8]=St,h[9]=Tt,h[10]=At,h[11]=Ct,h[12]=kt,h[13]=Rt,h[14]=Pt,h[15]=It,h[16]=Ot,h[17]=Mt,h[18]=Dt,0!==c&&(h[19]=c,i.length++),i};function g(t,e,i){return(new y).mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=f),s.prototype.mulTo=function(t,e){var i,r=this.length+t.length;return i=10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),c=Math.max(0,s-t.length+1);c<=h;c++){var l=s-c,u=(0|t.words[l])*(0|e.words[c]),d=67108863&u;a=67108863&(d=d+a|0),n+=(o=(o=o+(u/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):g(this,t,e),i},y.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},y.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var u=h,d=c,f=0;f<o;f++){var p=i[l+f],g=r[l+f],y=i[l+f+o],m=r[l+f+o],v=u*y-d*m;m=u*m+d*y,y=v,i[l+f]=p+y,r[l+f]=g+m,i[l+f+o]=p-y,r[l+f+o]=g-m,f!==a&&(v=h*u-c*d,d=h*d+c*u,u=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(0==(-8192&s))},y.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,c,r),this.transform(o,s,a,h,r,n),this.transform(c,s,l,u,r,n);for(var f=0;f<r;f++){var p=a[f]*l[f]-h[f]*u[f];h[f]=a[f]*u[f]+h[f]*l[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),g(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,s=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=n);c--){var u=0|this.words[c];this.words[c]=l<<26-s|u>>>s,l=u&a}return h&&0!==l&&(h.words[h.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var u=h-1;u>=0;u--){var d=67108864*(0|r.words[n.length+u])+(0|r.words[n.length+u-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,u);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,u),r.isZero()||(r.negative^=1);a&&(a.words[u]=d)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},s.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var l=i.clone(),u=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(l),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(l),h.isub(u)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(c)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var u=0,d=1;0==(i.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(i.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new E(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},n(b,v),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(w,v),n(_,v),n(x,v),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return m[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},E.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,c).cmp(h);)l.redIAdd(h);for(var u=this.pow(l,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var g=f,y=0;0!==g.cmp(a);y++)g=g.redSqr();r(y<p);var m=this.pow(u,new s(1).iushln(p-y-1));d=d.redMul(m),u=m.redSqr(),f=f.redMul(u),p=y}return d},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=h-1;l>=0;l--){var u=c>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==u||0!==o?(o<<=1,o|=u,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},n(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},29931:(t,e,i)=>{var r;function n(t){this.rand=t}if(t.exports=function(t){return r||(r=new n(null)),r.generate(t)},t.exports.Rand=n,n.prototype.generate=function(t){return this._rand(t)},n.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=i(89214);if("function"!=typeof s.randomBytes)throw new Error("Not supported");n.prototype._rand=function(t){return s.randomBytes(t)}}catch(t){}},86154:t=>{"use strict";t.exports=async function*(t,e={}){const i=t.getReader();try{for(;;){const t=await i.read();if(t.done)return;yield t.value}}finally{!0!==e.preventCancel&&i.cancel(),i.releaseLock()}}},74497:(t,e,i)=>{var r=i(89509).Buffer;function n(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,i=new Array(e),n=0;n<e;n++)i[n]=t.readUInt32BE(4*n);return i}function s(t){for(;0<t.length;t++)t[0]=0}function o(t,e,i,r,n){for(var s,o,a,h,c=i[0],l=i[1],u=i[2],d=i[3],f=t[0]^e[0],p=t[1]^e[1],g=t[2]^e[2],y=t[3]^e[3],m=4,v=1;v<n;v++)s=c[f>>>24]^l[p>>>16&255]^u[g>>>8&255]^d[255&y]^e[m++],o=c[p>>>24]^l[g>>>16&255]^u[y>>>8&255]^d[255&f]^e[m++],a=c[g>>>24]^l[y>>>16&255]^u[f>>>8&255]^d[255&p]^e[m++],h=c[y>>>24]^l[f>>>16&255]^u[p>>>8&255]^d[255&g]^e[m++],f=s,p=o,g=a,y=h;return s=(r[f>>>24]<<24|r[p>>>16&255]<<16|r[g>>>8&255]<<8|r[255&y])^e[m++],o=(r[p>>>24]<<24|r[g>>>16&255]<<16|r[y>>>8&255]<<8|r[255&f])^e[m++],a=(r[g>>>24]<<24|r[y>>>16&255]<<16|r[f>>>8&255]<<8|r[255&p])^e[m++],h=(r[y>>>24]<<24|r[f>>>16&255]<<16|r[p>>>8&255]<<8|r[255&g])^e[m++],[s>>>=0,o>>>=0,a>>>=0,h>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],h=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],r=[],n=[[],[],[],[]],s=[[],[],[],[]],o=0,a=0,h=0;h<256;++h){var c=a^a<<1^a<<2^a<<3^a<<4;c=c>>>8^255&c^99,i[o]=c,r[c]=o;var l=t[o],u=t[l],d=t[u],f=257*t[c]^16843008*c;n[0][o]=f<<24|f>>>8,n[1][o]=f<<16|f>>>16,n[2][o]=f<<8|f>>>24,n[3][o]=f,f=16843009*d^65537*u^257*l^16843008*o,s[0][c]=f<<24|f>>>8,s[1][c]=f<<16|f>>>16,s[2][c]=f<<8|f>>>24,s[3][c]=f,0===o?o=a=1:(o=l^t[t[t[d^l]]],a^=t[t[a]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:n,INV_SUB_MIX:s}}();function c(t){this._key=n(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=4*(i+1),n=[],s=0;s<e;s++)n[s]=t[s];for(s=e;s<r;s++){var o=n[s-1];s%e==0?(o=o<<8|o>>>24,o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o],o^=a[s/e|0]<<24):e>6&&s%e==4&&(o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o]),n[s]=n[s-e]^o}for(var c=[],l=0;l<r;l++){var u=r-l,d=n[u-(l%4?0:4)];c[l]=l<4||u<=4?d:h.INV_SUB_MIX[0][h.SBOX[d>>>24]]^h.INV_SUB_MIX[1][h.SBOX[d>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[d>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&d]]}this._nRounds=i,this._keySchedule=n,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(t){return o(t=n(t),this._keySchedule,h.SUB_MIX,h.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=r.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},c.prototype.decryptBlock=function(t){var e=(t=n(t))[1];t[1]=t[3],t[3]=e;var i=o(t,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX,this._nRounds),s=r.allocUnsafe(16);return s.writeUInt32BE(i[0],0),s.writeUInt32BE(i[3],4),s.writeUInt32BE(i[2],8),s.writeUInt32BE(i[1],12),s},c.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},t.exports.AES=c},62422:(t,e,i)=>{var r=i(74497),n=i(89509).Buffer,s=i(71027),o=i(35717),a=i(83288),h=i(67295),c=i(20685);function l(t,e,i,o){s.call(this);var h=n.alloc(4,0);this._cipher=new r.AES(e);var l=this._cipher.encryptBlock(h);this._ghash=new a(l),i=function(t,e,i){if(12===e.length)return t._finID=n.concat([e,n.from([0,0,0,1])]),n.concat([e,n.from([0,0,0,2])]);var r=new a(i),s=e.length,o=s%16;r.update(e),o&&(o=16-o,r.update(n.alloc(o,0))),r.update(n.alloc(8,0));var h=8*s,l=n.alloc(8);l.writeUIntBE(h,0,8),r.update(l),t._finID=r.state;var u=n.from(t._finID);return c(u),u}(this,i,l),this._prev=n.from(i),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}o(l,s),l.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=n.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=h(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var i=0;t.length!==e.length&&i++;for(var r=Math.min(t.length,e.length),n=0;n<r;++n)i+=t[n]^e[n];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},l.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=l},44696:(t,e,i)=>{var r=i(71494),n=i(66193),s=i(44946);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=n.createDecipher,e.createDecipheriv=e.Decipheriv=n.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(s)}},66193:(t,e,i)=>{var r=i(62422),n=i(89509).Buffer,s=i(45),o=i(25969),a=i(71027),h=i(74497),c=i(13048);function l(t,e,i){a.call(this),this._cache=new u,this._last=void 0,this._cipher=new h.AES(e),this._prev=n.from(i),this._mode=t,this._autopadding=!0}function u(){this.cache=n.allocUnsafe(0)}function d(t,e,i){var a=s[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=n.from(i)),"GCM"!==a.mode&&i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof e&&(e=n.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new o(a.module,e,i,!0):"auth"===a.type?new r(a.module,e,i,!0):new l(a.module,e,i)}i(35717)(l,a),l.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),r.push(i);return n.concat(r)},l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var i=-1;++i<e;)if(t[i+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},u.prototype.add=function(t){this.cache=n.concat([this.cache,t])},u.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},u.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var i=s[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var r=c(e,!1,i.key,i.iv);return d(t,r.key,r.iv)},e.createDecipheriv=d},71494:(t,e,i)=>{var r=i(45),n=i(62422),s=i(89509).Buffer,o=i(25969),a=i(71027),h=i(74497),c=i(13048);function l(t,e,i){a.call(this),this._cache=new d,this._cipher=new h.AES(e),this._prev=s.from(i),this._mode=t,this._autopadding=!0}i(35717)(l,a),l.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get();)i=this._mode.encrypt(this,e),r.push(i);return s.concat(r)};var u=s.alloc(16,16);function d(){this.cache=s.allocUnsafe(0)}function f(t,e,i){var a=r[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=s.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=s.from(i)),"GCM"!==a.mode&&i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===a.type?new o(a.module,e,i):"auth"===a.type?new n(a.module,e,i):new l(a.module,e,i)}l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(u))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},d.prototype.add=function(t){this.cache=s.concat([this.cache,t])},d.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},d.prototype.flush=function(){for(var t=16-this.cache.length,e=s.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return s.concat([this.cache,e])},e.createCipheriv=f,e.createCipher=function(t,e){var i=r[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=c(e,!1,i.key,i.iv);return f(t,n.key,n.iv)}},83288:(t,e,i)=>{var r=i(89509).Buffer,n=r.alloc(16,0);function s(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function o(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}o.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},o.prototype._multiply=function(){for(var t,e,i,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],n=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),i=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,i&&(r[0]=r[0]^225<<24)}this.state=s(n)},o.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},o.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,n],16)),this.ghash(s([0,t,0,e])),this.state},t.exports=o},20685:t=>{t.exports=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}}},25292:(t,e,i)=>{var r=i(67295);e.encrypt=function(t,e){var i=r(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},e.decrypt=function(t,e){var i=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return r(n,i)}},86311:(t,e,i)=>{var r=i(89509).Buffer,n=i(67295);function s(t,e,i){var s=e.length,o=n(e,t._cache);return t._cache=t._cache.slice(s),t._prev=r.concat([t._prev,i?e:o]),o}e.encrypt=function(t,e,i){for(var n,o=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){o=r.concat([o,s(t,e,i)]);break}n=t._cache.length,o=r.concat([o,s(t,e.slice(0,n),i)]),e=e.slice(n)}return o}},21510:(t,e,i)=>{var r=i(89509).Buffer;function n(t,e,i){for(var r,n,o=-1,a=0;++o<8;)r=e&1<<7-o?128:0,a+=(128&(n=t._cipher.encryptBlock(t._prev)[0]^r))>>o%8,t._prev=s(t._prev,i?r:n);return a}function s(t,e){var i=t.length,n=-1,s=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++n<i;)s[n]=t[n]<<1|t[n+1]>>7;return s}e.encrypt=function(t,e,i){for(var s=e.length,o=r.allocUnsafe(s),a=-1;++a<s;)o[a]=n(t,e[a],i);return o}},71964:(t,e,i)=>{var r=i(89509).Buffer;function n(t,e,i){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([i?e:n])]),n}e.encrypt=function(t,e,i){for(var s=e.length,o=r.allocUnsafe(s),a=-1;++a<s;)o[a]=n(t,e[a],i);return o}},96009:(t,e,i)=>{var r=i(67295),n=i(89509).Buffer,s=i(20685);function o(t){var e=t._cipher.encryptBlockRaw(t._prev);return s(t._prev),e}e.encrypt=function(t,e){var i=Math.ceil(e.length/16),s=t._cache.length;t._cache=n.concat([t._cache,n.allocUnsafe(16*i)]);for(var a=0;a<i;a++){var h=o(t),c=s+16*a;t._cache.writeUInt32BE(h[0],c+0),t._cache.writeUInt32BE(h[1],c+4),t._cache.writeUInt32BE(h[2],c+8),t._cache.writeUInt32BE(h[3],c+12)}var l=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,l)}},11084:(t,e)=>{e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},45:(t,e,i)=>{var r={ECB:i(11084),CBC:i(25292),CFB:i(86311),CFB8:i(71964),CFB1:i(21510),OFB:i(18861),CTR:i(96009),GCM:i(96009)},n=i(44946);for(var s in n)n[s].module=r[n[s].mode];t.exports=n},18861:(t,e,i)=>{var r=i(48764).Buffer,n=i(67295);function s(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=r.concat([t._cache,s(t)]);var i=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,i)}},25969:(t,e,i)=>{var r=i(74497),n=i(89509).Buffer,s=i(71027);function o(t,e,i,o){s.call(this),this._cipher=new r.AES(e),this._prev=n.from(i),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=o,this._mode=t}i(35717)(o,s),o.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},t.exports=o},53614:(t,e,i)=>{var r=i(47667),n=i(44696),s=i(45),o=i(99715),a=i(13048);function h(t,e,i){if(t=t.toLowerCase(),s[t])return n.createCipheriv(t,e,i);if(o[t])return new r({key:e,iv:i,mode:t});throw new TypeError("invalid suite type")}function c(t,e,i){if(t=t.toLowerCase(),s[t])return n.createDecipheriv(t,e,i);if(o[t])return new r({key:e,iv:i,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var i,r;if(t=t.toLowerCase(),s[t])i=s[t].key,r=s[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");i=8*o[t].key,r=o[t].iv}var n=a(e,!1,i,r);return h(t,n.key,n.iv)},e.createCipheriv=e.Cipheriv=h,e.createDecipher=e.Decipher=function(t,e){var i,r;if(t=t.toLowerCase(),s[t])i=s[t].key,r=s[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");i=8*o[t].key,r=o[t].iv}var n=a(e,!1,i,r);return c(t,n.key,n.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(o).concat(n.getCiphers())}},47667:(t,e,i)=>{var r=i(71027),n=i(15251),s=i(35717),o=i(89509).Buffer,a={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};function h(t){r.call(this);var e,i=t.mode.toLowerCase(),n=a[i];e=t.decrypt?"decrypt":"encrypt";var s=t.key;o.isBuffer(s)||(s=o.from(s)),"des-ede"!==i&&"des-ede-cbc"!==i||(s=o.concat([s,s.slice(0,8)]));var h=t.iv;o.isBuffer(h)||(h=o.from(h)),this._des=n.create({key:s,iv:h,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=h,s(h,r),h.prototype._update=function(t){return o.from(this._des.update(t))},h.prototype._final=function(){return o.from(this._des.final())}},99715:(t,e)=>{e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},23663:(t,e,i)=>{var r=i(48764).Buffer,n=i(43982),s=i(61798);function o(t){var e,i=t.modulus.byteLength();do{e=new n(s(i))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,e){var i=function(t){var e=o(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(e),s=e.modulus.byteLength(),a=new n(t).mul(i.blinder).umod(e.modulus),h=a.toRed(n.mont(e.prime1)),c=a.toRed(n.mont(e.prime2)),l=e.coefficient,u=e.prime1,d=e.prime2,f=h.redPow(e.exponent1).fromRed(),p=c.redPow(e.exponent2).fromRed(),g=f.isub(p).imul(l).umod(u).imul(d);return p.iadd(g).imul(i.unblinder).umod(e.modulus).toArrayLike(r,"be",s)}a.getr=o,t.exports=a},43982:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(71922).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function c(t,e,i,n){for(var s=0,o=0,a=Math.min(t.length,i),h=e;h<a;h++){var c=t.charCodeAt(h)-48;s*=n,o=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&o<n,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this._strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,l=i;l<a;l+=r)h=c(t,l,l+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var u=1;for(h=c(t,l,t.length,e),l=0;l<o;l++)u*=e;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){l(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(t){s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var c=1;c<r;c++){for(var l=h>>>26,u=67108863&h,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[f])+u)/67108864|0,u=67108863&o}i.words[c]=0|u,h=0|l}return 0!==h?i.words[c]=0|h:i.length--,i._strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);i=0!=(s=a>>>24-n&16777215)||o!==this.length-1?d[6-h.length]+h+i:h+i,(n+=2)>=26&&(n-=26,o--)}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];i="";var u=this.clone();for(u.negative=0;!u.isZero();){var g=u.modrn(l).toString(t);i=(u=u.idivn(l)).isZero()?g+i:d[c-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){this._strip();var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,n),o},s.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===s?(i<t.length&&(t[i++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===s?(i>=0&&(t[i--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this._strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,c=0,l=0|o[0],u=8191&l,d=l>>>13,f=0|o[1],p=8191&f,g=f>>>13,y=0|o[2],m=8191&y,v=y>>>13,b=0|o[3],w=8191&b,_=b>>>13,x=0|o[4],E=8191&x,S=x>>>13,T=0|o[5],A=8191&T,C=T>>>13,k=0|o[6],R=8191&k,P=k>>>13,I=0|o[7],O=8191&I,M=I>>>13,D=0|o[8],B=8191&D,L=D>>>13,N=0|o[9],U=8191&N,F=N>>>13,z=0|a[0],j=8191&z,V=z>>>13,G=0|a[1],H=8191&G,Y=G>>>13,K=0|a[2],W=8191&K,X=K>>>13,q=0|a[3],$=8191&q,J=q>>>13,Z=0|a[4],Q=8191&Z,tt=Z>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,ct=at>>>13,lt=0|a[8],ut=8191&lt,dt=lt>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(c+(r=Math.imul(u,j))|0)+((8191&(n=(n=Math.imul(u,V))+Math.imul(d,j)|0))<<13)|0;c=((s=Math.imul(d,V))+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(p,j),n=(n=Math.imul(p,V))+Math.imul(g,j)|0,s=Math.imul(g,V);var mt=(c+(r=r+Math.imul(u,H)|0)|0)+((8191&(n=(n=n+Math.imul(u,Y)|0)+Math.imul(d,H)|0))<<13)|0;c=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,j),n=(n=Math.imul(m,V))+Math.imul(v,j)|0,s=Math.imul(v,V),r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,Y)|0;var vt=(c+(r=r+Math.imul(u,W)|0)|0)+((8191&(n=(n=n+Math.imul(u,X)|0)+Math.imul(d,W)|0))<<13)|0;c=((s=s+Math.imul(d,X)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(w,j),n=(n=Math.imul(w,V))+Math.imul(_,j)|0,s=Math.imul(_,V),r=r+Math.imul(m,H)|0,n=(n=n+Math.imul(m,Y)|0)+Math.imul(v,H)|0,s=s+Math.imul(v,Y)|0,r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,X)|0;var bt=(c+(r=r+Math.imul(u,$)|0)|0)+((8191&(n=(n=n+Math.imul(u,J)|0)+Math.imul(d,$)|0))<<13)|0;c=((s=s+Math.imul(d,J)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(E,j),n=(n=Math.imul(E,V))+Math.imul(S,j)|0,s=Math.imul(S,V),r=r+Math.imul(w,H)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(_,H)|0,s=s+Math.imul(_,Y)|0,r=r+Math.imul(m,W)|0,n=(n=n+Math.imul(m,X)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,X)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,$)|0,s=s+Math.imul(g,J)|0;var wt=(c+(r=r+Math.imul(u,Q)|0)|0)+((8191&(n=(n=n+Math.imul(u,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(A,j),n=(n=Math.imul(A,V))+Math.imul(C,j)|0,s=Math.imul(C,V),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,Y)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(w,W)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,X)|0,r=r+Math.imul(m,$)|0,n=(n=n+Math.imul(m,J)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,J)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var _t=(c+(r=r+Math.imul(u,it)|0)|0)+((8191&(n=(n=n+Math.imul(u,rt)|0)+Math.imul(d,it)|0))<<13)|0;c=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(R,j),n=(n=Math.imul(R,V))+Math.imul(P,j)|0,s=Math.imul(P,V),r=r+Math.imul(A,H)|0,n=(n=n+Math.imul(A,Y)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(E,W)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(S,W)|0,s=s+Math.imul(S,X)|0,r=r+Math.imul(w,$)|0,n=(n=n+Math.imul(w,J)|0)+Math.imul(_,$)|0,s=s+Math.imul(_,J)|0,r=r+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(g,it)|0,s=s+Math.imul(g,rt)|0;var xt=(c+(r=r+Math.imul(u,st)|0)|0)+((8191&(n=(n=n+Math.imul(u,ot)|0)+Math.imul(d,st)|0))<<13)|0;c=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,j),n=(n=Math.imul(O,V))+Math.imul(M,j)|0,s=Math.imul(M,V),r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,Y)|0)+Math.imul(P,H)|0,s=s+Math.imul(P,Y)|0,r=r+Math.imul(A,W)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,X)|0,r=r+Math.imul(E,$)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(S,$)|0,s=s+Math.imul(S,J)|0,r=r+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,tt)|0,r=r+Math.imul(m,it)|0,n=(n=n+Math.imul(m,rt)|0)+Math.imul(v,it)|0,s=s+Math.imul(v,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var Et=(c+(r=r+Math.imul(u,ht)|0)|0)+((8191&(n=(n=n+Math.imul(u,ct)|0)+Math.imul(d,ht)|0))<<13)|0;c=((s=s+Math.imul(d,ct)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,j),n=(n=Math.imul(B,V))+Math.imul(L,j)|0,s=Math.imul(L,V),r=r+Math.imul(O,H)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(M,H)|0,s=s+Math.imul(M,Y)|0,r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(P,W)|0,s=s+Math.imul(P,X)|0,r=r+Math.imul(A,$)|0,n=(n=n+Math.imul(A,J)|0)+Math.imul(C,$)|0,s=s+Math.imul(C,J)|0,r=r+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(w,it)|0,n=(n=n+Math.imul(w,rt)|0)+Math.imul(_,it)|0,s=s+Math.imul(_,rt)|0,r=r+Math.imul(m,st)|0,n=(n=n+Math.imul(m,ot)|0)+Math.imul(v,st)|0,s=s+Math.imul(v,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,ct)|0)+Math.imul(g,ht)|0,s=s+Math.imul(g,ct)|0;var St=(c+(r=r+Math.imul(u,ut)|0)|0)+((8191&(n=(n=n+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;c=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(U,j),n=(n=Math.imul(U,V))+Math.imul(F,j)|0,s=Math.imul(F,V),r=r+Math.imul(B,H)|0,n=(n=n+Math.imul(B,Y)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,Y)|0,r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,X)|0,r=r+Math.imul(R,$)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(P,$)|0,s=s+Math.imul(P,J)|0,r=r+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,tt)|0,r=r+Math.imul(E,it)|0,n=(n=n+Math.imul(E,rt)|0)+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(w,st)|0,n=(n=n+Math.imul(w,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,r=r+Math.imul(m,ht)|0,n=(n=n+Math.imul(m,ct)|0)+Math.imul(v,ht)|0,s=s+Math.imul(v,ct)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(g,ut)|0,s=s+Math.imul(g,dt)|0;var Tt=(c+(r=r+Math.imul(u,pt)|0)|0)+((8191&(n=(n=n+Math.imul(u,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((s=s+Math.imul(d,gt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,H),n=(n=Math.imul(U,Y))+Math.imul(F,H)|0,s=Math.imul(F,Y),r=r+Math.imul(B,W)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,X)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,J)|0,r=r+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(P,Q)|0,s=s+Math.imul(P,tt)|0,r=r+Math.imul(A,it)|0,n=(n=n+Math.imul(A,rt)|0)+Math.imul(C,it)|0,s=s+Math.imul(C,rt)|0,r=r+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(w,ht)|0,n=(n=n+Math.imul(w,ct)|0)+Math.imul(_,ht)|0,s=s+Math.imul(_,ct)|0,r=r+Math.imul(m,ut)|0,n=(n=n+Math.imul(m,dt)|0)+Math.imul(v,ut)|0,s=s+Math.imul(v,dt)|0;var At=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((s=s+Math.imul(g,gt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,W),n=(n=Math.imul(U,X))+Math.imul(F,W)|0,s=Math.imul(F,X),r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,J)|0)+Math.imul(L,$)|0,s=s+Math.imul(L,J)|0,r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(R,it)|0,n=(n=n+Math.imul(R,rt)|0)+Math.imul(P,it)|0,s=s+Math.imul(P,rt)|0,r=r+Math.imul(A,st)|0,n=(n=n+Math.imul(A,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,r=r+Math.imul(E,ht)|0,n=(n=n+Math.imul(E,ct)|0)+Math.imul(S,ht)|0,s=s+Math.imul(S,ct)|0,r=r+Math.imul(w,ut)|0,n=(n=n+Math.imul(w,dt)|0)+Math.imul(_,ut)|0,s=s+Math.imul(_,dt)|0;var Ct=(c+(r=r+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,gt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((s=s+Math.imul(v,gt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,$),n=(n=Math.imul(U,J))+Math.imul(F,$)|0,s=Math.imul(F,J),r=r+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(R,st)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(P,st)|0,s=s+Math.imul(P,ot)|0,r=r+Math.imul(A,ht)|0,n=(n=n+Math.imul(A,ct)|0)+Math.imul(C,ht)|0,s=s+Math.imul(C,ct)|0,r=r+Math.imul(E,ut)|0,n=(n=n+Math.imul(E,dt)|0)+Math.imul(S,ut)|0,s=s+Math.imul(S,dt)|0;var kt=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(n=(n=n+Math.imul(w,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((s=s+Math.imul(_,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),n=(n=Math.imul(U,tt))+Math.imul(F,Q)|0,s=Math.imul(F,tt),r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(L,it)|0,s=s+Math.imul(L,rt)|0,r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(R,ht)|0,n=(n=n+Math.imul(R,ct)|0)+Math.imul(P,ht)|0,s=s+Math.imul(P,ct)|0,r=r+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,dt)|0)+Math.imul(C,ut)|0,s=s+Math.imul(C,dt)|0;var Rt=(c+(r=r+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,gt)|0)+Math.imul(S,pt)|0))<<13)|0;c=((s=s+Math.imul(S,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(U,it),n=(n=Math.imul(U,rt))+Math.imul(F,it)|0,s=Math.imul(F,rt),r=r+Math.imul(B,st)|0,n=(n=n+Math.imul(B,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,r=r+Math.imul(O,ht)|0,n=(n=n+Math.imul(O,ct)|0)+Math.imul(M,ht)|0,s=s+Math.imul(M,ct)|0,r=r+Math.imul(R,ut)|0,n=(n=n+Math.imul(R,dt)|0)+Math.imul(P,ut)|0,s=s+Math.imul(P,dt)|0;var Pt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(n=(n=n+Math.imul(A,gt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((s=s+Math.imul(C,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(U,st),n=(n=Math.imul(U,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),r=r+Math.imul(B,ht)|0,n=(n=n+Math.imul(B,ct)|0)+Math.imul(L,ht)|0,s=s+Math.imul(L,ct)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,dt)|0)+Math.imul(M,ut)|0,s=s+Math.imul(M,dt)|0;var It=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,gt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((s=s+Math.imul(P,gt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,ht),n=(n=Math.imul(U,ct))+Math.imul(F,ht)|0,s=Math.imul(F,ct),r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,dt)|0)+Math.imul(L,ut)|0,s=s+Math.imul(L,dt)|0;var Ot=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((s=s+Math.imul(M,gt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(U,ut),n=(n=Math.imul(U,dt))+Math.imul(F,ut)|0,s=Math.imul(F,dt);var Mt=(c+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((s=s+Math.imul(L,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863;var Dt=(c+(r=Math.imul(U,pt))|0)+((8191&(n=(n=Math.imul(U,gt))+Math.imul(F,pt)|0))<<13)|0;return c=((s=Math.imul(F,gt))+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,h[0]=yt,h[1]=mt,h[2]=vt,h[3]=bt,h[4]=wt,h[5]=_t,h[6]=xt,h[7]=Et,h[8]=St,h[9]=Tt,h[10]=At,h[11]=Ct,h[12]=kt,h[13]=Rt,h[14]=Pt,h[15]=It,h[16]=Ot,h[17]=Mt,h[18]=Dt,0!==c&&(h[19]=c,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),c=Math.max(0,s-t.length+1);c<=h;c++){var l=s-c,u=(0|t.words[l])*(0|e.words[c]),d=67108863&u;a=67108863&(d=d+a|0),n+=(o=(o=o+(u/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i._strip()}function v(t,e,i){return m(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=g),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):i<63?g(this,t,e):i<1024?m(this,t,e):v(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},b.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var u=h,d=c,f=0;f<o;f++){var p=i[l+f],g=r[l+f],y=i[l+f+o],m=r[l+f+o],v=u*y-d*m;m=u*m+d*y,y=v,i[l+f]=p+y,r[l+f]=g+m,i[l+f+o]=p-y,r[l+f+o]=g-m,f!==a&&(v=h*u-c*d,d=h*d+c*u,u=v)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},b.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(0==(-8192&s))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,c,r),this.transform(o,s,a,h,r,n),this.transform(c,s,l,u,r,n);for(var f=0;f<r;f++){var p=a[f]*l[f]-h[f]*u[f];h[f]=a[f]*u[f]+h[f]*l[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),v(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var s=(0|this.words[n])*t,o=(67108863&s)+(67108863&i);i>>=26,i+=s/67108864|0,i+=o>>>26,this.words[n]=67108863&o}return 0!==i&&(this.words[n]=i,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=n);c--){var u=0|this.words[c];this.words[c]=l<<26-s|u>>>s,l=u&a}return h&&0!==l&&(h.words[h.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var u=h-1;u>=0;u--){var d=67108864*(0|r.words[n.length+u])+(0|r.words[n.length+u-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,u);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,u),r.isZero()||(r.negative^=1);a&&(a.words[u]=d)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,n=0,s=this.length-1;s>=0;s--)n=(i*n+(0|this.words[s]))%t;return e?-n:n},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*i;this.words[n]=s/t|0,i=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var l=i.clone(),u=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(l),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(l),h.isub(u)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(c)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var u=0,d=1;0==(i.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(i.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new A(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function C(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},n(x,_),x.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(E,_),n(S,_),n(T,_),T.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return w[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},A.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,c).cmp(h);)l.redIAdd(h);for(var u=this.pow(l,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var g=f,y=0;0!==g.cmp(a);y++)g=g.redSqr();r(y<p);var m=this.pow(u,new s(1).iushln(p-y-1));d=d.redMul(m),u=m.redSqr(),f=f.redMul(u),p=y}return d},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=h-1;l>=0;l--){var u=c>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==u||0!==o?(o<<=1,o|=u,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new C(t)},n(C,A),C.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},C.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},C.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},C.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},C.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},56042:(t,e,i)=>{t.exports=i(75207)},64743:(t,e,i)=>{var r=i(89509).Buffer,n=i(23482),s=i(88473),o=i(35717),a=i(82957),h=i(47753),c=i(75207);function l(t){s.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function u(t){s.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function d(t){return new l(t)}function f(t){return new u(t)}Object.keys(c).forEach((function(t){c[t].id=r.from(c[t].id,"hex"),c[t.toLowerCase()]=c[t]})),o(l,s.Writable),l.prototype._write=function(t,e,i){this._hash.update(t),i()},l.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},l.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=a(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},o(u,s.Writable),u.prototype._write=function(t,e,i){this._hash.update(t),i()},u.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},u.prototype.verify=function(t,e,i){"string"==typeof e&&(e=r.from(e,i)),this.end();var n=this._hash.digest();return h(e,n,t,this._signType,this._tag)},t.exports={Sign:d,Verify:f,createSign:d,createVerify:f}},82957:(t,e,i)=>{var r=i(89509).Buffer,n=i(58355),s=i(23663),o=i(86266).ec,a=i(58815),h=i(70980),c=i(1308);function l(t,e,i,s){if((t=r.from(t.toArray())).length<e.byteLength()){var o=r.alloc(e.byteLength()-t.length);t=r.concat([o,t])}var a=i.length,h=function(t,e){t=(t=u(t,e)).mod(e);var i=r.from(t.toArray());if(i.length<e.byteLength()){var n=r.alloc(e.byteLength()-i.length);i=r.concat([n,i])}return i}(i,e),c=r.alloc(a);c.fill(1);var l=r.alloc(a);return l=n(s,l).update(c).update(r.from([0])).update(t).update(h).digest(),c=n(s,l).update(c).digest(),{k:l=n(s,l).update(c).update(r.from([1])).update(t).update(h).digest(),v:c=n(s,l).update(c).digest()}}function u(t,e){var i=new a(t),r=(t.length<<3)-e.bitLength();return r>0&&i.ishrn(r),i}function d(t,e,i){var s,o;do{for(s=r.alloc(0);8*s.length<t.bitLength();)e.v=n(i,e.k).update(e.v).digest(),s=r.concat([s,e.v]);o=u(s,t),e.k=n(i,e.k).update(e.v).update(r.from([0])).digest(),e.v=n(i,e.k).update(e.v).digest()}while(-1!==o.cmp(t));return o}function f(t,e,i,r){return t.toRed(a.mont(i)).redPow(e).fromRed().mod(r)}t.exports=function(t,e,i,n,p){var g=h(e);if(g.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return function(t,e){var i=c[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var n=new o(i).keyFromPrivate(e.privateKey).sign(t);return r.from(n.toDER())}(t,g)}if("dsa"===g.type){if("dsa"!==n)throw new Error("wrong private key type");return function(t,e,i){for(var n,s=e.params.priv_key,o=e.params.p,h=e.params.q,c=e.params.g,p=new a(0),g=u(t,h).mod(h),y=!1,m=l(s,h,t,i);!1===y;)p=f(c,n=d(h,m,i),o,h),0===(y=n.invm(h).imul(g.add(s.mul(p))).mod(h)).cmpn(0)&&(y=!1,p=new a(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),r.from(i)}(p,y)}(t,g,i)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");t=r.concat([p,t]);for(var y=g.modulus.byteLength(),m=[0,1];t.length+m.length+1<y;)m.push(255);m.push(0);for(var v=-1;++v<t.length;)m.push(t[v]);return s(m,g)},t.exports.getKey=l,t.exports.makeKey=d},47753:(t,e,i)=>{var r=i(89509).Buffer,n=i(58815),s=i(86266).ec,o=i(70980),a=i(1308);function h(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,i,c,l){var u=o(i);if("ec"===u.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(t,e,i){var r=a[i.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var n=new s(r),o=i.data.subjectPrivateKey.data;return n.verify(e,t,o)}(t,e,u)}if("dsa"===u.type){if("dsa"!==c)throw new Error("wrong public key type");return function(t,e,i){var r=i.data.p,s=i.data.q,a=i.data.g,c=i.data.pub_key,l=o.signature.decode(t,"der"),u=l.s,d=l.r;h(u,s),h(d,s);var f=n.mont(r),p=u.invm(s);return 0===a.toRed(f).redPow(new n(e).mul(p).mod(s)).fromRed().mul(c.toRed(f).redPow(d.mul(p).mod(s)).fromRed()).mod(r).mod(s).cmp(d)}(t,e,u)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");e=r.concat([l,e]);for(var d=u.modulus.byteLength(),f=[1],p=0;e.length+f.length+2<d;)f.push(255),p++;f.push(0);for(var g=-1;++g<e.length;)f.push(e[g]);f=r.from(f);var y=n.mont(u.modulus);t=(t=new n(t).toRed(y)).redPow(new n(u.publicExponent)),t=r.from(t.fromRed().toArray());var m=p<8?1:0;for(d=Math.min(t.length,f.length),t.length!==f.length&&(m=1),g=-1;++g<d;)m|=t[g]^f[g];return 0===m}},58815:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(2363).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function c(t,e,i,n){for(var s=0,o=0,a=Math.min(t.length,i),h=e;h<a;h++){var c=t.charCodeAt(h)-48;s*=n,o=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&o<n,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this._strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,l=i;l<a;l+=r)h=c(t,l,l+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var u=1;for(h=c(t,l,t.length,e),l=0;l<o;l++)u*=e;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){l(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(t){s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var c=1;c<r;c++){for(var l=h>>>26,u=67108863&h,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[f])+u)/67108864|0,u=67108863&o}i.words[c]=0|u,h=0|l}return 0!==h?i.words[c]=0|h:i.length--,i._strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);i=0!=(s=a>>>24-n&16777215)||o!==this.length-1?d[6-h.length]+h+i:h+i,(n+=2)>=26&&(n-=26,o--)}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];i="";var u=this.clone();for(u.negative=0;!u.isZero();){var g=u.modrn(l).toString(t);i=(u=u.idivn(l)).isZero()?g+i:d[c-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){this._strip();var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,n),o},s.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===s?(i<t.length&&(t[i++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===s?(i>=0&&(t[i--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this._strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,c=0,l=0|o[0],u=8191&l,d=l>>>13,f=0|o[1],p=8191&f,g=f>>>13,y=0|o[2],m=8191&y,v=y>>>13,b=0|o[3],w=8191&b,_=b>>>13,x=0|o[4],E=8191&x,S=x>>>13,T=0|o[5],A=8191&T,C=T>>>13,k=0|o[6],R=8191&k,P=k>>>13,I=0|o[7],O=8191&I,M=I>>>13,D=0|o[8],B=8191&D,L=D>>>13,N=0|o[9],U=8191&N,F=N>>>13,z=0|a[0],j=8191&z,V=z>>>13,G=0|a[1],H=8191&G,Y=G>>>13,K=0|a[2],W=8191&K,X=K>>>13,q=0|a[3],$=8191&q,J=q>>>13,Z=0|a[4],Q=8191&Z,tt=Z>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,ct=at>>>13,lt=0|a[8],ut=8191&lt,dt=lt>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(c+(r=Math.imul(u,j))|0)+((8191&(n=(n=Math.imul(u,V))+Math.imul(d,j)|0))<<13)|0;c=((s=Math.imul(d,V))+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(p,j),n=(n=Math.imul(p,V))+Math.imul(g,j)|0,s=Math.imul(g,V);var mt=(c+(r=r+Math.imul(u,H)|0)|0)+((8191&(n=(n=n+Math.imul(u,Y)|0)+Math.imul(d,H)|0))<<13)|0;c=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,j),n=(n=Math.imul(m,V))+Math.imul(v,j)|0,s=Math.imul(v,V),r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,Y)|0;var vt=(c+(r=r+Math.imul(u,W)|0)|0)+((8191&(n=(n=n+Math.imul(u,X)|0)+Math.imul(d,W)|0))<<13)|0;c=((s=s+Math.imul(d,X)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(w,j),n=(n=Math.imul(w,V))+Math.imul(_,j)|0,s=Math.imul(_,V),r=r+Math.imul(m,H)|0,n=(n=n+Math.imul(m,Y)|0)+Math.imul(v,H)|0,s=s+Math.imul(v,Y)|0,r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,X)|0;var bt=(c+(r=r+Math.imul(u,$)|0)|0)+((8191&(n=(n=n+Math.imul(u,J)|0)+Math.imul(d,$)|0))<<13)|0;c=((s=s+Math.imul(d,J)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(E,j),n=(n=Math.imul(E,V))+Math.imul(S,j)|0,s=Math.imul(S,V),r=r+Math.imul(w,H)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(_,H)|0,s=s+Math.imul(_,Y)|0,r=r+Math.imul(m,W)|0,n=(n=n+Math.imul(m,X)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,X)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,$)|0,s=s+Math.imul(g,J)|0;var wt=(c+(r=r+Math.imul(u,Q)|0)|0)+((8191&(n=(n=n+Math.imul(u,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(A,j),n=(n=Math.imul(A,V))+Math.imul(C,j)|0,s=Math.imul(C,V),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,Y)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(w,W)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,X)|0,r=r+Math.imul(m,$)|0,n=(n=n+Math.imul(m,J)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,J)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var _t=(c+(r=r+Math.imul(u,it)|0)|0)+((8191&(n=(n=n+Math.imul(u,rt)|0)+Math.imul(d,it)|0))<<13)|0;c=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(R,j),n=(n=Math.imul(R,V))+Math.imul(P,j)|0,s=Math.imul(P,V),r=r+Math.imul(A,H)|0,n=(n=n+Math.imul(A,Y)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(E,W)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(S,W)|0,s=s+Math.imul(S,X)|0,r=r+Math.imul(w,$)|0,n=(n=n+Math.imul(w,J)|0)+Math.imul(_,$)|0,s=s+Math.imul(_,J)|0,r=r+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(g,it)|0,s=s+Math.imul(g,rt)|0;var xt=(c+(r=r+Math.imul(u,st)|0)|0)+((8191&(n=(n=n+Math.imul(u,ot)|0)+Math.imul(d,st)|0))<<13)|0;c=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,j),n=(n=Math.imul(O,V))+Math.imul(M,j)|0,s=Math.imul(M,V),r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,Y)|0)+Math.imul(P,H)|0,s=s+Math.imul(P,Y)|0,r=r+Math.imul(A,W)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,X)|0,r=r+Math.imul(E,$)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(S,$)|0,s=s+Math.imul(S,J)|0,r=r+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,tt)|0,r=r+Math.imul(m,it)|0,n=(n=n+Math.imul(m,rt)|0)+Math.imul(v,it)|0,s=s+Math.imul(v,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var Et=(c+(r=r+Math.imul(u,ht)|0)|0)+((8191&(n=(n=n+Math.imul(u,ct)|0)+Math.imul(d,ht)|0))<<13)|0;c=((s=s+Math.imul(d,ct)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,j),n=(n=Math.imul(B,V))+Math.imul(L,j)|0,s=Math.imul(L,V),r=r+Math.imul(O,H)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(M,H)|0,s=s+Math.imul(M,Y)|0,r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(P,W)|0,s=s+Math.imul(P,X)|0,r=r+Math.imul(A,$)|0,n=(n=n+Math.imul(A,J)|0)+Math.imul(C,$)|0,s=s+Math.imul(C,J)|0,r=r+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(w,it)|0,n=(n=n+Math.imul(w,rt)|0)+Math.imul(_,it)|0,s=s+Math.imul(_,rt)|0,r=r+Math.imul(m,st)|0,n=(n=n+Math.imul(m,ot)|0)+Math.imul(v,st)|0,s=s+Math.imul(v,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,ct)|0)+Math.imul(g,ht)|0,s=s+Math.imul(g,ct)|0;var St=(c+(r=r+Math.imul(u,ut)|0)|0)+((8191&(n=(n=n+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;c=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(U,j),n=(n=Math.imul(U,V))+Math.imul(F,j)|0,s=Math.imul(F,V),r=r+Math.imul(B,H)|0,n=(n=n+Math.imul(B,Y)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,Y)|0,r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,X)|0,r=r+Math.imul(R,$)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(P,$)|0,s=s+Math.imul(P,J)|0,r=r+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,tt)|0,r=r+Math.imul(E,it)|0,n=(n=n+Math.imul(E,rt)|0)+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(w,st)|0,n=(n=n+Math.imul(w,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,r=r+Math.imul(m,ht)|0,n=(n=n+Math.imul(m,ct)|0)+Math.imul(v,ht)|0,s=s+Math.imul(v,ct)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(g,ut)|0,s=s+Math.imul(g,dt)|0;var Tt=(c+(r=r+Math.imul(u,pt)|0)|0)+((8191&(n=(n=n+Math.imul(u,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((s=s+Math.imul(d,gt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,H),n=(n=Math.imul(U,Y))+Math.imul(F,H)|0,s=Math.imul(F,Y),r=r+Math.imul(B,W)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,X)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,J)|0,r=r+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(P,Q)|0,s=s+Math.imul(P,tt)|0,r=r+Math.imul(A,it)|0,n=(n=n+Math.imul(A,rt)|0)+Math.imul(C,it)|0,s=s+Math.imul(C,rt)|0,r=r+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(w,ht)|0,n=(n=n+Math.imul(w,ct)|0)+Math.imul(_,ht)|0,s=s+Math.imul(_,ct)|0,r=r+Math.imul(m,ut)|0,n=(n=n+Math.imul(m,dt)|0)+Math.imul(v,ut)|0,s=s+Math.imul(v,dt)|0;var At=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((s=s+Math.imul(g,gt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,W),n=(n=Math.imul(U,X))+Math.imul(F,W)|0,s=Math.imul(F,X),r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,J)|0)+Math.imul(L,$)|0,s=s+Math.imul(L,J)|0,r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(R,it)|0,n=(n=n+Math.imul(R,rt)|0)+Math.imul(P,it)|0,s=s+Math.imul(P,rt)|0,r=r+Math.imul(A,st)|0,n=(n=n+Math.imul(A,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,r=r+Math.imul(E,ht)|0,n=(n=n+Math.imul(E,ct)|0)+Math.imul(S,ht)|0,s=s+Math.imul(S,ct)|0,r=r+Math.imul(w,ut)|0,n=(n=n+Math.imul(w,dt)|0)+Math.imul(_,ut)|0,s=s+Math.imul(_,dt)|0;var Ct=(c+(r=r+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,gt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((s=s+Math.imul(v,gt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,$),n=(n=Math.imul(U,J))+Math.imul(F,$)|0,s=Math.imul(F,J),r=r+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(R,st)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(P,st)|0,s=s+Math.imul(P,ot)|0,r=r+Math.imul(A,ht)|0,n=(n=n+Math.imul(A,ct)|0)+Math.imul(C,ht)|0,s=s+Math.imul(C,ct)|0,r=r+Math.imul(E,ut)|0,n=(n=n+Math.imul(E,dt)|0)+Math.imul(S,ut)|0,s=s+Math.imul(S,dt)|0;var kt=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(n=(n=n+Math.imul(w,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((s=s+Math.imul(_,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),n=(n=Math.imul(U,tt))+Math.imul(F,Q)|0,s=Math.imul(F,tt),r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(L,it)|0,s=s+Math.imul(L,rt)|0,r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(R,ht)|0,n=(n=n+Math.imul(R,ct)|0)+Math.imul(P,ht)|0,s=s+Math.imul(P,ct)|0,r=r+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,dt)|0)+Math.imul(C,ut)|0,s=s+Math.imul(C,dt)|0;var Rt=(c+(r=r+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,gt)|0)+Math.imul(S,pt)|0))<<13)|0;c=((s=s+Math.imul(S,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(U,it),n=(n=Math.imul(U,rt))+Math.imul(F,it)|0,s=Math.imul(F,rt),r=r+Math.imul(B,st)|0,n=(n=n+Math.imul(B,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,r=r+Math.imul(O,ht)|0,n=(n=n+Math.imul(O,ct)|0)+Math.imul(M,ht)|0,s=s+Math.imul(M,ct)|0,r=r+Math.imul(R,ut)|0,n=(n=n+Math.imul(R,dt)|0)+Math.imul(P,ut)|0,s=s+Math.imul(P,dt)|0;var Pt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(n=(n=n+Math.imul(A,gt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((s=s+Math.imul(C,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(U,st),n=(n=Math.imul(U,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),r=r+Math.imul(B,ht)|0,n=(n=n+Math.imul(B,ct)|0)+Math.imul(L,ht)|0,s=s+Math.imul(L,ct)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,dt)|0)+Math.imul(M,ut)|0,s=s+Math.imul(M,dt)|0;var It=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,gt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((s=s+Math.imul(P,gt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,ht),n=(n=Math.imul(U,ct))+Math.imul(F,ht)|0,s=Math.imul(F,ct),r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,dt)|0)+Math.imul(L,ut)|0,s=s+Math.imul(L,dt)|0;var Ot=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((s=s+Math.imul(M,gt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(U,ut),n=(n=Math.imul(U,dt))+Math.imul(F,ut)|0,s=Math.imul(F,dt);var Mt=(c+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((s=s+Math.imul(L,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863;var Dt=(c+(r=Math.imul(U,pt))|0)+((8191&(n=(n=Math.imul(U,gt))+Math.imul(F,pt)|0))<<13)|0;return c=((s=Math.imul(F,gt))+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,h[0]=yt,h[1]=mt,h[2]=vt,h[3]=bt,h[4]=wt,h[5]=_t,h[6]=xt,h[7]=Et,h[8]=St,h[9]=Tt,h[10]=At,h[11]=Ct,h[12]=kt,h[13]=Rt,h[14]=Pt,h[15]=It,h[16]=Ot,h[17]=Mt,h[18]=Dt,0!==c&&(h[19]=c,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),c=Math.max(0,s-t.length+1);c<=h;c++){var l=s-c,u=(0|t.words[l])*(0|e.words[c]),d=67108863&u;a=67108863&(d=d+a|0),n+=(o=(o=o+(u/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i._strip()}function v(t,e,i){return m(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=g),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):i<63?g(this,t,e):i<1024?m(this,t,e):v(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},b.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var u=h,d=c,f=0;f<o;f++){var p=i[l+f],g=r[l+f],y=i[l+f+o],m=r[l+f+o],v=u*y-d*m;m=u*m+d*y,y=v,i[l+f]=p+y,r[l+f]=g+m,i[l+f+o]=p-y,r[l+f+o]=g-m,f!==a&&(v=h*u-c*d,d=h*d+c*u,u=v)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},b.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(0==(-8192&s))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,c,r),this.transform(o,s,a,h,r,n),this.transform(c,s,l,u,r,n);for(var f=0;f<r;f++){var p=a[f]*l[f]-h[f]*u[f];h[f]=a[f]*u[f]+h[f]*l[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),v(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var s=(0|this.words[n])*t,o=(67108863&s)+(67108863&i);i>>=26,i+=s/67108864|0,i+=o>>>26,this.words[n]=67108863&o}return 0!==i&&(this.words[n]=i,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=n);c--){var u=0|this.words[c];this.words[c]=l<<26-s|u>>>s,l=u&a}return h&&0!==l&&(h.words[h.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var u=h-1;u>=0;u--){var d=67108864*(0|r.words[n.length+u])+(0|r.words[n.length+u-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,u);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,u),r.isZero()||(r.negative^=1);a&&(a.words[u]=d)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,n=0,s=this.length-1;s>=0;s--)n=(i*n+(0|this.words[s]))%t;return e?-n:n},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*i;this.words[n]=s/t|0,i=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var l=i.clone(),u=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(l),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(l),h.isub(u)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(c)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var u=0,d=1;0==(i.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(i.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new A(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function C(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},n(x,_),x.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(E,_),n(S,_),n(T,_),T.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return w[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},A.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,c).cmp(h);)l.redIAdd(h);for(var u=this.pow(l,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var g=f,y=0;0!==g.cmp(a);y++)g=g.redSqr();r(y<p);var m=this.pow(u,new s(1).iushln(p-y-1));d=d.redMul(m),u=m.redSqr(),f=f.redMul(u),p=y}return d},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=h-1;l>=0;l--){var u=c>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==u||0!==o?(o<<=1,o|=u,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new C(t)},n(C,A),C.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},C.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},C.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},C.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},C.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},67295:(t,e,i)=>{var r=i(48764).Buffer;t.exports=function(t,e){for(var i=Math.min(t.length,e.length),n=new r(i),s=0;s<i;++s)n[s]=t[s]^e[s];return n}},48764:(t,e,i)=>{"use strict";const r=i(79742),n=i(80645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return c(t,e,i)}function c(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|g(t,e);let r=a(i);const n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return f(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return f(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return h.from(r,e,i);const n=function(t){if(h.isBuffer(t)){const e=0|p(t.length),i=a(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||$(t.length)?a(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return l(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),i=a(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function f(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,h.prototype),r}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function g(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return W(t).length;default:if(n)return r?-1:K(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return k(this,e,i);case"latin1":case"binary":return R(this,e,i);case"base64":return T(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function v(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),$(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:b(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):b(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function b(t,e,i,r,n){let s,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let r=-1;for(s=i;s<a;s++)if(c(t,s)===c(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===h)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(i+h>a&&(i=a-h),s=i;s>=0;s--){let i=!0;for(let r=0;r<h;r++)if(c(t,s+r)!==c(e,r)){i=!1;break}if(i)return s}return-1}function w(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if($(r))return o;t[i+o]=r}return o}function _(t,e,i,r){return X(K(e,t.length-i),t,i,r)}function x(t,e,i,r){return X(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function E(t,e,i,r){return X(W(e),t,i,r)}function S(t,e,i,r){return X(function(t,e){let i,r,n;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function T(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,r,a,h;switch(o){case 1:e<128&&(s=e);break;case 2:i=t[n+1],128==(192&i)&&(h=(31&e)<<6|63&i,h>127&&(s=h));break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(h=(15&e)<<12|(63&i)<<6|63&r,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:i=t[n+1],r=t[n+2],a=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&a)&&(h=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=o}return function(t){const e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=C));return i}(r)}e.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,i){return c(t,e,i)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,i){return function(t,e,i){return l(t),t<=0?a(t):void 0!==e?"string"==typeof i?a(t).fill(e,i):a(t).fill(e):a(t)}(t,e,i)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(q(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=h.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(q(e,Uint8Array))n+e.length>r.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},h.byteLength=g,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,i,r,n){if(q(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let s=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(e>>>=0);const a=Math.min(s,o),c=this.slice(r,n),l=t.slice(e,i);for(let t=0;t<a;++t)if(c[t]!==l[t]){s=c[t],o=l[t];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},h.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return w(this,t,e,i);case"utf8":case"utf-8":return _(this,t,e,i);case"ascii":case"latin1":case"binary":return x(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function k(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function R(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function P(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=J[t[r]];return n}function I(t,e,i){const r=t.slice(e,i);let n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function O(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,i,r,n,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function D(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function B(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i+7]=s,s>>=8,t[i+6]=s,s>>=8,t[i+5]=s,s>>=8,t[i+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function L(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function N(t,e,i,r,s){return e=+e,i>>>=0,s||L(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function U(t,e,i,r,s){return e=+e,i>>>=0,s||L(t,0,i,8),n.write(t,e,i,r,52,8),i+8}h.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))})),h.prototype.readBigUInt64BE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)})),h.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||O(t,e,this.length);let r=e,n=1,s=this[t+--r];for(;r>0&&(n*=256);)s+=this[t+--r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=Z((function(t){G(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),n.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),n.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),n.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),n.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||M(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||M(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=Z((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=Z((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);M(this,t,e,i,r-1,-r)}let n=0,s=1,o=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/s>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);M(this,t,e,i,r-1,-r)}let n=i-1,s=1,o=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/s>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=Z((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=Z((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,i){return N(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return N(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},h.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const s=h.isBuffer(t)?t:h.from(t,r),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=s[n%o]}return this};const F={};function z(t,e,i){F[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function V(t,e,i,r,n,s){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new F.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){G(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||H(e,t.length-(i+1))}(r,n,s)}function G(t,e){if("number"!=typeof t)throw new F.ERR_INVALID_ARG_TYPE(e,"number",t)}function H(t,e,i){if(Math.floor(t)!==t)throw G(t,i),new F.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=j(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=j(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function K(t,e){let i;e=e||1/0;const r=t.length;let n=null;const s=[];for(let o=0;o<r;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},16957:(t,e,i)=>{"use strict";var r=i(90886);e.fromCallback=function(t,e){if(void 0===t){var i=new Promise((function(e,i){t=function(t,r){t?i(t):e(r)}}));t[void 0!==e?e:"promise"]=i}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},e.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){r((()=>e(null,t)))})).catch((function(t){r((()=>e(t)))}))}},90886:t=>{t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t)},71027:(t,e,i)=>{var r=i(89509).Buffer,n=i(42830).Transform,s=i(32553).s;function o(t){n.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(35717)(o,n),o.prototype.update=function(t,e,i){"string"==typeof t&&(t=r.from(t,e));var n=this._update(t);return this.hashMode?this:(i&&(n=this._toString(n,i)),n)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(t,e,i){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{i(r)}},o.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},o.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},o.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new s(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return i&&(r+=this._decoder.end()),r},t.exports=o},98514:t=>{"use strict";t.exports=function(t,{className:e,symbolName:i}){const r=Symbol.for(i),n={[e]:class extends t{constructor(...t){super(...t),Object.defineProperty(this,r,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=t=>!(!t||!t[r]),n},t.exports.proto=function(t,{className:e,symbolName:i,withoutNew:r}){const n=Symbol.for(i),s={[e]:function(...e){if(r&&!(this instanceof s))return new s(...e);const i=t.call(this,...e)||this;return i&&!i[n]&&Object.defineProperty(i,n,{value:!0}),i}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get:()=>e}),s[`is${e}`]=t=>!(!t||!t[n]),s}},75281:(t,e,i)=>{"use strict";const r=i(5696),n=/\s+at.*(?:\(|\s)(.*)\)?/,s=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,o=void 0===r.homedir?"":r.homedir();t.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split("\n").filter((t=>{const e=t.match(n);if(null===e||!e[1])return!0;const i=e[1];return!i.includes(".app/Contents/Resources/electron.asar")&&!i.includes(".app/Contents/Resources/default_app.asar")&&!s.test(i)})).filter((t=>""!==t.trim())).map((t=>e.pretty?t.replace(n,((t,e)=>t.replace(e,e.replace(o,"~")))):t)).join("\n"))},76393:(t,e,i)=>{var r=i(48764).Buffer,n=i(86266),s=i(13550);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function h(t,e,i){Array.isArray(t)||(t=t.toArray());var n=new r(t);if(i&&n.length<i){var s=new r(i-n.length);s.fill(0),n=r.concat([s,n])}return e?n.toString(e):n}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,i){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),h(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),h(i,t)},a.prototype.getPrivateKey=function(t){return h(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e));var i=new s(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}},23482:(t,e,i)=>{"use strict";var r=i(35717),n=i(62318),s=i(79785),o=i(89072),a=i(71027);function h(t){a.call(this,"digest"),this._hash=t}r(h,a),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new n:"rmd160"===t||"ripemd160"===t?new s:new h(o(t))}},78028:(t,e,i)=>{var r=i(62318);t.exports=function(t){return(new r).update(t).digest()}},58355:(t,e,i)=>{"use strict";var r=i(35717),n=i(51031),s=i(71027),o=i(89509).Buffer,a=i(78028),h=i(79785),c=i(89072),l=o.alloc(128);function u(t,e){s.call(this,"digest"),"string"==typeof e&&(e=o.from(e));var i="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>i?e=("rmd160"===t?new h:c(t)).update(e).digest():e.length<i&&(e=o.concat([e,l],i));for(var r=this._ipad=o.allocUnsafe(i),n=this._opad=o.allocUnsafe(i),a=0;a<i;a++)r[a]=54^e[a],n[a]=92^e[a];this._hash="rmd160"===t?new h:c(t),this._hash.update(r)}r(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new h:c(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new u("rmd160",e):"md5"===t?new n(a,e):new u(t,e)}},51031:(t,e,i)=>{"use strict";var r=i(35717),n=i(89509).Buffer,s=i(71027),o=n.alloc(128),a=64;function h(t,e){s.call(this,"digest"),"string"==typeof e&&(e=n.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=n.concat([e,o],a));for(var i=this._ipad=n.allocUnsafe(a),r=this._opad=n.allocUnsafe(a),h=0;h<a;h++)i[h]=54^e[h],r[h]=92^e[h];this._hash=[i]}r(h,s),h.prototype._update=function(t){this._hash.push(t)},h.prototype._final=function(){var t=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,t]))},t.exports=h},55835:(t,e,i)=>{"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=i(61798),e.createHash=e.Hash=i(23482),e.createHmac=e.Hmac=i(58355);var r=i(56042),n=Object.keys(r),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);e.getHashes=function(){return s};var o=i(25632);e.pbkdf2=o.pbkdf2,e.pbkdf2Sync=o.pbkdf2Sync;var a=i(53614);e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var h=i(62607);e.DiffieHellmanGroup=h.DiffieHellmanGroup,e.createDiffieHellmanGroup=h.createDiffieHellmanGroup,e.getDiffieHellman=h.getDiffieHellman,e.createDiffieHellman=h.createDiffieHellman,e.DiffieHellman=h.DiffieHellman;var c=i(64743);e.createSign=c.createSign,e.Sign=c.Sign,e.createVerify=c.createVerify,e.Verify=c.Verify,e.createECDH=i(76393);var l=i(7900);e.publicEncrypt=l.publicEncrypt,e.privateEncrypt=l.privateEncrypt,e.publicDecrypt=l.publicDecrypt,e.privateDecrypt=l.privateDecrypt;var u=i(77963);e.randomFill=u.randomFill,e.randomFillSync=u.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},18254:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(57135);function n(t){const e={};return t.encrypted_key&&(e.encrypted_key=r.fromBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function s(t){const e={};return t.encrypted_key&&(e.encrypted_key=r.toBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}e.default={fromSplit:function(t){const[e,i,r,n,s]=t,o={ciphertext:n,iv:r,protected:e,tag:s};return i&&(o.recipients=[{encrypted_key:i}]),o},decode:function(t){const e={ciphertext:r.toBase64url(t.ciphertext),protected:r.toBase64url(t.protected),iv:r.toBase64url(t.iv),tag:r.toBase64url(t.tag)};return t.aad&&(e.aad=r.toBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(s)),t.unprotected&&(e.unprotected=t.unprotected),e},encode:function(t){const e={ciphertext:r.fromBase64url(t.ciphertext),protected:r.fromBase64url(t.protected),iv:r.fromBase64url(t.iv),tag:r.fromBase64url(t.tag)};return t.aad&&(e.aad=r.fromBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(n)),t.unprotected&&(e.unprotected=t.unprotected),e}}},28630:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=e.toGeneral=e.code=e.name=void 0;const a=o(i(41446)),h=o(i(18254)),c=s(i(37548));function l(t){return"payload"in t&&"string"==typeof t.payload&&"signatures"in t&&Array.isArray(t.signatures)}function u(t){return"ciphertext"in t&&"string"==typeof t.ciphertext&&"iv"in t&&"string"==typeof t.iv&&"protected"in t&&"string"==typeof t.protected&&"tag"in t&&"string"==typeof t.tag}function d(t){if("string"==typeof t){const e=t.split(".");if(3===e.length)return a.default.fromSplit(e);if(5===e.length)return h.default.fromSplit(e);throw new Error("Not a valid JOSE string")}if(l(t)||u(t))return t;throw new Error("Not a valid unencoded JOSE object")}e.name="dag-jose",e.code=133,e.toGeneral=d,e.encode=function(t){let e;if("string"==typeof t&&(t=d(t)),l(t))e=a.default.encode(t);else{if(!u(t))throw new Error("Not a valid JOSE object");e=h.default.encode(t)}return new Uint8Array(c.encode(e))},e.decode=function(t){let e;try{e=c.decode(t)}catch(t){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(i=e)&&i.payload instanceof Uint8Array&&"signatures"in i&&Array.isArray(i.signatures))return a.default.decode(e);if(function(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}(e))return h.default.decode(e);throw new Error("Not a valid DAG-JOSE object");var i}},41446:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(57135),n=i(81362);function s(t){const e={signature:r.fromBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=r.fromBase64url(t.protected)),e}function o(t){const e={signature:r.toBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=r.toBase64url(t.protected)),e}e.default={fromSplit:function(t){const[e,i,s]=t;return{payload:i,signatures:[{protected:e,signature:s}],link:n.CID.decode(r.fromBase64url(i))}},encode:function(t){const e=r.fromBase64url(t.payload);try{n.CID.decode(e)}catch(t){throw new Error("Not a valid DagJWS")}return{payload:e,signatures:t.signatures.map(s)}},decode:function(t){const e={payload:r.toBase64url(t.payload),signatures:t.signatures.map(o)};return e.link=n.CID.decode(new Uint8Array(t.payload)),e}}},57135:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromBase64url=e.toBase64url=void 0;const r=i(9885);e.toBase64url=function(t){return r.base64url.encode(t).slice(1)},e.fromBase64url=function(t){return r.base64url.decode(`u${t}`)}},59435:t=>{var e=1e3,i=60*e,r=60*i,n=24*r;function s(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}t.exports=function(t,o){o=o||{};var a,h,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&isFinite(t))return o.long?(a=t,(h=Math.abs(a))>=n?s(a,h,n,"day"):h>=r?s(a,h,r,"hour"):h>=i?s(a,h,i,"minute"):h>=e?s(a,h,e,"second"):a+" ms"):function(t){var s=Math.abs(t);return s>=n?Math.round(t/n)+"d":s>=r?Math.round(t/r)+"h":s>=i?Math.round(t/i)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},11227:(t,e,i)=>{var r=i(34155);e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(n=r))})),e.splice(n,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(82447)(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},82447:(t,e,i)=>{t.exports=function(t){function e(t){let i,n,s,o=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),s=n-(i||n);r.diff=s,r.prev=i,r.curr=n,i=n,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((i,n)=>{if("%%"===i)return"%";o++;const s=e.formatters[n];if("function"==typeof s){const e=t[o];i=s.call(r,e),t.splice(o,1),o--}return i})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==e.namespaces&&(n=e.namespaces,s=e.enabled(t)),s),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,i){const r=e(this.namespace+(void 0===i?":":i)+t);return r.log=this.log,r}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(i=0;i<n;i++)r[i]&&("-"===(t=r[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,r;for(i=0,r=e.skips.length;i<r;i++)if(e.skips[i].test(t))return!1;for(i=0,r=e.names.length;i<r;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(59435),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((i=>{e[i]=t[i]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},7171:(t,e,i)=>{"use strict";const{AbstractChainedBatch:r}=i(24012),n=Symbol("operations");t.exports=class extends r{constructor(t){super(t),this[n]=[]}_put(t,e,i){this[n].push({...i,type:"put",key:t,value:e})}_del(t,e){this[n].push({...e,type:"del",key:t})}_clear(){this[n]=[]}_write(t,e){this.db.batch(this[n],t,e)}}},32790:(t,e,i)=>{"use strict";const{AbstractIterator:r}=i(24012),n=i(35717),s=i(72502).R,o=Symbol("options"),a=Symbol("iterator"),h=Symbol("operations"),c=Symbol("promise");function l(t,e){r.call(this,t),this[o]=e,this[a]=null,this[h]=[]}n(l,r),l.prototype.setDb=function(t){this[a]=t.iterator(this[o]);for(const t of this[h].splice(0,this[h].length))this[a][t.method](...t.args)},l.prototype.next=function(...t){if("open"===this.db.status)return this[a].next(...t);const e=s(t,c,(function(t,e){return void 0===t&&void 0===e?void 0:[t,e]}));return"opening"===this.db.status?this[h].push({method:"next",args:t}):this._nextTick(e,new Error("Database is not open")),e[c]||this},l.prototype.seek=function(...t){if("open"===this.db.status)this[a].seek(...t);else{if("opening"!==this.db.status)throw new Error("Database is not open");this[h].push({method:"seek",args:t})}},l.prototype.end=function(...t){if("open"===this.db.status)return this[a].end(...t);const e=s(t,c);return"opening"===this.db.status?this[h].push({method:"end",args:t}):this._nextTick(e,new Error("Database is not open")),e[c]||this};for(const t of["next","seek","end"])l.prototype["_"+t]=function(){throw new Error("Did not expect private method to be called: "+t)};t.exports=l},66944:(t,e,i)=>{"use strict";const{AbstractLevelDOWN:r}=i(24012),n=i(35717),s=i(32790),o=i(7171),a=i(72502).R,h=["put","get","getMany","del","batch","clear"],c=["approximateSize","compactRange"],l=Symbol("innerDb"),u=Symbol("operations"),d=Symbol("promise");function f(t){r.call(this,t.supports||{});for(const e of c)"function"!=typeof t[e]||this.supports.additionalMethods[e]||(this.supports.additionalMethods[e]=!0);this[l]=t,this[u]=[],function(t){const e=Object.keys(t.supports.additionalMethods);for(const i of h.concat(e))t[i]=function(...t){if("batch"===i&&0===t.length)return new o(this);if("open"===this.status)return this[l][i](...t);const e=a(t,d);return"opening"===this.status?this[u].push({method:i,args:t}):this._nextTick(e,new Error("Database is not open")),e[d]};t.iterator=function(t){if("open"===this.status)return this[l].iterator(t);if("opening"===this.status){const e=new s(this,t);return this[u].push({iterator:e}),e}throw new Error("Database is not open")};for(const e of h.concat(["iterator"]))t["_"+e]=function(){throw new Error("Did not expect private method to be called: "+e)}}(this)}n(f,r),f.prototype.type="deferred-leveldown",Object.defineProperty(f.prototype,"_db",{enumerable:!0,get(){return this[l]}}),f.prototype._open=function(t,e){const i=t=>{if(t||"open"!==this[l].status)return e(t||new Error("Database is not open"));const i=this[u];this[u]=[];for(const t of i)t.iterator?t.iterator.setDb(this[l]):this[l][t.method](...t.args);if(this[u].length>0)throw new Error("Did not expect further operations");e()};"new"===this[l].status||"closed"===this[l].status?this[l].open(t,i):this._nextTick(i)},f.prototype._close=function(t){this[l].close(t)},f.prototype._isOperational=function(){return"opening"===this.status},t.exports=f,t.exports.DeferredIterator=s},72502:(t,e)=>{"use strict";e.R=function(t,e,i){let r=t[t.length-1];if("function"!=typeof r){const n=new Promise(((e,n)=>{t.push(r=function(t,...r){t?n(t):e(i?i(...r):r[0])})}));r[e]=n}return r}},45001:t=>{"use strict";function e(t,e){e=e||{},this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}e.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var i=this.size();if(!(e>=i||e<-i))return e<0&&(e+=i),e=this._head+e&this._capacityMask,this._list[e]}},e.prototype.get=function(t){return this.peekAt(t)},e.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},e.prototype.peekFront=function(){return this.peek()},e.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()}}),e.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},e.prototype.unshift=function(t){if(void 0===t)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},e.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},e.prototype.push=function(t){if(void 0===t)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},e.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),i}},e.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var i=this.size(),r=this._list.length;if(!(e>=i||e<-i)){e<0&&(e+=i),e=this._head+e&this._capacityMask;var n,s=this._list[e];if(t<i/2){for(n=t;n>0;n--)this._list[e]=this._list[e=e-1+r&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(n=i-1-t;n>0;n--)this._list[e]=this._list[e=e+1+r&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+r&this._capacityMask}return s}}},e.prototype.remove=function(t,e){var i,r=t,n=e;if(r===(0|r)&&this._head!==this._tail){var s=this.size(),o=this._list.length;if(!(r>=s||r<-s||e<1)){if(r<0&&(r+=s),1===e||!e)return(i=new Array(1))[0]=this.removeOne(r),i;if(0===r&&r+e>=s)return i=this.toArray(),this.clear(),i;var a;for(r+e>s&&(e=s-r),i=new Array(e),a=0;a<e;a++)i[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,t+e===s){for(this._tail=this._tail-e+o&this._capacityMask,a=e;a>0;a--)this._list[r=r+1+o&this._capacityMask]=void 0;return i}if(0===t){for(this._head=this._head+e+o&this._capacityMask,a=e-1;a>0;a--)this._list[r=r+1+o&this._capacityMask]=void 0;return i}if(r<s/2){for(this._head=this._head+t+e+o&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[r=r-1+o&this._capacityMask]);for(r=this._head-1+o&this._capacityMask;n>0;)this._list[r=r-1+o&this._capacityMask]=void 0,n--;t<0&&(this._tail=r)}else{for(this._tail=r,r=r+e+o&this._capacityMask,a=s-(e+t);a>0;a--)this.push(this._list[r++]);for(r=this._tail;n>0;)this._list[r=r+1+o&this._capacityMask]=void 0,n--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),i}}},e.prototype.splice=function(t,e){var i=t;if(i===(0|i)){var r=this.size();if(i<0&&(i+=r),!(i>r)){if(arguments.length>2){var n,s,o,a=arguments.length,h=this._list.length,c=2;if(!r||i<r/2){for(s=new Array(i),n=0;n<i;n++)s[n]=this._list[this._head+n&this._capacityMask];for(0===e?(o=[],i>0&&(this._head=this._head+i+h&this._capacityMask)):(o=this.remove(i,e),this._head=this._head+i+h&this._capacityMask);a>c;)this.unshift(arguments[--a]);for(n=i;n>0;n--)this.unshift(s[n-1])}else{var l=(s=new Array(r-(i+e))).length;for(n=0;n<l;n++)s[n]=this._list[this._head+i+e+n&this._capacityMask];for(0===e?(o=[],i!=r&&(this._tail=this._head+i+h&this._capacityMask)):(o=this.remove(i,e),this._tail=this._tail-l+h&this._capacityMask);c<a;)this.push(arguments[c++]);for(n=0;n<l;n++)this.push(s[n])}return o}return this.remove(i,e)}}},e.prototype.clear=function(){this._head=0,this._tail=0},e.prototype.isEmpty=function(){return this._head===this._tail},e.prototype.toArray=function(){return this._copyArray(!1)},e.prototype._fromArray=function(t){for(var e=0;e<t.length;e++)this.push(t[e])},e.prototype._copyArray=function(t){var e,i=[],r=this._list,n=r.length;if(t||this._head>this._tail){for(e=this._head;e<n;e++)i.push(r[e]);for(e=0;e<this._tail;e++)i.push(r[e])}else for(e=this._head;e<this._tail;e++)i.push(r[e]);return i},e.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},e.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.exports=e},15251:(t,e,i)=>{"use strict";e.utils=i(11278),e.Cipher=i(55756),e.DES=i(70778),e.CBC=i(39051),e.EDE=i(50651)},39051:(t,e,i)=>{"use strict";var r=i(79746),n=i(35717),s={};function o(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}n(e,t);for(var i=Object.keys(s),r=0;r<i.length;r++){var o=i[r];e.prototype[o]=s[o]}return e.create=function(t){return new e(t)},e},s._cbcInit=function(){var t=new o(this.options.iv);this._cbcState=t},s._update=function(t,e,i,r){var n=this._cbcState,s=this.constructor.super_.prototype,o=n.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=t[e+a];for(s._update.call(this,o,0,i,r),a=0;a<this.blockSize;a++)o[a]=i[r+a]}else{for(s._update.call(this,t,e,i,r),a=0;a<this.blockSize;a++)i[r+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=t[e+a]}}},55756:(t,e,i)=>{"use strict";var r=i(79746);function n(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=n,n.prototype._init=function(){},n.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},n.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},n.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(t){var e=0,i=0,r=(this.bufferOff+t.length)/this.blockSize|0,n=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(n,i)));for(var s=t.length-(t.length-e)%this.blockSize;e<s;e+=this.blockSize)this._update(t,e,n,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return n},n.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),i+=this._flushBuffer(n,i);return e+=this._buffer(t,e),n},n.prototype.final=function(t){var e,i;return t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(i):i},n.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},n.prototype._unpad=function(t){return t},n.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},70778:(t,e,i)=>{"use strict";var r=i(79746),n=i(35717),s=i(11278),o=i(55756);function a(){this.tmp=new Array(2),this.keys=null}function h(t){o.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}n(h,o),t.exports=h,h.create=function(t){return new h(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];h.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var i=s.readUInt32BE(e,0),n=s.readUInt32BE(e,4);s.pc1(i,n,t.tmp,0),i=t.tmp[0],n=t.tmp[1];for(var o=0;o<t.keys.length;o+=2){var a=c[o>>>1];i=s.r28shl(i,a),n=s.r28shl(n,a),s.pc2(i,n,t.keys,o)}},h.prototype._update=function(t,e,i,r){var n=this._desState,o=s.readUInt32BE(t,e),a=s.readUInt32BE(t,e+4);s.ip(o,a,n.tmp,0),o=n.tmp[0],a=n.tmp[1],"encrypt"===this.type?this._encrypt(n,o,a,n.tmp,0):this._decrypt(n,o,a,n.tmp,0),o=n.tmp[0],a=n.tmp[1],s.writeUInt32BE(i,o,r),s.writeUInt32BE(i,a,r+4)},h.prototype._pad=function(t,e){for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},h.prototype._unpad=function(t){for(var e=t[t.length-1],i=t.length-e;i<t.length;i++)r.equal(t[i],e);return t.slice(0,t.length-e)},h.prototype._encrypt=function(t,e,i,r,n){for(var o=e,a=i,h=0;h<t.keys.length;h+=2){var c=t.keys[h],l=t.keys[h+1];s.expand(a,t.tmp,0),c^=t.tmp[0],l^=t.tmp[1];var u=s.substitute(c,l),d=a;a=(o^s.permute(u))>>>0,o=d}s.rip(a,o,r,n)},h.prototype._decrypt=function(t,e,i,r,n){for(var o=i,a=e,h=t.keys.length-2;h>=0;h-=2){var c=t.keys[h],l=t.keys[h+1];s.expand(o,t.tmp,0),c^=t.tmp[0],l^=t.tmp[1];var u=s.substitute(c,l),d=o;o=(a^s.permute(u))>>>0,a=d}s.rip(o,a,r,n)}},50651:(t,e,i)=>{"use strict";var r=i(79746),n=i(35717),s=i(55756),o=i(70778);function a(t,e){r.equal(e.length,24,"Invalid key length");var i=e.slice(0,8),n=e.slice(8,16),s=e.slice(16,24);this.ciphers="encrypt"===t?[o.create({type:"encrypt",key:i}),o.create({type:"decrypt",key:n}),o.create({type:"encrypt",key:s})]:[o.create({type:"decrypt",key:s}),o.create({type:"encrypt",key:n}),o.create({type:"decrypt",key:i})]}function h(t){s.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}n(h,s),t.exports=h,h.create=function(t){return new h(t)},h.prototype._update=function(t,e,i,r){var n=this._edeState;n.ciphers[0]._update(t,e,i,r),n.ciphers[1]._update(i,r,i,r),n.ciphers[2]._update(i,r,i,r)},h.prototype._pad=o.prototype._pad,h.prototype._unpad=o.prototype._unpad},11278:(t,e)=>{"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},e.ip=function(t,e,i,r){for(var n=0,s=0,o=6;o>=0;o-=2){for(var a=0;a<=24;a+=8)n<<=1,n|=e>>>a+o&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>>a+o&1}for(o=6;o>=0;o-=2){for(a=1;a<=25;a+=8)s<<=1,s|=e>>>a+o&1;for(a=1;a<=25;a+=8)s<<=1,s|=t>>>a+o&1}i[r+0]=n>>>0,i[r+1]=s>>>0},e.rip=function(t,e,i,r){for(var n=0,s=0,o=0;o<4;o++)for(var a=24;a>=0;a-=8)n<<=1,n|=e>>>a+o&1,n<<=1,n|=t>>>a+o&1;for(o=4;o<8;o++)for(a=24;a>=0;a-=8)s<<=1,s|=e>>>a+o&1,s<<=1,s|=t>>>a+o&1;i[r+0]=n>>>0,i[r+1]=s>>>0},e.pc1=function(t,e,i,r){for(var n=0,s=0,o=7;o>=5;o--){for(var a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+o&1}for(a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1;for(o=1;o<=3;o++){for(a=0;a<=24;a+=8)s<<=1,s|=e>>a+o&1;for(a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1}for(a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1;i[r+0]=n>>>0,i[r+1]=s>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,n){for(var s=0,o=0,a=i.length>>>1,h=0;h<a;h++)s<<=1,s|=t>>>i[h]&1;for(h=a;h<i.length;h++)o<<=1,o|=e>>>i[h]&1;r[n+0]=s>>>0,r[n+1]=o>>>0},e.expand=function(t,e,i){var r=0,n=0;r=(1&t)<<5|t>>>27;for(var s=23;s>=15;s-=4)r<<=6,r|=t>>>s&63;for(s=11;s>=3;s-=4)n|=t>>>s&63,n<<=6;n|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=n>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var i=0,n=0;n<4;n++)i<<=4,i|=r[64*n+(t>>>18-6*n&63)];for(n=0;n<4;n++)i<<=4,i|=r[256+64*n+(e>>>18-6*n&63)];return i>>>0};var n=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,i=0;i<n.length;i++)e<<=1,e|=t>>>n[i]&1;return e>>>0},e.padSplit=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var n=[],s=0;s<e;s+=i)n.push(r.slice(s,s+i));return n.join(" ")}},62607:(t,e,i)=>{var r=i(48764).Buffer,n=i(43590),s=i(29799),o=i(57426),a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(t){var e=new r(s[t].prime,"hex"),i=new r(s[t].gen,"hex");return new o(e,i)},e.createDiffieHellman=e.DiffieHellman=function t(e,i,s,h){return r.isBuffer(i)||void 0===a[i]?t(e,"binary",i,s):(i=i||"binary",h=h||"binary",s=s||new r([2]),r.isBuffer(s)||(s=new r(s,h)),"number"==typeof e?new o(n(e,s),s,!0):(r.isBuffer(e)||(e=new r(e,i)),new o(e,s,!0)))}},57426:(t,e,i)=>{var r=i(48764).Buffer,n=i(13550),s=new(i(63047)),o=new n(24),a=new n(11),h=new n(10),c=new n(3),l=new n(7),u=i(43590),d=i(61798);function f(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._pub=new n(t),this}function p(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._priv=new n(t),this}t.exports=y;var g={};function y(t,e,i){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function m(t,e){var i=new r(t.toArray());return e?i.toString(e):i}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var i=e.toString("hex"),r=[i,t.toString(16)].join("_");if(r in g)return g[r];var n,d=0;if(t.isEven()||!u.simpleSieve||!u.fermatTest(t)||!s.test(t))return d+=1,d+="02"===i||"05"===i?8:4,g[r]=d,d;switch(s.test(t.shrn(1))||(d+=2),i){case"02":t.mod(o).cmp(a)&&(d+=8);break;case"05":(n=t.mod(h)).cmp(c)&&n.cmp(l)&&(d+=8);break;default:d+=4}return g[r]=d,d}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new n(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(t){var e=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new r(e.toArray()),s=this.getPrime();if(i.length<s.length){var o=new r(s.length-i.length);o.fill(0),i=r.concat([o,i])}return i},y.prototype.getPublicKey=function(t){return m(this._pub,t)},y.prototype.getPrivateKey=function(t){return m(this._priv,t)},y.prototype.getPrime=function(t){return m(this.__prime,t)},y.prototype.getGenerator=function(t){return m(this._gen,t)},y.prototype.setGenerator=function(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this.__gen=t,this._gen=new n(t),this}},43590:(t,e,i)=>{var r=i(61798);t.exports=v,v.simpleSieve=y,v.fermatTest=m;var n=i(13550),s=new n(24),o=new(i(63047)),a=new n(1),h=new n(2),c=new n(5),l=(new n(16),new n(8),new n(10)),u=new n(3),d=(new n(7),new n(11)),f=new n(4),p=(new n(12),null);function g(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var r=Math.ceil(Math.sqrt(i)),n=0;n<e&&t[n]<=r&&i%t[n]!=0;n++);e!==n&&t[n]<=r||(t[e++]=i)}return p=t,t}function y(t){for(var e=g(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function m(t){var e=n.mont(t);return 0===h.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function v(t,e){if(t<16)return new n(2===e||5===e?[140,123]:[140,39]);var i,p;for(e=new n(e);;){for(i=new n(r(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(a),i.testn(1)||i.iadd(h),e.cmp(h)){if(!e.cmp(c))for(;i.mod(l).cmp(u);)i.iadd(f)}else for(;i.mod(s).cmp(d);)i.iadd(f);if(y(p=i.shrn(1))&&y(i)&&m(p)&&m(i)&&o.test(p)&&o.test(i))return i}}},26905:function(t){t.exports=function(t,e,i,r,n){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:n;return t===n?i:t}},926:(t,e,i)=>{"use strict";const r=i(11227),n=r("dns-over-http-resolver");n.error=r("dns-over-http-resolver:error");const s=i(73692),o=i(46177);class a{constructor({maxCache:t=100}={}){this._cache=new s({max:t}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){const t=[].concat(this._servers);for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*e),r=t[e];t[e]=t[i],t[i]=r}return t}setServers(t){this._servers=t}resolve(t,e="A"){switch(e){case"A":return this.resolve4(t);case"AAAA":return this.resolve6(t);case"TXT":return this.resolveTxt(t);default:throw new Error(`${e} is not supported`)}}async resolve4(t){const e=this._cache.get(o.getCacheKey(t,"A"));if(e)return e;for(const e of this._getShuffledServers())try{const i=await o.fetch(o.buildResource({serverResolver:e,hostname:t,recordType:"A"})),r=await i.json(),n=r.Answer.map((t=>t.data)),s=Math.min(r.Answer.map((t=>t.TTL)));return this._cache.set(o.getCacheKey(t,"A"),n,{ttl:s}),n}catch(i){n.error(`${e} could not resolve ${t} record A`)}throw new Error(`Could not resolve ${t} record A`)}async resolve6(t){const e="AAAA",i=this._cache.get(o.getCacheKey(t,e));if(i)return i;for(const i of this._getShuffledServers())try{const r=await o.fetch(o.buildResource({serverResolver:i,hostname:t,recordType:e})),n=await r.json(),s=n.Answer.map((t=>t.data)),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(o.getCacheKey(t,e),s,{ttl:a}),s}catch(e){n.error(`${i} could not resolve ${t} record AAAA`)}throw new Error(`Could not resolve ${t} record AAAA`)}async resolveTxt(t){const e="TXT",i=this._cache.get(o.getCacheKey(t,e));if(i)return i;for(const i of this._getShuffledServers())try{const r=await o.fetch(o.buildResource({serverResolver:i,hostname:t,recordType:e})),n=await r.json(),s=n.Answer.map((t=>[t.data.replace(/['"]+/g,"")])),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(o.getCacheKey(t,e),s,{ttl:a}),s}catch(e){n.error(`${i} could not resolve ${t} record TXT`)}throw new Error(`Could not resolve ${t} record TXT`)}}a.Resolver=a,t.exports=a},46177:(t,e,i)=>{"use strict";const{default:r,Headers:n}=i(30700);t.exports={buildResource:function({serverResolver:t,hostname:e,recordType:i}){return`${t}?name=${e}&type=${i}`},fetch:function(t){return r(t,{headers:new n({accept:"application/dns-json"})})},getCacheKey:function(t,e){return`${e}_${t}`}}},86266:(t,e,i)=>{"use strict";var r=e;r.version=i(18597).i8,r.utils=i(42987),r.rand=i(29931),r.curve=i(88254),r.curves=i(45427),r.ec=i(57954),r.eddsa=i(65980)},4918:(t,e,i)=>{"use strict";var r=i(13550),n=i(42987),s=n.getNAF,o=n.getJSF,a=n.assert;function h(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=h,h.prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(t,e){a(t.precomputed);var i=t._getDoubles(),r=s(e,1,this._bitLength),n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;var o,h,c=[];for(o=0;o<r.length;o+=i.step){h=0;for(var l=o+i.step-1;l>=o;l--)h=(h<<1)+r[l];c.push(h)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=n;f>0;f--){for(o=0;o<c.length;o++)(h=c[o])===f?d=d.mixedAdd(i.points[o]):h===-f&&(d=d.mixedAdd(i.points[o].neg()));u=u.add(d)}return u.toP()},h.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var n=r.points,o=s(e,i,this._bitLength),h=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&0===o[c];c--)l++;if(c>=0&&l++,h=h.dblp(l),c<0)break;var u=o[c];a(0!==u),h="affine"===t.type?u>0?h.mixedAdd(n[u-1>>1]):h.mixedAdd(n[-u-1>>1].neg()):u>0?h.add(n[u-1>>1]):h.add(n[-u-1>>1].neg())}return"affine"===t.type?h.toP():h},h.prototype._wnafMulAdd=function(t,e,i,r,n){var a,h,c,l=this._wnafT1,u=this._wnafT2,d=this._wnafT3,f=0;for(a=0;a<r;a++){var p=(c=e[a])._getNAFPoints(t);l[a]=p.wnd,u[a]=p.points}for(a=r-1;a>=1;a-=2){var g=a-1,y=a;if(1===l[g]&&1===l[y]){var m=[e[g],null,null,e[y]];0===e[g].y.cmp(e[y].y)?(m[1]=e[g].add(e[y]),m[2]=e[g].toJ().mixedAdd(e[y].neg())):0===e[g].y.cmp(e[y].y.redNeg())?(m[1]=e[g].toJ().mixedAdd(e[y]),m[2]=e[g].add(e[y].neg())):(m[1]=e[g].toJ().mixedAdd(e[y]),m[2]=e[g].toJ().mixedAdd(e[y].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],b=o(i[g],i[y]);for(f=Math.max(b[0].length,f),d[g]=new Array(f),d[y]=new Array(f),h=0;h<f;h++){var w=0|b[0][h],_=0|b[1][h];d[g][h]=v[3*(w+1)+(_+1)],d[y][h]=0,u[g]=m}}else d[g]=s(i[g],l[g],this._bitLength),d[y]=s(i[y],l[y],this._bitLength),f=Math.max(d[g].length,f),f=Math.max(d[y].length,f)}var x=this.jpoint(null,null,null),E=this._wnafT4;for(a=f;a>=0;a--){for(var S=0;a>=0;){var T=!0;for(h=0;h<r;h++)E[h]=0|d[h][a],0!==E[h]&&(T=!1);if(!T)break;S++,a--}if(a>=0&&S++,x=x.dblp(S),a<0)break;for(h=0;h<r;h++){var A=E[h];0!==A&&(A>0?c=u[h][A-1>>1]:A<0&&(c=u[h][-A-1>>1].neg()),x="affine"===c.type?x.mixedAdd(c):x.add(c))}}for(a=0;a<r;a++)u[a]=null;return n?x:x.toP()},h.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(t,e){t=n.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return n.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var s=0;s<t;s++)r=r.dbl();i.push(r)}return{step:t,points:i}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}},31138:(t,e,i)=>{"use strict";var r=i(42987),n=i(13550),s=i(35717),o=i(4918),a=r.assert;function h(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,o.call(this,"edwards",t),this.a=new n(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,i,r,s){o.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(e,16),this.y=new n(i,16),this.z=r?new n(r,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(h,o),t.exports=h,h.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},h.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},h.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},h.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=r.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var h=a.fromRed().isOdd();return(e&&!h||!e&&h)&&(a=a.redNeg()),this.point(t,a)},h.prototype.pointFromY=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=r.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},h.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),r=e.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===r.cmp(n)},s(c,o.BasePoint),h.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},h.prototype.point=function(t,e,i,r){return new c(this,t,e,i,r)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=r.redAdd(e),o=s.redSub(i),a=r.redSub(e),h=n.redMul(o),c=s.redMul(a),l=n.redMul(a),u=o.redMul(s);return this.curve.point(h,c,u,l)},c.prototype._projDbl=function(){var t,e,i,r,n,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var c=(r=this.curve._mulA(a)).redAdd(h);this.zOne?(t=o.redSub(a).redSub(h).redMul(c.redSub(this.curve.two)),e=c.redMul(r.redSub(h)),i=c.redSqr().redSub(c).redSub(c)):(n=this.z.redSqr(),s=c.redSub(n).redISub(n),t=o.redSub(a).redISub(h).redMul(s),e=c.redMul(r.redSub(h)),i=c.redMul(s))}else r=a.redAdd(h),n=this.curve._mulC(this.z).redSqr(),s=r.redSub(n).redSub(n),t=this.curve._mulC(o.redISub(r)).redMul(s),e=this.curve._mulC(r).redMul(a.redISub(h)),i=r.redMul(s);return this.curve.point(t,e,i)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),s=i.redSub(e),o=n.redSub(r),a=n.redAdd(r),h=i.redAdd(e),c=s.redMul(o),l=a.redMul(h),u=s.redMul(h),d=o.redMul(a);return this.curve.point(c,l,d,u)},c.prototype._projAdd=function(t){var e,i,r=this.z.redMul(t.z),n=r.redSqr(),s=this.x.redMul(t.x),o=this.y.redMul(t.y),a=this.curve.d.redMul(s).redMul(o),h=n.redSub(a),c=n.redAdd(a),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(o),u=r.redMul(h).redMul(l);return this.curve.twisted?(e=r.redMul(c).redMul(o.redSub(this.curve._mulA(s))),i=h.redMul(c)):(e=r.redMul(c).redMul(o.redSub(s)),i=this.curve._mulC(h).redMul(c)),this.curve.point(u,e,i)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},c.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},88254:(t,e,i)=>{"use strict";var r=e;r.base=i(4918),r.short=i(6673),r.mont=i(22881),r.edwards=i(31138)},22881:(t,e,i)=>{"use strict";var r=i(13550),n=i(35717),s=i(4918),o=i(42987);function a(t){s.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function h(t,e,i){s.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(a,s),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),r=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},n(h,s.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(o.toArray(t,e),1)},a.prototype.point=function(t,e){return new h(this,t,e)},a.prototype.pointFromJSON=function(t){return h.fromJSON(this,t)},h.prototype.precompute=function(){},h.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},h.fromJSON=function(t,e){return new h(t,e[0],e[1]||t.one)},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},h.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),r=t.redMul(e),n=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,n)},h.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=t.x.redAdd(t.z),s=t.x.redSub(t.z).redMul(i),o=n.redMul(r),a=e.z.redMul(s.redAdd(o).redSqr()),h=e.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,h)},h.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},h.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},h.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},6673:(t,e,i)=>{"use strict";var r=i(42987),n=i(13550),s=i(35717),o=i(4918),a=r.assert;function h(t){o.call(this,"short",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,i,r){o.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(e,16),this.y=new n(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,i,r){o.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(e,16),this.y=new n(i,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(h,o),t.exports=h,h.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new n(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new n(t.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))?i=s[0]:(i=s[1],a(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:i,basis:t.basis?t.basis.map((function(t){return{a:new n(t.a,16),b:new n(t.b,16)}})):this._getEndoBasis(i)}}},h.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:n.mont(t),i=new n(2).toRed(e).redInvm(),r=i.redNeg(),s=new n(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(s).fromRed(),r.redSub(s).fromRed()]},h.prototype._getEndoBasis=function(t){for(var e,i,r,s,o,a,h,c,l,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=t,f=this.n.clone(),p=new n(1),g=new n(0),y=new n(0),m=new n(1),v=0;0!==d.cmpn(0);){var b=f.div(d);c=f.sub(b.mul(d)),l=y.sub(b.mul(p));var w=m.sub(b.mul(g));if(!r&&c.cmp(u)<0)e=h.neg(),i=p,r=c.neg(),s=l;else if(r&&2==++v)break;h=c,f=d,d=c,y=p,p=l,m=g,g=w}o=c.neg(),a=l;var _=r.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(_)>=0&&(o=e,a=i),r.negative&&(r=r.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:r,b:s},{a:o,b:a}]},h.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),s=i.b.neg().mul(t).divRound(this.n),o=n.mul(i.a),a=s.mul(r.a),h=n.mul(i.b),c=s.mul(r.b);return{k1:t.sub(o).sub(a),k2:h.add(c).neg()}},h.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var s=r.fromRed().isOdd();return(e&&!s||!e&&s)&&(r=r.redNeg()),this.point(t,r)},h.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},h.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),r[2*s]=a,r[2*s+1]=h,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var c=this._wnafMulAdd(1,r,n,2*s,i),l=0;l<2*s;l++)r[l]=null,n[l]=null;return c},s(c,o.BasePoint),h.prototype.point=function(t,e,i){return new c(this,t,e,i)},h.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(e){return t.point(e[0],e[1],i)}var s=e[2];return r.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[r].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[r].concat(s.naf.points.map(n))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new n(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},c.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(l,o.BasePoint),h.prototype.jpoint=function(t,e,i){return new l(this,t,e,i)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=r.redSub(n),h=s.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),u=r.redMul(c),d=h.redSqr().redIAdd(l).redISub(u).redISub(u),f=h.redMul(u.redISub(d)).redISub(s.redMul(l)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,p)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,s=t.y.redMul(e).redMul(this.z),o=i.redSub(r),a=n.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),c=h.redMul(o),l=i.redMul(h),u=a.redSqr().redIAdd(c).redISub(l).redISub(l),d=a.redMul(l.redISub(u)).redISub(n.redMul(c)),f=this.z.redMul(o);return this.curve.jpoint(u,d,f)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),c=o.redAdd(o);for(e=0;e<t;e++){var l=s.redSqr(),u=c.redSqr(),d=u.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(h)),p=s.redMul(u),g=f.redSqr().redISub(p.redAdd(p)),y=p.redISub(g),m=f.redMul(y);m=m.redIAdd(m).redISub(d);var v=c.redMul(a);e+1<t&&(h=h.redMul(d)),s=g,a=v,c=m}return this.curve.jpoint(s,c.redMul(n),a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),h=a.redSqr().redISub(o).redISub(o),c=s.redIAdd(s);c=(c=c.redIAdd(c)).redIAdd(c),t=h,e=a.redMul(o.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),u=this.y.redSqr(),d=u.redSqr(),f=this.x.redAdd(u).redSqr().redISub(l).redISub(d);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),y=d.redIAdd(d);y=(y=y.redIAdd(y)).redIAdd(y),t=g.redISub(f).redISub(f),e=p.redMul(f.redISub(t)).redISub(y),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},l.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;var c=s.redIAdd(s);c=(c=c.redIAdd(c)).redIAdd(c),e=a.redMul(o.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),u=this.y.redSqr(),d=this.x.redMul(u),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),g=(p=p.redIAdd(p)).redAdd(p);t=f.redSqr().redISub(g),i=this.y.redAdd(this.z).redSqr().redISub(u).redISub(l);var y=u.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),e=f.redMul(p.redISub(t)).redISub(y)}return this.curve.jpoint(t,e,i)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),s=e.redSqr(),o=i.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(n)),h=e.redAdd(e),c=(h=h.redIAdd(h)).redMul(o),l=a.redSqr().redISub(c.redAdd(c)),u=c.redISub(l),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(u).redISub(d),p=i.redAdd(i).redMul(r);return this.curve.jpoint(l,f,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),s=n.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),h=r.redIAdd(r);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var c=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),l=e.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var u=this.x.redMul(a).redISub(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.y.redMul(c.redMul(h.redISub(c)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(u,d,f)},l.prototype.mul=function(t,e){return t=new n(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},45427:(t,e,i)=>{"use strict";var r,n=e,s=i(33715),o=i(88254),a=i(42987).assert;function h(t){"short"===t.type?this.curve=new o.short(t):"edwards"===t.type?this.curve=new o.edwards(t):this.curve=new o.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var i=new h(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:i}),i}})}n.PresetCurve=h,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=i(91037)}catch(t){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},57954:(t,e,i)=>{"use strict";var r=i(13550),n=i(2156),s=i(42987),o=i(45427),a=i(29931),h=s.assert,c=i(31251),l=i(90611);function u(t){if(!(this instanceof u))return new u(t);"string"==typeof t&&(h(Object.prototype.hasOwnProperty.call(o,t),"Unknown curve "+t),t=o[t]),t instanceof o.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=u,u.prototype.keyPair=function(t){return new c(this,t)},u.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},u.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},u.prototype.genKeyPair=function(t){t||(t={});for(var e=new n({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new r(2));;){var o=new r(e.generate(i));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},u.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},u.prototype.sign=function(t,e,i,s){"object"==typeof i&&(s=i,i=null),s||(s={}),e=this.keyFromPrivate(e,i),t=this._truncateToN(new r(t,16));for(var o=this.n.byteLength(),a=e.getPrivate().toArray("be",o),h=t.toArray("be",o),c=new n({hash:this.hash,entropy:a,nonce:h,pers:s.pers,persEnc:s.persEnc||"utf8"}),u=this.n.sub(new r(1)),d=0;;d++){var f=s.k?s.k(d):new r(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var g=p.getX(),y=g.umod(this.n);if(0!==y.cmpn(0)){var m=f.invm(this.n).mul(y.mul(e.getPrivate()).iadd(t));if(0!==(m=m.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==g.cmp(y)?2:0);return s.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),v^=1),new l({r:y,s:m,recoveryParam:v})}}}}}},u.prototype.verify=function(t,e,i,n){t=this._truncateToN(new r(t,16)),i=this.keyFromPublic(i,n);var s=(e=new l(e,"hex")).r,o=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,h=o.invm(this.n),c=h.mul(t).umod(this.n),u=h.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,i.getPublic(),u)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(c,i.getPublic(),u)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},u.prototype.recoverPubKey=function(t,e,i,n){h((3&i)===i,"The recovery param is more than two bits"),e=new l(e,n);var s=this.n,o=new r(t),a=e.r,c=e.s,u=1&i,d=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var f=e.r.invm(s),p=s.sub(o).mul(f).umod(s),g=c.mul(f).umod(s);return this.g.mulAdd(p,a,g)},u.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new l(e,r)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(t){continue}if(s.eq(i))return n}throw new Error("Unable to find valid recovery factor")}},31251:(t,e,i)=>{"use strict";var r=i(13550),n=i(42987).assert;function s(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=s,s.fromPublic=function(t,e,i){return e instanceof s?e:new s(t,{pub:e,pubEnc:i})},s.fromPrivate=function(t,e,i){return e instanceof s?e:new s(t,{priv:e,privEnc:i})},s.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},s.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?n(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},s.prototype.derive=function(t){return t.validate()||n(t.validate(),"public point not validated"),t.mul(this.priv).getX()},s.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},s.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},90611:(t,e,i)=>{"use strict";var r=i(13550),n=i(42987),s=n.assert;function o(t,e){if(t instanceof o)return t;this._importDER(t,e)||(s(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function h(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;for(var n=0,s=0,o=e.place;s<r;s++,o++)n<<=8,n|=t[o],n>>>=0;return!(n<=127)&&(e.place=o,n)}function c(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function l(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}t.exports=o,o.prototype._importDER=function(t,e){t=n.toArray(t,e);var i=new a;if(48!==t[i.place++])return!1;var s=h(t,i);if(!1===s)return!1;if(s+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var o=h(t,i);if(!1===o)return!1;var c=t.slice(i.place,o+i.place);if(i.place+=o,2!==t[i.place++])return!1;var l=h(t,i);if(!1===l)return!1;if(t.length!==l+i.place)return!1;var u=t.slice(i.place,l+i.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}return this.r=new r(c),this.s=new r(u),this.recoveryParam=null,!0},o.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=c(e),i=c(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];l(r,e.length),(r=r.concat(e)).push(2),l(r,i.length);var s=r.concat(i),o=[48];return l(o,s.length),o=o.concat(s),n.encode(o,t)}},65980:(t,e,i)=>{"use strict";var r=i(33715),n=i(45427),s=i(42987),o=s.assert,a=s.parseBytes,h=i(79087),c=i(23622);function l(t){if(o("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof l))return new l(t);t=n[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=l,l.prototype.sign=function(t,e){t=a(t);var i=this.keyFromSecret(e),r=this.hashInt(i.messagePrefix(),t),n=this.g.mul(r),s=this.encodePoint(n),o=this.hashInt(s,i.pubBytes(),t).mul(i.priv()),h=r.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:h,Rencoded:s})},l.prototype.verify=function(t,e,i){t=a(t),e=this.makeSignature(e);var r=this.keyFromPublic(i),n=this.hashInt(e.Rencoded(),r.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(r.pub().mul(n)).eq(s)},l.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return s.intFromLE(t.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(t){return h.fromPublic(this,t)},l.prototype.keyFromSecret=function(t){return h.fromSecret(this,t)},l.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},l.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},l.prototype.decodePoint=function(t){var e=(t=s.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),n=s.intFromLE(i);return this.curve.pointFromY(n,r)},l.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(t){return s.intFromLE(t)},l.prototype.isPoint=function(t){return t instanceof this.pointClass}},79087:(t,e,i)=>{"use strict";var r=i(42987),n=r.assert,s=r.parseBytes,o=r.cachedProperty;function a(t,e){this.eddsa=t,this._secret=s(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=s(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(a,"privBytes",(function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r})),o(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(t){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},a.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=a},23622:(t,e,i)=>{"use strict";var r=i(13550),n=i(42987),s=n.assert,o=n.cachedProperty,a=n.parseBytes;function h(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),s(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}o(h,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(h,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(h,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(h,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},t.exports=h},91037:t=>{t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},42987:(t,e,i)=>{"use strict";var r=e,n=i(13550),s=i(79746),o=i(34504);r.assert=s,r.toArray=o.toArray,r.zero2=o.zero2,r.toHex=o.toHex,r.encode=o.encode,r.getNAF=function(t,e,i){var r=new Array(Math.max(t.bitLength(),i)+1);r.fill(0);for(var n=1<<e+1,s=t.clone(),o=0;o<r.length;o++){var a,h=s.andln(n-1);s.isOdd()?(a=h>(n>>1)-1?(n>>1)-h:h,s.isubn(a)):a=0,r[o]=a,s.iushrn(1)}return r},r.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r,n=0,s=0;t.cmpn(-n)>0||e.cmpn(-s)>0;){var o,a,h=t.andln(3)+n&3,c=e.andln(3)+s&3;3===h&&(h=-1),3===c&&(c=-1),o=0==(1&h)?0:3!=(r=t.andln(7)+n&7)&&5!==r||2!==c?h:-h,i[0].push(o),a=0==(1&c)?0:3!=(r=e.andln(7)+s&7)&&5!==r||2!==h?c:-c,i[1].push(a),2*n===o+1&&(n=1-n),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return i},r.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new n(t,"hex","le")}},50780:(t,e,i)=>{"use strict";const r=i(24012).AbstractLevelDOWN,n=i(24012).AbstractChainedBatch,s=i(24012).AbstractIterator,o=i(35717),a=i(84124),h=i(56604).EncodingError,c=["approximateSize","compactRange"];function l(t,e){if(!(this instanceof l))return new l(t,e);const i=t.supports||{},n=i.additionalMethods||{};r.call(this,i),this.supports.encodings=!0,this.supports.additionalMethods={},c.forEach((function(e){const i="function"==typeof t[e];(n[e]||i)&&(this.supports.additionalMethods[e]=!0,this[e]=function(t,i,r,n){return t=this.codec.encodeKey(t,r),i=this.codec.encodeKey(i,r),this.db[e](t,i,r,n)})}),this),void 0===(e=e||{}).keyEncoding&&(e.keyEncoding="utf8"),void 0===e.valueEncoding&&(e.valueEncoding="utf8"),this.db=t,this.codec=new a(e)}function u(t,e){s.call(this,t),this.codec=t.codec,this.keys=e.keys,this.values=e.values,this.opts=this.codec.encodeLtgt(e),this.it=t.db.iterator(this.opts)}function d(t,e){n.call(this,t),this.codec=t.codec,this.batch=t.db.batch()}t.exports=l,o(l,r),l.prototype.type="encoding-down",l.prototype._serializeKey=l.prototype._serializeValue=function(t){return t},l.prototype._open=function(t,e){this.db.open(t,e)},l.prototype._close=function(t){this.db.close(t)},l.prototype._put=function(t,e,i,r){t=this.codec.encodeKey(t,i),e=this.codec.encodeValue(e,i),this.db.put(t,e,i,r)},l.prototype._get=function(t,e,i){t=this.codec.encodeKey(t,e),e.asBuffer=this.codec.valueAsBuffer(e),this.db.get(t,e,((t,r)=>{if(t)return i(t);try{r=this.codec.decodeValue(r,e)}catch(t){return i(new h(t))}i(null,r)}))},l.prototype._getMany=function(t,e,i){t=t.map((t=>this.codec.encodeKey(t,e))),e.asBuffer=this.codec.valueAsBuffer(e),this.db.getMany(t,e,((t,r)=>{if(t)return i(t);const n=new Array(r.length);for(let s=0;s<r.length;s++)if(void 0!==r[s])try{n[s]=this.codec.decodeValue(r[s],e)}catch(t){return i(new h(t))}else n[s]=void 0;i(null,n)}))},l.prototype._del=function(t,e,i){t=this.codec.encodeKey(t,e),this.db.del(t,e,i)},l.prototype._chainedBatch=function(){return new d(this)},l.prototype._batch=function(t,e,i){t=this.codec.encodeBatch(t,e),this.db.batch(t,e,i)},l.prototype._iterator=function(t){return t.keyAsBuffer=this.codec.keyAsBuffer(t),t.valueAsBuffer=this.codec.valueAsBuffer(t),new u(this,t)},l.prototype._clear=function(t,e){t=this.codec.encodeLtgt(t),this.db.clear(t,e)},o(u,s),u.prototype._next=function(t){this.it.next(((e,i,r)=>{if(e)return t(e);try{i=this.keys&&void 0!==i?this.codec.decodeKey(i,this.opts):void 0,r=this.values&&void 0!==r?this.codec.decodeValue(r,this.opts):void 0}catch(e){return t(new h(e))}t(null,i,r)}))},u.prototype._seek=function(t){t=this.codec.encodeKey(t,this.opts),this.it.seek(t)},u.prototype._end=function(t){this.it.end(t)},o(d,n),d.prototype._put=function(t,e,i){t=this.codec.encodeKey(t,i),e=this.codec.encodeValue(e,i),this.batch.put(t,e)},d.prototype._del=function(t,e){t=this.codec.encodeKey(t,e),this.batch.del(t)},d.prototype._clear=function(){this.batch.clear()},d.prototype._write=function(t,e){this.batch.write(t,e)}},32114:t=>{"use strict";function e(t,e){for(const i in e)Object.defineProperty(t,i,{value:e[i],enumerable:!0,configurable:!0});return t}t.exports=function(t,i,r){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof i&&(r=i,i=""),i&&(r.code=i);try{return e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),e(new n,r)}}},76021:(t,e)=>{"use strict";function i(t){if("function"!=typeof t)throw new TypeError("Argument to promisify must be a function");var e=t["__ES6-PROMISIFY--CUSTOM-ARGUMENTS__"],r=i.Promise||Promise;if("function"!=typeof r)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var i=this,n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return new r((function(r,n){s.push((function(t){if(t)return n(t);for(var i=arguments.length,s=Array(1<i?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(1===s.length||!e)return r(s[0]);var a={};s.forEach((function(t,i){var r=e[i];r&&(a[r]=t)})),r(a)})),t.apply(i,s)}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.promisify=i,i.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",i.Promise=void 0},90507:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(8231);e.EventIterator=r.EventIterator,e.subscribe=function(t,e,i){return new r.EventIterator((({push:i})=>(this.addEventListener(t,i,e),()=>this.removeEventListener(t,i,e))),i)},e.default=r.EventIterator},8231:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(t){if(this.isStopped)return;const e={value:t,done:!1};if(this.pullQueue.length){const t=this.pullQueue.shift();t&&t.resolve(e)}else this.pushQueue.push(Promise.resolve(e)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const t of this.pullQueue)t.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(t){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const e of this.pullQueue)e.reject(t);this.pullQueue.length=0}else{const e=Promise.reject(t);e.catch((()=>{})),this.pushQueue.push(e)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:t=>{const e=this.pushQueue.shift();return e?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),e):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((t,e)=>{this.pullQueue.push({resolve:t,reject:e})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class r{constructor(t,{highWaterMark:e=100,lowWaterMark:r=1}={}){const n=new i;n.highWaterMark=e,n.lowWaterMark=r,n.removeCallback=t({push:t=>n.push(t),stop:()=>n.stop(),fail:t=>n.fail(t),on:(t,e)=>{n.eventHandlers[t]=e}})||(()=>{}),this[Symbol.asyncIterator]=()=>n[Symbol.asyncIterator](),Object.freeze(this)}}e.EventIterator=r,e.default=r},26729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,c,l=this._events[a],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,s),!0;case 6:return l.fn.call(l.context,e,r,n,s,o),!0}for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];l.fn.apply(l.context,h)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];l[c].fn.apply(l[c].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||o(this,s);else{for(var h=0,c=[],l=a.length;h<l;h++)(a[h].fn!==e||n&&!a[h].once||r&&a[h].context!==r)&&c.push(a[h]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},17187:t=>{"use strict";var e,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(i,r){function n(i){t.removeListener(e,s),r(i)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}g(t,e,s,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,n)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,i,r){var n,s,o,c;if(a(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),o=s[e]),void 0===o)o=s[e]=i,++t._eventsCount;else if("function"==typeof o?o=s[e]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(n=h(t))>0&&o.length>n&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,c=l,console&&console.warn&&console.warn(c)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=l.bind(r);return n.listener=i,r.wrapFn=n,n}function d(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):p(n,n.length)}function f(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function p(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function g(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(s){r.once&&t.removeEventListener(e,n),i(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var h=s[t];if(void 0===h)return!1;if("function"==typeof h)r(h,this,e);else{var c=h.length,l=p(h,c);for(i=0;i<c;++i)r(l[i],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,u(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,u(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,r,n,s,o;if(a(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){o=i[s].listener,n=s;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,s=Object.keys(i);for(r=0;r<s.length;++r)"removeListener"!==(n=s[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},13048:(t,e,i)=>{var r=i(89509).Buffer,n=i(62318);t.exports=function(t,e,i,s){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=i/8,a=r.alloc(o),h=r.alloc(s||0),c=r.alloc(0);o>0||s>0;){var l=new n;l.update(c),l.update(t),e&&l.update(e),c=l.digest();var u=0;if(o>0){var d=a.length-o;u=Math.min(o,c.length),c.copy(a,d,0,u),o-=u}if(u<c.length&&s>0){var f=h.length-s,p=Math.min(s,c.length-u);c.copy(h,f,u,u+p),s-=p}}return c.fill(0),{key:a,iv:h}}},3975:t=>{t.exports=class{constructor(t){if(!(t>0)||0!=(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},91607:(t,e,i)=>{const r=i(3975);t.exports=class{constructor(t){this.hwm=t||16,this.head=new r(this.hwm),this.tail=this.head}push(t){if(!this.head.push(t)){const e=this.head;this.head=e.next=new r(2*this.head.buffer.length),this.head.push(t)}}shift(){const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},96132:(t,e)=>{"use strict";function i(t,e=i.BASE){const r=t.length;for(let i=0;i<r;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}Object.defineProperty(e,"__esModule",{value:!0}),i.BASE=2166136261,e.default=i,t.exports=i},5177:t=>{t.exports=function(){if("undefined"==typeof globalThis)return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}},22412:t=>{t.exports=function(t){if(t){if("function"==typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"==typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"==typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}},30043:(t,e,i)=>{"use strict";const r=i(20544),{fromString:n}=i(52217);class s{constructor(t,e,i=0){this._options=t,this._popCount=0,this._parent=e,this._posAtParent=i,this._children=new r,this.key=null}async put(t,e){const i=await this._findNewBucketAndPos(t);await i.bucket._putAt(i,t,e)}async get(t){const e=await this._findChild(t);if(e)return e.value}async del(t){const e=await this._findPlace(t),i=e.bucket._at(e.pos);i&&i.key===t&&e.bucket._delAt(e.pos)}leafCount(){return this._children.compactArray().reduce(((t,e)=>e instanceof s?t+e.leafCount():t+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const t=this._children.compactArray();for(const e of t)e instanceof s?yield*e.eachLeafSeries():yield e;return[]}serialize(t,e){return e(this._children.reduce(((i,r,n)=>(r&&(r instanceof s?i.push(r.serialize(t,e)):i.push(t(r,n))),i)),[]))}asyncTransform(t,e){return c(this,t,e)}toJSON(){return this.serialize(a,h)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(t){const e=await this._findPlace(t),i=e.bucket._at(e.pos);if(!(i instanceof s))return i&&i.key===t?i:void 0}async _findPlace(t){const e=this._options.hash("string"==typeof t?n(t):t),i=await e.take(this._options.bits),r=this._children.get(i);return r instanceof s?r._findPlace(e):{bucket:this,pos:i,hash:e,existingChild:r}}async _findNewBucketAndPos(t){const e=await this._findPlace(t);if(e.existingChild&&e.existingChild.key!==t){const t=new s(this._options,e.bucket,e.pos);e.bucket._putObjectAt(e.pos,t);const i=await t._findPlace(e.existingChild.hash);return i.bucket._putAt(i,e.existingChild.key,e.existingChild.value),t._findNewBucketAndPos(e.hash)}return e}_putAt(t,e,i){this._putObjectAt(t.pos,{key:e,value:i,hash:t.hash})}_putObjectAt(t,e){this._children.get(t)||this._popCount++,this._children.set(t,e)}_delAt(t){if(-1===t)throw new Error("Invalid position");this._children.get(t)&&this._popCount--,this._children.unset(t),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const t=this._children.find(o);if(t&&!(t instanceof s)){const e=t.hash;e.untake(this._options.bits);const i={pos:this._posAtParent,hash:e,bucket:this._parent};this._parent._putAt(i,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}_at(t){return this._children.get(t)}}function o(t){return Boolean(t)}function a(t,e){return t.key}function h(t){return t}async function c(t,e,i){const r=[];for(const n of t._children.compactArray())if(n instanceof s)await c(n,e,i);else{const i=await e(n);r.push({bitField:t._children.bitField(),children:i})}return i(r)}t.exports=s},51536:t=>{"use strict";const e=[255,254,252,248,240,224,192,128],i=[1,3,7,15,31,63,127,255];function r(t,r,n){const s=function(t,r){return e[t]&i[Math.min(r+t-1,7)]}(r,n);return(t&s)>>>r}t.exports=class{constructor(t){this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(t){let e=t,i=0;for(;e&&this._haveBits();){const t=this._value[this._currentBytePos],n=this._currentBitPos+1,s=Math.min(n,e);i=(i<<s)+r(t,n-s,s),e-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return i}untake(t){for(this._currentBitPos+=t;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},31712:(t,e,i)=>{"use strict";const r=i(51536),{concat:n}=i(20605);class s{constructor(t,e){if(!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=e,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(t){let e=t;for(;this._availableBits<e;)await this._produceMoreBits();let i=0;for(;e>0;){const t=this._buffers[this._currentBufferIndex],r=Math.min(t.availableBits(),e);i=(i<<r)+t.take(r),e-=r,this._availableBits-=r,0===t.availableBits()&&this._currentBufferIndex++}return i}untake(t){let e=t;for(;e>0;){const t=this._buffers[this._currentBufferIndex],i=Math.min(t.totalBits()-t.availableBits(),e);t.untake(i),e-=i,this._availableBits+=i,this._currentBufferIndex>0&&t.totalBits()===t.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const t=this._depth?n([this._value,Uint8Array.from([this._depth])]):this._value,e=await this._hashFn(t),i=new r(e);this._buffers.push(i),this._availableBits+=i.availableBits()}}t.exports=function(t){return function(e){return e instanceof s?e:new s(e,t)}},t.exports.InfiniteHash=s},54563:(t,e,i)=>{"use strict";const r=i(30043),n=i(31712);t.exports={createHAMT:function(t){if(!t||!t.hashFn)throw new Error("please define an options.hashFn");const e={bits:t.bits||8,hash:n(t.hashFn)};return new r(e)},Bucket:r}},3349:(t,e,i)=>{"use strict";var r=i(89509).Buffer,n=i(88473).Transform;function s(t){n.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(35717)(s,n),s.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(t){r=t}i(r)},s.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},s.prototype.update=function(t,e){if(function(t,e){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var i=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)i[s++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)i[this._blockOffset++]=t[n++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},33715:(t,e,i)=>{var r=e;r.utils=i(26436),r.common=i(95772),r.sha=i(89041),r.ripemd=i(12949),r.hmac=i(52344),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},95772:(t,e,i)=>{"use strict";var r=i(26436),n=i(79746);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,s=8;s<this.padLength;s++)r[n++]=0;return r}},52344:(t,e,i)=>{"use strict";var r=i(26436),n=i(79746);function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,i))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},12949:(t,e,i)=>{"use strict";var r=i(26436),n=i(95772),s=r.rotl32,o=r.sum32,a=r.sum32_3,h=r.sum32_4,c=n.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(l,c),e.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],c=this.h[3],l=this.h[4],v=i,b=r,w=n,_=c,x=l,E=0;E<80;E++){var S=o(s(h(i,u(E,r,n,c),t[p[E]+e],d(E)),y[E]),l);i=l,l=c,c=s(n,10),n=r,r=S,S=o(s(h(v,u(79-E,b,w,_),t[g[E]+e],f(E)),m[E]),x),v=x,x=_,_=s(w,10),w=b,b=S}S=a(this.h[1],n,_),this.h[1]=a(this.h[2],c,x),this.h[2]=a(this.h[3],l,v),this.h[3]=a(this.h[4],i,b),this.h[4]=a(this.h[0],r,w),this.h[0]=S},l.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},89041:(t,e,i)=>{"use strict";e.sha1=i(84761),e.sha224=i(10799),e.sha256=i(89344),e.sha384=i(80772),e.sha512=i(45900)},84761:(t,e,i)=>{"use strict";var r=i(26436),n=i(95772),s=i(37038),o=r.rotl32,a=r.sum32,h=r.sum32_5,c=s.ft_1,l=n.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(d,l),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=o(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],s=this.h[1],l=this.h[2],d=this.h[3],f=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),g=h(o(n,5),c(p,s,l,d),f,i[r],u[p]);f=d,d=l,l=o(s,30),s=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},10799:(t,e,i)=>{"use strict";var r=i(26436),n=i(89344);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},89344:(t,e,i)=>{"use strict";var r=i(26436),n=i(95772),s=i(37038),o=i(79746),a=r.sum32,h=r.sum32_4,c=r.sum32_5,l=s.ch32,u=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,y=n.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}r.inherits(v,y),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=h(g(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var n=this.h[0],s=this.h[1],y=this.h[2],m=this.h[3],v=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var x=c(_,f(v),l(v,b,w),this.k[r],i[r]),E=a(d(n),u(n,s,y));_=w,w=b,b=v,v=a(m,x),m=y,y=s,s=n,n=a(x,E)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],y),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},v.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},80772:(t,e,i)=>{"use strict";var r=i(26436),n=i(45900);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},45900:(t,e,i)=>{"use strict";var r=i(26436),n=i(95772),s=i(79746),o=r.rotr64_hi,a=r.rotr64_lo,h=r.shr64_hi,c=r.shr64_lo,l=r.sum64,u=r.sum64_hi,d=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,g=r.sum64_5_hi,y=r.sum64_5_lo,m=n.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function w(t,e,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function _(t,e,i,r,n,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function x(t,e,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function E(t,e,i,r,n,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function S(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function T(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function A(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function C(t,e){var i=o(t,e,1)^o(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function k(t,e){var i=a(t,e,1)^a(t,e,8)^c(t,e,7);return i<0&&(i+=4294967296),i}function R(t,e){var i=a(t,e,19)^a(e,t,29)^c(t,e,6);return i<0&&(i+=4294967296),i}r.inherits(b,m),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=(y=i[r-4],m=i[r-3],v=void 0,(v=o(y,m,19)^o(m,y,29)^h(y,m,6))<0&&(v+=4294967296),v),s=R(i[r-4],i[r-3]),a=i[r-14],c=i[r-13],l=C(i[r-30],i[r-29]),u=k(i[r-30],i[r-29]),d=i[r-32],g=i[r-31];i[r]=f(n,s,a,c,l,u,d,g),i[r+1]=p(n,s,a,c,l,u,d,g)}var y,m,v},b.prototype._update=function(t,e){this._prepareBlock(t,e);var i,r,n,a=this.W,h=this.h[0],c=this.h[1],f=this.h[2],p=this.h[3],m=this.h[4],v=this.h[5],b=this.h[6],C=this.h[7],k=this.h[8],R=this.h[9],P=this.h[10],I=this.h[11],O=this.h[12],M=this.h[13],D=this.h[14],B=this.h[15];s(this.k.length===a.length);for(var L=0;L<a.length;L+=2){var N=D,U=B,F=(n=void 0,(n=o(i=k,r=R,14)^o(i,r,18)^o(r,i,9))<0&&(n+=4294967296),n),z=A(k,R),j=w(k,0,P,0,O),V=_(0,R,0,I,0,M),G=this.k[L],H=this.k[L+1],Y=a[L],K=a[L+1],W=g(N,U,F,z,j,V,G,H,Y,K),X=y(N,U,F,z,j,V,G,H,Y,K);N=S(h,c),U=T(h,c),F=x(h,0,f,0,m),z=E(0,c,0,p,0,v);var q=u(N,U,F,z),$=d(N,U,F,z);D=O,B=M,O=P,M=I,P=k,I=R,k=u(b,C,W,X),R=d(C,C,W,X),b=m,C=v,m=f,v=p,f=h,p=c,h=u(W,X,q,$),c=d(W,X,q,$)}l(this.h,0,h,c),l(this.h,2,f,p),l(this.h,4,m,v),l(this.h,6,b,C),l(this.h,8,k,R),l(this.h,10,P,I),l(this.h,12,O,M),l(this.h,14,D,B)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},37038:(t,e,i)=>{"use strict";var r=i(26436).rotr32;function n(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}function o(t,e,i){return t^e^i}e.ft_1=function(t,e,i,r){return 0===t?n(e,i,r):1===t||3===t?o(e,i,r):2===t?s(e,i,r):void 0},e.ch32=n,e.maj32=s,e.p32=o,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},26436:(t,e,i)=>{"use strict";var r=i(79746),n=i(35717);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=n,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?i[r++]=o:o<2048?(i[r++]=o>>6|192,i[r++]=63&o|128):s(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),i[r++]=o>>18|240,i[r++]=o>>12&63|128,i[r++]=o>>6&63|128,i[r++]=63&o|128):(i[r++]=o>>12|224,i[r++]=o>>6&63|128,i[r++]=63&o|128)}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=a(t[i].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=o(n)),i+=h(n.toString(16))}return i},e.zero2=a,e.zero8=h,e.join32=function(t,e,i,n){var s=i-e;r(s%4==0);for(var o=new Array(s/4),a=0,h=e;a<o.length;a++,h+=4){var c;c="big"===n?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],o[a]=c>>>0}return o},e.split32=function(t,e){for(var i=new Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var s=t[r];"big"===e?(i[n]=s>>>24,i[n+1]=s>>>16&255,i[n+2]=s>>>8&255,i[n+3]=255&s):(i[n+3]=s>>>24,i[n+2]=s>>>16&255,i[n+1]=s>>>8&255,i[n]=255&s)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},e.sum32_5=function(t,e,i,r,n){return t+e+i+r+n>>>0},e.sum64=function(t,e,i,r){var n=t[e],s=r+t[e+1]>>>0,o=(s<r?1:0)+i+n;t[e]=o>>>0,t[e+1]=s},e.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,r){return e+r>>>0},e.sum64_4_hi=function(t,e,i,r,n,s,o,a){var h=0,c=e;return h+=(c=c+r>>>0)<e?1:0,h+=(c=c+s>>>0)<s?1:0,t+i+n+o+(h+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,i,r,n,s,o,a){return e+r+s+a>>>0},e.sum64_5_hi=function(t,e,i,r,n,s,o,a,h,c){var l=0,u=e;return l+=(u=u+r>>>0)<e?1:0,l+=(u=u+s>>>0)<s?1:0,l+=(u=u+a>>>0)<a?1:0,t+i+n+o+h+(l+=(u=u+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,i,r,n,s,o,a,h,c){return e+r+s+a+c>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},70248:t=>{t.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,i=Object.create(null),r=Object.create(null);function n(n,s){i[n]=s,++e>=t&&(e=0,r=i,i=Object.create(null))}return{has:function(t){return void 0!==i[t]||void 0!==r[t]},remove:function(t){void 0!==i[t]&&(i[t]=void 0),void 0!==r[t]&&(r[t]=void 0)},get:function(t){var e=i[t];return void 0!==e?e:void 0!==(e=r[t])?(n(t,e),e):void 0},set:function(t,e){void 0!==i[t]?i[t]=e:n(t,e)},clear:function(){i=Object.create(null),r=Object.create(null)}}}},2156:(t,e,i)=>{"use strict";var r=i(33715),n=i(34504),s=i(79746);function o(t){if(!(this instanceof o))return new o(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=n.toArray(t.entropy,t.entropyEnc||"hex"),i=n.toArray(t.nonce,t.nonceEnc||"hex"),r=n.toArray(t.pers,t.persEnc||"hex");s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,r)}t.exports=o,o.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=n.toArray(t,e),i=n.toArray(i,r),s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},o.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=n.toArray(i,r||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,t);return this._update(i),this._reseed++,n.encode(o,e)}},80645:(t,e)=>{e.read=function(t,e,i,r,n){var s,o,a=8*n-r-1,h=(1<<a)-1,c=h>>1,l=-7,u=i?n-1:0,d=i?-1:1,f=t[e+u];for(u+=d,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+u],u+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+u],u+=d,l-=8);if(0===s)s=1-c;else{if(s===h)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var o,a,h,c=8*s-n-1,l=(1<<c)-1,u=l>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=l?(a=0,o=l):o+u>=1?(a=(e*h-1)*Math.pow(2,n),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;t[i+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;t[i+f]=255&o,f+=p,o/=256,c-=8);t[i+f-p]|=128*g}},95602:t=>{"use strict";t.exports=(t,e=1,i)=>{if(i={indent:" ",includeEmptyLines:!1,...i},"string"!=typeof t)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if("number"!=typeof e)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if("string"!=typeof i.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof i.indent}\``);if(0===e)return t;const r=i.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(r,i.indent.repeat(e))}},35717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},91843:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.v6=e.AddressError=e.Address6=e.Address4=void 0;var o=i(62507);Object.defineProperty(e,"Address4",{enumerable:!0,get:function(){return o.Address4}});var a=i(76862);Object.defineProperty(e,"Address6",{enumerable:!0,get:function(){return a.Address6}});var h=i(64762);Object.defineProperty(e,"AddressError",{enumerable:!0,get:function(){return h.AddressError}});var c=s(i(16454));e.v6={helpers:c}},64762:function(t,e){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AddressError=void 0;var n=function(t){function e(e,i){var r=t.call(this,e)||this;return r.name="AddressError",null!==i&&(r.parseMessage=i),r}return r(e,t),e}(Error);e.AddressError=n},72029:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCorrect=e.isInSubnet=void 0,e.isInSubnet=function(t){return!(this.subnetMask<t.subnetMask)&&this.mask(t.subnetMask)===t.mask()},e.isCorrect=function(t){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===t&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}},62507:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Address4=void 0;var o=s(i(72029)),a=s(i(37802)),h=i(64762),c=i(3799),l=i(8975),u=function(){function t(t){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=o.isCorrect(a.BITS),this.isInSubnet=o.isInSubnet,this.address=t;var e=a.RE_SUBNET_STRING.exec(t);if(e){if(this.parsedSubnet=e[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>a.BITS)throw new h.AddressError("Invalid subnet mask.");t=t.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}return t.isValid=function(e){try{return new t(e),!0}catch(t){return!1}},t.prototype.parse=function(t){var e=t.split(".");if(!t.match(a.RE_ADDRESS))throw new h.AddressError("Invalid IPv4 address.");return e},t.prototype.correctForm=function(){return this.parsedAddress.map((function(t){return parseInt(t,10)})).join(".")},t.fromHex=function(e){var i,r=e.replace(/:/g,"").padStart(8,"0"),n=[];for(i=0;i<8;i+=2){var s=r.slice(i,i+2);n.push(parseInt(s,16))}return new t(n.join("."))},t.fromInteger=function(e){return t.fromHex(e.toString(16))},t.fromArpa=function(e){return new t(e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join("."))},t.prototype.toHex=function(){return this.parsedAddress.map((function(t){return l.sprintf("%02x",parseInt(t,10))})).join(":")},t.prototype.toArray=function(){return this.parsedAddress.map((function(t){return parseInt(t,10)}))},t.prototype.toGroup6=function(){var t,e=[];for(t=0;t<a.GROUPS;t+=2){var i=l.sprintf("%02x%02x",parseInt(this.parsedAddress[t],10),parseInt(this.parsedAddress[t+1],10));e.push(l.sprintf("%x",parseInt(i,16)))}return e.join(":")},t.prototype.bigInteger=function(){return new c.BigInteger(this.parsedAddress.map((function(t){return l.sprintf("%02x",parseInt(t,10))})).join(""),16)},t.prototype._startAddress=function(){return new c.BigInteger(this.mask()+"0".repeat(a.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new c.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new c.BigInteger(this.mask()+"1".repeat(a.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new c.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.fromBigInteger=function(e){return t.fromInteger(parseInt(e.toString(),10))},t.prototype.mask=function(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)},t.prototype.getBitsBase2=function(t,e){return this.binaryZeroPad().slice(t,e)},t.prototype.reverseForm=function(t){t||(t={});var e=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?e:l.sprintf("%s.in-addr.arpa.",e)},t.prototype.isMulticast=function(){return this.isInSubnet(new t("224.0.0.0/4"))},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(a.BITS,"0")},t.prototype.groupForV6=function(){var t=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,l.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))},t}();e.Address4=u},76862:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__spreadArray||function(t,e){for(var i=0,r=e.length,n=t.length;i<r;i++,n++)t[n]=e[i];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Address6=void 0;var a=s(i(72029)),h=s(i(37802)),c=s(i(88521)),l=s(i(16454)),u=i(62507),d=i(34489),f=i(64762),p=i(3799),g=i(8975);function y(t){if(!t)throw new Error("Assertion failed.")}function m(t){return(t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function v(t){return g.sprintf("%04x",parseInt(t,16))}function b(t){return 255&t}var w=function(){function t(t,e){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=a.isInSubnet,this.isCorrect=a.isCorrect(c.BITS),this.groups=void 0===e?c.GROUPS:e,this.address=t;var i=c.RE_SUBNET_STRING.exec(t);if(i){if(this.parsedSubnet=i[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>c.BITS)throw new f.AddressError("Invalid subnet mask.");t=t.replace(c.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new f.AddressError("Invalid subnet mask.");var r=c.RE_ZONE_STRING.exec(t);r&&(this.zone=r[0],t=t.replace(c.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}return t.isValid=function(e){try{return new t(e),!0}catch(t){return!1}},t.fromBigInteger=function(e){var i,r=e.toString(16).padStart(32,"0"),n=[];for(i=0;i<c.GROUPS;i++)n.push(r.slice(4*i,4*(i+1)));return new t(n.join(":"))},t.fromURL=function(e){var i,r,n=null;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(r=c.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};i=r[1],n=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(r=c.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};i=r[1]}else i=e;return n?((n=parseInt(n,10))<0||n>65536)&&(n=null):n=null,{address:new t(i),port:n}},t.fromAddress4=function(e){var i=new u.Address4(e),r=c.BITS-(h.BITS-i.subnetMask);return new t("::ffff:"+i.correctForm()+"/"+r)},t.fromArpa=function(e){var i=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==i.length)throw new f.AddressError("Invalid 'ip6.arpa' form.");for(var r=i.split(".").reverse(),n=7;n>0;n--){var s=4*n;r.splice(s,0,":")}return new t(i=r.join(""))},t.prototype.microsoftTranscription=function(){return g.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},t.prototype.mask=function(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)},t.prototype.possibleSubnets=function(t){void 0===t&&(t=128);var e=c.BITS-this.subnetMask-Math.abs(t-c.BITS);return e<0?"0":function(t){for(var e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}(new p.BigInteger("2",10).pow(e).toString(10))},t.prototype._startAddress=function(){return new p.BigInteger(this.mask()+"0".repeat(c.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new p.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new p.BigInteger(this.mask()+"1".repeat(c.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new p.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.prototype.getScope=function(){var t=c.SCOPES[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==t&&(t="Global"),t||"Unknown"},t.prototype.getType=function(){for(var e=0,i=Object.keys(c.TYPES);e<i.length;e++){var r=i[e];if(this.isInSubnet(new t(r)))return c.TYPES[r]}return"Global unicast"},t.prototype.getBits=function(t,e){return new p.BigInteger(this.getBitsBase2(t,e),2)},t.prototype.getBitsBase2=function(t,e){return this.binaryZeroPad().slice(t,e)},t.prototype.getBitsBase16=function(t,e){var i=e-t;if(i%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,e).toString(16).padStart(i/4,"0")},t.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,c.BITS)},t.prototype.reverseForm=function(t){t||(t={});var e=Math.floor(this.subnetMask/4),i=this.canonicalForm().replace(/:/g,"").split("").slice(0,e).reverse().join(".");return e>0?t.omitSuffix?i:g.sprintf("%s.ip6.arpa.",i):t.omitSuffix?"":"ip6.arpa."},t.prototype.correctForm=function(){var t,e=[],i=0,r=[];for(t=0;t<this.parsedAddress.length;t++){var n=parseInt(this.parsedAddress[t],16);0===n&&i++,0!==n&&i>0&&(i>1&&r.push([t-i,t-1]),i=0)}i>1&&r.push([this.parsedAddress.length-i,this.parsedAddress.length-1]);var s=r.map((function(t){return t[1]-t[0]+1}));if(r.length>0){var o=s.indexOf(Math.max.apply(Math,s));e=function(t,e){var i,r=[],n=[];for(i=0;i<t.length;i++)i<e[0]?r.push(t[i]):i>e[1]&&n.push(t[i]);return r.concat(["compact"]).concat(n)}(this.parsedAddress,r[o])}else e=this.parsedAddress;for(t=0;t<e.length;t++)"compact"!==e[t]&&(e[t]=parseInt(e[t],16).toString(16));var a=e.join(":");return(a=(a=a.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(c.BITS,"0")},t.prototype.parse4in6=function(t){var e=t.split(":"),i=e.slice(-1)[0].match(h.RE_ADDRESS);if(i){this.parsedAddress4=i[0],this.address4=new u.Address4(this.parsedAddress4);for(var r=0;r<this.address4.groups;r++)if(/^0[0-9]+/.test(this.address4.parsedAddress[r]))throw new f.AddressError("IPv4 addresses can't have leading zeroes.",t.replace(h.RE_ADDRESS,this.address4.parsedAddress.map(m).join(".")));this.v4=!0,e[e.length-1]=this.address4.toGroup6(),t=e.join(":")}return t},t.prototype.parse=function(t){var e=(t=this.parse4in6(t)).match(c.RE_BAD_CHARACTERS);if(e)throw new f.AddressError(g.sprintf("Bad character%s detected in address: %s",e.length>1?"s":"",e.join("")),t.replace(c.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));var i=t.match(c.RE_BAD_ADDRESS);if(i)throw new f.AddressError(g.sprintf("Address failed regex: %s",i.join("")),t.replace(c.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));var r=[],n=t.split("::");if(2===n.length){var s=n[0].split(":"),o=n[1].split(":");1===s.length&&""===s[0]&&(s=[]),1===o.length&&""===o[0]&&(o=[]);var a=this.groups-(s.length+o.length);if(!a)throw new f.AddressError("Error parsing groups");this.elidedGroups=a,this.elisionBegin=s.length,this.elisionEnd=s.length+this.elidedGroups,r=r.concat(s);for(var h=0;h<a;h++)r.push("0");r=r.concat(o)}else{if(1!==n.length)throw new f.AddressError("Too many :: groups found");r=t.split(":"),this.elidedGroups=0}if((r=r.map((function(t){return g.sprintf("%x",parseInt(t,16))}))).length!==this.groups)throw new f.AddressError("Incorrect number of groups found");return r},t.prototype.canonicalForm=function(){return this.parsedAddress.map(v).join(":")},t.prototype.decimal=function(){return this.parsedAddress.map((function(t){return g.sprintf("%05d",parseInt(t,16))})).join(":")},t.prototype.bigInteger=function(){return new p.BigInteger(this.parsedAddress.map(v).join(""),16)},t.prototype.to4=function(){var t=this.binaryZeroPad().split("");return u.Address4.fromHex(new p.BigInteger(t.slice(96,128).join(""),2).toString(16))},t.prototype.to4in6=function(){var e=this.to4(),i=new t(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),r="";return/:$/.test(i)||(r=":"),i+r+e.address},t.prototype.inspectTeredo=function(){var t=this.getBitsBase16(0,32),e=this.getBits(80,96).xor(new p.BigInteger("ffff",16)).toString(),i=u.Address4.fromHex(this.getBitsBase16(32,64)),r=u.Address4.fromHex(this.getBits(96,128).xor(new p.BigInteger("ffffffff",16)).toString(16)),n=this.getBits(64,80),s=this.getBitsBase2(64,80),o=n.testBit(15),a=n.testBit(14),h=n.testBit(8),c=n.testBit(9),l=new p.BigInteger(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:g.sprintf("%s:%s",t.slice(0,4),t.slice(4,8)),server4:i.address,client4:r.address,flags:s,coneNat:o,microsoft:{reserved:a,universalLocal:c,groupIndividual:h,nonce:l},udpPort:e}},t.prototype.inspect6to4=function(){var t=this.getBitsBase16(0,16),e=u.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:g.sprintf("%s",t.slice(0,4)),gateway:e.address}},t.prototype.to6to4=function(){return this.is4()?new t(["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":")):null},t.prototype.toByteArray=function(){var t=this.bigInteger().toByteArray();return 17===t.length&&0===t[0]?t.slice(1):t},t.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(b)},t.fromByteArray=function(t){return this.fromUnsignedByteArray(t.map(b))},t.fromUnsignedByteArray=function(e){for(var i=new p.BigInteger("256",10),r=new p.BigInteger("0",10),n=new p.BigInteger("1",10),s=e.length-1;s>=0;s--)r=r.add(n.multiply(new p.BigInteger(e[s].toString(10),10))),n=n.multiply(i);return t.fromBigInteger(r)},t.prototype.isCanonical=function(){return this.addressMinusSuffix===this.canonicalForm()},t.prototype.isLinkLocal=function(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)},t.prototype.isMulticast=function(){return"Multicast"===this.getType()},t.prototype.is4=function(){return this.v4},t.prototype.isTeredo=function(){return this.isInSubnet(new t("2001::/32"))},t.prototype.is6to4=function(){return this.isInSubnet(new t("2002::/16"))},t.prototype.isLoopback=function(){return"Loopback"===this.getType()},t.prototype.href=function(t){return t=void 0===t?"":g.sprintf(":%s",t),g.sprintf("http://[%s]%s/",this.correctForm(),t)},t.prototype.link=function(t){t||(t={}),void 0===t.className&&(t.className=""),void 0===t.prefix&&(t.prefix="/#address="),void 0===t.v4&&(t.v4=!1);var e=this.correctForm;return t.v4&&(e=this.to4in6),t.className?g.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,e.call(this),t.className):g.sprintf('<a href="%1$s%2$s">%2$s</a>',t.prefix,e.call(this))},t.prototype.group=function(){if(0===this.elidedGroups)return l.simpleGroup(this.address).join(":");y("number"==typeof this.elidedGroups),y("number"==typeof this.elisionBegin);var t=[],e=this.address.split("::"),i=e[0],r=e[1];i.length?t.push.apply(t,l.simpleGroup(i)):t.push("");for(var n=["hover-group"],s=this.elisionBegin;s<this.elisionBegin+this.elidedGroups;s++)n.push(g.sprintf("group-%d",s));return t.push(g.sprintf('<span class="%s"></span>',n.join(" "))),r.length?t.push.apply(t,l.simpleGroup(r,this.elisionEnd)):t.push(""),this.is4()&&(y(this.address4 instanceof u.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")},t.prototype.regularExpressionString=function(e){void 0===e&&(e=!1);var i=[],r=new t(this.correctForm());if(0===r.elidedGroups)i.push(d.simpleRegularExpression(r.parsedAddress));else if(r.elidedGroups===c.GROUPS)i.push(d.possibleElisions(c.GROUPS));else{var n=r.address.split("::");n[0].length&&i.push(d.simpleRegularExpression(n[0].split(":"))),y("number"==typeof r.elidedGroups),i.push(d.possibleElisions(r.elidedGroups,0!==n[0].length,0!==n[1].length)),n[1].length&&i.push(d.simpleRegularExpression(n[1].split(":"))),i=[i.join(":")]}return e||(i=o(o(["(?=^|",d.ADDRESS_BOUNDARY,"|[^\\w\\:])("],i),[")(?=[^\\w\\:]|",d.ADDRESS_BOUNDARY,"|$)"])),i.join("")},t.prototype.regularExpression=function(t){return void 0===t&&(t=!1),new RegExp(this.regularExpressionString(t),"i")},t}();e.Address6=w},37802:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_SUBNET_STRING=e.RE_ADDRESS=e.GROUPS=e.BITS=void 0,e.BITS=32,e.GROUPS=4,e.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,e.RE_SUBNET_STRING=/\/\d{1,2}$/},88521:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_URL_WITH_PORT=e.RE_URL=e.RE_ZONE_STRING=e.RE_SUBNET_STRING=e.RE_BAD_ADDRESS=e.RE_BAD_CHARACTERS=e.TYPES=e.SCOPES=e.GROUPS=e.BITS=void 0,e.BITS=128,e.GROUPS=8,e.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},e.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},e.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,e.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,e.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,e.RE_ZONE_STRING=/%.*$/,e.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),e.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)},16454:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleGroup=e.spanLeadingZeroes=e.spanAll=e.spanAllZeroes=void 0;var r=i(8975);function n(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function s(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}e.spanAllZeroes=n,e.spanAll=function(t,e){return void 0===e&&(e=0),t.split("").map((function(t,i){return r.sprintf('<span class="digit value-%s position-%d">%s</span>',t,i+e,n(t))})).join("")},e.spanLeadingZeroes=function(t){return t.split(":").map((function(t){return s(t)})).join(":")},e.simpleGroup=function(t,e){return void 0===e&&(e=0),t.split(":").map((function(t,i){return/group-v4/.test(t)?t:r.sprintf('<span class="hover-group group-%d">%s</span>',i+e,s(t))}))}},34489:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.possibleElisions=e.simpleRegularExpression=e.ADDRESS_BOUNDARY=e.padGroup=e.groupPossibilities=void 0;var o=s(i(88521)),a=i(8975);function h(t){return a.sprintf("(%s)",t.join("|"))}function c(t){return t.length<4?a.sprintf("0{0,%d}%s",4-t.length,t):t}e.groupPossibilities=h,e.padGroup=c,e.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]",e.simpleRegularExpression=function(t){var e=[];t.forEach((function(t,i){0===parseInt(t,16)&&e.push(i)}));var i=e.map((function(e){return t.map((function(t,i){if(i===e){var r=0===i||i===o.GROUPS-1?":":"";return h([c(t),r])}return c(t)})).join(":")}));return i.push(t.map(c).join(":")),h(i)},e.possibleElisions=function(t,e,i){var r=e?"":":",n=i?"":":",s=[];e||i||s.push("::"),e&&i&&s.push(""),(i&&!e||!i&&e)&&s.push(":"),s.push(a.sprintf("%s(:0{1,4}){1,%d}",r,t-1)),s.push(a.sprintf("(0{1,4}:){1,%d}%s",t-1,n)),s.push(a.sprintf("(0{1,4}:){%d}0{1,4}",t-1));for(var o=1;o<t-1;o++)for(var c=1;c<t-o;c++)s.push(a.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",c,t-c-o-1));return h(s)}},3799:function(t,e){(function(){var e;function i(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(){return new i(null)}var n="undefined"!=typeof navigator;n&&"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(t,e,i,r,n,s){for(var o=32767&e,a=e>>15;--s>=0;){var h=32767&this[t],c=this[t++]>>15,l=a*h+c*o;n=((h=o*h+((32767&l)<<15)+i[r]+(1073741823&n))>>>30)+(l>>>15)+a*c+(n>>>30),i[r++]=1073741823&h}return n},e=30):n&&"Netscape"!=navigator.appName?(i.prototype.am=function(t,e,i,r,n,s){for(;--s>=0;){var o=e*this[t++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n},e=26):(i.prototype.am=function(t,e,i,r,n,s){for(var o=16383&e,a=e>>14;--s>=0;){var h=16383&this[t],c=this[t++]>>14,l=a*h+c*o;n=((h=o*h+((16383&l)<<14)+i[r]+n)>>28)+(l>>14)+a*c,i[r++]=268435455&h}return n},e=28),i.prototype.DB=e,i.prototype.DM=(1<<e)-1,i.prototype.DV=1<<e,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-e,i.prototype.F2=2*e-52;var s,o,a=new Array;for(s="0".charCodeAt(0),o=0;o<=9;++o)a[s++]=o;for(s="a".charCodeAt(0),o=10;o<36;++o)a[s++]=o;for(s="A".charCodeAt(0),o=10;o<36;++o)a[s++]=o;function h(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function c(t,e){var i=a[t.charCodeAt(e)];return null==i?-1:i}function l(t){var e=r();return e.fromInt(t),e}function u(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function d(t){this.m=t}function f(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function p(t,e){return t&e}function g(t,e){return t|e}function y(t,e){return t^e}function m(t,e){return t&~e}function v(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function b(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function w(){}function _(t){return t}function x(t){this.r2=r(),this.q3=r(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}d.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},d.prototype.revert=function(t){return t},d.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},d.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},f.prototype.convert=function(t){var e=r();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e},f.prototype.revert=function(t){var e=r();return t.copyTo(e),this.reduce(e),e},f.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},f.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},f.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},i.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},i.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},i.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,s=!1,o=0;--n>=0;){var a=8==r?255&t[n]:c(t,n);a<0?"-"==t.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},i.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},i.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},i.prototype.lShiftTo=function(t,e){var i,r=t%this.DB,n=this.DB-r,s=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>n|a,a=(this[i]&s)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},i.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,n=this.DB-r,s=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&s)<<n,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&s)<<n),e.t=this.t-i,e.clamp()}},i.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()},i.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),s=r.t;for(e.t=s+n.t;--s>=0;)e[s]=0;for(s=0;s<n.t;++s)e[s+r.t]=r.am(0,n[s],e,s,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)},i.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},i.prototype.divRemTo=function(t,e,n){var s=t.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=r());var a=r(),h=this.s,c=t.s,l=this.DB-u(s[s.t-1]);l>0?(s.lShiftTo(l,a),o.lShiftTo(l,n)):(s.copyTo(a),o.copyTo(n));var d=a.t,f=a[d-1];if(0!=f){var p=f*(1<<this.F1)+(d>1?a[d-2]>>this.F2:0),g=this.FV/p,y=(1<<this.F1)/p,m=1<<this.F2,v=n.t,b=v-d,w=null==e?r():e;for(a.dlShiftTo(b,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),i.ONE.dlShiftTo(d,w),w.subTo(a,a);a.t<d;)a[a.t++]=0;for(;--b>=0;){var _=n[--v]==f?this.DM:Math.floor(n[v]*g+(n[v-1]+m)*y);if((n[v]+=a.am(0,_,n,b,0,d))<_)for(a.dlShiftTo(b,w),n.subTo(w,n);n[v]<--_;)n.subTo(w,n)}null!=e&&(n.drShiftTo(d,e),h!=c&&i.ZERO.subTo(e,e)),n.t=d,n.clamp(),l>0&&n.rShiftTo(l,n),h<0&&i.ZERO.subTo(n,n)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},i.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var n=r(),s=r(),o=e.convert(this),a=u(t)-1;for(o.copyTo(n);--a>=0;)if(e.sqrTo(n,s),(t&1<<a)>0)e.mulTo(s,o,n);else{var h=n;n=s,s=h}return e.revert(n)},i.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(i=this[o]>>a)>0&&(n=!0,s=h(i));o>=0;)a<e?(i=(this[o]&(1<<a)-1)<<e-a,i|=this[--o]>>(a+=this.DB-e)):(i=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),i>0&&(n=!0),n&&(s+=h(i));return n?s:"0"},i.prototype.negate=function(){var t=r();return i.ZERO.subTo(this,t),t},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(t){var e=r();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e},i.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new d(e):new f(e),this.exp(t,i)},i.ZERO=l(0),i.ONE=l(1),w.prototype.convert=_,w.prototype.revert=_,w.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},w.prototype.sqrTo=function(t,e){t.squareTo(e)},x.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e},x.prototype.revert=function(t){return t},x.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},x.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var E,S,T,A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/A[A.length-1];function k(){var t;t=(new Date).getTime(),S[T++]^=255&t,S[T++]^=t>>8&255,S[T++]^=t>>16&255,S[T++]^=t>>24&255,T>=B&&(T-=B)}if(i.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},i.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=l(i),s=r(),o=r(),a="";for(this.divRemTo(n,s,o);s.signum()>0;)a=(i+o.intValue()).toString(t).substr(1)+a,s.divRemTo(n,s,o);return o.intValue().toString(t)+a},i.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),s=!1,o=0,a=0,h=0;h<t.length;++h){var l=c(t,h);l<0?"-"==t.charAt(h)&&0==this.signum()&&(s=!0):(a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),s&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var n=new Array,s=7&t;n.length=1+(t>>3),e.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(t,e,i){var r,n,s=Math.min(t.t,this.t);for(r=0;r<s;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=s;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=s;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},i.prototype.changeBit=function(t,e){var r=i.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},i.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()},i.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},i.prototype.multiplyLowerTo=function(t,e,i){var r,n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()},i.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},i.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i},i.prototype.millerRabin=function(t){var e=this.subtract(i.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var s=e.shiftRight(n);(t=t+1>>1)>A.length&&(t=A.length);for(var o=r(),a=0;a<t;++a){o.fromInt(A[Math.floor(Math.random()*A.length)]);var h=o.modPow(s,this);if(0!=h.compareTo(i.ONE)&&0!=h.compareTo(e)){for(var c=1;c++<n&&0!=h.compareTo(e);)if(0==(h=h.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=h.compareTo(e))return!1}}return!0},i.prototype.clone=function(){var t=r();return this.copyTo(t),t},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},i.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},i.prototype.equals=function(t){return 0==this.compareTo(t)},i.prototype.min=function(t){return this.compareTo(t)<0?this:t},i.prototype.max=function(t){return this.compareTo(t)>0?this:t},i.prototype.and=function(t){var e=r();return this.bitwiseTo(t,p,e),e},i.prototype.or=function(t){var e=r();return this.bitwiseTo(t,g,e),e},i.prototype.xor=function(t){var e=r();return this.bitwiseTo(t,y,e),e},i.prototype.andNot=function(t){var e=r();return this.bitwiseTo(t,m,e),e},i.prototype.not=function(){for(var t=r(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},i.prototype.shiftLeft=function(t){var e=r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},i.prototype.shiftRight=function(t){var e=r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},i.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+v(this[t]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=b(this[i]^e);return t},i.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},i.prototype.setBit=function(t){return this.changeBit(t,g)},i.prototype.clearBit=function(t){return this.changeBit(t,m)},i.prototype.flipBit=function(t){return this.changeBit(t,y)},i.prototype.add=function(t){var e=r();return this.addTo(t,e),e},i.prototype.subtract=function(t){var e=r();return this.subTo(t,e),e},i.prototype.multiply=function(t){var e=r();return this.multiplyTo(t,e),e},i.prototype.divide=function(t){var e=r();return this.divRemTo(t,e,null),e},i.prototype.remainder=function(t){var e=r();return this.divRemTo(t,null,e),e},i.prototype.divideAndRemainder=function(t){var e=r(),i=r();return this.divRemTo(t,e,i),new Array(e,i)},i.prototype.modPow=function(t,e){var i,n,s=t.bitLength(),o=l(1);if(s<=0)return o;i=s<18?1:s<48?3:s<144?4:s<768?5:6,n=s<8?new d(e):e.isEven()?new x(e):new f(e);var a=new Array,h=3,c=i-1,p=(1<<i)-1;if(a[1]=n.convert(this),i>1){var g=r();for(n.sqrTo(a[1],g);h<=p;)a[h]=r(),n.mulTo(g,a[h-2],a[h]),h+=2}var y,m,v=t.t-1,b=!0,w=r();for(s=u(t[v])-1;v>=0;){for(s>=c?y=t[v]>>s-c&p:(y=(t[v]&(1<<s+1)-1)<<c-s,v>0&&(y|=t[v-1]>>this.DB+s-c)),h=i;0==(1&y);)y>>=1,--h;if((s-=h)<0&&(s+=this.DB,--v),b)a[y].copyTo(o),b=!1;else{for(;h>1;)n.sqrTo(o,w),n.sqrTo(w,o),h-=2;h>0?n.sqrTo(o,w):(m=o,o=w,w=m),n.mulTo(w,a[y],o)}for(;v>=0&&0==(t[v]&1<<s);)n.sqrTo(o,w),m=o,o=w,w=m,--s<0&&(s=this.DB-1,--v)}return n.revert(o)},i.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;for(var r=t.clone(),n=this.clone(),s=l(1),o=l(0),a=l(0),h=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&h.isEven()||(a.addTo(this,a),h.subTo(t,h)),a.rShiftTo(1,a)):h.isEven()||h.subTo(t,h),h.rShiftTo(1,h);r.compareTo(n)>=0?(r.subTo(n,r),e&&s.subTo(a,s),o.subTo(h,o)):(n.subTo(r,n),e&&a.subTo(s,a),h.subTo(o,h))}return 0!=n.compareTo(i.ONE)?i.ZERO:h.compareTo(t)>=0?h.subtract(t):h.signum()<0?(h.addTo(t,h),h.signum()<0?h.add(t):h):h},i.prototype.pow=function(t){return this.exp(t,new w)},i.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},i.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=A[A.length-1]){for(e=0;e<A.length;++e)if(i[0]==A[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<A.length;){for(var r=A[e],n=e+1;n<A.length&&r<C;)r*=A[n++];for(r=i.modInt(r);e<n;)if(r%A[e++]==0)return!1}return i.millerRabin(t)},i.prototype.square=function(){var t=r();return this.squareTo(t),t},i.prototype.Barrett=x,null==S){var R;if(S=new Array,T=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var P=new Uint8Array(32);for(window.crypto.getRandomValues(P),R=0;R<32;++R)S[T++]=P[R]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var I=window.crypto.random(32);for(R=0;R<I.length;++R)S[T++]=255&I.charCodeAt(R)}for(;T<B;)R=Math.floor(65536*Math.random()),S[T++]=R>>>8,S[T++]=255&R;T=0,k()}function O(){if(null==E){for(k(),(E=new D).init(S),T=0;T<S.length;++T)S[T]=0;T=0}return E.next()}function M(){}function D(){this.i=0,this.j=0,this.S=new Array}M.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=O()},D.prototype.init=function(t){var e,i,r;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0},D.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var B=256;t.exports={default:i,BigInteger:i,SecureRandom:M}}).call(this)},1476:t=>{"use strict";const e="[a-fA-F\\d:]",i=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${e})|(?<=${e})(?=\\s|$))`:"",r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",s=`\n(?:\n(?:${n}:){7}(?:${n}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${n}:){6}(?:${r}|:${n}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${n}:){5}(?::${r}|(?::${n}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${n}:){4}(?:(?::${n}){0,1}:${r}|(?::${n}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${n}:){3}(?:(?::${n}){0,2}:${r}|(?::${n}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${n}:){2}(?:(?::${n}){0,3}:${r}|(?::${n}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${n}:){1}(?:(?::${n}){0,4}:${r}|(?::${n}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${n}){0,5}:${r}|(?::${n}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp(`(?:^${r}$)|(?:^${s}$)`),a=new RegExp(`^${r}$`),h=new RegExp(`^${s}$`),c=t=>t&&t.exact?o:new RegExp(`(?:${i(t)}${r}${i(t)})|(?:${i(t)}${s}${i(t)})`,"g");c.v4=t=>t&&t.exact?a:new RegExp(`${i(t)}${r}${i(t)}`,"g"),c.v6=t=>t&&t.exact?h:new RegExp(`${i(t)}${s}${i(t)}`,"g"),t.exports=c},56512:function(t){!function(e){"use strict";const i="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${i}\\.${i}\\.${i}\\.${i}$`,"i"),threeOctet:new RegExp(`^${i}\\.${i}\\.${i}$`,"i"),twoOctet:new RegExp(`^${i}\\.${i}$`,"i"),longValue:new RegExp(`^${i}$`,"i")},n=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",h={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${i}\\.${i}\\.${i}\\.${i}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${i}\\.${i}\\.${i}\\.${i}(${o})?$`,"i")};function c(t,e){if(t.indexOf("::")!==t.lastIndexOf("::"))return null;let i,r,n=0,s=-1,o=(t.match(h.zoneIndex)||[])[0];for(o&&(o=o.substring(1),t=t.replace(/%.+$/,""));(s=t.indexOf(":",s+1))>=0;)n++;if("::"===t.substr(0,2)&&n--,"::"===t.substr(-2,2)&&n--,n>e)return null;for(r=e-n,i=":";r--;)i+="0:";return":"===(t=t.replace("::",i))[0]&&(t=t.slice(1)),":"===t[t.length-1]&&(t=t.slice(0,-1)),{parts:e=function(){const e=t.split(":"),i=[];for(let t=0;t<e.length;t++)i.push(parseInt(e[t],16));return i}(),zoneId:o}}function l(t,e,i,r){if(t.length!==e.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let n,s=0;for(;r>0;){if(n=i-r,n<0&&(n=0),t[s]>>n!=e[s]>>n)return!1;r-=i,s+=1}return!0}function u(t){if(s.test(t))return parseInt(t,16);if("0"===t[0]&&!isNaN(parseInt(t[1],10))){if(n.test(t))return parseInt(t,8);throw new Error(`ipaddr: cannot parse ${t} as octal`)}return parseInt(t,10)}function d(t,e){for(;t.length<e;)t=`0${t}`;return t}const f={};f.IPv4=function(){function t(t){if(4!==t.length)throw new Error("ipaddr: ipv4 octet count should be 4");let e,i;for(e=0;e<t.length;e++)if(i=t[e],!(0<=i&&i<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=t}return t.prototype.SpecialRanges={unspecified:[[new t([0,0,0,0]),8]],broadcast:[[new t([255,255,255,255]),32]],multicast:[[new t([224,0,0,0]),4]],linkLocal:[[new t([169,254,0,0]),16]],loopback:[[new t([127,0,0,0]),8]],carrierGradeNat:[[new t([100,64,0,0]),10]],private:[[new t([10,0,0,0]),8],[new t([172,16,0,0]),12],[new t([192,168,0,0]),16]],reserved:[[new t([192,0,0,0]),24],[new t([192,0,2,0]),24],[new t([192,88,99,0]),24],[new t([198,51,100,0]),24],[new t([203,0,113,0]),24],[new t([240,0,0,0]),4]]},t.prototype.kind=function(){return"ipv4"},t.prototype.match=function(t,e){let i;if(void 0===e&&(i=t,t=i[0],e=i[1]),"ipv4"!==t.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,t.octets,8,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const i={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let r,n,s;for(r=3;r>=0;r-=1){if(n=this.octets[r],!(n in i))return null;if(s=i[n],e&&0!==s)return null;8!==s&&(e=!0),t+=s}return 32-t},t.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){return this.octets.slice(0)},t.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse(`::ffff:${this.toString()}`)},t.prototype.toNormalizedString=function(){return this.toString()},t.prototype.toString=function(){return this.octets.join(".")},t}(),f.IPv4.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),i=e[0].toByteArray(),r=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),n=[];let s=0;for(;s<4;)n.push(parseInt(i[s],10)|255^parseInt(r[s],10)),s++;return new this(n)}catch(t){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(t){return null!==this.parser(t)},f.IPv4.isValid=function(t){try{return new this(this.parser(t)),!0}catch(t){return!1}},f.IPv4.isValidFourPartDecimal=function(t){return!(!f.IPv4.isValid(t)||!t.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(t){let e,i,r,n,s;try{for(e=this.parseCIDR(t),r=e[0].toByteArray(),s=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),n=[],i=0;i<4;)n.push(parseInt(r[i],10)&parseInt(s[i],10)),i++;return new this(n)}catch(t){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(t){const e=this.parser(t);if(null===e)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(e)},f.IPv4.parseCIDR=function(t){let e;if(e=t.match(/^(.+)\/(\d+)$/)){const t=parseInt(e[2]);if(t>=0&&t<=32){const i=[this.parse(e[1]),t];return Object.defineProperty(i,"toString",{value:function(){return this.join("/")}}),i}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(t){let e,i,n;if(e=t.match(r.fourOctet))return function(){const t=e.slice(1,6),r=[];for(let e=0;e<t.length;e++)i=t[e],r.push(u(i));return r}();if(e=t.match(r.longValue)){if(n=u(e[1]),n>4294967295||n<0)throw new Error("ipaddr: address outside defined range");return function(){const t=[];let e;for(e=0;e<=24;e+=8)t.push(n>>e&255);return t}().reverse()}return(e=t.match(r.twoOctet))?function(){const t=e.slice(1,4),i=[];if(n=u(t[1]),n>16777215||n<0)throw new Error("ipaddr: address outside defined range");return i.push(u(t[0])),i.push(n>>16&255),i.push(n>>8&255),i.push(255&n),i}():(e=t.match(r.threeOctet))?function(){const t=e.slice(1,5),i=[];if(n=u(t[2]),n>65535||n<0)throw new Error("ipaddr: address outside defined range");return i.push(u(t[0])),i.push(u(t[1])),i.push(n>>8&255),i.push(255&n),i}():null},f.IPv4.subnetMaskFromPrefixLength=function(t){if((t=parseInt(t))<0||t>32)throw new Error("ipaddr: invalid IPv4 prefix length");const e=[0,0,0,0];let i=0;const r=Math.floor(t/8);for(;i<r;)e[i]=255,i++;return r<4&&(e[r]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},f.IPv6=function(){function t(t,e){let i,r;if(16===t.length)for(this.parts=[],i=0;i<=14;i+=2)this.parts.push(t[i]<<8|t[i+1]);else{if(8!==t.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=t}for(i=0;i<this.parts.length;i++)if(r=this.parts[i],!(0<=r&&r<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");e&&(this.zoneId=e)}return t.prototype.SpecialRanges={unspecified:[new t([0,0,0,0,0,0,0,0]),128],linkLocal:[new t([65152,0,0,0,0,0,0,0]),10],multicast:[new t([65280,0,0,0,0,0,0,0]),8],loopback:[new t([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new t([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new t([0,0,0,0,0,65535,0,0]),96],rfc6145:[new t([0,0,0,0,65535,0,0,0]),96],rfc6052:[new t([100,65435,0,0,0,0,0,0]),96],"6to4":[new t([8194,0,0,0,0,0,0,0]),16],teredo:[new t([8193,0,0,0,0,0,0,0]),32],reserved:[[new t([8193,3512,0,0,0,0,0,0]),32]]},t.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},t.prototype.kind=function(){return"ipv6"},t.prototype.match=function(t,e){let i;if(void 0===e&&(i=t,t=i[0],e=i[1]),"ipv6"!==t.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,t.parts,16,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const i={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let r,n;for(let s=7;s>=0;s-=1){if(r=this.parts[s],!(r in i))return null;if(n=i[r],e&&0!==n)return null;16!==n&&(e=!0),t+=n}return 128-t},t.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){let t;const e=[],i=this.parts;for(let r=0;r<i.length;r++)t=i[r],e.push(t>>8),e.push(255&t);return e},t.prototype.toFixedLengthString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(d(this.parts[e].toString(16),4));return t}.call(this).join(":");let e="";return this.zoneId&&(e=`%${this.zoneId}`),t+e},t.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const t=this.parts.slice(-2),e=t[0],i=t[1];return new f.IPv4([e>>8,255&e,i>>8,255&i])},t.prototype.toNormalizedString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(this.parts[e].toString(16));return t}.call(this).join(":");let e="";return this.zoneId&&(e=`%${this.zoneId}`),t+e},t.prototype.toRFC5952String=function(){const t=/((^|:)(0(:|$)){2,})/g,e=this.toNormalizedString();let i,r=0,n=-1;for(;i=t.exec(e);)i[0].length>n&&(r=i.index,n=i[0].length);return n<0?e:`${e.substring(0,r)}::${e.substring(r+n)}`},t.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},t}(),f.IPv6.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),i=e[0].toByteArray(),r=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),n=[];let s=0;for(;s<16;)n.push(parseInt(i[s],10)|255^parseInt(r[s],10)),s++;return new this(n)}catch(t){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${t})`)}},f.IPv6.isIPv6=function(t){return null!==this.parser(t)},f.IPv6.isValid=function(t){if("string"==typeof t&&-1===t.indexOf(":"))return!1;try{const e=this.parser(t);return new this(e.parts,e.zoneId),!0}catch(t){return!1}},f.IPv6.networkAddressFromCIDR=function(t){let e,i,r,n,s;try{for(e=this.parseCIDR(t),r=e[0].toByteArray(),s=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),n=[],i=0;i<16;)n.push(parseInt(r[i],10)&parseInt(s[i],10)),i++;return new this(n)}catch(t){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${t})`)}},f.IPv6.parse=function(t){const e=this.parser(t);if(null===e.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(e.parts,e.zoneId)},f.IPv6.parseCIDR=function(t){let e,i,r;if((i=t.match(/^(.+)\/(\d+)$/))&&(e=parseInt(i[2]),e>=0&&e<=128))return r=[this.parse(i[1]),e],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(t){let e,i,r,n,s,o;if(r=t.match(h.deprecatedTransitional))return this.parser(`::ffff:${r[1]}`);if(h.native.test(t))return c(t,8);if((r=t.match(h.transitional))&&(o=r[6]||"",e=c(r[1].slice(0,-1)+o,6),e.parts)){for(s=[parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])],i=0;i<s.length;i++)if(n=s[i],!(0<=n&&n<=255))return null;return e.parts.push(s[0]<<8|s[1]),e.parts.push(s[2]<<8|s[3]),{parts:e.parts,zoneId:e.zoneId}}return null},f.IPv6.subnetMaskFromPrefixLength=function(t){if((t=parseInt(t))<0||t>128)throw new Error("ipaddr: invalid IPv6 prefix length");const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let i=0;const r=Math.floor(t/8);for(;i<r;)e[i]=255,i++;return r<16&&(e[r]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},f.fromByteArray=function(t){const e=t.length;if(4===e)return new f.IPv4(t);if(16===e)return new f.IPv6(t);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(t){return f.IPv6.isValid(t)||f.IPv4.isValid(t)},f.parse=function(t){if(f.IPv6.isValid(t))return f.IPv6.parse(t);if(f.IPv4.isValid(t))return f.IPv4.parse(t);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(t){try{return f.IPv6.parseCIDR(t)}catch(e){try{return f.IPv4.parseCIDR(t)}catch(t){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(t){const e=this.parse(t);return"ipv6"===e.kind()&&e.isIPv4MappedAddress()?e.toIPv4Address():e},f.subnetMatch=function(t,e,i){let r,n,s,o;for(n in null==i&&(i="unicast"),e)if(Object.prototype.hasOwnProperty.call(e,n))for(s=e[n],!s[0]||s[0]instanceof Array||(s=[s]),r=0;r<s.length;r++)if(o=s[r],t.kind()===o[0].kind()&&t.match.apply(t,o))return n;return i},t.exports?t.exports=f:e.ipaddr=f}(this)},24137:t=>{"use strict";t.exports=function(t,e){return"string"==typeof t?o(t):"number"==typeof t?s(t,e):null},t.exports.format=s,t.exports.parse=o;var e=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},n=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(t,n){if(!Number.isFinite(t))return null;var s=Math.abs(t),o=n&&n.thousandsSeparator||"",a=n&&n.unitSeparator||"",h=n&&void 0!==n.decimalPlaces?n.decimalPlaces:2,c=Boolean(n&&n.fixedDecimals),l=n&&n.unit||"";l&&r[l.toLowerCase()]||(l=s>=r.pb?"PB":s>=r.tb?"TB":s>=r.gb?"GB":s>=r.mb?"MB":s>=r.kb?"KB":"B");var u=(t/r[l.toLowerCase()]).toFixed(h);return c||(u=u.replace(i,"$1")),o&&(u=u.split(".").map((function(t,i){return 0===i?t.replace(e,o):t})).join(".")),u+a+l}function o(t){if("number"==typeof t&&!isNaN(t))return t;if("string"!=typeof t)return null;var e,i=n.exec(t),s="b";return i?(e=parseFloat(i[1]),s=i[4].toLowerCase()):(e=parseInt(t,10),s="b"),isNaN(e)?null:Math.floor(r[s]*e)}},106:(t,e,i)=>{"use strict";const r=i(59134),n="object"==typeof window&&"object"==typeof document&&9===document.nodeType,s=r(),o=n&&!s,a=s&&!n,h=s&&n,c=void 0!==globalThis.process&&void 0!==globalThis.process.release&&"node"===globalThis.process.release.name&&!s,l="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,u=void 0!==globalThis.process&&void 0!==globalThis.process.env&&"test"===globalThis.process.env.NODE_ENV,d="undefined"!=typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:u,isElectron:s,isElectronMain:a,isElectronRenderer:h,isNode:c,isBrowser:o,isWebWorker:l,isEnvWithDom:n,isReactNative:d}},51180:(t,e,i)=>{"use strict";const{isElectronMain:r}=i(106);t.exports=i(r?88795:30700)},46953:(t,e,i)=>{"use strict";const r=i(67137);async function*n(t,e){const i=new r,n=await i.get(t,e);yield*n.iterator()}t.exports=(t,e)=>({path:decodeURIComponent(new URL(t).pathname.split("/").pop()||""),content:n(t,e)})},67137:(t,e,i)=>{"use strict";const{fetch:r,Request:n,Headers:s}=i(50730),{TimeoutError:o,HTTPError:a}=i(44171),h=i(70942).bind({ignoreUndefined:!0}),{URL:c,URLSearchParams:l}=i(17745),u=i(32044),d={throwHttpErrors:!0,credentials:"same-origin"};class f{constructor(t={}){this.opts=h(d,t)}async fetch(t,e={}){const i=h(this.opts,e),d=new s(i.headers);if("string"!=typeof t&&!(t instanceof c||t instanceof n))throw new TypeError("`resource` must be a string, URL, or Request");const f=new c(t.toString(),i.base),{searchParams:y,transformSearchParams:m,json:v}=i;y&&(f.search="function"==typeof m?m(new l(i.searchParams)):new l(i.searchParams)),v&&(i.body=JSON.stringify(i.json),d.set("content-type","application/json"));const b=new AbortController,w=u([b.signal,i.signal]),_=await((t,e,i)=>{if(void 0===e)return t;const r=Date.now(),n=()=>Date.now()-r>=e;return new Promise(((r,s)=>{const a=setTimeout((()=>{n()&&(s(new o),i.abort())}),e),h=t=>e=>{clearTimeout(a),n()?s(new o):t(e)};t.then(h(r),h(s))}))})(r(f.toString(),{...i,signal:w,timeout:void 0,headers:d}),i.timeout,b);if(!_.ok&&i.throwHttpErrors)throw i.handleError&&await i.handleError(_),new a(_);return _.iterator=function(){return g(_.body)},_.ndjson=async function*(){for await(const t of p(_.iterator()))e.transform?yield e.transform(t):yield t},_}post(t,e={}){return this.fetch(t,{...e,method:"POST"})}get(t,e={}){return this.fetch(t,{...e,method:"GET"})}put(t,e={}){return this.fetch(t,{...e,method:"PUT"})}delete(t,e={}){return this.fetch(t,{...e,method:"DELETE"})}options(t,e={}){return this.fetch(t,{...e,method:"OPTIONS"})}}const p=async function*(t){const e=new TextDecoder;let i="";for await(const r of t){i+=e.decode(r,{stream:!0});const t=i.split(/\r?\n/);for(let e=0;e<t.length-1;e++){const i=t[e].trim();i.length>0&&(yield JSON.parse(i))}i=t[t.length-1]}i+=e.decode(),i=i.trim(),0!==i.length&&(yield JSON.parse(i))},g=t=>{if(v(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:e.next.bind(e),return:i=>(t.destroy(),"function"==typeof e.return?e.return():Promise.resolve({done:!0,value:i}))})}}if(m(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:t,value:i}=await e.read();if(t)return;i&&(yield i)}}finally{e.releaseLock()}}()}if(y(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},y=t=>"object"==typeof t&&null!==t&&"function"==typeof t[Symbol.asyncIterator],m=t=>t&&"function"==typeof t.getReader,v=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");f.HTTPError=a,f.TimeoutError=o,f.streamToAsyncIterator=g,f.post=(t,e)=>new f(e).post(t,e),f.get=(t,e)=>new f(e).get(t,e),f.put=(t,e)=>new f(e).put(t,e),f.delete=(t,e)=>new f(e).delete(t,e),f.options=(t,e)=>new f(e).options(t,e),t.exports=f},44171:(t,e)=>{"use strict";class i extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}}e.TimeoutError=i;class r extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}}e.AbortError=r;class n extends Error{constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}}e.HTTPError=n},50730:(t,e,i)=>{"use strict";const{TimeoutError:r,AbortError:n}=i(44171),{Response:s,Request:o,Headers:a,default:h}=i(51180),c=h,l=t=>{const e=new a;for(const i of t.trim().split(/[\r\n]+/)){const t=i.indexOf(": ");t>0&&e.set(i.slice(0,t),i.slice(t+1))}return e};class u extends s{constructor(t,e,i){super(e,i),Object.defineProperty(this,"url",{value:t})}}t.exports={fetch:(t,e={})=>null!=e.onUploadProgress?((t,e={})=>{const i=new XMLHttpRequest;i.open(e.method||"GET",t.toString(),!0);const{timeout:o,headers:h}=e;if(o&&o>0&&o<1/0&&(i.timeout=o),null!=e.overrideMimeType&&i.overrideMimeType(e.overrideMimeType),h)for(const[t,e]of new a(h))i.setRequestHeader(t,e);return e.signal&&(e.signal.onabort=()=>i.abort()),e.onUploadProgress&&(i.upload.onprogress=e.onUploadProgress),i.responseType="arraybuffer",new Promise(((t,o)=>{const a=e=>{switch(e.type){case"error":t(s.error());break;case"load":t(new u(i.responseURL,i.response,{status:i.status,statusText:i.statusText,headers:l(i.getAllResponseHeaders())}));break;case"timeout":o(new r);break;case"abort":o(new n)}};i.onerror=a,i.onload=a,i.ontimeout=a,i.onabort=a,i.send(e.body)}))})(t,e):c(t,e),Request:o,Headers:a}},6065:t=>{"use strict";t.exports={supportsFileReader:"undefined"!=typeof self&&"FileReader"in self,supportsWebRTC:"RTCPeerConnection"in globalThis&&"undefined"!=typeof navigator&&void 0!==navigator.mediaDevices&&"getUserMedia"in navigator.mediaDevices,supportsWebRTCDataChannels:"RTCPeerConnection"in globalThis}},82734:t=>{"use strict";var e=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;t.exports=function(t,i){if(null==i&&(i=!1),t.length<2)return!1;if(t.length>255)return!1;var r=t[t.length-1];if(i){if("."!==r)return!1}else if("."===r)return!1;return e.test(t)}},59134:(t,e,i)=>{var r=i(34155);t.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!(void 0===r||"object"!=typeof r.versions||!r.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},5003:(t,e,i)=>{"use strict";const r=i(1476),n=t=>r({exact:!0}).test(t);n.v4=t=>r.v4({exact:!0}).test(t),n.v6=t=>r.v6({exact:!0}).test(t),n.version=t=>n(t)?n.v4(t)?4:6:void 0,t.exports=n},24981:(t,e,i)=>{"use strict";const{base58btc:r}=i(99086),{base32:n}=i(22817),s=i(28924),{Multiaddr:o}=i(46584),a=i(29175),{CID:h}=i(81362),{URL:c}=i(17745),{toString:l}=i(92263),u=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,d=/^\/(ip[fn]s)\/([^/?#]+)/,f=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,p=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function g(t){try{return"string"==typeof t?Boolean(h.parse(t)):t instanceof Uint8Array?Boolean(h.decode(t)):Boolean(h.asCID(t))}catch(t){return!1}}function y(t){if(!t)return!1;if(o.isMultiaddr(t))return!0;try{return new o(t),!0}catch(t){return!1}}function m(t,e,i=1,r=2){const n=w(t);if(!n)return!1;const s=n.match(e);if(!s)return!1;if("ipfs"!==s[i])return!1;let o=s[r];return o&&e===f&&(o=o.toLowerCase()),g(o)}function v(t,e,i=1,r=2){const n=w(t);if(!n)return!1;const s=n.match(e);if(!s)return!1;if("ipns"!==s[i])return!1;let o=s[r];if(o&&e===f){if(o=o.toLowerCase(),g(o))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:t}=new c(`http://${o}`);return p.test(t)}catch(t){return!1}}return!0}function b(t){return"string"==typeof t}function w(t){return t instanceof Uint8Array?l(t,"base58btc"):!!b(t)&&t}const _=t=>m(t,f,2,1),x=t=>v(t,f,2,1),E=t=>_(t)||x(t),S=t=>m(t,u)||_(t),T=t=>v(t,u)||x(t),A=t=>S(t)||T(t)||E(t),C=t=>m(t,d)||v(t,d);t.exports={multihash:function(t){const e=w(t);try{s.decode(r.decode("z"+e))}catch{return!1}return!0},multiaddr:y,peerMultiaddr:function(t){return y(t)&&a.P2P.matches(t)},cid:g,base32cid:t=>function(t){try{n.decode(t)}catch{return!1}return!0}(t)&&g(t),ipfsSubdomain:_,ipnsSubdomain:x,subdomain:E,subdomainGatewayPattern:f,ipfsUrl:S,ipnsUrl:T,url:A,pathGatewayPattern:u,ipfsPath:t=>m(t,d),ipnsPath:t=>v(t,d),path:C,pathPattern:d,urlOrPath:t=>A(t)||C(t),cidPath:t=>b(t)&&!g(t)&&m(`/ipfs/${t}`,d)}},51890:t=>{"use strict";t.exports=function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}},33310:t=>{"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},71993:t=>{"use strict";t.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:256,RTLD_LOCAL:0,RTLD_DEEPBIND:8,E2BIG:7,EACCES:13,EADDRINUSE:98,EADDRNOTAVAIL:99,EAFNOSUPPORT:97,EAGAIN:11,EALREADY:114,EBADF:9,EBADMSG:74,EBUSY:16,ECANCELED:125,ECHILD:10,ECONNABORTED:103,ECONNREFUSED:111,ECONNRESET:104,EDEADLK:35,EDESTADDRREQ:89,EDOM:33,EDQUOT:122,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:113,EIDRM:43,EILSEQ:84,EINPROGRESS:115,EINTR:4,EINVAL:22,EIO:5,EISCONN:106,EISDIR:21,ELOOP:40,EMFILE:24,EMLINK:31,EMSGSIZE:90,EMULTIHOP:72,ENAMETOOLONG:36,ENETDOWN:100,ENETRESET:102,ENETUNREACH:101,ENFILE:23,ENOBUFS:105,ENODATA:61,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:37,ENOLINK:67,ENOMEM:12,ENOMSG:42,ENOPROTOOPT:92,ENOSPC:28,ENOSR:63,ENOSTR:60,ENOSYS:38,ENOTCONN:107,ENOTDIR:20,ENOTEMPTY:39,ENOTSOCK:88,ENOTSUP:95,ENOTTY:25,ENXIO:6,EOPNOTSUPP:95,EOVERFLOW:75,EPERM:1,EPIPE:32,EPROTO:71,EPROTONOSUPPORT:93,EPROTOTYPE:91,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:116,ETIME:62,ETIMEDOUT:110,ETXTBSY:26,EWOULDBLOCK:11,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:17,SIGSTKFLT:16,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGSYS:31,SIGUNUSED:31,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488335,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},1914:t=>{"use strict";const e=65536;t.exports=function(t){const i=new Uint8Array(t);let r=0;if(t>0)if(t>e)for(;r<t;)r+e>t?(crypto.getRandomValues(i.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(i.subarray(r,r+e)),r+=e);else crypto.getRandomValues(i);return i}},17745:(t,e,i)=>{"use strict";const{URLWithLegacySupport:r,format:n,URLSearchParams:s,defaultBase:o}=i(82049),a=i(15939);t.exports={URL:r,URLSearchParams:s,format:n,relative:a,defaultBase:o}},15939:(t,e,i)=>{"use strict";const{URLWithLegacySupport:r,format:n}=i(82049);t.exports=(t,e={},i={},s)=>{let o,a=e.protocol?e.protocol.replace(":",""):"http";a=(i[a]||s||a)+":";try{o=new r(t)}catch(t){o={}}const h=Object.assign({},e,{protocol:a||o.protocol,host:e.host||o.host});return new r(t,n(h)).toString()}},82049:t=>{"use strict";const e="undefined"!=typeof navigator&&"ReactNative"===navigator.product,i=self.URL,r=e?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"";t.exports={URLWithLegacySupport:class{constructor(t="",e=r){this.super=new i(t,e),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return i.createObjectURL(t)}static revokeObjectURL(t){i.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:r,format:function(t){if("string"==typeof t)return new i(t).toString();if(!(t instanceof i)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",i=t.auth?t.auth+"@":"",r=t.port?":"+t.port:"",n=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),h=t.hash||"",c=t.pathname||"";return`${n}${e||i}${s||o+r}${t.path||c+a}${h}`}}}},31303:t=>{"use strict";t.exports=async t=>{const e=[];for await(const i of t)e.push(i);return e}},78165:t=>{"use strict";t.exports=async function*(t,e=1){let i=[];e<1&&(e=1);for await(const r of t)for(i.push(r);i.length>=e;)yield i.slice(0,e),i=i.slice(e);for(;i.length;)yield i.slice(0,e),i=i.slice(e)}},96653:(t,e,i)=>{"use strict";const{Buffer:r}=i(48764),n=i(9668);t.exports=async function*(t){for await(const e of t)r.isBuffer(e)?yield e:n.isBufferList(e)?yield e.slice():yield r.from(e)},t.exports.toBuffer=t.exports,t.exports.toList=async function*(t){for await(const e of t)r.isBuffer(e)?yield(new n).append(e):n.isBufferList(e)?yield e:yield(new n).append(r.from(e))}},88342:(t,e,i)=>{const r=i(9668),n={string:()=>"",buffer:()=>r()};t.exports=async(t,e)=>{if((e=e||{}).type&&!n[e.type])throw new Error(`invalid type "${e.type}"`);let i,r;for await(const s of t)i||(r=e.type||("string"==typeof s?"string":"buffer"),i=n[r]()),"string"===r?i+=s:i.append(s);return i||n[e.type||"buffer"]()}},64593:t=>{"use strict";t.exports=async t=>{for await(const e of t);}},55565:t=>{"use strict";t.exports=async function*(t,e){for await(const i of t)await e(i)&&(yield i)}},72262:t=>{"use strict";t.exports=async t=>{for await(const e of t)return e}},4321:t=>{"use strict";t.exports=async function*(t,e){for await(const i of t)await e(i),yield i}},52261:(t,e,i)=>{"use strict";const r=i(53469),n=i(84975),s=i(63931);t.exports=t=>{const e=n(),i=r(t.source),o=s();let a;const h=t.sink(async function*(){yield*e;const t=await o.promise;yield*t}());return h.catch((t=>{a=t})),{reader:i,writer:e,stream:{sink:t=>a?Promise.reject(a):(o.resolve(t),h),source:i},rest:()=>e.end(),write:e.push,read:async()=>(await i.next()).value}}},93093:t=>{"use strict";t.exports=async t=>{let e;for await(const i of t)e=i;return e}},65765:(t,e,i)=>{"use strict";const{Buffer:r}=i(48764),n=i(9668),s=i(72903),o=4194304,a=r.alloc(0),h="readLength",c="readData",l={[h]:(t,e,i,r)=>{let s;e=e.append(t);try{s=r.lengthDecoder(e)}catch(t){if(e.length>r.maxLengthLength)throw Object.assign(t,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(t instanceof RangeError)return{mode:h,buffer:e,chunk:void 0,state:void 0,data:void 0};throw t}if(s>r.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(r.lengthDecoder.bytes),e=new n,r.onLength&&r.onLength(s),s<=0?(r.onData&&r.onData(a),{mode:h,chunk:t,buffer:e,data:a}):{mode:c,chunk:t,buffer:e,state:{dataLength:s},data:void 0}},[c]:(t,e,i,r)=>{if(e=e.append(t),!i)throw new Error("state is required");if(e.length<i.dataLength)return{mode:c,buffer:e,state:i,chunk:void 0,data:void 0};const{dataLength:s}=i,o=e.shallowSlice(0,s),a=e.length>s?e.shallowSlice(s):void 0;return e=new n,r.onData&&r.onData(o),{mode:h,chunk:a,buffer:e,state:void 0,data:o}}};function u(t){const e={lengthDecoder:(t=t||{}).lengthDecoder||s,maxLengthLength:t.maxLengthLength||8,maxDataLength:t.maxDataLength||o,onLength:t.onLength,onData:t.onData};return async function*(t){let i,r=new n,s=h;for await(const n of t){let t=n;for(;t;){const n=l[s](t,r,i,e);s=n.mode,t=n.chunk,r=n.buffer,i=n.state,n.data&&(yield n.data)}}if(r.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}u.fromReader=(t,e)=>{let i=1;const r={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(i)}catch(t){if("ERR_UNDER_READ"===t.code)return{done:!0,value:null};throw t}finally{i=1}}};return u({...e||{},onLength:t=>{i=t}})(r)},t.exports=u,t.exports.MAX_LENGTH_LENGTH=8,t.exports.MAX_DATA_LENGTH=o},90278:(t,e,i)=>{"use strict";const{Buffer:r}=i(48764),n=i(9668),s=i(62354);function o(t){t=t||{};const e=Math.max(t.poolSize||10240,t.minPoolSize||8),i=t.lengthEncoder||s;return async function*(t){let s=r.alloc(e),o=0;for await(const a of t){i(a.length,s,o);const t=s.slice(o,o+i.bytes);o+=i.bytes,s.length-o<8&&(s=r.alloc(e),o=0),yield(new n).append(t).append(a)}}}o.single=(t,e)=>{const i=(e=e||{}).lengthEncoder||s;return new n([i(t.length),t.slice()])},t.exports=o,t.exports.MIN_POOL_SIZE=8,t.exports.DEFAULT_POOL_SIZE=10240},48963:(t,e,i)=>{"use strict";e.encode=i(90278),e.decode=i(65765),e.varintEncode=i(62354),e.varintDecode=i(72903),e.int32BEEncode=i(71205),e.int32BEDecode=i(93380)},93380:t=>{"use strict";const e=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};e.bytes=4,t.exports=e},71205:(t,e,i)=>{"use strict";const{Buffer:r}=i(48764),n=(t,e,i)=>((e=e||r.allocUnsafe(4)).writeInt32BE(t,i),e);n.bytes=4,t.exports=n},72903:(t,e,i)=>{"use strict";const r=i(94676),{Buffer:n}=i(48764),s=t=>{const e=r.decode(n.isBuffer(t)?t:(i=t,new Proxy({},{get:(t,e)=>"l"===e[0]?i[e]:i.get(parseInt(e))})));var i;return s.bytes=r.decode.bytes,e};t.exports=s},62354:(t,e,i)=>{"use strict";const r=i(94676),{Buffer:n}=i(48764),s=(t,e,i)=>{const o=r.encode(t,e,i);return s.bytes=r.encode.bytes,e||n.from(o)};t.exports=s},93975:t=>{"use strict";t.exports=async t=>{let e=0;for await(const i of t)e++;return e}},32121:t=>{"use strict";t.exports=async function*(t,e){for await(const i of t)yield e(i)}},74014:(t,e,i)=>{"use strict";const r=i(84975);t.exports=async function*(...t){const e=r();setTimeout((async()=>{try{await Promise.all(t.map((async t=>{for await(const i of t)e.push(i)}))),e.end()}catch(t){e.end(t)}}),0),yield*e}},63184:(t,e,i)=>{var r=i(60154);t.exports=function(){var t=r(),e=r();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}},60154:(t,e,i)=>{"use strict";const r=i(22412);t.exports=function(){let t,e;return{sink:async i=>{if(t)throw new Error("already piped");t=r(i),e&&e(t)},source:{[Symbol.asyncIterator](){return this},next:()=>t?t.next():new Promise((t=>{e=i=>{e=null,t(i.next())}}))}}}},84810:(t,e,i)=>{"use strict";const r=i(78165);t.exports=async function*(t,e=1){for await(const i of r(t,e)){const t=i.map((t=>t().then((t=>({ok:!0,value:t})),(t=>({ok:!1,err:t})))));for(let e=0;e<t.length;e++){const i=await t[e];if(!i.ok)throw i.err;yield i.value}}}},58869:(t,e,i)=>{"use strict";const r=i(63931),n=i(17187).EventEmitter;t.exports=async function*(t,e={}){let i=e.concurrency||1/0;i<1&&(i=1/0);const s=null!=e.ordered&&e.ordered,o=new n,a=[];let h,c=r(),l=r(),u=!1,d=!1;function f(){return s?Boolean(a[0]&&a[0].done):Boolean(a.find((t=>t.done)))}function*p(){for(;a.length&&a[0].done;){const t=a[0];if(a.shift(),!t.ok)throw d=!0,c.resolve(),t.err;yield t.value,c.resolve()}}function*g(){for(;f();)for(let t=0;t<a.length;t++)if(a[t].done){const e=a[t];if(a.splice(t,1),t--,!e.ok)throw d=!0,c.resolve(),e.err;yield e.value,c.resolve()}}for(o.on("task-complete",(()=>{l.resolve()})),Promise.resolve().then((async()=>{try{for await(const e of t){if(a.length===i&&(c=r(),await c.promise),d)break;const t={done:!1};a.push(t),e().then((e=>{t.done=!0,t.ok=!0,t.value=e,o.emit("task-complete")}),(e=>{t.done=!0,t.err=e,o.emit("task-complete")}))}u=!0,o.emit("task-complete")}catch(t){h=t,o.emit("task-complete")}}));;){if(f()||(l=r(),await l.promise),h)throw h;if(s?yield*p():yield*g(),u&&0===a.length)break}}},11712:(t,e,i)=>{"use strict";const r=i(52261),n=i(48963);t.exports=(t,e={})=>{const i=r(t),s=n.decode.fromReader(i.reader,e);let o=!1;const a={read:async t=>{const{value:e,done:r}=await i.reader.next(t);if(r&&e.length<t)throw new Error("Couldn't read enough bytes");if(o=r,!e)throw new Error("Value is null");return e},readLP:async()=>{const{value:t,done:e}=await s.next();if(o=e,!t)throw new Error("Value is null");return t},readPB:async t=>{const e=await a.readLP();if(!e)throw new Error("Value is null");const i=e instanceof Uint8Array?e:e.slice();return t.decode(i)},write:t=>{i.writer.push(t)},writeLP:t=>{a.write(n.encode.single(t,e))},writePB:(t,e)=>{a.writeLP(e.encode(t))},pb:t=>({read:()=>a.readPB(t),write:e=>a.writePB(e,t)}),unwrap:()=>(i.rest(),i.stream)};return a}},28132:t=>{"use strict";t.exports=function(t){const[e,i]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>e.next(),push:t=>{r.push(t)},next:()=>r.length?{done:!1,value:r.shift()}:e.next(),[i](){return this}}}},60618:t=>{const e=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},i=t=>t&&("function"==typeof t[Symbol.asyncIterator]||"function"==typeof t[Symbol.iterator]||"function"==typeof t.next),r=t=>t&&"function"==typeof t.sink&&i(t.source),n=t=>e=>(t.sink(e),t.source),s=(...t)=>{if(r(t[0])){const e=t[0];t[0]=()=>e.source}else if(i(t[0])){const e=t[0];t[0]=()=>e}if(t.length>1&&r(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)r(t[e])&&(t[e]=n(t[e]));return e(...t)};t.exports=s,t.exports.pipe=s,t.exports.rawPipe=e,t.exports.isIterable=i,t.exports.isDuplex=r},84975:(t,e,i)=>{const r=i(91607);t.exports=t=>{let e;"function"==typeof(t=t||{})?(e=t,t={}):e=t.onEnd;let i,n,s,o=new r;const a=t=>n?n(t):(o.push(t),i),h=t=>s?i:a({done:!1,value:t}),c=t=>s?i:(s=!0,t?(t=>(o=new r,n?n({error:t}):(o.push({error:t}),i)))(t):a({done:!0}));if(i={[Symbol.asyncIterator](){return this},next:()=>{if(!o.isEmpty()){if(t.writev){let t;const e=[];for(;!o.isEmpty();){if(t=o.shift(),t.error)throw t.error;e.push(t.value)}return{done:t.done,value:e}}const e=o.shift();if(e.error)throw e.error;return e}return s?{done:!0}:new Promise(((e,r)=>{n=s=>(n=null,s.error?r(s.error):t.writev&&!s.done?e({done:s.done,value:[s.value]}):e(s),i)}))},return:()=>(o=new r,c(),{done:!0}),throw:t=>(c(t),{done:!0}),push:h,end:c},!e)return i;const l=i;return i={[Symbol.asyncIterator](){return this},next:()=>l.next(),throw:t=>(l.throw(t),e&&(e(t),e=null),{done:!0}),return:()=>(l.return(),e&&(e(),e=null),{done:!0}),push:h,end:t=>(l.end(t),e&&(e(t),e=null),i)},i}},53469:(t,e,i)=>{const r=i(9668);t.exports=t=>{const e=async function*(){let e=yield,i=new r;for await(const n of t)if(e)for(i.append(n);i.length>=e;){const t=i.shallowSlice(0,e);if(i.consume(e),e=yield t,!e){i.length&&(e=yield i,i=new r);break}}else e=yield i.append(n),i=new r;if(e)throw Object.assign(new Error(`stream ended before ${e} bytes became available`),{code:"ERR_UNDER_READ",buffer:i})}();return e.next(),e}},97515:(t,e,i)=>{"use strict";const r=i(31303);t.exports=async function*(t,e){const i=await r(t);yield*i.sort(e)}},37939:t=>{"use strict";t.exports=async function*(t,e){let i=0;if(!(e<1))for await(const r of t)if(yield r,i++,i===e)return}},98032:(t,e,i)=>{const{Buffer:r}=i(48764),n=i(9668),s="0".charCodeAt(0),o=r.from("ustar\0","binary"),a=r.from("ustar ","binary"),h=r.from(" \0","binary"),c=function(t,e,i,r){for(;i<r;i++)if(t.get(i)===e)return i;return r},l=function(t,e,i){if(t=t.shallowSlice(e,e+i),e=0,128&t.get(e))return function(t){let e;if(128===t.get(0))e=!0;else{if(255!==t.get(0))return null;e=!1}let i=!1;const r=[];for(let n=t.length-1;n>0;n--){const s=t.get(n);e?r.push(s):i&&0===s?r.push(0):i?(i=!1,r.push(256-s)):r.push(255-s)}let n=0;const s=r.length;for(let t=0;t<s;t++)n+=r[t]*Math.pow(256,t);return e?n:-1*n}(t);{for(;e<t.length&&32===t.get(e);)e++;const i=(r=c(t,32,e,t.length),n=t.length,s=t.length,"number"!=typeof r?s:(r=~~r)>=n?n:r>=0||(r+=n)>=0?r:0);for(;e<i&&0===t.get(e);)e++;return i===e?0:parseInt(t.shallowSlice(e,i).toString(),8)}var r,n,s},u=function(t,e,i,r){return t.shallowSlice(e,c(t,0,e,e+i)).toString(r)};e.decodeLongPath=function(t,e){return t=n.isBufferList(t)?t:new n(t),u(t,0,t.length,e)},e.decodePax=function(t){t=n.isBufferList(t)?t:new n(t);const e={};for(;t.length;){let i=0;for(;i<t.length&&32!==t.get(i);)i++;const r=parseInt(t.shallowSlice(0,i).toString(),10);if(!r)return e;const n=t.shallowSlice(i+1,r-1).toString(),s=n.indexOf("=");if(-1===s)return e;e[n.slice(0,s)]=n.slice(s+1),t=t.shallowSlice(r)}return e},e.decode=function(t,e){let i=0===(t=n.isBufferList(t)?t:new n(t)).get(156)?0:t.get(156)-s,r=u(t,0,100,e);const c=l(t,100,8),d=l(t,108,8),f=l(t,116,8),p=l(t,124,12),g=l(t,136,12),y=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(i),m=0===t.get(157)?null:u(t,157,100,e),v=u(t,265,32),b=u(t,297,32),w=l(t,329,8),_=l(t,337,8),x=function(t){let e=256;for(let i=0;i<148;i++)e+=t.get(i);for(let i=156;i<512;i++)e+=t.get(i);return e}(t);if(256===x)return null;if(x!==l(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===o.compare(t.slice(257,263)))t.get(345)&&(r=u(t,345,155,e)+"/"+r);else if(0!==a.compare(t.slice(257,263))||0!==h.compare(t.slice(263,265)))throw new Error("Invalid tar header: unknown format.");return 0===i&&r&&"/"===r[r.length-1]&&(i=5),{name:r,mode:c,uid:d,gid:f,size:p,mtime:new Date(1e3*g),type:y,linkname:m,uname:v,gname:b,devmajor:w,devminor:_}}},38324:(t,e,i)=>{const r=i(63931),n=i(98032),s=i(92007);async function o(t,e){const i=function(t){return(t&=511)&&512-t}(e);i&&await t.next(i)}t.exports=t=>((t=t||{}).highWaterMark=t.highWaterMark||16384,e=>async function*(){const i=s(e);let a,h,c,l;try{for(;;){let e;try{const{done:t,value:r}=await i.next(512);if(t)return;e=r}catch(t){if("ERR_UNDER_READ"===t.code)return;throw t}const s=n.decode(e,t.filenameEncoding);if(!s)continue;if("gnu-long-path"===s.type){const{done:e,value:r}=await i.next(s.size);if(e)return;a=n.decodeLongPath(r,t.filenameEncoding),await o(i,s.size);continue}if("gnu-long-link-path"===s.type){const{done:e,value:r}=await i.next(s.size);if(e)return;h=n.decodeLongPath(r,t.filenameEncoding),await o(i,s.size);continue}if("pax-global-header"===s.type){const{done:e,value:r}=await i.next(s.size);if(e)return;c=n.decodePax(r,t.filenameEncoding),await o(i,s.size);continue}if("pax-header"===s.type){const{done:e,value:r}=await i.next(s.size);if(e)return;l=n.decodePax(r,t.filenameEncoding),c&&(l={...c,...l}),await o(i,s.size);continue}if(a&&(s.name=a,a=null),h&&(s.linkname=h,h=null),l&&(l.path&&(s.name=l.path),l.linkpath&&(s.linkname=l.linkpath),l.size&&(s.size=parseInt(l.size,10)),s.pax=l,l=null),!s.size||"directory"===s.type){yield{header:s,body:async function*(){}()};continue}let u=s.size;const d=r(),f=await i.nextLte(Math.min(u,t.highWaterMark));u-=f.value.length,u||d.resolve();const p=async function*(){try{for(yield f.value;u;){const{done:t,value:e}=await i.nextLte(u);if(t)return void(u=0);u-=e.length,yield e}}finally{d.resolve()}}();if(yield{header:s,body:p},await d.promise,u)for await(const t of p);await o(i,s.size)}}finally{await i.return()}}())},22169:(t,e,i)=>{i(38324),e.pack=i(64692)},92007:(t,e,i)=>{const r=i(9668),n=i(53469);t.exports=function(t){const e=n(t);let i;const s={[Symbol.asyncIterator]:()=>s,async next(t){if(i){let n;if(null==t||i.length===t)n=i,i=null;else if(i.length>t)n=i.shallowSlice(0,t),i=i.shallowSlice(t);else if(i.length<t){const{value:s,done:o}=await e.next(t-i.length);if(o)throw Object.assign(new Error(`stream ended before ${t-i.length} bytes became available`),{code:"ERR_UNDER_READ"});n=new r([i,s]),i=null}return{value:n}}return e.next(t)},async nextLte(t){let{done:e,value:n}=await s.next();return e?{done:e}:n.length<=t?{value:n}:(n=r.isBufferList(n)?n:new r(n),i?i.append(n.shallowSlice(t)):i=n.shallowSlice(t),{value:n.shallowSlice(0,t)})},return:()=>e.return()};return s}},26583:(t,e,i)=>{const{Buffer:r}=i(48764),n=r.alloc,s="0".charCodeAt(0),o=r.from("ustar\0","binary"),a=r.from("00","binary"),h=parseInt("7777",8),c=function(t,e){return(t=t.toString(8)).length>e?"7777777777777777777".slice(0,e)+" ":"0000000000000000000".slice(0,e-t.length)+t+" "},l=function(t){const e=r.byteLength(t);let i=Math.floor(Math.log(e)/Math.log(10))+1;return e+i>=Math.pow(10,i)&&i++,e+i+t};e.encodePax=function(t){let e="";t.name&&(e+=l(" path="+t.name+"\n")),t.linkname&&(e+=l(" linkpath="+t.linkname+"\n"));const i=t.pax;if(i)for(const t in i)e+=l(" "+t+"="+i[t]+"\n");return r.from(e)},e.encode=function(t){const e=n(512);let i=t.name,l="";if(5===t.typeflag&&"/"!==i[i.length-1]&&(i+="/"),r.byteLength(i)!==i.length)return null;for(;r.byteLength(i)>100;){const t=i.indexOf("/");if(-1===t)return null;l+=l?"/"+i.slice(0,t):i.slice(0,t),i=i.slice(t+1)}return r.byteLength(i)>100||r.byteLength(l)>155||t.linkname&&r.byteLength(t.linkname)>100?null:(e.write(i),e.write(c(t.mode&h,6),100),e.write(c(t.uid,6),108),e.write(c(t.gid,6),116),e.write(c(t.size,11),124),e.write(c(t.mtime.getTime()/1e3|0,11),136),e[156]=s+function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(t.type),t.linkname&&e.write(t.linkname,157),o.copy(e,257),a.copy(e,263),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(c(t.devmajor||0,6),329),e.write(c(t.devminor||0,6),337),l&&e.write(l,345),e.write(c(function(t){let e=256;for(let i=0;i<148;i++)e+=t[i];for(let i=156;i<512;i++)e+=t[i];return e}(e),6),148),e)}},64692:(t,e,i)=>{const{Buffer:r}=i(48764),n=i(9668),{S_IFMT:s,S_IFBLK:o,S_IFCHR:a,S_IFDIR:h,S_IFIFO:c,S_IFLNK:l}=i(71993),u=i(88342),d=i(26583),f=parseInt("755",8),p=parseInt("644",8),g=r.alloc(1024);function y(t){switch(t&s){case o:return"block-device";case a:return"character-device";case h:return"directory";case c:return"fifo";case l:return"symlink"}return"file"}function m(t){if(t&=511)return new n(g.slice(0,512-t))}function v(t){if(!t.pax){const e=d.encode(t);if(e)return e}return function(t){const e=d.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),i={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};return new n([d.encode(i),e,m(e.length),d.encode({...i,size:t.size,type:t.type})])}(t)}t.exports=()=>async function*(t){for await(let{header:e,body:i}of t){if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=y(e.mode)),e.mode||(e.mode="directory"===e.type?f:p),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof i&&(i=r.from(i)),r.isBuffer(i)||n.isBufferList(i)){e.size=i.length,yield new n([v(e),i,m(e.size)]);continue}if("symlink"===e.type&&!e.linkname){e.linkname=(await u(i)).toString(),yield v(e);continue}if(yield v(e),"file"!==e.type&&"contiguous-file"!==e.type)continue;let t=0;for await(const e of i)t+=e.length,yield n.isBufferList(e)?e:new n(e);if(t!==e.size)throw new Error("size mismatch");const s=m(e.size);s&&(yield s)}yield new n(g)}},33053:(t,e,i)=>{"use strict";const{concat:r}=i(20605);t.exports=async function(t){let e=new Uint8Array(0);for await(const i of t)e=r([e,i],e.length+i.length);return e}},6476:(t,e,i)=>{"use strict";var r=i(78422),n=i(45413),s=i(16044);t.exports=function(t,e={}){const i="undefined"==typeof window?{}:window.location,o=s(t,i),a=new r(o,e.websocket),h=n(a,e);return h.remoteAddress=o,h.close=()=>new Promise(((t,e)=>{a.addEventListener("close",t),a.close()})),h.destroy=()=>{a.terminate?a.terminate():a.close()},h.socket=a,h},t.exports.connect=t.exports},45413:(t,e,i)=>{const r=i(41049),n=i(91252);t.exports=(t,e)=>{(e=e||{}).binaryType?t.binaryType=e.binaryType:e.binary&&(t.binaryType="arraybuffer");const i={sink:n(t,e),source:r(t,e),connected:()=>i.source.connected()};return i}},1434:t=>{t.exports=async t=>{if(t.readyState>=2)throw new Error("socket closed");if(1!==t.readyState)return new Promise(((e,i)=>{const r=t&&(t.removeEventListener||t.removeListener);function n(){"function"==typeof r&&(r.call(t,"open",s),r.call(t,"error",o))}function s(){n(),e()}function o(t){n(),i(t)}t.addEventListener("open",s),t.addEventListener("error",o)}))}},91252:(t,e,i)=>{const r=i(1434);t.exports=(t,e)=>((e=e||{}).closeOnEnd=!1!==e.closeOnEnd,async i=>{for await(const e of i){try{await r(t)}catch(t){if("socket closed"===t.message)break;throw t}t.send(e)}if(e.closeOnEnd&&t.readyState<=1)return new Promise(((e,i)=>{t.addEventListener("close",(t=>{if(t.wasClean||1006===t.code)e();else{const e=Object.assign(new Error("ws error"),{event:t});i(e)}})),setTimeout((()=>t.close()))}))})},41049:(t,e,i)=>{const{Buffer:r}=i(48764),{EventIterator:n}=i(90507);t.exports=t=>{const e=t.removeEventListener||t.removeListener,i=async function*(){const i=new n((({push:i,stop:r,fail:n})=>(t.addEventListener("message",i),t.addEventListener("error",n),t.addEventListener("close",r),()=>{e.call(t,"message",i),e.call(t,"error",n),e.call(t,"close",r)})),{highWaterMark:1/0});for await(const{data:t}of i)yield(s=t,s instanceof ArrayBuffer||null!=s&&null!=s.constructor&&"ArrayBuffer"===s.constructor.name&&"number"==typeof s.byteLength?r.from(t):t);var s}();let s,o=1===t.readyState;return t.addEventListener("open",(()=>{o=!0,s=null})),t.addEventListener("close",(()=>{o=!1,s=null})),t.addEventListener("error",(t=>{o||(s=t)})),i.connected=()=>new Promise(((i,r)=>{if(o)return i();if(s)return r(s);const n=i=>{e.call(t,"open",a),e.call(t,"error",h),i()},a=()=>n(i),h=t=>n((()=>r(t)));t.addEventListener("open",a),t.addEventListener("error",h)})),i}},78422:(t,e,i)=>{t.exports="undefined"==typeof WebSocket?i(89408):WebSocket},16044:(t,e,i)=>{const{relative:r}=i(17745),n={http:"ws",https:"wss"};t.exports=(t,e)=>r(t,e,n,"ws")},61708:t=>{t.exports=function(t,e,i){var r=null,n=null,s=function(){r&&(clearTimeout(r),n=null,r=null)},o=function(){if(!e)return t.apply(this,arguments);var o=this,a=arguments,h=i&&!r;return s(),n=function(){t.apply(o,a)},r=setTimeout((function(){if(r=null,!h){var t=n;return n=null,t()}}),e),h?n():void 0};return o.cancel=s,o.flush=function(){var t=n;s(),t&&t()},o}},44874:t=>{t.exports=function(t,e,i){if(!t)return i;var r,n;if(Array.isArray(e)&&(r=e.slice(0)),"string"==typeof e&&(r=e.split(".")),"symbol"==typeof e&&(r=[e]),!Array.isArray(r))throw new Error("props arg must be an array, a string or a symbol");for(;r.length;){if(n=r.shift(),!t)return i;if(void 0===(t=t[n]))return i}return t}},59840:t=>{function e(t){if("__proto__"===t||"constructor"===t||"prototype"===t)throw new Error("setting of prototype values not supported")}t.exports=function(t,i,r){var n,s,o;if(Array.isArray(i)&&(n=i.slice(0)),"string"==typeof i&&(n=i.split(".")),"symbol"==typeof i&&(n=[i]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(!(s=n.pop()))return!1;for(e(s);o=n.shift();)if(e(o),void 0===t[o]&&(t[o]={}),!(t=t[o])||"object"!=typeof t)return!1;return t[s]=r,!0}},99507:(t,e,i)=>{"use strict";const r=i(61798),{EventEmitter:n}=i(17187);function s(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;++i)if(t[i]!==e[i])return!1;return!0}function o(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}class a extends n{constructor(t={}){super(),this.localNodeId=t.localNodeId||r(20),this.numberOfNodesPerKBucket=t.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=t.numberOfNodesToPing||3,this.distance=t.distance||a.distance,this.arbiter=t.arbiter||a.arbiter,this.metadata=Object.assign({},t.metadata),o("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(t,e){return t.vectorClock>e.vectorClock?t:e}static distance(t,e){let i=0,r=0;const n=Math.min(t.length,e.length),s=Math.max(t.length,e.length);for(;r<n;++r)i=256*i+(t[r]^e[r]);for(;r<s;++r)i=256*i+255;return i}add(t){o("contact.id",(t||{}).id);let e=0,i=this.root;for(;null===i.contacts;)i=this._determineNode(i,t.id,e++);const r=this._indexOf(i,t.id);return r>=0?(this._update(i,r,t),this):i.contacts.length<this.numberOfNodesPerKBucket?(i.contacts.push(t),this.emit("added",t),this):i.dontSplit?(this.emit("ping",i.contacts.slice(0,this.numberOfNodesToPing),t),this):(this._split(i,e),this.add(t))}closest(t,e=1/0){if(o("id",t),!Number.isInteger(e)&&e!==1/0||e<=0)throw new TypeError("n is not positive number");let i=[];for(let r=[this.root],n=0;r.length>0&&i.length<e;){const e=r.pop();if(null===e.contacts){const i=this._determineNode(e,t,n++);r.push(e.left===i?e.right:e.left),r.push(i)}else i=i.concat(e.contacts)}return i.map((e=>[this.distance(e.id,t),e])).sort(((t,e)=>t[0]-e[0])).slice(0,e).map((t=>t[1]))}count(){let t=0;for(const e=[this.root];e.length>0;){const i=e.pop();null===i.contacts?e.push(i.right,i.left):t+=i.contacts.length}return t}_determineNode(t,e,i){const r=i>>3,n=i%8;return e.length<=r&&0!==n?t.left:e[r]&1<<7-n?t.right:t.left}get(t){o("id",t);let e=0,i=this.root;for(;null===i.contacts;)i=this._determineNode(i,t,e++);const r=this._indexOf(i,t);return r>=0?i.contacts[r]:null}_indexOf(t,e){for(let i=0;i<t.contacts.length;++i)if(s(t.contacts[i].id,e))return i;return-1}remove(t){o("the id as parameter 1",t);let e=0,i=this.root;for(;null===i.contacts;)i=this._determineNode(i,t,e++);const r=this._indexOf(i,t);if(r>=0){const t=i.contacts.splice(r,1)[0];this.emit("removed",t)}return this}_split(t,e){t.left={contacts:[],dontSplit:!1,left:null,right:null},t.right={contacts:[],dontSplit:!1,left:null,right:null};for(const i of t.contacts)this._determineNode(t,i.id,e).contacts.push(i);t.contacts=null;const i=this._determineNode(t,this.localNodeId,e);(t.left===i?t.right:t.left).dontSplit=!0}toArray(){let t=[];for(const e=[this.root];e.length>0;){const i=e.pop();null===i.contacts?e.push(i.right,i.left):t=t.concat(i.contacts)}return t}*toIterable(){for(const t=[this.root];t.length>0;){const e=t.pop();null===e.contacts?t.push(e.right,e.left):yield*e.contacts}}_update(t,e,i){if(!s(t.contacts[e].id,i.id))throw new Error("wrong index for _update");const r=t.contacts[e],n=this.arbiter(r,i);n===r&&r!==i||(t.contacts.splice(e,1),t.contacts.push(n),this.emit("updated",r,n))}}t.exports=a},84124:(t,e,i)=>{"use strict";const r=i(964),n=new Set(["lt","gt","lte","gte"]);function s(t){if(!(this instanceof s))return new s(t);this.opts=t||{},this.encodings=r}t.exports=s,s.prototype._encoding=function(t){return"string"==typeof t&&(t=r[t]),t||(t=r.id),t},s.prototype._keyEncoding=function(t,e){return this._encoding(e&&e.keyEncoding||t&&t.keyEncoding||this.opts.keyEncoding)},s.prototype._valueEncoding=function(t,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||t&&(t.valueEncoding||t.encoding)||this.opts.valueEncoding||this.opts.encoding)},s.prototype.encodeKey=function(t,e,i){return this._keyEncoding(e,i).encode(t)},s.prototype.encodeValue=function(t,e,i){return this._valueEncoding(e,i).encode(t)},s.prototype.decodeKey=function(t,e){return this._keyEncoding(e).decode(t)},s.prototype.decodeValue=function(t,e){return this._valueEncoding(e).decode(t)},s.prototype.encodeBatch=function(t,e){return t.map((t=>{const i={type:t.type,key:this.encodeKey(t.key,e,t)};return this.keyAsBuffer(e,t)&&(i.keyEncoding="binary"),t.prefix&&(i.prefix=t.prefix),"value"in t&&(i.value=this.encodeValue(t.value,e,t),this.valueAsBuffer(e,t)&&(i.valueEncoding="binary")),i}))},s.prototype.encodeLtgt=function(t){const e={};for(const i of Object.keys(t)){if("start"===i||"end"===i)throw new Error('Legacy range options ("start" and "end") have been removed');e[i]=n.has(i)?this.encodeKey(t[i],t):t[i]}return e},s.prototype.createStreamDecoder=function(t){return t.keys&&t.values?(e,i)=>({key:this.decodeKey(e,t),value:this.decodeValue(i,t)}):t.keys?e=>this.decodeKey(e,t):t.values?(e,i)=>this.decodeValue(i,t):function(){}},s.prototype.keyAsBuffer=function(t){return this._keyEncoding(t).buffer},s.prototype.valueAsBuffer=function(t){return this._valueEncoding(t).buffer}},964:(t,e,i)=>{"use strict";const{Buffer:r}=i(48764);e.utf8=e["utf-8"]={encode:function(t){return o(t)?t:String(t)},decode:s,buffer:!1,type:"utf8"},e.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},e.binary={encode:function(t){return o(t)?t:r.from(t)},decode:s,buffer:!0,type:"binary"},e.none={encode:s,decode:s,buffer:!1,type:"id"},e.id=e.none;const n=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(const t of n)e[t]={encode:function(e){return o(e)?e:r.from(e,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t};function s(t){return t}function o(t){return null==t||r.isBuffer(t)}},56604:t=>{"use strict";function e(t,e){const i=function(e,r){if("object"==typeof e&&null!==e&&(r=r||e,e=e.message||e.name),e=e||"","object"==typeof(r=r||void 0)&&r.type===t&&r.message===e)return r;Object.defineProperty(this,"type",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:r,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:e,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i)};return i.prototype=new e,i}const i=e("LevelUPError",Error);t.exports={LevelUPError:i,InitializationError:e("InitializationError",i),OpenError:e("OpenError",i),ReadError:e("ReadError",i),WriteError:e("WriteError",i),NotFoundError:e("NotFoundError",i),EncodingError:e("EncodingError",i)},t.exports.NotFoundError.prototype.notFound=!0,t.exports.NotFoundError.prototype.status=404},3462:(t,e,i)=>{"use strict";const r=i(35717),{Readable:n}=i(88473);function s(t,e){if(!(this instanceof s))return new s(t,e);e=e||{},n.call(this,Object.assign({},e,{objectMode:!0})),this._iterator=t,this._options=e,this.on("end",this.destroy.bind(this,null,null))}t.exports=s,r(s,n),s.prototype._read=function(){this.destroyed||this._iterator.next(((t,e,i)=>{if(!this.destroyed)return t?this.destroy(t):void(void 0===e&&void 0===i?this.push(null):!1!==this._options.keys&&!1===this._options.values?this.push(e):!1===this._options.keys&&!1!==this._options.values?this.push(i):this.push({key:e,value:i}))}))},s.prototype._destroy=function(t,e){this._iterator.end((function(i){e(t||i)}))}},99558:(t,e,i)=>{"use strict";t.exports=f;const r=i(24012).AbstractLevelDOWN,n=i(35717),s=i(29967),o=i(43016),a=i(55568),h=i(38450),c=i(71228),l=i(82854),u=i(78950),d="level-js-";function f(t,e){if(!(this instanceof f))return new f(t,e);if(r.call(this,{bufferKeys:c.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),e=e||{},"string"!=typeof t)throw new Error("constructor requires a location string argument");this.location=t,this.prefix=null==e.prefix?d:e.prefix,this.version=parseInt(e.version||1,10)}n(f,r),f.prototype.type="level-js",f.prototype._open=function(t,e){const i=indexedDB.open(this.prefix+this.location,this.version);i.onerror=function(){e(i.error||new Error("unknown error"))},i.onsuccess=()=>{this.db=i.result,e()},i.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(this.location)||e.createObjectStore(this.location)}},f.prototype.store=function(t){return this.db.transaction([this.location],t).objectStore(this.location)},f.prototype.await=function(t,e){const i=t.transaction;i.onabort=function(){e(i.error||new Error("aborted by user"))},i.oncomplete=function(){e(null,t.result)}},f.prototype._get=function(t,e,i){const r=this.store("readonly");let n;try{n=r.get(t)}catch(t){return this._nextTick(i,t)}this.await(n,(function(t,r){return t?i(t):void 0===r?i(new Error("NotFound")):void i(null,h(r,e.asBuffer))}))},f.prototype._getMany=function(t,e,i){const r=e.asBuffer,n=this.store("readonly"),o=t.map((t=>e=>{let i;try{i=n.get(t)}catch(t){return e(t)}i.onsuccess=()=>{const t=i.result;e(null,void 0===t?t:h(t,r))},i.onerror=t=>{t.stopPropagation(),e(i.error)}}));s(o,16,i)},f.prototype._del=function(t,e,i){const r=this.store("readwrite");let n;try{n=r.delete(t)}catch(t){return this._nextTick(i,t)}this.await(n,i)},f.prototype._put=function(t,e,i,r){const n=this.store("readwrite");let s;try{s=n.put(e,t)}catch(t){return this._nextTick(r,t)}this.await(s,r)},f.prototype._serializeKey=function(t){return a(t,this.supports.bufferKeys)},f.prototype._serializeValue=function(t){return a(t,!0)},f.prototype._iterator=function(t){return new o(this,this.location,t)},f.prototype._batch=function(t,e,i){if(0===t.length)return this._nextTick(i);const r=this.store("readwrite"),n=r.transaction;let s,o=0;n.onabort=function(){i(s||n.error||new Error("aborted by user"))},n.oncomplete=function(){i()},function e(){const i=t[o++],a=i.key;let h;try{h="del"===i.type?r.delete(a):r.put(i.value,a)}catch(t){return s=t,void n.abort()}o<t.length&&(h.onsuccess=e)}()},f.prototype._clear=function(t,e){let i,r;try{i=u(t)}catch(t){return this._nextTick(e)}if(t.limit>=0)return l(this,this.location,i,t,e);try{const t=this.store("readwrite");r=i?t.delete(i):t.clear()}catch(t){return this._nextTick(e,t)}this.await(r,e)},f.prototype._close=function(t){this.db.close(),this._nextTick(t)},f.prototype.upgrade=function(t){if("open"!==this.status)return this._nextTick(t,new Error("cannot upgrade() before open()"));const e=this.iterator(),i={},r=this;function n(t){if(t)return o(t);e.next(s)}function s(t,e,s){if(t||void 0===e)return o(t);const a=r._serializeKey(h(e,!0)),c=r._serializeValue(h(s,!0));r._batch([{type:"del",key:e},{type:"put",key:a,value:c}],i,n)}function o(i){e.end((function(e){t(i||e)}))}e._deserializeKey=e._deserializeValue=function(t){return t},n()},f.destroy=function(t,e,i){"function"==typeof e&&(i=e,e=d);const r=indexedDB.deleteDatabase(e+t);r.onsuccess=function(){i()},r.onerror=function(t){i(t)}}},43016:(t,e,i)=>{"use strict";const r=i(35717),n=i(24012).AbstractIterator,s=i(78950),o=i(38450),a=function(){};function h(t,e,i){if(n.call(this,t),this._limit=i.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=i.keys,this._values=i.values,this._keyAsBuffer=i.keyAsBuffer,this._valueAsBuffer=i.valueAsBuffer,0===this._limit)return void(this._completed=!0);let r;try{r=s(i)}catch(t){return void(this._completed=!0)}this.createIterator(e,r,i.reverse)}t.exports=h,r(h,n),h.prototype.createIterator=function(t,e,i){const r=this.db.db.transaction([t],"readonly");r.objectStore(t).openCursor(e,i?"prev":"next").onsuccess=t=>{const e=t.target.result;e&&this.onItem(e)},this._transaction=r,r.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},r.oncomplete=()=>{this.onComplete()}},h.prototype.onItem=function(t){this._cache.push(t.key,t.value),(this._limit<=0||++this._count<this._limit)&&t.continue(),this.maybeNext()},h.prototype.onAbort=function(t){this._aborted=!0,this._error=t,this.maybeNext()},h.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},h.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},h.prototype._next=function(t){if(this._aborted){const e=this._error;this._error=null,this._nextTick(t,e)}else if(this._cache.length>0){let e=this._cache.shift(),i=this._cache.shift();e=this._keys&&void 0!==e?this._deserializeKey(e,this._keyAsBuffer):void 0,i=this._values&&void 0!==i?this._deserializeValue(i,this._valueAsBuffer):void 0,this._nextTick(t,null,e,i)}else this._completed?this._nextTick(t):this._callback=t},h.prototype._deserializeKey=o,h.prototype._deserializeValue=o,h.prototype._end=function(t){if(this._aborted||this._completed)return this._nextTick(t,this._error);this.onItem=a,this.onAbort=t,this.onComplete=t}},82854:t=>{"use strict";t.exports=function(t,e,i,r,n){if(0===r.limit)return t._nextTick(n);const s=t.db.transaction([e],"readwrite"),o=s.objectStore(e);let a=0;s.oncomplete=function(){n()},s.onabort=function(){n(s.error||new Error("aborted by user"))};const h=o.openKeyCursor?"openKeyCursor":"openCursor",c=r.reverse?"prev":"next";o[h](i,c).onsuccess=function(t){const e=t.target.result;e&&(o.delete(e.key).onsuccess=function(){(r.limit<=0||++a<r.limit)&&e.continue()})}}},38450:(t,e,i)=>{"use strict";const r=i(48764).Buffer,n=function(){if(i.g.TextDecoder){const t=new TextDecoder("utf-8");return t.decode.bind(t)}return function(t){return o(t).toString()}}(),s=function(){if(i.g.TextDecoder){const t=new TextDecoder("utf-8");return t.decode.bind(t)}return function(t){return r.from(t).toString()}}();function o(t){const e=r.from(t.buffer);return t.byteLength===t.buffer.byteLength?e:e.slice(t.byteOffset,t.byteOffset+t.byteLength)}t.exports=function(t,e){return t instanceof Uint8Array?e?o(t):n(t):t instanceof ArrayBuffer?e?r.from(t):s(t):e?r.from(String(t)):String(t)}},78950:(t,e,i)=>{"use strict";const r=i(82303),n=Symbol("none");t.exports=function(t){const e=r.lowerBound(t,n),i=r.upperBound(t,n),s=r.lowerBoundExclusive(t,n),o=r.upperBoundExclusive(t,n);return e!==n&&i!==n?IDBKeyRange.bound(e,i,s,o):e!==n?IDBKeyRange.lowerBound(e,s):i!==n?IDBKeyRange.upperBound(i,o):null}},55568:(t,e,i)=>{"use strict";const r=i(48764).Buffer,n=function(){if(i.g.TextEncoder){const t=new TextEncoder("utf-8");return t.encode.bind(t)}return r.from}();t.exports=function(t,e){return e?r.isBuffer(t)?t:n(String(t)):String(t)}},71228:(t,e,i)=>{"use strict";const r=i(48764).Buffer;e.test=function(t){return function(e){try{return e.cmp(t,0),!0}catch(t){return!1}}},e.bufferKeys=e.test(r.alloc(0))},82147:(t,e,i)=>{"use strict";const r=i(34918),n=i(50780);t.exports=function(t){function e(e,s,o){return"function"==typeof e?o=e:"function"==typeof s&&(o=s),i(s)||(s=i(e)?e:{}),r(n(t(e,s),s),s,o)}function i(t){return"object"==typeof t&&null!==t}for(const i of["destroy","repair"])"function"==typeof t[i]&&(e[i]=function(...e){t[i](...e)});return e.errors=r.errors,e}},51675:t=>{"use strict";function e(t){return!!t&&Object.assign({},t)}t.exports=function(...t){const i=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(i,{bufferKeys:i.bufferKeys||!1,snapshots:i.snapshots||!1,permanence:i.permanence||!1,seek:i.seek||!1,clear:i.clear||!1,getMany:i.getMany||!1,keyIterator:i.keyIterator||!1,valueIterator:i.valueIterator||!1,iteratorNextv:i.iteratorNextv||!1,iteratorAll:i.iteratorAll||!1,status:i.status||!1,idempotentOpen:i.idempotentOpen||!1,passiveOpen:i.passiveOpen||!1,serialize:i.serialize||!1,createIfMissing:i.createIfMissing||!1,errorIfExists:i.errorIfExists||!1,deferredOpen:i.deferredOpen||!1,openCallback:i.openCallback||!1,promises:i.promises||!1,streams:i.streams||!1,encodings:e(i.encodings),events:e(i.events),additionalMethods:Object.assign({},i.additionalMethods)})}},21301:(t,e,i)=>{t.exports=i(82147)(i(99558))},48133:(t,e,i)=>{"use strict";const r=i(56604).WriteError,n=i(16957),s=i(52369).R,o=i(52369).F;function a(t){this.db=t,this.batch=t.db.batch(),this.ops=[],this.length=0}a.prototype.put=function(t,e,i){try{this.batch.put(t,e,i)}catch(t){throw new r(t)}return this.ops.push({...i,type:"put",key:t,value:e}),this.length++,this},a.prototype.del=function(t,e){try{this.batch.del(t,e)}catch(t){throw new r(t)}return this.ops.push({...e,type:"del",key:t}),this.length++,this},a.prototype.clear=function(){try{this.batch.clear()}catch(t){throw new r(t)}return this.ops=[],this.length=0,this},a.prototype.write=function(t,e){const i=this.db,a=this.ops;e=s(t,e),e=n.fromCallback(e),t=o(t);try{this.batch.write(t,(function(t){if(t)return e(new r(t));i.emit("batch",a),e()}))}catch(t){throw new r(t)}return e.promise},t.exports=a},52369:(t,e)=>{"use strict";e.R=function(t,e){return"function"==typeof t?t:e},e.F=function(t){return"object"==typeof t&&null!==t?t:{}}},34918:(t,e,i)=>{"use strict";const r=i(17187).EventEmitter,n=i(89539).inherits,s=i(66944),o=i(3462),a=i(48133),h=i(56604),c=i(51675),l=i(16957),u=i(52369).R,d=i(52369).F,f=i(69350),p=h.WriteError,g=h.ReadError,y=h.NotFoundError,m=h.OpenError,v=h.InitializationError;function b(t,e,i){if(!(this instanceof b))return new b(t,e,i);let n;if(r.call(this),this.setMaxListeners(1/0),"function"==typeof e&&(i=e,e={}),e=e||{},!t||"object"!=typeof t){if(n=new v("First argument must be an abstract-leveldown compliant store"),"function"==typeof i)return f(i,n);throw n}if("string"!=typeof t.status)throw new Error(".status required, old abstract-leveldown");this.options=d(e),this._db=t,this.db=null,this.open(i||(t=>{t&&this.emit("error",t)})),this.supports=c(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(const t of Object.keys(this.supports.additionalMethods))null==this[t]&&(this[t]=function(...e){return this.db[t](...e)})}function w(t,e){return!t.isOperational()&&(f(e,new g("Database is not open")),!0)}b.prototype.emit=r.prototype.emit,b.prototype.once=r.prototype.once,n(b,r),Object.defineProperty(b.prototype,"status",{enumerable:!0,get(){return this.db.status}}),b.prototype.isOperational=function(){return"open"===this.db.status||"opening"===this.db.status},b.prototype.open=function(t,e){return"function"==typeof t&&(e=t,t=null),e=l.fromCallback(e),t||(t=this.options),this.db&&this.isOpen()?(f(e,null,this),e.promise):this.db&&this._isOpening()?(this.once("open",(()=>{e(null,this)})),e.promise):(this.db=new s(this._db),this.emit("opening"),this.db.open(t,(t=>{if(t)return e(new m(t));this.db=this._db,e(null,this),this.emit("open"),this.emit("ready")})),e.promise)},b.prototype.close=function(t){return t=l.fromCallback(t),this.isOpen()?(this.db.close(((e,...i)=>{this.emit("closed"),t(e,...i)})),this.emit("closing")):this.isClosed()?f(t):"closing"===this.db.status?this.once("closed",t):this._isOpening()&&this.once("open",(()=>{this.close(t)})),t.promise},b.prototype.isOpen=function(){return"open"===this.db.status},b.prototype._isOpening=function(){return"opening"===this.db.status},b.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},b.prototype.get=function(t,e,i){return i=u(e,i),w(this,i=l.fromCallback(i))||(e=d(e),this.db.get(t,e,(function(e,r){if(e)return e=/notfound/i.test(e)||e.notFound?new y("Key not found in database ["+t+"]",e):new g(e),i(e);i(null,r)}))),i.promise},b.prototype.getMany=function(t,e,i){return this.db.getMany(t,e,i)},b.prototype.put=function(t,e,i,r){return r=u(i,r),w(this,r=l.fromCallback(r))||(i=d(i),this.db.put(t,e,i,(i=>{if(i)return r(new p(i));this.emit("put",t,e),r()}))),r.promise},b.prototype.del=function(t,e,i){return i=u(e,i),w(this,i=l.fromCallback(i))||(e=d(e),this.db.del(t,e,(e=>{if(e)return i(new p(e));this.emit("del",t),i()}))),i.promise},b.prototype.batch=function(t,e,i){return arguments.length?(i="function"==typeof t?t:u(e,i),w(this,i=l.fromCallback(i))||(e=d(e),this.db.batch(t,e,(e=>{if(e)return i(new p(e));this.emit("batch",t),i()}))),i.promise):new a(this)},b.prototype.iterator=function(t){return this.db.iterator(t)},b.prototype.clear=function(t,e){return e=u(t,e),t=d(t),w(this,e=l.fromCallback(e))||this.db.clear(t,(i=>{if(i)return e(new p(i));this.emit("clear",t),e()})),e.promise},b.prototype.readStream=b.prototype.createReadStream=function(t){return"number"!=typeof(t=Object.assign({keys:!0,values:!0},t)).limit&&(t.limit=-1),new o(this.db.iterator(t),t)},b.prototype.keyStream=b.prototype.createKeyStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!0,values:!1}))},b.prototype.valueStream=b.prototype.createValueStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!1,values:!0}))},b.prototype.toString=function(){return"LevelUP"},b.prototype.type="levelup",b.prototype._nextTick=f,b.errors=h,t.exports=b},69350:(t,e,i)=>{"use strict";const r=i(54375);t.exports=function(t,...e){0===e.length?r(t):r((()=>t(...e)))}},63100:(t,e,i)=>{"use strict";const r=i(88785),{Multiaddr:n}=i(46584),s=i(29175),{EventEmitter:o}=i(17187),a=i(11227),h=Object.assign(a("libp2p:bootstrap"),{error:a("libp2p:bootstrap:error")});(t.exports=class extends o{constructor(t={list:[]}){if(!t.list||!t.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this._list=t.list,this._interval=t.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval((()=>this._discoverBootstrapPeers()),this._interval),h("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){this._timer&&this._list.forEach((t=>{if(!s.P2P.matches(t))return h.error("Invalid multiaddr");const e=new n(t),i=e.getPeerId();if(!i)return void h.error("Invalid bootstrap multiaddr without peer id");const o=r.createFromB58String(i);try{this.emit("peer",{id:o,multiaddrs:[e]})}catch(t){h.error("Invalid bootstrap peer id",t)}}))}stop(){this._timer&&clearInterval(this._timer),this._timer=null}}).tag="bootstrap"},73226:(t,e,i)=>{"use strict";const r=i(32114),n={16:"aes-128-ctr",32:"aes-256-ctr"};t.exports=function(t){const e=n[t.length];if(!e){const e=Object.entries(n).map((([t,e])=>`${t} (${e})`)).join(" / ");throw r(new Error(`Invalid key length ${t.length} bytes. Must be ${e}`),"ERR_INVALID_KEY_LENGTH")}return e}},98380:(t,e,i)=>{"use strict";i(8925);const r=i(3832),{toString:n}=i(92263),{fromString:s}=i(52217);t.exports={createCipheriv:(t,e,i)=>{const o=r.cipher.createCipher("AES-CTR",n(e,"ascii"));return o.start({iv:n(i,"ascii")}),{update:t=>(o.update(r.util.createBuffer(n(t,"ascii"))),s(o.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,i)=>{const o=r.cipher.createDecipher("AES-CTR",n(e,"ascii"));return o.start({iv:n(i,"ascii")}),{update:t=>(o.update(r.util.createBuffer(n(t,"ascii"))),s(o.output.getBytes(),"ascii"))}}}},88411:(t,e,i)=>{"use strict";const r=i(98380),n=i(73226);e.create=async function(t,e){const i=n(t),s=r.createCipheriv(i,t,e),o=r.createDecipheriv(i,t,e);return{encrypt:async t=>s.update(t),decrypt:async t=>o.update(t)}}},27552:(t,e,i)=>{"use strict";const{concat:r}=i(20605),{fromString:n}=i(52217),s=i(63649);t.exports={create:function({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:i=16,digest:o="SHA-256",saltLength:a=16,iterations:h=32767}={}){const c=s.get();return i*=8,{encrypt:async function(s,l){const u=c.getRandomValues(new Uint8Array(a)),d=c.getRandomValues(new Uint8Array(e)),f={name:t,iv:d},p={name:"PBKDF2",salt:u,iterations:h,hash:{name:o}},g=await c.subtle.importKey("raw",n(l),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await c.subtle.deriveKey(p,g,{name:t,length:i},!0,["encrypt"]),m=await c.subtle.encrypt(f,y,s);return r([u,f.iv,new Uint8Array(m)])},decrypt:async function(r,s){const l=r.slice(0,a),u=r.slice(a,a+e),d=r.slice(a+e),f={name:t,iv:u},p={name:"PBKDF2",salt:l,iterations:h,hash:{name:o}},g=await c.subtle.importKey("raw",n(s),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await c.subtle.deriveKey(p,g,{name:t,length:i},!0,["decrypt"]),m=await c.subtle.decrypt(f,y,d);return new Uint8Array(m)}}}}},31088:(t,e,i)=>{"use strict";const r=i(63649),n=i(38872),s={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"};e.create=async function(t,e){const i=s[t],o=await r.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:i}},!1,["sign"]);return{digest:async t=>(async(t,e)=>{const i=await r.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(i,i.byteOffset,i.byteLength)})(o,t),length:n[t]}}},38872:t=>{"use strict";t.exports={SHA1:20,SHA256:32,SHA512:64}},82204:(t,e,i)=>{"use strict";const r=i(31088),n=i(88411),s=i(14437);e.aes=n,e.hmac=r,e.keys=s,e.randomBytes=i(87503),e.pbkdf2=i(93221)},78590:(t,e,i)=>{"use strict";const r=i(32114),n=i(63649),{base64urlToBuffer:s}=i(56441),o=i(45753),{toString:a}=i(92263),{concat:h}=i(20605),{equals:c}=i(19588),l={"P-256":256,"P-384":384,"P-521":521};e.generateEphmeralKeyPair=async function(t){o(Object.keys(l),t);const e=await n.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]);return{key:d(await n.get().subtle.exportKey("jwk",e.publicKey)),genSharedKey:async(i,r)=>{let s;s=r?await n.get().subtle.importKey("jwk",p(t,r),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):e.privateKey;const o=[await n.get().subtle.importKey("jwk",f(t,i),{name:"ECDH",namedCurve:t},!1,[]),s],a=await n.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],l[t]);return new Uint8Array(a,a.byteOffset,a.byteLength)}}};const u={"P-256":32,"P-384":48,"P-521":66};function d(t){const e=u[t.crv];return h([Uint8Array.from([4]),s(t.x,e),s(t.y,e)],1+2*e)}function f(t,e){const i=u[t];if(c(!e.slice(0,1),Uint8Array.from([4])))throw r(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:a(e.slice(1,i+1),"base64url"),y:a(e.slice(1+i),"base64url"),ext:!0}}const p=(t,e)=>({...f(t,e.public),d:a(e.private,"base64url")})},96535:(t,e,i)=>{"use strict";const r=i(32114),{equals:n}=i(19588),{sha256:s}=i(56155),{base58btc:o}=i(99086),{identity:a}=i(78103),h=i(71127),c=i(17241),l=i(69716);class u{constructor(t){this._key=f(t,h.publicKeyLength)}async verify(t,e){return h.hashAndVerify(this._key,e,t)}marshal(){return this._key}get bytes(){return c.PublicKey.encode({Type:c.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return n(this.bytes,t.bytes)}async hash(){const{bytes:t}=await s.digest(this.bytes);return t}}class d{constructor(t,e){this._key=f(t,h.privateKeyLength),this._publicKey=f(e,h.publicKeyLength)}async sign(t){return h.hashAndSign(this._key,t)}get public(){return new u(this._publicKey)}marshal(){return this._key}get bytes(){return c.PrivateKey.encode({Type:c.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return n(this.bytes,t.bytes)}async hash(){const{bytes:t}=await s.digest(this.bytes);return t}async id(){const t=await a.digest(this.public.bytes);return o.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return l.export(this.bytes,t);throw r(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function f(t,e){if((t=Uint8Array.from(t||[])).length!==e)throw r(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}t.exports={Ed25519PublicKey:u,Ed25519PrivateKey:d,unmarshalEd25519PrivateKey:function(t){if(t.length>h.privateKeyLength){const e=(t=f(t,h.privateKeyLength+h.publicKeyLength)).slice(0,h.privateKeyLength),i=t.slice(h.privateKeyLength,t.length);return new d(e,i)}const e=(t=f(t,h.privateKeyLength)).slice(0,h.privateKeyLength),i=t.slice(h.publicKeyLength);return new d(e,i)},unmarshalEd25519PublicKey:function(t){return t=f(t,h.publicKeyLength),new u(t)},generateKeyPair:async function(){const{privateKey:t,publicKey:e}=await h.generateKey();return new d(t,e)},generateKeyPairFromSeed:async function(t){const{privateKey:e,publicKey:i}=await h.generateKeyFromSeed(t);return new d(e,i)}}},71127:(t,e,i)=>{"use strict";const r=i(50222);function n(t,i){const r=new Uint8Array(e.privateKeyLength);for(let e=0;e<32;e++)r[e]=t[e],r[32+e]=i[e];return r}e.publicKeyLength=32,e.privateKeyLength=64,e.generateKey=async function(){const t=r.utils.randomPrivateKey(),e=await r.getPublicKey(t);return{privateKey:n(t,e),publicKey:e}},e.generateKeyFromSeed=async function(t){if(32!==t.length)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,i=await r.getPublicKey(e);return{privateKey:n(e,i),publicKey:i}},e.hashAndSign=function(t,e){const i=t.slice(0,32);return r.sign(e,i)},e.hashAndVerify=function(t,e,i){return r.verify(e,i,t)}},55563:(t,e,i)=>{"use strict";const r=i(78590);t.exports=async t=>r.generateEphmeralKeyPair(t)},69716:(t,e,i)=>{"use strict";const{base64:r}=i(9885),n=i(27552);t.exports={export:async function(t,e){const i=n.create(),s=await i.encrypt(t,e);return r.encode(s)}}},24709:(t,e,i)=>{"use strict";const{base64:r}=i(9885),n=i(27552);t.exports={import:async function(t,e){const i=r.decode(t),s=n.create();return await s.decrypt(i,e)}}},14437:(t,e,i)=>{"use strict";const r=i(17241);i(3068),i(97450);const n=i(3832),s=i(32114),{fromString:o}=i(52217),a=i(24709),h={rsa:i(19950),ed25519:i(96535),secp256k1:i(49434)(r,i(87503))},c="secp256k1 support requires libp2p-crypto-secp256k1 package",l="ERR_MISSING_PACKAGE";function u(t){const e=h[t.toLowerCase()];if(!e){const e=Object.keys(h).join(" / ");throw s(new Error(`invalid or unsupported key type ${t}. Must be ${e}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}const d=async t=>{const e=r.PrivateKey.decode(t),i=e.Data;switch(e.Type){case r.KeyType.RSA:return h.rsa.unmarshalRsaPrivateKey(i);case r.KeyType.Ed25519:return h.ed25519.unmarshalEd25519PrivateKey(i);case r.KeyType.Secp256k1:if(h.secp256k1)return h.secp256k1.unmarshalSecp256k1PrivateKey(i);throw s(new Error(c),l);default:u(e.Type)}};t.exports={supportedKeys:h,keysPBM:r,keyStretcher:i(73494),generateEphemeralKeyPair:i(55563),generateKeyPair:async(t,e)=>u(t).generateKeyPair(e),generateKeyPairFromSeed:async(t,e,i)=>{const r=u(t);if("ed25519"!==t.toLowerCase())throw s(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return r.generateKeyPairFromSeed(e,i)},unmarshalPublicKey:t=>{const e=r.PublicKey.decode(t),i=e.Data;switch(e.Type){case r.KeyType.RSA:return h.rsa.unmarshalRsaPublicKey(i);case r.KeyType.Ed25519:return h.ed25519.unmarshalEd25519PublicKey(i);case r.KeyType.Secp256k1:if(h.secp256k1)return h.secp256k1.unmarshalSecp256k1PublicKey(i);throw s(new Error(c),l);default:u(e.Type)}},marshalPublicKey:(t,e)=>(u(e=(e||"rsa").toLowerCase()),t.bytes),unmarshalPrivateKey:d,marshalPrivateKey:(t,e)=>(u(e=(e||"rsa").toLowerCase()),t.bytes),import:async(t,e)=>{try{const i=await a.import(t,e);return d(i)}catch(t){}const i=n.pki.decryptRsaPrivateKey(t,e);if(null===i)throw s(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let r=n.asn1.toDer(n.pki.privateKeyToAsn1(i));return r=o(r.getBytes(),"ascii"),h.rsa.unmarshalRsaPrivateKey(r)}}},925:(t,e,i)=>{"use strict";i(28095);const r=i(3832),{base64urlToBigInteger:n}=i(56441);function s(t,e){return e.map((e=>n(t[e])))}t.exports={jwk2pub:function(t){return r.pki.setRsaPublicKey(...s(t,["n","e"]))},jwk2priv:function(t){return r.pki.setRsaPrivateKey(...s(t,["n","e","d","p","q","dp","dq","qi"]))}}},73494:(t,e,i)=>{"use strict";const r=i(32114),{concat:n}=i(20605),{fromString:s}=i(52217),o=i(31088),a={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};t.exports=async(t,e,i)=>{const h=a[t];if(!h){const e=Object.keys(a).join(" / ");throw r(new Error(`unknown cipher type '${t}'. Must be ${e}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw r(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");const c=h.keySize,l=h.ivSize,u=s("key expansion"),d=2*(l+c+20),f=await o.create(e,i);let p=await f.digest(u);const g=[];let y=0;for(;y<d;){const t=await f.digest(n([p,u]));let e=t.length;y+e>d&&(e=d-y),g.push(t),y+=e,p=await f.digest(p)}const m=d/2,v=n(g),b=v.slice(0,m),w=v.slice(m,d),_=t=>({iv:t.slice(0,l),cipherKey:t.slice(l,l+c),macKey:t.slice(l+c)});return{k1:_(b),k2:_(w)}}},17241:(t,e,i)=>{"use strict";var r,n,s=i(62100),o=s.Reader,a=s.Writer,h=s.util,c=s.roots["libp2p-crypto-keys"]||(s.roots["libp2p-crypto-keys"]={});c.KeyType=(r={},(n=Object.create(r))[r[0]="RSA"]=0,n[r[1]="Ed25519"]=1,n[r[2]="Secp256k1"]=2,n),c.PublicKey=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.Type=0,t.prototype.Data=h.newBuffer([]),t.encode=function(t,e){return e||(e=a.create()),e.uint32(8).int32(t.Type),e.uint32(18).bytes(t.Data),e},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new c.PublicKey;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.Type=t.int32();break;case 2:r.Data=t.bytes();break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("Type"))throw h.ProtocolError("missing required 'Type'",{instance:r});if(!r.hasOwnProperty("Data"))throw h.ProtocolError("missing required 'Data'",{instance:r});return r},t.fromObject=function(t){if(t instanceof c.PublicKey)return t;var e=new c.PublicKey;switch(t.Type){case"RSA":case 0:e.Type=0;break;case"Ed25519":case 1:e.Type=1;break;case"Secp256k1":case 2:e.Type=2}return null!=t.Data&&("string"==typeof t.Data?h.base64.decode(t.Data,e.Data=h.newBuffer(h.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.Type=e.enums===String?"RSA":0,e.bytes===String?i.Data="":(i.Data=[],e.bytes!==Array&&(i.Data=h.newBuffer(i.Data)))),null!=t.Type&&t.hasOwnProperty("Type")&&(i.Type=e.enums===String?c.KeyType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(i.Data=e.bytes===String?h.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),c.PrivateKey=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.Type=0,t.prototype.Data=h.newBuffer([]),t.encode=function(t,e){return e||(e=a.create()),e.uint32(8).int32(t.Type),e.uint32(18).bytes(t.Data),e},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new c.PrivateKey;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.Type=t.int32();break;case 2:r.Data=t.bytes();break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("Type"))throw h.ProtocolError("missing required 'Type'",{instance:r});if(!r.hasOwnProperty("Data"))throw h.ProtocolError("missing required 'Data'",{instance:r});return r},t.fromObject=function(t){if(t instanceof c.PrivateKey)return t;var e=new c.PrivateKey;switch(t.Type){case"RSA":case 0:e.Type=0;break;case"Ed25519":case 1:e.Type=1;break;case"Secp256k1":case 2:e.Type=2}return null!=t.Data&&("string"==typeof t.Data?h.base64.decode(t.Data,e.Data=h.newBuffer(h.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.Type=e.enums===String?"RSA":0,e.bytes===String?i.Data="":(i.Data=[],e.bytes!==Array&&(i.Data=h.newBuffer(i.Data)))),null!=t.Type&&t.hasOwnProperty("Type")&&(i.Type=e.enums===String?c.KeyType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(i.Data=e.bytes===String?h.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),t.exports=c},96741:(t,e,i)=>{"use strict";const r=i(63649),n=i(87503),{toString:s}=i(92263),{fromString:o}=i(52217);function a(t){return Promise.all([r.get().subtle.exportKey("jwk",t.privateKey),r.get().subtle.exportKey("jwk",t.publicKey)])}e.utils=i(94604),e.generateKey=async function(t){const e=await r.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),i=await a(e);return{privateKey:i[0],publicKey:i[1]}},e.unmarshalPrivateKey=async function(t){const e=[await r.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await(i=t,r.get().subtle.importKey("jwk",{kty:i.kty,n:i.n,e:i.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]))];var i;const n=await a({privateKey:e[0],publicKey:e[1]});return{privateKey:n[0],publicKey:n[1]}},e.getRandomValues=n,e.hashAndSign=async function(t,e){const i=await r.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await r.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},i,Uint8Array.from(e));return new Uint8Array(n,n.byteOffset,n.byteLength)},e.hashAndVerify=async function(t,e,i){const n=await r.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return r.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,i)};const{jwk2pub:h,jwk2priv:c}=i(925);function l(t,e,i,r){const n=e?h(t):c(t),a=r(s(Uint8Array.from(i),"ascii"),n);return o(a,"ascii")}e.encrypt=function(t,e){return l(t,!0,e,((t,e)=>e.encrypt(t)))},e.decrypt=function(t,e){return l(t,!1,e,((t,e)=>e.decrypt(t)))}},19950:(t,e,i)=>{"use strict";const{sha256:r}=i(56155),n=i(32114),{equals:s}=i(19588),{toString:o}=i(92263);i(63219);const a=i(3832),h=i(96741),c=i(17241),l=i(69716);class u{constructor(t){this._key=t}async verify(t,e){return h.hashAndVerify(this._key,e,t)}marshal(){return h.utils.jwkToPkix(this._key)}get bytes(){return c.PublicKey.encode({Type:c.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(t){return h.encrypt(this._key,t)}equals(t){return s(this.bytes,t.bytes)}async hash(){const{bytes:t}=await r.digest(this.bytes);return t}}class d{constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return h.getRandomValues(16)}async sign(t){return h.hashAndSign(this._key,t)}get public(){if(!this._publicKey)throw n(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new u(this._publicKey)}decrypt(t){return h.decrypt(this._key,t)}marshal(){return h.utils.jwkToPkcs1(this._key)}get bytes(){return c.PrivateKey.encode({Type:c.KeyType.RSA,Data:this.marshal()}).finish()}equals(t){return s(this.bytes,t.bytes)}async hash(){const{bytes:t}=await r.digest(this.bytes);return t}async id(){const t=await this.public.hash();return o(t,"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e){const e=new a.util.ByteBuffer(this.marshal()),i=a.asn1.fromDer(e),r=a.pki.privateKeyFromAsn1(i),n={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return a.pki.encryptRsaPrivateKey(r,t,n)}if("libp2p-key"===e)return l.export(this.bytes,t);throw n(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}t.exports={RsaPublicKey:u,RsaPrivateKey:d,unmarshalRsaPublicKey:function(t){const e=h.utils.pkixToJwk(t);return new u(e)},unmarshalRsaPrivateKey:async function(t){const e=h.utils.pkcs1ToJwk(t),i=await h.unmarshalPrivateKey(e);return new d(i.privateKey,i.publicKey)},generateKeyPair:async function(t){const e=await h.generateKey(t);return new d(e.privateKey,e.publicKey)},fromJwk:async function(t){const e=await h.unmarshalPrivateKey(t);return new d(e.privateKey,e.publicKey)}}},94604:(t,e,i)=>{"use strict";i(3068),i(28095);const r=i(3832),{bigIntegerToUintBase64url:n,base64urlToBigInteger:s}=i(56441),{fromString:o}=i(52217),{toString:a}=i(92263);e.pkcs1ToJwk=function(t){const e=r.asn1.fromDer(a(t,"ascii")),i=r.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:n(i.n),e:n(i.e),d:n(i.d),p:n(i.p),q:n(i.q),dp:n(i.dP),dq:n(i.dQ),qi:n(i.qInv),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkcs1=function(t){const e=r.pki.privateKeyToAsn1({n:s(t.n),e:s(t.e),d:s(t.d),p:s(t.p),q:s(t.q),dP:s(t.dp),dQ:s(t.dq),qInv:s(t.qi)});return o(r.asn1.toDer(e).getBytes(),"ascii")},e.pkixToJwk=function(t){const e=r.asn1.fromDer(a(t,"ascii")),i=r.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:n(i.n),e:n(i.e),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkix=function(t){const e=r.pki.publicKeyToAsn1({n:s(t.n),e:s(t.e)});return o(r.asn1.toDer(e).getBytes(),"ascii")}},49434:(t,e,i)=>{"use strict";const{sha256:r}=i(56155),n=i(32114),{equals:s}=i(19588),{toString:o}=i(92263),a=i(69716);t.exports=(t,e,h)=>{h=h||i(54056)();class c{constructor(t){h.validatePublicKey(t),this._key=t}verify(t,e){return h.hashAndVerify(this._key,e,t)}marshal(){return h.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(t){return s(this.bytes,t.bytes)}async hash(){const{bytes:t}=await r.digest(this.bytes);return t}}class l{constructor(t,e){this._key=t,this._publicKey=e||h.computePublicKey(t),h.validatePrivateKey(this._key),h.validatePublicKey(this._publicKey)}sign(t){return h.hashAndSign(this._key,t)}get public(){return new c(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(t){return s(this.bytes,t.bytes)}async hash(){const{bytes:t}=await r.digest(this.bytes);return t}async id(){const t=await this.public.hash();return o(t,"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return a.export(this.bytes,t);throw n(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}return{Secp256k1PublicKey:c,Secp256k1PrivateKey:l,unmarshalSecp256k1PrivateKey:function(t){return new l(t)},unmarshalSecp256k1PublicKey:function(t){return new c(t)},generateKeyPair:async function(){const t=await h.generateKey();return new l(t)}}}},54056:(t,e,i)=>{"use strict";const r=i(32114),n=i(79656),{sha256:s}=i(56155);t.exports=()=>({generateKey:function(){return n.utils.randomPrivateKey()},privateKeyLength:32,hashAndSign:async function(t,e){const{digest:i}=await s.digest(e);try{return await n.sign(i,t)}catch(t){throw r(t,"ERR_INVALID_INPUT")}},hashAndVerify:async function(t,e,i){try{const{digest:r}=await s.digest(i);return n.verify(e,r,t)}catch(t){throw r(t,"ERR_INVALID_INPUT")}},compressPublicKey:function(t){return n.Point.fromHex(t).toRawBytes(!0)},decompressPublicKey:function(t){return n.Point.fromHex(t).toRawBytes(!1)},validatePrivateKey:function(t){try{n.getPublicKey(t,!0)}catch(t){throw r(t,"ERR_INVALID_PRIVATE_KEY")}},validatePublicKey:function(t){try{n.Point.fromHex(t)}catch(t){throw r(t,"ERR_INVALID_PUBLIC_KEY")}},computePublicKey:function(t){try{return n.getPublicKey(t,!0)}catch(t){throw r(t,"ERR_INVALID_PRIVATE_KEY")}}})},45753:(t,e,i)=>{"use strict";const r=i(32114);t.exports=function(t,e){if(!t.includes(e)){const i=t.join(" / ");throw r(new Error(`Unknown curve: ${e}. Must be ${i}`),"ERR_INVALID_CURVE")}}},93221:(t,e,i)=>{"use strict";const r=i(98960),n=i(97116),s=i(32114),o={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};t.exports=function(t,e,i,a,h){const c=o[h];if(!c){const t=Object.keys(o).join(" / ");throw s(new Error(`Hash '${h}' is unknown or not supported. Must be ${t}`),"ERR_UNSUPPORTED_HASH_TYPE")}const l=r(t,e,i,a,c);return n.encode64(l)}},87503:(t,e,i)=>{"use strict";const r=i(1914),n=i(32114);t.exports=function(t){if(isNaN(t)||t<=0)throw n(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return r(t)}},56441:(t,e,i)=>{"use strict";i(97116),i(15764);const r=i(3832),{fromString:n}=i(52217),{toString:s}=i(92263),{concat:o}=i(20605);e.bigIntegerToUintBase64url=(t,e)=>{let i=Uint8Array.from(t.abs().toByteArray());if(i=0===i[0]?i.slice(1):i,null!=e){if(i.length>e)throw new Error("byte array longer than desired length");i=o([new Uint8Array(e-i.length),i])}return s(i,"base64url")},e.base64urlToBigInteger=t=>{const i=e.base64urlToBuffer(t);return new r.jsbn.BigInteger(s(i,"base16"),16)},e.base64urlToBuffer=(t,e)=>{let i=n(t,"base64urlpad");if(null!=e){if(i.length>e)throw new Error("byte array longer than desired length");i=o([new Uint8Array(e-i.length),i])}return i}},63649:(t,e)=>{"use strict";e.get=(t=globalThis)=>{const e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},82786:(t,e,i)=>{"use strict";const r=i(11227),n=i(88785),s=i(64593),{default:o}=i(45860),a=i(63931),h=r("libp2p-delegated-content-routing");h.error=r("libp2p-delegated-content-routing:error"),t.exports=class{constructor(t,e){if(null==t)throw new Error("missing self peerId");if(null==e)throw new Error("missing ipfs http client");this._client=e,this.peerId=t;const i={concurrency:4};this._httpQueue=new o(i),this._httpQueueRefs=new o(Object.assign({},i,{concurrency:2}));const{protocol:r,host:n,port:s}=e.getEndpointConfig();h(`enabled DelegatedContentRouting via ${r}://${n}:${s}`)}async*findProviders(t,e={}){h(`findProviders starts: ${t}`),e.timeout=e.timeout||3e4;let i=0;const r=a(),s=a();this._httpQueue.add((()=>(r.resolve(),s.promise)));try{await r.promise;for await(const{id:r,addrs:s}of this._client.dht.findProvs(t,{numProviders:e.numProviders,timeout:e.timeout}))yield{id:n.parse(r),multiaddrs:s},i++}catch(t){throw h.error("findProviders errored:",t),t}finally{s.resolve(),h(`findProviders finished: ${t} found ${i} providers`)}}async provide(t){h(`provide starts: ${t}`),await this._httpQueueRefs.add((async()=>{await this._client.block.stat(t),await s(this._client.dht.provide(t))})),h(`provide finished: ${t}`)}}},27780:(t,e,i)=>{"use strict";const r=i(88785),{base58btc:n}=i(99086),{default:s}=i(45860),o=i(63931),a=i(11227),h=a("libp2p-delegated-peer-routing");h.error=a("libp2p-delegated-peer-routing:error"),t.exports=class{constructor(t){if(null==t)throw new Error("missing ipfs http client");this._client=t,this._httpQueue=new s({concurrency:4});const{protocol:e,host:i,port:r}=t.getEndpointConfig();h(`enabled DelegatedPeerRouting via ${e}://${i}:${r}`)}async findPeer(t,e={}){let i=t;r.isPeerId(i)&&(i=t.toB58String()),h("findPeer starts: "+t),e.timeout=e.timeout||3e4;try{return await this._httpQueue.add((async()=>{const{addrs:r}=await this._client.dht.findPeer(i,{timeout:e.timeout});return{id:t,multiaddrs:r}}))}catch(t){if(t.message.includes("not found"))return;throw t}finally{h("findPeer finished: "+t)}}async*getClosestPeers(t,e={}){const i=n.encode(t).substring(1);h("getClosestPeers starts:",i),e.timeout=e.timeout||3e4;const s=o(),a=o();this._httpQueue.add((()=>(s.resolve(),a.promise)));try{await s.promise;for await(const t of this._client.dht.query(i,{timeout:e.timeout}))if(1===t.type)for(const e of t.responses)yield{id:r.parse(e.id),multiaddrs:e.addrs};else h("getClosestPeers unhandled response",t)}catch(t){throw h.error("getClosestPeers errored:",t),t}finally{a.resolve(),h("getClosestPeers finished:",i)}}}},36726:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ACCEPT_FROM_WHITELIST_DURATION_MS=e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=e.ERR_TOPIC_VALIDATOR_IGNORE=e.ERR_TOPIC_VALIDATOR_REJECT=e.TimeCacheDuration=e.GossipsubSeenTTL=e.GossipsubIWantFollowupTime=e.GossipsubMaxIHaveMessages=e.GossipsubMaxIHaveLength=e.GossipsubGraftFloodThreshold=e.GossipsubOpportunisticGraftPeers=e.GossipsubOpportunisticGraftTicks=e.GossipsubDirectConnectInitialDelay=e.GossipsubDirectConnectTicks=e.GossipsubConnectionTimeout=e.GossipsubMaxPendingConnections=e.GossipsubConnectors=e.GossipsubPruneBackoffTicks=e.GossipsubPruneBackoff=e.GossipsubPrunePeers=e.GossipsubFanoutTTL=e.GossipsubHeartbeatInterval=e.GossipsubHeartbeatInitialDelay=e.GossipsubGossipRetransmission=e.GossipsubGossipFactor=e.GossipsubDlazy=e.GossipsubHistoryGossip=e.GossipsubHistoryLength=e.GossipsubDout=e.GossipsubDscore=e.GossipsubDhi=e.GossipsubDlo=e.GossipsubD=e.GossipsubIDv11=e.GossipsubIDv10=e.FloodsubID=e.minute=e.second=void 0,e.second=1e3,e.minute=60*e.second,e.FloodsubID="/floodsub/1.0.0",e.GossipsubIDv10="/meshsub/1.0.0",e.GossipsubIDv11="/meshsub/1.1.0",e.GossipsubD=6,e.GossipsubDlo=4,e.GossipsubDhi=12,e.GossipsubDscore=4,e.GossipsubDout=2,e.GossipsubHistoryLength=5,e.GossipsubHistoryGossip=3,e.GossipsubDlazy=6,e.GossipsubGossipFactor=.25,e.GossipsubGossipRetransmission=3,e.GossipsubHeartbeatInitialDelay=100,e.GossipsubHeartbeatInterval=e.second,e.GossipsubFanoutTTL=e.minute,e.GossipsubPrunePeers=16,e.GossipsubPruneBackoff=e.minute,e.GossipsubPruneBackoffTicks=15,e.GossipsubConnectors=8,e.GossipsubMaxPendingConnections=128,e.GossipsubConnectionTimeout=30*e.second,e.GossipsubDirectConnectTicks=300,e.GossipsubDirectConnectInitialDelay=e.second,e.GossipsubOpportunisticGraftTicks=60,e.GossipsubOpportunisticGraftPeers=2,e.GossipsubGraftFloodThreshold=10*e.second,e.GossipsubMaxIHaveLength=5e3,e.GossipsubMaxIHaveMessages=10,e.GossipsubIWantFollowupTime=3*e.second,e.GossipsubSeenTTL=30*e.second,e.TimeCacheDuration=12e4,e.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",e.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,e.ACCEPT_FROM_WHITELIST_DURATION_MS=1e3},61373:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGossipPeers=void 0;const r=i(60663);e.getGossipPeers=function(t,e,i,n=(()=>!0)){const s=t.topics.get(e);if(!s)return new Set;let o=[];return s.forEach((e=>{const i=t.peers.get(e);i&&r.hasGossipProtocol(i.protocol)&&n(e)&&o.push(e)})),o=r.shuffle(o),i>0&&o.length>i&&(o=o.slice(0,i)),new Set(o)}},91259:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Heartbeat=void 0;const o=s(i(36726)),a=i(61373),h=i(60663);e.Heartbeat=class{constructor(t){this.gossipsub=t}start(){if(this._heartbeatTimer)return;const t=this._heartbeat.bind(this),e=setTimeout((()=>{t(),this._heartbeatTimer.runPeriodically(t,this.gossipsub._options.heartbeatInterval)}),o.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(t,e)=>{this._heartbeatTimer._intervalId=setInterval(t,e)},cancel:()=>{clearTimeout(e),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:t,Dlo:e,Dhi:i,Dscore:r,Dout:n,fanoutTTL:s}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const c=new Map,l=t=>{let e=c.get(t);return void 0===e&&(e=this.gossipsub.score.score(t),c.set(t,e)),e},u=new Map,d=new Map,f=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach(((s,c)=>{const p=t=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",t,c),this.gossipsub.score.prune(t,c),this.gossipsub._addBackoff(t,c),s.delete(t);const e=d.get(t);e?e.push(c):d.set(t,[c])},g=t=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",t,c),this.gossipsub.score.graft(t,c),s.add(t);const e=u.get(t);e?e.push(c):u.set(t,[c])};if(s.forEach((t=>{const e=l(t);e<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",t,e,c),p(t),f.set(t,!0))})),s.size<e){const e=this.gossipsub.backoff.get(c),i=t-s.size;a.getGossipPeers(this.gossipsub,c,i,(t=>!s.has(t)&&!this.gossipsub.direct.has(t)&&(!e||!e.has(t))&&l(t)>=0)).forEach(g)}if(s.size>i){let e=Array.from(s);e.sort(((t,e)=>l(e)-l(t))),e=e.slice(0,r).concat(h.shuffle(e.slice(r)));let i=0;if(e.slice(0,t).forEach((t=>{this.gossipsub.outbound.get(t)&&i++})),i<n){const r=t=>{const i=e[t];for(let i=t;i>0;i--)e[i]=e[i-1];e[0]=i};if(i>0){let n=i;for(let i=1;i<t&&n>0;i++)this.gossipsub.outbound.get(e[i])&&(r(i),n--)}let n=t-i;for(let i=t;i<e.length&&n>0;i++)this.gossipsub.outbound.get(e[i])&&(r(i),n--)}e.slice(t).forEach(p)}if(s.size>=e){let t=0;if(s.forEach((e=>{this.gossipsub.outbound.get(e)&&t++})),t<n){const e=n-t,i=this.gossipsub.backoff.get(c);a.getGossipPeers(this.gossipsub,c,e,(t=>!s.has(t)&&!this.gossipsub.direct.has(t)&&(!i||!i.has(t))&&l(t)>=0)).forEach(g)}}if(this.gossipsub.heartbeatTicks%o.GossipsubOpportunisticGraftTicks==0&&s.size>1){const t=Array.from(s).sort(((t,e)=>l(t)-l(e))),e=Math.floor(s.size/2),i=l(t[e]);if(i<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const t=this.gossipsub.backoff.get(c);a.getGossipPeers(this.gossipsub,c,o.GossipsubOpportunisticGraftPeers,(e=>s.has(e)&&!this.gossipsub.direct.has(e)&&(!t||!t.has(e))&&l(e)>i)).forEach((t=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,c),g(t)}))}}this.gossipsub._emitGossip(c,s)}));const p=this.gossipsub._now();this.gossipsub.lastpub.forEach(((t,e)=>{t+s<p&&(this.gossipsub.fanout.delete(e),this.gossipsub.lastpub.delete(e))})),this.gossipsub.fanout.forEach(((e,i)=>{const r=this.gossipsub.topics.get(i);if(e.forEach((t=>{(!r.has(t)||l(t)<this.gossipsub._options.scoreThresholds.publishThreshold)&&e.delete(t)})),e.size<t){const r=t-e.size;a.getGossipPeers(this.gossipsub,i,r,(t=>!e.has(t)&&!this.gossipsub.direct.has(t)&&l(t)>=this.gossipsub._options.scoreThresholds.publishThreshold)).forEach((t=>{e.add(t)}))}this.gossipsub._emitGossip(i,e)})),this.gossipsub._sendGraftPrune(u,d,f),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}},95391:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const a=s(i(56341)),h=i(67779),c=i(19609),l=s(i(36726)),u=i(91259),d=i(61373),f=i(60663),p=i(63742),g=i(77253),y=i(82729),m=i(88785),v=i(31244),b=i(36726);class w extends a.default{constructor(t,e={}){var i;const r=[l.GossipsubIDv11,l.GossipsubIDv10],n=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:l.GossipsubD,Dlo:l.GossipsubDlo,Dhi:l.GossipsubDhi,Dscore:l.GossipsubDscore,Dout:l.GossipsubDout,Dlazy:l.GossipsubDlazy,heartbeatInterval:l.GossipsubHeartbeatInterval,fanoutTTL:l.GossipsubFanoutTTL,mcacheLength:l.GossipsubHistoryLength,mcacheGossip:l.GossipsubHistoryGossip,seenTTL:l.GossipsubSeenTTL},e),{scoreParams:p.createPeerScoreParams(e.scoreParams),scoreThresholds:p.createPeerScoreThresholds(e.scoreThresholds)});n.fallbackToFloodsub&&r.push(l.FloodsubID),super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:r,libp2p:t},n)),this._options=n,this.direct=new Set(n.directPeers.map((t=>t.id.toB58String()))),this.acceptFromWhitelist=new Map,n.directPeers.forEach((e=>{t.peerStore.addressBook.add(e.id,e.addrs)})),this.seenCache=new y.SimpleTimeCache({validityMs:n.seenTTL}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=e.messageCache||new h.MessageCache(n.mcacheGossip,n.mcacheLength),this.getFastMsgIdStr=null!==(i=e.fastMsgIdFn)&&void 0!==i?i:void 0,this.fastMsgIdCache=e.fastMsgIdFn?new y.SimpleTimeCache({validityMs:n.seenTTL}):void 0,this.heartbeat=new u.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new g.IWantTracer,this._libp2p=t,this.score=new p.PeerScore(this._options.scoreParams,t.connectionManager)}_decodeRpc(t){return c.RPC.decode(t)}_encodeRpc(t){return c.RPC.encode(t).finish()}_addPeer(t,e){const i=super._addPeer(t,e);this.score.addPeer(t.toB58String());let r=!1;for(const i of this._libp2p.connectionManager.getAll(t))if("outbound"===i.stat.direction&&Array.from(i.registry.values()).some((t=>e===t.protocol))){r=!0;break}return this.outbound.set(i.id.toB58String(),r),i}_removePeer(t){const e=super._removePeer(t),i=t.toB58String();for(const t of this.mesh.values())t.delete(i);for(const t of this.fanout.values())t.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),this.acceptFromWhitelist.delete(i),e}_processRpc(t,e,i){const r=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return o(this,void 0,void 0,(function*(){return!!(yield r._processRpc.call(this,t,e,i))&&(i.control&&(yield this._processRpcControlMessage(t,i.control)),!0)}))}_processRpcControlMessage(t,e){return o(this,void 0,void 0,(function*(){if(!e)return;const i=e.ihave?this._handleIHave(t,e.ihave):[],r=e.iwant?this._handleIWant(t,e.iwant):[],n=e.graft?yield this._handleGraft(t,e.graft):[];if(e.prune&&this._handlePrune(t,e.prune),!i.length&&!r.length&&!n.length)return;const s=f.createGossipRpc(r,{iwant:i,prune:n});this._sendRpc(t,s)}))}_processRpcMessage(t){const e=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return o(this,void 0,void 0,(function*(){let i;if(this.getFastMsgIdStr&&this.fastMsgIdCache){const e=yield this.getFastMsgIdStr(t);if(i=this.fastMsgIdCache.get(e),void 0!==i)return void this.score.duplicateMessage(t,i);i=f.messageIdToString(yield this.getMsgId(t)),this.fastMsgIdCache.put(e,i)}else if(i=f.messageIdToString(yield this.getMsgId(t)),this.seenCache.has(i))return void this.score.duplicateMessage(t,i);this.seenCache.put(i),yield this.score.validateMessage(i),yield e._processRpcMessage.call(this,t)}))}_acceptFrom(t){if(this.direct.has(t))return!0;const e=Date.now(),i=this.acceptFromWhitelist.get(t);if(i&&i.messagesAccepted<b.ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&i.acceptUntil>=e)return i.messagesAccepted+=1,!0;const r=this.score.score(t);return r>=b.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(t,{messagesAccepted:0,acceptUntil:e+b.ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(t),r>=this._options.scoreThresholds.graylistThreshold}validate(t){const e=Object.create(null,{validate:{get:()=>super.validate}});return o(this,void 0,void 0,(function*(){try{yield e.validate.call(this,t)}catch(e){const i=yield this.getCanonicalMsgIdStr(t);throw this.score.rejectMessage(t,i,e.code),this.gossipTracer.rejectMessage(i,e.code),e}}))}_handleIHave(t,e){if(!e.length)return[];const i=this.score.score(t);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",t,i),[];const r=(this.peerhave.get(t)||0)+1;if(this.peerhave.set(t,r),r>l.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",t,r),[];const n=this.iasked.get(t)||0;if(n>=l.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",t,n),[];const s=new Map;if(e.forEach((({topicID:t,messageIDs:e})=>{t&&e&&this.mesh.has(t)&&e.forEach((t=>{const e=f.messageIdToString(t);this.seenCache.has(e)||s.set(e,t)}))})),!s.size)return[];let o=s.size;o+n>l.GossipsubMaxIHaveLength&&(o=l.GossipsubMaxIHaveLength-n),this.log("IHAVE: Asking for %d out of %d messages from %s",o,s.size,t);let a=Array.from(s.values());return f.shuffle(a),a=a.slice(0,o),this.iasked.set(t,n+o),this.gossipTracer.addPromise(t,a),[{messageIDs:a}]}_handleIWant(t,e){if(!e.length)return[];const i=this.score.score(t);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",t,i),[];const r=new Map;return e.forEach((({messageIDs:e})=>{e&&e.forEach((e=>{const i=f.messageIdToString(e),[n,s]=this.messageCache.getForPeer(i,t);n&&(s>l.GossipsubGossipRetransmission?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",t,e):r.set(i,n))}))})),r.size?(this.log("IWANT: Sending %d messages to %s",r.size,t),Array.from(r.values()).map(a.utils.normalizeOutRpcMessage)):[]}_handleGraft(t,e){return o(this,void 0,void 0,(function*(){const i=[],r=this.score.score(t),n=this._now();let s=this._options.doPX;return e.forEach((({topicID:e})=>{var o;if(!e)return;const a=this.mesh.get(e);if(!a)return void(s=!1);if(a.has(t))return;if(this.direct.has(t))return this.log("GRAFT: ignoring request from direct peer %s",t),i.push(e),void(s=!1);const h=null===(o=this.backoff.get(e))||void 0===o?void 0:o.get(t);if("number"==typeof h&&n<h){this.log("GRAFT: ignoring backed off peer %s",t),this.score.addPenalty(t,1),s=!1;const r=h+l.GossipsubGraftFloodThreshold-l.GossipsubPruneBackoff;return n<r&&this.score.addPenalty(t,1),this._addBackoff(t,e),void i.push(e)}return r<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,r,e),i.push(e),s=!1,void this._addBackoff(t,e)):a.size>=this._options.Dhi&&!this.outbound.get(t)?(i.push(e),void this._addBackoff(t,e)):(this.log("GRAFT: Add mesh link from %s in %s",t,e),this.score.graft(t,e),void a.add(t))})),i.length?Promise.all(i.map((e=>this._makePrune(t,e,s)))):[]}))}_handlePrune(t,e){const i=this.score.score(t);e.forEach((({topicID:e,backoff:r,peers:n})=>{if(!e)return;const s=this.mesh.get(e);if(s&&(this.log("PRUNE: Remove mesh link to %s in %s",t,e),this.score.prune(t,e),s.delete(t),"number"==typeof r&&r>0?this._doAddBackoff(t,e,1e3*r):this._addBackoff(t,e),n&&n.length)){if(i<this._options.scoreThresholds.acceptPXThreshold)return void this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,i,e);this._pxConnect(n)}}))}_addBackoff(t,e){this._doAddBackoff(t,e,l.GossipsubPruneBackoff)}_doAddBackoff(t,e,i){let r=this.backoff.get(e);r||(r=new Map,this.backoff.set(e,r));const n=this._now()+i;(r.get(t)||0)<n&&r.set(t,n)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((t,e)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",e,t),this.score.addPenalty(e,t)}))}_clearBackoff(){if(this.heartbeatTicks%l.GossipsubPruneBackoffTicks!=0)return;const t=this._now();this.backoff.forEach(((e,i)=>{e.forEach(((i,r)=>{i<t&&e.delete(r)})),0===e.size&&this.backoff.delete(i)}))}_directConnect(){if(this.heartbeatTicks%l.GossipsubDirectConnectTicks!=0)return;const t=[];this.direct.forEach((e=>{const i=this.peers.get(e);i&&i.isWritable||t.push(e)})),t.length&&t.forEach((t=>{this._connect(t)}))}_pxConnect(t){return o(this,void 0,void 0,(function*(){t.length>l.GossipsubPrunePeers&&(f.shuffle(t),t=t.slice(0,l.GossipsubPrunePeers));const e=[];yield Promise.all(t.map((t=>o(this,void 0,void 0,(function*(){if(!t.peerID)return;const i=m.createFromBytes(t.peerID).toB58String();if(!this.peers.has(i))if(t.signedPeerRecord)try{const r=yield v.openAndCertify(t.signedPeerRecord,"libp2p-peer-record"),n=r.peerId.toB58String();if(i!==n)return void this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",n,i);if(!this._libp2p.peerStore.addressBook.consumePeerRecord(r))return void this.log("bogus peer record obtained through px: could not add peer record to address book");e.push(i)}catch(t){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else e.push(i)}))))),e.length&&e.forEach((t=>this._connect(t)))}))}start(){const t=Object.create(null,{start:{get:()=>super.start}});return o(this,void 0,void 0,(function*(){yield t.start.call(this),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout((()=>{this.direct.forEach((t=>{this._connect(t)}))}),l.GossipsubDirectConnectInitialDelay)}))}stop(){const t=Object.create(null,{stop:{get:()=>super.stop}});return o(this,void 0,void 0,(function*(){yield t.stop.call(this),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),clearTimeout(this._directPeerInitial)}))}_connect(t){this.log("Initiating connection with %s",t),this._libp2p.dialProtocol(m.createFromB58String(t),this.multicodecs)}subscribe(t){super.subscribe(t),this.join(t)}unsubscribe(t){super.unsubscribe(t),this.leave(t)}join(t){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",t);const e=this.fanout.get(t);if(e)e.forEach((t=>{this.score.score(t)<0&&e.delete(t)})),e.size<this._options.D&&d.getGossipPeers(this,t,this._options.D-e.size,(t=>!e.has(t)&&!this.direct.has(t)&&this.score.score(t)>=0)).forEach((t=>e.add(t))),this.mesh.set(t,e),this.fanout.delete(t),this.lastpub.delete(t);else{const e=d.getGossipPeers(this,t,this._options.D,(t=>!this.direct.has(t)&&this.score.score(t)>=0));this.mesh.set(t,e)}this.mesh.get(t).forEach((e=>{this.log("JOIN: Add mesh link to %s in %s",e,t),this._sendGraft(e,t)}))}leave(t){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",t);const e=this.mesh.get(t);e&&(e.forEach((e=>{this.log("LEAVE: Remove mesh link to %s in %s",e,t),this._sendPrune(e,t)})),this.mesh.delete(t))}getCanonicalMsgIdStr(t){var e,i;return o(this,void 0,void 0,(function*(){return this.fastMsgIdCache&&this.getFastMsgIdStr&&null!==(i=null!==(e=this.getCachedMsgIdStr(t))&&void 0!==e?e:this.fastMsgIdCache.get(this.getFastMsgIdStr(t)))&&void 0!==i?i:f.messageIdToString(yield this.getMsgId(t))}))}getCachedMsgIdStr(t){}_publish(t){return o(this,void 0,void 0,(function*(){const e=yield this.getCanonicalMsgIdStr(t);t.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(t,e),this.gossipTracer.deliverMessage(e)),this.seenCache.put(e),this.messageCache.put(t,e);const i=new Set;t.topicIDs.forEach((e=>{const r=this.topics.get(e);if(r)if(this._options.floodPublish&&t.from===this.peerId.toB58String())r.forEach((t=>{(this.direct.has(t)||this.score.score(t)>=this._options.scoreThresholds.publishThreshold)&&i.add(t)}));else{this.direct.forEach((t=>{i.add(t)})),r.forEach((t=>{const e=this.score.score(t),r=this.peers.get(t);r&&r.protocol===l.FloodsubID&&e>=this._options.scoreThresholds.publishThreshold&&i.add(t)}));let t=this.mesh.get(e);if(!t||!t.size){if(t=this.fanout.get(e),!t){const i=d.getGossipPeers(this,e,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold));i.size>0?(t=i,this.fanout.set(e,i)):t=new Set}this.lastpub.set(e,this._now())}t.forEach((t=>{i.add(t)}))}}));const r=f.createGossipRpc([a.utils.normalizeOutRpcMessage(t)]);i.forEach((e=>{e!==t.from&&this._sendRpc(e,r)}))}))}_sendGraft(t,e){const i=[{topicID:e}],r=f.createGossipRpc([],{graft:i});this._sendRpc(t,r)}_sendPrune(t,e){return o(this,void 0,void 0,(function*(){const i=[yield this._makePrune(t,e,this._options.doPX)],r=f.createGossipRpc([],{prune:i});this._sendRpc(t,r)}))}_sendRpc(t,e){const i=this.peers.get(t);if(!i||!i.isWritable)return;const r=this.control.get(t);r&&(this._piggybackControl(t,e,r),this.control.delete(t));const n=this.gossip.get(t);n&&(this._piggybackGossip(t,e,n),this.gossip.delete(t)),i.write(c.RPC.encode(e).finish())}_piggybackControl(t,e,i){const r=(i.graft||[]).filter((({topicID:e})=>(e&&this.mesh.get(e)||new Set).has(t))),n=(i.prune||[]).filter((({topicID:e})=>!(e&&this.mesh.get(e)||new Set).has(t)));(r.length||n.length)&&(e.control?(e.control.graft=e.control.graft&&e.control.graft.concat(r),e.control.prune=e.control.prune&&e.control.prune.concat(n)):e.control={ihave:[],iwant:[],graft:r,prune:n})}_piggybackGossip(t,e,i){e.control||(e.control={ihave:[],iwant:[],graft:[],prune:[]}),e.control.ihave=i}_sendGraftPrune(t,e,i){return o(this,void 0,void 0,(function*(){const r=this._options.doPX;for(const[n,s]of t){const t=s.map((t=>({topicID:t})));let o=[];const a=e.get(n);a&&(o=yield Promise.all(a.map((t=>this._makePrune(n,t,r&&!i.get(n))))),e.delete(n));const h=f.createGossipRpc([],{graft:t,prune:o});this._sendRpc(n,h)}for(const[t,n]of e){const e=yield Promise.all(n.map((e=>this._makePrune(t,e,r&&!i.get(t))))),s=f.createGossipRpc([],{prune:e});this._sendRpc(t,s)}}))}_emitGossip(t,e){const i=this.messageCache.getGossipIDs(t);if(!i.length)return;f.shuffle(i),i.length>l.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);const r=[],n=this.topics.get(t);if(!n)return;n.forEach((t=>{const i=this.peers.get(t);i&&!e.has(t)&&!this.direct.has(t)&&f.hasGossipProtocol(i.protocol)&&this.score.score(t)>=this._options.scoreThresholds.gossipThreshold&&r.push(t)}));let s=this._options.Dlazy;const o=l.GossipsubGossipFactor*r.length;o>s&&(s=o),s>r.length?s=r.length:f.shuffle(r),r.slice(0,s).forEach((e=>{let r=i;i.length>l.GossipsubMaxIHaveLength&&(r=f.shuffle(r.slice()).slice(0,l.GossipsubMaxIHaveLength)),this._pushGossip(e,{topicID:t,messageIDs:r})}))}_flush(){for(const[t,e]of this.gossip.entries()){this.gossip.delete(t);const i=f.createGossipRpc([],{ihave:e});this._sendRpc(t,i)}for(const[t,e]of this.control.entries()){this.control.delete(t);const i=f.createGossipRpc([],{graft:e.graft,prune:e.prune});this._sendRpc(t,i)}}_pushGossip(t,e){this.log("Add gossip to %s",t);const i=this.gossip.get(t)||[];this.gossip.set(t,i.concat(e))}_now(){return Date.now()}_makePrune(t,e,i){return o(this,void 0,void 0,(function*(){if(this.peers.get(t).protocol===l.GossipsubIDv10)return{topicID:e,peers:[]};const r=l.GossipsubPruneBackoff/1e3;if(!i)return{topicID:e,peers:[],backoff:r};const n=d.getGossipPeers(this,e,l.GossipsubPrunePeers,(e=>e!==t&&this.score.score(e)>=0)),s=yield Promise.all(Array.from(n).map((t=>o(this,void 0,void 0,(function*(){const e=m.createFromB58String(t);return{peerID:e.toBytes(),signedPeerRecord:yield this._libp2p.peerStore.addressBook.getRawEnvelope(e)}})))));return{topicID:e,peers:s,backoff:r}}))}}w.multicodec=l.GossipsubIDv11,t.exports=w},67779:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageCache=void 0;const n=i(60663);e.MessageCache=class{constructor(t,e){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let t=0;t<e;t++)this.history[t]=[];this.gossip=t}put(t,e){return r(this,void 0,void 0,(function*(){this.msgs.set(e,t);const i=n.messageIdFromString(e);this.history[0].push({msgId:i,topics:t.topicIDs})}))}get(t){return this.msgs.get(n.messageIdToString(t))}getForPeer(t,e){const i=this.msgs.get(t);if(!i)return[void 0,0];let r=this.peertx.get(t);r||(r=new Map,this.peertx.set(t,r));const n=(r.get(e)||0)+1;return r.set(e,n),[i,n]}getGossipIDs(t){const e=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach((i=>{for(const r of i.topics)if(r===t){e.push(i.msgId);break}}));return e}shift(){this.history[this.history.length-1].forEach((t=>{const e=n.messageIdToString(t.msgId);this.msgs.delete(e),this.peertx.delete(e)})),this.history.pop(),this.history.unshift([])}}},19609:function(t,e,i){var r,n,s;n=[i(62100)],void 0===(s="function"==typeof(r=function(t){"use strict";var e=t.Reader,i=t.Writer,r=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(t){if(this.subscriptions=[],this.msgs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.subscriptions=r.emptyArray,s.prototype.msgs=r.emptyArray,s.prototype.control=null,Object.defineProperty(s.prototype,"_control",{get:r.oneOfGetter(o=["control"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){if(e||(e=i.create()),null!=t.subscriptions&&t.subscriptions.length)for(var r=0;r<t.subscriptions.length;++r)n.RPC.SubOpts.encode(t.subscriptions[r],e.uint32(10).fork()).ldelim();if(null!=t.msgs&&t.msgs.length)for(r=0;r<t.msgs.length;++r)n.RPC.Message.encode(t.msgs[r],e.uint32(18).fork()).ldelim();return null!=t.control&&Object.hasOwnProperty.call(t,"control")&&n.RPC.ControlMessage.encode(t.control,e.uint32(26).fork()).ldelim(),e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(n.RPC.SubOpts.decode(t,t.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(n.RPC.Message.decode(t,t.uint32()));break;case 3:s.control=n.RPC.ControlMessage.decode(t,t.uint32());break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC)return t;var e=new n.RPC;if(t.subscriptions){if(!Array.isArray(t.subscriptions))throw TypeError(".RPC.subscriptions: array expected");e.subscriptions=[];for(var i=0;i<t.subscriptions.length;++i){if("object"!=typeof t.subscriptions[i])throw TypeError(".RPC.subscriptions: object expected");e.subscriptions[i]=n.RPC.SubOpts.fromObject(t.subscriptions[i])}}if(t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".RPC.msgs: array expected");for(e.msgs=[],i=0;i<t.msgs.length;++i){if("object"!=typeof t.msgs[i])throw TypeError(".RPC.msgs: object expected");e.msgs[i]=n.RPC.Message.fromObject(t.msgs[i])}}if(null!=t.control){if("object"!=typeof t.control)throw TypeError(".RPC.control: object expected");e.control=n.RPC.ControlMessage.fromObject(t.control)}return e},s.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.subscriptions=[],i.msgs=[]),t.subscriptions&&t.subscriptions.length){i.subscriptions=[];for(var r=0;r<t.subscriptions.length;++r)i.subscriptions[r]=n.RPC.SubOpts.toObject(t.subscriptions[r],e)}if(t.msgs&&t.msgs.length)for(i.msgs=[],r=0;r<t.msgs.length;++r)i.msgs[r]=n.RPC.Message.toObject(t.msgs[r],e);return null!=t.control&&t.hasOwnProperty("control")&&(i.control=n.RPC.ControlMessage.toObject(t.control,e),e.oneofs&&(i._control="control")),i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function s(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.subscribe=null,s.prototype.topicID=null,Object.defineProperty(s.prototype,"_subscribe",{get:r.oneOfGetter(o=["subscribe"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(o=["topicID"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){return e||(e=i.create()),null!=t.subscribe&&Object.hasOwnProperty.call(t,"subscribe")&&e.uint32(8).bool(t.subscribe),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(18).string(t.topicID),e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.SubOpts;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.subscribe=t.bool();break;case 2:s.topicID=t.string();break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC.SubOpts)return t;var e=new n.RPC.SubOpts;return null!=t.subscribe&&(e.subscribe=Boolean(t.subscribe)),null!=t.topicID&&(e.topicID=String(t.topicID)),e},s.toObject=function(t,e){e||(e={});var i={};return null!=t.subscribe&&t.hasOwnProperty("subscribe")&&(i.subscribe=t.subscribe,e.oneofs&&(i._subscribe="subscribe")),null!=t.topicID&&t.hasOwnProperty("topicID")&&(i.topicID=t.topicID,e.oneofs&&(i._topicID="topicID")),i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.Message=function(){function s(t){if(this.topicIDs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.from=null,s.prototype.data=null,s.prototype.seqno=null,s.prototype.topicIDs=r.emptyArray,s.prototype.signature=null,s.prototype.key=null,Object.defineProperty(s.prototype,"_from",{get:r.oneOfGetter(o=["from"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_data",{get:r.oneOfGetter(o=["data"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_seqno",{get:r.oneOfGetter(o=["seqno"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_signature",{get:r.oneOfGetter(o=["signature"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_key",{get:r.oneOfGetter(o=["key"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){if(e||(e=i.create()),null!=t.from&&Object.hasOwnProperty.call(t,"from")&&e.uint32(10).bytes(t.from),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),null!=t.seqno&&Object.hasOwnProperty.call(t,"seqno")&&e.uint32(26).bytes(t.seqno),null!=t.topicIDs&&t.topicIDs.length)for(var r=0;r<t.topicIDs.length;++r)e.uint32(34).string(t.topicIDs[r]);return null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(50).bytes(t.key),e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.Message;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.from=t.bytes();break;case 2:s.data=t.bytes();break;case 3:s.seqno=t.bytes();break;case 4:s.topicIDs&&s.topicIDs.length||(s.topicIDs=[]),s.topicIDs.push(t.string());break;case 5:s.signature=t.bytes();break;case 6:s.key=t.bytes();break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC.Message)return t;var e=new n.RPC.Message;if(null!=t.from&&("string"==typeof t.from?r.base64.decode(t.from,e.from=r.newBuffer(r.base64.length(t.from)),0):t.from.length&&(e.from=t.from)),null!=t.data&&("string"==typeof t.data?r.base64.decode(t.data,e.data=r.newBuffer(r.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.seqno&&("string"==typeof t.seqno?r.base64.decode(t.seqno,e.seqno=r.newBuffer(r.base64.length(t.seqno)),0):t.seqno.length&&(e.seqno=t.seqno)),t.topicIDs){if(!Array.isArray(t.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");e.topicIDs=[];for(var i=0;i<t.topicIDs.length;++i)e.topicIDs[i]=String(t.topicIDs[i])}return null!=t.signature&&("string"==typeof t.signature?r.base64.decode(t.signature,e.signature=r.newBuffer(r.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.key&&("string"==typeof t.key?r.base64.decode(t.key,e.key=r.newBuffer(r.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),e},s.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.topicIDs=[]),null!=t.from&&t.hasOwnProperty("from")&&(i.from=e.bytes===String?r.base64.encode(t.from,0,t.from.length):e.bytes===Array?Array.prototype.slice.call(t.from):t.from,e.oneofs&&(i._from="from")),null!=t.data&&t.hasOwnProperty("data")&&(i.data=e.bytes===String?r.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data,e.oneofs&&(i._data="data")),null!=t.seqno&&t.hasOwnProperty("seqno")&&(i.seqno=e.bytes===String?r.base64.encode(t.seqno,0,t.seqno.length):e.bytes===Array?Array.prototype.slice.call(t.seqno):t.seqno,e.oneofs&&(i._seqno="seqno")),t.topicIDs&&t.topicIDs.length){i.topicIDs=[];for(var n=0;n<t.topicIDs.length;++n)i.topicIDs[n]=t.topicIDs[n]}return null!=t.signature&&t.hasOwnProperty("signature")&&(i.signature=e.bytes===String?r.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(i._signature="signature")),null!=t.key&&t.hasOwnProperty("key")&&(i.key=e.bytes===String?r.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(i._key="key")),i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.ControlMessage=function(){function s(t){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return s.prototype.ihave=r.emptyArray,s.prototype.iwant=r.emptyArray,s.prototype.graft=r.emptyArray,s.prototype.prune=r.emptyArray,s.encode=function(t,e){if(e||(e=i.create()),null!=t.ihave&&t.ihave.length)for(var r=0;r<t.ihave.length;++r)n.RPC.ControlIHave.encode(t.ihave[r],e.uint32(10).fork()).ldelim();if(null!=t.iwant&&t.iwant.length)for(r=0;r<t.iwant.length;++r)n.RPC.ControlIWant.encode(t.iwant[r],e.uint32(18).fork()).ldelim();if(null!=t.graft&&t.graft.length)for(r=0;r<t.graft.length;++r)n.RPC.ControlGraft.encode(t.graft[r],e.uint32(26).fork()).ldelim();if(null!=t.prune&&t.prune.length)for(r=0;r<t.prune.length;++r)n.RPC.ControlPrune.encode(t.prune[r],e.uint32(34).fork()).ldelim();return e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.ControlMessage;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.ihave&&s.ihave.length||(s.ihave=[]),s.ihave.push(n.RPC.ControlIHave.decode(t,t.uint32()));break;case 2:s.iwant&&s.iwant.length||(s.iwant=[]),s.iwant.push(n.RPC.ControlIWant.decode(t,t.uint32()));break;case 3:s.graft&&s.graft.length||(s.graft=[]),s.graft.push(n.RPC.ControlGraft.decode(t,t.uint32()));break;case 4:s.prune&&s.prune.length||(s.prune=[]),s.prune.push(n.RPC.ControlPrune.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC.ControlMessage)return t;var e=new n.RPC.ControlMessage;if(t.ihave){if(!Array.isArray(t.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");e.ihave=[];for(var i=0;i<t.ihave.length;++i){if("object"!=typeof t.ihave[i])throw TypeError(".RPC.ControlMessage.ihave: object expected");e.ihave[i]=n.RPC.ControlIHave.fromObject(t.ihave[i])}}if(t.iwant){if(!Array.isArray(t.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");for(e.iwant=[],i=0;i<t.iwant.length;++i){if("object"!=typeof t.iwant[i])throw TypeError(".RPC.ControlMessage.iwant: object expected");e.iwant[i]=n.RPC.ControlIWant.fromObject(t.iwant[i])}}if(t.graft){if(!Array.isArray(t.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");for(e.graft=[],i=0;i<t.graft.length;++i){if("object"!=typeof t.graft[i])throw TypeError(".RPC.ControlMessage.graft: object expected");e.graft[i]=n.RPC.ControlGraft.fromObject(t.graft[i])}}if(t.prune){if(!Array.isArray(t.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");for(e.prune=[],i=0;i<t.prune.length;++i){if("object"!=typeof t.prune[i])throw TypeError(".RPC.ControlMessage.prune: object expected");e.prune[i]=n.RPC.ControlPrune.fromObject(t.prune[i])}}return e},s.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.ihave=[],i.iwant=[],i.graft=[],i.prune=[]),t.ihave&&t.ihave.length){i.ihave=[];for(var r=0;r<t.ihave.length;++r)i.ihave[r]=n.RPC.ControlIHave.toObject(t.ihave[r],e)}if(t.iwant&&t.iwant.length)for(i.iwant=[],r=0;r<t.iwant.length;++r)i.iwant[r]=n.RPC.ControlIWant.toObject(t.iwant[r],e);if(t.graft&&t.graft.length)for(i.graft=[],r=0;r<t.graft.length;++r)i.graft[r]=n.RPC.ControlGraft.toObject(t.graft[r],e);if(t.prune&&t.prune.length)for(i.prune=[],r=0;r<t.prune.length;++r)i.prune[r]=n.RPC.ControlPrune.toObject(t.prune[r],e);return i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.ControlIHave=function(){function s(t){if(this.messageIDs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.topicID=null,s.prototype.messageIDs=r.emptyArray,Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(o=["topicID"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){if(e||(e=i.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),null!=t.messageIDs&&t.messageIDs.length)for(var r=0;r<t.messageIDs.length;++r)e.uint32(18).bytes(t.messageIDs[r]);return e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.ControlIHave;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.topicID=t.string();break;case 2:s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(t.bytes());break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC.ControlIHave)return t;var e=new n.RPC.ControlIHave;if(null!=t.topicID&&(e.topicID=String(t.topicID)),t.messageIDs){if(!Array.isArray(t.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");e.messageIDs=[];for(var i=0;i<t.messageIDs.length;++i)"string"==typeof t.messageIDs[i]?r.base64.decode(t.messageIDs[i],e.messageIDs[i]=r.newBuffer(r.base64.length(t.messageIDs[i])),0):t.messageIDs[i].length&&(e.messageIDs[i]=t.messageIDs[i])}return e},s.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.messageIDs=[]),null!=t.topicID&&t.hasOwnProperty("topicID")&&(i.topicID=t.topicID,e.oneofs&&(i._topicID="topicID")),t.messageIDs&&t.messageIDs.length){i.messageIDs=[];for(var n=0;n<t.messageIDs.length;++n)i.messageIDs[n]=e.bytes===String?r.base64.encode(t.messageIDs[n],0,t.messageIDs[n].length):e.bytes===Array?Array.prototype.slice.call(t.messageIDs[n]):t.messageIDs[n]}return i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.ControlIWant=function(){function s(t){if(this.messageIDs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return s.prototype.messageIDs=r.emptyArray,s.encode=function(t,e){if(e||(e=i.create()),null!=t.messageIDs&&t.messageIDs.length)for(var r=0;r<t.messageIDs.length;++r)e.uint32(10).bytes(t.messageIDs[r]);return e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.ControlIWant;t.pos<r;){var o=t.uint32();o>>>3==1?(s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(t.bytes())):t.skipType(7&o)}return s},s.fromObject=function(t){if(t instanceof n.RPC.ControlIWant)return t;var e=new n.RPC.ControlIWant;if(t.messageIDs){if(!Array.isArray(t.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");e.messageIDs=[];for(var i=0;i<t.messageIDs.length;++i)"string"==typeof t.messageIDs[i]?r.base64.decode(t.messageIDs[i],e.messageIDs[i]=r.newBuffer(r.base64.length(t.messageIDs[i])),0):t.messageIDs[i].length&&(e.messageIDs[i]=t.messageIDs[i])}return e},s.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.messageIDs=[]),t.messageIDs&&t.messageIDs.length){i.messageIDs=[];for(var n=0;n<t.messageIDs.length;++n)i.messageIDs[n]=e.bytes===String?r.base64.encode(t.messageIDs[n],0,t.messageIDs[n].length):e.bytes===Array?Array.prototype.slice.call(t.messageIDs[n]):t.messageIDs[n]}return i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.ControlGraft=function(){function s(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.topicID=null,Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(o=["topicID"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){return e||(e=i.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.ControlGraft;t.pos<r;){var o=t.uint32();o>>>3==1?s.topicID=t.string():t.skipType(7&o)}return s},s.fromObject=function(t){if(t instanceof n.RPC.ControlGraft)return t;var e=new n.RPC.ControlGraft;return null!=t.topicID&&(e.topicID=String(t.topicID)),e},s.toObject=function(t,e){e||(e={});var i={};return null!=t.topicID&&t.hasOwnProperty("topicID")&&(i.topicID=t.topicID,e.oneofs&&(i._topicID="topicID")),i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.ControlPrune=function(){function s(t){if(this.peers=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.topicID=null,s.prototype.peers=r.emptyArray,s.prototype.backoff=null,Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(o=["topicID"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_backoff",{get:r.oneOfGetter(o=["backoff"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){if(e||(e=i.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),null!=t.peers&&t.peers.length)for(var r=0;r<t.peers.length;++r)n.RPC.PeerInfo.encode(t.peers[r],e.uint32(18).fork()).ldelim();return null!=t.backoff&&Object.hasOwnProperty.call(t,"backoff")&&e.uint32(24).uint64(t.backoff),e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.ControlPrune;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.topicID=t.string();break;case 2:s.peers&&s.peers.length||(s.peers=[]),s.peers.push(n.RPC.PeerInfo.decode(t,t.uint32()));break;case 3:s.backoff=t.uint64();break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC.ControlPrune)return t;var e=new n.RPC.ControlPrune;if(null!=t.topicID&&(e.topicID=String(t.topicID)),t.peers){if(!Array.isArray(t.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");e.peers=[];for(var i=0;i<t.peers.length;++i){if("object"!=typeof t.peers[i])throw TypeError(".RPC.ControlPrune.peers: object expected");e.peers[i]=n.RPC.PeerInfo.fromObject(t.peers[i])}}return null!=t.backoff&&(r.Long?(e.backoff=r.Long.fromValue(t.backoff)).unsigned=!0:"string"==typeof t.backoff?e.backoff=parseInt(t.backoff,10):"number"==typeof t.backoff?e.backoff=t.backoff:"object"==typeof t.backoff&&(e.backoff=new r.LongBits(t.backoff.low>>>0,t.backoff.high>>>0).toNumber(!0))),e},s.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.peers=[]),null!=t.topicID&&t.hasOwnProperty("topicID")&&(i.topicID=t.topicID,e.oneofs&&(i._topicID="topicID")),t.peers&&t.peers.length){i.peers=[];for(var s=0;s<t.peers.length;++s)i.peers[s]=n.RPC.PeerInfo.toObject(t.peers[s],e)}return null!=t.backoff&&t.hasOwnProperty("backoff")&&("number"==typeof t.backoff?i.backoff=e.longs===String?String(t.backoff):t.backoff:i.backoff=e.longs===String?r.Long.prototype.toString.call(t.backoff):e.longs===Number?new r.LongBits(t.backoff.low>>>0,t.backoff.high>>>0).toNumber(!0):t.backoff,e.oneofs&&(i._backoff="backoff")),i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s.PeerInfo=function(){function s(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var o;return s.prototype.peerID=null,s.prototype.signedPeerRecord=null,Object.defineProperty(s.prototype,"_peerID",{get:r.oneOfGetter(o=["peerID"]),set:r.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_signedPeerRecord",{get:r.oneOfGetter(o=["signedPeerRecord"]),set:r.oneOfSetter(o)}),s.encode=function(t,e){return e||(e=i.create()),null!=t.peerID&&Object.hasOwnProperty.call(t,"peerID")&&e.uint32(10).bytes(t.peerID),null!=t.signedPeerRecord&&Object.hasOwnProperty.call(t,"signedPeerRecord")&&e.uint32(18).bytes(t.signedPeerRecord),e},s.decode=function(t,i){t instanceof e||(t=e.create(t));for(var r=void 0===i?t.len:t.pos+i,s=new n.RPC.PeerInfo;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.peerID=t.bytes();break;case 2:s.signedPeerRecord=t.bytes();break;default:t.skipType(7&o)}}return s},s.fromObject=function(t){if(t instanceof n.RPC.PeerInfo)return t;var e=new n.RPC.PeerInfo;return null!=t.peerID&&("string"==typeof t.peerID?r.base64.decode(t.peerID,e.peerID=r.newBuffer(r.base64.length(t.peerID)),0):t.peerID.length&&(e.peerID=t.peerID)),null!=t.signedPeerRecord&&("string"==typeof t.signedPeerRecord?r.base64.decode(t.signedPeerRecord,e.signedPeerRecord=r.newBuffer(r.base64.length(t.signedPeerRecord)),0):t.signedPeerRecord.length&&(e.signedPeerRecord=t.signedPeerRecord)),e},s.toObject=function(t,e){e||(e={});var i={};return null!=t.peerID&&t.hasOwnProperty("peerID")&&(i.peerID=e.bytes===String?r.base64.encode(t.peerID,0,t.peerID.length):e.bytes===Array?Array.prototype.slice.call(t.peerID):t.peerID,e.oneofs&&(i._peerID="peerID")),null!=t.signedPeerRecord&&t.hasOwnProperty("signedPeerRecord")&&(i.signedPeerRecord=e.bytes===String?r.base64.encode(t.signedPeerRecord,0,t.signedPeerRecord.length):e.bytes===Array?Array.prototype.slice.call(t.signedPeerRecord):t.signedPeerRecord,e.oneofs&&(i._signedPeerRecord="signedPeerRecord")),i},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),s}(),n})?r.apply(e,n):r)||(t.exports=s)},43527:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeScore=void 0,e.computeScore=function(t,e,i,r){let n=0;Object.entries(e.topics).forEach((([t,e])=>{const r=i.topics[t];if(!r)return;let s=0;if(e.inMesh){let t=e.meshTime/r.timeInMeshQuantum;t>r.timeInMeshCap&&(t=r.timeInMeshCap),s+=t*r.timeInMeshWeight}if(s+=e.firstMessageDeliveries*r.firstMessageDeliveriesWeight,e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r.meshMessageDeliveriesThreshold){const t=r.meshMessageDeliveriesThreshold-e.meshMessageDeliveries;s+=t*t*r.meshMessageDeliveriesWeight}s+=e.meshFailurePenalty*r.meshFailurePenaltyWeight,s+=e.invalidMessageDeliveries*e.invalidMessageDeliveries*r.invalidMessageDeliveriesWeight,n+=s*r.topicWeight})),i.topicScoreCap>0&&n>i.topicScoreCap&&(n=i.topicScoreCap);const s=i.appSpecificScore(t);n+=s*i.appSpecificWeight,e.ips.forEach((t=>{if(i.IPColocationFactorWhitelist.has(t))return;const e=r.get(t),s=e?e.size:0;if(s>i.IPColocationFactorThreshold){const t=s-i.IPColocationFactorThreshold;n+=t*t*i.IPColocationFactorWeight}}));const o=e.behaviourPenalty*e.behaviourPenalty;return n+=o*i.behaviourPenaltyWeight,n}},90185:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERR_INVALID_PEER_SCORE_THRESHOLDS=e.ERR_INVALID_PEER_SCORE_PARAMS=void 0,e.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS",e.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"},63742:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(40200),e),n(i(94012),e),n(i(23451),e)},54659:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDeliveries=e.DeliveryRecordStatus=void 0;const n=i(36726),s=r(i(45001));var o;!function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"}(o=e.DeliveryRecordStatus||(e.DeliveryRecordStatus={})),e.MessageDeliveries=class{constructor(){this.records=new Map,this.queue=new s.default}ensureRecord(t){let e=this.records.get(t);if(e)return e;e={status:o.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(t,e);const i={msgId:t,expire:Date.now()+n.TimeCacheDuration};return this.queue.push(i),e}gc(){const t=Date.now();let e=this.queue.peekFront();for(;e&&e.expire<t;)this.records.delete(e.msgId),this.queue.shift(),e=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}},40200:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopicScoreParams=e.validatePeerScoreParams=e.createTopicScoreParams=e.createPeerScoreParams=e.defaultTopicScoreParams=e.defaultPeerScoreParams=void 0;const r=i(90185),n=i(32114);function s(t={}){return Object.assign(Object.assign({},e.defaultTopicScoreParams),t)}function o(t){if(t.topicWeight<0)throw n(new Error("invalid topic weight; must be >= 0"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0===t.timeInMeshQuantum)throw n(new Error("invalid TimeInMeshQuantum; must be non zero"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw n(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.timeInMeshWeight&&t.timeInMeshQuantum<=0)throw n(new Error("invalid TimeInMeshQuantum; must be positive"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.timeInMeshWeight&&t.timeInMeshCap<=0)throw n(new Error("invalid TimeInMeshCap; must be positive"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw n(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.firstMessageDeliveriesWeight&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw n(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.firstMessageDeliveriesWeight&&t.firstMessageDeliveriesCap<=0)throw n(new Error("invalid FirstMessageDeliveriesCap; must be positive"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw n(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw n(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesCap<=0)throw n(new Error("invalid MeshMessageDeliveriesCap; must be positive"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesThreshold<=0)throw n(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw n(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesActivation<1e3)throw n(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw n(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshFailurePenaltyWeight&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw n(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw n(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw n(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),r.ERR_INVALID_PEER_SCORE_PARAMS)}e.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},e.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3},e.createPeerScoreParams=function(t={}){return Object.assign(Object.assign(Object.assign({},e.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce(((t,[e,i])=>(t[e]=s(i),t)),{}):{}})},e.createTopicScoreParams=s,e.validatePeerScoreParams=function(t){for(const[e,i]of Object.entries(t.topics))try{o(i)}catch(t){throw n(new Error(`invalid score parameters for topic ${e}: ${t.message}`),r.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw n(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(null===t.appSpecificScore||void 0===t.appSpecificScore)throw n(new Error("missing application specific score function"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw n(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.IPColocationFactorWeight&&t.IPColocationFactorThreshold<1)throw n(new Error("invalid IPColocationFactorThreshold; must be at least 1"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw n(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.behaviourPenaltyWeight&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw n(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw n(new Error("invalid DecayInterval; must be at least 1s"),r.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw n(new Error("invalid DecayToZero; must be between 0 and 1"),r.ERR_INVALID_PEER_SCORE_PARAMS)},e.validateTopicScoreParams=o},94012:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validatePeerScoreThresholds=e.createPeerScoreThresholds=e.defaultPeerScoreThresholds=void 0;const r=i(90185),n=i(32114);e.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20},e.createPeerScoreThresholds=function(t={}){return Object.assign(Object.assign({},e.defaultPeerScoreThresholds),t)},e.validatePeerScoreThresholds=function(t){if(t.gossipThreshold>0)throw n(new Error("invalid gossip threshold; it must be <= 0"),r.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw n(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),r.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw n(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),r.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw n(new Error("invalid accept PX threshold; it must be >= 0"),r.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw n(new Error("invalid opportunistic grafting threshold; it must be >= 0"),r.ERR_INVALID_PEER_SCORE_THRESHOLDS)}},23451:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PeerScore=void 0;const s=i(40200),o=i(56785),a=i(43527),h=i(54659),c=i(36726),l=n(i(88785)),u=i(11227),d=i(41590),{ERR_INVALID_SIGNATURE:f,ERR_MISSING_SIGNATURE:p}=d.codes,g=u("libp2p:gossipsub:score");e.PeerScore=class{constructor(t,e){s.validatePeerScoreParams(t),this.params=t,this._connectionManager=e,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new h.MessageDeliveries}start(){this._backgroundInterval?g("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),g("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),g("stopped")):g("Peer score already stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){const t=Date.now(),e=this.params.decayToZero;this.peerStats.forEach(((i,r)=>{i.connected?(Object.entries(i.topics).forEach((([i,r])=>{const n=this.params.topics[i];n&&(r.firstMessageDeliveries*=n.firstMessageDeliveriesDecay,r.firstMessageDeliveries<e&&(r.firstMessageDeliveries=0),r.meshMessageDeliveries*=n.meshMessageDeliveriesDecay,r.meshMessageDeliveries<e&&(r.meshMessageDeliveries=0),r.meshFailurePenalty*=n.meshFailurePenaltyDecay,r.meshFailurePenalty<e&&(r.meshFailurePenalty=0),r.invalidMessageDeliveries*=n.invalidMessageDeliveriesDecay,r.invalidMessageDeliveries<e&&(r.invalidMessageDeliveries=0),r.inMesh&&(r.meshTime=t-r.graftTime,r.meshTime>n.meshMessageDeliveriesActivation&&(r.meshMessageDeliveriesActive=!0)))})),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<e&&(i.behaviourPenalty=0),this.scoreCache.set(r,{score:null,cacheUntil:0})):t>i.expire&&(this._removeIPs(r,i.ips),this.peerStats.delete(r))}))}score(t){const e=this.peerStats.get(t);if(!e)return 0;const i=Date.now();let r=this.scoreCache.get(t);void 0===r&&(r={score:null,cacheUntil:0},this.scoreCache.set(t,r));const{score:n,cacheUntil:s}=r;return s>i&&null!==n?n:(r.score=a.computeScore(t,e,this.params,this.peerIPs),r.cacheUntil=i+this.params.decayInterval,r.score)}addPenalty(t,e){const i=this.peerStats.get(t);i&&(i.behaviourPenalty+=e,this.scoreCache.set(t,{score:null,cacheUntil:0}))}addPeer(t){const e=o.createPeerStats({connected:!0});this.peerStats.set(t,e);const i=this._getIPs(t);this._setIPs(t,i,e.ips),e.ips=i}removePeer(t){const e=this.peerStats.get(t);if(e){if(this.score(t)>0)return this._removeIPs(t,e.ips),void this.peerStats.delete(t);this.scoreCache.delete(t),Object.entries(e.topics).forEach((([t,e])=>{e.firstMessageDeliveries=0;const i=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.inMesh&&e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<i){const t=i-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.inMesh=!1})),e.connected=!1,e.expire=Date.now()+this.params.retainScore}}graft(t,e){const i=this.peerStats.get(t);if(!i)return;const r=o.ensureTopicStats(e,i,this.params);r&&(r.inMesh=!0,r.graftTime=Date.now(),r.meshTime=0,r.meshMessageDeliveriesActive=!1,this.scoreCache.set(t,{score:null,cacheUntil:0}))}prune(t,e){const i=this.peerStats.get(t);if(!i)return;const r=o.ensureTopicStats(e,i,this.params);if(!r)return;const n=this.params.topics[e].meshMessageDeliveriesThreshold;if(r.meshMessageDeliveriesActive&&r.meshMessageDeliveries<n){const t=n-r.meshMessageDeliveries;r.meshFailurePenalty+=t*t}r.inMesh=!1,this.scoreCache.set(t,{score:null,cacheUntil:0})}validateMessage(t){return r(this,void 0,void 0,(function*(){this.deliveryRecords.ensureRecord(t)}))}deliverMessage(t,e){return r(this,void 0,void 0,(function*(){const i=t.receivedFrom;this._markFirstMessageDelivery(i,t);const r=this.deliveryRecords.ensureRecord(e),n=Date.now();r.status===h.DeliveryRecordStatus.unknown?(r.status=h.DeliveryRecordStatus.valid,r.validated=n,r.peers.forEach((e=>{e!==i&&this._markDuplicateMessageDelivery(e,t)}))):g("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",i,n-r.firstSeen,h.DeliveryRecordStatus[r.status])}))}rejectMessage(t,e,i){return r(this,void 0,void 0,(function*(){const r=t.receivedFrom;switch(i){case p:case f:return void this._markInvalidMessageDelivery(r,t)}const n=this.deliveryRecords.ensureRecord(e);n.status===h.DeliveryRecordStatus.unknown?i!==c.ERR_TOPIC_VALIDATOR_IGNORE?(n.status=h.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(r,t),n.peers.forEach((e=>{this._markInvalidMessageDelivery(e,t)}))):n.status=h.DeliveryRecordStatus.ignored:g("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",r,Date.now()-n.firstSeen,h.DeliveryRecordStatus[n.status])}))}duplicateMessage(t,e){return r(this,void 0,void 0,(function*(){const i=t.receivedFrom,r=this.deliveryRecords.ensureRecord(e);if(!r.peers.has(i))switch(r.status){case h.DeliveryRecordStatus.unknown:r.peers.add(i);break;case h.DeliveryRecordStatus.valid:r.peers.add(i),this._markDuplicateMessageDelivery(i,t,r.validated);break;case h.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(i,t)}}))}_markInvalidMessageDelivery(t,e){const i=this.peerStats.get(t);i&&(e.topicIDs.forEach((t=>{const e=o.ensureTopicStats(t,i,this.params);e&&(e.invalidMessageDeliveries+=1)})),this.scoreCache.set(t,{score:null,cacheUntil:0}))}_markFirstMessageDelivery(t,e){const i=this.peerStats.get(t);i&&(e.topicIDs.forEach((t=>{const e=o.ensureTopicStats(t,i,this.params);if(!e)return;let r=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries+=1,e.firstMessageDeliveries>r&&(e.firstMessageDeliveries=r),e.inMesh&&(r=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries+=1,e.meshMessageDeliveries>r&&(e.meshMessageDeliveries=r))})),this.scoreCache.set(t,{score:null,cacheUntil:0}))}_markDuplicateMessageDelivery(t,e,i=0){const r=this.peerStats.get(t);if(!r)return;const n=i?Date.now():0;e.topicIDs.forEach((t=>{const e=o.ensureTopicStats(t,r,this.params);if(!e)return;if(!e.inMesh)return;const s=this.params.topics[t];if(i&&n>i+s.meshMessageDeliveriesWindow)return;const a=s.meshMessageDeliveriesCap;e.meshMessageDeliveries+=1,e.meshMessageDeliveries>a&&(e.meshMessageDeliveries=a)})),this.scoreCache.set(t,{score:null,cacheUntil:0})}_getIPs(t){return this._connectionManager.getAll(l.default.createFromB58String(t)).map((t=>t.remoteAddr.toOptions().host))}_setIPs(t,e,i){t:for(const r of e){for(const t of i)if(r===t)continue t;let e=this.peerIPs.get(r);e||(e=new Set,this.peerIPs.set(r,e)),e.add(t)}t:for(const r of i){for(const t of e)if(r===t)continue t;const i=this.peerIPs.get(r);i&&(i.delete(t),i.size||this.peerIPs.delete(r))}this.scoreCache.set(t,{score:null,cacheUntil:0})}_removeIPs(t,e){e.forEach((e=>{const i=this.peerIPs.get(e);i&&(i.delete(t),i.size||this.peerIPs.delete(e))})),this.scoreCache.set(t,{score:null,cacheUntil:0})}_updateIPs(){this.peerStats.forEach(((t,e)=>{const i=this._getIPs(e);this._setIPs(e,i,t.ips),t.ips=i,this.scoreCache.set(e,{score:null,cacheUntil:0})}))}}},56785:(t,e)=>{"use strict";function i(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ensureTopicStats=e.createTopicStats=e.createPeerStats=void 0,e.createPeerStats=function(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce(((t,[e,r])=>(t[e]=i(r),t)),{}):{}})},e.createTopicStats=i,e.ensureTopicStats=function(t,e,r){let n=e.topics[t];return n||(r.topics[t]?(e.topics[t]=n=i(),n):void 0)}},77253:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.IWantTracer=void 0;const n=i(36726),s=i(60663),o=i(41590),{ERR_INVALID_SIGNATURE:a,ERR_MISSING_SIGNATURE:h}=o.codes;e.IWantTracer=class{constructor(){this.promises=new Map}addPromise(t,e){const i=e[Math.floor(Math.random()*e.length)],r=s.messageIdToString(i);let o=this.promises.get(r);o||(o=new Map,this.promises.set(r,o)),o.has(t)||o.set(t,Date.now()+n.GossipsubIWantFollowupTime)}getBrokenPromises(){const t=Date.now(),e=new Map;return this.promises.forEach(((i,r)=>{i.forEach(((r,n)=>{r<t&&(e.set(n,(e.get(n)||0)+1),i.delete(n))})),i.size||this.promises.delete(r)})),e}deliverMessage(t){return r(this,void 0,void 0,(function*(){this.promises.delete(t)}))}rejectMessage(t,e){return r(this,void 0,void 0,(function*(){switch(e){case a:case h:return}this.promises.delete(t)}))}clear(){this.promises.clear()}}},66023:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createGossipRpc=void 0,e.createGossipRpc=function(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}},12609:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasGossipProtocol=void 0;const r=i(36726);e.hasGossipProtocol=function(t){return t===r.GossipsubIDv10||t===r.GossipsubIDv11}},60663:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(66023),e),n(i(84049),e),n(i(12609),e),n(i(72821),e)},72821:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messageIdFromString=e.messageIdToString=void 0;const r=i(52217),n=i(92263);e.messageIdToString=function(t){return n.toString(t,"base64")},e.messageIdFromString=function(t){return r.fromString(t,"base64")}},84049:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shuffle=void 0,e.shuffle=function(t){if(t.length<=1)return t;for(let e=0;e<t.length;e++){const i=Math.floor(Math.random()*Math.floor(t.length)),r=t[e];t[e]=t[i],t[i]=r}return t}},82729:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleTimeCache=void 0,e.SimpleTimeCache=class{constructor(t){this.lastPruneTime=0,this.entries=new Map,this.validityMs=t.validityMs}put(t,e){this.entries.set(t,{value:e,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){const t=Date.now();if(!(t-this.lastPruneTime<200)){this.lastPruneTime=t;for(const[e,i]of this.entries.entries()){if(!(i.validUntilMs<t))break;this.entries.delete(e)}}}has(t){return this.entries.has(t)}get(t){const e=this.entries.get(t);return e&&e.validUntilMs>=Date.now()?e.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}}},79414:(t,e,i)=>{"use strict";const r=i(88785),{Multiaddr:n}=i(46584),s=i(32114),{OPEN:o,CLOSING:a,CLOSED:h}=i(26067),c=Symbol.for("@libp2p/interface-connection/connection");class l{constructor({localAddr:t,remoteAddr:e,localPeer:i,remotePeer:a,newStream:h,close:c,getStreams:l,stat:u}){!function(t,e,i,o,a,h,c){if(t&&!n.isMultiaddr(t))throw s(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!r.isPeerId(e))throw s(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!r.isPeerId(i))throw s(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if("function"!=typeof o)throw s(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if("function"!=typeof a)throw s(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if("function"!=typeof h)throw s(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!c)throw s(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if("inbound"!==c.direction&&"outbound"!==c.direction)throw s(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!c.timeline)throw s(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!c.timeline.open)throw s(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!c.timeline.upgraded)throw s(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}(t,i,a,h,c,l,u),this.id=parseInt(String(1e9*Math.random())).toString(36)+Date.now(),this.localAddr=t,this.remoteAddr=e,this.localPeer=i,this.remotePeer=a,this._stat={...u,status:o},this._newStream=h,this._close=c,this._getStreams=l,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[c](){return!0}static isConnection(t){return Boolean(t&&t[c])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(t){if(this.stat.status===a)throw s(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===h)throw s(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(t)||(t=[t]);const{stream:e,protocol:i}=await this._newStream(t);return this.addStream(e,{protocol:i}),{stream:e,protocol:i}}addStream(t,{protocol:e,metadata:i={}}){this.registry.set(t.id,{protocol:e,...i})}removeStream(t){this.registry.delete(t)}async close(){if(this.stat.status!==h){if(this._closing)return this._closing;this.stat.status=a,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=h}}}t.exports=l},15458:(t,e,i)=>{"use strict";e.Connection=i(79414)},26067:t=>{"use strict";t.exports={OPEN:"open",CLOSING:"closing",CLOSED:"closed"}},41590:(t,e)=>{"use strict";e.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}},56341:(t,e,i)=>{"use strict";const r=i(11227),{EventEmitter:n}=i(17187),s=i(32114),{pipe:o}=i(60618),{default:a}=i(45860),h=i(98497),{codes:c}=i(41590),{RPC:l}=i(78476),u=i(14977),{SignaturePolicy:d}=i(32185),f=i(22026),{signMessage:p,verifySignature:g}=i(67703);class y extends n{constructor({debugName:t,multicodecs:e,libp2p:i,globalSignaturePolicy:n=d.StrictSign,canRelayMessage:o=!1,emitSelf:h=!1,messageProcessingConcurrency:l=10}){if("string"!=typeof t)throw new Error("a debugname `string` is required");if(!e)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");if(super(),this.log=Object.assign(r(t),{err:r(`${t}:error`)}),this.multicodecs=f.ensureArray(e),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!d[n])throw s(new Error("Invalid global signature policy"),c.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=o,this.emitSelf=h,this.topicValidators=new Map,this.queue=new a({concurrency:l}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);const t=new h({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=await this.registrar.register(t),this.log("started"),this.started=!0}async stop(){this.started&&(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach((t=>t.close())),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:t,stream:e,connection:i}){const r=i.remotePeer,n=r.toB58String(),s=this._addPeer(r,t),o=s.attachInboundStream(e);this._processMessages(n,o,s)}async _onPeerConnected(t,e){const i=t.toB58String();this.log("connected",i);try{const{stream:i,protocol:r}=await e.newStream(this.multicodecs),n=this._addPeer(t,r);await n.attachOutboundStream(i)}catch(t){this.log.err(t)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(t,e){const i=t.toB58String();this.log("connection ended",i,e?e.message:""),this._removePeer(t)}_addPeer(t,e){const i=t.toB58String(),r=this.peers.get(i);if(r)return r;this.log("new peer",i);const n=new u({id:t,protocol:e});return this.peers.set(i,n),n.once("close",(()=>this._removePeer(t))),n}_removePeer(t){if(!t)return;const e=t.toB58String(),i=this.peers.get(e);if(i){i.removeAllListeners(),i.close(),this.log("delete peer",e),this.peers.delete(e);for(const t of this.topics.values())t.delete(e);return i}}async _processMessages(t,e,i){try{await o(e,(async e=>{for await(const r of e){const e=r instanceof Uint8Array?r:r.slice(),n=this._decodeRpc(e);(async()=>{try{await this._processRpc(t,i,n)}catch(t){this.log.err(t)}})()}}))}catch(t){this._onPeerDisconnected(i.id,t)}}async _processRpc(t,e,i){this.log("rpc from",t);const r=i.subscriptions,n=i.msgs;return r.length&&(r.forEach((e=>{this._processRpcSubOpt(t,e)})),this.emit("pubsub:subscription-change",e.id,r)),this._acceptFrom(t)?(n.length&&this.queue.addAll(n.map((e=>async()=>{if(this.canRelayMessage||e.topicIDs&&e.topicIDs.some((t=>this.subscriptions.has(t))))try{const i=f.normalizeInRpcMessage(e,t);await this._processRpcMessage(i)}catch(t){this.log.err(t)}else this.log("received message we didn't subscribe to. Dropping.")}))),!0):(this.log("received message from unacceptable peer %s",t),!1)}_processRpcSubOpt(t,e){const i=e.topicID;if(!i)return;let r=this.topics.get(i);r||(r=new Set,this.topics.set(i,r)),e.subscribe?r.add(t):r.delete(t)}async _processRpcMessage(t){if(this.peerId.toB58String()!==t.from||this.emitSelf){try{await this.validate(t)}catch(t){return void this.log("Message is invalid, dropping it. %O",t)}return this._emitMessage(t),this._publish(f.normalizeOutRpcMessage(t))}}_emitMessage(t){t.topicIDs.forEach((e=>{this.subscriptions.has(e)&&this.emit(e,t)}))}getMsgId(t){const e=this.globalSignaturePolicy;switch(e){case d.StrictSign:return f.msgId(t.from,t.seqno);case d.StrictNoSign:return f.noSignMsgId(t.data);default:throw s(new Error("Cannot get message id: unhandled signature policy: "+e),c.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(t){return!0}_decodeRpc(t){return l.decode(t)}_encodeRpc(t){return l.encode(t).finish()}_sendRpc(t,e){const i=this.peers.get(t);if(i&&i.isWritable)i.write(this._encodeRpc(e));else{const e=`Cannot send RPC to ${t} as there is no open stream to it available`;this.log.err(e)}}_sendSubscriptions(t,e,i){return this._sendRpc(t,{subscriptions:e.map((t=>({topicID:t,subscribe:i})))})}async validate(t){const e=this.globalSignaturePolicy;switch(e){case d.StrictNoSign:if(t.from)throw s(new Error("StrictNoSigning: from should not be present"),c.ERR_UNEXPECTED_FROM);if(t.signature)throw s(new Error("StrictNoSigning: signature should not be present"),c.ERR_UNEXPECTED_SIGNATURE);if(t.key)throw s(new Error("StrictNoSigning: key should not be present"),c.ERR_UNEXPECTED_KEY);if(t.seqno)throw s(new Error("StrictNoSigning: seqno should not be present"),c.ERR_UNEXPECTED_SEQNO);break;case d.StrictSign:if(!t.signature)throw s(new Error("StrictSigning: Signing required and no signature was present"),c.ERR_MISSING_SIGNATURE);if(!t.seqno)throw s(new Error("StrictSigning: Signing required and no seqno was present"),c.ERR_MISSING_SEQNO);if(!await g(t))throw s(new Error("StrictSigning: Invalid message signature"),c.ERR_INVALID_SIGNATURE);break;default:throw s(new Error("Cannot validate message: unhandled signature policy: "+e),c.ERR_UNHANDLED_SIGNATURE_POLICY)}for(const e of t.topicIDs){const i=this.topicValidators.get(e);i&&await i(e,t)}}_buildMessage(t){const e=this.globalSignaturePolicy;switch(e){case d.StrictSign:return t.from=this.peerId.toB58String(),t.seqno=f.randomSeqno(),p(this.peerId,t);case d.StrictNoSign:return Promise.resolve(t);default:throw s(new Error("Cannot build message: unhandled signature policy: "+e),c.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(t){if(!this.started)throw s(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!t||"string"!=typeof t)throw s(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");const e=this.topics.get(t);return e?Array.from(e):[]}async publish(t,e){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",t,e);const i={receivedFrom:this.peerId.toB58String(),data:e,topicIDs:[t]},r=await this._buildMessage(i),n=f.normalizeInRpcMessage(r);this.emitSelf&&this._emitMessage(n),await this._publish(n)}_publish(t){throw s(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(t){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(t)||(this.subscriptions.add(t),this.peers.forEach(((e,i)=>this._sendSubscriptions(i,[t],!0))))}unsubscribe(t){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(t)&&0===this.listenerCount(t)&&(this.subscriptions.delete(t),this.peers.forEach(((e,i)=>this._sendSubscriptions(i,[t],!1))))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}}y.utils=f,y.SignaturePolicy=d,t.exports=y},78476:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-pubsub-rpc"]||(r.roots["libp2p-pubsub-rpc"]={});a.RPC=function(){function t(t){if(this.subscriptions=[],this.msgs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.subscriptions=o.emptyArray,t.prototype.msgs=o.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.subscriptions&&t.subscriptions.length)for(var i=0;i<t.subscriptions.length;++i)a.RPC.SubOpts.encode(t.subscriptions[i],e.uint32(10).fork()).ldelim();if(null!=t.msgs&&t.msgs.length)for(i=0;i<t.msgs.length;++i)a.RPC.Message.encode(t.msgs[i],e.uint32(18).fork()).ldelim();return e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.RPC;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.subscriptions&&r.subscriptions.length||(r.subscriptions=[]),r.subscriptions.push(a.RPC.SubOpts.decode(t,t.uint32()));break;case 2:r.msgs&&r.msgs.length||(r.msgs=[]),r.msgs.push(a.RPC.Message.decode(t,t.uint32()));break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.RPC)return t;var e=new a.RPC;if(t.subscriptions){if(!Array.isArray(t.subscriptions))throw TypeError(".RPC.subscriptions: array expected");e.subscriptions=[];for(var i=0;i<t.subscriptions.length;++i){if("object"!=typeof t.subscriptions[i])throw TypeError(".RPC.subscriptions: object expected");e.subscriptions[i]=a.RPC.SubOpts.fromObject(t.subscriptions[i])}}if(t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".RPC.msgs: array expected");for(e.msgs=[],i=0;i<t.msgs.length;++i){if("object"!=typeof t.msgs[i])throw TypeError(".RPC.msgs: object expected");e.msgs[i]=a.RPC.Message.fromObject(t.msgs[i])}}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.subscriptions=[],i.msgs=[]),t.subscriptions&&t.subscriptions.length){i.subscriptions=[];for(var r=0;r<t.subscriptions.length;++r)i.subscriptions[r]=a.RPC.SubOpts.toObject(t.subscriptions[r],e)}if(t.msgs&&t.msgs.length)for(i.msgs=[],r=0;r<t.msgs.length;++r)i.msgs[r]=a.RPC.Message.toObject(t.msgs[r],e);return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.SubOpts=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e;return t.prototype.subscribe=null,t.prototype.topicID=null,Object.defineProperty(t.prototype,"_subscribe",{get:o.oneOfGetter(e=["subscribe"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_topicID",{get:o.oneOfGetter(e=["topicID"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=s.create()),null!=t.subscribe&&Object.hasOwnProperty.call(t,"subscribe")&&e.uint32(8).bool(t.subscribe),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(18).string(t.topicID),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.RPC.SubOpts;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.subscribe=t.bool();break;case 2:r.topicID=t.string();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.RPC.SubOpts)return t;var e=new a.RPC.SubOpts;return null!=t.subscribe&&(e.subscribe=Boolean(t.subscribe)),null!=t.topicID&&(e.topicID=String(t.topicID)),e},t.toObject=function(t,e){e||(e={});var i={};return null!=t.subscribe&&t.hasOwnProperty("subscribe")&&(i.subscribe=t.subscribe,e.oneofs&&(i._subscribe="subscribe")),null!=t.topicID&&t.hasOwnProperty("topicID")&&(i.topicID=t.topicID,e.oneofs&&(i._topicID="topicID")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.Message=function(){function t(t){if(this.topicIDs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e;return t.prototype.from=null,t.prototype.data=null,t.prototype.seqno=null,t.prototype.topicIDs=o.emptyArray,t.prototype.signature=null,t.prototype.key=null,Object.defineProperty(t.prototype,"_from",{get:o.oneOfGetter(e=["from"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_data",{get:o.oneOfGetter(e=["data"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_seqno",{get:o.oneOfGetter(e=["seqno"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:o.oneOfGetter(e=["signature"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:o.oneOfGetter(e=["key"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=s.create()),null!=t.from&&Object.hasOwnProperty.call(t,"from")&&e.uint32(10).bytes(t.from),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),null!=t.seqno&&Object.hasOwnProperty.call(t,"seqno")&&e.uint32(26).bytes(t.seqno),null!=t.topicIDs&&t.topicIDs.length)for(var i=0;i<t.topicIDs.length;++i)e.uint32(34).string(t.topicIDs[i]);return null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(50).bytes(t.key),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.RPC.Message;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.from=t.bytes();break;case 2:r.data=t.bytes();break;case 3:r.seqno=t.bytes();break;case 4:r.topicIDs&&r.topicIDs.length||(r.topicIDs=[]),r.topicIDs.push(t.string());break;case 5:r.signature=t.bytes();break;case 6:r.key=t.bytes();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.RPC.Message)return t;var e=new a.RPC.Message;if(null!=t.from&&("string"==typeof t.from?o.base64.decode(t.from,e.from=o.newBuffer(o.base64.length(t.from)),0):t.from.length&&(e.from=t.from)),null!=t.data&&("string"==typeof t.data?o.base64.decode(t.data,e.data=o.newBuffer(o.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.seqno&&("string"==typeof t.seqno?o.base64.decode(t.seqno,e.seqno=o.newBuffer(o.base64.length(t.seqno)),0):t.seqno.length&&(e.seqno=t.seqno)),t.topicIDs){if(!Array.isArray(t.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");e.topicIDs=[];for(var i=0;i<t.topicIDs.length;++i)e.topicIDs[i]=String(t.topicIDs[i])}return null!=t.signature&&("string"==typeof t.signature?o.base64.decode(t.signature,e.signature=o.newBuffer(o.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.key&&("string"==typeof t.key?o.base64.decode(t.key,e.key=o.newBuffer(o.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.topicIDs=[]),null!=t.from&&t.hasOwnProperty("from")&&(i.from=e.bytes===String?o.base64.encode(t.from,0,t.from.length):e.bytes===Array?Array.prototype.slice.call(t.from):t.from,e.oneofs&&(i._from="from")),null!=t.data&&t.hasOwnProperty("data")&&(i.data=e.bytes===String?o.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data,e.oneofs&&(i._data="data")),null!=t.seqno&&t.hasOwnProperty("seqno")&&(i.seqno=e.bytes===String?o.base64.encode(t.seqno,0,t.seqno.length):e.bytes===Array?Array.prototype.slice.call(t.seqno):t.seqno,e.oneofs&&(i._seqno="seqno")),t.topicIDs&&t.topicIDs.length){i.topicIDs=[];for(var r=0;r<t.topicIDs.length;++r)i.topicIDs[r]=t.topicIDs[r]}return null!=t.signature&&t.hasOwnProperty("signature")&&(i.signature=e.bytes===String?o.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(i._signature="signature")),null!=t.key&&t.hasOwnProperty("key")&&(i.key=e.bytes===String?o.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(i._key="key")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t}(),t.exports=a},67703:(t,e,i)=>{"use strict";const r=i(88785),{RPC:n}=i(78476),{concat:s}=i(20605),{fromString:o}=i(52217),a=o("libp2p-pubsub:"),{normalizeOutRpcMessage:h}=i(22026);async function c(t){if(!t.from)throw new Error("Could not get the public key from the originator id");const e=r.createFromB58String(t.from);if(t.key){const i=await r.createFromPubKey(t.key);if(i.equals(e))return i.pubKey;throw new Error("Public Key does not match the originator")}if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}t.exports={messagePublicKey:c,signMessage:async function(t,e){const i=s([a,n.Message.encode(h(e)).finish()]),r=await t.privKey.sign(i);return{...e,signature:r,key:t.pubKey.bytes}},SignPrefix:a,verifySignature:async function(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");const e=s([a,n.Message.encode({...t,from:r.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await c(t)).verify(e,t.signature)}}},14977:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p-pubsub:peer-streams"),{error:r("libp2p-pubsub:peer-streams:err")}),{EventEmitter:s}=i(17187),o=i(48963),a=i(84975),{pipe:h}=i(60618),{source:c}=i(61623);t.exports=class extends s{constructor({id:t,protocol:e}){super(),this.id=t,this.protocol=e,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new AbortController,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(t){if(!this.outboundStream){const t=this.id.toB58String();throw new Error("No writable connection to "+t)}this.outboundStream.push(t)}attachInboundStream(t){return this._rawInboundStream=t,this.inboundStream=c(h(this._rawInboundStream,o.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(t){const e=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=t,this.outboundStream=a({onEnd:t=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,t&&this.emit("close")}}),h(this.outboundStream,o.encode(),this._rawOutboundStream).catch((t=>{n.error(t)})),e||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}}},32185:(t,e)=>{"use strict";e.SignaturePolicy={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"}},22026:(t,e,i)=>{"use strict";const r=i(87503),{toString:n}=i(92263),{fromString:s}=i(52217),o=i(88785),{sha256:a}=i(56155);t.exports={randomSeqno:()=>r(8),msgId:(t,e)=>{let i;i=t instanceof Uint8Array?o.createFromBytes(t).id:o.parse(t).id;const r=new Uint8Array(i.length+e.length);return r.set(i,0),r.set(e,i.length),r},noSignMsgId:t=>a.encode(t),anyMatch:(t,e)=>{let i;i=Array.isArray(e)?t=>e.indexOf(t)>-1:t=>e.has(t);for(const e of t)if(i(e))return!0;return!1},ensureArray:t=>Array.isArray(t)?t:[t],normalizeInRpcMessage:(t,e)=>{const i=Object.assign({},t);return t.from instanceof Uint8Array&&(i.from=n(t.from,"base58btc")),e&&(i.receivedFrom=e),i},normalizeOutRpcMessage:t=>{const e=Object.assign({},t);return"string"==typeof t.from&&(e.from=s(t.from,"base58btc")),"string"==typeof t.data&&(e.data=s(t.data)),e}}},7609:t=>{"use strict";const e=()=>{},i=Symbol.for("@libp2p/js-interfaces/topology");class r{constructor({min:t=0,max:i=1/0,handlers:r={}}){this.min=t,this.max=i,this._onConnect=r.onConnect||e,this._onDisconnect=r.onDisconnect||e,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[i](){return!0}static isTopology(t){return Boolean(t&&t[i])}async setRegistrar(t){this._registrar=t}disconnect(t){this._onDisconnect(t)}}t.exports=r},98497:(t,e,i)=>{"use strict";const r=i(7609),n=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),s=i(11227),o=Object.assign(s("libp2p:topology:multicodec-topology"),{error:s("libp2p:topology:multicodec-topology:error")});class a extends r{constructor({min:t,max:e,multicodecs:i,handlers:r}){if(super({min:t,max:e,handlers:r}),!i)throw new Error("one or more multicodec should be provided");if(!r)throw new Error("the handlers should be provided");if("function"!=typeof r.onConnect)throw new Error("the 'onConnect' handler must be provided");if("function"!=typeof r.onDisconnect)throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[n](){return!0}static isMulticodecTopology(t){return Boolean(t&&t[n])}async setRegistrar(t){this._registrar=t,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),await this._updatePeers(this._registrar.peerStore.getPeers())}async _updatePeers(t){for await(const{id:e,protocols:i}of t)if(this.multicodecs.filter((t=>i.includes(t))).length){this.peers.add(e.toB58String());const t=this._registrar.getConnection(e);t&&this._onConnect(e,t)}else this.peers.delete(e.toB58String())}async _onProtocolChange({peerId:t,protocols:e}){try{const i=this.peers.has(t.toB58String()),r=e.filter((t=>this.multicodecs.includes(t)));i&&0===r.length&&this._onDisconnect(t);for(const i of e)if(this.multicodecs.includes(i)){const e=await this._registrar.peerStore.get(t);return void await this._updatePeers([e])}}catch(t){o.error(t)}}async _onPeerConnect(t){try{const e=t.remotePeer,i=await this._registrar.peerStore.protoBook.get(e);if(!i)return;this.multicodecs.find((t=>i.includes(t)))&&(this.peers.add(e.toB58String()),this._onConnect(e,t))}catch(t){o.error(t)}}}t.exports=a},57236:(t,e)=>{"use strict";const i=e.second=1e3,r=e.minute=60*i,n=e.hour=60*r;e.MAX_RECORD_AGE=36*n,e.PROTOCOL_DHT="/kad/1.0.0",e.RECORD_KEY_PREFIX="/dht/record",e.PROVIDER_KEY_PREFIX="/dht/provider",e.PROVIDERS_LRU_CACHE_SIZE=256,e.PROVIDERS_VALIDITY=24*n,e.PROVIDERS_CLEANUP_INTERVAL=n,e.READ_MESSAGE_TIMEOUT=10*i,e.GET_MANY_RECORD_COUNT=16,e.K=20,e.ALPHA=3,e.QUERY_SELF_INTERVAL=Number(5*r),e.QUERY_SELF_TIMEOUT=Number(30*i),e.TABLE_REFRESH_INTERVAL=Number(5*r),e.TABLE_REFRESH_QUERY_TIMEOUT=Number(30*i),e.DEFAULT_QUERY_TIMEOUT=Number(30*i)},92643:(t,e,i)=>{"use strict";const r=i(32114),{equals:n}=i(19588),{toString:s}=i(92263),o=i(45469),{ALPHA:a}=i(57236),h=i(9170),c=o.Record,l=i(58869),u=i(32121),{valueEvent:d,queryErrorEvent:f}=i(40149),{Message:p}=i(15286),{pipe:g}=i(60618);t.exports.ContentFetching=class{constructor({peerId:t,records:e,validators:i,selectors:r,peerRouting:n,queryManager:s,routingTable:o,network:a,lan:c}){this._log=h.logger(`libp2p:kad-dht:${c?"lan":"wan"}:content-fetching`),this._peerId=t,this._records=e,this._validators=i,this._selectors=r,this._peerRouting=n,this._queryManager=s,this._routingTable=o,this._network=a}async putLocal(t,e){return this._records.put(h.bufferToKey(t),e)}async getLocal(t){this._log(`getLocal ${s(t,"base32")}`);const e=h.bufferToKey(t);this._log(`fetching record for key ${e}`);const i=await this._records.get(e);this._log(`found ${e} in local datastore`);const r=c.deserialize(i);return await o.validator.verifyRecord(this._validators,r),r}async*sendCorrectionRecord(t,e,i,s={}){this._log("sendCorrection for %b",t);const o=await h.createPutRecord(t,i);for(const{value:a,from:l}of e){if(n(a,i)){this._log("record was ok");continue}if(this._peerId.equals(l)){try{const e=h.bufferToKey(t);this._log(`Storing corrected record for key ${e}`),await this._records.put(e,o)}catch(t){this._log.error("Failed error correcting self",t)}continue}let e=!1;const u=new p(p.TYPES.PUT_VALUE,t,0);u.record=c.deserialize(o);for await(const t of this._network.sendRequest(l,u,s))"PEER_RESPONSE"===t.name&&t.record&&n(t.record.value,c.deserialize(o).value)&&(e=!0),yield t;e||(yield f({from:l,error:r(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this._log.error("Failed error correcting entry")}}async*put(t,e,i={}){this._log("put key %b value %b",t,e);const s=await h.createPutRecord(t,e),o=h.bufferToKey(t);this._log(`storing record for key ${o}`),await this._records.put(o,s),yield*g(this._peerRouting.getClosestPeers(t,{signal:i.signal}),(e=>u(e,(e=>async()=>{if("FINAL_PEER"!==e.name)return[e];const o=[],a=new p(p.TYPES.PUT_VALUE,t,0);a.record=c.deserialize(s);for await(const t of this._network.sendRequest(e.peer.id,a,i))o.push(t),"PEER_RESPONSE"===t.name&&(t.record&&n(t.record.value,c.deserialize(s).value)||o.push(f({from:e.peer.id,error:r(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return o}))),(t=>l(t,{ordered:!1,concurrency:a})),(async function*(t){for await(const e of t)yield*e}))}async*get(t,e={}){this._log("get %b",t);const i=[];for await(const r of this.getMany(t,e))"VALUE"===r.name&&i.push(r),yield r;if(!i.length)return;const n=i.map((t=>t.value));let s=0;try{s=o.selection.bestRecord(this._selectors,t,n)}catch(t){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==t.code)throw t}const a=n[s];if(this._log("GetValue %b %b",t,a),!a)throw r(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(t,i,a,e),yield i[s]}async*getMany(t,e={}){this._log("getMany values for %t",t);try{const e=await this.getLocal(t);yield d({value:e.value,from:this._peerId})}catch(e){this._log("error getting local value for %b",t,e)}const i=await h.convertBuffer(t),r=this._routingTable.closestPeers(i);this._log("found %d peers in routing table",r.length);const n=this;yield*this._queryManager.run(t,r,(async function*({peer:e,signal:i}){for await(const r of n._peerRouting.getValueOrPeers(e,t,{signal:i}))yield r,"PEER_RESPONSE"===r.name&&r.record&&(yield d({from:e,value:r.record.value}))}),e)}}},30816:(t,e,i)=>{"use strict";const{Message:r}=i(15286),n=i(58869),s=i(32121),{convertBuffer:o,logger:a}=i(9170),{ALPHA:h}=i(57236),{pipe:c}=i(60618),{queryErrorEvent:l,peerResponseEvent:u,providerEvent:d}=i(40149),{Message:{MessageType:f}}=i(18859);t.exports.ContentRouting=class{constructor({peerId:t,network:e,peerRouting:i,queryManager:r,routingTable:n,providers:s,peerStore:o,lan:h}){this._log=a(`libp2p:kad-dht:${h?"lan":"wan"}:content-routing`),this._peerId=t,this._network=e,this._peerRouting=i,this._queryManager=r,this._routingTable=n,this._providers=s,this._peerStore=o}async*provide(t,e,i={}){this._log("provide %s",t),await this._providers.addProvider(t,this._peerId);const o=new r(r.TYPES.ADD_PROVIDER,t.bytes,0);o.providerPeers=[{id:this._peerId,multiaddrs:e}];let a=0;const u=e=>async()=>{if("FINAL_PEER"!==e.name)return[e];const r=[];this._log("putProvider %s to %p",t,e.peer.id);try{this._log("sending provider record for %s to %p",t,e.peer.id);for await(const n of this._network.sendMessage(e.peer.id,o,i))"PEER_RESPONSE"===n.name&&(this._log("sent provider record for %s to %p",t,e.peer.id),a++),r.push(n)}catch(t){this._log.error("error sending provide record to peer %p",e.peer.id,t),r.push(l({from:e.peer.id,error:t}))}return r};yield*c(this._peerRouting.getClosestPeers(t.multihash.bytes,i),(t=>s(t,(t=>u(t)))),(t=>n(t,{ordered:!1,concurrency:h})),(async function*(t){for await(const e of t)yield*e})),this._log("sent provider records to %d peers",a)}async*findProviders(t,e={maxNumProviders:5}){const i=e.maxNumProviders||this._routingTable._kBucketSize,n=t.multihash.bytes,s=await o(n),a=this;this._log(`findProviders ${t}`);const h=await this._providers.getProviders(t);if(h.length){const t=[];for(const e of h.slice(0,i))t.push({id:e,multiaddrs:(await this._peerStore.addressBook.get(e)||[]).map((t=>t.multiaddr))});yield u({from:this._peerId,messageType:f.GET_PROVIDERS,providers:t}),yield d({from:this._peerId,providers:t})}if(h.length>=i)return;const c=async function*({peer:t,signal:e}){const i=new r(r.TYPES.GET_PROVIDERS,n,0);yield*a._network.sendRequest(t,i,{signal:e})},l=new Set(h.map((t=>t.toB58String())));for await(const r of this._queryManager.run(n,this._routingTable.closestPeers(s),c,e))if(yield r,"PEER_RESPONSE"===r.name){this._log(`Found ${r.providers.length} provider entries for ${t} and ${r.closer.length} closer peers`);const e=[];for(const t of r.providers)l.has(t.id.toB58String())||(l.add(t.id.toB58String()),e.push(t));if(e.length&&(yield d({from:r.from,providers:e})),l.size===i)return}}}},80953:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),n=i(88785),s=i(9170),o=i(32114),a=i(74014),{queryErrorEvent:h}=i(40149),c=s.logger("libp2p:kad-dht");t.exports={DualKadDHT:class extends r{constructor(t,e,i){super(),this._wan=t,this._lan=e,this._libp2p=i,this._wan.on("peer",(t=>{this.emit("peer",t)})),this._lan.on("peer",(t=>{this.emit("peer",t)}))}isStarted(){return this._wan.isStarted()&&this._lan.isStarted()}async enableServerMode(){await this._wan.enableServerMode()}async enableClientMode(){await this._wan.enableClientMode()}async start(){await Promise.all([this._lan.start(),this._wan.start()])}async stop(){await Promise.all([this._lan.stop(),this._wan.stop()])}async*put(t,e,i={}){let r=0,n=0;for await(const s of a(this._lan.put(t,e,i),this._wan.put(t,e,i)))yield s,"SENDING_QUERY"===s.name&&"PUT_VALUE"===s.messageName&&r++,"PEER_RESPONSE"===s.name&&"PUT_VALUE"===s.messageName&&n++;const s=null==i.minPeers?r||1:i.minPeers;if(n<s){const t=o(new Error(`Failed to put value to enough peers: ${n}/${s}`),"ERR_NOT_ENOUGH_PUT_PEERS");throw c.error(t),t}}async*get(t,e={}){let i=!1,r=!1;for await(const n of a(this._lan.get(t,e),this._wan.get(t,e)))yield n,"DIALING_PEER"===n.name&&(i=!0),"VALUE"===n.name&&(i=!0,null!=n.value&&(r=!0)),"SENDING_QUERY"===n.name&&(i=!0);if(!i)throw o(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");r||(yield h({from:this._libp2p.peerId,error:o(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(t,e={}){let i=0,r=0;const n=[],s=[this._lan];this._wan.isServer()&&s.push(this._wan);for await(const o of a(...s.map((i=>i.provide(t,e)))))yield o,"SENDING_QUERY"===o.name&&i++,"QUERY_ERROR"===o.name&&n.push(o.error),"PEER_RESPONSE"===o.name&&"ADD_PROVIDER"===o.messageName&&(c("sent provider record for %s to %p",t,o.from.id),r++);if(0===r){if(n.length)throw o(new Error(`Failed to provide to ${n.length} of ${i} peers`),"ERR_PROVIDES_FAILED",{errors:n});throw o(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}}async*findProviders(t,e={maxNumProviders:5}){yield*a(this._lan.findProviders(t,e),this._wan.findProviders(t,e))}async*findPeer(t,e={}){let i=!1;for await(const r of a(this._lan.findPeer(t,e),this._wan.findPeer(t,e)))yield r,"SENDING_QUERY"!==r.name&&"FINAL_PEER"!==r.name||(i=!0);if(!i)throw o(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(t,e={}){yield*a(this._lan.getClosestPeers(t,e),this._wan.getClosestPeers(t,e))}async getPublicKey(t,e={}){let i;c("getPublicKey %p",t);try{if(i=await this._libp2p.peerStore.get(t),i.pubKey)return c("getPublicKey: found local copy"),i.pubKey;if(i.id.pubKey)return c("getPublicKey: found local copy"),i.id.pubKey}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}const r=await Promise.all([this._lan.getPublicKey(t,e),this._wan.getPublicKey(t,e)]);if(r[0]&&r[1]&&!r[0].equals(r[1]))throw o(new Error("Inconsistent public key loaded from wan and lan DHTs"),"ERR_FAILED_TO_LOAD_KEY");const s=r[0]||r[1];if(!s)throw o(new Error("Failed to load public key"),"ERR_FAILED_TO_LOAD_KEY");const a=new n(t.id,void 0,s),h=(i&&i.addresses||[]).map((t=>t.multiaddr));return await this._libp2p.peerStore.addressBook.add(a,h),await this._libp2p.peerStore.keyBook.set(a,s),s}async refreshRoutingTable(){await Promise.all([this._lan.refreshRoutingTable(),this._wan.refreshRoutingTable()])}}}},40683:(t,e,i)=>{"use strict";const{KadDHT:r}=i(65051),{DualKadDHT:n}=i(80953);t.exports={create:t=>new n(new r({...t,protocol:"/ipfs/kad/1.0.0",lan:!1}),new r({...t,protocol:"/ipfs/lan/kad/1.0.0",clientMode:!1,lan:!0}),t.libp2p)}},65051:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),n=i(82204),s=i(45469),{MemoryDatastore:o}=i(43462),{RoutingTable:a}=i(23477),{RoutingTableRefresh:h}=i(12776),c=i(9170),{K:l,QUERY_SELF_INTERVAL:u,RECORD_KEY_PREFIX:d}=i(57236),{Network:f}=i(23527),{ContentFetching:p}=i(92643),{ContentRouting:g}=i(30816),{PeerRouting:y}=i(7615),{Providers:m}=i(17539),{QueryManager:v}=i(69666),{RPC:b}=i(67857),{TopologyListener:w}=i(81015),{QuerySelf:_}=i(54072),{removePrivateAddresses:x,removePublicAddresses:E}=i(9170),{KeyTransformDatastore:S}=i(27294),{Key:T}=i(41914);class A{constructor(t){this._prefix=t,this._prefix.startsWith("/")&&(this._prefix=this._prefix.substring(1))}convert(t){return new T(`/${this._prefix}${t}`)}invert(t){const e=t.namespaces();return e[0]===this._prefix&&e.shift(),T.withNamespaces(e)}}t.exports={KadDHT:class extends r{constructor({libp2p:t,kBucketSize:e=l,clientMode:i=!0,validators:r={},selectors:n={},querySelfInterval:x=u,lan:E=!0,protocol:T="/ipfs/lan/kad/1.0.0",bootstrapPeers:C=[]}){super(),this._running=!1,this._log=c.logger("libp2p:kad-dht:"+(E?"lan":"wan")),this._libp2p=t,this._protocol=T,this._kBucketSize=e,this._clientMode=i,this._bootstrapPeers=C,this._routingTable=new a({peerId:t.peerId,dialer:t,kBucketSize:e,metrics:t.metrics,lan:E});const k=t.datastore||new o,R=new S(k,new A(d));this._providers=new m({providers:k}),this._lan=E,this._validators={pk:s.validator.validators.pk,...r},this._selectors={pk:s.selection.selectors.pk,...n},this._network=new f({dialer:t,protocol:this._protocol,lan:E}),this._queryManager=new v({peerId:t.peerId,disjointPaths:Math.ceil(e/2),metrics:t.metrics,lan:E}),this._peerRouting=new y({peerId:t.peerId,routingTable:this._routingTable,peerStore:t.peerStore,network:this._network,validators:this._validators,queryManager:this._queryManager,lan:E}),this._contentFetching=new p({peerId:t.peerId,records:R,validators:this._validators,selectors:this._selectors,peerRouting:this._peerRouting,queryManager:this._queryManager,routingTable:this._routingTable,network:this._network,lan:E}),this._contentRouting=new g({peerId:t.peerId,network:this._network,peerRouting:this._peerRouting,queryManager:this._queryManager,routingTable:this._routingTable,providers:this._providers,peerStore:t.peerStore,lan:E}),this._routingTableRefresh=new h({peerRouting:this._peerRouting,routingTable:this._routingTable,lan:E}),this._rpc=new b({routingTable:this._routingTable,peerId:t.peerId,providers:this._providers,peerStore:t.peerStore,addressable:t,peerRouting:this._peerRouting,records:R,validators:this._validators,lan:E}),this._topologyListener=new w({registrar:t.registrar,protocol:this._protocol,lan:E}),this._querySelf=new _({peerId:t.peerId,peerRouting:this._peerRouting,interval:x,lan:E}),this._network.on("peer",(t=>{this.onPeerConnect(t).catch((e=>{this._log.error(`could not add ${t.id} to routing table`,e)})),this.emit("peer",t)})),this._topologyListener.on("peer",(async t=>{const e={id:t,multiaddrs:(await this._libp2p.peerStore.addressBook.get(t)).map((t=>t.multiaddr))};this.onPeerConnect(e).catch((t=>{this._log.error(`could not add ${e.id} to routing table`,t)}))}))}async onPeerConnect(t){if(this._log("peer %p connected",t.id),(t=this._lan?E(t):x(t)).multiaddrs.length)try{await this._routingTable.add(t.id)}catch(e){this._log.error("could not add %p to routing table",t.id,e)}else this._log("ignoring %p as they do not have any %s addresses in %s",t.id,this._lan?"private":"public",t.multiaddrs.map((t=>t.toString())))}isStarted(){return this._running}isServer(){return!this._clientMode}async enableServerMode(){this._log("enabling server mode"),this._clientMode=!1,await this._libp2p.handle(this._protocol,this._rpc.onIncomingStream.bind(this._rpc))}async enableClientMode(){this._log("enabling client mode"),this._clientMode=!0,await this._libp2p.unhandle(this._protocol)}async start(){this._running=!0,this._clientMode?await this.enableClientMode():await this.enableServerMode(),await Promise.all([this._providers.start(),this._queryManager.start(),this._network.start(),this._routingTable.start(),this._topologyListener.start(),this._querySelf.start()]),await Promise.all(this._bootstrapPeers.map((t=>this._routingTable.add(t.id)))),await this._routingTableRefresh.start(),await this.refreshRoutingTable()}async stop(){this._running=!1,await Promise.all([this._providers.stop(),this._queryManager.stop(),this._network.stop(),this._routingTable.stop(),this._routingTableRefresh.stop(),this._topologyListener.stop(),this._querySelf.stop()])}async*put(t,e,i={}){yield*this._contentFetching.put(t,e,i)}async*get(t,e={}){yield*this._contentFetching.get(t,e)}async*provide(t,e={}){yield*this._contentRouting.provide(t,this._libp2p.multiaddrs,e)}async*findProviders(t,e={maxNumProviders:5}){yield*this._contentRouting.findProviders(t,e)}async*findPeer(t,e={}){yield*this._peerRouting.findPeer(t,e)}async*getClosestPeers(t,e={}){yield*this._peerRouting.getClosestPeers(t,e)}async getPublicKey(t,e={}){this._log("getPublicKey %p",t);for await(const i of this._peerRouting.getPublicKeyFromNode(t,e))if("VALUE"===i.name)return n.keys.unmarshalPublicKey(i.value);const i=c.keyForPublicKey(t);for await(const t of this.get(i,e))if("VALUE"===t.name)return n.keys.unmarshalPublicKey(t.value)}async refreshRoutingTable(){await this._routingTableRefresh.refreshTable(!0)}}}},18859:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-dht-message"]||(r.roots["libp2p-dht-message"]={});a.Record=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e;return t.prototype.key=null,t.prototype.value=null,t.prototype.author=null,t.prototype.signature=null,t.prototype.timeReceived=null,Object.defineProperty(t.prototype,"_key",{get:o.oneOfGetter(e=["key"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_value",{get:o.oneOfGetter(e=["value"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_author",{get:o.oneOfGetter(e=["author"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:o.oneOfGetter(e=["signature"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_timeReceived",{get:o.oneOfGetter(e=["timeReceived"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=s.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).bytes(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).bytes(t.value),null!=t.author&&Object.hasOwnProperty.call(t,"author")&&e.uint32(26).bytes(t.author),null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(34).bytes(t.signature),null!=t.timeReceived&&Object.hasOwnProperty.call(t,"timeReceived")&&e.uint32(42).string(t.timeReceived),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Record;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.key=t.bytes();break;case 2:r.value=t.bytes();break;case 3:r.author=t.bytes();break;case 4:r.signature=t.bytes();break;case 5:r.timeReceived=t.string();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Record)return t;var e=new a.Record;return null!=t.key&&("string"==typeof t.key?o.base64.decode(t.key,e.key=o.newBuffer(o.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),null!=t.value&&("string"==typeof t.value?o.base64.decode(t.value,e.value=o.newBuffer(o.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),null!=t.author&&("string"==typeof t.author?o.base64.decode(t.author,e.author=o.newBuffer(o.base64.length(t.author)),0):t.author.length&&(e.author=t.author)),null!=t.signature&&("string"==typeof t.signature?o.base64.decode(t.signature,e.signature=o.newBuffer(o.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.timeReceived&&(e.timeReceived=String(t.timeReceived)),e},t.toObject=function(t,e){e||(e={});var i={};return null!=t.key&&t.hasOwnProperty("key")&&(i.key=e.bytes===String?o.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(i._key="key")),null!=t.value&&t.hasOwnProperty("value")&&(i.value=e.bytes===String?o.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value,e.oneofs&&(i._value="value")),null!=t.author&&t.hasOwnProperty("author")&&(i.author=e.bytes===String?o.base64.encode(t.author,0,t.author.length):e.bytes===Array?Array.prototype.slice.call(t.author):t.author,e.oneofs&&(i._author="author")),null!=t.signature&&t.hasOwnProperty("signature")&&(i.signature=e.bytes===String?o.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(i._signature="signature")),null!=t.timeReceived&&t.hasOwnProperty("timeReceived")&&(i.timeReceived=t.timeReceived,e.oneofs&&(i._timeReceived="timeReceived")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),a.Message=function(){function t(t){if(this.closerPeers=[],this.providerPeers=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e,i,h;return t.prototype.type=null,t.prototype.clusterLevelRaw=null,t.prototype.key=null,t.prototype.record=null,t.prototype.closerPeers=o.emptyArray,t.prototype.providerPeers=o.emptyArray,Object.defineProperty(t.prototype,"_type",{get:o.oneOfGetter(e=["type"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_clusterLevelRaw",{get:o.oneOfGetter(e=["clusterLevelRaw"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:o.oneOfGetter(e=["key"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_record",{get:o.oneOfGetter(e=["record"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=s.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(18).bytes(t.key),null!=t.record&&Object.hasOwnProperty.call(t,"record")&&e.uint32(26).bytes(t.record),null!=t.closerPeers&&t.closerPeers.length)for(var i=0;i<t.closerPeers.length;++i)a.Message.Peer.encode(t.closerPeers[i],e.uint32(66).fork()).ldelim();if(null!=t.providerPeers&&t.providerPeers.length)for(i=0;i<t.providerPeers.length;++i)a.Message.Peer.encode(t.providerPeers[i],e.uint32(74).fork()).ldelim();return null!=t.clusterLevelRaw&&Object.hasOwnProperty.call(t,"clusterLevelRaw")&&e.uint32(80).int32(t.clusterLevelRaw),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Message;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.type=t.int32();break;case 10:r.clusterLevelRaw=t.int32();break;case 2:r.key=t.bytes();break;case 3:r.record=t.bytes();break;case 8:r.closerPeers&&r.closerPeers.length||(r.closerPeers=[]),r.closerPeers.push(a.Message.Peer.decode(t,t.uint32()));break;case 9:r.providerPeers&&r.providerPeers.length||(r.providerPeers=[]),r.providerPeers.push(a.Message.Peer.decode(t,t.uint32()));break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Message)return t;var e=new a.Message;switch(t.type){case"PUT_VALUE":case 0:e.type=0;break;case"GET_VALUE":case 1:e.type=1;break;case"ADD_PROVIDER":case 2:e.type=2;break;case"GET_PROVIDERS":case 3:e.type=3;break;case"FIND_NODE":case 4:e.type=4;break;case"PING":case 5:e.type=5}if(null!=t.clusterLevelRaw&&(e.clusterLevelRaw=0|t.clusterLevelRaw),null!=t.key&&("string"==typeof t.key?o.base64.decode(t.key,e.key=o.newBuffer(o.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),null!=t.record&&("string"==typeof t.record?o.base64.decode(t.record,e.record=o.newBuffer(o.base64.length(t.record)),0):t.record.length&&(e.record=t.record)),t.closerPeers){if(!Array.isArray(t.closerPeers))throw TypeError(".Message.closerPeers: array expected");e.closerPeers=[];for(var i=0;i<t.closerPeers.length;++i){if("object"!=typeof t.closerPeers[i])throw TypeError(".Message.closerPeers: object expected");e.closerPeers[i]=a.Message.Peer.fromObject(t.closerPeers[i])}}if(t.providerPeers){if(!Array.isArray(t.providerPeers))throw TypeError(".Message.providerPeers: array expected");for(e.providerPeers=[],i=0;i<t.providerPeers.length;++i){if("object"!=typeof t.providerPeers[i])throw TypeError(".Message.providerPeers: object expected");e.providerPeers[i]=a.Message.Peer.fromObject(t.providerPeers[i])}}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.closerPeers=[],i.providerPeers=[]),null!=t.type&&t.hasOwnProperty("type")&&(i.type=e.enums===String?a.Message.MessageType[t.type]:t.type,e.oneofs&&(i._type="type")),null!=t.key&&t.hasOwnProperty("key")&&(i.key=e.bytes===String?o.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(i._key="key")),null!=t.record&&t.hasOwnProperty("record")&&(i.record=e.bytes===String?o.base64.encode(t.record,0,t.record.length):e.bytes===Array?Array.prototype.slice.call(t.record):t.record,e.oneofs&&(i._record="record")),t.closerPeers&&t.closerPeers.length){i.closerPeers=[];for(var r=0;r<t.closerPeers.length;++r)i.closerPeers[r]=a.Message.Peer.toObject(t.closerPeers[r],e)}if(t.providerPeers&&t.providerPeers.length)for(i.providerPeers=[],r=0;r<t.providerPeers.length;++r)i.providerPeers[r]=a.Message.Peer.toObject(t.providerPeers[r],e);return null!=t.clusterLevelRaw&&t.hasOwnProperty("clusterLevelRaw")&&(i.clusterLevelRaw=t.clusterLevelRaw,e.oneofs&&(i._clusterLevelRaw="clusterLevelRaw")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.MessageType=(i={},(h=Object.create(i))[i[0]="PUT_VALUE"]=0,h[i[1]="GET_VALUE"]=1,h[i[2]="ADD_PROVIDER"]=2,h[i[3]="GET_PROVIDERS"]=3,h[i[4]="FIND_NODE"]=4,h[i[5]="PING"]=5,h),t.ConnectionType=function(){var t={},e=Object.create(t);return e[t[0]="NOT_CONNECTED"]=0,e[t[1]="CONNECTED"]=1,e[t[2]="CAN_CONNECT"]=2,e[t[3]="CANNOT_CONNECT"]=3,e}(),t.Peer=function(){function t(t){if(this.addrs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e;return t.prototype.id=null,t.prototype.addrs=o.emptyArray,t.prototype.connection=null,Object.defineProperty(t.prototype,"_id",{get:o.oneOfGetter(e=["id"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_connection",{get:o.oneOfGetter(e=["connection"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=s.create()),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&e.uint32(10).bytes(t.id),null!=t.addrs&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)e.uint32(18).bytes(t.addrs[i]);return null!=t.connection&&Object.hasOwnProperty.call(t,"connection")&&e.uint32(24).int32(t.connection),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Message.Peer;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.id=t.bytes();break;case 2:r.addrs&&r.addrs.length||(r.addrs=[]),r.addrs.push(t.bytes());break;case 3:r.connection=t.int32();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Message.Peer)return t;var e=new a.Message.Peer;if(null!=t.id&&("string"==typeof t.id?o.base64.decode(t.id,e.id=o.newBuffer(o.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Message.Peer.addrs: array expected");e.addrs=[];for(var i=0;i<t.addrs.length;++i)"string"==typeof t.addrs[i]?o.base64.decode(t.addrs[i],e.addrs[i]=o.newBuffer(o.base64.length(t.addrs[i])),0):t.addrs[i].length&&(e.addrs[i]=t.addrs[i])}switch(t.connection){case"NOT_CONNECTED":case 0:e.connection=0;break;case"CONNECTED":case 1:e.connection=1;break;case"CAN_CONNECT":case 2:e.connection=2;break;case"CANNOT_CONNECT":case 3:e.connection=3}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addrs=[]),null!=t.id&&t.hasOwnProperty("id")&&(i.id=e.bytes===String?o.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id,e.oneofs&&(i._id="id")),t.addrs&&t.addrs.length){i.addrs=[];for(var r=0;r<t.addrs.length;++r)i.addrs[r]=e.bytes===String?o.base64.encode(t.addrs[r],0,t.addrs[r].length):e.bytes===Array?Array.prototype.slice.call(t.addrs[r]):t.addrs[r]}return null!=t.connection&&t.hasOwnProperty("connection")&&(i.connection=e.enums===String?a.Message.ConnectionType[t.connection]:t.connection,e.oneofs&&(i._connection="connection")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t}(),t.exports=a},15286:(t,e,i)=>{"use strict";const r=i(88785),{Multiaddr:n}=i(46584),{Record:s}=i(45469),o=i(18859),a=o.Message.MessageType,h=o.Message.ConnectionType,c=Object.keys(a);class l{constructor(t,e,i){if(e&&!(e instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=t,this.key=e,this._clusterLevelRaw=i,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const t=this._clusterLevelRaw-1;return t<0?0:t}set clusterLevel(t){this._clusterLevelRaw=t}serialize(){const t={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(u),providerPeers:this.providerPeers.map(u),record:void 0};return this.record&&(this.record instanceof Uint8Array?t.record=this.record:t.record=this.record.serialize()),o.Message.encode(t).finish()}static deserialize(t){const e=o.Message.decode(t),i=new l(e.type||0,e.key||Uint8Array.from([]),e.clusterLevelRaw||0);return i.closerPeers=e.closerPeers.map(d),i.providerPeers=e.providerPeers.map(d),e.record&&e.record.length&&(i.record=s.deserialize(e.record)),i}}function u(t){return{id:t.id.id,addrs:(t.multiaddrs||[]).map((t=>t.bytes)),connection:h.CONNECTED}}function d(t){return{id:new r(t.id),multiaddrs:(t.addrs||[]).map((t=>new n(t)))}}l.TYPES=a,l.CONNECTION_TYPES=h,t.exports.Message=l,t.exports.MESSAGE_TYPE=a,t.exports.MESSAGE_TYPE_LOOKUP=c},23527:(t,e,i)=>{"use strict";const r=i(32114),{pipe:n}=i(60618),s=i(48963),o=i(64593),a=i(72262),{Message:h,MESSAGE_TYPE_LOOKUP:c}=i(15286),l=i(9170),{EventEmitter:u}=i(17187),{dialingPeerEvent:d,sendingQueryEvent:f,peerResponseEvent:p,queryErrorEvent:g}=i(40149);t.exports.Network=class extends u{constructor({dialer:t,protocol:e,lan:i}){super(),this._log=l.logger(`libp2p:kad-dht:${i?"lan":"wan"}:network`),this._running=!1,this._dialer=t,this._protocol=e}start(){this._running||(this._running=!0)}stop(){this._running=!1}get isStarted(){return this._running}async*sendRequest(t,e,i={}){if(this._running){this._log("sending %s to %p",c[e.type],t);try{yield d({peer:t});const{stream:r}=await this._dialer.dialProtocol(t,this._protocol,i);yield f({to:t,type:e.type});const n=await this._writeReadMessage(r,e.serialize(),i);yield p({from:t,messageType:n.type,closer:n.closerPeers,providers:n.providerPeers,record:n.record})}catch(e){yield g({from:t,error:e})}}}async*sendMessage(t,e,i={}){if(!this._running)return;this._log("sending %s to %p",c[e.type],t),yield d({peer:t});const{stream:r}=await this._dialer.dialProtocol(t,this._protocol,i);yield f({to:t,type:e.type});try{await this._writeMessage(r,e.serialize(),i),yield p({from:t,messageType:e.type})}catch(e){yield g({from:t,error:e})}}async _writeMessage(t,e,i={}){await n([e],s.encode(),t,o)}async _writeReadMessage(t,e,i={}){const o=await n([e],s.encode(),t,s.decode(),(async t=>{const e=await a(t);if(e)return e.slice()}));if(0===o.length)throw r(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");const c=h.deserialize(o);return c.closerPeers.forEach((t=>{this.emit("peer",t)})),c.providerPeers.forEach((t=>{this.emit("peer",t)})),c}}},70829:(t,e,i)=>{"use strict";const r=i(9170),n=i(86301),{compare:s}=i(18764),{xor:o}=i(45599);t.exports=class{constructor(t,e){this.originDhtKey=t,this.capacity=e,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((t=>t.peerId))}async add(t){if(this.peerDistances.find((e=>e.peerId.equals(t))))return;const e=await r.convertPeerId(t),i={peerId:t,distance:o(this.originDhtKey,e)};this.peerDistances.push(i),this.peerDistances.sort(((t,e)=>s(t.distance,e.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(t){if(!t.length)return!1;if(!this.length)return!0;const e=await n(t,(t=>r.convertPeerId(t))),i=this.peerDistances[this.peerDistances.length-1].distance;for(const t of e){const e=o(this.originDhtKey,t);if(s(e,i)<0)return!0}return!1}}},7615:(t,e,i)=>{"use strict";const r=i(32114),{validator:n}=i(45469),s=i(88785),{toString:o}=i(92263),{Message:a}=i(15286),h=i(9170),{queryErrorEvent:c,finalPeerEvent:l,valueEvent:u}=i(40149),d=i(70829),{Record:f}=i(45469);t.exports.PeerRouting=class{constructor({peerId:t,routingTable:e,peerStore:i,network:r,validators:n,queryManager:s,lan:o}){this._peerId=t,this._routingTable=e,this._peerStore=i,this._network=r,this._validators=n,this._queryManager=s,this._log=h.logger(`libp2p:kad-dht:${o?"lan":"wan"}:peer-routing`)}async findPeerLocal(t){let e;const i=await this._routingTable.find(t);if(i){this._log("findPeerLocal found %p in routing table",t);try{e=await this._peerStore.get(i)}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}}if(!e)try{e=await this._peerStore.get(t)}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}if(e)return this._log("findPeerLocal found %p in peer store",t),{id:e.id,multiaddrs:e.addresses.map((t=>t.multiaddr))}}async*_getValueSingle(t,e,i={}){const r=new a(a.TYPES.GET_VALUE,e,0);yield*this._network.sendRequest(t,r,i)}async*getPublicKeyFromNode(t,e){const i=h.keyForPublicKey(t);for await(const n of this._getValueSingle(t,i,e))if(yield n,"PEER_RESPONSE"===n.name&&n.record){const e=await s.createFromPubKey(n.record.value);if(!e.equals(t))throw r(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");yield u({from:t,value:e.pubKey.bytes})}throw r(new Error(`Node not responding with its public key: ${t.toB58String()}`),"ERR_INVALID_RECORD")}async*findPeer(t,e={}){this._log("findPeer %p",t);const i=await this.findPeerLocal(t);if(null!=i)return this._log("found local"),void(yield l({from:this._peerId,peer:i}));const n=await h.convertPeerId(t),s=this._routingTable.closestPeers(n);if(s.find((e=>e.equals(t))))try{const e=await this._peerStore.get(t);return this._log("found in peerStore"),void(yield l({from:this._peerId,peer:{id:e.id,multiaddrs:e.addresses.map((t=>t.multiaddr))}}))}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}const o=this,u=async function*({peer:e,signal:i}){const r=new a(a.TYPES.FIND_NODE,t.toBytes(),0);for await(const n of o._network.sendRequest(e,r,{signal:i}))if(yield n,"PEER_RESPONSE"===n.name){const e=n.closer.find((e=>e.id.equals(t)));e&&(yield l({from:n.from,peer:e}))}};let d=!1;for await(const i of this._queryManager.run(t.id,s,u,e))"FINAL_PEER"===i.name&&(d=!0),yield i;d||(yield c({from:this._peerId,error:r(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(t,e={}){this._log("getClosestPeers to %b",t);const i=await h.convertBuffer(t),r=this._routingTable.closestPeers(i),n=this,s=new d(i,this._routingTable._kBucketSize);r.forEach((t=>s.add(t)));const c=async function*({peer:e,signal:i}){n._log("closerPeersSingle %s from %p",o(t,"base32"),e);const r=new a(a.TYPES.FIND_NODE,t,0);yield*n._network.sendRequest(e,r,{signal:i})};for await(const i of this._queryManager.run(t,r,c,e))yield i,"PEER_RESPONSE"===i.name&&i.closer.forEach((t=>{s.add(t.id)}));this._log("found %d peers close to %b",s.length,t);for(const t of s.peers)yield l({from:this._peerId,peer:{id:t,multiaddrs:(await this._peerStore.addressBook.get(t)||[]).map((t=>t.multiaddr))}})}async*getValueOrPeers(t,e,i={}){for await(const n of this._getValueSingle(t,e,i)){if("PEER_RESPONSE"===n.name&&n.record)try{await this._verifyRecordOnline(n.record)}catch(t){const e="invalid record received, discarded";this._log(e),yield c({from:n.from,error:r(new Error(e),"ERR_INVALID_RECORD")});continue}yield n}}async _verifyRecordOnline({key:t,value:e,timeReceived:i}){await n.verifyRecord(this._validators,new f(t,e,i))}async getCloserPeersOffline(t,e){const i=await h.convertBuffer(t),r=this._routingTable.closestPeers(i),n=[];for(const t of r)if(!t.equals(e))try{const e=await this._peerStore.addressBook.get(t);n.push({id:t,multiaddrs:e.map((t=>t.multiaddr))})}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}return n.length?this._log("getCloserPeersOffline found %d peer(s) closer to %b than %p",n.length,t,e):this._log("getCloserPeersOffline could not find peer closer to %b than %p",t,e),n}}},17539:(t,e,i)=>{"use strict";const r=i(70248),n=i(94676),s=i(88785),{Key:o}=i(41914),{default:a}=i(45860),{PROVIDERS_CLEANUP_INTERVAL:h,PROVIDERS_VALIDITY:c,PROVIDERS_LRU_CACHE_SIZE:l,PROVIDER_KEY_PREFIX:u}=i(57236),d=i(9170),{toString:f}=i(92263),p=d.logger("libp2p:kad-dht:providers");function g(t){return t="string"==typeof t?t:f(t.multihash.bytes,"base32"),`${u}/${t}`}function y(t){const e=t.toString().split("/");if(5!==e.length)throw new Error("incorrectly formatted provider entry key in datastore: "+t);return{cid:e[3],peerId:e[4]}}function m(t){return n.decode(t)}t.exports.Providers=class{constructor({providers:t,cacheSize:e,cleanupInterval:i,provideValidity:n}){this.datastore=t,this.cleanupInterval=i||h,this.provideValidity=n||c,this.cache=r(e||l),this.syncQueue=new a({concurrency:1})}start(){this._started||(this._started=!0,this._cleaner=setInterval((()=>this._cleanup()),this.cleanupInterval))}stop(){this._started=!1,this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add((async()=>{const t=Date.now();let e=0,i=0;const r=new Map,n=this.datastore.batch(),s=this.datastore.query({prefix:u});for await(const t of s)try{const{cid:s,peerId:o}=y(t.key),a=m(t.value),h=Date.now(),c=h-a,l=c>this.provideValidity;if(p("comparing: %d - %d = %d > %d %s",h,a,c,this.provideValidity,l?"(expired)":""),l){i++,n.delete(t.key);const e=r.get(s)||new Set;e.add(o),r.set(s,e)}e++}catch(t){p.error(t.message)}r.size?(p("deleting %d / %d entries",i,e),await n.commit()):p("nothing to delete");for(const[t,e]of r){const i=g(t),r=this.cache.get(i);if(r){for(const t of e)r.delete(t);0===r.size?this.cache.remove(i):this.cache.set(i,r)}}p("Cleanup successful (%dms)",Date.now()-t)}))}async _getProvidersMap(t){const e=g(t);let i=this.cache.get(e);return i||(i=await async function(t,e){const i=new Map,r=t.query({prefix:g(e)});for await(const t of r){const{peerId:e}=y(t.key);i.set(e,m(t.value))}return i}(this.datastore,t),this.cache.set(e,i)),i}async addProvider(t,e){return this.syncQueue.add((async()=>{p("%p provides %s",e,t);const i=await this._getProvidersMap(t);p("loaded %s provs",i.size);const r=new Date;i.set(e.toString(),r);const s=g(t);return this.cache.set(s,i),async function(t,e,i,r){const s=[g(e),"/",i.toString()].join(""),a=new o(s),h=Uint8Array.from(n.encode(r.getTime()));return t.put(a,h)}(this.datastore,t,e,r)}))}async getProviders(t){return this.syncQueue.add((async()=>(p("get providers for %s",t),[...(await this._getProvidersMap(t)).keys()].map((t=>s.parse(t))))))}}},54072:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),n=i(37939),s=i(93975),{QUERY_SELF_INTERVAL:o,QUERY_SELF_TIMEOUT:a,K:h}=i(57236),c=i(9170),{TimeoutController:l}=i(10715),{anySignal:u}=i(32044),{setMaxListeners:d}=i(17187);t.exports.QuerySelf=class extends r{constructor({peerId:t,peerRouting:e,lan:i,count:r=h,interval:n=o,queryTimeout:s=a}){super(),this._log=c.logger(`libp2p:kad-dht:${i?"lan":"wan"}:query-self`),this._running=!1,this._peerId=t,this._peerRouting=e,this._count=r||h,this._interval=n||o,this._queryTimeout=s||a}start(){this._running||(this._running=!0,this._querySelf())}stop(){this._running=!1,this._timeoutId&&clearTimeout(this._timeoutId),this._controller&&this._controller.abort()}async _querySelf(){const t=new l(this._queryTimeout);try{this._controller=new AbortController;const e=u([this._controller.signal,t.signal]);try{d&&d(1/0,e)}catch{}const i=await s(await n(this._peerRouting.getClosestPeers(this._peerId.toBytes(),{signal:e}),this._count));this._log("query ran successfully - found %d peers",i)}catch(t){this._log("query error",t)}finally{this._timeoutId=setTimeout(this._querySelf.bind(this),this._interval),t.clear()}}}},40149:(t,e,i)=>{"use strict";const{MESSAGE_TYPE_LOOKUP:r}=i(15286),n=["PUT_VALUE","GET_VALUE","ADD_PROVIDER","GET_PROVIDERS","FIND_NODE","PING"];t.exports={sendingQueryEvent:function(t){return{...t,name:"SENDING_QUERY",type:0,messageName:r[t.type],messageType:t.type}},peerResponseEvent:function(t){return{...t,name:"PEER_RESPONSE",type:1,messageName:n[t.messageType],closer:t.closer?t.closer:[],providers:t.providers?t.providers:[]}},finalPeerEvent:function(t){return{...t,name:"FINAL_PEER",type:2}},queryErrorEvent:function(t){return{...t,name:"QUERY_ERROR",type:3}},providerEvent:function(t){return{...t,name:"PROVIDER",type:4}},valueEvent:function(t){return{...t,name:"VALUE",type:5}},addingPeerEvent:function(t){return{...t,name:"ADDING_PEER",type:6}},dialingPeerEvent:function(t){return{...t,name:"DIALING_PEER",type:7}}}},69666:(t,e,i)=>{"use strict";const{TimeoutController:r}=i(10715),{anySignal:n}=i(32044),{ALPHA:s,K:o,DEFAULT_QUERY_TIMEOUT:a}=i(57236),{toString:h}=i(92263),{logger:c}=i(9170),{queryPath:l}=i(83248),u=i(74014),{EventEmitter:d,setMaxListeners:f}=i(17187),p="running-queries";t.exports.QueryManager=class{constructor({peerId:t,lan:e,metrics:i,disjointPaths:r=o,alpha:n=s}){this._peerId=t,this._disjointPaths=r||o,this._controllers=new Set,this._running=!1,this._alpha=n||s,this._lan=e,this._metrics=i,this._queries=0}start(){this._running=!0}stop(){this._running=!1;for(const t of this._controllers)t.abort();this._controllers.clear()}async*run(t,e,i,s={}){if(!this._running)throw new Error("QueryManager not started");let o;s.signal||(o=new r(a),s.signal=o.signal);const g=new AbortController;this._controllers.add(g);const y=[g.signal];s.signal&&y.push(s.signal);const m=n(y);try{f&&f(0,m)}catch{}const v=c(`libp2p:kad-dht:${this._lan?"lan":"wan"}:query:`+h(t,"base58btc")),b=e.slice(0,Math.min(this._disjointPaths,e.length)),w=Date.now(),_=new d;try{if(v("query:start"),this._queries++,this._metrics&&this._metrics.updateComponentMetric({component:"kad-dht-"+(this._lan?"lan":"wan"),metric:p,value:this._queries}),0===e.length)return void v.error("Running query with no peers");const r=b.map(((e,r)=>l({key:t,startingPeer:e,ourPeerId:this._peerId,signal:m,query:i,pathIndex:r,numPaths:b.length,alpha:this._alpha,cleanUp:_,queryFuncTimeout:s.queryFuncTimeout,log:v})));for await(const t of u(...r))yield t,"QUERY_ERROR"===t.name&&t.error&&v("error",t.error)}catch(t){if(this._running||"ERR_QUERY_ABORTED"!==t.code)throw t}finally{this._controllers.delete(g),o&&o.clear(),this._queries--,this._metrics&&this._metrics.updateComponentMetric({component:"kad-dht-"+(this._lan?"lan":"wan"),metric:p,value:this._queries}),_.emit("cleanup"),v(`query:done in ${Date.now()-(w||0)}ms`)}}}},83248:(t,e,i)=>{"use strict";const{default:r}=i(45860),{xor:n}=i(45599),{toString:s}=i(92263),o=i(63931),a=i(32114),{convertPeerId:h,convertBuffer:c}=i(9170),{TimeoutController:l}=i(10715),{anySignal:u}=i(32044),{queryErrorEvent:d}=i(40149),f=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");t.exports.queryPath=async function*({key:t,startingPeer:e,ourPeerId:i,signal:p,query:g,alpha:y,pathIndex:m,numPaths:v,cleanUp:b,queryFuncTimeout:w,log:_}){const x=new r({concurrency:y}),E=await c(t),S=new Set;!function e(r,o){if(!r)return;S.add(r.toB58String());const a=BigInt("0x"+s(n(o,E),"base16"));x.add((async()=>{let o;const c=[p];null!=w&&(o=new l(w),c.push(o.signal));const f=u(c);try{for await(const o of g({key:t,peer:r,signal:f,pathIndex:m,numPaths:v})){if(f.aborted)return;if("PEER_RESPONSE"===o.name)for(const c of o.closer){if(S.has(c.id.toB58String())){_("already seen %p in query",c.id);continue}if(i.equals(c.id)){_("not querying ourselves");continue}const o=await h(c.id);BigInt("0x"+s(n(o,E),"base16"))>a?_("skipping %p as they are not closer to %b than %p",c.id,t,r):(_("querying closer peer %p",c.id),e(c.id,o))}x.emit("completed",o)}o&&o.clear()}catch(t){p.aborted?x.emit("error",t):x.emit("completed",d({from:r,error:t}))}finally{o&&o.clear()}}),{priority:f-a})}(e,await h(e)),yield*async function*(t,e,i,r){let n=o(),s=!0;const h=[],c=()=>{s&&(r("clean up queue, results %d, queue size %d, pending tasks %d",h.length,t.size,t.pending),s=!1,t.clear(),h.splice(0,h.length))};for(t.on("completed",(t=>{h.push(t),n.resolve()})),t.on("error",(t=>{r("queue error",t),c(),n.reject(t)})),t.on("idle",(()=>{r("queue idle"),s=!1,n.resolve()})),e.addEventListener("abort",(()=>{r("abort queue");const t=s;c(),t&&n.reject(a(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),i.on("cleanup",(()=>{c(),n.resolve()}));s;)for(await n.promise,n=o();h.length;){const t=h.shift();t&&(yield t)}yield*h}(x,p,b,_)}},23477:(t,e,i)=>{"use strict";const r=i(99507),n=i(9170),{default:s}=i(45860),{PROTOCOL_DHT:o}=i(57236),{TimeoutController:a}=i(10715),h="routing-table-size";t.exports.RoutingTable=class{constructor({peerId:t,dialer:e,kBucketSize:i,pingTimeout:r,lan:o,metrics:a}){this._log=n.logger(`libp2p:kad-dht:${o?"lan":"wan"}:routing-table`),this._peerId=t,this._dialer=e,this._kBucketSize=i||20,this._pingTimeout=r||1e4,this._lan=o,this._metrics=a,this.kb,this.commonPrefixLengthRefreshedAt=[],this._onPing=this._onPing.bind(this),this._pingQueue=new s({concurrency:1}),this._running=!1}async start(){this._running=!0,this.kb=new r({localNodeId:await n.convertPeerId(this._peerId),numberOfNodesPerKBucket:this._kBucketSize,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)}async stop(){this._running=!1,this._pingQueue.clear()}_onPing(t,e){this._pingQueue.add((async()=>{if(!this._running)return;let i=0;try{await Promise.all(t.map((async t=>{let e;try{e=new a(this._pingTimeout),this._log(`pinging old contact ${t.peer}`);const{stream:r}=await this._dialer.dialProtocol(t.peer,o,{signal:e.signal});await r.close(),i++}catch(e){this._running&&(this._log.error("could not ping peer %p",t.peer,e),this._log(`evicting old contact after ping failed ${t.peer}`),this.kb.remove(t.id))}finally{e&&e.clear(),this._metrics&&this._metrics.updateComponentMetric({component:"kad-dht-"+(this._lan?"lan":"wan"),metric:h,value:this.size})}}))),this._running&&i<t.length&&(this._log(`adding new contact ${e.peer}`),this.kb.add(e))}catch(t){this._log.error("could not process k-bucket ping event",t)}}))}get size(){return this.kb.count()}async find(t){const e=await n.convertPeerId(t),i=this.closestPeer(e);if(i&&t.equals(i))return i}closestPeer(t){const e=this.closestPeers(t,1);if(e.length>0)return e[0]}closestPeers(t,e=this._kBucketSize){return this.kb.closest(t,e).map((t=>t.peer))}async add(t){const e=await n.convertPeerId(t);this.kb.add({id:e,peer:t}),this._log("added %p with kad id %b",t,e),this._metrics&&this._metrics.updateComponentMetric({component:"kad-dht-"+(this._lan?"lan":"wan"),metric:h,value:this.size})}async remove(t){const e=await n.convertPeerId(t);this.kb.remove(e),this._metrics&&this._metrics.updateComponentMetric({component:"kad-dht-"+(this._lan?"lan":"wan"),metric:h,value:this.size})}}},12776:(t,e,i)=>{"use strict";const{xor:r}=i(45599),n=i(7311),{sha256:s}=i(56155),o=i(82204),a=i(88785),h=i(9170),c=i(93975),{TimeoutController:l}=i(10715),{TABLE_REFRESH_INTERVAL:u,TABLE_REFRESH_QUERY_TIMEOUT:d}=i(57236);t.exports.RoutingTableRefresh=class{constructor({peerRouting:t,routingTable:e,refreshInterval:i,refreshQueryTimeout:r,lan:n}){this._log=h.logger(`libp2p:kad-dht:${n?"lan":"wan"}:routing-table:refresh`),this._peerRouting=t,this._routingTable=e,this._refreshInterval=i||u,this._refreshQueryTimeout=r||d,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this._log(`refreshing routing table every ${this._refreshInterval}ms`),await this.refreshTable(!0)}async stop(){this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId)}async refreshTable(t){this._log("refreshing routing table");const e=this._maxCommonPrefix(),i=this._getTrackedCommonPrefixLengthsForRefresh(e);this._log(`max common prefix length ${e}`),this._log(`tracked CPLs [ ${i.map((t=>t.toISOString())).join(", ")} ]`),await Promise.all(i.map((async(r,n)=>{try{if(await this._refreshCommonPrefixLength(n,r,!0===t),0===this._numPeersForCpl(e)){const e=Math.min(2*(n+1),i.length-1);for(let i=n+1;i<e+1;i++)try{await this._refreshCommonPrefixLength(i,r,!0===t)}catch(t){this._log.error(t)}}}catch(t){this._log.error(t)}}))),this._refreshTimeoutId=setTimeout(this.refreshTable,this._refreshInterval),this._refreshTimeoutId.unref&&this._refreshTimeoutId.unref()}async _refreshCommonPrefixLength(t,e,i){if(!i&&e.getTime()>Date.now()-this._refreshInterval)return void this._log("not running refresh for cpl %s as time since last refresh not above interval",t);const r=await this._generateRandomPeerId(t);this._log("starting refreshing cpl %s with key %p (routing table size was %s)",t,r,this._routingTable.kb.count());const n=new l(this._refreshQueryTimeout);try{const e=await c(this._peerRouting.getClosestPeers(r.toBytes(),{signal:n.signal}));this._log(`found ${e} peers that were close to imaginary peer %p`,r),this._log("finished refreshing cpl %s with key %p (routing table size is now %s)",t,r,this._routingTable.kb.count())}finally{n.clear()}}_getTrackedCommonPrefixLengthsForRefresh(t){t>15&&(t=15);const e=[];for(let i=0;i<=t;i++)e[i]=this.commonPrefixLengthRefreshedAt[i]||new Date;return e}async _generateRandomPeerId(t){const e=o.randomBytes(2),i=(e[1]<<8)+e[0],r=await this._makePeerId(this._routingTable.kb.localNodeId,i,t);return a.createFromBytes(r)}async _makePeerId(t,e,i){if(i>15)throw new Error("Cannot generate peer ID for common prefix length greater than 15");const r=new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1),o=65535<<16-(i+1),a=n[(r^32768>>i)&o|e&~o],h=new ArrayBuffer(34),c=new DataView(h,0,h.byteLength);return c.setUint8(0,s.code),c.setUint8(1,32),c.setUint32(2,a,!1),new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}_maxCommonPrefix(){let t=0;for(const e of this._prefixLengths())e>t&&(t=e);return t}_numPeersForCpl(t){let e=0;for(const i of this._prefixLengths())i===t&&e++;return e}*_prefixLengths(){if(this._routingTable.kb)for(const{id:t}of this._routingTable.kb.toIterable()){const e=r(this._routingTable.kb.localNodeId,t);let i=0;for(const t of e){if(0!==t)break;i++}yield i}}}},5632:(t,e,i)=>{"use strict";const{CID:r}=i(81362),n=i(32114),s=i(9170).logger("libp2p:kad-dht:rpc:handlers:add-provider");t.exports.AddProviderHandler=class{constructor({peerId:t,providers:e,peerStore:i}){this._peerId=t,this._providers=e,this._peerStore=i}async handle(t,e){if(s("start"),!e.key||0===e.key.length)throw n(new Error("Missing key"),"ERR_MISSING_KEY");let i;try{i=r.decode(e.key)}catch(t){const e=`Invalid CID: ${t.message}`;throw n(new Error(e),"ERR_INVALID_CID")}e.providerPeers&&e.providerPeers.length||s.error("no providers found in message"),await Promise.all(e.providerPeers.map((async e=>{e.id.equals(t)?e.multiaddrs.length<1?s("no valid addresses for provider %p. Ignore",t):(s("received provider %p for %s (addrs %s)",t,i,e.multiaddrs.map((t=>t.toString()))),this._peerId.equals(e.id)||(await this._peerStore.addressBook.add(e.id,e.multiaddrs),await this._providers.addProvider(i,e.id))):s("invalid provider peer %p from %p",e.id,t)})))}}},86666:(t,e,i)=>{"use strict";const{Message:r}=i(15286),n=i(9170).logger("libp2p:kad-dht:rpc:handlers:find-node"),{removePrivateAddresses:s,removePublicAddresses:o}=i(9170);t.exports.FindNodeHandler=class{constructor({peerId:t,addressable:e,peerRouting:i,lan:r}){this._peerId=t,this._addressable=e,this._peerRouting=i,this._lan=Boolean(r)}async handle(t,e){let i;n("incoming request from %p for peers closer to %b",t,e.key),i=this._peerId.equals(e.key)?[{id:this._peerId,multiaddrs:this._addressable.multiaddrs}]:await this._peerRouting.getCloserPeersOffline(e.key,t),i=i.map(this._lan?o:s).filter((({multiaddrs:t})=>t.length));const a=new r(e.type,new Uint8Array(0),e.clusterLevel);return i.length>0?a.closerPeers=i:n("could not find any peers closer to %p",t),a}}},71003:(t,e,i)=>{"use strict";const{CID:r}=i(81362),n=i(32114),{Message:s}=i(15286),o=i(9170).logger("libp2p:kad-dht:rpc:handlers:get-providers"),{removePrivateAddresses:a,removePublicAddresses:h}=i(9170);t.exports.GetProvidersHandler=class{constructor({peerId:t,peerRouting:e,providers:i,peerStore:r,addressable:n,lan:s}){this._peerId=t,this._peerRouting=e,this._providers=i,this._peerStore=r,this._addressable=n,this._lan=Boolean(s)}async handle(t,e){let i;try{i=r.decode(e.key)}catch(t){throw n(new Error(`Invalid CID: ${t.message}`),"ERR_INVALID_CID")}o("%p asking for providers for %s",t,i);const[a,h]=await Promise.all([this._providers.getProviders(i),this._peerRouting.getCloserPeersOffline(e.key,t)]),c=await this._getPeers(a),l=await this._getPeers(h.map((({id:t})=>t))),u=new s(e.type,e.key,e.clusterLevel);return c.length>0&&(u.providerPeers=c),l.length>0&&(u.closerPeers=l),o("got %s providers %s closerPeers",c.length,l.length),u}async _getAddresses(t){return this._peerId.equals(t)?this._addressable.multiaddrs:(await this._peerStore.addressBook.get(t)||[]).map((t=>t.multiaddr))}async _getPeers(t){const e=[],i=this._lan?h:a;for(const r of t){const t=i({id:r,multiaddrs:await this._getAddresses(r)});t.multiaddrs.length&&e.push(t)}return e}}},47823:(t,e,i)=>{"use strict";const{Record:r}=i(45469),n=i(32114),{Message:s}=i(15286),{MAX_RECORD_AGE:o}=i(57236),a=i(9170),h=a.logger("libp2p:kad-dht:rpc:handlers:get-value");t.exports.GetValueHandler=class{constructor({peerId:t,peerStore:e,peerRouting:i,records:r}){this._peerId=t,this._peerStore=e,this._peerRouting=i,this._records=r}async handle(t,e){const i=e.key;if(h("%p asked for key %b",t,i),!i||0===i.length)throw n(new Error("Invalid key"),"ERR_INVALID_KEY");const o=new s(s.TYPES.GET_VALUE,i,e.clusterLevel);if(a.isPublicKeyKey(i)){h("is public key");const t=a.fromPublicKeyKey(i);let e;if(this._peerId.equals(t))e=this._peerId.pubKey;else try{e=await this._peerStore.keyBook.get(t)}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}if(null!=e)return h("returning found public key"),o.record=new r(i,e.bytes),o}const[c,l]=await Promise.all([this._checkLocalDatastore(i),this._peerRouting.getCloserPeersOffline(e.key,t)]);return c&&(h("had record for %b in local datastore",i),o.record=c),l.length>0&&(h("had %s closer peers in routing table",l.length),o.closerPeers=l),o}async _checkLocalDatastore(t){h("checkLocalDatastore looking for %b",t);const e=a.bufferToKey(t);let i;try{i=await this._records.get(e)}catch(t){if("ERR_NOT_FOUND"===t.code)return;throw t}const s=r.deserialize(i);if(!s)throw n(new Error("Invalid record"),"ERR_INVALID_RECORD");if(!(null==s.timeReceived||Date.now()-s.timeReceived.getTime()>o))return s;await this._records.delete(e)}}},17173:(t,e,i)=>{"use strict";const{Message:r}=i(15286),{AddProviderHandler:n}=i(5632),{FindNodeHandler:s}=i(86666),{GetProvidersHandler:o}=i(71003),{GetValueHandler:a}=i(47823),{PingHandler:h}=i(90092),{PutValueHandler:c}=i(49170);t.exports=({peerId:t,providers:e,peerStore:i,addressable:l,peerRouting:u,records:d,validators:f,lan:p})=>{const g={[r.TYPES.GET_VALUE]:new a({peerId:t,peerStore:i,peerRouting:u,records:d}),[r.TYPES.PUT_VALUE]:new c({validators:f,records:d}),[r.TYPES.FIND_NODE]:new s({peerId:t,addressable:l,peerRouting:u,lan:p}),[r.TYPES.ADD_PROVIDER]:new n({peerId:t,providers:e,peerStore:i}),[r.TYPES.GET_PROVIDERS]:new o({peerId:t,peerRouting:u,providers:e,peerStore:i,addressable:l,lan:p}),[r.TYPES.PING]:new h};return function(t){return g[t]}}},90092:(t,e,i)=>{"use strict";const r=i(9170).logger("libp2p:kad-dht:rpc:handlers:ping");t.exports.PingHandler=class{async handle(t,e){return r(`ping from ${t}`),e}}},49170:(t,e,i)=>{"use strict";const r=i(9170),n=i(32114),s=i(45469),o=r.logger("libp2p:kad-dht:rpc:handlers:put-value");t.exports.PutValueHandler=class{constructor({validators:t,records:e}){this._validators=t,this._records=e}async handle(t,e){const i=e.key;o("%p asked to store value for key %b",t,i);const a=e.record;if(!a){const e=`Empty record from: ${t.toB58String()}`;throw o.error(e),n(new Error(e),"ERR_EMPTY_RECORD")}await s.validator.verifyRecord(this._validators,a),a.timeReceived=new Date;const h=r.bufferToKey(a.key);return await this._records.put(h,a.serialize()),e}}},67857:(t,e,i)=>{"use strict";const{pipe:r}=i(60618),n=i(48963),{Message:s,MESSAGE_TYPE_LOOKUP:o}=i(15286),a=i(17173),h=i(9170).logger("libp2p:kad-dht:rpc");t.exports.RPC=class{constructor(t){this._messageHandler=a(t),this._routingTable=t.routingTable}async handleMessage(t,e){const i=this._messageHandler(e.type);try{await this._routingTable.add(t)}catch(t){h.error("Failed to update the kbucket store",t)}if(i)return i.handle(t,e);h.error(`no handler found for message type: ${e.type}`)}async onIncomingStream({stream:t,connection:e}){const i=e.remotePeer;try{await this._routingTable.add(i)}catch(t){h.error(t)}const a=this;await r(t.source,n.decode(),(t=>async function*(){for await(const e of t){const t=s.deserialize(e.slice());h("incoming %s from %p",o[t.type],i);const r=await a.handleMessage(i,t);r&&(yield r.serialize())}}()),n.encode(),t.sink)}}},81015:(t,e,i)=>{"use strict";const r=i(98497),{EventEmitter:n}=i(17187),s=i(9170);t.exports.TopologyListener=class extends n{constructor({registrar:t,protocol:e,lan:i}){super(),this._log=s.logger(`libp2p:kad-dht:topology-listener:${i?"lan":"wan"}:network`),this._running=!1,this._registrar=t,this._protocol=e}async start(){if(this._running)return;this._running=!0;const t=new r({multicodecs:[this._protocol],handlers:{onConnect:t=>{this._log("observed peer that with protocol %s %p",this._protocol,t),this.emit("peer",t)},onDisconnect:()=>{}}});this._registrarId=await this._registrar.register(t)}stop(){this._running=!1,this._registrarId&&this._registrar.unregister(this._registrarId)}}},9170:(t,e,i)=>{"use strict";const r=i(11227),{sha256:n}=i(56155),{base58btc:s}=i(99086),{base32:o}=i(22817),{Key:a}=i(41914),{Record:h}=i(45469),c=i(88785),{fromString:l}=i(52217),{toString:u}=i(92263),{concat:d}=i(20605),f=i(290),p=l("/pk/");t.exports={removePrivateAddresses:function({id:t,multiaddrs:e}){return{id:t,multiaddrs:e.filter((t=>{const[[e,i]]=t.stringTuples();return(4===e||6===e)&&!f(i)}))}},removePublicAddresses:function({id:t,multiaddrs:e}){return{id:t,multiaddrs:e.filter((t=>{const[[e,i]]=t.stringTuples();return(4===e||6===e)&&f(i)}))}},convertBuffer:async t=>(await n.digest(t)).digest,convertPeerId:async t=>(await n.digest(t.id)).digest,bufferToKey:t=>new a("/"+u(t,"base32"),!1),keyForPublicKey:t=>d([p,t.id]),isPublicKeyKey:t=>"/pk/"===u(t.slice(0,4)),isIPNSKey:t=>"/ipns/"===u(t.slice(0,4)),fromPublicKeyKey:t=>new c(t.slice(4)),createPutRecord:(t,e)=>{const i=new Date;return new h(t,e,i).serialize()},logger:t=>(r.formatters.b=t=>s.baseEncode(t),r.formatters.t=t=>o.baseEncode(t),r.formatters.p=t=>t.toB58String(),Object.assign(r(t),{error:r(`${t}:error`)}))}},75516:(t,e,i)=>{"use strict";const r=i(94676),n=i(9668);t.exports=t=>async function*(){const e=new s;for await(const i of t){const t=e.write(i);t.length&&(yield t)}}();class s{constructor(){this._buffer=new n,this._bufferProxy=new Proxy({},{get:(t,e)=>"l"===e[0]?this._buffer[e]:this._buffer.get(parseInt(e))}),this._headerInfo=null}write(t){if(!t||!t.length)return[];this._buffer.append(t);const e=[];for(;this._buffer.length;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(t){break}const{id:t,type:i,length:r,offset:n}=this._headerInfo;if(this._buffer.length-n<r)break;e.push({id:t,type:i,data:this._buffer.shallowSlice(n,n+r)}),this._buffer.consume(n+r),this._headerInfo=null}return e}_decodeHeader(t){const e=r.decode(t);let i=r.decode.bytes;const n=r.decode(t,i);return i+=r.decode.bytes,{id:e>>3,type:7&e,offset:i,length:n}}}},45164:(t,e,i)=>{"use strict";const r=i(94676),n=i(9668),s=10240,o=new class{constructor(){this._pool=new Uint8Array(s),this._poolOffset=0}write(t){const e=this._pool;let i=this._poolOffset;r.encode(t.id<<3|t.type,e,i),i+=r.encode.bytes,r.encode(t.data?t.data.length:0,e,i),i+=r.encode.bytes;const n=e.subarray(this._poolOffset,i);return s-i<100?(this._pool=new Uint8Array(s),this._poolOffset=0):this._poolOffset=i,t.data?[n,t.data]:n}};t.exports=t=>async function*(){for await(const e of t)Array.isArray(e)?yield new n(e.map((t=>o.write(t)))):yield new n(o.write(e))}()},73209:(t,e,i)=>{"use strict";e.encode=i(45164),e.decode=i(75516)},1267:(t,e,i)=>{"use strict";t.exports=i(47932)},82492:(t,e)=>{"use strict";const i=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});e.MessageTypes=i,e.InitiatorMessageTypes=Object.freeze({NEW_STREAM:i.NEW_STREAM,MESSAGE:i.MESSAGE_INITIATOR,CLOSE:i.CLOSE_INITIATOR,RESET:i.RESET_INITIATOR}),e.ReceiverMessageTypes=Object.freeze({MESSAGE:i.MESSAGE_RECEIVER,CLOSE:i.CLOSE_RECEIVER,RESET:i.RESET_RECEIVER}),e.MessageTypeNames=Object.freeze(Object.entries(i).reduce(((t,e)=>(t[e[1]]=e[0],t)),{}))},47932:(t,e,i)=>{"use strict";const r=i(60618),n=i(84975),s=i(11227)("libp2p:mplex"),o=i(61623),a=i(73209),h=i(40092),{MessageTypes:c,MessageTypeNames:l}=i(82492),u=i(16048);class d{constructor(t){t="function"==typeof(t=t||{})?{onStream:t}:t,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=t,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=t.onStream,this.onStreamEnd=t.onStreamEnd}get streams(){const t=[];return this._streams.initiators.forEach((e=>{t.push(e)})),this._streams.receivers.forEach((e=>{t.push(e)})),t}newStream(t){const e=this._streamId++;t=null==t?e.toString():String(t);const i=this._streams.initiators;return this._newStream({id:e,name:t,type:"initiator",registry:i})}_newReceiverStream({id:t,name:e}){const i=this._streams.receivers;return this._newStream({id:t,name:e,type:"receiver",registry:i})}_newStream({id:t,name:e,type:i,registry:r}){if(r.has(t))throw new Error(`${i} stream ${t} already exists!`);s("new %s stream %s %s",i,t,e);const n=u({id:t,name:e,send:r=>(s.enabled&&s("%s stream %s %s send",i,t,e,{...r,type:l[r.type],data:r.data&&r.data.slice()}),this.source.push(r)),type:i,onEnd:()=>{s("%s stream %s %s ended",i,t,e),r.delete(t),this.onStreamEnd&&this.onStreamEnd(n)},maxMsgSize:this._options.maxMsgSize});return r.set(t,n),n}_createSink(){return async t=>{this._options.signal&&(t=o(t,this._options.signal));try{await r(t,a.decode,h(this._options.maxMsgSize),(async t=>{for await(const e of t)for(const t of e)this._handleIncoming(t)}))}catch(t){return s("error in sink",t),this.source.end(t)}this.source.end()}}_createSource(){const t=n({onEnd:t=>{const{initiators:e,receivers:i}=this._streams;for(const i of e.values())i.abort(t);for(const e of i.values())e.abort(t)},writev:!0});return Object.assign(a.encode(t),{push:t.push,end:t.end,return:t.return})}_handleIncoming({id:t,type:e,data:i}){if(s.enabled&&s("incoming message",{id:t,type:l[e],data:i.slice()}),e===c.NEW_STREAM&&this.onStream){const e=this._newReceiverStream({id:t,name:i.toString()});return this.onStream(e)}const r=(1&e?this._streams.initiators:this._streams.receivers).get(t);if(!r)return s("missing stream %s",t);switch(e){case c.MESSAGE_INITIATOR:case c.MESSAGE_RECEIVER:r.source.push(i);break;case c.CLOSE_INITIATOR:case c.CLOSE_RECEIVER:r.close();break;case c.RESET_INITIATOR:case c.RESET_RECEIVER:r.reset();break;default:s("unknown message type %s",e)}}}d.multicodec="/mplex/6.7.0",t.exports=d},40092:t=>{"use strict";const e=1<<20;t.exports=t=>{t=t||e;const i=e=>{if(e.data&&e.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return t=>async function*(){for await(const e of t)Array.isArray(e)?e.forEach(i):i(e),yield e}()},t.exports.MAX_MSG_SIZE=e},16048:(t,e,i)=>{"use strict";const r=i(61623),n=i(11227)("libp2p:mplex:stream"),s=i(84975),o=i(9668),a=i(32114),{MAX_MSG_SIZE:h}=i(40092),{InitiatorMessageTypes:c,ReceiverMessageTypes:l}=i(82492),u="ERR_MPLEX_STREAM_RESET";t.exports=({id:t,name:e,send:i,onEnd:d=(()=>{}),type:f="initiator",maxMsgSize:p=h})=>{const g=new AbortController,y=new AbortController,m="initiator"===f?c:l,v="initiator"===f?`i${t}`:`r${t}`;e=String(null==e?t:e);let b,w=!1,_=!1;const x=t=>{_||(_=!0,n("%s stream %s sink end",f,e,t),t&&!b&&(b=t),w&&(E.timeline.close=Date.now(),d(b)))},E={close:()=>E.source.end(),abort:t=>{n("%s stream %s abort",f,e,t),E.source.end(t),g.abort(),x(t)},reset:()=>{const t=a(new Error("stream reset"),u);y.abort(),E.source.end(t),x(t)},sink:async s=>{s=r(s,[{signal:g.signal,options:{abortMessage:"stream aborted",abortCode:"ERR_MPLEX_STREAM_ABORT"}},{signal:y.signal,options:{abortMessage:"stream reset",abortCode:u}}]),"initiator"===f&&i({id:t,type:m.NEW_STREAM,data:e});try{for await(let e of s)for(;e.length;){if(e.length<=p){i({id:t,type:m.MESSAGE,data:e});break}e=o.isBufferList(e)?e:new o(e),i({id:t,type:m.MESSAGE,data:e.shallowSlice(0,p)}),e.consume(p)}}catch(r){return r.code===u?n("%s stream %s reset",f,e):(n("%s stream %s error",f,e,r),i({id:t,type:m.RESET})),E.source.end(r),x(r)}i({id:t,type:m.CLOSE}),x()},source:s((t=>{w||(w=!0,n("%s stream %s source end",f,e,t),t&&!b&&(b=t),_&&(E.timeline.close=Date.now(),d(b)))})),timeline:{open:Date.now(),close:null},id:v};return E}},45469:(t,e,i)=>{"use strict";t.exports={Record:i(43607),validator:i(18557),selection:i(77368)}},43607:(t,e,i)=>{"use strict";const{Record:r}=i(57195),n=i(99065);class s{constructor(t,e,i){if(!(t instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(e instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=t,this.value=e,this.timeReceived=i}serialize(){return r.encode(this.prepareSerialize()).finish()}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&n.toRFC3339(this.timeReceived)}}static deserialize(t){const e=r.decode(t);return s.fromDeserialized(r.toObject(e,{defaults:!1,arrays:!0,longs:Number,objects:!1}))}static fromDeserialized(t){let e;return t.timeReceived&&(e=n.parseRFC3339(t.timeReceived)),new s(t.key,t.value,e)}}t.exports=s},57195:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-record"]||(r.roots["libp2p-record"]={});a.Record=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.key=o.newBuffer([]),t.prototype.value=o.newBuffer([]),t.prototype.timeReceived="",t.encode=function(t,e){return e||(e=s.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).bytes(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).bytes(t.value),null!=t.timeReceived&&Object.hasOwnProperty.call(t,"timeReceived")&&e.uint32(42).string(t.timeReceived),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Record;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.key=t.bytes();break;case 2:r.value=t.bytes();break;case 5:r.timeReceived=t.string();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Record)return t;var e=new a.Record;return null!=t.key&&("string"==typeof t.key?o.base64.decode(t.key,e.key=o.newBuffer(o.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),null!=t.value&&("string"==typeof t.value?o.base64.decode(t.value,e.value=o.newBuffer(o.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),null!=t.timeReceived&&(e.timeReceived=String(t.timeReceived)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.key="":(i.key=[],e.bytes!==Array&&(i.key=o.newBuffer(i.key))),e.bytes===String?i.value="":(i.value=[],e.bytes!==Array&&(i.value=o.newBuffer(i.value))),i.timeReceived=""),null!=t.key&&t.hasOwnProperty("key")&&(i.key=e.bytes===String?o.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key),null!=t.value&&t.hasOwnProperty("value")&&(i.value=e.bytes===String?o.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value),null!=t.timeReceived&&t.hasOwnProperty("timeReceived")&&(i.timeReceived=t.timeReceived),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=a},77368:(t,e,i)=>{"use strict";const r=i(32114),{toString:n}=i(92263);t.exports={bestRecord:(t,e,i)=>{if(0===i.length)throw r(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED");const s=n(e).split("/");if(s.length<3)throw r(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY");const o=t[s[1].toString()];if(!o){const t=`Unrecognized key prefix: ${s[1]}`;throw r(new Error(t),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===i.length?0:o(e,i)},selectors:i(3897)}},3897:(t,e,i)=>{"use strict";t.exports={pk:i(20707)}},20707:t=>{"use strict";t.exports=(t,e)=>0},99065:t=>{"use strict";t.exports.toRFC3339=t=>`${t.getUTCFullYear()}-${String(t.getUTCMonth()+1).padStart(2,"0")}-${String(t.getUTCDate()).padStart(2,"0")}T${String(t.getUTCHours()).padStart(2,"0")}:${String(t.getUTCMinutes()).padStart(2,"0")}:${String(t.getUTCSeconds()).padStart(2,"0")}.${1e3*t.getUTCMilliseconds()*1e3}Z`,t.exports.parseRFC3339=t=>{const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),i=String(t).trim().match(e);if(!i)throw new Error("Invalid format");const r=parseInt(i[1],10),n=parseInt(i[2],10)-1,s=parseInt(i[3],10),o=parseInt(i[4],10),a=parseInt(i[5],10),h=parseInt(i[6],10),c=parseInt(i[7].slice(0,-6),10);return new Date(Date.UTC(r,n,s,o,a,h,c))}},18557:(t,e,i)=>{"use strict";const r=i(32114),{toString:n}=i(92263);t.exports={verifyRecord:(t,e)=>{const i=e.key,s=n(i).split("/");if(s.length<3)return;const o=t[s[1].toString()];if(!o)throw r(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE");return o.func(i,e.value)},validators:i(78577)}},78577:(t,e,i)=>{"use strict";t.exports={pk:i(1262)}},1262:(t,e,i)=>{"use strict";const{sha256:r}=i(56155),n=i(32114),{toString:s}=i(92263),{equals:o}=i(19588);t.exports={func:async(t,e)=>{if(!(t instanceof Uint8Array))throw n(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw n(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if("/pk/"!==s(t.subarray(0,4)))throw n(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");const i=t.slice(4),a=await r.digest(e);if(!o(i,a.bytes))throw n(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")},sign:!1}},53737:(t,e,i)=>{"use strict";const r=i(81980);function n(t,e){const i=r(t.multiaddr),n=r(e.multiaddr);return i&&!n?1:!i&&n||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}t.exports.publicAddressesFirst=function(t){return[...t].sort(n)}},52942:t=>{"use strict";t.exports=function(t,e){return t.length===e.length&&e.sort()&&t.sort().every(((t,i)=>e[i].equals(t)))}},489:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:ip-port-to-multiaddr"),{error:r("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:s}=i(46584),o=i(32114),{Address4:a,Address6:h}=i(91843),c={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};t.exports=function(t,e){if("string"!=typeof t)throw o(new Error(`invalid ip provided: ${t}`),c.ERR_INVALID_IP_PARAMETER);if("string"==typeof e&&(e=parseInt(e)),isNaN(e))throw o(new Error(`invalid port provided: ${e}`),c.ERR_INVALID_PORT_PARAMETER);try{return new a(t),new s(`/ip4/${t}/tcp/${e}`)}catch{}try{const i=new h(t);return i.is4()?new s(`/ip4/${i.to4().correctForm()}/tcp/${e}`):new s(`/ip6/${t}/tcp/${e}`)}catch(i){const r=`invalid ip:port for creating a multiaddr: ${t}:${e}`;throw n.error(r),o(new Error(r),c.ERR_INVALID_IP)}},t.exports.Errors=c},23830:(t,e,i)=>{"use strict";const r=i(51890);t.exports=function(t){const{address:e}=t.nodeAddress();return r(e)}},81980:(t,e,i)=>{"use strict";const r=i(290);t.exports=function(t){const{address:e}=t.nodeAddress();return r(e)}},15091:(t,e,i)=>{"use strict";const{source:r}=i(61623),n=i(11227)("libp2p:stream:converter");t.exports=function({stream:t,remoteAddr:e,localAddr:i},s={}){const{sink:o,source:a}=t,h={async sink(t){s.signal&&(t=r(t,s.signal));try{await o(t)}catch(t){"aborted"!==t.type&&n(t)}c()},source:s.signal?r(a,s.signal):a,conn:t,localAddr:i,remoteAddr:e,timeline:{open:Date.now(),close:void 0},close:()=>(o(new Uint8Array(0)),c())};function c(){return h.timeline.close||(h.timeline.close=Date.now()),Promise.resolve()}return h}},33298:(t,e,i)=>{var r=i(11227)("simple-peer"),n=i(5177),s=i(61798),o=i(88473),a=i(54375),h=i(9003),c=65536;function l(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}class u extends o.Duplex{constructor(t){if(super(t=Object.assign({allowHalfOpen:!1},t)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||s(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||u.channelConfig,this.negotiated=this.channelConfig.negotiated,this.config=Object.assign({},u.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(t=>t),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=void 0===t.trickle||t.trickle,this.allowHalfTrickle=void 0!==t.allowHalfTrickle&&t.allowHalfTrickle,this.iceCompleteTimeout=t.iceCompleteTimeout||5e3,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&"object"==typeof t.wrtc?t.wrtc:n(),!this._wrtc)throw"undefined"==typeof window?h(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):h(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.negotiated&&!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void a((()=>this.destroy(h(t,"ERR_PC_CONSTRUCTOR"))))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},this.initiator||this.negotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach((t=>{this.addStream(t)})),this._pc.ontrack=t=>{this._onTrack(t)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(this.destroyed)throw h(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((t=>{this._addIceCandidate(t)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((t=>{this.destroy(h(t,"ERR_SET_REMOTE_DESCRIPTION"))})),t.sdp||t.candidate||t.renegotiate||t.transceiverRequest||this.destroy(h(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(t){var e=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(e).catch((t=>{!e.address||e.address.endsWith(".local")?("Ignoring unsupported ICE candidate.",console.warn("Ignoring unsupported ICE candidate.")):this.destroy(h(t,"ERR_ADD_ICE_CANDIDATE"))}))}send(t){this._channel.send(t)}addTransceiver(t,e){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,e),this._needsNegotiation()}catch(t){this.destroy(h(t,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:t,init:e}})}addStream(t){this._debug("addStream()"),t.getTracks().forEach((e=>{this.addTrack(e,t)}))}addTrack(t,e){this._debug("addTrack()");var i=this._senderMap.get(t)||new Map,r=i.get(e);if(r)throw r.removed?h(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):h(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(t,e),i.set(e,r),this._senderMap.set(t,i),this._needsNegotiation()}replaceTrack(t,e,i){this._debug("replaceTrack()");var r=this._senderMap.get(t),n=r?r.get(i):null;if(!n)throw h(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");e&&this._senderMap.set(e,r),null!=n.replaceTrack?n.replaceTrack(e):this.destroy(h(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(t,e){this._debug("removeSender()");var i=this._senderMap.get(t),r=i?i.get(e):null;if(!r)throw h(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(t){"NS_ERROR_UNEXPECTED"===t.name?this._sendersAwaitingStable.push(r):this.destroy(h(t,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){this._debug("removeSenders()"),t.getTracks().forEach((e=>{this.removeTrack(e,t)}))}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a((()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()})))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}_destroy(t,e){if(this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(t){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(t){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e(t)}_setupData(t){if(!t.channel)return this.destroy(h(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=c),this.channelName=this._channel.label,this._channel.onmessage=t=>{this._onChannelMessage(t)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=t=>{this.destroy(h(t,"ERR_DATA_CHANNEL"))};var e=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(e&&this._onChannelClose(),e=!0):e=!1}),5e3)}_read(){}_write(t,e,i){if(this.destroyed)return i(h(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(t){return this.destroy(h(t,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>c?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=t,this._cb=i}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){var e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp})}};this._pc.setLocalDescription(t).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))})).catch((t=>{this.destroy(h(t,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((t=>{this.destroy(h(t,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,this.addTransceiver(t.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){var e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(t).then((()=>{this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))})).catch((t=>{this.destroy(h(t,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((t=>{this.destroy(h(t,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(h(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var t=this._pc.iceConnectionState,e=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,e),this.emit("iceStateChange",t,e),"connected"!==t&&"completed"!==t||(this._pcReady=!0,this._maybeReady()),"failed"===t&&this.destroy(h(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&this.destroy(h(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(t){const e=t=>("[object Array]"===Object.prototype.toString.call(t.values)&&t.values.forEach((e=>{Object.assign(t,e)})),t);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((i=>{var r=[];i.forEach((t=>{r.push(e(t))})),t(null,r)}),(e=>t(e))):this._pc.getStats.length>0?this._pc.getStats((i=>{if(!this.destroyed){var r=[];i.result().forEach((t=>{var i={};t.names().forEach((e=>{i[e]=t.stat(e)})),i.id=t.id,i.type=t.type,i.timestamp=t.timestamp,r.push(e(i))})),t(null,r)}}),(e=>t(e))):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats(((e,i)=>{if(this.destroyed)return;e&&(i=[]);var r={},n={},s={},o=!1;i.forEach((t=>{"remotecandidate"!==t.type&&"remote-candidate"!==t.type||(r[t.id]=t),"localcandidate"!==t.type&&"local-candidate"!==t.type||(n[t.id]=t),"candidatepair"!==t.type&&"candidate-pair"!==t.type||(s[t.id]=t)}));const a=t=>{o=!0;var e=n[t.localCandidateId];e&&(e.ip||e.address)?(this.localAddress=e.ip||e.address,this.localPort=Number(e.port)):e&&e.ipAddress?(this.localAddress=e.ipAddress,this.localPort=Number(e.portNumber)):"string"==typeof t.googLocalAddress&&(e=t.googLocalAddress.split(":"),this.localAddress=e[0],this.localPort=Number(e[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var i=r[t.remoteCandidateId];i&&(i.ip||i.address)?(this.remoteAddress=i.ip||i.address,this.remotePort=Number(i.port)):i&&i.ipAddress?(this.remoteAddress=i.ipAddress,this.remotePort=Number(i.portNumber)):"string"==typeof t.googRemoteAddress&&(i=t.googRemoteAddress.split(":"),this.remoteAddress=i[0],this.remotePort=Number(i[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach((t=>{"transport"===t.type&&t.selectedCandidatePairId&&a(s[t.selectedCandidatePairId]),("googCandidatePair"===t.type&&"true"===t.googActiveConnection||("candidatepair"===t.type||"candidate-pair"===t.type)&&t.selected)&&a(t)})),o||Object.keys(s).length&&!Object.keys(n).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(h(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var c=this._cb;this._cb=null,c(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(t,100)}))};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>c||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"!==this._pc.signalingState||this._firstStable||(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):t.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(!this.destroyed){var e=t.data;e instanceof ArrayBuffer&&(e=new Uint8Array(e)),this.push(e)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var t=this._cb;this._cb=null,t(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach((e=>{this._debug("on track"),this.emit("track",t.track,e),this._remoteTracks.push({track:t.track,stream:e}),this._remoteStreams.some((t=>t.id===e.id))||(this._remoteStreams.push(e),a((()=>{this.emit("stream",e)})))}))}_debug(){var t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],r.apply(null,t)}}u.WEBRTC_SUPPORT=!!n(),u.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},u.channelConfig={},t.exports=u},9003:t=>{"use strict";function e(t,e){for(const i in e)Object.defineProperty(t,i,{value:e[i],enumerable:!0,configurable:!0});return t}t.exports=function(t,i,r){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof i&&(r=i,i=void 0),null!=i&&(r.code=i);try{return e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),e(new n,r)}}},15852:(t,e)=>{"use strict";e.CODE_P2P=421,e.CODE_CIRCUIT=290,e.CLOSE_TIMEOUT=2e3},44389:(t,e,i)=>{"use strict";const r=i(11227),n=r("libp2p:webrtc-star");n.error=r("libp2p:webrtc-star:error");const{EventEmitter:s}=i(17187),o=i(32114),a=i(98514),{AbortError:h}=i(61623),c=i(33298),{supportsWebRTCDataChannels:l}=i(6065),{Multiaddr:u}=i(46584),d=i(29175),f=i(88785),{CODE_CIRCUIT:p}=i(15852),g=i(43815),y=i(30850),{cleanMultiaddr:m,cleanUrlSIO:v}=i(56585);function b(){}t.exports=a(class{constructor(t={}){if(!t.upgrader)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=t.upgrader,this.sioOptions={transports:["websocket"],"force new connection":!0},t.wrtc&&(this.wrtc=t.wrtc),this.sigReferences=new Map,this.discovery=new s,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=()=>{this.discovery._isStarted=!0},this.discovery.stop=()=>{this.discovery._isStarted=!1},this._peerDiscovered=this._peerDiscovered.bind(this)}async dial(t,e={}){const i=await this._connect(t,e),r=y(i,{remoteAddr:t,signal:e.signal});n("new outbound connection %s",r.remoteAddr);const s=await this._upgrader.upgradeOutbound(r);return n("outbound connection %s upgraded",r.remoteAddr),s}_connect(t,e={}){if(e.signal&&e.signal.aborted)throw new h;const i={initiator:!0,trickle:!1,...e.spOptions||{}};this.wrtc&&(i.wrtc=this.wrtc);const r=t.toOptions(),s=(~~(1e9*Math.random())).toString(36)+Date.now();return new Promise(((a,l)=>{const u=this.sigReferences.get(v(t));if(!u||!u.listener)return l(o(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));const d=u.listener.io,f=Date.now();let p;n("dialing %s:%s",r.host,r.port);const g=new c(i),y=t=>{if(!p){const e=`connection error ${r.host}:${r.port}: ${t.message}`;n.error(e),_(t)}},m=()=>{n("connnection timeout %s:%s",r.host,r.port);const t=o(new Error(`connection timeout after ${Date.now()-f}ms`),"ERR_CONNECT_TIMEOUT");g.emit("error",t)},b=()=>{p=!0,n("connection opened %s:%s",r.host,r.port),_(null)},w=()=>{n.error("connection aborted %s:%s",r.host,r.port),g.destroy(),_(new h)},_=t=>{g.removeListener("timeout",m),g.removeListener("connect",b),e.signal&&e.signal.removeEventListener("abort",w),t?l(t):a(g)};g.on("error",y),g.once("timeout",m),g.once("connect",b),g.on("close",(()=>{g.removeListener("error",y)})),e.signal&&e.signal.addEventListener("abort",w),g.on("signal",(e=>{d.emit("ss-handshake",{intentId:s,srcMultiaddr:u.signallingAddr.toString(),dstMultiaddr:t.toString(),signal:e})})),d.on("ws-handshake",(t=>{t.intentId===s&&t.err&&(g.destroy(),l(o(t.err instanceof Error?t.err:new Error(t.err),"ERR_SIGNALLING_FAILED"))),t.intentId===s&&t.answer&&!g.destroyed&&g.signal(t.signal)}))}))}createListener(t={},e){if(!l&&!this.wrtc)throw o(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return"function"==typeof t&&(e=t,t={}),g({handler:e=e||b,upgrader:this._upgrader},this,t)}filter(t){return(t=Array.isArray(t)?t:[t]).filter((t=>!t.protoCodes().includes(p)&&d.WebRTCStar.matches(t)))}_peerDiscovered(t){if(!this.discovery._isStarted)return;n("Peer Discovered:",t),t=m(t);const e=new u(t),i=f.createFromB58String(e.getPeerId());this.discovery.emit("peer",{id:i,multiaddrs:[e]})}},{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})},43815:(t,e,i)=>{"use strict";const r=i(17187),n=i(11227),s=n("libp2p:webrtc-star:listener");s.error=n("libp2p:webrtc-star:listener:error");const o=i(32114),a=i(57046),h=i(33298),c=i(63931),l=i(30850),{cleanUrlSIO:u}=i(56585),{CODE_P2P:d}=i(15852),f={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};t.exports=({handler:t,upgrader:e},i,n={})=>{const p=new r;let g,y;return p.__connections=[],p.__spChannels=new Map,p.__pendingIntents=new Map,p.listen=r=>{if(g)throw o(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const m=c();let v;return g=r,v=!r.protoCodes().includes(d)&&e.localPeer?r.encapsulate(`/p2p/${e.localPeer.toB58String()}`):r,p.on("error",(()=>m.reject())),y=u(r),s("Dialing to Signalling Server on: "+y),p.io=a.connect(y,f),p.io.once("connect_error",(t=>m.reject(t))),p.io.once("error",(t=>{p.emit("error",t),p.emit("close")})),p.io.on("ws-handshake",(o=>{if(o.answer||o.err||!o.intentId)return;const a=o.intentId;let c=p.__pendingIntents.get(a);c||(c=[],p.__pendingIntents.set(a,c));let u=p.__spChannels.get(a);if(u)return void u.signal(o.signal);if("offer"!==o.signal.type)return void c.push(o);const f={trickle:!1,...n};i.wrtc&&(f.wrtc=i.wrtc),u=new h(f);const g=t=>{s.error("incoming connection errored",t)};u.on("error",g),u.once("close",((...t)=>{u.removeListener("error",g)})),u.on("signal",(t=>{o.signal=t,o.answer=!0,p.io.emit("ss-handshake",o)})),u.signal(o.signal);for(const t of c)u.signal(t.signal);p.__pendingIntents.set(a,[]),u.once("connect",(async()=>{const i=l(u);let n;s("new inbound connection %s",i.remoteAddr);try{n=await e.upgradeInbound(i)}catch(t){return s.error("inbound connection failed to upgrade",t),i.close()}if(!n.remoteAddr)try{n.remoteAddr=r.decapsulateCode(d).encapsulate(`/p2p/${n.remotePeer.toB58String()}`)}catch(t){s.error("could not determine remote address",t)}s("inbound connection %s upgraded",i.remoteAddr),function(t,e,i){t.__connections.push(e);e.conn.once("close",(()=>{t.__connections=t.__connections.filter((t=>t!==e)),t.__spChannels.delete(i),t.__pendingIntents.delete(i)}))}(p,i,a),p.emit("connection",n),t(n)})),p.__spChannels.set(a,u)})),p.io.on("ws-peer",i._peerDiscovered),p.io.on("connect",(()=>{p.io.emit("ss-join",v.toString())})),p.io.once("connect",(()=>{p.emit("listening"),m.resolve()})),i.sigReferences.set(y,{listener:p,signallingAddr:v}),m.promise},p.close=async()=>{const t=i.sigReferences.get(y);t&&t.listener.io&&(t.listener.io.emit("ss-leave"),t.listener.io.close()),await Promise.all(p.__connections.map((t=>t.close()))),p.emit("close"),p.removeAllListeners(),g=void 0,i.sigReferences.delete(y)},p.getAddrs=()=>[g],p}},30850:(t,e,i)=>{"use strict";const r=i(61623),n=i(79407),{CLOSE_TIMEOUT:s}=i(15852),o=i(489),a=i(11227),h=a("libp2p:webrtc-star:socket");h.error=a("libp2p:webrtc-star:socket:error");const c=(t,e)=>{if(t&&e)try{return o(t,e)}catch(t){return h.error(t),o("0.0.0.0",e)}};t.exports=(t,e={})=>{const{sink:i,source:o}=n.duplex(t),a=e.remoteAddr||c(t.remoteAddress,t.remotePort),l=c(t.localAddress,t.localPort),u={async sink(t){e.signal&&(t=r(t,e.signal));try{await i(async function*(){for await(const e of t)yield e instanceof Uint8Array?e:e.slice()}())}catch(t){"aborted"!==t.type&&h.error(t)}},source:e.signal?r(o,e.signal):o,conn:t,localAddr:l,remoteAddr:a,timeline:{open:Date.now()},close(){if(!t.destroyed)return new Promise(((e,i)=>{const r=Date.now(),n=setTimeout((()=>{if(u.remoteAddr){const{host:t,port:e}=u.remoteAddr.toOptions();h("timeout closing socket to %s:%s after %dms, destroying it manually",t,e,Date.now()-r)}t.destroyed||t.destroy()}),s);t.once("close",(()=>{e()})),t.end((t=>{if(clearTimeout(n),u.timeline.close=Date.now(),t)return i(t)}))}))}};return t.once("close",(()=>{u.timeline.close||(u.timeline.close=Date.now())})),u}},56585:(t,e,i)=>{"use strict";const{Multiaddr:r}=i(46584);t.exports={cleanUrlSIO:function(t){const e=t.toString().split("/"),i=t.protos()[1].name,n=t.protos()[2].name,s=t.stringTuples()[1][1];if("tcp"!==i||"ws"!==n&&"wss"!==n)throw new Error("invalid multiaddr: "+t.toString());return r.isName(t)?"ws"===n?"http://"+e[2]+("80"===s?"":":"+s):"wss"===n?"https://"+e[2]+("443"===s?"":":"+s):void 0:"http://"+e[2]+":"+e[4]},cleanMultiaddr:function(t){const e="/libp2p-webrtc-star";if(-1!==t.indexOf(e)){t=t.substring(e.length,t.length);let i=new r(t);const n=i.stringTuples().filter((t=>421===t[0]))[0];i=i.decapsulate("p2p"),i=i.encapsulate("/p2p-webrtc-star"),i=i.encapsulate(`/p2p/${n[1]}`),t=i.toString()}return t}}},56223:t=>{"use strict";class e extends Error{constructor(t){super(t),this.name="TimeoutError"}}const i=(t,i,r,n)=>{let s;const o=new Promise(((o,a)=>{if("number"!=typeof i||i<0)throw new TypeError("Expected `milliseconds` to be a positive number");i!==1/0?(n={customTimers:{setTimeout,clearTimeout},...n},s=n.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof r){try{o(r())}catch(t){a(t)}return}const n=r instanceof Error?r:new e("string"==typeof r?r:`Promise timed out after ${i} milliseconds`);"function"==typeof t.cancel&&t.cancel(),a(n)}),i),(async()=>{try{o(await t)}catch(t){a(t)}finally{n.customTimers.clearTimeout.call(void 0,s)}})()):o(t)}));return o.clear=()=>{clearTimeout(s),s=void 0},o};t.exports=i,t.exports.default=i,t.exports.TimeoutError=e},33199:(t,e)=>{"use strict";e.CODE_P2P=421,e.CODE_CIRCUIT=290,e.CODE_TCP=6,e.CODE_WS=477,e.CODE_WSS=478,e.CLOSE_TIMEOUT=2e3},70040:(t,e,i)=>{"use strict";const r=i(29175),{CODE_CIRCUIT:n,CODE_P2P:s,CODE_TCP:o,CODE_WS:a,CODE_WSS:h}=i(33199);t.exports={all:t=>t.filter((t=>{if(t.protoCodes().includes(n))return!1;const e=t.decapsulateCode(s);return r.WebSockets.matches(e)||r.WebSocketsSecure.matches(e)})),dnsWss:t=>t.filter((t=>{if(t.protoCodes().includes(n))return!1;const e=t.decapsulateCode(s);return r.WebSocketsSecure.matches(e)&&r.DNS.matches(e.decapsulateCode(o).decapsulateCode(h))})),dnsWsOrWss:t=>t.filter((t=>{if(t.protoCodes().includes(n))return!1;const e=t.decapsulateCode(s);return r.WebSockets.matches(e)?r.DNS.matches(e.decapsulateCode(o).decapsulateCode(a)):r.WebSocketsSecure.matches(e)&&r.DNS.matches(e.decapsulateCode(o).decapsulateCode(h))}))}},29846:(t,e,i)=>{"use strict";const r=i(6476),n=i(98514),s=i(95700),{AbortError:o}=i(61623),a=i(63931),h=i(11227),c=h("libp2p:websockets");c.error=h("libp2p:websockets:error");const l=i(106),u=i(89174),d=i(10863),f=i(70040);t.exports=n(class{constructor({upgrader:t,filter:e}){if(!t)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=t,this._filter=e}async dial(t,e={}){c("dialing %s",t);const i=await this._connect(t,e),r=d(i,{remoteAddr:t,signal:e.signal});c("new outbound connection %s",r.remoteAddr);const n=await this._upgrader.upgradeOutbound(r);return c("outbound connection %s upgraded",r.remoteAddr),n}async _connect(t,e={}){if(e.signal&&e.signal.aborted)throw new o;const i=t.toOptions();c("dialing %s:%s",i.host,i.port);const n=a(),h=t=>{const e=`connection error: ${t.message}`;c.error(e),n.reject(t)},l=r(s(t),Object.assign({binary:!0},e));if(l.socket.on?l.socket.on("error",h):l.socket.onerror=h,!e.signal)return await Promise.race([l.connected(),n.promise]),c("connected %s",t),l;let u;const d=new Promise(((t,i)=>{if(u=()=>{i(new o),setTimeout((()=>{l.close()}))},e.signal.aborted)return u();e.signal.addEventListener("abort",u)}));try{await Promise.race([d,n.promise,l.connected()])}finally{e.signal.removeEventListener("abort",u)}return c("connected %s",t),l}createListener(t={},e){return"function"==typeof t&&(e=t,t={}),u({handler:e,upgrader:this._upgrader},t)}filter(t){return t=Array.isArray(t)?t:[t],this._filter?this._filter(t):l.isBrowser||l.isWebWorker?f.dnsWss(t):f.all(t)}},{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})},89174:t=>{"use strict";t.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}},10863:(t,e,i)=>{"use strict";const r=i(61623),{CLOSE_TIMEOUT:n}=i(33199),s=i(489),o=i(56223),a=i(11227),h=a("libp2p:websockets:socket");h.error=a("libp2p:websockets:socket:error"),t.exports=(t,e={})=>{const i={async sink(i){e.signal&&(i=r(i,e.signal));try{await t.sink(async function*(){for await(const t of i)yield t instanceof Uint8Array?t:t.slice()}())}catch(t){"aborted"!==t.type&&h.error(t)}},source:e.signal?r(t.source,e.signal):t.source,conn:t,localAddr:e.localAddr||(t.localAddress&&t.localPort?s(t.localAddress,t.localPort):void 0),remoteAddr:e.remoteAddr||s(t.remoteAddress,t.remotePort),timeline:{open:Date.now()},async close(){const e=Date.now();try{await o(t.close(),n)}catch(r){const{host:n,port:s}=i.remoteAddr.toOptions();h("timeout closing stream to %s:%s after %dms, destroying it manually",n,s,Date.now()-e),t.destroy()}finally{i.timeline.close=Date.now()}}};return t.socket.once&&t.socket.once("close",(()=>{i.timeline.close||(i.timeline.close=Date.now())})),i}},14942:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),{Multiaddr:n}=i(46584),s=i(88785);t.exports=class extends r{constructor(t,{listen:e=[],announce:i=[]}={}){super(),this.peerId=t,this.listen=new Set(e.map((t=>t.toString()))),this.announce=new Set(i.map((t=>t.toString()))),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map((t=>new n(t)))}getAnnounceAddrs(){return Array.from(this.announce).map((t=>new n(t)))}getObservedAddrs(){return Array.from(this.observed).map((t=>new n(t)))}addObservedAddr(t){let e=new n(t);const i=e.getPeerId();i&&s.createFromB58String(i).equals(this.peerId)&&(e=e.decapsulate(new n(`/p2p/${this.peerId}`)));const r=e.toString();this.observed.has(r)||(this.observed.add(r),this.emit("change:addresses"))}}},58126:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:auto-relay"),{error:r("libp2p:auto-relay:err")}),{fromString:s}=i(52217),{toString:o}=i(92263),{Multiaddr:a}=i(46584),h=i(31303),{relay:c}=i(49284),{canHop:l}=i(71466),{namespaceToCid:u}=i(32497),{CIRCUIT_PROTO_CODE:d,HOP_METADATA_KEY:f,HOP_METADATA_VALUE:p,RELAY_RENDEZVOUS_NS:g}=i(67573);t.exports=class{constructor({libp2p:t,maxListeners:e=1,onError:i}){this._libp2p=t,this._peerId=t.peerId,this._peerStore=t.peerStore,this._connectionManager=t.connectionManager,this._transportManager=t.transportManager,this._addressSorter=t.dialer.addressSorter,this.maxListeners=e,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(t,e)=>{n.error(e||t),i&&i(t,e)}}async _onProtocolChange({peerId:t,protocols:e}){const i=t.toB58String(),r=e.find((t=>t===c));if(r||!this._listenRelays.has(i)){if(r&&!this._listenRelays.has(i))try{const e=this._connectionManager.get(t);if(!e)return;if(e.remoteAddr.protoCodes().includes(d))return void n(`relayed connection to ${i} will not be used to hop on`);await l({connection:e})&&(await this._peerStore.metadataBook.setValue(t,f,s(p)),await this._addListenRelay(e,i))}catch(t){this._onError(t)}}else await this._removeListenRelay(i)}_onPeerDisconnected(t){const e=t.remotePeer.toB58String();this._listenRelays.has(e)&&this._removeListenRelay(e).catch((t=>{n.error(t)}))}async _addListenRelay(t,e){try{if(this._listenRelays.size>=this.maxListeners)return;const i=await this._peerStore.addressBook.getMultiaddrsForPeer(t.remotePeer,this._addressSorter);(await Promise.all(i.map((async t=>{try{return await this._transportManager.listen([new a(`${t.toString()}/p2p-circuit`)]),!0}catch(t){this._onError(t)}return!1})))).includes(!0)&&this._listenRelays.add(e)}catch(t){this._onError(t),this._listenRelays.delete(e)}}async _removeListenRelay(t){this._listenRelays.delete(t)&&await this._listenOnAvailableHopRelays([t])}async _listenOnAvailableHopRelays(t=[]){if(this._listenRelays.size>=this.maxListeners)return;const e=[],i=await h(this._peerStore.getPeers());for await(const{id:r,metadata:n}of i){const i=r.toB58String();if(this._listenRelays.has(i))continue;if(t.includes(i))continue;const s=n.get(f);if(!s||o(s)!==p)continue;const a=this._connectionManager.get(r);if(a){if(await this._addListenRelay(a,i),this._listenRelays.size>=this.maxListeners)return}else e.push(r)}for(const t of e)if(await this._tryToListenOnRelay(t),this._listenRelays.size>=this.maxListeners)return;try{const t=await u(g);for await(const e of this._libp2p.contentRouting.findProviders(t)){if(!e.multiaddrs.length)continue;const t=e.id;if(await this._peerStore.addressBook.add(t,e.multiaddrs),await this._tryToListenOnRelay(t),this._listenRelays.size>=this.maxListeners)return}}catch(t){this._onError(t)}}async _tryToListenOnRelay(t){try{const e=await this._libp2p.dial(t);await this._addListenRelay(e,t.toB58String())}catch(e){this._onError(e,`could not connect and listen on known hop relay ${t.toB58String()}`)}}}},71466:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:circuit:hop"),{error:r("libp2p:circuit:hop:err")}),s=i(32114),o=i(88785),{validateAddrs:a}=i(44780),h=i(72866),{CircuitRelay:c}=i(79123),{pipe:l}=i(60618),{codes:u}=i(23416),{stop:d}=i(10655),f=i(49284);t.exports={handleHop:async function({connection:t,request:e,streamHandler:i,circuit:r}){if(!r._options.hop.enabled)return n("HOP request received but we are not acting as a relay"),i.end({type:c.Type.STATUS,code:c.Status.HOP_CANT_SPEAK_RELAY});try{a(e,i)}catch(e){return n.error("invalid hop request via peer %s",t.remotePeer.toB58String(),e)}if(!e.dstPeer)return void n("HOP request received but we do not receive a dstPeer");const s=new o(e.dstPeer.id),h=r._connectionManager.get(s);if(!h&&!r._options.hop.active)return n("HOP request received but we are not connected to the destination peer"),i.end({type:c.Type.STATUS,code:c.Status.HOP_NO_CONN_TO_DST});if(!h)return;const u={type:c.Type.STOP,dstPeer:e.dstPeer,srcPeer:e.srcPeer};let f;try{f=await d({connection:h,request:u})}catch(t){return n.error(t)}n("hop request from %s is valid",t.remotePeer.toB58String()),i.write({type:c.Type.STATUS,code:c.Status.SUCCESS});const p=i.rest();return l(p,f,p)},hop:async function({connection:t,request:e}){const{stream:i}=await t.newStream([f.relay]),r=new h({stream:i});r.write(e);const o=await r.read();if(!o)throw s(new Error("HOP request had no response"),u.ERR_HOP_REQUEST_FAILED);if(o.code===c.Status.SUCCESS)return n("hop request was successful"),r.rest();throw n("hop request failed with code %d, closing stream",o.code),r.close(),s(new Error(`HOP request failed with code ${o.code}`),u.ERR_HOP_REQUEST_FAILED)},canHop:async function({connection:t}){const{stream:e}=await t.newStream([f.relay]),i=new h({stream:e});i.write({type:c.Type.CAN_HOP});const r=await i.read();return await i.close(),!(!r||r.code!==c.Status.SUCCESS)},handleCanHop:function({connection:t,streamHandler:e,circuit:i}){const r=i._options.hop.enabled;n("can hop (%s) request from %s",r,t.remotePeer.toB58String()),e.end({type:c.Type.STATUS,code:r?c.Status.SUCCESS:c.Status.HOP_CANT_SPEAK_RELAY})}}},10655:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:circuit:stop"),{error:r("libp2p:circuit:stop:err")}),{CircuitRelay:s}=i(79123),o=i(49284),a=i(72866),{validateAddrs:h}=i(44780);t.exports.handleStop=function({connection:t,request:e,streamHandler:i}){try{h(e,i)}catch(e){return n.error("invalid stop request via peer %s",t.remotePeer.toB58String(),e)}return n("stop request is valid"),i.write({type:s.Type.STATUS,code:s.Status.SUCCESS}),i.rest()},t.exports.stop=async function({connection:t,request:e}){const{stream:i}=await t.newStream([o.relay]);n("starting stop request to %s",t.remotePeer.toB58String());const r=new a({stream:i});r.write(e);const h=await r.read();return h?h.code===s.Status.SUCCESS?(n("stop request to %s was successful",t.remotePeer.toB58String()),r.rest()):(n("stop request failed with code %d",h.code),void r.close()):r.close()}},72866:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:circuit:stream-handler"),{error:r("libp2p:circuit:stream-handler:err")}),s=i(48963),o=i(52261),{CircuitRelay:a}=i(79123);t.exports=class{constructor({stream:t,maxLength:e=4096}){this.stream=t,this.shake=o(this.stream),this.decoder=s.decode.fromReader(this.shake.reader,{maxDataLength:e})}async read(){const t=await this.decoder.next();if(t.value){const e=a.decode(t.value.slice());return n("read message type",e.type),e}n("read received no value, closing stream"),this.close()}write(t){n("write message type %s",t.type),this.shake.write(s.encode.single(a.encode(t).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(t){this.write(t),this.close()}close(){n("closing the stream"),this.rest().sink([])}}},44780:(t,e,i)=>{"use strict";const{Multiaddr:r}=i(46584),{CircuitRelay:n}=i(79123);function s(t,e){t.write({type:n.Type.STATUS,code:e})}t.exports={validateAddrs:function(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach((t=>new r(t)))}catch(i){throw s(e,t.type===n.Type.HOP?n.Status.HOP_DST_MULTIADDR_INVALID:n.Status.STOP_DST_MULTIADDR_INVALID),i}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach((t=>new r(t)))}catch(i){throw s(e,t.type===n.Type.HOP?n.Status.HOP_SRC_MULTIADDR_INVALID:n.Status.STOP_SRC_MULTIADDR_INVALID),i}}}},67573:t=>{"use strict";t.exports={ADVERTISE_BOOT_DELAY:9e5,ADVERTISE_TTL:18e5,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}},2715:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:relay"),{error:r("libp2p:relay:err")}),{codes:s}=i(23416),{setDelayedInterval:o,clearDelayedInterval:a}=i(27695),h=i(58126),{namespaceToCid:c}=i(32497),{RELAY_RENDEZVOUS_NS:l}=i(67573);t.exports=class{constructor(t){this._libp2p=t,this._options={...t._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new h({libp2p:t,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=o(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){a(this._timeout)}async _advertiseService(){try{const t=await c(l);await this._libp2p.contentRouting.provide(t)}catch(t){t.code===s.ERR_NO_ROUTERS_AVAILABLE?(n.error("a content router, such as a DHT, must be provided in order to advertise the relay service",t),this.stop()):n.error(t)}}}},64538:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),{Multiaddr:n}=i(46584);t.exports=t=>{const e=new Map,i=Object.assign(new r,{close:()=>Promise.resolve(),listen:async function(r){const s=String(r).split("/p2p-circuit").find((t=>""!==t)),o=await t.dial(new n(s)),a=o.remoteAddr.encapsulate("/p2p-circuit");e.set(o.remotePeer.toB58String(),a),i.emit("listening")},getAddrs:function(){const t=[];for(const i of e.values())t.push(i);return t}});return t.connectionManager.on("peer:disconnect",(t=>{e.delete(t.remotePeer.toB58String())&&i.emit("close")})),i}},49284:t=>{"use strict";t.exports={relay:"/libp2p/circuit/relay/0.1.0"}},79123:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-circuit"]||(r.roots["libp2p-circuit"]={});a.CircuitRelay=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e,i;return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(t,e){return e||(e=s.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.srcPeer&&Object.hasOwnProperty.call(t,"srcPeer")&&a.CircuitRelay.Peer.encode(t.srcPeer,e.uint32(18).fork()).ldelim(),null!=t.dstPeer&&Object.hasOwnProperty.call(t,"dstPeer")&&a.CircuitRelay.Peer.encode(t.dstPeer,e.uint32(26).fork()).ldelim(),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&e.uint32(32).int32(t.code),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.CircuitRelay;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.type=t.int32();break;case 2:r.srcPeer=a.CircuitRelay.Peer.decode(t,t.uint32());break;case 3:r.dstPeer=a.CircuitRelay.Peer.decode(t,t.uint32());break;case 4:r.code=t.int32();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.CircuitRelay)return t;var e=new a.CircuitRelay;switch(t.type){case"HOP":case 1:e.type=1;break;case"STOP":case 2:e.type=2;break;case"STATUS":case 3:e.type=3;break;case"CAN_HOP":case 4:e.type=4}if(null!=t.srcPeer){if("object"!=typeof t.srcPeer)throw TypeError(".CircuitRelay.srcPeer: object expected");e.srcPeer=a.CircuitRelay.Peer.fromObject(t.srcPeer)}if(null!=t.dstPeer){if("object"!=typeof t.dstPeer)throw TypeError(".CircuitRelay.dstPeer: object expected");e.dstPeer=a.CircuitRelay.Peer.fromObject(t.dstPeer)}switch(t.code){case"SUCCESS":case 100:e.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:e.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:e.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:e.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:e.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:e.code=260;break;case"HOP_CANT_DIAL_DST":case 261:e.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:e.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:e.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:e.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:e.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:e.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:e.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:e.code=351;break;case"STOP_RELAY_REFUSED":case 390:e.code=390;break;case"MALFORMED_MESSAGE":case 400:e.code=400}return e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.type=e.enums===String?"HOP":1,i.srcPeer=null,i.dstPeer=null,i.code=e.enums===String?"SUCCESS":100),null!=t.type&&t.hasOwnProperty("type")&&(i.type=e.enums===String?a.CircuitRelay.Type[t.type]:t.type),null!=t.srcPeer&&t.hasOwnProperty("srcPeer")&&(i.srcPeer=a.CircuitRelay.Peer.toObject(t.srcPeer,e)),null!=t.dstPeer&&t.hasOwnProperty("dstPeer")&&(i.dstPeer=a.CircuitRelay.Peer.toObject(t.dstPeer,e)),null!=t.code&&t.hasOwnProperty("code")&&(i.code=e.enums===String?a.CircuitRelay.Status[t.code]:t.code),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.Status=(e={},(i=Object.create(e))[e[100]="SUCCESS"]=100,i[e[220]="HOP_SRC_ADDR_TOO_LONG"]=220,i[e[221]="HOP_DST_ADDR_TOO_LONG"]=221,i[e[250]="HOP_SRC_MULTIADDR_INVALID"]=250,i[e[251]="HOP_DST_MULTIADDR_INVALID"]=251,i[e[260]="HOP_NO_CONN_TO_DST"]=260,i[e[261]="HOP_CANT_DIAL_DST"]=261,i[e[262]="HOP_CANT_OPEN_DST_STREAM"]=262,i[e[270]="HOP_CANT_SPEAK_RELAY"]=270,i[e[280]="HOP_CANT_RELAY_TO_SELF"]=280,i[e[320]="STOP_SRC_ADDR_TOO_LONG"]=320,i[e[321]="STOP_DST_ADDR_TOO_LONG"]=321,i[e[350]="STOP_SRC_MULTIADDR_INVALID"]=350,i[e[351]="STOP_DST_MULTIADDR_INVALID"]=351,i[e[390]="STOP_RELAY_REFUSED"]=390,i[e[400]="MALFORMED_MESSAGE"]=400,i),t.Type=function(){var t={},e=Object.create(t);return e[t[1]="HOP"]=1,e[t[2]="STOP"]=2,e[t[3]="STATUS"]=3,e[t[4]="CAN_HOP"]=4,e}(),t.Peer=function(){function t(t){if(this.addrs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.id=o.newBuffer([]),t.prototype.addrs=o.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),e.uint32(10).bytes(t.id),null!=t.addrs&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)e.uint32(18).bytes(t.addrs[i]);return e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.CircuitRelay.Peer;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.id=t.bytes();break;case 2:r.addrs&&r.addrs.length||(r.addrs=[]),r.addrs.push(t.bytes());break;default:t.skipType(7&s)}}if(!r.hasOwnProperty("id"))throw o.ProtocolError("missing required 'id'",{instance:r});return r},t.fromObject=function(t){if(t instanceof a.CircuitRelay.Peer)return t;var e=new a.CircuitRelay.Peer;if(null!=t.id&&("string"==typeof t.id?o.base64.decode(t.id,e.id=o.newBuffer(o.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");e.addrs=[];for(var i=0;i<t.addrs.length;++i)"string"==typeof t.addrs[i]?o.base64.decode(t.addrs[i],e.addrs[i]=o.newBuffer(o.base64.length(t.addrs[i])),0):t.addrs[i].length&&(e.addrs[i]=t.addrs[i])}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addrs=[]),e.defaults&&(e.bytes===String?i.id="":(i.id=[],e.bytes!==Array&&(i.id=o.newBuffer(i.id)))),null!=t.id&&t.hasOwnProperty("id")&&(i.id=e.bytes===String?o.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id),t.addrs&&t.addrs.length){i.addrs=[];for(var r=0;r<t.addrs.length;++r)i.addrs[r]=e.bytes===String?o.base64.encode(t.addrs[r],0,t.addrs[r].length):e.bytes===Array?Array.prototype.slice.call(t.addrs[r]):t.addrs[r]}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t}(),t.exports=a},91491:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:circuit"),{error:r("libp2p:circuit:err")}),s=i(32114),o=i(29175),{Multiaddr:a}=i(46584),h=i(88785),{CircuitRelay:c}=i(79123),{codes:l}=i(23416),u=i(15091),{relay:d}=i(49284),f=i(64538),{handleCanHop:p,handleHop:g,hop:y}=i(71466),{handleStop:m}=i(10655),v=i(72866),b=Symbol.for("@libp2p/js-libp2p-circuit/circuit");class w{constructor({libp2p:t,upgrader:e}){this._dialer=t.dialer,this._registrar=t.registrar,this._connectionManager=t.connectionManager,this._upgrader=e,this._options=t._config.relay,this._libp2p=t,this.peerId=t.peerId,this._registrar.handle(d,this._onProtocol.bind(this))}async _onProtocol({connection:t,stream:e}){const i=new v({stream:e}),r=await i.read();if(!r)return;const s=this;let o;switch(r.type){case c.Type.CAN_HOP:n("received CAN_HOP request from %s",t.remotePeer.toB58String()),await p({circuit:s,connection:t,streamHandler:i});break;case c.Type.HOP:n("received HOP request from %s",t.remotePeer.toB58String()),o=await g({connection:t,request:r,streamHandler:i,circuit:s});break;case c.Type.STOP:n("received STOP request from %s",t.remotePeer.toB58String()),o=await m({connection:t,request:r,streamHandler:i});break;default:n("Request of type %s not supported",r.type)}if(o){const t=new a(r.dstPeer.addrs[0]),e=new a(r.srcPeer.addrs[0]),i=u({stream:o,remoteAddr:t,localAddr:e}),s=r.type===c.Type.HOP?"relay":"inbound";n("new %s connection %s",s,i.remoteAddr);const h=await this._upgrader.upgradeInbound(i);n("%s connection %s upgraded",s,i.remoteAddr),this.handler&&this.handler(h)}}async dial(t,e){const i=t.toString().split("/p2p-circuit"),r=new a(i[0]),o=new a(i[i.length-1]),d=r.getPeerId(),f=o.getPeerId();if(!d||!f){const t="Circuit relay dial failed as addresses did not have peer id";throw n.error(t),s(new Error(t),l.ERR_RELAYED_DIAL)}const p=h.createFromB58String(d),g=h.createFromB58String(f);let m=!1,v=this._connectionManager.get(p);v||(v=await this._dialer.connectToPeer(r,e),m=!0);try{const e=await y({connection:v,request:{type:c.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map((t=>t.bytes))},dstPeer:{id:g.toBytes(),addrs:[new a(o).bytes]}}}),i=r.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),s=u({stream:e,remoteAddr:t,localAddr:i});return n("new outbound connection %s",s.remoteAddr),this._upgrader.upgradeOutbound(s)}catch(t){throw n.error("Circuit relay dial failed",t),m&&await v.close(),t}}createListener(t,e){return"function"==typeof t&&(e=t,t={}),this.handler=e,f(this._libp2p)}filter(t){return(t=Array.isArray(t)?t:[t]).filter((t=>o.Circuit.matches(t)))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(t){return Boolean(t&&t[b])}}t.exports=w},32497:(t,e,i)=>{"use strict";const{CID:r}=i(81362),{sha256:n}=i(56155);t.exports.namespaceToCid=async t=>{const e=(new TextEncoder).encode(t),i=await n.digest(e);return r.createV0(i)}},36195:(t,e,i)=>{"use strict";const r=i(70942),{dnsaddrResolver:n}=i(39004),s=i(3524),{AGENT_VERSION:o}=i(78508),a=i(67573),{publicAddressesFirst:h}=i(53737),{FaultTolerance:c}=i(6984),l={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},connectionGater:{},transportManager:{faultTolerance:c.FATAL_ALL},dialer:{maxParallelDials:s.MAX_PARALLEL_DIALS,maxDialsPerPeer:s.MAX_PER_PEER_DIALS,dialTimeout:s.DIAL_TIMEOUT,resolvers:{dnsaddr:n},addressSorter:h},host:{agentVersion:o},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:a.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:a.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};t.exports.validate=t=>{const e=r(l,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}},29919:(t,e,i)=>{"use strict";const r=i(11227),n=i(70942),s=i(82916),o=i(31303),{pipe:a}=i(60618),h=i(55565),c=i(97515),l=Object.assign(r("libp2p:connection-manager:auto-dialler"),{error:r("libp2p:connection-manager:auto-dialler:err")}),u={enabled:!0,minConnections:0,autoDialInterval:1e4};t.exports=class{constructor(t,e={}){this._options=n.call({ignoreUndefined:!0},u,e),this._libp2p=t,this._running=!1,this._autoDialTimeout=null,this._autoDial=this._autoDial.bind(this),l("options: %j",this._options)}async start(){this._options.enabled?(this._running=!0,this._autoDial().catch((t=>{l.error("could start autodial",t)})),l("started")):l("not enabled")}async stop(){this._options.enabled?(this._running=!1,this._autoDialTimeout&&this._autoDialTimeout.clear(),l("stopped")):l("not enabled")}async _autoDial(){const t=this._options.minConnections;if(this._libp2p.connections.size>=t)return void(this._autoDialTimeout=s(this._autoDial,this._options.autoDialInterval));const e=await a(this._libp2p.peerStore.getPeers(),(t=>h(t,(t=>!t.id.equals(this._libp2p.peerId)))),(t=>c(t,((t,e)=>!e.protocols||!e.protocols.length||t.protocols&&t.protocols.length?e.id.pubKey&&!t.id.pubKey?1:-1:1))),(t=>o(t)));for(let i=0;this._running&&i<e.length&&this._libp2p.connections.size<t;i++){const t=e[i];if(!this._libp2p.connectionManager.get(t.id)){l("connecting to a peerStore stored peer %s",t.id.toB58String());try{await this._libp2p.dialer.connectToPeer(t.id)}catch(t){l.error("could not connect to peerStore stored peer",t)}}}this._running&&(this._autoDialTimeout=s(this._autoDial,this._options.autoDialInterval))}}},7376:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:connection-manager"),{error:r("libp2p:connection-manager:err")}),s=i(32114),o=i(70942),a=i(84593),h=i(82916),{EventEmitter:c}=i(17187),l=i(39350),u=i(88785),{codes:{ERR_INVALID_PARAMETERS:d}}=i(23416),f={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},p="connection-manager";t.exports=class extends c{constructor(t,e={}){if(super(),this._libp2p=t,this._peerId=t.peerId.toB58String(),this._options=o.call({ignoreUndefined:!0},f,e),this._options.maxConnections<this._options.minConnections)throw s(new Error("Connection Manager maxConnections must be greater than minConnections"),d);n("options: %j",this._options),this._peerValues=l({component:p,metric:"peer-values",metrics:this._libp2p.metrics}),this.connections=l({component:p,metric:"peer-connections",metrics:this._libp2p.metrics}),this._started=!1,this._timer=null,this._checkMetrics=this._checkMetrics.bind(this),this._latencyMonitor=new a({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval}),this.setMaxListeners(1/0)}get size(){return Array.from(this.connections.values()).reduce(((t,e)=>t+e.length),0)}start(){this._libp2p.metrics&&(this._timer=this._timer||h(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,n("started")}async stop(){this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),n("stopped")}async _close(){const t=[];for(const e of this.connections.values())for(const i of e)t.push(i.close());await Promise.all(t),this.connections.clear()}setPeerValue(t,e){if(e<0||e>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(t.toB58String(),e)}async _checkMetrics(){if(this._libp2p.metrics)try{const t=this._libp2p.metrics.global.movingAverages,e=t.dataReceived[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxReceivedData",e);const i=t.dataSent[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxSentData",i);const r=e+i;await this._checkMaxLimit("maxData",r),n("metrics update",r)}finally{this._timer=h(this._checkMetrics,this._options.pollInterval)}}async onConnect(t){if(!this._started)return void await t.close();const e=t.remotePeer,i=e.toB58String(),r=this.connections.get(i);this.emit("peer:connect",t),r?r.push(t):this.connections.set(i,[t]),await this._libp2p.peerStore.keyBook.set(e,e.pubKey),this._peerValues.has(i)||this._peerValues.set(i,this._options.defaultPeerValue),await this._checkMaxLimit("maxConnections",this.size)}onDisconnect(t){if(!this._started)return;const e=t.remotePeer.toB58String();let i=this.connections.get(e);i&&i.length>1?(i=i.filter((e=>e.id!==t.id)),this.connections.set(e,i)):i&&(this.connections.delete(e),this._peerValues.delete(t.remotePeer.toB58String()),this.emit("peer:disconnect",t),this._libp2p.metrics&&this._libp2p.metrics.onPeerDisconnected(t.remotePeer))}get(t){const e=this.getAll(t);return e.length?e[0]:null}getAll(t){if(!u.isPeerId(t))throw s(new Error("peerId must be an instance of peer-id"),d);const e=t.toB58String(),i=this.connections.get(e);return i?i.filter((t=>"open"===t.stat.status)):[]}_onLatencyMeasure(t){this._checkMaxLimit("maxEventLoopDelay",t.avgMs).catch((t=>{n.error(t)}))}async _checkMaxLimit(t,e){const i=this._options[t];n("checking limit of %s. current value: %d of %d",t,e,i),e>i&&(n("%s: limit exceeded: %s, %d",this._peerId,t,e),await this._maybeDisconnectOne())}async _maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){const t=Array.from(new Map([...this._peerValues.entries()].sort(((t,e)=>t[1]-e[1]))));n("%s: sorted peer values: %j",this._peerId,t);const e=t[0];if(e){const t=e[0];n("%s: lowest value peer is %s",this._peerId,t),n("%s: closing a connection to %j",this._peerId,t);for(const e of this.connections.values())if(e[0].remotePeer.toB58String()===t){e[0].close().catch((t=>{n.error(t)})),this.onDisconnect(e[0]);break}}}}}},84593:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),n=i(7527),s=i(11227)("latency-monitor:LatencyMonitor");t.exports=class extends r{constructor({latencyCheckIntervalMs:t,dataEmitIntervalMs:e,asyncTestFn:i,latencyRandomPercentage:r}={}){super();const n=this;n.latencyCheckIntervalMs=t||500,n.latencyRandomPercentage=r||10,n._latecyCheckMultiply=n.latencyRandomPercentage/100*2*n.latencyCheckIntervalMs,n._latecyCheckSubtract=n._latecyCheckMultiply/2,n.dataEmitIntervalMs=null===e||0===e?void 0:e||5e3,s("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",n.latencyCheckIntervalMs,n.dataEmitIntervalMs),n.dataEmitIntervalMs?s("Expecting ~%s events per summary",n.latencyCheckIntervalMs/n.dataEmitIntervalMs):s("Not emitting summaries"),n.asyncTestFn=i}start(){globalThis.process&&globalThis.process.hrtime?(s("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=t=>{const e=this.now(t);return 1e3*e[0]+e[1]/1e6}):"undefined"!=typeof window&&window.performance&&window.performance.now?(s("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=t=>Math.round(this.now()-t)):(s("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=t=>this.now()-t),this._latencyData=this._initLatencyData(),"undefined"!=typeof window&&(this._visibilityChangeEmitter=new n,this._visibilityChangeEmitter.on("visibilityChange",(t=>{t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),this._visibilityChangeEmitter&&!this._visibilityChangeEmitter.isVisible()||this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"==typeof this._emitIntervalID.unref&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){const t=this.getSummary();t.events>0&&this.emit("data",t)}getSummary(){const t={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),s("Summary: %O",t),t}_checkLatency(){const t=this,e=Math.random()*t._latecyCheckMultiply-t._latecyCheckSubtract,i={deltaOffset:Math.ceil(t.latencyCheckIntervalMs+e),startTime:t.now()},r=()=>{if(!this._checkLatencyID)return;const e=t.getDeltaMS(i.startTime)-i.deltaOffset;t._checkLatency(),t._latencyData.events++,t._latencyData.minMs=Math.min(t._latencyData.minMs,e),t._latencyData.maxMs=Math.max(t._latencyData.maxMs,e),t._latencyData.totalMs+=e,s("MS: %s Data: %O",e,t._latencyData)};s("localData: %O",i),this._checkLatencyID=setTimeout((()=>{t.asyncTestFn?(i.deltaOffset=0,i.startTime=t.now(),t.asyncTestFn(r)):(i.deltaOffset-=1,r())}),i.deltaOffset),"function"==typeof this._checkLatencyID.unref&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}},7527:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),n=i(11227)("latency-monitor:VisibilityChangeEmitter");t.exports=class extends r{constructor(){super(),"undefined"!=typeof document?(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()):n('This is not a browser, no "document" found. Stopping.')}_initializeVisibilityVarNames(){let t,e;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),this._hidden=t,this._visibilityChange=e}_addVisibilityChangeListener(){void 0===document.addEventListener||void 0===document[this._hidden]?n("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this._hidden&&void 0!==document[this._hidden])return!document[this._hidden]}_handleVisibilityChange(){const t=!document[this._hidden];n(t?"Page Visible":"Page Hidden"),this.emit("visibilityChange",t)}}},3524:t=>{"use strict";t.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50}}},57197:(t,e,i)=>{"use strict";const r=i(32114),{messages:n,codes:s}=i(23416),{storeAddresses:o,uniquePeers:a,requirePeers:h,maybeLimitSource:c}=i(63952),l=i(64593),u=i(74014),{pipe:d}=i(60618),{DHTContentRouting:f}=i(64515);t.exports=class{constructor(t){this.libp2p=t,this.routers=t._modules.contentRouting||[],this.dht=t._dht,this.dht&&t._config.dht.enabled&&this.routers.push(new f(this.dht))}async*findProviders(t,e={}){if(!this.routers.length)throw r(new Error("No content this.routers available"),s.ERR_NO_ROUTERS_AVAILABLE);yield*d(u(...this.routers.map((i=>i.findProviders(t,e)))),(t=>o(t,this.libp2p.peerStore)),(t=>a(t)),(t=>c(t,e.maxNumProviders)),(t=>h(t)))}async provide(t){if(!this.routers.length)throw r(new Error("No content routers available"),s.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((e=>e.provide(t))))}async put(t,e,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw r(new Error(n.NOT_STARTED_YET),s.DHT_NOT_STARTED);await l(this.dht.put(t,e,i))}async get(t,e){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw r(new Error(n.NOT_STARTED_YET),s.DHT_NOT_STARTED);for await(const i of this.dht.get(t,e))if("VALUE"===i.name)return{from:i.peerId,val:i.value};throw r(new Error(n.NOT_FOUND),s.ERR_NOT_FOUND)}async*getMany(t,e,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw r(new Error(n.NOT_STARTED_YET),s.DHT_NOT_STARTED);if(!e)return;let o=0;for await(const r of this.dht.get(t,i))if("VALUE"===r.name&&(yield{from:r.peerId,val:r.value},o++,o===e))break;if(0===o)throw r(new Error(n.NOT_FOUND),s.ERR_NOT_FOUND)}}},63952:(t,e,i)=>{"use strict";const r=i(32114),n=i(55565),s=i(32121),o=i(37939);t.exports={storeAddresses:async function*(t,e){yield*s(t,(async t=>(await e.addressBook.add(t.id,t.multiaddrs),t)))},uniquePeers:function(t){const e=new Set;return n(t,(t=>!e.has(t.id.toString())&&(e.add(t.id.toString()),!0)))},requirePeers:async function*(t,e=1){let i=0;for await(const e of t)i++,yield e;if(i<e)throw r(new Error("not found"),"NOT_FOUND")},maybeLimitSource:function(t,e){return e?o(t,e):t}}},64515:(t,e,i)=>{"use strict";const r=i(64593);t.exports={DHTContentRouting:class{constructor(t){this._dht=t}async provide(t){await r(this._dht.provide(t))}async*findProviders(t,e){for await(const i of this._dht.findProviders(t,e))"PROVIDER"===i.name&&(yield*i.providers)}}}},70937:(t,e,i)=>{"use strict";const r=i(32114),{messages:n,codes:s}=i(23416);t.exports={DHTPeerRouting:class{constructor(t){this._dht=t}async findPeer(t,e={}){for await(const i of this._dht.findPeer(t,e))if("FINAL_PEER"===i.name)return i.peer;throw r(new Error(n.NOT_FOUND),s.ERR_NOT_FOUND)}async*getClosestPeers(t,e={}){for await(const i of this._dht.getClosestPeers(t,e))"PEER_RESPONSE"===i.name&&(yield*i.closer)}}}},65639:(t,e,i)=>{"use strict";const r=i(32114),{anySignal:n}=i(32044),s=i(35103),o=i(61750),{setMaxListeners:a}=i(17187),{codes:h}=i(23416);t.exports=class{constructor({addrs:t,dialAction:e,dialer:i}){this.addrs=t,this.dialer=i,this.dialAction=e}async run(t={}){const e=this.dialer.getTokens(this.addrs.length);if(e.length<1)throw r(new Error("No dial tokens available"),h.ERR_NO_DIAL_TOKENS);const i=new s;e.forEach((t=>i.push(t)));const c=this.addrs.map((()=>{const t=new AbortController;try{a&&a(1/0,t.signal)}catch{}return t}));let l=0;try{return await o(this.addrs.map((async(r,s)=>{const o=await i.shift();let a;try{const h=c[s].signal;a=await this.dialAction(r,{...t,signal:t.signal?n([h,t.signal]):h}),c.splice(s,1)}finally{l++,this.addrs.length-l>=e.length?i.push(o):this.dialer.releaseToken(e.splice(e.indexOf(o),1)[0])}return a})))}finally{c.map((t=>t.abort())),e.forEach((t=>this.dialer.releaseToken(t)))}}}},63849:(t,e,i)=>{"use strict";const r=i(11227),n=i(31303),s=i(55565),{pipe:o}=i(60618),a=Object.assign(r("libp2p:dialer"),{error:r("libp2p:dialer:err")}),h=i(32114),{Multiaddr:c}=i(46584),{TimeoutController:l}=i(10715),{AbortError:u}=i(61623),{anySignal:d}=i(32044),{setMaxListeners:f}=i(17187),p=i(65639),{publicAddressesFirst:g}=i(53737),y=i(43079),m=i(39350),{codes:v}=i(23416),{DIAL_TIMEOUT:b,MAX_PARALLEL_DIALS:w,MAX_PER_PEER_DIALS:_,MAX_ADDRS_TO_DIAL:x}=i(3524),E="dialler";t.exports=class{constructor({transportManager:t,peerStore:e,connectionGater:i,addressSorter:r=g,maxParallelDials:n=w,maxAddrsToDial:s=x,dialTimeout:o=b,maxDialsPerPeer:a=_,resolvers:h={},metrics:l}){this.connectionGater=i,this.transportManager=t,this.peerStore=e,this.addressSorter=r,this.maxParallelDials=n,this.maxAddrsToDial=s,this.timeout=o,this.maxDialsPerPeer=a,this.tokens=[...new Array(n)].map(((t,e)=>e)),this._pendingDials=m({component:E,metric:"pending-dials",metrics:l}),this._pendingDialTargets=m({component:E,metric:"pending-dial-targets",metrics:l});for(const[t,e]of Object.entries(h))c.resolvers.set(t,e)}destroy(){for(const t of this._pendingDials.values())try{t.controller.abort()}catch(t){a.error(t)}this._pendingDials.clear();for(const t of this._pendingDialTargets.values())t.reject(new u("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(t,e={}){const{id:i}=y(t);if(await this.connectionGater.denyDialPeer(i))throw h(new Error("The dial request is blocked by gater.allowDialPeer"),v.ERR_PEER_DIAL_INTERCEPTED);const r=await this._createCancellableDialTarget(t);if(!r.addrs.length)throw h(new Error("The dial request has no valid addresses"),v.ERR_NO_VALID_ADDRESSES);const n=this._pendingDials.get(r.id)||this._createPendingDial(r,e);try{const t=await n.promise;return a("dial succeeded to %s",r.id),t}catch(t){throw n.controller.signal.aborted&&(t.code=v.ERR_TIMEOUT),a.error(t),t}finally{n.destroy()}}async _createCancellableDialTarget(t){const e=`${parseInt(String(1e9*Math.random()),10).toString()+Date.now()}`,i=new Promise(((t,i)=>{this._pendingDialTargets.set(e,{resolve:t,reject:i})}));try{return await Promise.race([this._createDialTarget(t),i])}finally{this._pendingDialTargets.delete(e)}}async _createDialTarget(t){const{id:e,multiaddrs:i}=y(t);i&&await this.peerStore.addressBook.add(e,i);let r=await o(await this.peerStore.addressBook.getMultiaddrsForPeer(e,this.addressSorter),(t=>s(t,(async t=>!await this.connectionGater.denyDialMultiaddr(e,t)))),(t=>n(t)));c.isMultiaddr(t)&&(r=r.filter((e=>!t.equals(e))),r.unshift(t));const a=[];for(const t of r)(await this._resolve(t)).forEach((t=>a.push(t)));const l=a.filter((t=>this.transportManager.transportForMultiaddr(t)));if(l.length>this.maxAddrsToDial)throw await this.peerStore.delete(e),h(new Error("dial with more addresses than allowed"),v.ERR_TOO_MANY_ADDRESSES);return{id:e.toB58String(),addrs:l}}_createPendingDial(t,e={}){const i=new p({addrs:t.addrs,dialAction:(t,e)=>{if(e.signal.aborted)throw h(new Error("already aborted"),v.ERR_ALREADY_ABORTED);return this.transportManager.dial(t,e)},dialer:this}),r=new l(this.timeout),n=[r.signal];e.signal&&n.push(e.signal);const s=d(n);try{f&&f(1/0,s)}catch{}const o={dialRequest:i,controller:r,promise:i.run({...e,signal:s}),destroy:()=>{r.clear(),this._pendingDials.delete(t.id)}};return this._pendingDials.set(t.id,o),o}getTokens(t){const e=Math.min(t,this.maxDialsPerPeer,this.tokens.length),i=this.tokens.splice(0,e);return a("%d tokens request, returning %d, %d remaining",t,e,this.tokens.length),i}releaseToken(t){this.tokens.indexOf(t)>-1||(a("token %d released",t),this.tokens.push(t))}async _resolve(t){if(!t.protoNames().includes("dnsaddr"))return[t];const e=await this._resolveRecord(t);return(await Promise.all(e.map((t=>this._resolve(t))))).flat().reduce(((t,e)=>(t.find((t=>t.equals(e)))||t.push(e),t)),[])}async _resolveRecord(t){try{return t=new c(t.toString()),await t.resolve()}catch(e){return a.error(`multiaddr ${t} could not be resolved`),[]}}}},23416:(t,e)=>{"use strict";e.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"},e.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_PEER_DIAL_INTERCEPTED:"ERR_PEER_DIAL_INTERCEPTED",ERR_CONNECTION_INTERCEPTED:"ERR_CONNECTION_INTERCEPTED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}},73094:t=>{"use strict";t.exports={PROTOCOL:"/libp2p/fetch/0.0.1"}},26266:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:fetch"),{error:r("libp2p:fetch:err")}),s=i(32114),{codes:o}=i(23416),a=i(48963),{FetchRequest:h,FetchResponse:c}=i(17901),l=i(52261),{PROTOCOL:u}=i(73094);class d{constructor(t){this._lookupFunctions=new Map,this._libp2p=t,this.handleMessage=this.handleMessage.bind(this)}async fetch(t,e){n("dialing %s to %s",this._protocol,t.toB58String?t.toB58String():t);const i=await this._libp2p.dial(t),{stream:r}=await i.newStream(d.PROTOCOL),u=l(r),f=new h({identifier:e});u.write(a.encode.single(h.encode(f).finish()));const p=c.decode((await a.decode.fromReader(u.reader).next()).value.slice());switch(p.status){case c.StatusCode.OK:return p.data;case c.StatusCode.NOT_FOUND:return null;case c.StatusCode.ERROR:{const t=(new TextDecoder).decode(p.data);throw s(new Error("Error in fetch protocol response: "+t),o.ERR_INVALID_PARAMETERS)}default:throw s(new Error("Unknown response status"),o.ERR_INVALID_MESSAGE)}}async handleMessage(t){const{stream:e}=t,i=l(e),r=h.decode((await a.decode.fromReader(i.reader).next()).value.slice());let n;const s=this._getLookupFunction(r.identifier);if(s){const t=await s(r.identifier);n=new c(t?{status:c.StatusCode.OK,data:t}:{status:c.StatusCode.NOT_FOUND})}else{const t=(new TextEncoder).encode("No lookup function registered for key: "+r.identifier);n=new c({status:c.StatusCode.ERROR,data:t})}i.write(a.encode.single(c.encode(n).finish()))}_getLookupFunction(t){for(const e of this._lookupFunctions.keys())if(t.startsWith(e))return this._lookupFunctions.get(e);return null}registerLookupFunction(t,e){if(this._lookupFunctions.has(t))throw s(new Error("Fetch protocol handler for key prefix '"+t+"' already registered"),o.ERR_KEY_ALREADY_EXISTS);this._lookupFunctions.set(t,e)}unregisterLookupFunction(t,e){null!=e&&this._lookupFunctions.get(t)!==e||this._lookupFunctions.delete(t)}}d.PROTOCOL=u,t.exports=d},17901:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-fetch"]||(r.roots["libp2p-fetch"]={});a.FetchRequest=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.identifier="",t.encode=function(t,e){return e||(e=s.create()),null!=t.identifier&&Object.hasOwnProperty.call(t,"identifier")&&e.uint32(10).string(t.identifier),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.FetchRequest;t.pos<i;){var s=t.uint32();s>>>3==1?r.identifier=t.string():t.skipType(7&s)}return r},t.fromObject=function(t){if(t instanceof a.FetchRequest)return t;var e=new a.FetchRequest;return null!=t.identifier&&(e.identifier=String(t.identifier)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.identifier=""),null!=t.identifier&&t.hasOwnProperty("identifier")&&(i.identifier=t.identifier),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),a.FetchResponse=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e,i;return t.prototype.status=0,t.prototype.data=o.newBuffer([]),t.encode=function(t,e){return e||(e=s.create()),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(8).int32(t.status),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.FetchResponse;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.status=t.int32();break;case 2:r.data=t.bytes();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.FetchResponse)return t;var e=new a.FetchResponse;switch(t.status){case"OK":case 0:e.status=0;break;case"NOT_FOUND":case 1:e.status=1;break;case"ERROR":case 2:e.status=2}return null!=t.data&&("string"==typeof t.data?o.base64.decode(t.data,e.data=o.newBuffer(o.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.status=e.enums===String?"OK":0,e.bytes===String?i.data="":(i.data=[],e.bytes!==Array&&(i.data=o.newBuffer(i.data)))),null!=t.status&&t.hasOwnProperty("status")&&(i.status=e.enums===String?a.FetchResponse.StatusCode[t.status]:t.status),null!=t.data&&t.hasOwnProperty("data")&&(i.data=e.bytes===String?o.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.StatusCode=(e={},(i=Object.create(e))[e[0]="OK"]=0,i[e[1]="NOT_FOUND"]=1,i[e[2]="ERROR"]=2,i),t}(),t.exports=a},43079:(t,e,i)=>{"use strict";const r=i(88785),{Multiaddr:n}=i(46584),s=i(32114),{codes:o}=i(23416);t.exports=function(t){let e;if("string"==typeof t&&(t=new n(t)),n.isMultiaddr(t)){e=t;const i=t.getPeerId();if(!i)throw s(new Error(`${t} does not have a valid peer type`),o.ERR_INVALID_MULTIADDR);try{t=r.createFromB58String(i)}catch(e){throw s(new Error(`${t} is not a valid peer type`),o.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}},78508:(t,e,i)=>{"use strict";const r=i(28362).version;t.exports.PROTOCOL_VERSION="ipfs/0.1.0",t.exports.AGENT_VERSION=`js-libp2p/${r}`,t.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0",t.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0",t.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0",t.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id",t.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push",t.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0",t.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"},26078:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:identify"),{error:r("libp2p:identify:err")}),s=i(32114),o=i(48963),{pipe:a}=i(60618),{collect:h,take:c,consume:l}=i(38386),{fromString:u}=i(52217),d=i(88785),{Multiaddr:f}=i(46584),{toBuffer:p}=i(96653),g=i(29966),y=i(31244),m=i(61131),{MULTICODEC_IDENTIFY:v,MULTICODEC_IDENTIFY_PUSH:b,IDENTIFY_PROTOCOL_VERSION:w,MULTICODEC_IDENTIFY_PROTOCOL_NAME:_,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:x,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:E,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:S}=i(78508),{codes:T}=i(23416);class A{static getProtocolStr(t){return{identifyProtocolStr:`/${t._config.protocolPrefix}/${_}/${E}`,identifyPushProtocolStr:`/${t._config.protocolPrefix}/${x}/${S}`}}constructor({libp2p:t}){this._libp2p=t,this.peerStore=t.peerStore,this.addressManager=t.addressManager,this.connectionManager=t.connectionManager,this.peerId=t.peerId,this.handleMessage=this.handleMessage.bind(this);const e=A.getProtocolStr(t);this.identifyProtocolStr=e.identifyProtocolStr,this.identifyPushProtocolStr=e.identifyPushProtocolStr,this._host={protocolVersion:`${t._config.protocolPrefix}/${w}`,...t._options.host},this.connectionManager.on("peer:connect",(t=>{this.identify(t).catch(n.error)})),this.peerStore.on("change:multiaddrs",(({peerId:t})=>{t.toString()===this.peerId.toString()&&this.pushToPeerStore().catch((t=>n.error(t)))})),this.peerStore.on("change:protocols",(({peerId:t})=>{t.toString()===this.peerId.toString()&&this.pushToPeerStore().catch((t=>n.error(t)))}))}async start(){await this.peerStore.metadataBook.setValue(this.peerId,"AgentVersion",u(this._host.agentVersion)),await this.peerStore.metadataBook.setValue(this.peerId,"ProtocolVersion",u(this._host.protocolVersion))}async stop(){}async push(t){const e=await this.peerStore.addressBook.getRawEnvelope(this.peerId),i=this._libp2p.multiaddrs.map((t=>t.bytes)),r=await this.peerStore.protoBook.get(this.peerId),s=t.map((async t=>{try{const{stream:n}=await t.newStream(this.identifyPushProtocolStr);await a([g.Identify.encode({listenAddrs:i,signedPeerRecord:e,protocols:r}).finish()],o.encode(),n,l)}catch(t){n.error("could not push identify update to peer",t)}}));return Promise.all(s)}async pushToPeerStore(){if(!this._libp2p.isStarted())return;const t=[];let e;for await(const i of this.peerStore.getPeers())i.protocols.includes(this.identifyPushProtocolStr)&&(e=this.connectionManager.get(i.id))&&t.push(e);await this.push(t)}async identify(t){const{stream:e}=await t.newStream(this.identifyProtocolStr),[i]=await a([],e,o.decode(),c(1),p,h);if(!i)throw s(new Error("No data could be retrieved"),T.ERR_CONNECTION_ENDED);let r;try{r=g.Identify.decode(i)}catch(t){throw s(t,T.ERR_INVALID_MESSAGE)}const{publicKey:l,listenAddrs:v,protocols:b,observedAddr:w,signedPeerRecord:_}=r,x=await d.createFromPubKey(l);if(t.remotePeer.toB58String()!==x.toB58String())throw s(new Error("identified peer does not match the expected peer"),T.ERR_INVALID_PEER);const E=A.getCleanMultiaddr(w);try{const t=await y.openAndCertify(_,m.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(t))return await this.peerStore.protoBook.set(x,b),await this.peerStore.metadataBook.setValue(x,"AgentVersion",u(r.agentVersion)),void await this.peerStore.metadataBook.setValue(x,"ProtocolVersion",u(r.protocolVersion))}catch(t){n("received invalid envelope, discard it and fallback to listenAddrs is available",t)}try{await this.peerStore.addressBook.set(x,v.map((t=>new f(t))))}catch(t){n.error("received invalid addrs",t)}await this.peerStore.protoBook.set(x,b),await this.peerStore.metadataBook.setValue(x,"AgentVersion",u(r.agentVersion)),await this.peerStore.metadataBook.setValue(x,"ProtocolVersion",u(r.protocolVersion)),n("received observed address of %s",E)}handleMessage({connection:t,stream:e,protocol:i}){switch(i){case this.identifyProtocolStr:return this._handleIdentify({connection:t,stream:e});case this.identifyPushProtocolStr:return this._handlePush({connection:t,stream:e});default:n.error("cannot handle unknown protocol %s",i)}}async _handleIdentify({connection:t,stream:e}){try{let i=new Uint8Array(0);this.peerId.pubKey&&(i=this.peerId.pubKey.bytes);const r=await this.peerStore.addressBook.getRawEnvelope(this.peerId),n=await this.peerStore.protoBook.get(this.peerId),s=g.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:i,listenAddrs:this._libp2p.multiaddrs.map((t=>t.bytes)),signedPeerRecord:r,observedAddr:t.remoteAddr.bytes,protocols:n}).finish();await a([s],o.encode(),e,l)}catch(t){n.error("could not respond to identify request",t)}}async _handlePush({connection:t,stream:e}){let i;try{const[t]=await a([],e,o.decode(),c(1),p,h);i=g.Identify.decode(t)}catch(t){return n.error("received invalid message",t)}const r=t.remotePeer;try{const t=await y.openAndCertify(i.signedPeerRecord,m.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(t))return void await this.peerStore.protoBook.set(r,i.protocols)}catch(t){n("received invalid envelope, discard it and fallback to listenAddrs is available",t)}try{await this.peerStore.addressBook.set(r,i.listenAddrs.map((t=>new f(t))))}catch(t){n.error("received invalid addrs",t)}try{await this.peerStore.protoBook.set(r,i.protocols)}catch(t){n.error("received invalid protocols",t)}}static getCleanMultiaddr(t){if(t&&t.length>0)try{return new f(t)}catch(t){return null}return null}}const C={IDENTIFY:v,IDENTIFY_PUSH:b};A.multicodecs=C,A.Messsage=g,t.exports=A},29966:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-identify"]||(r.roots["libp2p-identify"]={});a.Identify=function(){function t(t){if(this.listenAddrs=[],this.protocols=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=o.newBuffer([]),t.prototype.listenAddrs=o.emptyArray,t.prototype.observedAddr=o.newBuffer([]),t.prototype.protocols=o.emptyArray,t.prototype.signedPeerRecord=o.newBuffer([]),t.encode=function(t,e){if(e||(e=s.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.listenAddrs&&t.listenAddrs.length)for(var i=0;i<t.listenAddrs.length;++i)e.uint32(18).bytes(t.listenAddrs[i]);if(null!=t.protocols&&t.protocols.length)for(i=0;i<t.protocols.length;++i)e.uint32(26).string(t.protocols[i]);return null!=t.observedAddr&&Object.hasOwnProperty.call(t,"observedAddr")&&e.uint32(34).bytes(t.observedAddr),null!=t.protocolVersion&&Object.hasOwnProperty.call(t,"protocolVersion")&&e.uint32(42).string(t.protocolVersion),null!=t.agentVersion&&Object.hasOwnProperty.call(t,"agentVersion")&&e.uint32(50).string(t.agentVersion),null!=t.signedPeerRecord&&Object.hasOwnProperty.call(t,"signedPeerRecord")&&e.uint32(66).bytes(t.signedPeerRecord),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Identify;t.pos<i;){var s=t.uint32();switch(s>>>3){case 5:r.protocolVersion=t.string();break;case 6:r.agentVersion=t.string();break;case 1:r.publicKey=t.bytes();break;case 2:r.listenAddrs&&r.listenAddrs.length||(r.listenAddrs=[]),r.listenAddrs.push(t.bytes());break;case 4:r.observedAddr=t.bytes();break;case 3:r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(t.string());break;case 8:r.signedPeerRecord=t.bytes();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Identify)return t;var e=new a.Identify;if(null!=t.protocolVersion&&(e.protocolVersion=String(t.protocolVersion)),null!=t.agentVersion&&(e.agentVersion=String(t.agentVersion)),null!=t.publicKey&&("string"==typeof t.publicKey?o.base64.decode(t.publicKey,e.publicKey=o.newBuffer(o.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),t.listenAddrs){if(!Array.isArray(t.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");e.listenAddrs=[];for(var i=0;i<t.listenAddrs.length;++i)"string"==typeof t.listenAddrs[i]?o.base64.decode(t.listenAddrs[i],e.listenAddrs[i]=o.newBuffer(o.base64.length(t.listenAddrs[i])),0):t.listenAddrs[i].length&&(e.listenAddrs[i]=t.listenAddrs[i])}if(null!=t.observedAddr&&("string"==typeof t.observedAddr?o.base64.decode(t.observedAddr,e.observedAddr=o.newBuffer(o.base64.length(t.observedAddr)),0):t.observedAddr.length&&(e.observedAddr=t.observedAddr)),t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Identify.protocols: array expected");for(e.protocols=[],i=0;i<t.protocols.length;++i)e.protocols[i]=String(t.protocols[i])}return null!=t.signedPeerRecord&&("string"==typeof t.signedPeerRecord?o.base64.decode(t.signedPeerRecord,e.signedPeerRecord=o.newBuffer(o.base64.length(t.signedPeerRecord)),0):t.signedPeerRecord.length&&(e.signedPeerRecord=t.signedPeerRecord)),e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.listenAddrs=[],i.protocols=[]),e.defaults&&(e.bytes===String?i.publicKey="":(i.publicKey=[],e.bytes!==Array&&(i.publicKey=o.newBuffer(i.publicKey))),e.bytes===String?i.observedAddr="":(i.observedAddr=[],e.bytes!==Array&&(i.observedAddr=o.newBuffer(i.observedAddr))),i.protocolVersion="",i.agentVersion="",e.bytes===String?i.signedPeerRecord="":(i.signedPeerRecord=[],e.bytes!==Array&&(i.signedPeerRecord=o.newBuffer(i.signedPeerRecord)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(i.publicKey=e.bytes===String?o.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.listenAddrs&&t.listenAddrs.length){i.listenAddrs=[];for(var r=0;r<t.listenAddrs.length;++r)i.listenAddrs[r]=e.bytes===String?o.base64.encode(t.listenAddrs[r],0,t.listenAddrs[r].length):e.bytes===Array?Array.prototype.slice.call(t.listenAddrs[r]):t.listenAddrs[r]}if(t.protocols&&t.protocols.length)for(i.protocols=[],r=0;r<t.protocols.length;++r)i.protocols[r]=t.protocols[r];return null!=t.observedAddr&&t.hasOwnProperty("observedAddr")&&(i.observedAddr=e.bytes===String?o.base64.encode(t.observedAddr,0,t.observedAddr.length):e.bytes===Array?Array.prototype.slice.call(t.observedAddr):t.observedAddr),null!=t.protocolVersion&&t.hasOwnProperty("protocolVersion")&&(i.protocolVersion=t.protocolVersion),null!=t.agentVersion&&t.hasOwnProperty("agentVersion")&&(i.agentVersion=t.agentVersion),null!=t.signedPeerRecord&&t.hasOwnProperty("signedPeerRecord")&&(i.signedPeerRecord=e.bytes===String?o.base64.encode(t.signedPeerRecord,0,t.signedPeerRecord.length):e.bytes===Array?Array.prototype.slice.call(t.signedPeerRecord):t.signedPeerRecord),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=a},51613:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p"),{error:r("libp2p:err")}),{EventEmitter:s}=i(17187),o=i(32114),a=i(88785),{Multiaddr:h}=i(46584),{MemoryDatastore:c}=i(43462),l=i(51203),u=i(57197),d=i(43079),{validate:f}=i(36195),{codes:p,messages:g}=i(23416),y=i(14942),m=i(7376),v=i(29919),b=i(91491),w=i(2715),_=i(63849),x=i(40298),E=i(31175),S=i(6984),T=i(21003),A=i(4323),C=i(65993),k=i(28861),R=i(26078),P=i(26266),I=i(75466),O=i(64205),{updateSelfPeerRecord:M}=i(1001);class D extends s{static async create(t){if(t.peerId)return new D(t);const e=await a.create();return t.peerId=e,new D(t)}constructor(t){if(super(),this._options=f(t),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this._options.metrics.enabled){const t=new E({...this._options.metrics});this.metrics=t}if(this.connectionGater={denyDialPeer:async()=>Promise.resolve(!1),denyDialMultiaddr:async()=>Promise.resolve(!1),denyInboundConnection:async()=>Promise.resolve(!1),denyOutboundConnection:async()=>Promise.resolve(!1),denyInboundEncryptedConnection:async()=>Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>Promise.resolve(!1),denyInboundUpgradedConnection:async()=>Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>Promise.resolve(!1),filterMultiaddrForPeer:async()=>Promise.resolve(!0),...this._options.connectionGater},this.peerStore=new A({peerId:this.peerId,datastore:this.datastore&&this._options.peerStore.persistence?this.datastore:new c,addressFilter:this.connectionGater.filterMultiaddrForPeer}),this.addresses=this._options.addresses,this.addressManager=new y(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",(()=>{M(this).catch((t=>{n.error("Error updating self peer record",t)}))})),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new m(this,{...this._options.connectionManager}),this._autodialler=new v(this,{enabled:this._config.peerDiscovery.autoDial,minConnections:this._options.connectionManager.minConnections,autoDialInterval:this._options.connectionManager.autoDialInterval}),this._options.keychain&&this._options.keychain.datastore){n("creating keychain");const t=x.generateOptions();this.keychain=new x(this._options.keychain.datastore,{...t,...this._options.keychain}),n("keychain constructed")}if(this.upgrader=new T({connectionGater:this.connectionGater,localPeer:this.peerId,metrics:this.metrics,onConnection:t=>this.connectionManager.onConnect(t),onConnectionEnd:t=>this.connectionManager.onDisconnect(t)}),this.transportManager=new S({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new O({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new k({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw o(new Error(g.CONN_ENCRYPTION_REQUIRED),p.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach((t=>{this.upgrader.cryptos.set(t.protocol,t)})),this.dialer=new _({transportManager:this.transportManager,connectionGater:this.connectionGater,peerStore:this.peerStore,metrics:this.metrics,...this._options.dialer}),this._modules.transport.forEach((t=>{const e=t.prototype[Symbol.toStringTag],i=this._config.transport[e];this.transportManager.add(e,t,i)})),this._config.relay.enabled&&(this.transportManager.add(b.prototype[Symbol.toStringTag],b),this.relay=new w(this)),this._modules.streamMuxer&&(this._modules.streamMuxer.forEach((t=>{this.upgrader.muxers.set(t.multicodec,t)})),this.identifyService=new R({libp2p:this})),this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(void 0!==globalThis.process&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){const t=this._modules.dht;this._dht=t.create({libp2p:this,...this._config.dht})}if(this._modules.pubsub){const t=this._modules.pubsub;this.pubsub=C(t,this,this._config.pubsub)}this.peerRouting=new l(this),this.contentRouting=new u(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this),this.fetchService=new P(this),this.pingService=new I(this)}emit(t,...e){return"error"!==t||this._events.error?super.emit(t,...e):(n.error(e),!1)}async start(){n("libp2p is starting"),this.identifyService&&await this.handle(Object.values(R.getProtocolStr(this)),this.identifyService.handleMessage),this.fetchService&&await this.handle(P.PROTOCOL,this.fetchService.handleMessage),this.pingService&&await this.handle(I.getProtocolStr(this),this.pingService.handleMessage);try{await this._onStarting(),await this._onDidStart(),n("libp2p has started")}catch(t){throw this.emit("error",t),n.error("An error occurred starting libp2p",t),await this.stop(),t}}async stop(){n("libp2p is stopping");try{this._isStarted=!1,this.identifyService&&await this.identifyService.stop(),this.relay&&this.relay.stop(),this.peerRouting.stop(),await this._autodialler.stop(),await(this._dht&&this._dht.stop());for(const t of this._discovery.values())t.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),(t=>t.stop()))),this._discovery=new Map,await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),await this.unhandle(P.PROTOCOL),await this.unhandle(I.getProtocolStr(this)),this.dialer.destroy()}catch(t){t&&(n.error(t),this.emit("error",t))}n("libp2p has stopped")}async loadKeychain(){if(this.keychain)try{await this.keychain.findKeyByName("self")}catch(t){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(t,e){return this._dial(t,e)}async dialProtocol(t,e,i){if(!e||!e.length)throw o(new Error("no protocols were provided to open a stream"),p.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(t,i)).newStream(e)}async _dial(t,e){const{id:i,multiaddrs:r}=d(t);if(i.equals(this.peerId))throw o(new Error("Cannot dial self"),p.ERR_DIALED_SELF);let n=this.connectionManager.get(i);return n?r&&await this.peerStore.addressBook.add(i,r):n=await this.dialer.connectToPeer(t,e),n}get multiaddrs(){let t=this.addressManager.getAnnounceAddrs().map((t=>t.toString()));t.length||(t=this.transportManager.getAddrs().map((t=>t.toString()))),t=t.concat(this.addressManager.getObservedAddrs().map((t=>t.toString())));const e=this._options.addresses.announceFilter,i=new Set(t);return e(Array.from(i).map((t=>new h(t))))}async hangUp(t){const{id:e}=d(t),i=this.connectionManager.connections.get(e.toB58String());i&&await Promise.all(i.map((t=>t.close())))}fetch(t,e){return this.fetchService.fetch(t,e)}ping(t){const{id:e,multiaddrs:i}=d(t);return i?this.pingService.ping(i[0]):this.pingService.ping(e)}async handle(t,e){(t=Array.isArray(t)?t:[t]).forEach((t=>{this.upgrader.protocols.set(t,e)})),await this.peerStore.protoBook.add(this.peerId,t)}async unhandle(t){(t=Array.isArray(t)?t:[t]).forEach((t=>{this.upgrader.protocols.delete(t)})),await this.peerStore.protoBook.remove(this.peerId,t)}async _onStarting(){const t=this.addressManager.getListenAddrs();await this.transportManager.listen(t),this.natManager.start(),this._config.pubsub.enabled&&this.pubsub&&await this.pubsub.start(),this._config.dht.enabled&&(this._dht&&await this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start(),this.identifyService&&await this.identifyService.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",(t=>{this.emit("peer:discovery",t),this._maybeConnect(t).catch((t=>{n.error(t)}))}));for await(const t of this.peerStore.getPeers())this.emit("peer:discovery",t.id);this.connectionManager.start(),await this._autodialler.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(t){t.id.toB58String()!==this.peerId.toB58String()?(t.multiaddrs&&this.peerStore.addressBook.add(t.id,t.multiaddrs).catch((t=>n.error(t))),t.protocols&&this.peerStore.protoBook.set(t.id,t.protocols).catch((t=>n.error(t)))):n.error(new Error(p.ERR_DISCOVERED_SELF))}async _maybeConnect(t){if(!0===this._config.peerDiscovery.autoDial&&!this.connectionManager.get(t)&&(this._options.connectionManager.minConnections||0)>this.connectionManager.size){n("connecting to discovered peer %s",t.toB58String());try{await this.dialer.connectToPeer(t)}catch(e){n.error(`could not connect to discovered peer ${t.toB58String()} with ${e}`)}}}async _setupPeerDiscovery(){const t=t=>{let e={enabled:!0};if(t.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[t.tag]&&(e={...e,...this._config.peerDiscovery[t.tag]}),e.enabled&&!this._discovery.has(t.tag)){let i;i="function"==typeof t?new t(Object.assign({},e,{peerId:this.peerId,libp2p:this})):t,i.on("peer",this._onDiscoveryPeer),this._discovery.set(t.tag,i)}};for(const e of this._modules.peerDiscovery||[])t(e);for(const e of this.transportManager.getTransports())e.discovery&&t(e.discovery);await Promise.all(Array.from(this._discovery.values(),(t=>t.start())))}}t.exports=D},89138:(t,e,i)=>{"use strict";i(79437),i(97450);const r=i(3832),{certificateForKey:n,findAsync:s}=i(48913),o=i(32114),{fromString:a}=i(52217),{toString:h}=i(92263),{codes:c}=i(23416),l=new WeakMap;t.exports=class{constructor(t,e){if(!t)throw o(new Error("keychain is required"),c.ERR_KEYCHAIN_REQUIRED);this.keychain=t,l.set(this,{dek:e})}async encrypt(t,e){if(!(e instanceof Uint8Array))throw o(new Error("Plain data must be a Uint8Array"),c.ERR_INVALID_PARAMETERS);const i=await this.keychain.findKeyByName(t),s=await this.keychain._getPrivateKey(t),h=l.get(this).dek,u=r.pki.decryptRsaPrivateKey(s,h),d=await n(i,u),f=r.pkcs7.createEnvelopedData();f.addRecipient(d),f.content=r.util.createBuffer(e),f.encrypt();const p=r.asn1.toDer(f.toAsn1()).getBytes();return a(p,"ascii")}async decrypt(t){if(!(t instanceof Uint8Array))throw o(new Error("CMS data is required"),c.ERR_INVALID_PARAMETERS);let e;try{const i=r.util.createBuffer(h(t,"ascii")),n=r.asn1.fromDer(i);e=r.pkcs7.messageFromAsn1(n)}catch(t){throw o(new Error("Invalid CMS: "+t.message),c.ERR_INVALID_CMS)}const i=e.recipients.filter((t=>t.issuer.find((t=>"O"===t.shortName&&"ipfs"===t.value)))).filter((t=>t.issuer.find((t=>"CN"===t.shortName)))).map((t=>({recipient:t,keyId:t.issuer.find((t=>"CN"===t.shortName)).value}))),n=await s(i,(async t=>{try{if(await this.keychain.findKeyById(t.keyId))return!0}catch(t){return!1}return!1}));if(!n){const t=i.map((t=>t.keyId));throw o(new Error("Decryption needs one of the key(s): "+t.join(", ")),c.ERR_MISSING_KEYS,{missingKeys:t})}const u=await this.keychain.findKeyById(n.keyId);if(!u)throw o(new Error("No key available to decrypto"),c.ERR_NO_KEY);const d=await this.keychain._getPrivateKey(u.name),f=l.get(this).dek,p=r.pki.decryptRsaPrivateKey(d,f);return e.decrypt(n.recipient,p),a(e.content.getBytes(),"ascii")}}},40298:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:keychain"),{error:r("libp2p:keychain:err")}),s=i(50202),o=i(70942),a=i(82204),{Key:h}=i(41914),c=i(89138),l=i(32114),{codes:u}=i(23416),{toString:d}=i(92263),{fromString:f}=i(52217);i(63219);const p="/info/",g=new WeakMap,y={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function m(t){return!!t&&"string"==typeof t&&t===s(t.trim())}async function v(t){const e=800*Math.random()+200;throw await new Promise((t=>setTimeout(t,e))),t}function b(t){return new h("/pkcs8/"+t)}function w(t){return new h(p+t)}t.exports=class{constructor(t,e){if(!t)throw new Error("store is required");if(this.store=t,this.opts=o(y,e),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<14)throw new Error("dek.keyLength must be least 14 bytes");if(this.opts.dek.salt.length<16)throw new Error("dek.saltLength must be least 16 bytes");if(this.opts.dek.iterationCount<1e3)throw new Error("dek.iterationCount must be least 1000");const i=this.opts.pass?a.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";g.set(this,{dek:i})}get cms(){return new c(this,g.get(this).dek)}static generateOptions(){const t=Object.assign({},y),e=3*Math.ceil(16/3);return t.dek.salt=d(a.randomBytes(e),"base64"),t}static get options(){return y}async createKey(t,e,i=2048){const r=this;if(!m(t)||"self"===t)return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));if("string"!=typeof e)return v(l(new Error(`Invalid key type '${e}'`),u.ERR_INVALID_KEY_TYPE));const n=b(t);if(await r.store.has(n))return v(l(new Error(`Key '${t}' already exists`),u.ERR_KEY_ALREADY_EXISTS));if("rsa"===e.toLowerCase()&&(!Number.isSafeInteger(i)||i<2048))return v(l(new Error(`Invalid RSA key size ${i}`),u.ERR_INVALID_KEY_SIZE));let s;try{const o=await a.keys.generateKeyPair(e,i),h=await o.id(),c=g.get(this).dek,l=await o.export(c);s={name:t,id:h};const u=r.store.batch();u.put(n,f(l)),u.put(w(t),f(JSON.stringify(s))),await u.commit()}catch(t){return v(t)}return s}async listKeys(){const t=this,e={prefix:p},i=[];for await(const r of t.store.query(e))i.push(JSON.parse(d(r.value)));return i}async findKeyById(t){try{return(await this.listKeys()).find((e=>e.id===t))}catch(t){return v(t)}}async findKeyByName(t){if(!m(t))return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));const e=w(t);try{const t=await this.store.get(e);return JSON.parse(d(t))}catch(e){return v(l(new Error(`Key '${t}' does not exist. ${e.message}`),u.ERR_KEY_NOT_FOUND))}}async removeKey(t){if(!m(t)||"self"===t)return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));const e=b(t),i=await this.findKeyByName(t),r=this.store.batch();return r.delete(e),r.delete(w(t)),await r.commit(),i}async renameKey(t,e){const i=this;if(!m(t)||"self"===t)return v(l(new Error(`Invalid old key name '${t}'`),u.ERR_OLD_KEY_NAME_INVALID));if(!m(e)||"self"===e)return v(l(new Error(`Invalid new key name '${e}'`),u.ERR_NEW_KEY_NAME_INVALID));const r=b(t),n=b(e),s=w(t),o=w(e);if(await i.store.has(n))return v(l(new Error(`Key '${e}' already exists`),u.ERR_KEY_ALREADY_EXISTS));try{const t=await i.store.get(r),a=await i.store.get(s),h=JSON.parse(d(a));h.name=e;const c=i.store.batch();return c.put(n,t),c.put(o,f(JSON.stringify(h))),c.delete(r),c.delete(s),await c.commit(),h}catch(t){return v(t)}}async exportKey(t,e){if(!m(t))return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));if(!e)return v(l(new Error("Password is required"),u.ERR_PASSWORD_REQUIRED));const i=b(t);try{const t=await this.store.get(i),r=d(t),n=g.get(this).dek;return(await a.keys.import(r,n)).export(e)}catch(t){return v(t)}}async importKey(t,e,i){if(!m(t)||"self"===t)return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));if(!e)return v(l(new Error("PEM encoded key is required"),u.ERR_PEM_REQUIRED));const r=b(t);if(await this.store.has(r))return v(l(new Error(`Key '${t}' already exists`),u.ERR_KEY_ALREADY_EXISTS));let n,s;try{n=await a.keys.import(e,i)}catch(t){return v(l(new Error("Cannot read the key, most likely the password is wrong"),u.ERR_CANNOT_READ_KEY))}try{s=await n.id();const t=g.get(this).dek;e=await n.export(t)}catch(t){return v(t)}const o={name:t,id:s},h=this.store.batch();return h.put(r,f(e)),h.put(w(t),f(JSON.stringify(o))),await h.commit(),o}async importPeer(t,e){const i=this;if(!m(t))return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));if(!e||!e.privKey)return v(l(new Error("Peer.privKey is required"),u.ERR_MISSING_PRIVATE_KEY));const r=e.privKey,n=b(t);if(await i.store.has(n))return v(l(new Error(`Key '${t}' already exists`),u.ERR_KEY_ALREADY_EXISTS));try{const e=await r.id(),s=g.get(this).dek,o=await r.export(s),a={name:t,id:e},h=i.store.batch();return h.put(n,f(o)),h.put(w(t),f(JSON.stringify(a))),await h.commit(),a}catch(t){return v(t)}}async _getPrivateKey(t){if(!m(t))return v(l(new Error(`Invalid key name '${t}'`),u.ERR_INVALID_KEY_NAME));try{const e=b(t),i=await this.store.get(e);return d(i)}catch(e){return v(l(new Error(`Key '${t}' does not exist. ${e.message}`),u.ERR_KEY_NOT_FOUND))}}async rotateKeychainPass(t,e){if("string"!=typeof t)return v(l(new Error(`Invalid old pass type '${typeof t}'`),u.ERR_INVALID_OLD_PASS_TYPE));if("string"!=typeof e)return v(l(new Error(`Invalid new pass type '${typeof e}'`),u.ERR_INVALID_NEW_PASS_TYPE));if(e.length<20)return v(l(new Error(`Invalid pass length ${e.length}`),u.ERR_INVALID_PASS_LENGTH));n("recreating keychain");const i=g.get(this).dek;this.opts.pass=e;const r=e?a.pbkdf2(e,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";g.set(this,{dek:r});const s=await this.listKeys();for(const t of s){const e=await this.store.get(b(t.name)),n=d(e),s=await a.keys.import(n,i),o=r.toString(),h=await s.export(o),c=this.store.batch(),l={name:t.name,id:t.id};c.put(b(t.name),f(h)),c.put(w(t.name),f(JSON.stringify(l))),await c.commit()}n("keychain reconstructed")}}},48913:(t,e,i)=>{"use strict";i(25414);const r=i(3832).pki;t.exports={certificateForKey:(t,e)=>{const i=r.setRsaPublicKey(e.n,e.e),n=r.createCertificate();n.publicKey=i,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);const s=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return n.setSubject(s),n.setIssuer(s),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(e),n},findAsync:async function(t,e){const i=t.map(e);return t[(await Promise.all(i)).findIndex((t=>t))]}}},31175:(t,e,i)=>{"use strict";const r=i(70942),{pipe:n}=i(60618),{tap:s}=i(38386),o=i(87787),{METRICS:a}=i(3524),h=i(61094),c=["dataReceived","dataSent"],l={in:"dataReceived",out:"dataSent"};class u{constructor(t){this._options=r(a,t),this._globalStats=new h(c,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=o(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._systems=new Map}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(const t of this._peerStats.values())t.stop();for(const t of this._protocolStats.values())t.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}getComponentMetrics(){return this._systems}updateComponentMetric({system:t="libp2p",component:e,metric:i,value:r}){this._systems.has(t)||this._systems.set(t,new Map);const n=this._systems.get(t);n.has(e)||n.set(e,new Map),n.get(e).set(i,r)}forPeer(t){const e=t.toB58String();return this._peerStats.get(e)||this._oldPeers.get(e)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(t){return this._protocolStats.get(t)}onPeerDisconnected(t){const e=t.toB58String(),i=this._peerStats.get(e);i&&(i.stop(),this._peerStats.delete(e),this._oldPeers.set(e,i))}_onMessage({remotePeer:t,protocol:e,direction:i,dataLength:r}){if(!this._running)return;const n=l[i];let s=this.forPeer(t);if(s||(s=new h(c,this._options),this._peerStats.set(t.toB58String(),s)),s.push(n,r),this._globalStats.push(n,r),e){let t=this.forProtocol(e);t||(t=new h(c,this._options),this._protocolStats.set(e,t)),t.push(n,r)}}updatePlaceholder(t,e){if(!this._running)return;const i=this.forPeer(t),r=e.toB58String(),n=this.forPeer(e);let s=i;n&&(s=u.mergeStats(n,s),this._oldPeers.delete(r)),this._peerStats.delete(t.toB58String()),this._peerStats.set(r,s),s.start()}trackStream({stream:t,remotePeer:e,protocol:i}){const r=this,o=t.source;t.source=s((t=>r._onMessage({remotePeer:e,protocol:i,direction:"in",dataLength:t.length})))(o);const a=t.sink;return t.sink=t=>n(t,s((t=>r._onMessage({remotePeer:e,protocol:i,direction:"out",dataLength:t.length}))),a),t}static mergeStats(t,e){return t.stop(),e.stop(),t._queue=[...t._queue,...e._queue],t}}t.exports=u},87787:(t,e,i)=>{"use strict";const r=i(70248);t.exports=t=>{const e=r(t);return e.delete=e.remove,e}},61094:(t,e,i)=>{"use strict";const{EventEmitter:r}=i(17187),{BigNumber:n}=i(44431),s=i(63573),o=i(82916);t.exports=class extends r{constructor(t,e){super(),this._options=e,this._queue=[],this._stats={dataReceived:n(0),dataSent:n(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const i=this._options.movingAverageIntervals;for(let e=0;e<t.length;e++){const r=t[e];this._stats[r]=n(0),this._movingAverages[r]={};for(let t=0;t<i.length;t++){const e=i[t];(this._movingAverages[r][e]=s(e)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){const t=this.snapshot,e=this.movingAverages,i={dataReceived:t.dataReceived.toString(),dataSent:t.dataSent.toString(),movingAverages:{}},r=Object.keys(e);for(const t of r){i.movingAverages[t]={};for(const r of Object.keys(e[t]))i.movingAverages[t][r]=e[t][r].movingAverage()}return i}push(t,e){this._queue.push([t,e,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=o(this._update,this._nextTimeout())}_nextTimeout(){const t=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-t),0)}_update(){if(this._timeout=null,this._queue.length){let t;for(t of this._queue)this._applyOp(t);this._queue=[],this._updateFrequency(t[2]),this.emit("update",this._stats)}}_updateFrequency(t){const e=t-this._frequencyLastTime;Object.keys(this._stats).forEach((i=>{this._updateFrequencyFor(i,e,t)})),this._frequencyLastTime=t}_updateFrequencyFor(t,e,i){const r=this._frequencyAccumulators[t]||0;this._frequencyAccumulators[t]=0;const n=r/(e||1)*1e3;let o=this._movingAverages[t];o||(o=this._movingAverages[t]={});const a=this._options.movingAverageIntervals;for(let t=0;t<a.length;t++){const e=a[t];let r=o[e];r||(r=o[e]=s(e)),r.push(i,n)}}_applyOp(t){const e=t[0],i=t[1];if("number"!=typeof i)throw new Error(`invalid increment number: ${i}`);let r;r=Object.prototype.hasOwnProperty.call(this._stats,e)?this._stats[e]:this._stats[e]=n(0),this._stats[e]=r.plus(i),this._frequencyAccumulators[e]||(this._frequencyAccumulators[e]=0),this._frequencyAccumulators[e]+=i}}},39350:t=>{"use strict";class e extends Map{constructor(t){super();const{system:e,component:i,metric:r,metrics:n}=t;this._system=e,this._component=i,this._metric=r,this._metrics=n,this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}set(t,e){return super.set(t,e),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),this}delete(t){const e=super.delete(t);return this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),e}clear(){super.clear(),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}}t.exports=({system:t="libp2p",component:i,metric:r,metrics:n})=>{let s;return s=n?new e({system:t,component:i,metric:r,metrics:n}):new Map,s}},64205:(t,e,i)=>{"use strict";const r=i(47956),n=i(11227),{promisify:s}=i(76021),{Multiaddr:o}=i(46584),a=Object.assign(n("libp2p:nat"),{error:n("libp2p:nat:err")}),{isBrowser:h}=i(97916),c=i(42693),l=i(290),u=i(28362),d=i(32114),{codes:{ERR_INVALID_PARAMETERS:f}}=i(23416),p=i(23830);function g(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}t.exports=class{constructor({peerId:t,addressManager:e,transportManager:i,...r}){if(this._peerId=t,this._addressManager=e,this._transportManager=i,this._enabled=r.enabled,this._externalIp=r.externalIp,this._options={description:r.description||`${u.name}@${u.version} ${this._peerId}`,ttl:r.ttl||7200,autoUpdate:r.keepAlive||!0,gateway:r.gateway,enablePMP:Boolean(r.pmp&&r.pmp.enabled)},this._options.ttl<7200)throw d(new Error("NatManager ttl should be at least 7200 seconds"),f)}start(){!h&&this._enabled&&this._start().catch((t=>{a.error(t)}))}async _start(){const t=this._transportManager.getAddrs();for(const e of t){const{family:t,host:i,port:r,transport:n}=e.toOptions();if(!e.isThinWaistAddress()||"tcp"!==n)continue;if(p(e))continue;if(4!==t)continue;const s=this._getClient(),h=this._externalIp||await s.externalIp();if(l(h))throw new Error(`${h} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const c=g();a(`opening uPnP connection from ${h}:${c} to ${i}:${r}`),await s.map({publicPort:c,privatePort:r,protocol:n.toUpperCase()}),this._addressManager.addObservedAddr(o.fromNodeAddress({family:4,address:h,port:c},n))}}_getClient(){if(this._client)return this._client;const t=new r(this._options),e=s(t.map.bind(t)),i=s(t.destroy.bind(t)),n=s(t.externalIp.bind(t));return this._client={map:(...t)=>c((()=>e(...t)),{onFailedAttempt:a.error,unref:!0}),destroy:(...t)=>c((()=>i(...t)),{onFailedAttempt:a.error,unref:!0}),externalIp:(...t)=>c((()=>n(...t)),{onFailedAttempt:a.error,unref:!0})},this._client}async stop(){if(!h&&this._client)try{await this._client.destroy(),this._client=null}catch(t){a.error(t)}}}},51203:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:peer-routing"),{error:r("libp2p:peer-routing:err")}),s=i(32114),o=i(23416),{storeAddresses:a,uniquePeers:h,requirePeers:c}=i(63952),{TimeoutController:l}=i(10715),u=i(74014),{pipe:d}=i(60618),f=i(72262),p=i(64593),g=i(55565),{setDelayedInterval:y,clearDelayedInterval:m}=i(27695),{DHTPeerRouting:v}=i(70937),{setMaxListeners:b}=i(17187);t.exports=class{constructor(t){this._peerId=t.peerId,this._peerStore=t.peerStore,this._routers=t._modules.peerRouting||[],t._dht&&t._config.dht.enabled&&this._routers.push(new v(t._dht)),this._refreshManagerOptions=t._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){this._routers.length&&!this._timeoutId&&this._refreshManagerOptions.enabled&&(this._timeoutId=y(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await p(this.getClosestPeers(this._peerId.id,{timeout:this._refreshManagerOptions.timeout||1e4}))}catch(t){n.error(t)}}stop(){m(this._timeoutId)}async findPeer(t,e){if(!this._routers.length)throw s(new Error("No peer routers available"),o.codes.ERR_NO_ROUTERS_AVAILABLE);if(t.toB58String()===this._peerId.toB58String())throw s(new Error("Should not try to find self"),o.codes.ERR_FIND_SELF);const i=await d(u(...this._routers.map((i=>async function*(){try{yield await i.findPeer(t,e)}catch(t){n.error(t)}}()))),(t=>g(t,Boolean)),(t=>a(t,this._peerStore)),(t=>f(t)));if(i)return i;throw s(new Error(o.messages.NOT_FOUND),o.codes.ERR_NOT_FOUND)}async*getClosestPeers(t,e={timeout:3e4}){if(!this._routers.length)throw s(new Error("No peer routers available"),o.codes.ERR_NO_ROUTERS_AVAILABLE);if(e.timeout){const t=new l(e.timeout);try{b&&b(1/0,t.signal)}catch{}e.signal=t.signal}yield*d(u(...this._routers.map((i=>i.getClosestPeers(t,e)))),(t=>a(t,this._peerStore)),(t=>h(t)),(t=>c(t)))}}},3721:(t,e,i)=>{"use strict";const r=i(11227),n=i(32114),{Multiaddr:s}=i(46584),o=i(88785),{codes:a}=i(23416),h=i(61131),c=i(31244),{pipe:l}=i(60618),u=i(31303),d=i(55565),f=i(32121),p=i(4321),g=Object.assign(r("libp2p:peer-store:address-book"),{error:r("libp2p:peer-store:address-book:err")}),y="change:multiaddrs";function m(t,e,i,r=!1){return l(e,(t=>p(t,(t=>{if(!s.isMultiaddr(t))throw g.error("multiaddr must be an instance of Multiaddr"),n(new Error("multiaddr must be an instance of Multiaddr"),a.ERR_INVALID_PARAMETERS)}))),(e=>d(e,(e=>i(t,e)))),(t=>f(t,(t=>({multiaddr:new s(t.toString()),isCertified:r})))),(t=>u(t)))}t.exports=class{constructor(t,e,i){this._emit=t,this._store=e,this._addressFilter=i}async consumePeerRecord(t){g("consumePeerRecord await write lock");const e=await this._store.lock.writeLock();let i,r;g("consumePeerRecord got write lock");try{let n;try{n=h.createFromProtobuf(t.payload)}catch(t){return g.error("invalid peer record received"),!1}i=n.peerId;const s=n.multiaddrs;if(!i.equals(t.peerId))return g("signing key does not match PeerId in the PeerRecord"),!1;if(!s||!s.length)return!1;if(await this._store.has(i)){const t=await this._store.load(i);if(t.peerRecordEnvelope){const e=await c.createFromProtobuf(t.peerRecordEnvelope);if(h.createFromProtobuf(e.payload).seqNumber>=n.seqNumber)return!1}}r=await this._store.patchOrCreate(i,{addresses:await m(i,s,this._addressFilter,!0),peerRecordEnvelope:t.marshal()}),g(`stored provided peer record for ${n.peerId.toB58String()}`)}finally{g("consumePeerRecord release write lock"),e()}return this._emit(y,{peerId:i,multiaddrs:r.addresses.map((({multiaddr:t})=>t))}),!0}async getRawEnvelope(t){g("getRawEnvelope await read lock");const e=await this._store.lock.readLock();g("getRawEnvelope got read lock");try{return(await this._store.load(t)).peerRecordEnvelope}catch(t){if(t.code!==a.ERR_NOT_FOUND)throw t}finally{g("getRawEnvelope release read lock"),e()}}async getPeerRecord(t){const e=await this.getRawEnvelope(t);if(e)return c.createFromProtobuf(e)}async get(t){if(!o.isPeerId(t))throw g.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);g("get wait for read lock");const e=await this._store.lock.readLock();g("get got read lock");try{return(await this._store.load(t)).addresses}catch(t){if(t.code!==a.ERR_NOT_FOUND)throw t}finally{g("get release read lock"),e()}return[]}async set(t,e){if(!o.isPeerId(t))throw g.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw g.error("multiaddrs must be an array of Multiaddrs"),n(new Error("multiaddrs must be an array of Multiaddrs"),a.ERR_INVALID_PARAMETERS);g("set await write lock");const i=await this._store.lock.writeLock();g("set got write lock");let r,s=!1;try{const n=await m(t,e,this._addressFilter);if(!n.length)return;try{const e=await this._store.load(t);if(s=!0,new Set([...n.map((({multiaddr:t})=>t.toString())),...e.addresses.map((({multiaddr:t})=>t.toString()))]).size===e.addresses.length&&n.length===e.addresses.length)return}catch(t){if(t.code!==a.ERR_NOT_FOUND)throw t}r=await this._store.patchOrCreate(t,{addresses:n}),g(`set multiaddrs for ${t.toB58String()}`)}finally{g("set release write lock"),i()}this._emit(y,{peerId:t,multiaddrs:r.addresses.map((t=>t.multiaddr))}),s||this._emit("peer",t)}async add(t,e){if(!o.isPeerId(t))throw g.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw g.error("multiaddrs must be an array of Multiaddrs"),n(new Error("multiaddrs must be an array of Multiaddrs"),a.ERR_INVALID_PARAMETERS);g("add await write lock");const i=await this._store.lock.writeLock();let r,s;g("add got write lock");try{const n=await m(t,e,this._addressFilter);if(!n.length)return;try{const e=await this._store.load(t);if(r=!0,new Set([...n.map((({multiaddr:t})=>t.toString())),...e.addresses.map((({multiaddr:t})=>t.toString()))]).size===e.addresses.length)return}catch(t){if(t.code!==a.ERR_NOT_FOUND)throw t}s=await this._store.mergeOrCreate(t,{addresses:n}),g(`added multiaddrs for ${t.toB58String()}`)}finally{g("set release write lock"),i()}this._emit(y,{peerId:t,multiaddrs:s.addresses.map((t=>t.multiaddr))}),r||this._emit("peer",t)}async delete(t){if(!o.isPeerId(t))throw g.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);g("delete await write lock");const e=await this._store.lock.writeLock();let i;g("delete got write lock");try{i=await this._store.has(t),await this._store.patchOrCreate(t,{addresses:[]})}finally{g("delete release write lock"),e()}i&&this._emit(y,{peerId:t,multiaddrs:[]})}async getMultiaddrsForPeer(t,e=(t=>t)){return e(await this.get(t)).map((e=>{const i=e.multiaddr,r=i.getPeerId();return r&&r===t.toB58String()?i:i.encapsulate(`/p2p/${t.toB58String()}`)}))}}},4323:(t,e,i)=>{"use strict";const r=i(11227),{EventEmitter:n}=i(17187),s=i(3721),o=i(61062),a=i(3350),h=i(51979),c=i(907),l=Object.assign(r("libp2p:peer-store"),{error:r("libp2p:peer-store:err")});t.exports=class extends n{constructor({peerId:t,datastore:e,addressFilter:i}){super(),this._peerId=t,this._store=new c(e),this.addressBook=new s(this.emit.bind(this),this._store,i),this.keyBook=new o(this.emit.bind(this),this._store),this.metadataBook=new a(this.emit.bind(this),this._store),this.protoBook=new h(this.emit.bind(this),this._store)}async*getPeers(){l("getPeers await read lock");const t=await this._store.lock.readLock();l("getPeers got read lock");try{for await(const t of this._store.all())t.id.toB58String()!==this._peerId.toB58String()&&(yield t)}finally{l("getPeers release read lock"),t()}}async delete(t){l("delete await write lock");const e=await this._store.lock.writeLock();l("delete got write lock");try{await this._store.delete(t)}finally{l("delete release write lock"),e()}}async get(t){l("get await read lock");const e=await this._store.lock.readLock();l("get got read lock");try{return this._store.load(t)}finally{l("get release read lock"),e()}}async has(t){l("has await read lock");const e=await this._store.lock.readLock();l("has got read lock");try{return this._store.has(t)}finally{l("has release read lock"),e()}}}},61062:(t,e,i)=>{"use strict";const r=i(11227),n=i(32114),{codes:s}=i(23416),o=i(88785),{equals:a}=i(19588),h=Object.assign(r("libp2p:peer-store:key-book"),{error:r("libp2p:peer-store:key-book:err")}),c="change:pubkey";t.exports=class{constructor(t,e){this._emit=t,this._store=e}async set(t,e){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);if(!e)throw h.error("publicKey must be an instance of PublicKey to store data"),n(new Error("publicKey must be an instance of PublicKey"),s.ERR_INVALID_PARAMETERS);h("set await write lock");const i=await this._store.lock.writeLock();h("set got write lock");let r=!1;try{try{const i=await this._store.load(t);if(i.pubKey&&a(i.pubKey.bytes,e.bytes))return}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}await this._store.patchOrCreate(t,{pubKey:e}),r=!0}finally{h("set release write lock"),i()}r&&this._emit(c,{peerId:t,pubKey:e})}async get(t){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);h("get await write lock");const e=await this._store.lock.readLock();h("get got write lock");try{return(await this._store.load(t)).pubKey}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}finally{h("get release write lock"),e()}}async delete(t){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);h("delete await write lock");const e=await this._store.lock.writeLock();h("delete got write lock");try{await this._store.patchOrCreate(t,{pubKey:void 0})}finally{h("delete release write lock"),e()}this._emit(c,{peerId:t,pubKey:void 0})}}},3350:(t,e,i)=>{"use strict";const r=i(11227),n=i(32114),{codes:s}=i(23416),o=i(88785),{equals:a}=i(19588),h=Object.assign(r("libp2p:peer-store:metadata-book"),{error:r("libp2p:peer-store:metadata-book:err")}),c="change:metadata";t.exports=class{constructor(t,e){this._emit=t,this._store=e}async get(t){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);h("get await read lock");const e=await this._store.lock.readLock();h("get got read lock");try{return(await this._store.load(t)).metadata}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}finally{h("get release read lock"),e()}return new Map}async getValue(t,e){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);h("getValue await read lock");const i=await this._store.lock.readLock();h("getValue got read lock");try{return(await this._store.load(t)).metadata.get(e)}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}finally{h("getValue release write lock"),i()}}async set(t,e){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);if(!(e&&e instanceof Map))throw h.error("valid metadata must be provided to store data"),n(new Error("valid metadata must be provided"),s.ERR_INVALID_PARAMETERS);h("set await write lock");const i=await this._store.lock.writeLock();h("set got write lock");try{await this._store.mergeOrCreate(t,{metadata:e})}finally{h("set release write lock"),i()}this._emit(c,{peerId:t,metadata:e})}async setValue(t,e,i){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);if("string"!=typeof e||!(i instanceof Uint8Array))throw h.error("valid key and value must be provided to store data"),n(new Error("valid key and value must be provided"),s.ERR_INVALID_PARAMETERS);h("setValue await write lock");const r=await this._store.lock.writeLock();let l;h("setValue got write lock");try{try{const r=(await this._store.load(t)).metadata.get(e);if(null!=r&&a(i,r))return}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}l=await this._store.mergeOrCreate(t,{metadata:new Map([[e,i]])})}finally{h("setValue release write lock"),r()}this._emit(c,{peerId:t,metadata:l.metadata})}async delete(t){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);h("delete await write lock");const e=await this._store.lock.writeLock();let i;h("delete got write lock");try{i=await this._store.has(t),i&&await this._store.patch(t,{metadata:new Map})}finally{h("delete release write lock"),e()}i&&this._emit(c,{peerId:t,metadata:new Map})}async deleteValue(t,e){if(!o.isPeerId(t))throw h.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);h("deleteValue await write lock");const i=await this._store.lock.writeLock();let r;h("deleteValue got write lock");try{r=(await this._store.load(t)).metadata,r.delete(e),await this._store.patch(t,{metadata:r})}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}finally{h("deleteValue release write lock"),i()}r&&this._emit(c,{peerId:t,metadata:r})}}},34217:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-peer"]||(r.roots["libp2p-peer"]={});a.Peer=function(){function t(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e;return t.prototype.addresses=o.emptyArray,t.prototype.protocols=o.emptyArray,t.prototype.metadata=o.emptyArray,t.prototype.pubKey=null,t.prototype.peerRecordEnvelope=null,Object.defineProperty(t.prototype,"_pubKey",{get:o.oneOfGetter(e=["pubKey"]),set:o.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_peerRecordEnvelope",{get:o.oneOfGetter(e=["peerRecordEnvelope"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=s.create()),null!=t.addresses&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)a.Address.encode(t.addresses[i],e.uint32(10).fork()).ldelim();if(null!=t.protocols&&t.protocols.length)for(i=0;i<t.protocols.length;++i)e.uint32(18).string(t.protocols[i]);if(null!=t.metadata&&t.metadata.length)for(i=0;i<t.metadata.length;++i)a.Metadata.encode(t.metadata[i],e.uint32(26).fork()).ldelim();return null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(34).bytes(t.pubKey),null!=t.peerRecordEnvelope&&Object.hasOwnProperty.call(t,"peerRecordEnvelope")&&e.uint32(42).bytes(t.peerRecordEnvelope),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Peer;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(a.Address.decode(t,t.uint32()));break;case 2:r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(t.string());break;case 3:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(a.Metadata.decode(t,t.uint32()));break;case 4:r.pubKey=t.bytes();break;case 5:r.peerRecordEnvelope=t.bytes();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Peer)return t;var e=new a.Peer;if(t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".Peer.addresses: array expected");e.addresses=[];for(var i=0;i<t.addresses.length;++i){if("object"!=typeof t.addresses[i])throw TypeError(".Peer.addresses: object expected");e.addresses[i]=a.Address.fromObject(t.addresses[i])}}if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Peer.protocols: array expected");for(e.protocols=[],i=0;i<t.protocols.length;++i)e.protocols[i]=String(t.protocols[i])}if(t.metadata){if(!Array.isArray(t.metadata))throw TypeError(".Peer.metadata: array expected");for(e.metadata=[],i=0;i<t.metadata.length;++i){if("object"!=typeof t.metadata[i])throw TypeError(".Peer.metadata: object expected");e.metadata[i]=a.Metadata.fromObject(t.metadata[i])}}return null!=t.pubKey&&("string"==typeof t.pubKey?o.base64.decode(t.pubKey,e.pubKey=o.newBuffer(o.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.peerRecordEnvelope&&("string"==typeof t.peerRecordEnvelope?o.base64.decode(t.peerRecordEnvelope,e.peerRecordEnvelope=o.newBuffer(o.base64.length(t.peerRecordEnvelope)),0):t.peerRecordEnvelope.length&&(e.peerRecordEnvelope=t.peerRecordEnvelope)),e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addresses=[],i.protocols=[],i.metadata=[]),t.addresses&&t.addresses.length){i.addresses=[];for(var r=0;r<t.addresses.length;++r)i.addresses[r]=a.Address.toObject(t.addresses[r],e)}if(t.protocols&&t.protocols.length)for(i.protocols=[],r=0;r<t.protocols.length;++r)i.protocols[r]=t.protocols[r];if(t.metadata&&t.metadata.length)for(i.metadata=[],r=0;r<t.metadata.length;++r)i.metadata[r]=a.Metadata.toObject(t.metadata[r],e);return null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(i.pubKey=e.bytes===String?o.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey,e.oneofs&&(i._pubKey="pubKey")),null!=t.peerRecordEnvelope&&t.hasOwnProperty("peerRecordEnvelope")&&(i.peerRecordEnvelope=e.bytes===String?o.base64.encode(t.peerRecordEnvelope,0,t.peerRecordEnvelope.length):e.bytes===Array?Array.prototype.slice.call(t.peerRecordEnvelope):t.peerRecordEnvelope,e.oneofs&&(i._peerRecordEnvelope="peerRecordEnvelope")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),a.Address=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}var e;return t.prototype.multiaddr=o.newBuffer([]),t.prototype.isCertified=null,Object.defineProperty(t.prototype,"_isCertified",{get:o.oneOfGetter(e=["isCertified"]),set:o.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=s.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),null!=t.isCertified&&Object.hasOwnProperty.call(t,"isCertified")&&e.uint32(16).bool(t.isCertified),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Address;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.multiaddr=t.bytes();break;case 2:r.isCertified=t.bool();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Address)return t;var e=new a.Address;return null!=t.multiaddr&&("string"==typeof t.multiaddr?o.base64.decode(t.multiaddr,e.multiaddr=o.newBuffer(o.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),null!=t.isCertified&&(e.isCertified=Boolean(t.isCertified)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.multiaddr="":(i.multiaddr=[],e.bytes!==Array&&(i.multiaddr=o.newBuffer(i.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(i.multiaddr=e.bytes===String?o.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),null!=t.isCertified&&t.hasOwnProperty("isCertified")&&(i.isCertified=t.isCertified,e.oneofs&&(i._isCertified="isCertified")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),a.Metadata=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.key="",t.prototype.value=o.newBuffer([]),t.encode=function(t,e){return e||(e=s.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).string(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).bytes(t.value),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.key=t.string();break;case 2:r.value=t.bytes();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Metadata)return t;var e=new a.Metadata;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&("string"==typeof t.value?o.base64.decode(t.value,e.value=o.newBuffer(o.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.key="",e.bytes===String?i.value="":(i.value=[],e.bytes!==Array&&(i.value=o.newBuffer(i.value)))),null!=t.key&&t.hasOwnProperty("key")&&(i.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(i.value=e.bytes===String?o.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=a},51979:(t,e,i)=>{"use strict";const r=i(11227),n=i(32114),{codes:s}=i(23416),o=i(88785),a=Object.assign(r("libp2p:peer-store:proto-book"),{error:r("libp2p:peer-store:proto-book:err")}),h="change:protocols";t.exports=class{constructor(t,e){this._emit=t,this._store=e}async get(t){a("get wait for read lock");const e=await this._store.lock.readLock();a("get got read lock");try{return(await this._store.load(t)).protocols}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}finally{a("get release read lock"),e()}return[]}async set(t,e){if(!o.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),n(new Error("protocols must be provided"),s.ERR_INVALID_PARAMETERS);a("set await write lock");const i=await this._store.lock.writeLock();let r;a("set got write lock");try{try{const i=await this._store.load(t);if(new Set([...e]).size===i.protocols.length)return}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}r=await this._store.patchOrCreate(t,{protocols:e}),a(`stored provided protocols for ${t.toB58String()}`)}finally{a("set release write lock"),i()}this._emit(h,{peerId:t,protocols:r.protocols})}async add(t,e){if(!o.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),n(new Error("protocols must be provided"),s.ERR_INVALID_PARAMETERS);a("add await write lock");const i=await this._store.lock.writeLock();let r;a("add got write lock");try{try{const i=await this._store.load(t);if(new Set([...i.protocols,...e]).size===i.protocols.length)return}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}r=await this._store.mergeOrCreate(t,{protocols:e}),a(`added provided protocols for ${t.toB58String()}`)}finally{a("add release write lock"),i()}this._emit(h,{peerId:t,protocols:r.protocols})}async remove(t,e){if(!o.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),n(new Error("protocols must be provided"),s.ERR_INVALID_PARAMETERS);a("remove await write lock");const i=await this._store.lock.writeLock();let r;a("remove got write lock");try{try{const i=await this._store.load(t),r=new Set(i.protocols);for(const t of e)r.delete(t);if(i.protocols.length===r.size)return;e=Array.from(r)}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}r=await this._store.patchOrCreate(t,{protocols:e})}finally{a("remove release write lock"),i()}this._emit(h,{peerId:t,protocols:r.protocols})}async delete(t){a("delete await write lock");const e=await this._store.lock.writeLock();let i;a("delete got write lock");try{i=await this._store.has(t),await this._store.patchOrCreate(t,{protocols:[]})}catch(t){if(t.code!==s.ERR_NOT_FOUND)throw t}finally{a("delete release write lock"),e()}i&&this._emit(h,{peerId:t,protocols:[]})}}},907:(t,e,i)=>{"use strict";const r=i(11227),n=i(88785),s=i(32114),{codes:o}=i(23416),{Key:a}=i(41914),{base32:h}=i(22817),{keys:{unmarshalPublicKey:c,marshalPublicKey:l}}=i(82204),{Multiaddr:u}=i(46584),{Peer:d}=i(34217),f=i(86481),{equals:p}=i(19588),g=Object.assign(r("libp2p:peer-store:store"),{error:r("libp2p:peer-store:store:err")});t.exports=class{constructor(t){this._datastore=t,this.lock=f("peer-store",{singleProcess:!0})}_peerIdToDatastoreKey(t){if(!n.isPeerId(t))throw g.error("peerId must be an instance of peer-id to store data"),s(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);const e=t.toString();return new a(`/peers/${e}`)}async has(t){return this._datastore.has(this._peerIdToDatastoreKey(t))}async delete(t){await this._datastore.delete(this._peerIdToDatastoreKey(t))}async load(t){const e=await this._datastore.get(this._peerIdToDatastoreKey(t)),i=d.decode(e),r=i.pubKey?c(i.pubKey):t.pubKey,n=new Map;for(const t of i.metadata)n.set(t.key,t.value);return{...i,id:t,pubKey:r,addresses:i.addresses.map((({multiaddr:t,isCertified:e})=>({multiaddr:new u(t),isCertified:e||!1}))),metadata:n,peerRecordEnvelope:i.peerRecordEnvelope||void 0}}async save(t){if(null!=t.pubKey&&null!=t.id.pubKey&&!p(t.pubKey.bytes,t.id.pubKey.bytes))throw g.error("peer publicKey bytes do not match peer id publicKey bytes"),s(new Error("publicKey bytes do not match peer id publicKey bytes"),o.ERR_INVALID_PARAMETERS);const e=new Set,i=d.encode({addresses:t.addresses.filter((t=>!e.has(t.multiaddr.toString())&&(e.add(t.multiaddr.toString()),!0))).sort(((t,e)=>t.multiaddr.toString().localeCompare(e.multiaddr.toString()))).map((({multiaddr:t,isCertified:e})=>({multiaddr:t.bytes,isCertified:e}))),protocols:t.protocols.sort(),pubKey:t.pubKey?l(t.pubKey):void 0,metadata:[...t.metadata.keys()].sort().map((e=>({key:e,value:t.metadata.get(e)}))),peerRecordEnvelope:t.peerRecordEnvelope}).finish();return await this._datastore.put(this._peerIdToDatastoreKey(t.id),i),this.load(t.id)}async patch(t,e){const i=await this.load(t);return await this._patch(t,e,i)}async patchOrCreate(t,e){let i;try{i=await this.load(t)}catch(e){if(e.code!==o.ERR_NOT_FOUND)throw e;i={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._patch(t,e,i)}async _patch(t,e,i){return await this.save({...i,...e,id:t})}async merge(t,e){const i=await this.load(t);return this._merge(t,e,i)}async mergeOrCreate(t,e){let i;try{i=await this.load(t)}catch(e){if(e.code!==o.ERR_NOT_FOUND)throw e;i={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._merge(t,e,i)}async _merge(t,e,i){const r=new Map;return(e.addresses||[]).forEach((t=>{r.set(t.multiaddr.toString(),t.isCertified)})),i.addresses.forEach((({multiaddr:t,isCertified:e})=>{const i=t.toString();r.set(i,Boolean(r.get(i)||e))})),await this.save({id:t,addresses:Array.from(r.entries()).map((([t,e])=>({multiaddr:new u(t),isCertified:e}))),protocols:Array.from(new Set([...i.protocols||[],...e.protocols||[]])),metadata:new Map([...i.metadata?i.metadata.entries():[],...e.metadata?e.metadata.entries():[]]),pubKey:e.pubKey||(null!=i?i.pubKey:void 0),peerRecordEnvelope:e.peerRecordEnvelope||(null!=i?i.peerRecordEnvelope:void 0)})}async*all(){for await(const t of this._datastore.queryKeys({prefix:"/peers/"})){const e=t.toString().split("/")[2],i=h.decode(e);yield this.load(n.createFromBytes(i))}}}},77667:t=>{"use strict";t.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}},75466:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:ping"),{error:r("libp2p:ping:err")}),s=i(32114),{codes:o}=i(23416),a=i(82204),{pipe:h}=i(60618),{toBuffer:c}=i(96653),{collect:l,take:u}=i(38386),{equals:d}=i(19588),{PROTOCOL_NAME:f,PING_LENGTH:p,PROTOCOL_VERSION:g}=i(77667);t.exports=class{static getProtocolStr(t){return`/${t._config.protocolPrefix}/${f}/${g}`}constructor(t){this._libp2p=t}handleMessage({stream:t}){return h(t,t)}async ping(t){const e=`/${this._libp2p._config.protocolPrefix}/${f}/${g}`;n("dialing %s to %s",e,t.toB58String?t.toB58String():t);const i=await this._libp2p.dial(t),{stream:r}=await i.newStream(e),y=Date.now(),m=a.randomBytes(p),[v]=await h([m],r,(t=>u(1,t)),c,l),b=Date.now();if(!d(m,v))throw s(new Error("Received wrong ping ack"),o.ERR_WRONG_PING_ACK);return b-y}}},65993:t=>{"use strict";t.exports=function(t,e,i){const r=new t(e,i);return r._subscribeAdapter=r.subscribe,r._unsubscribeAdapter=r.unsubscribe,r.subscribe=function(t,e){e&&r.on(t,e),r._subscribeAdapter(t)},r.unsubscribe=function(t,e){e?r.removeListener(t,e):r.removeAllListeners(t),0===r.listenerCount(t)&&r._unsubscribeAdapter(t)},r}},60709:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-envelope"]||(r.roots["libp2p-envelope"]={});a.Envelope=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.publicKey=o.newBuffer([]),t.prototype.payloadType=o.newBuffer([]),t.prototype.payload=o.newBuffer([]),t.prototype.signature=o.newBuffer([]),t.encode=function(t,e){return e||(e=s.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.payloadType&&Object.hasOwnProperty.call(t,"payloadType")&&e.uint32(18).bytes(t.payloadType),null!=t.payload&&Object.hasOwnProperty.call(t,"payload")&&e.uint32(26).bytes(t.payload),null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.Envelope;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.publicKey=t.bytes();break;case 2:r.payloadType=t.bytes();break;case 3:r.payload=t.bytes();break;case 5:r.signature=t.bytes();break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.Envelope)return t;var e=new a.Envelope;return null!=t.publicKey&&("string"==typeof t.publicKey?o.base64.decode(t.publicKey,e.publicKey=o.newBuffer(o.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),null!=t.payloadType&&("string"==typeof t.payloadType?o.base64.decode(t.payloadType,e.payloadType=o.newBuffer(o.base64.length(t.payloadType)),0):t.payloadType.length&&(e.payloadType=t.payloadType)),null!=t.payload&&("string"==typeof t.payload?o.base64.decode(t.payload,e.payload=o.newBuffer(o.base64.length(t.payload)),0):t.payload.length&&(e.payload=t.payload)),null!=t.signature&&("string"==typeof t.signature?o.base64.decode(t.signature,e.signature=o.newBuffer(o.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.publicKey="":(i.publicKey=[],e.bytes!==Array&&(i.publicKey=o.newBuffer(i.publicKey))),e.bytes===String?i.payloadType="":(i.payloadType=[],e.bytes!==Array&&(i.payloadType=o.newBuffer(i.payloadType))),e.bytes===String?i.payload="":(i.payload=[],e.bytes!==Array&&(i.payload=o.newBuffer(i.payload))),e.bytes===String?i.signature="":(i.signature=[],e.bytes!==Array&&(i.signature=o.newBuffer(i.signature)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(i.publicKey=e.bytes===String?o.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),null!=t.payloadType&&t.hasOwnProperty("payloadType")&&(i.payloadType=e.bytes===String?o.base64.encode(t.payloadType,0,t.payloadType.length):e.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),null!=t.payload&&t.hasOwnProperty("payload")&&(i.payload=e.bytes===String?o.base64.encode(t.payload,0,t.payload.length):e.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),null!=t.signature&&t.hasOwnProperty("signature")&&(i.signature=e.bytes===String?o.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=a},31244:(t,e,i)=>{"use strict";const r=i(32114),{concat:n}=i(20605),{fromString:s}=i(52217),o=i(14437),a=i(88785),h=i(94676),{equals:c}=i(19588),{codes:l}=i(23416),{Envelope:u}=i(60709);class d{constructor({peerId:t,payloadType:e,payload:i,signature:r}){this.peerId=t,this.payloadType=e,this.payload=i,this.signature=r,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;const t=o.marshalPublicKey(this.peerId.pubKey);return this._marshal=u.encode({publicKey:t,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(t){return c(this.peerId.pubKey.bytes,t.peerId.pubKey.bytes)&&c(this.payloadType,t.payloadType)&&c(this.payload,t.payload)&&c(this.signature,t.signature)}validate(t){const e=f(t,this.payloadType,this.payload);return this.peerId.pubKey.verify(e,this.signature)}}const f=(t,e,i)=>{const r=s(t),o=h.encode(r.byteLength),a=h.encode(e.length),c=h.encode(i.length);return n([new Uint8Array(o),r,new Uint8Array(a),e,new Uint8Array(c),i])};d.createFromProtobuf=async t=>{const e=u.decode(t),i=await a.createFromPubKey(e.publicKey);return new d({peerId:i,payloadType:e.payloadType,payload:e.payload,signature:e.signature})},d.seal=async(t,e)=>{const i=t.domain,r=t.codec,n=t.marshal(),s=f(i,r,n),o=await e.privKey.sign(s);return new d({peerId:e,payloadType:r,payload:n,signature:o})},d.openAndCertify=async(t,e)=>{const i=await d.createFromProtobuf(t);if(!await i.validate(e))throw r(new Error("envelope signature is not valid for the given domain"),l.ERR_SIGNATURE_NOT_VALID);return i},t.exports=d},77854:t=>{"use strict";const e=Uint8Array.from([3,1]);t.exports={ENVELOPE_DOMAIN_PEER_RECORD:"libp2p-peer-record",ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:e}},61131:(t,e,i)=>{"use strict";const{Multiaddr:r}=i(46584),n=i(88785),s=i(52942),{PeerRecord:o}=i(81183),{ENVELOPE_DOMAIN_PEER_RECORD:a,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:h}=i(77854);class c{constructor({peerId:t,multiaddrs:e=[],seqNumber:i=Date.now()}){this.domain=a,this.codec=h,this.peerId=t,this.multiaddrs=e,this.seqNumber=i,this._marshal=void 0}marshal(){return this._marshal||(this._marshal=o.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map((t=>({multiaddr:t.bytes})))}).finish()),this._marshal}equals(t){return t instanceof c&&!!this.peerId.equals(t.peerId)&&this.seqNumber===t.seqNumber&&!!s(this.multiaddrs,t.multiaddrs)}}c.createFromProtobuf=t=>{const e=o.decode(t),i=n.createFromBytes(e.peerId),s=(e.addresses||[]).map((t=>new r(t.multiaddr))),a=Number(e.seq);return new c({peerId:i,multiaddrs:s,seqNumber:a})},c.DOMAIN=a,t.exports=c},81183:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-peer-record"]||(r.roots["libp2p-peer-record"]={});a.PeerRecord=function(){function t(t){if(this.addresses=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.peerId=o.newBuffer([]),t.prototype.seq=o.Long?o.Long.fromBits(0,0,!0):0,t.prototype.addresses=o.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.peerId&&Object.hasOwnProperty.call(t,"peerId")&&e.uint32(10).bytes(t.peerId),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&e.uint32(16).uint64(t.seq),null!=t.addresses&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)a.PeerRecord.AddressInfo.encode(t.addresses[i],e.uint32(26).fork()).ldelim();return e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.PeerRecord;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.peerId=t.bytes();break;case 2:r.seq=t.uint64();break;case 3:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(a.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(7&s)}}return r},t.fromObject=function(t){if(t instanceof a.PeerRecord)return t;var e=new a.PeerRecord;if(null!=t.peerId&&("string"==typeof t.peerId?o.base64.decode(t.peerId,e.peerId=o.newBuffer(o.base64.length(t.peerId)),0):t.peerId.length&&(e.peerId=t.peerId)),null!=t.seq&&(o.Long?(e.seq=o.Long.fromValue(t.seq)).unsigned=!0:"string"==typeof t.seq?e.seq=parseInt(t.seq,10):"number"==typeof t.seq?e.seq=t.seq:"object"==typeof t.seq&&(e.seq=new o.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");e.addresses=[];for(var i=0;i<t.addresses.length;++i){if("object"!=typeof t.addresses[i])throw TypeError(".PeerRecord.addresses: object expected");e.addresses[i]=a.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addresses=[]),e.defaults)if(e.bytes===String?i.peerId="":(i.peerId=[],e.bytes!==Array&&(i.peerId=o.newBuffer(i.peerId))),o.Long){var r=new o.Long(0,0,!0);i.seq=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else i.seq=e.longs===String?"0":0;if(null!=t.peerId&&t.hasOwnProperty("peerId")&&(i.peerId=e.bytes===String?o.base64.encode(t.peerId,0,t.peerId.length):e.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),null!=t.seq&&t.hasOwnProperty("seq")&&("number"==typeof t.seq?i.seq=e.longs===String?String(t.seq):t.seq:i.seq=e.longs===String?o.Long.prototype.toString.call(t.seq):e.longs===Number?new o.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var n=0;n<t.addresses.length;++n)i.addresses[n]=a.PeerRecord.AddressInfo.toObject(t.addresses[n],e)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.AddressInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.multiaddr=o.newBuffer([]),t.encode=function(t,e){return e||(e=s.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.PeerRecord.AddressInfo;t.pos<i;){var s=t.uint32();s>>>3==1?r.multiaddr=t.bytes():t.skipType(7&s)}return r},t.fromObject=function(t){if(t instanceof a.PeerRecord.AddressInfo)return t;var e=new a.PeerRecord.AddressInfo;return null!=t.multiaddr&&("string"==typeof t.multiaddr?o.base64.decode(t.multiaddr,e.multiaddr=o.newBuffer(o.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.multiaddr="":(i.multiaddr=[],e.bytes!==Array&&(i.multiaddr=o.newBuffer(i.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(i.multiaddr=e.bytes===String?o.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t}(),t.exports=a},1001:(t,e,i)=>{"use strict";const r=i(31244),n=i(61131);t.exports.updateSelfPeerRecord=async function(t){const e=new n({peerId:t.peerId,multiaddrs:t.multiaddrs}),i=await r.seal(e,t.peerId);await t.peerStore.addressBook.consumePeerRecord(i)}},28861:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:registrar"),{error:r("libp2p:registrar:err")}),s=i(32114),{codes:{ERR_INVALID_PARAMETERS:o}}=i(23416),a=i(7609);t.exports=class{constructor({peerStore:t,connectionManager:e}){this.peerStore=t,this.connectionManager=e,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(t){this._handle=t}getConnection(t){return this.connectionManager.get(t)}async register(t){if(!a.isTopology(t))throw n.error("topology must be an instance of interfaces/topology"),s(new Error("topology must be an instance of interfaces/topology"),o);const e=(1e9*Math.random()).toString(36)+Date.now();return this.topologies.set(e,t),await t.setRegistrar(this),e}unregister(t){return this.topologies.delete(t)}_onDisconnect(t){for(const[,e]of this.topologies)e.disconnect(t.remotePeer)}}},6984:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:transports"),{error:r("libp2p:transports:err")}),s=i(13296),{codes:o}=i(23416),a=i(32114),{updateSelfPeerRecord:h}=i(1001);class c{constructor({libp2p:t,upgrader:e,faultTolerance:i=l.FATAL_ALL}){this.libp2p=t,this.upgrader=e,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=i}add(t,e,i={}){if(n("adding %s",t),!t)throw a(new Error(`Transport must have a valid key, was given '${t}'`),o.ERR_INVALID_KEY);if(this._transports.has(t))throw a(new Error("There is already a transport with this key"),o.ERR_DUPLICATE_TRANSPORT);const r=new e({...i,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(t,r),this._listenerOptions.set(t,i.listenerOptions||{}),this._listeners.has(t)||this._listeners.set(t,[])}async close(){const t=[];for(const[e,i]of this._listeners)for(n("closing listeners for %s",e);i.length;){const e=i.pop();e.removeAllListeners("listening"),e.removeAllListeners("close"),t.push(e.close())}await Promise.all(t),n("all listeners closed");for(const t of this._listeners.keys())this._listeners.set(t,[])}async dial(t,e){const i=this.transportForMultiaddr(t);if(!i)throw a(new Error(`No transport available for address ${String(t)}`),o.ERR_TRANSPORT_UNAVAILABLE);try{return await i.dial(t,e)}catch(t){throw t.code||(t.code=o.ERR_TRANSPORT_DIAL_FAILED),t}}getAddrs(){let t=[];for(const e of this._listeners.values())for(const i of e)t=[...t,...i.getAddrs()];return t}getTransports(){return this._transports.values()}transportForMultiaddr(t){for(const e of this._transports.values())if(e.filter([t]).length)return e;return null}async listen(t){if(!t||0===t.length)return void n("no addresses were provided for listening, this node is dial only");const e=[];for(const[i,r]of this._transports.entries()){const c=r.filter(t),u=[];for(const t of c){n("creating listener for %s on %s",i,t);const e=r.createListener(this._listenerOptions.get(i));this._listeners.get(i).push(e),e.on("listening",(()=>h(this.libp2p))),e.on("close",(()=>h(this.libp2p))),u.push(e.listen(t))}if(0!==u.length){if(!(await s(u)).find((t=>!0===t.isFulfilled))&&this.faultTolerance!==l.NO_FATAL)throw a(new Error(`Transport (${i}) could not listen on any available address`),o.ERR_NO_VALID_ADDRESSES)}else e.push(i)}if(e.length===this._transports.size){const t=`no valid addresses were provided for transports [${e}]`;if(this.faultTolerance===l.FATAL_ALL)throw a(new Error(t),o.ERR_NO_VALID_ADDRESSES);n(`libp2p in dial mode only: ${t}`)}}async remove(t){if(n("removing %s",t),this._listeners.has(t))for(const e of this._listeners.get(t))e.removeAllListeners("listening"),e.removeAllListeners("close"),await e.close();this._transports.delete(t),this._listeners.delete(t)}async removeAll(){const t=[];for(const e of this._transports.keys())t.push(this.remove(e));await Promise.all(t)}}const l={FATAL_ALL:0,NO_FATAL:1};c.FaultTolerance=l,t.exports=c},21003:(t,e,i)=>{"use strict";const r=i(11227),n=Object.assign(r("libp2p:upgrader"),{error:r("libp2p:upgrader:err")}),s=i(32114),o=i(8738),{Connection:a}=i(15458),h=i(88785),{pipe:c}=i(60618),l=i(99633),{codes:u}=i(23416);t.exports=class{constructor({localPeer:t,metrics:e,connectionGater:i,cryptos:r=new Map,muxers:n=new Map,onConnectionEnd:s=(()=>{}),onConnection:o=(()=>{})}){this.connectionGater=i,this.localPeer=t,this.metrics=e,this.cryptos=r,this.muxers=n,this.protector=null,this.protocols=new Map,this.onConnection=o,this.onConnectionEnd=s}async upgradeInbound(t){let e,i,r,o,a,h,c;if(await this.connectionGater.denyInboundConnection(t))throw s(new Error("The multiaddr connection is blocked by gater.acceptConnection"),u.ERR_CONNECTION_INTERCEPTED);if(this.metrics){({setTarget:h,proxy:c}=l());const e=(1e9*Math.random()).toString(36)+Date.now();h({toB58String:()=>e}),t=this.metrics.trackStream({stream:t,remotePeer:c})}n("Starting the inbound connection upgrade");let d=t;this.protector&&(d=await this.protector.protect(t));try{if(({conn:e,remotePeer:i,protocol:a}=await this._encryptInbound(this.localPeer,d,this.cryptos)),await this.connectionGater.denyInboundEncryptedConnection(i,e))throw s(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),u.ERR_CONNECTION_INTERCEPTED);this.muxers.size?({stream:r,Muxer:o}=await this._multiplexInbound(e,this.muxers)):r=e}catch(e){throw n.error("Failed to upgrade inbound connection",e),await t.close(e),e}if(await this.connectionGater.denyInboundUpgradedConnection(i,e))throw s(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),u.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(c,i),h(i)),n("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:a,direction:"inbound",maConn:t,upgradedConn:r,Muxer:o,remotePeer:i})}async upgradeOutbound(t){const e=t.remoteAddr.getPeerId();if(!e)throw s(new Error("outbound connection must have a peer id"),u.ERR_INVALID_MULTIADDR);const i=h.createFromB58String(e);if(await this.connectionGater.denyOutboundConnection(i,t))throw s(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),u.ERR_CONNECTION_INTERCEPTED);let r,o,a,c,d,f,p;if(this.metrics){({setTarget:f,proxy:p}=l());const e=(1e9*Math.random()).toString(36)+Date.now();f({toB58String:()=>e}),t=this.metrics.trackStream({stream:t,remotePeer:p})}n("Starting the outbound connection upgrade");let g=t;this.protector&&(g=await this.protector.protect(t));try{if(({conn:r,remotePeer:o,protocol:c}=await this._encryptOutbound(this.localPeer,g,i,this.cryptos)),await this.connectionGater.denyOutboundEncryptedConnection(o,r))throw s(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),u.ERR_CONNECTION_INTERCEPTED);this.muxers.size?({stream:a,Muxer:d}=await this._multiplexOutbound(r,this.muxers)):a=r}catch(e){throw n.error("Failed to upgrade outbound connection",e),await t.close(e),e}if(await this.connectionGater.denyOutboundUpgradedConnection(o,r))throw s(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),u.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(p,o),f(o)),n("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:t,upgradedConn:a,Muxer:d,remotePeer:o})}_createConnection({cryptoProtocol:t,direction:e,maConn:i,upgradedConn:r,Muxer:h,remotePeer:l}){let d,f,p;h&&(d=new h({onStream:async t=>{if(!p)return;const i=new o.Listener(t);try{const{stream:r,protocol:s}=await i.handle(Array.from(this.protocols.keys()));n("%s: incoming stream opened on %s",e,s),this.metrics&&this.metrics.trackStream({stream:r,remotePeer:l,protocol:s}),p.addStream(t,{protocol:s}),this._onStream({connection:p,stream:{...t,...r},protocol:s})}catch(t){n.error(t)}},onStreamEnd:t=>{p.removeStream(t.id)}}),f=async t=>{n("%s: starting new stream on %s",e,t);const i=d.newStream(),r=new o.Dialer(i);try{const{stream:e,protocol:n}=await r.select(t);return this.metrics&&this.metrics.trackStream({stream:e,remotePeer:l,protocol:n}),{stream:{...i,...e},protocol:n}}catch(t){throw n.error("could not create new stream",t),s(t,u.ERR_UNSUPPORTED_PROTOCOL)}},c(r,d,r).catch(n.error));const g=i.timeline;i.timeline=new Proxy(g,{set:(...t)=>(p&&"close"===t[1]&&t[2]&&!g.close&&(async()=>{try{"open"===p.stat.status&&await p.close()}catch(t){n.error(t)}finally{this.onConnectionEnd(p)}})().catch((t=>{n.error(t)})),Reflect.set(...t))}),i.timeline.upgraded=Date.now();const y=()=>{throw s(new Error("connection is not multiplexed"),u.ERR_CONNECTION_NOT_MULTIPLEXED)};return p=new a({localAddr:i.localAddr,remoteAddr:i.remoteAddr,localPeer:this.localPeer,remotePeer:l,stat:{direction:e,timeline:i.timeline,multiplexer:h&&h.multicodec,encryption:t},newStream:f||y,getStreams:()=>d?d.streams:y(),close:async()=>{await i.close(),d&&d.streams.map((t=>t.abort()))}}),this.onConnection(p),p}_onStream({connection:t,stream:e,protocol:i}){this.protocols.get(i)({connection:t,stream:e,protocol:i})}async _encryptInbound(t,e,i){const r=new o.Listener(e),a=Array.from(i.keys());n("handling inbound crypto protocol selection",a);try{const{stream:e,protocol:s}=await r.handle(a),o=i.get(s);if(n("encrypting inbound connection..."),!o)throw new Error(`no crypto module found for ${s}`);return{...await o.secureInbound(t,e),protocol:s}}catch(t){throw s(t,u.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(t,e,i,r){const a=new o.Dialer(e),h=Array.from(r.keys());n("selecting outbound crypto protocol",h);try{const{stream:e,protocol:s}=await a.select(h),o=r.get(s);if(n("encrypting outbound connection to %j",i),!o)throw new Error(`no crypto module found for ${s}`);return{...await o.secureOutbound(t,e,i),protocol:s}}catch(t){throw s(t,u.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(t,e){const i=new o.Dialer(t),r=Array.from(e.keys());n("outbound selecting muxer %s",r);try{const{stream:t,protocol:s}=await i.select(r);return n("%s selected as muxer protocol",s),{stream:t,Muxer:e.get(s)}}catch(t){throw s(t,u.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(t,e){const i=new o.Listener(t),r=Array.from(e.keys());n("inbound handling muxers %s",r);try{const{stream:t,protocol:n}=await i.handle(r);return{stream:t,Muxer:e.get(n)}}catch(t){throw s(t,u.ERR_MUXER_UNAVAILABLE)}}}},43720:t=>{t.exports=i;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function i(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function r(t){return!0===(t&&t.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=r;var n={},s={};function o(t,e){var i,r,o;return e?(o=0<=(t>>>=0)&&t<256)&&(r=s[t])?r:(i=h(t,(0|t)<0?-1:0,!0),o&&(s[t]=i),i):(o=-128<=(t|=0)&&t<128)&&(r=n[t])?r:(i=h(t,t<0?-1:0,!1),o&&(n[t]=i),i)}function a(t,e){if(isNaN(t))return e?m:y;if(e){if(t<0)return m;if(t>=f)return x}else{if(t<=-p)return E;if(t+1>=p)return _}return t<0?a(-t,e).neg():h(t%d|0,t/d|0,e)}function h(t,e,r){return new i(t,e,r)}i.fromInt=o,i.fromNumber=a,i.fromBits=h;var c=Math.pow;function l(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return y;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(t.substring(1),e,i).neg();for(var n=a(c(i,8)),s=y,o=0;o<t.length;o+=8){var h=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+h),i);if(h<8){var d=a(c(i,h));s=s.mul(d).add(a(u))}else s=(s=s.mul(n)).add(a(u))}return s.unsigned=e,s}function u(t,e){return"number"==typeof t?a(t,e):"string"==typeof t?l(t,e):h(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}i.fromString=l,i.fromValue=u;var d=4294967296,f=d*d,p=f/2,g=o(1<<24),y=o(0);i.ZERO=y;var m=o(0,!0);i.UZERO=m;var v=o(1);i.ONE=v;var b=o(1,!0);i.UONE=b;var w=o(-1);i.NEG_ONE=w;var _=h(-1,2147483647,!1);i.MAX_VALUE=_;var x=h(-1,-1,!0);i.MAX_UNSIGNED_VALUE=x;var E=h(0,-2147483648,!1);i.MIN_VALUE=E;var S=i.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var e=a(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=a(c(t,6),this.unsigned),s=this,o="";;){var h=s.div(n),l=(s.sub(h.mul(n)).toInt()>>>0).toString(t);if((s=h).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return r(t)||(t=u(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(r(t)||(t=u(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(v)},S.neg=S.negate,S.add=function(t){r(t)||(t=u(t));var e=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,c=t.low>>>16,l=0,d=0,f=0,p=0;return f+=(p+=s+(65535&t.low))>>>16,d+=(f+=n+c)>>>16,l+=(d+=i+a)>>>16,l+=e+o,h((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(t){return r(t)||(t=u(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return y;if(r(t)||(t=u(t)),e)return h(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return y;if(this.eq(E))return t.isOdd()?E:y;if(t.eq(E))return this.isOdd()?E:y;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return a(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,n=65535&this.high,s=this.low>>>16,o=65535&this.low,c=t.high>>>16,l=65535&t.high,d=t.low>>>16,f=65535&t.low,p=0,m=0,v=0,b=0;return v+=(b+=o*f)>>>16,m+=(v+=s*f)>>>16,v&=65535,m+=(v+=o*d)>>>16,p+=(m+=n*f)>>>16,m&=65535,p+=(m+=s*d)>>>16,m&=65535,p+=(m+=o*l)>>>16,p+=i*f+n*d+s*l+o*c,h((v&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(r(t)||(t=u(t)),t.isZero())throw Error("division by zero");var i,n,s;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?h((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:y;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return m;if(t.gt(this.shru(1)))return b;s=m}else{if(this.eq(E))return t.eq(v)||t.eq(w)?E:t.eq(E)?v:(i=this.shr(1).div(t).shl(1)).eq(y)?t.isNegative()?v:w:(n=this.sub(t.mul(i)),s=i.add(n.div(t)));if(t.eq(E))return this.unsigned?m:y;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=y}for(n=this;n.gte(t);){i=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(i)/Math.LN2),l=o<=48?1:c(2,o-48),d=a(i),f=d.mul(t);f.isNegative()||f.gt(n);)f=(d=a(i-=l,this.unsigned)).mul(t);d.isZero()&&(d=v),s=s.add(d),n=n.sub(f)}return s},S.div=S.divide,S.modulo=function(t){return r(t)||(t=u(t)),e?h((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return h(~this.low,~this.high,this.unsigned)},S.and=function(t){return r(t)||(t=u(t)),h(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return r(t)||(t=u(t)),h(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return r(t)||(t=u(t)),h(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?h(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):h(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?h(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):h(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?h(this.low>>>t|e<<32-t,e>>>t,this.unsigned):h(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},i.fromBytes=function(t,e,r){return r?i.fromBytesLE(t,e):i.fromBytesBE(t,e)},i.fromBytesLE=function(t,e){return new i(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},i.fromBytesBE=function(t,e){return new i(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},82303:(t,e,i)=>{var r=i(48764).Buffer;function n(t){return void 0!==t&&""!==t}function s(t,e){return Object.hasOwnProperty.call(t,e)}function o(t,e){return Object.hasOwnProperty.call(t,e)&&e}e.compare=function(t,e){if(r.isBuffer(t)){for(var i=Math.min(t.length,e.length),n=0;n<i;n++){var s=t[n]-e[n];if(s)return s}return t.length-e.length}return t<e?-1:t>e?1:0};var a=e.lowerBoundKey=function(t){return o(t,"gt")||o(t,"gte")||o(t,"min")||(t.reverse?o(t,"end"):o(t,"start"))||void 0},h=e.lowerBound=function(t,e){var i=a(t);return i?t[i]:e},c=e.lowerBoundInclusive=function(t){return!s(t,"gt")},l=e.upperBoundInclusive=function(t){return!s(t,"lt")},u=e.lowerBoundExclusive=function(t){return!c(t)},d=e.upperBoundExclusive=function(t){return!l(t)},f=e.upperBoundKey=function(t){return o(t,"lt")||o(t,"lte")||o(t,"max")||(t.reverse?o(t,"start"):o(t,"end"))||void 0},p=e.upperBound=function(t,e){var i=f(t);return i?t[i]:e};function g(t){return t}e.start=function(t,e){return t.reverse?p(t,e):h(t,e)},e.end=function(t,e){return t.reverse?h(t,e):p(t,e)},e.startInclusive=function(t){return t.reverse?l(t):c(t)},e.endInclusive=function(t){return t.reverse?c(t):l(t)},e.toLtgt=function(t,i,r,n,o){i=i||{},r=r||g;var a=arguments.length>3,h=e.lowerBoundKey(t),c=e.upperBoundKey(t);return h?"gt"===h?i.gt=r(t.gt,!1):i.gte=r(t[h],!1):a&&(i.gte=r(n,!1)),c?"lt"===c?i.lt=r(t.lt,!0):i.lte=r(t[c],!0):a&&(i.lte=r(o,!0)),null!=t.reverse&&(i.reverse=!!t.reverse),s(i,"max")&&delete i.max,s(i,"min")&&delete i.min,s(i,"start")&&delete i.start,s(i,"end")&&delete i.end,i},e.contains=function(t,i,r){r=r||e.compare;var s=h(t);if(n(s)&&((o=r(i,s))<0||0===o&&u(t)))return!1;var o,a=p(t);return!n(a)||!((o=r(i,a))>0||0===o&&d(t))},e.filter=function(t,i){return function(r){return e.contains(t,r,i)}}},29175:(t,e,i)=>{"use strict";const{Multiaddr:r}=i(46584),n=P("dns4"),s=P("dns6"),o=P("dnsaddr"),a=R(P("dns"),o,n,s),h=R(P("ip4"),P("ip6")),c=R(k(h,P("tcp")),k(a,P("tcp"))),l=k(h,P("udp")),u=k(l,P("utp")),d=k(l,P("quic")),f=R(k(c,P("ws")),k(a,P("ws"))),p=R(k(c,P("wss")),k(a,P("wss"))),g=R(k(c,P("http")),k(h,P("http")),k(a,P("http"))),y=R(k(c,P("https")),k(h,P("https")),k(a,P("https"))),m=R(k(f,P("p2p-webrtc-star"),P("p2p")),k(p,P("p2p-webrtc-star"),P("p2p")),k(f,P("p2p-webrtc-star")),k(p,P("p2p-webrtc-star"))),v=R(k(f,P("p2p-websocket-star"),P("p2p")),k(p,P("p2p-websocket-star"),P("p2p")),k(f,P("p2p-websocket-star")),k(p,P("p2p-websocket-star"))),b=R(k(g,P("p2p-webrtc-direct"),P("p2p")),k(y,P("p2p-webrtc-direct"),P("p2p")),k(g,P("p2p-webrtc-direct")),k(y,P("p2p-webrtc-direct"))),w=R(f,p,g,y,m,b,c,u,d,a),_=R(k(w,P("p2p-stardust"),P("p2p")),k(w,P("p2p-stardust"))),x=R(k(w,P("p2p")),m,b,P("p2p")),E=R(k(x,P("p2p-circuit"),x),k(x,P("p2p-circuit")),k(P("p2p-circuit"),x),k(w,P("p2p-circuit")),k(P("p2p-circuit"),w),P("p2p-circuit")),S=()=>R(k(E,S),E),T=S(),A=R(k(T,x,T),k(x,T),k(T,x),T,x);function C(t){return function(e){if(!r.isMultiaddr(e))try{e=new r(e)}catch(t){return!1}const i=t(e.protoNames());return null!==i&&(!0===i||!1===i?i:0===i.length)}}function k(...t){function e(e){if(e.length<t.length)return null;let i=e;return t.some((t=>(i="function"==typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(i)&&(e=i),null===i))),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:C(e),partialMatch:e}}function R(...t){function e(e){let i=null;return t.some((t=>{const r="function"==typeof t?t().partialMatch(e):t.partialMatch(e);return!!r&&(i=r,!0)})),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:C(e),partialMatch:e}}function P(t){const e=t;return{toString:function(){return e},matches:function(t){let i;if("string"==typeof t||t instanceof Uint8Array)try{i=new r(t)}catch(t){return!1}else i=t;const n=i.protoNames();return 1===n.length&&n[0]===e},partialMatch:function(t){return 0===t.length?null:t[0]===e?t.slice(1):null}}}t.exports={DNS:a,DNS4:n,DNS6:s,DNSADDR:o,IP:h,TCP:c,UDP:l,QUIC:d,UTP:u,HTTP:g,HTTPS:y,WebSockets:f,WebSocketsSecure:p,WebSocketStar:v,WebRTCStar:m,WebRTCDirect:b,Reliable:w,Stardust:_,Circuit:T,P2P:A,IPFS:A}},62318:(t,e,i)=>{"use strict";var r=i(35717),n=i(3349),s=i(89509).Buffer,o=new Array(16);function a(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function h(t,e){return t<<e|t>>>32-e}function c(t,e,i,r,n,s,o){return h(t+(e&i|~e&r)+n+s|0,o)+e|0}function l(t,e,i,r,n,s,o){return h(t+(e&r|i&~r)+n+s|0,o)+e|0}function u(t,e,i,r,n,s,o){return h(t+(e^i^r)+n+s|0,o)+e|0}function d(t,e,i,r,n,s,o){return h(t+(i^(e|~r))+n+s|0,o)+e|0}r(a,n),a.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,s=this._d;i=c(i,r,n,s,t[0],3614090360,7),s=c(s,i,r,n,t[1],3905402710,12),n=c(n,s,i,r,t[2],606105819,17),r=c(r,n,s,i,t[3],3250441966,22),i=c(i,r,n,s,t[4],4118548399,7),s=c(s,i,r,n,t[5],1200080426,12),n=c(n,s,i,r,t[6],2821735955,17),r=c(r,n,s,i,t[7],4249261313,22),i=c(i,r,n,s,t[8],1770035416,7),s=c(s,i,r,n,t[9],2336552879,12),n=c(n,s,i,r,t[10],4294925233,17),r=c(r,n,s,i,t[11],2304563134,22),i=c(i,r,n,s,t[12],1804603682,7),s=c(s,i,r,n,t[13],4254626195,12),n=c(n,s,i,r,t[14],2792965006,17),i=l(i,r=c(r,n,s,i,t[15],1236535329,22),n,s,t[1],4129170786,5),s=l(s,i,r,n,t[6],3225465664,9),n=l(n,s,i,r,t[11],643717713,14),r=l(r,n,s,i,t[0],3921069994,20),i=l(i,r,n,s,t[5],3593408605,5),s=l(s,i,r,n,t[10],38016083,9),n=l(n,s,i,r,t[15],3634488961,14),r=l(r,n,s,i,t[4],3889429448,20),i=l(i,r,n,s,t[9],568446438,5),s=l(s,i,r,n,t[14],3275163606,9),n=l(n,s,i,r,t[3],4107603335,14),r=l(r,n,s,i,t[8],1163531501,20),i=l(i,r,n,s,t[13],2850285829,5),s=l(s,i,r,n,t[2],4243563512,9),n=l(n,s,i,r,t[7],1735328473,14),i=u(i,r=l(r,n,s,i,t[12],2368359562,20),n,s,t[5],4294588738,4),s=u(s,i,r,n,t[8],2272392833,11),n=u(n,s,i,r,t[11],1839030562,16),r=u(r,n,s,i,t[14],4259657740,23),i=u(i,r,n,s,t[1],2763975236,4),s=u(s,i,r,n,t[4],1272893353,11),n=u(n,s,i,r,t[7],4139469664,16),r=u(r,n,s,i,t[10],3200236656,23),i=u(i,r,n,s,t[13],681279174,4),s=u(s,i,r,n,t[0],3936430074,11),n=u(n,s,i,r,t[3],3572445317,16),r=u(r,n,s,i,t[6],76029189,23),i=u(i,r,n,s,t[9],3654602809,4),s=u(s,i,r,n,t[12],3873151461,11),n=u(n,s,i,r,t[15],530742520,16),i=d(i,r=u(r,n,s,i,t[2],3299628645,23),n,s,t[0],4096336452,6),s=d(s,i,r,n,t[7],1126891415,10),n=d(n,s,i,r,t[14],2878612391,15),r=d(r,n,s,i,t[5],4237533241,21),i=d(i,r,n,s,t[12],1700485571,6),s=d(s,i,r,n,t[3],2399980690,10),n=d(n,s,i,r,t[10],4293915773,15),r=d(r,n,s,i,t[1],2240044497,21),i=d(i,r,n,s,t[8],1873313359,6),s=d(s,i,r,n,t[15],4264355552,10),n=d(n,s,i,r,t[6],2734768916,15),r=d(r,n,s,i,t[13],1309151649,21),i=d(i,r,n,s,t[4],4149444226,6),s=d(s,i,r,n,t[11],3174756917,10),n=d(n,s,i,r,t[2],718787259,15),r=d(r,n,s,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+s|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=s.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},70942:function(t,e,i){"use strict";const r=i(33310),{hasOwnProperty:n}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(t,e,i)=>Object.defineProperty(t,e,{value:i,writable:!0,enumerable:!0,configurable:!0}),a=this,h={concatArrays:!1,ignoreUndefined:!1},c=t=>{const e=[];for(const i in t)n.call(t,i)&&e.push(i);if(Object.getOwnPropertySymbols){const i=Object.getOwnPropertySymbols(t);for(const r of i)s.call(t,r)&&e.push(r)}return e};function l(t){return Array.isArray(t)?function(t){const e=t.slice(0,0);return c(t).forEach((i=>{o(e,i,l(t[i]))})),e}(t):r(t)?function(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return c(t).forEach((i=>{o(e,i,l(t[i]))})),e}(t):t}const u=(t,e,i,r)=>(i.forEach((i=>{void 0===e[i]&&r.ignoreUndefined||(i in t&&t[i]!==Object.getPrototypeOf(t)?o(t,i,d(t[i],e[i],r)):o(t,i,l(e[i])))})),t);function d(t,e,i){return i.concatArrays&&Array.isArray(t)&&Array.isArray(e)?((t,e,i)=>{let r=t.slice(0,0),s=0;return[t,e].forEach((e=>{const a=[];for(let i=0;i<e.length;i++)n.call(e,i)&&(a.push(String(i)),o(r,s++,e===t?e[i]:l(e[i])));r=u(r,e,c(e).filter((t=>!a.includes(t))),i)})),r})(t,e,i):r(e)&&r(t)?u(t,e,c(e),i):l(e)}t.exports=function(...t){const e=d(l(h),this!==a&&this||{},h);let i={_:{}};for(const n of t)if(void 0!==n){if(!r(n))throw new TypeError("`"+n+"` is not an Option Object");i=d(i,{_:n},e)}return i._}},63047:(t,e,i)=>{var r=i(13550),n=i(29931);function s(t){this.rand=t||new n.Rand}t.exports=s,s.create=function(t){return new s(t)},s.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var n=new r(this.rand.generate(i))}while(n.cmp(t)>=0);return n},s.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},s.prototype.test=function(t,e,i){var n=t.bitLength(),s=r.mont(t),o=new r(1).toRed(s);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),h=0;!a.testn(h);h++);for(var c=t.shrn(h),l=a.toRed(s);e>0;e--){var u=this._randrange(new r(2),a);i&&i(u);var d=u.toRed(s).redPow(c);if(0!==d.cmp(o)&&0!==d.cmp(l)){for(var f=1;f<h;f++){if(0===(d=d.redSqr()).cmp(o))return!1;if(0===d.cmp(l))break}if(f===h)return!1}}return!0},s.prototype.getDivisor=function(t,e){var i=t.bitLength(),n=r.mont(t),s=new r(1).toRed(n);e||(e=Math.max(1,i/48|0));for(var o=t.subn(1),a=0;!o.testn(a);a++);for(var h=t.shrn(a),c=o.toRed(n);e>0;e--){var l=this._randrange(new r(2),o),u=t.gcd(l);if(0!==u.cmpn(1))return u;var d=l.toRed(n).redPow(h);if(0!==d.cmp(s)&&0!==d.cmp(c)){for(var f=1;f<a;f++){if(0===(d=d.redSqr()).cmp(s))return d.fromRed().subn(1).gcd(t);if(0===d.cmp(c))break}if(f===a)return(d=d.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},79746:t=>{function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},34504:(t,e)=>{"use strict";var i=e;function r(t){return 1===t.length?"0"+t:t}function n(t){for(var e="",i=0;i<t.length;i++)e+=r(t[i].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var n=t.charCodeAt(r),s=n>>8,o=255&n;s?i.push(s,o):i.push(o)}return i},i.zero2=r,i.toHex=n,i.encode=function(t,e){return"hex"===e?n(t):t}},13349:(t,e,i)=>{const r=i(17187).EventEmitter,{nanoid:n}=i(64296),{WORKER_REQUEST_READ_LOCK:s,WORKER_RELEASE_READ_LOCK:o,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:h,WORKER_RELEASE_WRITE_LOCK:c,MASTER_GRANT_WRITE_LOCK:l}=i(45129),u=i(10815),d=(t,e,i,r,n)=>(s,o)=>{if(!o||!o.data||o.data.type!==i)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.emit(e,a.name,(()=>(s.postMessage({type:n,name:a.name,identifier:a.identifier}),new Promise((t=>{const e=i=>{if(!i||!i.data)return;const n={type:i.data.type,name:i.data.name,identifier:i.data.identifier};n&&n.type===r&&n.identifier===a.identifier&&(s.removeEventListener("message",e),t())};s.addEventListener("message",e)})))))},f=(t,e,i,r)=>()=>{const s=n();return globalThis.postMessage({type:e,identifier:s,name:t}),new Promise((e=>{const n=o=>{if(!o||!o.data)return;const a={type:o.data.type,identifier:o.data.identifier};a&&a.type===i&&a.identifier===s&&(globalThis.removeEventListener("message",n),e((()=>{globalThis.postMessage({type:r,identifier:s,name:t})})))};globalThis.addEventListener("message",n)}))},p={singleProcess:!1};t.exports=t=>{if(t=Object.assign({},p,t),globalThis.document||t.singleProcess){const t=new r;return u.addEventListener("message",d(t,"requestReadLock",s,o,a)),u.addEventListener("message",d(t,"requestWriteLock",h,c,l)),t}return{isWorker:!0,readLock:t=>f(t,s,a,o),writeLock:t=>f(t,h,l,c)}}},45129:t=>{t.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},86481:(t,e,i)=>{const r=i(62153),n=i(13349),{default:s}=i(45860),{timeout:o}=i(54501),a=i(10815),h={};let c;function l(t,e){let i;const r=new Promise((t=>{i=t}));return t.add((()=>o(new Promise((t=>{i((()=>{t()}))})),e.timeout))),r}const u={concurrency:1/0,timeout:846e5,global:i.g,singleProcess:!1};t.exports=(t,e)=>(e||(e={}),"object"==typeof t&&(e=t,t="lock"),t||(t="lock"),e=Object.assign({},u,e),c||(c=r(e)||n(e),c.isWorker||(c.on("requestReadLock",((t,e)=>{h[t]&&h[t].readLock().then((t=>e().finally((()=>t()))))})),c.on("requestWriteLock",(async(t,e)=>{h[t]&&h[t].writeLock().then((t=>e().finally((()=>t()))))})))),h[t]||(h[t]=((t,e)=>{if(c.isWorker)return{readLock:c.readLock(t,e),writeLock:c.writeLock(t,e)};const i=new s({concurrency:1});let r=null;return{readLock:()=>{if(r)return l(r,e);r=new s({concurrency:e.concurrency,autoStart:!1});const t=r,n=l(r,e);return i.add((()=>(t.start(),t.onIdle().then((()=>{r===t&&(r=null)}))))),n},writeLock:()=>(r=null,l(i,e))}})(t,e)),h[t]),t.exports.Worker=function(t,e){let r;e=e||i.g.Worker;try{r=new e(t)}catch(i){i.message.includes("not a constructor")&&(r=e(t))}if(!r)throw new Error("Could not create Worker from",e);return a(r),r}},62153:(t,e,i)=>{var r=i(34155);const n=i(17187).EventEmitter,{nanoid:s}=i(64296),{WORKER_REQUEST_READ_LOCK:o,WORKER_RELEASE_READ_LOCK:a,MASTER_GRANT_READ_LOCK:h,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:l,MASTER_GRANT_WRITE_LOCK:u}=i(45129);let d;const f=(t,e,i,r,n)=>(s,o)=>{o&&o.type===i&&t.emit(e,o.name,(()=>(s.send({type:n,name:o.name,identifier:o.identifier}),new Promise((t=>{const e=i=>{i&&i.type===r&&i.identifier===o.identifier&&(s.removeListener("message",e),t())};s.on("message",e)})))))},p=(t,e,i,n)=>()=>{const o=s();return r.send({type:e,identifier:o,name:t}),new Promise((e=>{const s=a=>{a&&a.type===i&&a.identifier===o&&(r.removeListener("message",s),e((()=>{r.send({type:n,identifier:o,name:t})})))};r.on("message",s)}))};t.exports=t=>{try{if(d=i(21724),!Object.keys(d).length)return}catch(t){return}if(d.isMaster||t.singleProcess){const t=new n;return d.on("message",f(t,"requestReadLock",o,a,h)),d.on("message",f(t,"requestWriteLock",c,l,u)),t}return{isWorker:!0,readLock:t=>p(t,o,h,a),writeLock:t=>p(t,c,u,l)}}},57824:t=>{var e=1e3,i=60*e,r=60*i,n=24*r;function s(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}t.exports=function(t,o){o=o||{};var a,h,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&isFinite(t))return o.long?(a=t,(h=Math.abs(a))>=n?s(a,h,n,"day"):h>=r?s(a,h,r,"hour"):h>=i?s(a,h,i,"minute"):h>=e?s(a,h,e,"second"):a+" ms"):function(t){var s=Math.abs(t);return s>=n?Math.round(t/n)+"d":s>=r?Math.round(t/r)+"h":s>=i?Math.round(t/i)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},95700:(t,e,i)=>{const{Multiaddr:r}=i(46584),n=(t,e)=>e,s={ip4:n,ip6:(t,e,i,r)=>1===r.length&&"ip6"===r[0].protocol?e:`[${e}]`,tcp:(t,e,i,r,n)=>r.some((t=>["http","https","ws","wss"].includes(t.protocol)))?`${t}:${e}`:((t,e,i,r)=>{if(r&&!1===r.assumeHttp)return`tcp://${t}:${e}`;let n="tcp",s=`:${e}`;return"tcp"===i[i.length-1].protocol&&(n="443"===e?"https":"http",s="443"===e||"80"===e?"":s),`${n}://${t}${s}`})(t,e,r,n),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:n,dns4:n,dns6:n,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};t.exports=(t,e)=>{const i=new r(t),n=t.toString().split("/").slice(1);return i.tuples().map((t=>({protocol:n.shift(),content:t[1]?n.shift():null}))).reduce(((t,i,r,n)=>{const o=s[i.protocol];if(!o)throw new Error(`Unsupported protocol ${i.protocol}`);return o(t,i.content,r,n,e)}),"")}},18190:(t,e,i)=>{"use strict";const r=i(99918),n=i(89768),s=i(94676),{concat:o}=i(20605),{toString:a}=i(92263);function h(t){const e=[],i=t.split("/").slice(1);if(1===i.length&&""===i[0])return[];for(let r=0;r<i.length;r++){const s=i[r],o=n(s);if(0!==o.size){if(r++,r>=i.length)throw b("invalid address: "+t);if(o.path){e.push([s,v(i.slice(r).join("/"))]);break}e.push([s,i[r]])}else e.push([s])}return e}function c(t){const e=[];return t.map((t=>{const i=w(t);return e.push(i.name),t.length>1&&e.push(t[1]),null})),v(e.join("/"))}function l(t){return t.map((t=>{Array.isArray(t)||(t=[t]);const e=w(t);return t.length>1?[e.code,r.toBytes(e.code,t[1])]:[e.code]}))}function u(t){return t.map((t=>{const e=w(t);return t[1]?[e.code,r.toString(e.code,t[1])]:[e.code]}))}function d(t){return y(o(t.map((t=>{const e=w(t);let i=Uint8Array.from(s.encode(e.code));return t.length>1&&(i=o([i,t[1]])),i}))))}function f(t,e){return t.size>0?t.size/8:0===t.size?0:s.decode(e)+s.decode.bytes}function p(t){const e=[];let i=0;for(;i<t.length;){const r=s.decode(t,i),o=s.decode.bytes,h=f(n(r),t.slice(i+o));if(0===h){e.push([r]),i+=o;continue}const c=t.slice(i+o,i+o+h);if(i+=h+o,i>t.length)throw b("Invalid address Uint8Array: "+a(t,"base16"));e.push([r,c])}return e}function g(t){return d(l(h(t=v(t))))}function y(t){const e=m(t);if(e)throw e;return Uint8Array.from(t)}function m(t){try{p(t)}catch(t){return t}}function v(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function b(t){return new Error("Error parsing address: "+t)}function w(t){return n(t[0])}t.exports={stringToStringTuples:h,stringTuplesToString:c,tuplesToStringTuples:u,stringTuplesToTuples:l,bytesToTuples:p,tuplesToBytes:d,bytesToString:function(t){return c(u(p(t)))},stringToBytes:g,fromString:function(t){return g(t)},fromBytes:y,validateBytes:m,isValidBytes:function(t){return void 0===m(t)},cleanPath:v,ParseError:b,protoFromTuple:w,sizeForAddr:f}},99918:(t,e,i)=>{"use strict";const r=i(33692),n=i(89768),{CID:s}=i(81362),{base32:o}=i(22817),{base58btc:a}=i(99086),h=i(28924),c=i(94676),{toString:l}=i(92263),{fromString:u}=i(52217),{concat:d}=i(20605);function f(t,e){return e instanceof Uint8Array?f.toString(t,e):f.toBytes(t,e)}function p(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function g(t){return new DataView(t.buffer).getUint16(t.byteOffset)}t.exports=f,f.toString=function(t,e){switch(n(t).code){case 4:case 41:return function(t){const e=r.toString(t);if(!e||!r.isIP(e))throw new Error("invalid ip address");return e}(e);case 6:case 273:case 33:case 132:return g(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(t){const e=c.decode(t);if((t=t.slice(c.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return l(t)}(e);case 421:return function(t){const e=c.decode(t),i=t.slice(c.decode.bytes);if(i.length!==e)throw new Error("inconsistent lengths");return l(i,"base58btc")}(e);case 444:case 445:return function(t){const e=t.slice(0,t.length-2),i=t.slice(t.length-2);return l(e,"base32")+":"+g(i)}(e);default:return l(e,"base16")}},f.toBytes=function(t,e){switch(n(t).code){case 4:case 41:return function(t){if(!r.isIP(t))throw new Error("invalid ip address");return r.toBytes(t)}(e);case 6:case 273:case 33:case 132:return p(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(t){const e=u(t),i=Uint8Array.from(c.encode(e.length));return d([i,e],i.length+e.length)}(e);case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?h.decode(a.decode(`z${t}`)).bytes:s.parse(t).multihash.bytes;const i=Uint8Array.from(c.encode(e.length));return d([i,e],i.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(16!==e[0].length)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");const i=o.decode("b"+e[0]),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const n=p(r);return d([i,n],i.length+n.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(56!==e[0].length)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");const i=o.decode("b"+e[0]),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const n=p(r);return d([i,n],i.length+n.length)}(e);default:return u(e,"base16")}}},46584:(t,e,i)=>{"use strict";const r=i(18190),n=i(89768),s=i(94676),{CID:o}=i(81362),{base58btc:a}=i(99086),h=i(32114),c=Symbol.for("nodejs.util.inspect.custom"),{toString:l}=i(92263),{equals:u}=i(19588),d=new Map,f=Symbol.for("@multiformats/js-multiaddr/multiaddr");class p{constructor(t){if(null==t&&(t=""),Object.defineProperty(this,f,{value:!0}),t instanceof Uint8Array)this.bytes=r.fromBytes(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=r.fromString(t)}else{if(!p.isMultiaddr(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.fromBytes(t.bytes)}}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const t={},e=this.toString().split("/");return t.family="ip4"===e[1]?4:6,t.host=e[2],t.transport=e[3],t.port=parseInt(e[4]),t}protos(){return this.protoCodes().map((t=>Object.assign({},n(t))))}protoCodes(){const t=[],e=this.bytes;let i=0;for(;i<e.length;){const o=s.decode(e,i),a=s.decode.bytes,h=n(o);i+=r.sizeForAddr(h,e.slice(i+a))+a,t.push(o)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){const t=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(t)}encapsulate(t){return t=new p(t),new p(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),i=this.toString(),r=i.lastIndexOf(e);if(r<0)throw new Error("Address "+this+" does not contain subaddress: "+t);return new p(i.slice(0,r))}decapsulateCode(t){const e=this.tuples();for(let i=e.length-1;i>=0;i--)if(e[i][0]===t)return new p(r.tuplesToBytes(e.slice(0,i)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===n.names.ipfs.code)),e=t.pop();if(e&&e[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?l(a.decode(`z${t}`),"base58btc"):l(o.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!!n(t[0]).path))[0][1],t||(t=null)}catch(e){t=null}return t}equals(t){return u(this.bytes,t.bytes)}async resolve(){const t=this.protos().find((t=>t.resolvable));if(!t)return[this];const e=d.get(t.name);if(!e)throw h(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await e(this)).map((t=>new p(t)))}nodeAddress(){const t=this.protoCodes(),e=this.protoNames(),i=this.toString().split("/").slice(1);if(i.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==t[0]&&41!==t[0]&&54!==t[0]&&55!==t[0])throw new Error(`no protocol with name: "'${e[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==i[2]&&"udp"!==i[2])throw new Error(`no protocol with name: "'${e[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===t[0]||55===t[0]?6:4,address:i[1],port:parseInt(i[3])}}isThinWaistAddress(t){const e=(t||this).protos();return!(2!==e.length||4!==e[0].code&&41!==e[0].code||6!==e[1].code&&273!==e[1].code)}static fromNodeAddress(t,e){if(!t)throw new Error("requires node address object");if(!e)throw new Error("requires transport protocol");let i;switch(t.family){case 4:i="ip4";break;case 6:i="ip6";break;default:throw Error(`Invalid addr family. Got '${t.family}' instead of 4 or 6`)}return new p("/"+[i,t.address,e,t.port].join("/"))}static isName(t){return!!p.isMultiaddr(t)&&t.protos().some((t=>t.resolvable))}static isMultiaddr(t){return t instanceof p||Boolean(t&&t[f])}[c](){return"<Multiaddr "+l(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+l(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}}p.protocols=n,p.resolvers=d,t.exports={Multiaddr:p,multiaddr:function(t){return new p(t)},protocols:n,resolvers:d}},33692:(t,e,i)=>{"use strict";const r=i(5003),{toString:n}=i(92263),s=r,o=r.v4,a=r.v6,h=function(t,e,i){let r;if(i=~~i,o(t))r=e||new Uint8Array(i+4),t.split(/\./g).map((function(t){r[i++]=255&parseInt(t,10)}));else if(a(t)){const s=t.split(":",8);let a;for(a=0;a<s.length;a++){let t;o(s[a])&&(t=h(s[a]),s[a]=n(t.slice(0,2),"base16")),t&&++a<8&&s.splice(a,0,n(t.slice(2,4),"base16"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(a=0;a<s.length&&""!==s[a];a++);const t=[a,"1"];for(a=9-s.length;a>0;a--)t.push("0");s.splice.apply(s,t)}for(r=e||new Uint8Array(i+16),a=0;a<s.length;a++){const t=parseInt(s[a],16);r[i++]=t>>8&255,r[i++]=255&t}}if(!r)throw Error("Invalid ip address: "+t);return r};t.exports={isIP:s,isV4:o,isV6:a,toBytes:h,toString:function(t,e,i){e=~~e,i=i||t.length-e;const r=[];let n;const s=new DataView(t.buffer);if(4===i){for(let n=0;n<i;n++)r.push(t[e+n]);n=r.join(".")}else if(16===i){for(let t=0;t<i;t+=2)r.push(s.getUint16(e+t).toString(16));n=r.join(":"),n=n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),n=n.replace(/:{3,4}/,"::")}return n}}},89768:t=>{"use strict";function e(t){if("number"==typeof t){if(e.codes[t])return e.codes[t];throw new Error("no protocol with code: "+t)}if("string"==typeof t){if(e.names[t])return e.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}const i=-1;function r(t,e,i,r,n){return{code:t,size:e,name:i,resolvable:Boolean(r),path:Boolean(n)}}e.lengthPrefixedVarSize=i,e.V=i,e.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,i,"ip6zone"],[53,i,"dns","resolvable"],[54,i,"dns4","resolvable"],[55,i,"dns6","resolvable"],[56,i,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,i,"unix",!1,"path"],[421,i,"ipfs"],[421,i,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,i,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,i,"memory"]],e.names={},e.codes={},e.table.map((t=>{const i=r.apply(null,t);return e.codes[i.code]=i,e.names[i.name]=i,null})),e.object=r,t.exports=e},56557:(t,e,i)=>{"use strict";const r=i(926);t.exports=r},39004:(t,e,i)=>{"use strict";const r=i(89768),{code:n}=r("dnsaddr");t.exports={dnsaddrResolver:async function(t){const e=new(i(56557)),r=t.getPeerId(),[,s]=t.stringTuples().find((([t])=>t===n))||[];let o=(await e.resolveTxt(`_dnsaddr.${s}`)).flat().map((t=>t.split("=")[1]));return r&&(o=o.filter((t=>t.includes(r)))),o}}},48506:(t,e)=>{"use strict";e.PROTOCOL_ID="/multistream/1.0.0"},43868:(t,e,i)=>{"use strict";const r=i(11227),n=i(9668),s=i(60878),o=i(52261),{PROTOCOL_ID:a}=i(48506),h=Object.assign(r("mss:handle"),{error:r("mss:handle:error")});t.exports=async function(t,e,i){e=Array.isArray(e)?e:[e];const{writer:r,reader:c,rest:l,stream:u}=o(t);for(;;){const t=(await s.read(c,i)).toString();if(h('read "%s"',t),t!==a){if(e.includes(t))return s.write(r,t),h('respond with "%s" for "%s"',t,t),l(),{stream:u,protocol:t};"ls"!==t?(s.write(r,"na"),h('respond with "na" for "%s"',t)):(s.write(r,new n(e.map((t=>s.encode(t))))),h('respond with "%s" for %s',e,t))}else h('respond with "%s" for "%s"',a,t),s.write(r,a)}}},8738:(t,e,i)=>{"use strict";const r=i(27578),n=i(43868),s=i(77372),{PROTOCOL_ID:o}=i(48506);e.PROTOCOL_ID=o;class a{constructor(t){this._stream=t,this._shaken=!1}async _handshake(t){if(this._shaken)return;const{stream:e}=await r(this._stream,o,void 0,t);this._stream=e,this._shaken=!0}}e.Dialer=class extends a{select(t,e){return r(this._stream,t,this._shaken?void 0:o,e)}async ls(t){await this._handshake(t);const e=await s(this._stream,t),{stream:i,protocols:r}=e;return this._stream=i,r}},e.Listener=class extends a{handle(t,e){return n(this._stream,t,e)}}},77372:(t,e,i)=>{"use strict";const r=i(53469),n=i(11227),s=i(60878),o=i(52261),a=i(48963),{pipe:h}=i(60618),c=Object.assign(n("mss:ls"),{error:n("mss:ls:error")});t.exports=async function(t,e){const{reader:i,writer:n,rest:l,stream:u}=o(t);c('write "ls"'),s.write(n,"ls"),l();const d=await s.read(i,e),f=r([d]),p=[];return await h(f,a.decode(),(async t=>{for await(const e of t)p.push(e.shallowSlice(0,-1).toString())})),{stream:u,protocols:p}}},60878:(t,e,i)=>{"use strict";const r=i(9668),n=i(48963),{pipe:s}=i(60618),o=i(32114),{fromString:a}=i(52217),h=i(72262),{source:c}=i(61623),l=a("\n");function u(t){return n.encode.single(new r([t,l]))}t.exports={encode:u,write:function(t,e){t.push(u(e))},writeAll:async function(t,e){t.push(e.reduce(((t,e)=>t.append(u(e))),new r))},read:async function(t,e){let i=1;const r={[Symbol.asyncIterator](){return this},next:()=>t.next(i)};let a=r;e&&e.signal&&(a=c(r,e.signal));const u=await s(a,n.decode({onLength:t=>{i=t}}),h);if(u.get(u.length-1)!==l[0])throw o(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return u.shallowSlice(0,-1)}}},27578:(t,e,i)=>{"use strict";const r=i(11227),n=i(32114),s=i(60878),o=i(52261),a=Object.assign(r("mss:select"),{error:r("mss:select:error")});t.exports=async function(t,e,i,r){e=Array.isArray(e)?[...e]:[e];const{reader:h,writer:c,rest:l,stream:u}=o(t),d=e.shift();if(!d)throw new Error("At least one protocol must be specified");i?(a('select: write ["%s", "%s"]',i,d),s.writeAll(c,[i,d])):(a('select: write "%s"',d),s.write(c,d));let f=(await s.read(h,r)).toString();if(a('select: read "%s"',f),f===i&&(f=(await s.read(h,r)).toString(),a('select: read "%s"',f)),f===d)return l(),{stream:u,protocol:d};for(const t of e){a('select: write "%s"',t),s.write(c,t);const e=(await s.read(h,r)).toString();if(a('select: read "%s" for "%s"',e,t),e===t)return l(),{stream:u,protocol:t}}throw l(),n(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}},40469:(t,e,i)=>{t.exports=i(18027)},18027:function(t,e){!function(i,r){"use strict";var n={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(t){if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return!1;for(var e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)return!1;return!0}function o(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function a(t,e){return t<<e|t>>>32-e}function h(t){return t=o(t^=t>>>16,2246822507),(t=o(t^=t>>>13,3266489909))^t>>>16}function c(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var i=[0,0,0,0];return i[3]+=t[3]+e[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=t[2]+e[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=t[1]+e[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=t[0]+e[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]}function l(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var i=[0,0,0,0];return i[3]+=t[3]*e[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=t[2]*e[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=t[3]*e[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=t[1]*e[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=t[2]*e[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=t[3]*e[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]}function u(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function d(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function f(t,e){return[t[0]^e[0],t[1]^e[1]]}function p(t){return t=f(t,[0,t[0]>>>1]),t=f(t=l(t,[4283543511,3981806797]),[0,t[0]>>>1]),f(t=l(t,[3301882366,444984403]),[0,t[0]>>>1])}n.x86.hash32=function(t,e){if(n.inputValidation&&!s(t))return r;e=e||0;for(var i=t.length%4,c=t.length-i,l=e,u=0,d=3432918353,f=461845907,p=0;p<c;p+=4)u=o(u=t[p]|t[p+1]<<8|t[p+2]<<16|t[p+3]<<24,d),u=o(u=a(u,15),f),l=o(l=a(l^=u,13),5)+3864292196;switch(u=0,i){case 3:u^=t[p+2]<<16;case 2:u^=t[p+1]<<8;case 1:u=o(u^=t[p],d),l^=u=o(u=a(u,15),f)}return(l=h(l^=t.length))>>>0},n.x86.hash128=function(t,e){if(n.inputValidation&&!s(t))return r;e=e||0;for(var i=t.length%16,c=t.length-i,l=e,u=e,d=e,f=e,p=0,g=0,y=0,m=0,v=597399067,b=2869860233,w=951274213,_=2716044179,x=0;x<c;x+=16)p=t[x]|t[x+1]<<8|t[x+2]<<16|t[x+3]<<24,g=t[x+4]|t[x+5]<<8|t[x+6]<<16|t[x+7]<<24,y=t[x+8]|t[x+9]<<8|t[x+10]<<16|t[x+11]<<24,m=t[x+12]|t[x+13]<<8|t[x+14]<<16|t[x+15]<<24,p=a(p=o(p,v),15),l=a(l^=p=o(p,b),19),l=o(l+=u,5)+1444728091,g=a(g=o(g,b),16),u=a(u^=g=o(g,w),17),u=o(u+=d,5)+197830471,y=a(y=o(y,w),17),d=a(d^=y=o(y,_),15),d=o(d+=f,5)+2530024501,m=a(m=o(m,_),18),f=a(f^=m=o(m,v),13),f=o(f+=l,5)+850148119;switch(p=0,g=0,y=0,m=0,i){case 15:m^=t[x+14]<<16;case 14:m^=t[x+13]<<8;case 13:m=o(m^=t[x+12],_),f^=m=o(m=a(m,18),v);case 12:y^=t[x+11]<<24;case 11:y^=t[x+10]<<16;case 10:y^=t[x+9]<<8;case 9:y=o(y^=t[x+8],w),d^=y=o(y=a(y,17),_);case 8:g^=t[x+7]<<24;case 7:g^=t[x+6]<<16;case 6:g^=t[x+5]<<8;case 5:g=o(g^=t[x+4],b),u^=g=o(g=a(g,16),w);case 4:p^=t[x+3]<<24;case 3:p^=t[x+2]<<16;case 2:p^=t[x+1]<<8;case 1:p=o(p^=t[x],v),l^=p=o(p=a(p,15),b)}return l^=t.length,l+=u^=t.length,l+=d^=t.length,u+=l+=f^=t.length,d+=l,f+=l,l=h(l),l+=u=h(u),l+=d=h(d),u+=l+=f=h(f),d+=l,f+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},n.x64.hash128=function(t,e){if(n.inputValidation&&!s(t))return r;e=e||0;for(var i=t.length%16,o=t.length-i,a=[0,e],h=[0,e],g=[0,0],y=[0,0],m=[2277735313,289559509],v=[1291169091,658871167],b=0;b<o;b+=16)g=[t[b+4]|t[b+5]<<8|t[b+6]<<16|t[b+7]<<24,t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24],y=[t[b+12]|t[b+13]<<8|t[b+14]<<16|t[b+15]<<24,t[b+8]|t[b+9]<<8|t[b+10]<<16|t[b+11]<<24],g=u(g=l(g,m),31),a=c(a=u(a=f(a,g=l(g,v)),27),h),a=c(l(a,[0,5]),[0,1390208809]),y=u(y=l(y,v),33),h=c(h=u(h=f(h,y=l(y,m)),31),a),h=c(l(h,[0,5]),[0,944331445]);switch(g=[0,0],y=[0,0],i){case 15:y=f(y,d([0,t[b+14]],48));case 14:y=f(y,d([0,t[b+13]],40));case 13:y=f(y,d([0,t[b+12]],32));case 12:y=f(y,d([0,t[b+11]],24));case 11:y=f(y,d([0,t[b+10]],16));case 10:y=f(y,d([0,t[b+9]],8));case 9:y=l(y=f(y,[0,t[b+8]]),v),h=f(h,y=l(y=u(y,33),m));case 8:g=f(g,d([0,t[b+7]],56));case 7:g=f(g,d([0,t[b+6]],48));case 6:g=f(g,d([0,t[b+5]],40));case 5:g=f(g,d([0,t[b+4]],32));case 4:g=f(g,d([0,t[b+3]],24));case 3:g=f(g,d([0,t[b+2]],16));case 2:g=f(g,d([0,t[b+1]],8));case 1:g=l(g=f(g,[0,t[b]]),m),a=f(a,g=l(g=u(g,31),v))}return a=c(a=f(a,[0,t.length]),h=f(h,[0,t.length])),h=c(h,a),a=c(a=p(a),h=p(h)),h=c(h,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(h[0]>>>0).toString(16)).slice(-8)+("00000000"+(h[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=n),e.murmurHash3=n}()},99633:t=>{"use strict";function e(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}t.exports=function(t){var i=void 0,r=void 0;function n(t){if(!(t instanceof Object))throw new Error('Target "'+t+'" is not an object');r=t}function s(t){Object.keys(t).forEach((function(e){var i=t[e];if("function"!=typeof i)throw new Error('Trap "'+e+": "+i+'" is not a function');if(!Reflect[e])throw new Error('Trap "'+e+": "+i+'" is not a valid trap')})),i=t}n((function(){})),t&&n(t),s(Reflect);var o=new Proxy({},{get:function(t,n){return function(){for(var t=arguments.length,s=Array(t),o=0;o<t;o++)s[o]=arguments[o];return i[n].apply(null,[r].concat(e(s.slice(1))))}}});return{setTarget:n,setHandler:s,getTarget:function(){return r},getHandler:function(){return i},proxy:new Proxy(r,o)}}},30700:(t,e,i)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?t.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:t.exports={default:i(83300).default,Headers:i(83300).Headers,Request:i(83300).Request,Response:i(83300).Response}},28951:function(t,e){(function(){var t,i,r,n,s,o,a,h;h=function(t){return[(t&255<<24)>>>24,(t&255<<16)>>>16,(65280&t)>>>8,255&t].join(".")},a=function(t){var e,r,n,s,o,a;for(e=[],n=s=0;s<=3&&0!==t.length;n=++s){if(n>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}o=(a=i(t))[0],r=a[1],t=t.substring(r),e.push(o)}if(0!==t.length)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},n=(r=function(t){return t.charCodeAt(0)})("0"),o=r("a"),s=r("A"),i=function(t){var e,i,a,h,c;for(h=0,e=10,i="9",a=0,t.length>1&&"0"===t[a]&&("x"===t[a+1]||"X"===t[a+1]?(a+=2,e=16):"0"<=t[a+1]&&t[a+1]<="9"&&(a++,e=8,i="7")),c=a;a<t.length;){if("0"<=t[a]&&t[a]<=i)h=h*e+(r(t[a])-n)>>>0;else{if(16!==e)break;if("a"<=t[a]&&t[a]<="f")h=h*e+(10+r(t[a])-o)>>>0;else{if(!("A"<=t[a]&&t[a]<="F"))break;h=h*e+(10+r(t[a])-s)>>>0}}if(h>4294967295)throw new Error("too large");a++}if(a===c)throw new Error("empty octet");return[h,a]},t=function(){function t(t,e){var i,r,n;if("string"!=typeof t)throw new Error("Missing `net' parameter");if(e||(n=t.split("/",2),t=n[0],e=n[1]),e||(e=32),"string"==typeof e&&e.indexOf(".")>-1){try{this.maskLong=a(e)}catch(t){throw new Error("Invalid mask: "+e)}for(i=r=32;r>=0;i=--r)if(this.maskLong===4294967295<<32-i>>>0){this.bitmask=i;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(t)&this.maskLong)>>>0}catch(e){throw new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+e);this.size=Math.pow(2,32-this.bitmask),this.base=h(this.netLong),this.mask=h(this.maskLong),this.hostmask=h(~this.maskLong),this.first=this.bitmask<=30?h(this.netLong+1):this.base,this.last=this.bitmask<=30?h(this.netLong+this.size-2):h(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?h(this.netLong+this.size-1):void 0}return t.prototype.contains=function(e){return"string"==typeof e&&(e.indexOf("/")>0||4!==e.split(".").length)&&(e=new t(e)),e instanceof t?this.contains(e.base)&&this.contains(e.broadcast||e.last):(a(e)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},t.prototype.next=function(e){return null==e&&(e=1),new t(h(this.netLong+this.size*e),this.mask)},t.prototype.forEach=function(t){var e,i,r;for(r=a(this.first),i=a(this.last),e=0;r<=i;)t(h(r),r,e),e++,r++},t.prototype.toString=function(){return this.base+"/"+this.bitmask},t}(),e.ip2long=a,e.long2ip=h,e.Netmask=t}).call(this)},83300:(t,e)=>{"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();t.exports=e=i.fetch,i.fetch&&(e.default=i.fetch.bind(i)),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response},8925:(t,e,i)=>{var r=i(3832);function n(t,e){r.cipher.registerAlgorithm(t,(function(){return new r.aes.Algorithm(t,e)}))}i(85649),i(61967),i(97116),t.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(t,e,i,r){var n=p({key:t,output:i,decrypt:!1,mode:r});return n.start(e),n},r.aes.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},r.aes.startDecrypting=function(t,e,i,r){var n=p({key:t,output:i,decrypt:!0,mode:r});return n.start(e),n},r.aes.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},r.aes.Algorithm=function(t,e){l||u();var i=this;i.name=t,i.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return f(i._w,t,e,!1)},decrypt:function(t,e){return f(i._w,t,e,!0)}}}),i._init=!1},r.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,i=t.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(r.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){e=i,i=r.util.createBuffer();for(var n=0;n<e.length;++n)i.putByte(e[n])}}else i=r.util.createBuffer(i);if(!r.util.isArray(i)){e=i,i=[];var s=e.length();if(16===s||24===s||32===s)for(s>>>=2,n=0;n<s;++n)i.push(e.getInt32())}if(!r.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=d(i,t.decrypt&&!a),this._init=!0}},r.aes._expandKey=function(t,e){return l||u(),d(t,e)},r.aes._updateBlock=f,n("AES-ECB",r.cipher.modes.ecb),n("AES-CBC",r.cipher.modes.cbc),n("AES-CFB",r.cipher.modes.cfb),n("AES-OFB",r.cipher.modes.ofb),n("AES-CTR",r.cipher.modes.ctr),n("AES-GCM",r.cipher.modes.gcm);var s,o,a,h,c,l=!1;function u(){l=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;for(s=new Array(256),o=new Array(256),h=new Array(4),c=new Array(4),e=0;e<4;++e)h[e]=new Array(256),c[e]=new Array(256);var i,r,n,u,d,f,p,g=0,y=0;for(e=0;e<256;++e){u=(u=y^y<<1^y<<2^y<<3^y<<4)>>8^255&u^99,s[g]=u,o[u]=g,f=(d=t[u])<<24^u<<16^u<<8^u^d,p=((i=t[g])^(r=t[i])^(n=t[r]))<<24^(g^n)<<16^(g^r^n)<<8^g^i^n;for(var m=0;m<4;++m)h[m][g]=f,c[m][u]=p,f=f<<24|f>>>8,p=p<<24|p>>>8;0===g?g=y=1:(g=i^t[t[t[i^n]]],y^=t[t[y]])}}function d(t,e){for(var i,r=t.slice(0),n=1,o=r.length,h=4*(o+6+1),l=o;l<h;++l)i=r[l-1],l%o==0?(i=s[i>>>16&255]<<24^s[i>>>8&255]<<16^s[255&i]<<8^s[i>>>24]^a[n]<<24,n++):o>6&&l%o==4&&(i=s[i>>>24]<<24^s[i>>>16&255]<<16^s[i>>>8&255]<<8^s[255&i]),r[l]=r[l-o]^i;if(e){for(var u,d=c[0],f=c[1],p=c[2],g=c[3],y=r.slice(0),m=(l=0,(h=r.length)-4);l<h;l+=4,m-=4)if(0===l||l===h-4)y[l]=r[m],y[l+1]=r[m+3],y[l+2]=r[m+2],y[l+3]=r[m+1];else for(var v=0;v<4;++v)u=r[m+v],y[l+(3&-v)]=d[s[u>>>24]]^f[s[u>>>16&255]]^p[s[u>>>8&255]]^g[s[255&u]];r=y}return r}function f(t,e,i,r){var n,a,l,u,d,f,p,g,y,m,v,b,w=t.length/4-1;r?(n=c[0],a=c[1],l=c[2],u=c[3],d=o):(n=h[0],a=h[1],l=h[2],u=h[3],d=s),f=e[0]^t[0],p=e[r?3:1]^t[1],g=e[2]^t[2],y=e[r?1:3]^t[3];for(var _=3,x=1;x<w;++x)m=n[f>>>24]^a[p>>>16&255]^l[g>>>8&255]^u[255&y]^t[++_],v=n[p>>>24]^a[g>>>16&255]^l[y>>>8&255]^u[255&f]^t[++_],b=n[g>>>24]^a[y>>>16&255]^l[f>>>8&255]^u[255&p]^t[++_],y=n[y>>>24]^a[f>>>16&255]^l[p>>>8&255]^u[255&g]^t[++_],f=m,p=v,g=b;i[0]=d[f>>>24]<<24^d[p>>>16&255]<<16^d[g>>>8&255]<<8^d[255&y]^t[++_],i[r?3:1]=d[p>>>24]<<24^d[g>>>16&255]<<16^d[y>>>8&255]<<8^d[255&f]^t[++_],i[2]=d[g>>>24]<<24^d[y>>>16&255]<<16^d[f>>>8&255]<<8^d[255&p]^t[++_],i[r?1:3]=d[y>>>24]<<24^d[f>>>16&255]<<16^d[p>>>8&255]<<8^d[255&g]^t[++_]}function p(t){var e,i="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),n=(e=t.decrypt?r.cipher.createDecipher(i,t.key):r.cipher.createCipher(i,t.key)).start;return e.start=function(t,i){var s=null;i instanceof r.util.ByteBuffer&&(s=i,i={}),(i=i||{}).output=s,i.iv=t,n.call(e,i)},e}},3068:(t,e,i)=>{var r=i(3832);i(97116),i(66270);var n=t.exports=r.asn1=r.asn1||{};function s(t,e,i){if(i>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=i,r}}function o(t,e,i,r){var a;s(t,e,2);var h=t.getByte();e--;var c=192&h,l=31&h;a=t.length();var u,d,f=function(t,e){var i=t.getByte();if(e--,128!==i){var r;if(128&i){var n=127&i;s(t,e,n),r=t.getInt(n<<3)}else r=i;if(r<0)throw new Error("Negative length: "+r);return r}}(t,e);if(e-=a-t.length(),void 0!==f&&f>e){if(r.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=t.length(),p.remaining=e,p.requested=f,p}f=e}var g=32==(32&h);if(g)if(u=[],void 0===f)for(;;){if(s(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}a=t.length(),u.push(o(t,e,i+1,r)),e-=a-t.length()}else for(;f>0;)a=t.length(),u.push(o(t,f,i+1,r)),e-=a-t.length(),f-=a-t.length();if(void 0===u&&c===n.Class.UNIVERSAL&&l===n.Type.BITSTRING&&(d=t.bytes(f)),void 0===u&&r.decodeBitStrings&&c===n.Class.UNIVERSAL&&l===n.Type.BITSTRING&&f>1){var y=t.read,m=e,v=0;if(l===n.Type.BITSTRING&&(s(t,e,1),v=t.getByte(),e--),0===v)try{a=t.length();var b=o(t,e,i+1,{strict:!0,decodeBitStrings:!0}),w=a-t.length();e-=w,l==n.Type.BITSTRING&&w++;var _=b.tagClass;w!==f||_!==n.Class.UNIVERSAL&&_!==n.Class.CONTEXT_SPECIFIC||(u=[b])}catch(t){}void 0===u&&(t.read=y,e=m)}if(void 0===u){if(void 0===f){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(l===n.Type.BMPSTRING)for(u="";f>0;f-=2)s(t,e,2),u+=String.fromCharCode(t.getInt16()),e-=2;else u=t.getBytes(f),e-=f}var x=void 0===d?null:{bitStringContents:d};return n.create(c,l,g,u,x)}n.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},n.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},n.create=function(t,e,i,s,o){if(r.util.isArray(s)){for(var a=[],h=0;h<s.length;++h)void 0!==s[h]&&a.push(s[h]);s=a}var c={tagClass:t,type:e,constructed:i,composed:i||r.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(c.bitStringContents=o.bitStringContents,c.original=n.copy(c)),c},n.copy=function(t,e){var i;if(r.util.isArray(t)){i=[];for(var s=0;s<t.length;++s)i.push(n.copy(t[s],e));return i}return"string"==typeof t?t:(i={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:n.copy(t.value,e)},e&&!e.excludeBitStringContents&&(i.bitStringContents=t.bitStringContents),i)},n.equals=function(t,e,i){if(r.util.isArray(t)){if(!r.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var s=0;s<t.length;++s)if(!n.equals(t[s],e[s]))return!1;return!0}if(typeof t!=typeof e)return!1;if("string"==typeof t)return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&n.equals(t.value,e.value);return i&&i.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o},n.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e},n.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=r.util.createBuffer(t));var i=t.length(),n=o(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=i,s.remaining=t.length(),s}return n},n.toDer=function(t){var e=r.util.createBuffer(),i=t.tagClass|t.type,s=r.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=n.equals(t,t.original))),o)s.putBytes(t.bitStringContents);else if(t.composed){t.constructed?i|=32:s.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&s.putBuffer(n.toDer(t.value[a]))}else if(t.type===n.Type.BMPSTRING)for(a=0;a<t.value.length;++a)s.putInt16(t.value.charCodeAt(a));else t.type===n.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?s.putBytes(t.value.substr(1)):s.putBytes(t.value);if(e.putByte(i),s.length()<=127)e.putByte(127&s.length());else{var h=s.length(),c="";do{c+=String.fromCharCode(255&h),h>>>=8}while(h>0);for(e.putByte(128|c.length),a=c.length-1;a>=0;--a)e.putByte(c.charCodeAt(a))}return e.putBuffer(s),e},n.oidToDer=function(t){var e,i,n,s,o=t.split("."),a=r.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var h=2;h<o.length;++h){e=!0,i=[],n=parseInt(o[h],10);do{s=127&n,n>>>=7,e||(s|=128),i.push(s),e=!1}while(n>0);for(var c=i.length-1;c>=0;--c)a.putByte(i[c])}return a},n.derToOid=function(t){var e;"string"==typeof t&&(t=r.util.createBuffer(t));var i=t.getByte();e=Math.floor(i/40)+"."+i%40;for(var n=0;t.length()>0;)n<<=7,128&(i=t.getByte())?n+=127&i:(e+="."+(n+i),n=0);return e},n.utcTimeToDate=function(t){var e=new Date,i=parseInt(t.substr(0,2),10);i=i>=50?1900+i:2e3+i;var r=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var h=t.charAt(10),c=10;"+"!==h&&"-"!==h&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(i,r,n),e.setUTCHours(s,o,a,0),c&&("+"===(h=t.charAt(c))||"-"===h)){var l=60*parseInt(t.substr(c+1,2),10)+parseInt(t.substr(c+4,2),10);l*=6e4,"+"===h?e.setTime(+e-l):e.setTime(+e+l)}return e},n.generalizedTimeToDate=function(t){var e=new Date,i=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),h=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var u=t.length-5,d=t.charAt(u);return"+"!==d&&"-"!==d||(c=60*parseInt(t.substr(u+1,2),10)+parseInt(t.substr(u+4,2),10),c*=6e4,"+"===d&&(c*=-1),l=!0),"."===t.charAt(14)&&(h=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(i,r,n),e.setUTCHours(s,o,a,h),e.setTime(+e+c)):(e.setFullYear(i,r,n),e.setHours(s,o,a,h)),e},n.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",i=[];i.push((""+t.getUTCFullYear()).substr(2)),i.push(""+(t.getUTCMonth()+1)),i.push(""+t.getUTCDate()),i.push(""+t.getUTCHours()),i.push(""+t.getUTCMinutes()),i.push(""+t.getUTCSeconds());for(var r=0;r<i.length;++r)i[r].length<2&&(e+="0"),e+=i[r];return e+"Z"},n.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",i=[];i.push(""+t.getUTCFullYear()),i.push(""+(t.getUTCMonth()+1)),i.push(""+t.getUTCDate()),i.push(""+t.getUTCHours()),i.push(""+t.getUTCMinutes()),i.push(""+t.getUTCSeconds());for(var r=0;r<i.length;++r)i[r].length<2&&(e+="0"),e+=i[r];return e+"Z"},n.integerToDer=function(t){var e=r.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var i=new Error("Integer too large; max is 32-bits.");throw i.integer=t,i},n.derToInteger=function(t){"string"==typeof t&&(t=r.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},n.validate=function(t,e,i,s){var o=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)s&&(t.tagClass!==e.tagClass&&s.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&s.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(o=!0,e.value&&r.util.isArray(e.value))for(var a=0,h=0;o&&h<e.value.length;++h)o=e.value[h].optional||!1,t.value[a]&&((o=n.validate(t.value[a],e.value[h],i,s))?++a:e.value[h].optional&&(o=!0)),!o&&s&&s.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&i&&(e.capture&&(i[e.capture]=t.value),e.captureAsn1&&(i[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(i[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)i[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");i[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else s&&s.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;n.prettyPrint=function(t,e,i){var s="";i=i||2,(e=e||0)>0&&(s+="\n");for(var o="",h=0;h<e*i;++h)o+=" ";switch(s+=o+"Tag: ",t.tagClass){case n.Class.UNIVERSAL:s+="Universal:";break;case n.Class.APPLICATION:s+="Application:";break;case n.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case n.Class.PRIVATE:s+="Private:"}if(t.tagClass===n.Class.UNIVERSAL)switch(s+=t.type,t.type){case n.Type.NONE:s+=" (None)";break;case n.Type.BOOLEAN:s+=" (Boolean)";break;case n.Type.INTEGER:s+=" (Integer)";break;case n.Type.BITSTRING:s+=" (Bit string)";break;case n.Type.OCTETSTRING:s+=" (Octet string)";break;case n.Type.NULL:s+=" (Null)";break;case n.Type.OID:s+=" (Object Identifier)";break;case n.Type.ODESC:s+=" (Object Descriptor)";break;case n.Type.EXTERNAL:s+=" (External or Instance of)";break;case n.Type.REAL:s+=" (Real)";break;case n.Type.ENUMERATED:s+=" (Enumerated)";break;case n.Type.EMBEDDED:s+=" (Embedded PDV)";break;case n.Type.UTF8:s+=" (UTF8)";break;case n.Type.ROID:s+=" (Relative Object Identifier)";break;case n.Type.SEQUENCE:s+=" (Sequence)";break;case n.Type.SET:s+=" (Set)";break;case n.Type.PRINTABLESTRING:s+=" (Printable String)";break;case n.Type.IA5String:s+=" (IA5String (ASCII))";break;case n.Type.UTCTIME:s+=" (UTC time)";break;case n.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case n.Type.BMPSTRING:s+=" (BMP String)"}else s+=t.type;if(s+="\n",s+=o+"Constructed: "+t.constructed+"\n",t.composed){var c=0,l="";for(h=0;h<t.value.length;++h)void 0!==t.value[h]&&(c+=1,l+=n.prettyPrint(t.value[h],e+1,i),h+1<t.value.length&&(l+=","));s+=o+"Sub values: "+c+l}else{if(s+=o+"Value: ",t.type===n.Type.OID){var u=n.derToOid(t.value);s+=u,r.pki&&r.pki.oids&&u in r.pki.oids&&(s+=" ("+r.pki.oids[u]+") ")}if(t.type===n.Type.INTEGER)try{s+=n.derToInteger(t.value)}catch(e){s+="0x"+r.util.bytesToHex(t.value)}else if(t.type===n.Type.BITSTRING){if(t.value.length>1?s+="0x"+r.util.bytesToHex(t.value.slice(1)):s+="(none)",t.value.length>0){var d=t.value.charCodeAt(0);1==d?s+=" (1 unused bit shown)":d>1&&(s+=" ("+d+" unused bits shown)")}}else if(t.type===n.Type.OCTETSTRING)a.test(t.value)||(s+="("+t.value+") "),s+="0x"+r.util.bytesToHex(t.value);else if(t.type===n.Type.UTF8)try{s+=r.util.decodeUtf8(t.value)}catch(e){if("URI malformed"!==e.message)throw e;s+="0x"+r.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===n.Type.PRINTABLESTRING||t.type===n.Type.IA5String?s+=t.value:a.test(t.value)?s+="0x"+r.util.bytesToHex(t.value):0===t.value.length?s+="[null]":s+=t.value}return s}},78807:(t,e,i)=>{var r=i(62678).Buffer,n={};t.exports=n;var s={};n.encode=function(t,e,i){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==i&&"number"!=typeof i)throw new TypeError('"maxline" must be a number.');var r="";if(t instanceof Uint8Array){var n=0,s=e.length,o=e.charAt(0),a=[0];for(n=0;n<t.length;++n){for(var h=0,c=t[n];h<a.length;++h)c+=a[h]<<8,a[h]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(n=0;0===t[n]&&n<t.length-1;++n)r+=o;for(n=a.length-1;n>=0;--n)r+=e[a[n]]}else r=function(t,e){var i=0,r=e.length,n=e.charAt(0),s=[0];for(i=0;i<t.length();++i){for(var o=0,a=t.at(i);o<s.length;++o)a+=s[o]<<8,s[o]=a%r,a=a/r|0;for(;a>0;)s.push(a%r),a=a/r|0}var h="";for(i=0;0===t.at(i)&&i<t.length()-1;++i)h+=n;for(i=s.length-1;i>=0;--i)h+=e[s[i]];return h}(t,e);if(i){var l=new RegExp(".{1,"+i+"}","g");r=r.match(l).join("\r\n")}return r},n.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var i=s[e];if(!i){i=s[e]=[];for(var n=0;n<e.length;++n)i[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");var o=e.length,a=e.charAt(0),h=[0];for(n=0;n<t.length;n++){var c=i[t.charCodeAt(n)];if(void 0===c)return;for(var l=0,u=c;l<h.length;++l)u+=h[l]*o,h[l]=255&u,u>>=8;for(;u>0;)h.push(255&u),u>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)h.push(0);return void 0!==r?r.from(h.reverse()):new Uint8Array(h.reverse())}},85649:(t,e,i)=>{var r=i(3832);i(97116),t.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(t,e){var i=t;if("string"==typeof i&&(i=r.cipher.getAlgorithm(i))&&(i=i()),!i)throw new Error("Unsupported algorithm: "+t);return new r.cipher.BlockCipher({algorithm:i,key:e,decrypt:!1})},r.cipher.createDecipher=function(t,e){var i=t;if("string"==typeof i&&(i=r.cipher.getAlgorithm(i))&&(i=i()),!i)throw new Error("Unsupported algorithm: "+t);return new r.cipher.BlockCipher({algorithm:i,key:e,decrypt:!0})},r.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),r.cipher.algorithms[t]=e},r.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in r.cipher.algorithms?r.cipher.algorithms[t]:null};var n=r.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};n.prototype.start=function(t){t=t||{};var e={};for(var i in t)e[i]=t[i];e.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=t.output||r.util.createBuffer(),this.mode.start(e)},n.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},n.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},61967:(t,e,i)=>{var r=i(3832);i(97116),r.cipher=r.cipher||{};var n=t.exports=r.cipher.modes=r.cipher.modes||{};function s(t,e){if("string"==typeof t&&(t=r.util.createBuffer(t)),r.util.isArray(t)&&t.length>4){var i=t;t=r.util.createBuffer();for(var n=0;n<i.length;++n)t.putByte(i[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!r.util.isArray(t)){var s=[],o=e/4;for(n=0;n<o;++n)s.push(t.getInt32());t=s}return t}function o(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}n.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.ecb.prototype.start=function(t){},n.ecb.prototype.encrypt=function(t,e,i){if(t.length()<this.blockSize&&!(i&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},n.ecb.prototype.decrypt=function(t,e,i){if(t.length()<this.blockSize&&!(i&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},n.ecb.prototype.pad=function(t,e){var i=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(i,i),!0},n.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var i=t.length(),r=t.at(i-1);return!(r>this.blockSize<<2||(t.truncate(r),0))},n.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},n.cbc.prototype.encrypt=function(t,e,i){if(t.length()<this.blockSize&&!(i&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock},n.cbc.prototype.decrypt=function(t,e,i){if(t.length()<this.blockSize&&!(i&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},n.cbc.prototype.pad=function(t,e){var i=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(i,i),!0},n.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var i=t.length(),r=t.at(i-1);return!(r>this.blockSize<<2||(t.truncate(r),0))},n.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},n.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.cfb.prototype.encrypt=function(t,e,i){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},n.cfb.prototype.decrypt=function(t,e,i){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},n.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},n.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ofb.prototype.encrypt=function(t,e,i){var r=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},n.ofb.prototype.decrypt=n.ofb.prototype.encrypt,n.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},n.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ctr.prototype.encrypt=function(t,e,i){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},n.ctr.prototype.decrypt=n.ctr.prototype.encrypt,n.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},n.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,i=r.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?r.util.createBuffer(t.additionalData):r.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=r.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=i.length();if(12===n)this._j0=[i.getInt32(),i.getInt32(),i.getInt32(),1];else{for(this._j0=[0,0,0,0];i.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[i.getInt32(),i.getInt32(),i.getInt32(),i.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*n)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,e=r.util.createBuffer(e),this._aDataLength=a(8*e.length());var s=e.length()%this.blockSize;for(s&&e.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},n.gcm.prototype.encrypt=function(t,e,i){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-r)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||i){if(i){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},n.gcm.prototype.decrypt=function(t,e,i){var r=t.length();if(r<this.blockSize&&!(i&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize},n.gcm.prototype.afterFinish=function(t,e){var i=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=r.util.createBuffer();var n=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(i=!1),i},n.gcm.prototype.multiply=function(t,e){for(var i=[0,0,0,0],r=e.slice(0),n=0;n<128;++n)t[n/32|0]&1<<31-n%32&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),this.pow(r,r);return i},n.gcm.prototype.pow=function(t,e){for(var i=1&t[3],r=3;r>0;--r)e[r]=t[r]>>>1|(1&t[r-1])<<31;e[0]=t[0]>>>1,i&&(e[0]^=this._R)},n.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],i=0;i<32;++i){var r=t[i/8|0]>>>4*(7-i%8)&15,n=this._m[i][r];e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3]}return e},n.gcm.prototype.ghash=function(t,e,i){return e[0]^=i[0],e[1]^=i[1],e[2]^=i[2],e[3]^=i[3],this.tableMultiply(e)},n.gcm.prototype.generateHashTable=function(t,e){for(var i=8/e,r=4*i,n=16*i,s=new Array(n),o=0;o<n;++o){var a=[0,0,0,0],h=(r-1-o%r)*e;a[o/r|0]=1<<e-1<<h,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s},n.gcm.prototype.generateSubHashTable=function(t,e){var i=1<<e,r=i>>>1,n=new Array(i);n[r]=t.slice(0);for(var s=r>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<r;){for(var o=1;o<s;++o){var a=n[s],h=n[o];n[s+o]=[a[0]^h[0],a[1]^h[1],a[2]^h[2],a[3]^h[3]]}s*=2}for(n[0]=[0,0,0,0],s=r+1;s<i;++s){var c=n[s^r];n[s]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return n}},33480:(t,e,i)=>{var r=i(3832);function n(t,e){r.cipher.registerAlgorithm(t,(function(){return new r.des.Algorithm(t,e)}))}i(85649),i(61967),i(97116),t.exports=r.des=r.des||{},r.des.startEncrypting=function(t,e,i,r){var n=p({key:t,output:i,decrypt:!1,mode:r||(null===e?"ECB":"CBC")});return n.start(e),n},r.des.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},r.des.startDecrypting=function(t,e,i,r){var n=p({key:t,output:i,decrypt:!0,mode:r||(null===e?"ECB":"CBC")});return n.start(e),n},r.des.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},r.des.Algorithm=function(t,e){var i=this;i.name=t,i.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return f(i._keys,t,e,!1)},decrypt:function(t,e){return f(i._keys,t,e,!0)}}}),i._init=!1},r.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=r.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,i=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],h=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,m=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<y;w++){var _=t.getInt32(),x=t.getInt32();_^=(e=252645135&(_>>>4^x))<<4,_^=e=65535&((x^=e)>>>-16^_),_^=(e=858993459&(_>>>2^(x^=e<<-16)))<<2,_^=e=65535&((x^=e)>>>-16^_),_^=(e=1431655765&(_>>>1^(x^=e<<-16)))<<1,_^=e=16711935&((x^=e)>>>8^_),e=(_^=(e=1431655765&(_>>>1^(x^=e<<8)))<<1)<<8|(x^=e)>>>20&240,_=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=e;for(var E=0;E<v.length;++E){v[E]?(_=_<<2|_>>>26,x=x<<2|x>>>26):(_=_<<1|_>>>27,x=x<<1|x>>>27);var S=i[(_&=-15)>>>28]|r[_>>>24&15]|n[_>>>20&15]|s[_>>>16&15]|o[_>>>12&15]|a[_>>>8&15]|h[_>>>4&15],T=c[(x&=-15)>>>28]|l[x>>>24&15]|u[x>>>20&15]|d[x>>>16&15]|f[x>>>12&15]|p[x>>>8&15]|g[x>>>4&15];e=65535&(T>>>16^S),m[b++]=S^e,m[b++]=T^e<<16}}return m}(e),this._init=!0}},n("DES-ECB",r.cipher.modes.ecb),n("DES-CBC",r.cipher.modes.cbc),n("DES-CFB",r.cipher.modes.cfb),n("DES-OFB",r.cipher.modes.ofb),n("DES-CTR",r.cipher.modes.ctr),n("3DES-ECB",r.cipher.modes.ecb),n("3DES-CBC",r.cipher.modes.cbc),n("3DES-CFB",r.cipher.modes.cfb),n("3DES-OFB",r.cipher.modes.ofb),n("3DES-CTR",r.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],h=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],u=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(t,e,i,r){var n,f,p=32===t.length?3:9;n=3===p?r?[30,-2,-2]:[0,32,2]:r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=e[0],y=e[1];g^=(f=252645135&(g>>>4^y))<<4,g^=(f=65535&(g>>>16^(y^=f)))<<16,g^=f=858993459&((y^=f)>>>2^g),g^=f=16711935&((y^=f<<2)>>>8^g),g=(g^=(f=1431655765&(g>>>1^(y^=f<<8)))<<1)<<1|g>>>31,y=(y^=f)<<1|y>>>31;for(var m=0;m<p;m+=3){for(var v=n[m+1],b=n[m+2],w=n[m];w!=v;w+=b){var _=y^t[w],x=(y>>>4|y<<28)^t[w+1];f=g,g=y,y=f^(o[_>>>24&63]|h[_>>>16&63]|l[_>>>8&63]|d[63&_]|s[x>>>24&63]|a[x>>>16&63]|c[x>>>8&63]|u[63&x])}f=g,g=y,y=f}y=y>>>1|y<<31,y^=f=1431655765&((g=g>>>1|g<<31)>>>1^y),y^=(f=16711935&(y>>>8^(g^=f<<1)))<<8,y^=(f=858993459&(y>>>2^(g^=f)))<<2,y^=f=65535&((g^=f)>>>16^y),y^=f=252645135&((g^=f<<16)>>>4^y),g^=f<<4,i[0]=g,i[1]=y}function p(t){var e,i="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),n=(e=t.decrypt?r.cipher.createDecipher(i,t.key):r.cipher.createCipher(i,t.key)).start;return e.start=function(t,i){var s=null;i instanceof r.util.ByteBuffer&&(s=i,i={}),(i=i||{}).output=s,i.iv=t,n.call(e,i)},e}},3832:t=>{t.exports={options:{usePureJavaScript:!1}}},36607:(t,e,i)=>{var r=i(3832);i(28991),i(97116),(t.exports=r.hmac=r.hmac||{}).create=function(){var t=null,e=null,i=null,n=null,s={start:function(s,o){if(null!==s)if("string"==typeof s){if(!((s=s.toLowerCase())in r.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');e=r.md.algorithms[s].create()}else e=s;if(null===o)o=t;else{if("string"==typeof o)o=r.util.createBuffer(o);else if(r.util.isArray(o)){var a=o;o=r.util.createBuffer();for(var h=0;h<a.length;++h)o.putByte(a[h])}var c=o.length();for(c>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),i=r.util.createBuffer(),n=r.util.createBuffer(),c=o.length(),h=0;h<c;++h)a=o.at(h),i.putByte(54^a),n.putByte(92^a);if(c<e.blockLength)for(a=e.blockLength-c,h=0;h<a;++h)i.putByte(54),n.putByte(92);t=o,i=i.bytes(),n=n.bytes()}e.start(),e.update(i)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(n),e.update(t),e.digest()}};return s.digest=s.getMac,s}},15764:(t,e,i)=>{var r,n=i(3832);function s(t,e,i){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function o(){return new s(null)}function a(t,e,i,r,n,s){for(var o=16383&e,a=e>>14;--s>=0;){var h=16383&this.data[t],c=this.data[t++]>>14,l=a*h+c*o;n=((h=o*h+((16383&l)<<14)+i.data[r]+n)>>28)+(l>>14)+a*c,i.data[r++]=268435455&h}return n}t.exports=n.jsbn=n.jsbn||{},n.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=a,r=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(t,e,i,r,n,s){for(var o=32767&e,a=e>>15;--s>=0;){var h=32767&this.data[t],c=this.data[t++]>>15,l=a*h+c*o;n=((h=o*h+((32767&l)<<15)+i.data[r]+(1073741823&n))>>>30)+(l>>>15)+a*c+(n>>>30),i.data[r++]=1073741823&h}return n},r=30):"Netscape"!=navigator.appName?(s.prototype.am=function(t,e,i,r,n,s){for(;--s>=0;){var o=e*this.data[t++]+i.data[r]+n;n=Math.floor(o/67108864),i.data[r++]=67108863&o}return n},r=26):(s.prototype.am=a,r=28),s.prototype.DB=r,s.prototype.DM=(1<<r)-1,s.prototype.DV=1<<r,s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-r,s.prototype.F2=2*r-52;var h,c,l=new Array;for(h="0".charCodeAt(0),c=0;c<=9;++c)l[h++]=c;for(h="a".charCodeAt(0),c=10;c<36;++c)l[h++]=c;for(h="A".charCodeAt(0),c=10;c<36;++c)l[h++]=c;function u(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function d(t,e){var i=l[t.charCodeAt(e)];return null==i?-1:i}function f(t){var e=o();return e.fromInt(t),e}function p(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function g(t){this.m=t}function y(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function m(t,e){return t&e}function v(t,e){return t|e}function b(t,e){return t^e}function w(t,e){return t&~e}function _(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function x(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function E(){}function S(t){return t}function T(t){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}g.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},g.prototype.revert=function(t){return t},g.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},g.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},g.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},y.prototype.convert=function(t){var e=o();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e},y.prototype.revert=function(t){var e=o();return t.copyTo(e),this.reduce(e),e},y.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t.data[e],r=i*this.mpl+((i*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t.data[i]+=this.m.am(0,r,t,e,0,this.m.t);t.data[i]>=t.DV;)t.data[i]-=t.DV,t.data[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},y.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},s.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},s.prototype.fromString=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var r=t.length,n=!1,o=0;--r>=0;){var a=8==i?255&t[r]:d(t,r);a<0?"-"==t.charAt(r)&&(n=!0):(n=!1,0==o?this.data[this.t++]=a:o+i>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,(o+=i)>=this.DB&&(o-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e.data[i+t]=this.data[i];for(i=t-1;i>=0;--i)e.data[i]=0;e.t=this.t+t,e.s=this.s},s.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e.data[i-t]=this.data[i];e.t=Math.max(this.t-t,0),e.s=this.s},s.prototype.lShiftTo=function(t,e){var i,r=t%this.DB,n=this.DB-r,s=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e.data[i+o+1]=this.data[i]>>n|a,a=(this.data[i]&s)<<r;for(i=o-1;i>=0;--i)e.data[i]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},s.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,n=this.DB-r,s=(1<<r)-1;e.data[0]=this.data[i]>>r;for(var o=i+1;o<this.t;++o)e.data[o-i-1]|=(this.data[o]&s)<<n,e.data[o-i]=this.data[o]>>r;r>0&&(e.data[this.t-i-1]|=(this.s&s)<<n),e.t=this.t-i,e.clamp()}},s.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this.data[i]-t.data[i],e.data[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this.data[i],e.data[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t.data[i],e.data[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[i++]=this.DV+r:r>0&&(e.data[i++]=r),e.t=i,e.clamp()},s.prototype.multiplyTo=function(t,e){var i=this.abs(),r=t.abs(),n=i.t;for(e.t=n+r.t;--n>=0;)e.data[n]=0;for(n=0;n<r.t;++n)e.data[n+i.t]=i.am(0,r.data[n],e,n,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)},s.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t.data[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e.data[i],t,2*i,0,1);(t.data[i+e.t]+=e.am(i+1,2*e.data[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t.data[i+e.t]-=e.DV,t.data[i+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(i,e.data[i],t,2*i,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,e,i){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=o());var a=o(),h=this.s,c=t.s,l=this.DB-p(r.data[r.t-1]);l>0?(r.lShiftTo(l,a),n.lShiftTo(l,i)):(r.copyTo(a),n.copyTo(i));var u=a.t,d=a.data[u-1];if(0!=d){var f=d*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),g=this.FV/f,y=(1<<this.F1)/f,m=1<<this.F2,v=i.t,b=v-u,w=null==e?o():e;for(a.dlShiftTo(b,w),i.compareTo(w)>=0&&(i.data[i.t++]=1,i.subTo(w,i)),s.ONE.dlShiftTo(u,w),w.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--b>=0;){var _=i.data[--v]==d?this.DM:Math.floor(i.data[v]*g+(i.data[v-1]+m)*y);if((i.data[v]+=a.am(0,_,i,b,0,u))<_)for(a.dlShiftTo(b,w),i.subTo(w,i);i.data[v]<--_;)i.subTo(w,i)}null!=e&&(i.drShiftTo(u,e),h!=c&&s.ZERO.subTo(e,e)),i.t=u,i.clamp(),l>0&&i.rShiftTo(l,i),h<0&&s.ZERO.subTo(i,i)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(t,e){if(t>4294967295||t<1)return s.ONE;var i=o(),r=o(),n=e.convert(this),a=p(t)-1;for(n.copyTo(i);--a>=0;)if(e.sqrTo(i,r),(t&1<<a)>0)e.mulTo(r,n,i);else{var h=i;i=r,r=h}return e.revert(i)},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(i=this.data[o]>>a)>0&&(n=!0,s=u(i));o>=0;)a<e?(i=(this.data[o]&(1<<a)-1)<<e-a,i|=this.data[--o]>>(a+=this.DB-e)):(i=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),i>0&&(n=!0),n&&(s+=u(i));return n?s:"0"},s.prototype.negate=function(){var t=o();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this.data[i]-t.data[i]))return e;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var e=o();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e},s.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new g(e):new y(e),this.exp(t,i)},s.ZERO=f(0),s.ONE=f(1),E.prototype.convert=S,E.prototype.revert=S,E.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},E.prototype.sqrTo=function(t,e){t.squareTo(e)},T.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=o();return t.copyTo(e),this.reduce(e),e},T.prototype.revert=function(t){return t},T.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},T.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},T.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],C=(1<<26)/A[A.length-1];s.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},s.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=f(i),n=o(),s=o(),a="";for(this.divRemTo(r,n,s);n.signum()>0;)a=(i+s.intValue()).toString(t).substr(1)+a,n.divRemTo(r,n,s);return s.intValue().toString(t)+a},s.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),r=Math.pow(e,i),n=!1,o=0,a=0,h=0;h<t.length;++h){var c=d(t,h);c<0?"-"==t.charAt(h)&&0==this.signum()&&(n=!0):(a=e*a+c,++o>=i&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),n&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this);else{var r=new Array,n=7&t;r.length=1+(t>>3),e.nextBytes(r),n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}},s.prototype.bitwiseTo=function(t,e,i){var r,n,s=Math.min(t.t,this.t);for(r=0;r<s;++r)i.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(n=t.s&this.DM,r=s;r<this.t;++r)i.data[r]=e(this.data[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=s;r<t.t;++r)i.data[r]=e(n,t.data[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},s.prototype.changeBit=function(t,e){var i=s.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i},s.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this.data[i]+t.data[i],e.data[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this.data[i],e.data[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t.data[i],e.data[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[i++]=r:r<-1&&(e.data[i++]=this.DV+r),e.t=i,e.clamp()},s.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},s.prototype.multiplyLowerTo=function(t,e,i){var r,n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i.data[--n]=0;for(r=i.t-this.t;n<r;++n)i.data[n+this.t]=this.am(0,t.data[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t.data[n],i,n,0,e-n);i.clamp()},s.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i.data[this.t+r-e]=this.am(e-r,t.data[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},s.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this.data[r])%t;return i},s.prototype.millerRabin=function(t){var e=this.subtract(s.ONE),i=e.getLowestSetBit();if(i<=0)return!1;for(var r,n=e.shiftRight(i),o={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},a=0;a<t;++a){do{r=new s(this.bitLength(),o)}while(r.compareTo(s.ONE)<=0||r.compareTo(e)>=0);var h=r.modPow(n,this);if(0!=h.compareTo(s.ONE)&&0!=h.compareTo(e)){for(var c=1;c++<i&&0!=h.compareTo(e);)if(0==(h=h.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=h.compareTo(e))return!1}}return!0},s.prototype.clone=function(){var t=o();return this.copyTo(t),t},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},s.prototype.equals=function(t){return 0==this.compareTo(t)},s.prototype.min=function(t){return this.compareTo(t)<0?this:t},s.prototype.max=function(t){return this.compareTo(t)>0?this:t},s.prototype.and=function(t){var e=o();return this.bitwiseTo(t,m,e),e},s.prototype.or=function(t){var e=o();return this.bitwiseTo(t,v,e),e},s.prototype.xor=function(t){var e=o();return this.bitwiseTo(t,b,e),e},s.prototype.andNot=function(t){var e=o();return this.bitwiseTo(t,w,e),e},s.prototype.not=function(){for(var t=o(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},s.prototype.shiftLeft=function(t){var e=o();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},s.prototype.shiftRight=function(t){var e=o();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},s.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+_(this.data[t]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=x(this.data[i]^e);return t},s.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},s.prototype.setBit=function(t){return this.changeBit(t,v)},s.prototype.clearBit=function(t){return this.changeBit(t,w)},s.prototype.flipBit=function(t){return this.changeBit(t,b)},s.prototype.add=function(t){var e=o();return this.addTo(t,e),e},s.prototype.subtract=function(t){var e=o();return this.subTo(t,e),e},s.prototype.multiply=function(t){var e=o();return this.multiplyTo(t,e),e},s.prototype.divide=function(t){var e=o();return this.divRemTo(t,e,null),e},s.prototype.remainder=function(t){var e=o();return this.divRemTo(t,null,e),e},s.prototype.divideAndRemainder=function(t){var e=o(),i=o();return this.divRemTo(t,e,i),new Array(e,i)},s.prototype.modPow=function(t,e){var i,r,n=t.bitLength(),s=f(1);if(n<=0)return s;i=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new g(e):e.isEven()?new T(e):new y(e);var a=new Array,h=3,c=i-1,l=(1<<i)-1;if(a[1]=r.convert(this),i>1){var u=o();for(r.sqrTo(a[1],u);h<=l;)a[h]=o(),r.mulTo(u,a[h-2],a[h]),h+=2}var d,m,v=t.t-1,b=!0,w=o();for(n=p(t.data[v])-1;v>=0;){for(n>=c?d=t.data[v]>>n-c&l:(d=(t.data[v]&(1<<n+1)-1)<<c-n,v>0&&(d|=t.data[v-1]>>this.DB+n-c)),h=i;0==(1&d);)d>>=1,--h;if((n-=h)<0&&(n+=this.DB,--v),b)a[d].copyTo(s),b=!1;else{for(;h>1;)r.sqrTo(s,w),r.sqrTo(w,s),h-=2;h>0?r.sqrTo(s,w):(m=s,s=w,w=m),r.mulTo(w,a[d],s)}for(;v>=0&&0==(t.data[v]&1<<n);)r.sqrTo(s,w),m=s,s=w,w=m,--n<0&&(n=this.DB-1,--v)}return r.revert(s)},s.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;for(var i=t.clone(),r=this.clone(),n=f(1),o=f(0),a=f(0),h=f(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(t,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&h.isEven()||(a.addTo(this,a),h.subTo(t,h)),a.rShiftTo(1,a)):h.isEven()||h.subTo(t,h),h.rShiftTo(1,h);i.compareTo(r)>=0?(i.subTo(r,i),e&&n.subTo(a,n),o.subTo(h,o)):(r.subTo(i,r),e&&a.subTo(n,a),h.subTo(o,h))}return 0!=r.compareTo(s.ONE)?s.ZERO:h.compareTo(t)>=0?h.subtract(t):h.signum()<0?(h.addTo(t,h),h.signum()<0?h.add(t):h):h},s.prototype.pow=function(t){return this.exp(t,new E)},s.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},s.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i.data[0]<=A[A.length-1]){for(e=0;e<A.length;++e)if(i.data[0]==A[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<A.length;){for(var r=A[e],n=e+1;n<A.length&&r<C;)r*=A[n++];for(r=i.modInt(r);e<n;)if(r%A[e++]==0)return!1}return i.millerRabin(t)}},28991:(t,e,i)=>{var r=i(3832);t.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},86971:(t,e,i)=>{var r=i(3832);i(83453),t.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1},83453:(t,e,i)=>{var r=i(3832);i(97116),r.mgf=r.mgf||{},(t.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{}).create=function(t){return{generate:function(e,i){for(var n=new r.util.ByteBuffer,s=Math.ceil(i/t.digestLength),o=0;o<s;o++){var a=new r.util.ByteBuffer;a.putInt32(o),t.start(),t.update(e+a.getBytes()),n.putBuffer(t.digest())}return n.truncate(n.length()-i),n.getBytes()}}}},66270:(t,e,i)=>{var r=i(3832);r.pki=r.pki||{};var n=t.exports=r.pki.oids=r.oids=r.oids||{};function s(t,e){n[t]=e,n[e]=t}function o(t,e){n[t]=e}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},97450:(t,e,i)=>{var r=i(3832);if(i(8925),i(3068),i(33480),i(28991),i(66270),i(98960),i(26953),i(49563),i(69372),i(28095),i(97116),void 0===n)var n=r.jsbn.BigInteger;var s=r.asn1,o=r.pki=r.pki||{};t.exports=o.pbe=r.pbe=r.pbe||{};var a=o.oids,h={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function u(t,e){return t.start().update(e).digest().getBytes()}function d(t){var e;if(t){if(!(e=o.oids[s.derToOid(t)])){var i=new Error("Unsupported PRF OID.");throw i.oid=t,i.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],i}}else e="hmacWithSHA1";return f(e)}function f(t){var e=r.md;switch(t){case"hmacWithSHA224":e=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var i=new Error("Unsupported PRF algorithm.");throw i.algorithm=t,i.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],i}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}o.encryptPrivateKeyInfo=function(t,e,i){(i=i||{}).saltSize=i.saltSize||8,i.count=i.count||2048,i.algorithm=i.algorithm||"aes128",i.prfAlgorithm=i.prfAlgorithm||"sha1";var n,h,c,l=r.random.getBytesSync(i.saltSize),u=i.count,d=s.integerToDer(u);if(0===i.algorithm.indexOf("aes")||"des"===i.algorithm){var p,g,y;switch(i.algorithm){case"aes128":n=16,p=16,g=a["aes128-CBC"],y=r.aes.createEncryptionCipher;break;case"aes192":n=24,p=16,g=a["aes192-CBC"],y=r.aes.createEncryptionCipher;break;case"aes256":n=32,p=16,g=a["aes256-CBC"],y=r.aes.createEncryptionCipher;break;case"des":n=8,p=8,g=a.desCBC,y=r.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=i.algorithm,x}var m="hmacWith"+i.prfAlgorithm.toUpperCase(),v=f(m),b=r.pkcs5.pbkdf2(e,l,u,n,v),w=r.random.getBytesSync(p);(E=y(b)).start(w),E.update(s.toDer(t)),E.finish(),c=E.output.getBytes();var _=function(t,e,i,n){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==n&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,r.util.hexToBytes(i.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[n]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),a}(l,d,n,m);h=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),_]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,w)])])])}else{var x;if("3des"!==i.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=i.algorithm,x;n=24;var E,S=new r.util.ByteBuffer(l);b=o.pbe.generatePkcs12Key(e,S,1,u,n),w=o.pbe.generatePkcs12Key(e,S,2,u,n),(E=r.des.createEncryptionCipher(b)).start(w),E.update(s.toDer(t)),E.finish(),c=E.output.getBytes(),h=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,d.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[h,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,c)])},o.decryptPrivateKeyInfo=function(t,e){var i=null,n={},a=[];if(!s.validate(t,h,n,a)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var l=s.derToOid(n.encryptionOid),u=o.pbe.getCipher(l,n.encryptionParams,e),d=r.util.createBuffer(n.encryptedData);return u.update(d),u.finish()&&(i=s.fromDer(u.output)),i},o.encryptedPrivateKeyToPem=function(t,e){var i={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(t).getBytes()};return r.pem.encode(i,{maxline:e})},o.encryptedPrivateKeyFromPem=function(t){var e=r.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var i=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw i.headerType=e.type,i}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(e.body)},o.encryptRsaPrivateKey=function(t,e,i){if(!(i=i||{}).legacy){var n=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t));return n=o.encryptPrivateKeyInfo(n,e,i),o.encryptedPrivateKeyToPem(n)}var a,h,c,l;switch(i.algorithm){case"aes128":a="AES-128-CBC",c=16,h=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",c=24,h=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",c=32,h=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",c=24,h=r.random.getBytesSync(8),l=r.des.createEncryptionCipher;break;case"des":a="DES-CBC",c=8,h=r.random.getBytesSync(8),l=r.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+i.algorithm+'".');throw u.algorithm=i.algorithm,u}var d=l(r.pbe.opensslDeriveBytes(e,h.substr(0,8),c));d.start(h),d.update(s.toDer(o.privateKeyToAsn1(t))),d.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:r.util.bytesToHex(h).toUpperCase()},body:d.output.getBytes()};return r.pem.encode(f)},o.decryptRsaPrivateKey=function(t,e){var i=null,n=r.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(n.procType&&"ENCRYPTED"===n.procType.type){var a,h;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,h=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,h=r.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,h=r.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,h=r.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,h=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,h=function(t){return r.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,h=function(t){return r.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,h=function(t){return r.rc2.createDecryptionCipher(t,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,c}var l=r.util.hexToBytes(n.dekInfo.parameters),u=h(r.pbe.opensslDeriveBytes(e,l.substr(0,8),a));if(u.start(l),u.update(r.util.createBuffer(n.body)),!u.finish())return i;i=u.output.getBytes()}else i=n.body;return null!==(i="ENCRYPTED PRIVATE KEY"===n.type?o.decryptPrivateKeyInfo(s.fromDer(i),e):s.fromDer(i))&&(i=o.privateKeyFromAsn1(i)),i},o.pbe.generatePkcs12Key=function(t,e,i,n,s,o){var a,h;if(null==o){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');o=r.md.sha1.create()}var c=o.digestLength,l=o.blockLength,u=new r.util.ByteBuffer,d=new r.util.ByteBuffer;if(null!=t){for(h=0;h<t.length;h++)d.putInt16(t.charCodeAt(h));d.putInt16(0)}var f=d.length(),p=e.length(),g=new r.util.ByteBuffer;g.fillWithByte(i,l);var y=l*Math.ceil(p/l),m=new r.util.ByteBuffer;for(h=0;h<y;h++)m.putByte(e.at(h%p));var v=l*Math.ceil(f/l),b=new r.util.ByteBuffer;for(h=0;h<v;h++)b.putByte(d.at(h%f));var w=m;w.putBuffer(b);for(var _=Math.ceil(s/c),x=1;x<=_;x++){var E=new r.util.ByteBuffer;E.putBytes(g.bytes()),E.putBytes(w.bytes());for(var S=0;S<n;S++)o.start(),o.update(E.getBytes()),E=o.digest();var T=new r.util.ByteBuffer;for(h=0;h<l;h++)T.putByte(E.at(h%c));var A=Math.ceil(p/l)+Math.ceil(f/l),C=new r.util.ByteBuffer;for(a=0;a<A;a++){var k=new r.util.ByteBuffer(w.getBytes(l)),R=511;for(h=T.length()-1;h>=0;h--)R>>=8,R+=T.at(h)+k.at(h),k.setAt(h,255&R);C.putBuffer(k)}w=C,u.putBuffer(E)}return u.truncate(u.length()-s),u},o.pbe.getCipher=function(t,e,i){switch(t){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(t,e,i);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(t,e,i);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=t,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},o.pbe.getCipherForPBES2=function(t,e,i){var n,a={},h=[];if(!s.validate(e,c,a,h))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=h,n;if((t=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,n.supportedOids=["pkcs5PBKDF2"],n;if((t=s.derToOid(a.encOid))!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"]&&t!==o.oids["des-EDE3-CBC"]&&t!==o.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var l,u,f=a.kdfSalt,p=r.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),o.oids[t]){case"aes128-CBC":l=16,u=r.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=r.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=r.des.createDecryptionCipher;break;case"desCBC":l=8,u=r.des.createDecryptionCipher}var g=d(a.prfOid),y=r.pkcs5.pbkdf2(i,f,p,l,g),m=a.encIv,v=u(y);return v.start(m),v},o.pbe.getCipherForPKCS12PBE=function(t,e,i){var n={},a=[];if(!s.validate(e,l,n,a))throw(g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,g;var h,c,u,f=r.util.createBuffer(n.salt),p=r.util.createBuffer(n.iterations);switch(p=p.getInt(p.length()<<3),t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:h=24,c=8,u=r.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:h=5,c=8,u=function(t,e){var i=r.rc2.createDecryptionCipher(t,40);return i.start(e,null),i};break;default:var g;throw(g=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,g}var y=d(n.prfOid),m=o.pbe.generatePkcs12Key(i,f,1,p,h,y);return y.start(),u(m,o.pbe.generatePkcs12Key(i,f,2,p,c,y))},o.pbe.opensslDeriveBytes=function(t,e,i,n){if(null==n){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');n=r.md.md5.create()}null===e&&(e="");for(var s=[u(n,t+e)],o=16,a=1;o<i;++a,o+=16)s.push(u(n,s[a-1]+t+e));return s.join("").substr(0,i)}},98960:(t,e,i)=>{var r=i(62678).Buffer,n=i(3832);i(36607),i(28991),i(97116);var s,o=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(s=i(25819)),t.exports=n.pbkdf2=o.pbkdf2=function(t,e,i,o,a,h){if("function"==typeof a&&(h=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&s.pbkdf2&&(null===a||"object"!=typeof a)&&(s.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),t=r.from(t,"binary"),e=r.from(e,"binary"),h?4===s.pbkdf2Sync.length?s.pbkdf2(t,e,i,o,(function(t,e){if(t)return h(t);h(null,e.toString("binary"))})):s.pbkdf2(t,e,i,o,a,(function(t,e){if(t)return h(t);h(null,e.toString("binary"))})):4===s.pbkdf2Sync.length?s.pbkdf2Sync(t,e,i,o).toString("binary"):s.pbkdf2Sync(t,e,i,o,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var c=a.digestLength;if(o>4294967295*c){var l=new Error("Derived key is too long.");if(h)return h(l);throw l}var u=Math.ceil(o/c),d=o-(u-1)*c,f=n.hmac.create();f.start(a,t);var p,g,y,m="";if(!h){for(var v=1;v<=u;++v){f.start(null,null),f.update(e),f.update(n.util.int32ToBytes(v)),p=y=f.digest().getBytes();for(var b=2;b<=i;++b)f.start(null,null),f.update(y),g=f.digest().getBytes(),p=n.util.xorBytes(p,g,c),y=g;m+=v<u?p:p.substr(0,d)}return m}function w(){if(v>u)return h(null,m);f.start(null,null),f.update(e),f.update(n.util.int32ToBytes(v)),p=y=f.digest().getBytes(),b=2,_()}function _(){if(b<=i)return f.start(null,null),f.update(y),g=f.digest().getBytes(),p=n.util.xorBytes(p,g,c),y=g,++b,n.util.setImmediate(_);m+=v<u?p:p.substr(0,d),++v,w()}v=1,w()}},26953:(t,e,i)=>{var r=i(3832);i(97116);var n=t.exports=r.pem=r.pem||{};function s(t){for(var e=t.name+": ",i=[],r=function(t,e){return" "+e},n=0;n<t.values.length;++n)i.push(t.values[n].replace(/^(\S+\r\n)/,r));e+=i.join(",")+"\r\n";var s=0,o=-1;for(n=0;n<e.length;++n,++s)if(s>65&&-1!==o){var a=e[o];","===a?(++o,e=e.substr(0,o)+"\r\n "+e.substr(o)):e=e.substr(0,o)+"\r\n"+a+e.substr(o+1),s=n-o-1,o=-1,++n}else" "!==e[n]&&"\t"!==e[n]&&","!==e[n]||(o=n);return e}function o(t){return t.replace(/^\s+/,"")}n.encode=function(t,e){e=e||{};var i,n="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(n+=s(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(n+=s(i={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),n+=s(i)),t.headers)for(var o=0;o<t.headers.length;++o)n+=s(t.headers[o]);return t.procType&&(n+="\r\n"),(n+=r.util.encode64(t.body,e.maxline||64)+"\r\n")+"-----END "+t.type+"-----\r\n"},n.decode=function(t){for(var e,i=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;e=n.exec(t);){var h=e[1];"NEW CERTIFICATE REQUEST"===h&&(h="CERTIFICATE REQUEST");var c={type:h,procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(e[3])};if(i.push(c),e[2]){for(var l=e[2].split(a),u=0;e&&u<l.length;){for(var d=l[u].replace(/\s+$/,""),f=u+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;d+=p,u=f}if(e=d.match(s)){for(var g={name:e[1],values:[]},y=e[2].split(","),m=0;m<y.length;++m)g.values.push(o(y[m]));if(c.procType)if(c.contentDomain||"Content-Domain"!==g.name)if(c.dekInfo||"DEK-Info"!==g.name)c.headers.push(g);else{if(0===g.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:y[0],parameters:y[1]||null}}else c.contentDomain=y[0]||"";else{if("Proc-Type"!==g.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==g.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:y[0],type:y[1]}}}++u}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===i.length)throw new Error("Invalid PEM formatted message.");return i}},18936:(t,e,i)=>{var r=i(3832);i(97116),i(49563),i(137);var n=t.exports=r.pkcs1=r.pkcs1||{};function s(t,e,i){i||(i=r.md.sha1.create());for(var n="",s=Math.ceil(e/i.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);i.start(),i.update(t+a),n+=i.digest().getBytes()}return n.substring(0,e)}n.encode_rsa_oaep=function(t,e,i){var n,o,a,h;"string"==typeof i?(n=i,o=arguments[3]||void 0,a=arguments[4]||void 0):i&&(n=i.label||void 0,o=i.seed||void 0,a=i.md||void 0,i.mgf1&&i.mgf1.md&&(h=i.mgf1.md)),a?a.start():a=r.md.sha1.create(),h||(h=a);var c=Math.ceil(t.n.bitLength()/8),l=c-2*a.digestLength-2;if(e.length>l)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=e.length,y.maxLength=l,y;n||(n=""),a.update(n,"raw");for(var u=a.digest(),d="",f=l-e.length,p=0;p<f;p++)d+="\0";var g=u.getBytes()+d+""+e;if(o){if(o.length!==a.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,y.digestLength=a.digestLength,y}}else o=r.random.getBytes(a.digestLength);var m=s(o,c-a.digestLength-1,h),v=r.util.xorBytes(g,m,g.length),b=s(v,a.digestLength,h),w=r.util.xorBytes(o,b,o.length);return"\0"+w+v},n.decode_rsa_oaep=function(t,e,i){var n,o,a;"string"==typeof i?(n=i,o=arguments[3]||void 0):i&&(n=i.label||void 0,o=i.md||void 0,i.mgf1&&i.mgf1.md&&(a=i.mgf1.md));var h=Math.ceil(t.n.bitLength()/8);if(e.length!==h)throw(v=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,v.expectedLength=h,v;if(void 0===o?o=r.md.sha1.create():o.start(),a||(a=o),h<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),o.update(n,"raw");for(var c=o.digest().getBytes(),l=e.charAt(0),u=e.substring(1,o.digestLength+1),d=e.substring(1+o.digestLength),f=s(d,o.digestLength,a),p=r.util.xorBytes(u,f,u.length),g=s(p,h-o.digestLength-1,a),y=r.util.xorBytes(d,g,d.length),m=y.substring(0,o.digestLength),v="\0"!==l,b=0;b<o.digestLength;++b)v|=c.charAt(b)!==m.charAt(b);for(var w=1,_=o.digestLength,x=o.digestLength;x<y.length;x++){var E=y.charCodeAt(x),S=1&E^1,T=w?65534:0;v|=E&T,_+=w&=S}if(v||1!==y.charCodeAt(_))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(_+1)}},79437:(t,e,i)=>{var r=i(3832);i(8925),i(3068),i(33480),i(66270),i(26953),i(95496),i(49563),i(97116),i(25414);var n=r.asn1,s=t.exports=r.pkcs7=r.pkcs7||{};function o(t){var e={},i=[];if(!n.validate(t,s.asn1.recipientInfoValidator,e,i)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=i,o}return{version:e.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(e.issuer),serialNumber:r.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:n.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){for(var e,i=[],s=0;s<t.length;++s)i.push((e=t[s],n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.encryptedContent.algorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return i}function h(t){var e=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:t.issuer}),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(t.serialNumber))]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.digestAlgorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.signatureAlgorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])),e.value.push(n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var i=n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<t.unauthenticatedAttributes.length;++s){var o=t.unauthenticatedAttributes[s];i.values.push(c(o))}e.value.push(i)}return e}function c(t){var e;if(t.type===r.pki.oids.contentType)e=n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.value).getBytes());else if(t.type===r.pki.oids.messageDigest)e=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===r.pki.oids.signingTime){var i=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=t.value;if("string"==typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?n.utcTimeToDate(o):n.generalizedTimeToDate(o):new Date(a)}e=o>=i&&o<s?n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(o)):n.create(n.Class.UNIVERSAL,n.Type.GENERALIZEDTIME,!1,n.dateToGeneralizedTime(o))}return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[e])])}function l(t,e,i){var s={};if(!n.validate(e,i,s,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(n.derToOid(s.contentType)!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var a="";if(r.util.isArray(s.encryptedContent))for(var h=0;h<s.encryptedContent.length;++h){if(s.encryptedContent[h].type!==n.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=s.encryptedContent[h].value}else a=s.encryptedContent;t.encryptedContent={algorithm:n.derToOid(s.encAlgorithm),parameter:r.util.createBuffer(s.encParameter.value),content:r.util.createBuffer(a)}}if(s.content){if(a="",r.util.isArray(s.content))for(h=0;h<s.content.length;++h){if(s.content[h].type!==n.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=s.content[h].value}else a=s.content;t.content=r.util.createBuffer(a)}return t.version=s.version.charCodeAt(0),t.rawCapture=s,s}function u(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:e=r.aes.createDecryptionCipher(t.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:e=r.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s.messageFromPem=function(t){var e=r.pem.decode(t)[0];if("PKCS7"!==e.type){var i=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=e.type,i}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=n.fromDer(e.body);return s.messageFromAsn1(o)},s.messageToPem=function(t,e){var i={type:"PKCS7",body:n.toDer(t.toAsn1()).getBytes()};return r.pem.encode(i,{maxline:e})},s.messageFromAsn1=function(t){var e={},i=[];if(!n.validate(t,s.asn1.contentInfoValidator,e,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=i,o}var a,h=n.derToOid(e.contentType);switch(h){case r.pki.oids.envelopedData:a=s.createEnvelopedData();break;case r.pki.oids.encryptedData:a=s.createEncryptedData();break;case r.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+h+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},s.createSignedData=function(){var t=null;return t={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(l(t,e,s.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,n=0;n<i.length;++n)t.certificates.push(r.pki.certificateFromAsn1(i[n]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],i=0;i<t.certificates.length;++i)e.push(r.pki.certificateToAsn1(t.certificates[i]));var s=[],o=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&o.value[0].value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,e)),s.length>0&&o.value[0].value.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(n.create(n.Class.UNIVERSAL,n.Type.SET,!0,t.signerInfos)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),o])},addSigner:function(e){var i=e.issuer,n=e.serialNumber;if(e.certificate){var s=e.certificate;"string"==typeof s&&(s=r.pki.certificateFromPem(s)),i=s.issuer.attributes,n=s.serialNumber}var o=e.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=r.pki.privateKeyFromPem(o));var a=e.digestAlgorithm||r.pki.oids.sha1;switch(a){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var h=e.authenticatedAttributes||[];if(h.length>0){for(var c=!1,l=!1,u=0;u<h.length;++u){var d=h[u];if(c||d.type!==r.pki.oids.contentType){if(l||d.type!==r.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:o,version:1,issuer:i,serialNumber:n,digestAlgorithm:a,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:h,unauthenticatedAttributes:[]})},sign:function(e){var i;e=e||{},("object"!=typeof t.content||null===t.contentInfo)&&(t.contentInfo=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(r.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof r.util.ByteBuffer?i=t.content.bytes():"string"==typeof t.content&&(i=r.util.encodeUtf8(t.content)),e.detached?t.detachedContent=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,i)])))),0!==t.signers.length&&function(e){var i;if(!(i=t.detachedContent?t.detachedContent:(i=t.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=n.derToOid(t.contentInfo.value[0].value),o=n.toDer(i);for(var a in o.getByte(),n.getBerValueLength(o),o=o.getBytes(),e)e[a].start().update(o);for(var l=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(0===d.authenticatedAttributes.length){if(s!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[]),p=0;p<d.authenticatedAttributes.length;++p){var g=d.authenticatedAttributes[p];g.type===r.pki.oids.messageDigest?g.value=e[d.digestAlgorithm].digest():g.type===r.pki.oids.signingTime&&(g.value||(g.value=l)),f.value.push(c(g)),d.authenticatedAttributesAsn1.value.push(c(g))}o=n.toDer(f).getBytes(),d.md.start().update(o)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],i=0;i<t.length;++i)e.push(h(t[i]));return e}(t.signers)}(function(){for(var e={},i=0;i<t.signers.length;++i){var s=t.signers[i];(o=s.digestAlgorithm)in e||(e[o]=r.md[r.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=e[o]:s.md=r.md[r.pki.oids[o]].create()}for(var o in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(o).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=r.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var t=null;return t={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(e){l(t,e,s.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),u(t)}}},s.createEnvelopedData=function(){var t=null;return t={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(e){var i=l(t,e,s.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],i=0;i<t.length;++i)e.push(o(t[i]));return e}(i.recipientInfos.value)},toAsn1:function(){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,a(t.recipients)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,(e=t.encryptedContent,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(r.pki.oids.data).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.algorithm).getBytes()),e.parameter?n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var i=e.issuer.attributes,r=0;r<t.recipients.length;++r){var n=t.recipients[r],s=n.issuer;if(n.serialNumber===e.serialNumber&&s.length===i.length){for(var o=!0,a=0;a<i.length;++a)if(s[a].type!==i[a].type||s[a].value!==i[a].value){o=!1;break}if(o)return n}}return null},decrypt:function(e,i){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==i)switch(e.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var n=i.decrypt(e.encryptedContent.content);t.encryptedContent.key=r.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}u(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,i){if(void 0===t.encryptedContent.content){var n,s,o;switch(i=i||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,i){case r.pki.oids["aes128-CBC"]:n=16,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:n=24,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:n=32,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:n=24,s=8,o=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+i)}if(void 0===e)e=r.util.createBuffer(r.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=i,t.encryptedContent.key=e,t.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(s));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var h=0;h<t.recipients.length;++h){var c=t.recipients[h];if(void 0===c.encryptedContent.content){if(c.encryptedContent.algorithm!==r.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm);c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data)}}}}}},95496:(t,e,i)=>{var r=i(3832);i(3068),i(97116);var n=r.asn1,s=t.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var h={name:"SignerInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,capture:"signerInfos",optional:!0,value:[h]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},29654:(t,e,i)=>{var r=i(3832);i(97116),i(15764),i(49563),function(){if(r.prime)t.exports=r.prime;else{var e=t.exports=r.prime=r.prime||{},i=r.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],s=new i(null);s.fromInt(30);var o=function(t,e){return t|e};e.generateProbablePrime=function(t,e,n){"function"==typeof e&&(n=e,e={});var s=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof s&&(s={name:s}),s.options=s.options||{};var o=e.prng||r.random,h={nextBytes:function(t){for(var e=o.getBytesSync(t.length),i=0;i<t.length;++i)t[i]=e.charCodeAt(i)}};if("PRIMEINC"===s.name)return function(t,e,n,s){return"workers"in n?function(t,e,n,s){if("undefined"==typeof Worker)return a(t,e,n,s);var o=c(t,e),h=n.workers,l=n.workLoad||100,u=30*l/8,d=n.workerScript||"forge/prime.worker.js";if(-1===h)return r.util.estimateCores((function(t,e){t&&(e=2),h=e-1,f()}));function f(){h=Math.max(1,h);for(var r=[],n=0;n<h;++n)r[n]=new Worker(d);for(n=0;n<h;++n)r[n].addEventListener("message",f);var a=!1;function f(n){if(!a){var h=n.data;if(h.found){for(var d=0;d<r.length;++d)r[d].terminate();return a=!0,s(null,new i(h.prime,16))}o.bitLength()>t&&(o=c(t,e));var f=o.toString(16);n.target.postMessage({hex:f,workLoad:l}),o.dAddOffset(u,0)}}}f()}(t,e,n,s):a(t,e,n,s)}(t,h,s.options,n);throw new Error("Invalid prime generation algorithm: "+s.name)}}function a(t,e,i,r){var n=c(t,e),s=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(n.bitLength());"millerRabinTests"in i&&(s=i.millerRabinTests);var o=10;"maxBlockTime"in i&&(o=i.maxBlockTime),h(n,t,e,0,s,o,r)}function h(t,e,i,s,o,a,l){var u=+new Date;do{if(t.bitLength()>e&&(t=c(e,i)),t.isProbablePrime(o))return l(null,t);t.dAddOffset(n[s++%8],0)}while(a<0||+new Date-u<a);r.util.setImmediate((function(){h(t,e,i,s,o,a,l)}))}function c(t,e){var r=new i(t,e),n=t-1;return r.testBit(n)||r.bitwiseTo(i.ONE.shiftLeft(n),o,r),r.dAddOffset(31-r.mod(s).byteValue(),0),r}}()},74933:(t,e,i)=>{var r=i(34155),n=i(3832);i(97116);var s=null;!n.util.isNodejs||n.options.usePureJavaScript||r.versions["node-webkit"]||(s=i(25819)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},i=t.md,r=new Array(32),o=0;o<32;++o)r[o]=i.create();function a(){if(e.pools[0].messageLength>=32)return h();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),h()}function h(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var i=1,r=0;r<32;++r)e.reseeds%i==0&&(t.update(e.pools[r].digest().getBytes()),e.pools[r].start()),i<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var n=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(n),e.generated=0}function c(t){var e=null,i=n.util.globalScope,r=i.crypto||i.msCrypto;r&&r.getRandomValues&&(e=function(t){return r.getRandomValues(t)});var s=n.util.createBuffer();if(e)for(;s.length()<t;){var o=Math.max(1,Math.min(t-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{e(a);for(var h=0;h<a.length;++h)s.putInt32(a[h])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(s.length()<t)for(var c,l,u,d=Math.floor(65536*Math.random());s.length()<t;)for(l=16807*(65535&d),l+=(32767&(c=16807*(d>>16)))<<16,d=4294967295&(l=(2147483647&(l+=c>>15))+(l>>31)),h=0;h<3;++h)u=d>>>(h<<3),u^=Math.floor(256*Math.random()),s.putByte(255&u);return s.getBytes(t)}return e.pools=r,e.pool=0,e.generate=function(t,i){if(!i)return e.generateSync(t);var r=e.plugin.cipher,s=e.plugin.increment,o=e.plugin.formatKey,a=e.plugin.formatSeed,c=n.util.createBuffer();e.key=null,function l(u){if(u)return i(u);if(c.length()>=t)return i(null,c.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return n.util.nextTick((function(){!function(t){if(e.pools[0].messageLength>=32)return h(),t();var i=32-e.pools[0].messageLength<<5;e.seedFile(i,(function(i,r){if(i)return t(i);e.collect(r),h(),t()}))}(l)}));var d=r(e.key,e.seed);e.generated+=d.length,c.putBytes(d),e.key=o(r(e.key,s(e.seed))),e.seed=a(r(e.key,e.seed)),n.util.setImmediate(l)}()},e.generateSync=function(t){var i=e.plugin.cipher,r=e.plugin.increment,s=e.plugin.formatKey,o=e.plugin.formatSeed;e.key=null;for(var h=n.util.createBuffer();h.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&a();var c=i(e.key,e.seed);e.generated+=c.length,h.putBytes(c),e.key=s(i(e.key,r(e.seed))),e.seed=o(i(e.key,e.seed))}return h.getBytes(t)},s?(e.seedFile=function(t,e){s.randomBytes(t,(function(t,i){if(t)return e(t);e(null,i.toString())}))},e.seedFileSync=function(t){return s.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,c(t))}catch(t){e(t)}},e.seedFileSync=c),e.collect=function(t){for(var i=t.length,r=0;r<i;++r)e.pools[e.pool].update(t.substr(r,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,i){for(var r="",n=0;n<i;n+=8)r+=String.fromCharCode(t>>n&255);e.collect(r)},e.registerWorker=function(t){t===self?e.seedFile=function(t,e){self.addEventListener("message",(function t(i){var r=i.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",t),e(r.forge.prng.err,r.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:t}}})}:t.addEventListener("message",(function(i){var r=i.data;r.forge&&r.forge.prng&&e.seedFile(r.forge.prng.needed,(function(e,i){t.postMessage({forge:{prng:{err:e,bytes:i}}})}))}))},e}},96007:(t,e,i)=>{var r=i(3832);i(49563),i(97116),(t.exports=r.pss=r.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,i=t.md,n=t.mgf,s=i.digestLength,o=t.salt||null;if("string"==typeof o&&(o=r.util.createBuffer(o)),"saltLength"in t)e=t.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");e=o.length()}if(null!==o&&o.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||r.random,h={encode:function(t,h){var c,l,u=h-1,d=Math.ceil(u/8),f=t.digest().getBytes();if(d<s+e+2)throw new Error("Message is too long to encrypt.");l=null===o?a.getBytesSync(e):o.bytes();var p=new r.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(f),p.putBytes(l),i.start(),i.update(p.getBytes());var g=i.digest().getBytes(),y=new r.util.ByteBuffer;y.fillWithByte(0,d-e-s-2),y.putByte(1),y.putBytes(l);var m=y.getBytes(),v=d-s-1,b=n.generate(g,v),w="";for(c=0;c<v;c++)w+=String.fromCharCode(m.charCodeAt(c)^b.charCodeAt(c));var _=65280>>8*d-u&255;return(w=String.fromCharCode(w.charCodeAt(0)&~_)+w.substr(1))+g+String.fromCharCode(188)},verify:function(t,o,a){var h,c=a-1,l=Math.ceil(c/8);if(o=o.substr(-l),l<s+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var u=l-s-1,d=o.substr(0,u),f=o.substr(u,s),p=65280>>8*l-c&255;if(0!=(d.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var g=n.generate(f,u),y="";for(h=0;h<u;h++)y+=String.fromCharCode(d.charCodeAt(h)^g.charCodeAt(h));y=String.fromCharCode(y.charCodeAt(0)&~p)+y.substr(1);var m=l-s-e-2;for(h=0;h<m;h++)if(0!==y.charCodeAt(h))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=y.substr(-e),b=new r.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(t),b.putBytes(v),i.start(),i.update(b.getBytes()),f===i.digest().getBytes()}};return h}},49563:(t,e,i)=>{var r=i(3832);i(8925),i(41668),i(74933),i(97116),r.random&&r.random.getBytes?t.exports=r.random:function(e){var i={},n=new Array(4),s=r.util.createBuffer();function o(){var t=r.prng.create(i);return t.getBytes=function(e,i){return t.generate(e,i)},t.getBytesSync=function(e){return t.generate(e)},t}i.formatKey=function(t){var e=r.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),r.aes._expandKey(t,!1)},i.formatSeed=function(t){var e=r.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},i.cipher=function(t,e){return r.aes._updateBlock(t,e,n,!1),s.putInt32(n[0]),s.putInt32(n[1]),s.putInt32(n[2]),s.putInt32(n[3]),s.getBytes()},i.increment=function(t){return++t[3],t},i.md=r.md.sha256;var a=o(),h=null,c=r.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(h=function(t){return l.getRandomValues(t)}),r.options.usePureJavaScript||!r.util.isNodejs&&!h){if("undefined"==typeof window||window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var u="";for(var d in navigator)try{"string"==typeof navigator[d]&&(u+=navigator[d])}catch(t){}a.collect(u),u=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(r.random)for(var d in a)r.random[d]=a[d];else r.random=a;r.random.createInstance=o,t.exports=r.random}("undefined"!=typeof jQuery?jQuery:null)},69372:(t,e,i)=>{var r=i(3832);i(97116);var n=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(t,e){"string"==typeof t&&(t=r.util.createBuffer(t)),e=e||128;var i,s=t,o=t.length(),a=e,h=Math.ceil(a/8),c=255>>(7&a);for(i=o;i<128;i++)s.putByte(n[s.at(i-1)+s.at(i-o)&255]);for(s.setAt(128-h,n[s.at(128-h)&c]),i=127-h;i>=0;i--)s.setAt(i,n[s.at(i+1)^s.at(i+h)]);return s};var h=function(t,e,i){var n,h,c,l,u=!1,d=null,f=null,p=null,g=[];for(t=r.rc2.expandKey(t,e),c=0;c<64;c++)g.push(t.getInt16Le());i?(n=function(t){for(c=0;c<4;c++)t[c]+=g[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),t[c]=o(t[c],s[c]),l++},h=function(t){for(c=0;c<4;c++)t[c]+=g[63&t[(c+3)%4]]}):(n=function(t){for(c=3;c>=0;c--)t[c]=a(t[c],s[c]),t[c]-=g[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),l--},h=function(t){for(c=3;c>=0;c--)t[c]-=g[63&t[(c+3)%4]]});var y=function(t){var e=[];for(c=0;c<4;c++){var r=d.getInt16Le();null!==p&&(i?r^=p.getInt16Le():p.putInt16Le(r)),e.push(65535&r)}l=i?0:63;for(var n=0;n<t.length;n++)for(var s=0;s<t[n][0];s++)t[n][1](e);for(c=0;c<4;c++)null!==p&&(i?p.putInt16Le(e[c]):e[c]^=p.getInt16Le()),f.putInt16Le(e[c])},m=null;return m={start:function(t,e){t&&"string"==typeof t&&(t=r.util.createBuffer(t)),u=!1,d=r.util.createBuffer(),f=e||new r.util.createBuffer,p=t,m.output=f},update:function(t){for(u||d.putBuffer(t);d.length()>=8;)y([[5,n],[1,h],[6,n],[1,h],[5,n]])},finish:function(t){var e=!0;if(i)if(t)e=t(8,d,!i);else{var r=8===d.length()?8:8-d.length();d.fillWithByte(r,r)}if(e&&(u=!0,m.update()),!i&&(e=0===d.length()))if(t)e=t(8,f,!i);else{var n=f.length(),s=f.at(n-1);s>n?e=!1:f.truncate(s)}return e}}};r.rc2.startEncrypting=function(t,e,i){var n=r.rc2.createEncryptionCipher(t,128);return n.start(e,i),n},r.rc2.createEncryptionCipher=function(t,e){return h(t,e,!0)},r.rc2.startDecrypting=function(t,e,i){var n=r.rc2.createDecryptionCipher(t,128);return n.start(e,i),n},r.rc2.createDecryptionCipher=function(t,e){return h(t,e,!1)}},28095:(t,e,i)=>{var r=i(3832);if(i(3068),i(15764),i(66270),i(18936),i(29654),i(49563),i(97116),void 0===n)var n=r.jsbn.BigInteger;var s=r.util.isNodejs?i(25819):null,o=r.asn1,a=r.util;r.pki=r.pki||{},t.exports=r.pki.rsa=r.rsa=r.rsa||{};var h=r.pki,c=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},u={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},g=function(t){var e;if(!(t.algorithm in h.oids)){var i=new Error("Unknown message digest algorithm.");throw i.algorithm=t.algorithm,i}e=h.oids[t.algorithm];var r=o.oidToDer(e).getBytes(),n=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,r)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(a),o.toDer(n).getBytes()},y=function(t,e,i){if(i)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var s;e.dP||(e.dP=e.d.mod(e.p.subtract(n.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(n.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{s=new n(r.util.bytesToHex(r.random.getBytes(e.n.bitLength()/8)),16)}while(s.compareTo(e.n)>=0||!s.gcd(e.n).equals(n.ONE));for(var o=(t=t.multiply(s.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(a)<0;)o=o.add(e.p);var h=o.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return h.multiply(s.modInverse(e.n)).mod(e.n)};function m(t,e,i){var n=r.util.createBuffer(),s=Math.ceil(e.n.bitLength()/8);if(t.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=s-11,o}n.putByte(0),n.putByte(i);var a,h=s-3-t.length;if(0===i||1===i){a=0===i?0:255;for(var c=0;c<h;++c)n.putByte(a)}else for(;h>0;){var l=0,u=r.random.getBytes(h);for(c=0;c<h;++c)0===(a=u.charCodeAt(c))?++l:n.putByte(a);h=l}return n.putByte(0),n.putBytes(t),n}function v(t,e,i,n){var s=Math.ceil(e.n.bitLength()/8),o=r.util.createBuffer(t),a=o.getByte(),h=o.getByte();if(0!==a||i&&0!==h&&1!==h||!i&&2!=h||i&&0===h&&void 0===n)throw new Error("Encryption block is invalid.");var c=0;if(0===h){c=s-3-n;for(var l=0;l<c;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===h)for(c=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++c}else if(2===h)for(c=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++c}if(0!==o.getByte()||c!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function b(t,e,i){"function"==typeof e&&(i=e,e={});var s={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function o(){a(t.pBits,(function(e,r){return e?i(e):(t.p=r,null!==t.q?c(e,t.q):void a(t.qBits,c))}))}function a(t,e){r.prime.generateProbablePrime(t,s,e)}function c(e,r){if(e)return i(e);if(t.q=r,t.p.compareTo(t.q)<0){var s=t.p;t.p=t.q,t.q=s}if(0!==t.p.subtract(n.ONE).gcd(t.e).compareTo(n.ONE))return t.p=null,void o();if(0!==t.q.subtract(n.ONE).gcd(t.e).compareTo(n.ONE))return t.q=null,void a(t.qBits,c);if(t.p1=t.p.subtract(n.ONE),t.q1=t.q.subtract(n.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(n.ONE))return t.p=t.q=null,void o();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,c);var l=t.e.modInverse(t.phi);t.keys={privateKey:h.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:h.rsa.setPublicKey(t.n,t.e)},i(null,t.keys)}"prng"in e&&(s.prng=e.prng),o()}function w(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var i=r.util.hexToBytes(e);return i.length>1&&(0===i.charCodeAt(0)&&0==(128&i.charCodeAt(1))||255===i.charCodeAt(0)&&128==(128&i.charCodeAt(1)))?i.substr(1):i}function _(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function x(t){return r.util.isNodejs&&"function"==typeof s[t]}function E(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.crypto&&"object"==typeof a.globalScope.crypto.subtle&&"function"==typeof a.globalScope.crypto.subtle[t]}function S(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.msCrypto&&"object"==typeof a.globalScope.msCrypto.subtle&&"function"==typeof a.globalScope.msCrypto.subtle[t]}function T(t){for(var e=r.util.hexToBytes(t.toString(16)),i=new Uint8Array(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}h.rsa.encrypt=function(t,e,i){var s,o=i,a=Math.ceil(e.n.bitLength()/8);!1!==i&&!0!==i?(o=2===i,s=m(t,e,i)):(s=r.util.createBuffer()).putBytes(t);for(var h=new n(s.toHex(),16),c=y(h,e,o).toString(16),l=r.util.createBuffer(),u=a-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(r.util.hexToBytes(c)),l.getBytes()},h.rsa.decrypt=function(t,e,i,s){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=o,a}var h=new n(r.util.createBuffer(t).toHex(),16);if(h.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=y(h,e,i).toString(16),l=r.util.createBuffer(),u=o-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(r.util.hexToBytes(c)),!1!==s?v(l.getBytes(),e,i):l.getBytes()},h.rsa.createKeyPairGenerationState=function(t,e,i){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var s,o=(i=i||{}).prng||r.random,a={nextBytes:function(t){for(var e=o.getBytesSync(t.length),i=0;i<t.length;++i)t[i]=e.charCodeAt(i)}},h=i.algorithm||"PRIMEINC";if("PRIMEINC"!==h)throw new Error("Invalid key generation algorithm: "+h);return(s={algorithm:h,state:0,bits:t,rng:a,eInt:e||65537,e:new n(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},h.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var i=new n(null);i.fromInt(30);for(var r,s=0,o=function(t,e){return t|e},a=+new Date,l=0;null===t.keys&&(e<=0||l<e);){if(0===t.state){var u=null===t.p?t.pBits:t.qBits,d=u-1;0===t.pqState?(t.num=new n(u,t.rng),t.num.testBit(d)||t.num.bitwiseTo(n.ONE.shiftLeft(d),o,t.num),t.num.dAddOffset(31-t.num.mod(i).byteValue(),0),s=0,++t.pqState):1===t.pqState?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(_(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[s++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(n.ONE).gcd(t.e).compareTo(n.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(n.ONE),t.q1=t.q.subtract(n.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(n.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var f=t.e.modInverse(t.phi);t.keys={privateKey:h.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:h.rsa.setPublicKey(t.n,t.e)}}l+=(r=+new Date)-a,a=r}return null!==t.keys},h.rsa.generateKeyPair=function(t,e,i,n){if(1===arguments.length?"object"==typeof t?(i=t,t=void 0):"function"==typeof t&&(n=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(n=e,e=void 0):"number"!=typeof e&&(i=e,e=void 0):(i=t,n=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof i&&(n=i,i=void 0):(n=i,i=e,e=void 0)),i=i||{},void 0===t&&(t=i.bits||2048),void 0===e&&(e=i.e||65537),!r.options.usePureJavaScript&&!i.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(n){if(x("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,i){if(t)return n(t);n(null,{privateKey:h.privateKeyFromPem(i),publicKey:h.publicKeyFromPem(e)})}));if(E("generateKey")&&E("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:T(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){n(t)})).then((function(t){if(t){var e=h.privateKeyFromAsn1(o.fromDer(r.util.createBuffer(t)));n(null,{privateKey:e,publicKey:h.setRsaPublicKey(e.n,e.e)})}}));if(S("generateKey")&&S("exportKey")){var c=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:T(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var e=t.target.result,i=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);i.oncomplete=function(t){var e=t.target.result,i=h.privateKeyFromAsn1(o.fromDer(r.util.createBuffer(e)));n(null,{privateKey:i,publicKey:h.setRsaPublicKey(i.n,i.e)})},i.onerror=function(t){n(t)}},void(c.onerror=function(t){n(t)})}}else if(x("generateKeyPairSync")){var l=s.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:h.privateKeyFromPem(l.privateKey),publicKey:h.publicKeyFromPem(l.publicKey)}}var u=h.rsa.createKeyPairGenerationState(t,e,i);if(!n)return h.rsa.stepKeyPairGenerationState(u,0),u.keys;b(u,i,n)},h.setRsaPublicKey=h.rsa.setPublicKey=function(t,e){var i={n:t,e,encrypt:function(t,e,n){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,i){return m(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return r.pkcs1.encode_rsa_oaep(e,t,n)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var s=e.encode(t,i,!0);return h.rsa.encrypt(s,i,!0)},verify:function(t,e,n,s){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===n?n={verify:function(t,e){e=v(e,i,!0);var n=o.fromDer(e,{parseAllBytes:s._parseAllDigestBytes}),a={},h=[];if(!o.validate(n,p,a,h))throw(c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=h,c;var c,l=o.derToOid(a.algorithmIdentifier);if(l!==r.oids.md2&&l!==r.oids.md5&&l!==r.oids.sha1&&l!==r.oids.sha224&&l!==r.oids.sha256&&l!==r.oids.sha384&&l!==r.oids.sha512&&l!==r.oids["sha512-224"]&&l!==r.oids["sha512-256"])throw(c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,c;if((l===r.oids.md2||l===r.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(t,e){return t===v(e,i,!0)}});var a=h.rsa.decrypt(e,i,!0,!1);return n.verify(t,a,i.n.bitLength())}};return i},h.setRsaPrivateKey=h.rsa.setPrivateKey=function(t,e,i,n,s,o,a,c){var l={n:t,e,d:i,p:n,q:s,dP:o,dQ:a,qInv:c,decrypt:function(t,e,i){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var n=h.rsa.decrypt(t,l,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:v};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return r.pkcs1.decode_rsa_oaep(e,t,i)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(n,l,!1)},sign:function(t,e){var i=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:g},i=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},i=1);var r=e.encode(t,l.n.bitLength());return h.rsa.encrypt(r,l,i)}};return l},h.wrapRsaPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(h.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(t).getBytes())])},h.privateKeyFromAsn1=function(t){var e,i,s,a,c,d,f,p,g={},y=[];if(o.validate(t,l,g,y)&&(t=o.fromDer(r.util.createBuffer(g.privateKey))),g={},y=[],!o.validate(t,u,g,y)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=y,m}return e=r.util.createBuffer(g.privateKeyModulus).toHex(),i=r.util.createBuffer(g.privateKeyPublicExponent).toHex(),s=r.util.createBuffer(g.privateKeyPrivateExponent).toHex(),a=r.util.createBuffer(g.privateKeyPrime1).toHex(),c=r.util.createBuffer(g.privateKeyPrime2).toHex(),d=r.util.createBuffer(g.privateKeyExponent1).toHex(),f=r.util.createBuffer(g.privateKeyExponent2).toHex(),p=r.util.createBuffer(g.privateKeyCoefficient).toHex(),h.setRsaPrivateKey(new n(e,16),new n(i,16),new n(s,16),new n(a,16),new n(c,16),new n(d,16),new n(f,16),new n(p,16))},h.privateKeyToAsn1=h.privateKeyToRSAPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.qInv))])},h.publicKeyFromAsn1=function(t){var e={},i=[];if(o.validate(t,f,e,i)){var s,a=o.derToOid(e.publicKeyOid);if(a!==h.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=a,s;t=e.rsaPublicKey}if(i=[],!o.validate(t,d,e,i))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=i,s;var c=r.util.createBuffer(e.publicKeyModulus).toHex(),l=r.util.createBuffer(e.publicKeyExponent).toHex();return h.setRsaPublicKey(new n(c,16),new n(l,16))},h.publicKeyToAsn1=h.publicKeyToSubjectPublicKeyInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(h.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[h.publicKeyToRSAPublicKey(t)])])},h.publicKeyToRSAPublicKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(t.e))])}},137:(t,e,i)=>{var r=i(3832);i(28991),i(97116);var n=t.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=n,n.create=function(){o||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),o=!0);var t=null,e=r.util.createBuffer(),i=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=r.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n}};return n.start(),n.update=function(s,o){"utf8"===o&&(s=r.util.encodeUtf8(s));var h=s.length;n.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=h[1],h[1]=h[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,h[0]=h[1]/4294967296>>>0;return e.putBytes(s),a(t,i,e),(e.read>2048||0===e.length())&&e.compact(),n},n.digest=function(){var o=r.util.createBuffer();o.putBytes(e.bytes());var h,c=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;o.putBytes(s.substr(0,n.blockLength-c));for(var l=8*n.fullMessageLength[0],u=0;u<n.fullMessageLength.length-1;++u)l+=(h=8*n.fullMessageLength[u+1])/4294967296>>>0,o.putInt32(l>>>0),l=h>>>0;o.putInt32(l);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};a(d,i,o);var f=r.util.createBuffer();return f.putInt32(d.h0),f.putInt32(d.h1),f.putInt32(d.h2),f.putInt32(d.h3),f.putInt32(d.h4),f},n};var s=null,o=!1;function a(t,e,i){for(var r,n,s,o,a,h,c,l=i.length();l>=64;){for(n=t.h0,s=t.h1,o=t.h2,a=t.h3,h=t.h4,c=0;c<16;++c)r=i.getInt32(),e[c]=r,r=(n<<5|n>>>27)+(a^s&(o^a))+h+1518500249+r,h=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=r;for(;c<20;++c)r=(r=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|r>>>31,e[c]=r,r=(n<<5|n>>>27)+(a^s&(o^a))+h+1518500249+r,h=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=r;for(;c<32;++c)r=(r=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|r>>>31,e[c]=r,r=(n<<5|n>>>27)+(s^o^a)+h+1859775393+r,h=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=r;for(;c<40;++c)r=(r=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|r>>>30,e[c]=r,r=(n<<5|n>>>27)+(s^o^a)+h+1859775393+r,h=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=r;for(;c<60;++c)r=(r=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|r>>>30,e[c]=r,r=(n<<5|n>>>27)+(s&o|a&(s^o))+h+2400959708+r,h=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=r;for(;c<80;++c)r=(r=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|r>>>30,e[c]=r,r=(n<<5|n>>>27)+(s^o^a)+h+3395469782+r,h=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=r;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+h|0,l-=64}}},41668:(t,e,i)=>{var r=i(3832);i(28991),i(97116);var n=t.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=n,n.create=function(){o||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var t=null,e=r.util.createBuffer(),i=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=r.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(s,o){"utf8"===o&&(s=r.util.encodeUtf8(s));var a=s.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),h(t,i,e),(e.read>2048||0===e.length())&&e.compact(),n},n.digest=function(){var o=r.util.createBuffer();o.putBytes(e.bytes());var a,c=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;o.putBytes(s.substr(0,n.blockLength-c));for(var l=8*n.fullMessageLength[0],u=0;u<n.fullMessageLength.length-1;++u)l+=(a=8*n.fullMessageLength[u+1])/4294967296>>>0,o.putInt32(l>>>0),l=a>>>0;o.putInt32(l);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};h(d,i,o);var f=r.util.createBuffer();return f.putInt32(d.h0),f.putInt32(d.h1),f.putInt32(d.h2),f.putInt32(d.h3),f.putInt32(d.h4),f.putInt32(d.h5),f.putInt32(d.h6),f.putInt32(d.h7),f},n};var s=null,o=!1,a=null;function h(t,e,i){for(var r,n,s,o,h,c,l,u,d,f,p,g,y,m=i.length();m>=64;){for(h=0;h<16;++h)e[h]=i.getInt32();for(;h<64;++h)r=((r=e[h-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=((n=e[h-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[h]=r+e[h-7]+n+e[h-16]|0;for(c=t.h0,l=t.h1,u=t.h2,d=t.h3,f=t.h4,p=t.h5,g=t.h6,y=t.h7,h=0;h<64;++h)s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=c&l|u&(c^l),r=y+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(g^f&(p^g))+a[h]+e[h],y=g,g=p,p=f,f=d+r>>>0,d=u,u=l,l=c,c=r+(n=s+o)>>>0;t.h0=t.h0+c|0,t.h1=t.h1+l|0,t.h2=t.h2+u|0,t.h3=t.h3+d|0,t.h4=t.h4+f|0,t.h5=t.h5+p|0,t.h6=t.h6+g|0,t.h7=t.h7+y|0,m-=64}}},63219:(t,e,i)=>{var r=i(3832);i(28991),i(97116);var n=t.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=n;var s=r.sha384=r.sha512.sha384=r.sha512.sha384||{};s.create=function(){return n.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=s,r.sha512.sha256=r.sha512.sha256||{create:function(){return n.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return n.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,n.create=function(t){if(a||(o=String.fromCharCode(128),o+=r.util.fillString(String.fromCharCode(0),128),h=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===t&&(t="SHA-512"),!(t in c))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=c[t],i=null,n=r.util.createBuffer(),s=new Array(80),u=0;u<80;++u)s[u]=new Array(2);var d=64;switch(t){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28}var f={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var t=f.messageLengthSize/4,s=0;s<t;++s)f.fullMessageLength.push(0);for(n=r.util.createBuffer(),i=new Array(e.length),s=0;s<e.length;++s)i[s]=e[s].slice(0);return f}};return f.start(),f.update=function(t,e){"utf8"===e&&(t=r.util.encodeUtf8(t));var o=t.length;f.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=o[1],o[1]=o[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return n.putBytes(t),l(i,s,n),(n.read>2048||0===n.length())&&n.compact(),f},f.digest=function(){var e=r.util.createBuffer();e.putBytes(n.bytes());var a,h=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;e.putBytes(o.substr(0,f.blockLength-h));for(var c=8*f.fullMessageLength[0],u=0;u<f.fullMessageLength.length-1;++u)c+=(a=8*f.fullMessageLength[u+1])/4294967296>>>0,e.putInt32(c>>>0),c=a>>>0;e.putInt32(c);var d=new Array(i.length);for(u=0;u<i.length;++u)d[u]=i[u].slice(0);l(d,s,e);var p,g=r.util.createBuffer();for(p="SHA-512"===t?d.length:"SHA-384"===t?d.length-2:d.length-4,u=0;u<p;++u)g.putInt32(d[u][0]),u===p-1&&"SHA-512/224"===t||g.putInt32(d[u][1]);return g},f};var o=null,a=!1,h=null,c=null;function l(t,e,i){for(var r,n,s,o,a,c,l,u,d,f,p,g,y,m,v,b,w,_,x,E,S,T,A,C,k,R,P,I,O,M,D,B,L,N=i.length();N>=128;){for(P=0;P<16;++P)e[P][0]=i.getInt32()>>>0,e[P][1]=i.getInt32()>>>0;for(;P<80;++P)r=(((I=(M=e[P-2])[0])>>>19|(O=M[1])<<13)^(O>>>29|I<<3)^I>>>6)>>>0,n=((I<<13|O>>>19)^(O<<3|I>>>29)^(I<<26|O>>>6))>>>0,s=(((I=(B=e[P-15])[0])>>>1|(O=B[1])<<31)^(I>>>8|O<<24)^I>>>7)>>>0,o=((I<<31|O>>>1)^(I<<24|O>>>8)^(I<<25|O>>>7))>>>0,D=e[P-7],L=e[P-16],O=n+D[1]+o+L[1],e[P][0]=r+D[0]+s+L[0]+(O/4294967296>>>0)>>>0,e[P][1]=O>>>0;for(p=t[0][0],g=t[0][1],y=t[1][0],m=t[1][1],v=t[2][0],b=t[2][1],w=t[3][0],_=t[3][1],x=t[4][0],E=t[4][1],S=t[5][0],T=t[5][1],A=t[6][0],C=t[6][1],k=t[7][0],R=t[7][1],P=0;P<80;++P)l=((x>>>14|E<<18)^(x>>>18|E<<14)^(E>>>9|x<<23))>>>0,u=(A^x&(S^A))>>>0,a=((p>>>28|g<<4)^(g>>>2|p<<30)^(g>>>7|p<<25))>>>0,c=((p<<4|g>>>28)^(g<<30|p>>>2)^(g<<25|p>>>7))>>>0,d=(p&y|v&(p^y))>>>0,f=(g&m|b&(g^m))>>>0,O=R+(((x<<18|E>>>14)^(x<<14|E>>>18)^(E<<23|x>>>9))>>>0)+((C^E&(T^C))>>>0)+h[P][1]+e[P][1],r=k+l+u+h[P][0]+e[P][0]+(O/4294967296>>>0)>>>0,n=O>>>0,s=a+d+((O=c+f)/4294967296>>>0)>>>0,o=O>>>0,k=A,R=C,A=S,C=T,S=x,T=E,x=w+r+((O=_+n)/4294967296>>>0)>>>0,E=O>>>0,w=v,_=b,v=y,b=m,y=p,m=g,p=r+s+((O=n+o)/4294967296>>>0)>>>0,g=O>>>0;O=t[0][1]+g,t[0][0]=t[0][0]+p+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+m,t[1][0]=t[1][0]+y+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+b,t[2][0]=t[2][0]+v+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+_,t[3][0]=t[3][0]+w+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+E,t[4][0]=t[4][0]+x+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+T,t[5][0]=t[5][0]+S+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+C,t[6][0]=t[6][0]+A+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+R,t[7][0]=t[7][0]+k+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,N-=128}}},97116:(t,e,i)=>{var r=i(34155),n=i(62678).Buffer,s=i(3832),o=i(78807),a=t.exports=s.util=s.util||{};function h(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function c(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(a.isArrayBuffer(t)||a.isArrayBufferView(t))if(void 0!==n&&t instanceof n)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var i=0;i<e.length;++i)this.putByte(e[i])}}else(t instanceof c||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if(void 0!==r&&r.nextTick&&!r.browser)return a.nextTick=r.nextTick,void("function"==typeof setImmediate?a.setImmediate=setImmediate:a.setImmediate=a.nextTick);if("function"==typeof setImmediate)return a.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(a.nextTick=function(t){return setImmediate(t)});if(a.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];a.setImmediate=function(i){e.push(i),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(i){if(i.source===window&&i.data===t){i.stopPropagation();var r=e.slice();e.length=0,r.forEach((function(t){t()}))}}),!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),n=!0,s=document.createElement("div");e=[],new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(s,{attributes:!0});var o=a.setImmediate;a.setImmediate=function(t){Date.now()-i>15?(i=Date.now(),o(t)):(e.push(t),1===e.length&&s.setAttribute("a",n=!n))}}a.nextTick=a.setImmediate}(),a.isNodejs=void 0!==r&&r.versions&&r.versions.node,a.globalScope=a.isNodejs?i.g:"undefined"==typeof self?window:self,a.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},a.isArrayBufferView=function(t){return t&&a.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},a.ByteBuffer=c,a.ByteStringBuffer=c,a.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},a.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},a.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},a.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},a.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var i=this.data;e>0;)1&e&&(i+=t),(e>>>=1)>0&&(t+=t);return this.data=i,this._optimizeConstructedString(e),this},a.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},a.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(a.encodeUtf8(t))},a.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},a.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},a.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},a.ByteStringBuffer.prototype.putInt=function(t,e){h(e);var i="";do{e-=8,i+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(i)},a.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},a.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},a.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},a.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},a.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},a.ByteStringBuffer.prototype.getInt=function(t){h(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},a.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),i=2<<t-2;return e>=i&&(e-=i<<1),e},a.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},a.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},a.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},a.ByteStringBuffer.prototype.copy=function(){var t=a.createBuffer(this.data);return t.read=this.read,t},a.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},a.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},a.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},a.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var i=this.data.charCodeAt(e);i<16&&(t+="0"),t+=i.toString(16)}return t},a.ByteStringBuffer.prototype.toString=function(){return a.decodeUtf8(this.bytes())},a.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var i=a.isArrayBuffer(t),r=a.isArrayBufferView(t);if(i||r)return this.data=i?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},a.DataBuffer.prototype.length=function(){return this.write-this.read},a.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},a.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var i=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(i),this.data=new DataView(r.buffer),this},a.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},a.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var i=0;i<e;++i)this.data.setUint8(t);return this},a.DataBuffer.prototype.putBytes=function(t,e){if(a.isArrayBufferView(t)){var i=(r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-r.byteOffset;return this.accommodate(i),new Uint8Array(this.data.buffer,this.write).set(r),this.write+=i,this}if(a.isArrayBuffer(t)){var r=new Uint8Array(t);return this.accommodate(r.byteLength),new Uint8Array(this.data.buffer).set(r,this.write),this.write+=r.byteLength,this}if(t instanceof a.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&a.isArrayBufferView(t.data))return r=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(r.byteLength),new Uint8Array(t.data.byteLength,this.write).set(r),this.write+=r.byteLength,this;if(t instanceof a.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var n;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),n=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.hex.decode(t,n,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),n=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.base64.decode(t,n,this.write),this;if("utf8"===e&&(t=a.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),n=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.raw.decode(n),this;if("utf16"===e)return this.accommodate(2*t.length),n=new Uint16Array(this.data.buffer,this.write),this.write+=a.text.utf16.encode(n),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},a.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},a.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},a.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},a.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},a.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},a.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},a.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},a.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},a.DataBuffer.prototype.putInt=function(t,e){h(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},a.DataBuffer.prototype.putSignedInt=function(t,e){return h(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},a.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},a.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},a.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},a.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},a.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},a.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},a.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},a.DataBuffer.prototype.getInt=function(t){h(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},a.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),i=2<<t-2;return e>=i&&(e-=i<<1),e},a.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},a.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},a.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},a.DataBuffer.prototype.copy=function(){return new a.DataBuffer(this)},a.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},a.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},a.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},a.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var i=this.data.getUint8(e);i<16&&(t+="0"),t+=i.toString(16)}return t},a.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return a.binary.raw.encode(e);if("hex"===t)return a.binary.hex.encode(e);if("base64"===t)return a.binary.base64.encode(e);if("utf8"===t)return a.text.utf8.decode(e);if("utf16"===t)return a.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},a.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=a.encodeUtf8(t)),new a.ByteBuffer(t)},a.fillString=function(t,e){for(var i="";e>0;)1&e&&(i+=t),(e>>>=1)>0&&(t+=t);return i},a.xorBytes=function(t,e,i){for(var r="",n="",s="",o=0,a=0;i>0;--i,++o)n=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(r+=s,s="",a=0),s+=String.fromCharCode(n),++a;return r+s},a.hexToBytes=function(t){var e="",i=0;for(!0&t.length&&(i=1,e+=String.fromCharCode(parseInt(t[0],16)));i<t.length;i+=2)e+=String.fromCharCode(parseInt(t.substr(i,2),16));return e},a.bytesToHex=function(t){return a.createBuffer(t).toHex()},a.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";a.encode64=function(t,e){for(var i,r,n,s="",o="",a=0;a<t.length;)i=t.charCodeAt(a++),r=t.charCodeAt(a++),n=t.charCodeAt(a++),s+=l.charAt(i>>2),s+=l.charAt((3&i)<<4|r>>4),isNaN(r)?s+="==":(s+=l.charAt((15&r)<<2|n>>6),s+=isNaN(n)?"=":l.charAt(63&n)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+s},a.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,i,r,n,s="",o=0;o<t.length;)e=u[t.charCodeAt(o++)-43],i=u[t.charCodeAt(o++)-43],r=u[t.charCodeAt(o++)-43],n=u[t.charCodeAt(o++)-43],s+=String.fromCharCode(e<<2|i>>4),64!==r&&(s+=String.fromCharCode((15&i)<<4|r>>2),64!==n&&(s+=String.fromCharCode((3&r)<<6|n)));return s},a.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},a.decodeUtf8=function(t){return decodeURIComponent(escape(t))},a.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},a.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},a.binary.raw.decode=function(t,e,i){var r=e;r||(r=new Uint8Array(t.length));for(var n=i=i||0,s=0;s<t.length;++s)r[n++]=t.charCodeAt(s);return e?n-i:r},a.binary.hex.encode=a.bytesToHex,a.binary.hex.decode=function(t,e,i){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2)));var n=0,s=i=i||0;for(1&t.length&&(n=1,r[s++]=parseInt(t[0],16));n<t.length;n+=2)r[s++]=parseInt(t.substr(n,2),16);return e?s-i:r},a.binary.base64.encode=function(t,e){for(var i,r,n,s="",o="",a=0;a<t.byteLength;)i=t[a++],r=t[a++],n=t[a++],s+=l.charAt(i>>2),s+=l.charAt((3&i)<<4|r>>4),isNaN(r)?s+="==":(s+=l.charAt((15&r)<<2|n>>6),s+=isNaN(n)?"=":l.charAt(63&n)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+s},a.binary.base64.decode=function(t,e,i){var r,n,s,o,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var h=0,c=i=i||0;h<t.length;)r=u[t.charCodeAt(h++)-43],n=u[t.charCodeAt(h++)-43],s=u[t.charCodeAt(h++)-43],o=u[t.charCodeAt(h++)-43],a[c++]=r<<2|n>>4,64!==s&&(a[c++]=(15&n)<<4|s>>2,64!==o&&(a[c++]=(3&s)<<6|o));return e?c-i:a.subarray(0,c)},a.binary.base58.encode=function(t,e){return a.binary.baseN.encode(t,d,e)},a.binary.base58.decode=function(t,e){return a.binary.baseN.decode(t,d,e)},a.text={utf8:{},utf16:{}},a.text.utf8.encode=function(t,e,i){t=a.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length));for(var n=i=i||0,s=0;s<t.length;++s)r[n++]=t.charCodeAt(s);return e?n-i:r},a.text.utf8.decode=function(t){return a.decodeUtf8(String.fromCharCode.apply(null,t))},a.text.utf16.encode=function(t,e,i){var r=e;r||(r=new Uint8Array(2*t.length));for(var n=new Uint16Array(r.buffer),s=i=i||0,o=i,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a),s+=2;return e?s-i:r},a.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},a.deflate=function(t,e,i){if(e=a.decode64(t.deflate(a.encode64(e)).rval),i){var r=2;32&e.charCodeAt(1)&&(r=6),e=e.substring(r,e.length-4)}return e},a.inflate=function(t,e,i){var r=t.inflate(a.encode64(e)).rval;return null===r?null:a.decode64(r)};var f=function(t,e,i){if(!t)throw new Error("WebStorage not available.");var r;if(null===i?r=t.removeItem(e):(i=a.encode64(JSON.stringify(i)),r=t.setItem(e,i)),void 0!==r&&!0!==r.rval){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}},p=function(t,e){if(!t)throw new Error("WebStorage not available.");var i=t.getItem(e);if(t.init)if(null===i.rval){if(i.error){var r=new Error(i.error.message);throw r.id=i.error.id,r.name=i.error.name,r}i=null}else i=i.rval;return null!==i&&(i=JSON.parse(a.decode64(i))),i},g=function(t,e,i,r){var n=p(t,e);null===n&&(n={}),n[i]=r,f(t,e,n)},y=function(t,e,i){var r=p(t,e);return null!==r&&(r=i in r?r[i]:null),r},m=function(t,e,i){var r=p(t,e);if(null!==r&&i in r){delete r[i];var n=!0;for(var s in r){n=!1;break}n&&(r=null),f(t,e,r)}},v=function(t,e){f(t,e,null)},b=function(t,e,i){var r,n=null;void 0===i&&(i=["web","flash"]);var s=!1,o=null;for(var a in i){r=i[a];try{if("flash"===r||"both"===r){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),s="flash"===r}"web"!==r&&"both"!==r||(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(t){o=t}if(s)break}if(!s)throw o;return n};a.setItem=function(t,e,i,r,n){b(g,arguments,n)},a.getItem=function(t,e,i,r){return b(y,arguments,r)},a.removeItem=function(t,e,i,r){b(m,arguments,r)},a.clearItems=function(t,e,i){b(v,arguments,i)},a.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},a.format=function(t){for(var e,i,r=/%./g,n=0,s=[],o=0;e=r.exec(t);){(i=t.substring(o,r.lastIndex-2)).length>0&&s.push(i),o=r.lastIndex;var a=e[0][1];switch(a){case"s":case"o":n<arguments.length?s.push(arguments[1+n++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")},a.formatNumber=function(t,e,i,r){var n=t,s=isNaN(e=Math.abs(e))?2:e,o=void 0===i?",":i,a=void 0===r?".":r,h=n<0?"-":"",c=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",l=c.length>3?c.length%3:0;return h+(l?c.substr(0,l)+a:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(n-c).toFixed(s).slice(2):"")},a.formatSize=function(t){return t>=1073741824?a.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?a.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?a.formatNumber(t/1024,0)+" KiB":a.formatNumber(t,0)+" bytes"},a.bytesFromIP=function(t){return-1!==t.indexOf(".")?a.bytesFromIPv4(t):-1!==t.indexOf(":")?a.bytesFromIPv6(t):null},a.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=a.createBuffer(),i=0;i<t.length;++i){var r=parseInt(t[i],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()},a.bytesFromIPv6=function(t){for(var e=0,i=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),r=a.createBuffer(),n=0;n<8;++n)if(t[n]&&0!==t[n].length){var s=a.hexToBytes(t[n]);s.length<2&&r.putByte(0),r.putBytes(s)}else r.fillWithByte(0,i),i=0;return r.getBytes()},a.bytesToIP=function(t){return 4===t.length?a.bytesToIPv4(t):16===t.length?a.bytesToIPv6(t):null},a.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],i=0;i<t.length;++i)e.push(t.charCodeAt(i));return e.join(".")},a.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],i=[],r=0,n=0;n<t.length;n+=2){for(var s=a.bytesToHex(t[n]+t[n+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var o=i[i.length-1],h=e.length;o&&h===o.end+1?(o.end=h,o.end-o.start>i[r].end-i[r].start&&(r=i.length-1)):i.push({start:h,end:h})}e.push(s)}if(i.length>0){var c=i[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},a.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in a&&!t.update)return e(null,a.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return a.cores=navigator.hardwareConcurrency,e(null,a.cores);if("undefined"==typeof Worker)return a.cores=1,e(null,a.cores);if("undefined"==typeof Blob)return a.cores=2,e(null,a.cores);var i=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),i=e+4;Date.now()<i;);self.postMessage({st:e,et:i})}))}.toString(),")()"],{type:"application/javascript"}));!function t(r,n,s){if(0===n){var o=Math.floor(r.reduce((function(t,e){return t+e}),0)/r.length);return a.cores=Math.max(1,o),URL.revokeObjectURL(i),e(null,a.cores)}!function(t,e){for(var r=[],n=[],s=0;s<t;++s){var o=new Worker(i);o.addEventListener("message",(function(i){if(n.push(i.data),n.length===t){for(var s=0;s<t;++s)r[s].terminate();e(0,n)}})),r.push(o)}for(s=0;s<t;++s)r[s].postMessage(s)}(s,(function(e,i){r.push(function(t,e){for(var i=[],r=0;r<t;++r)for(var n=e[r],s=i[r]=[],o=0;o<t;++o)if(r!==o){var a=e[o];(n.st>a.st&&n.st<a.et||a.st>n.st&&a.st<n.et)&&s.push(o)}return i.reduce((function(t,e){return Math.max(t,e.length)}),0)}(s,i)),t(r,n-1,s)}))}([],5,16)}},25414:(t,e,i)=>{var r=i(3832);i(8925),i(3068),i(33480),i(28991),i(86971),i(66270),i(26953),i(96007),i(28095),i(97116);var n=r.asn1,s=t.exports=r.pki=r.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var h=r.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},h,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},u={name:"CertificationRequestInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},h,{name:"CertificationRequestInfo.attributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0}]}]}]},d={name:"CertificationRequest",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[u,{name:"CertificationRequest.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(t,e){"string"==typeof e&&(e={shortName:e});for(var i,r=null,n=0;null===r&&n<t.attributes.length;++n)i=t.attributes[n],(e.type&&e.type===i.type||e.name&&e.name===i.name||e.shortName&&e.shortName===i.shortName)&&(r=i);return r}s.RDNAttributesAsArray=function(t,e){for(var i,r,s,h=[],c=0;c<t.value.length;++c){i=t.value[c];for(var l=0;l<i.value.length;++l)s={},r=i.value[l],s.type=n.derToOid(r.value[0].value),s.value=r.value[1].value,s.valueTagClass=r.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),e&&(e.update(s.type),e.update(s.value)),h.push(s)}return h},s.CRIAttributesAsArray=function(t){for(var e=[],i=0;i<t.length;++i)for(var r=t[i],h=n.derToOid(r.value[0].value),c=r.value[1].value,l=0;l<c.length;++l){var u={};if(u.type=h,u.value=c[l].value,u.valueTagClass=c[l].type,u.type in o&&(u.name=o[u.type],u.name in a&&(u.shortName=a[u.name])),u.type===o.extensionRequest){u.extensions=[];for(var d=0;d<u.value.length;++d)u.extensions.push(s.certificateExtensionFromAsn1(u.value[d]))}e.push(u)}return e};var p=function(t,e,i){var r={};if(t!==o["RSASSA-PSS"])return r;i&&(r={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!n.validate(e,l,s,a)){var h=new Error("Cannot read RSASSA-PSS parameter block.");throw h.errors=a,h}return void 0!==s.hashOid&&(r.hash=r.hash||{},r.hash.algorithmOid=n.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=n.derToOid(s.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=n.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(r.saltLength=s.saltLength.charCodeAt(0)),r},g=function(t){switch(o[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return r.md.sha1.create();case"md5WithRSAEncryption":return r.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return r.md.sha256.create();case"sha384WithRSAEncryption":return r.md.sha384.create();case"sha512WithRSAEncryption":return r.md.sha512.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},y=function(t){var e,i=t.certificate;switch(i.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var n,s,a;if(void 0===(n=o[i.signatureParameters.mgf.hash.algorithmOid])||void 0===r.md[n])throw(a=new Error("Unsupported MGF hash function.")).oid=i.signatureParameters.mgf.hash.algorithmOid,a.name=n,a;if(void 0===(s=o[i.signatureParameters.mgf.algorithmOid])||void 0===r.mgf[s])throw(a=new Error("Unsupported MGF function.")).oid=i.signatureParameters.mgf.algorithmOid,a.name=s,a;if(s=r.mgf[s].create(r.md[n].create()),void 0===(n=o[i.signatureParameters.hash.algorithmOid])||void 0===r.md[n])throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=i.signatureParameters.hash.algorithmOid,a.name=n,a;e=r.pss.create(r.md[n].create(),s,i.signatureParameters.saltLength)}return i.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function m(t){for(var e,i,s=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),o=t.attributes,a=0;a<o.length;++a){var h=(e=o[a]).value,c=n.Type.PRINTABLESTRING;"valueTagClass"in e&&(c=e.valueTagClass)===n.Type.UTF8&&(h=r.util.encodeUtf8(h)),i=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.type).getBytes()),n.create(n.Class.UNIVERSAL,c,!1,h)])]),s.value.push(i)}return s}function v(t){for(var e,i=0;i<t.length;++i){if(void 0===(e=t[i]).name&&(e.type&&e.type in s.oids?e.name=s.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=s.oids[a[e.shortName]])),void 0===e.type){if(!e.name||!(e.name in s.oids))throw(h=new Error("Attribute type not specified.")).attribute=e,h;e.type=s.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===o.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=n.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var r=0;r<e.extensions.length;++r)e.value.push(s.certificateExtensionToAsn1(b(e.extensions[r])))}var h;if(void 0===e.value)throw(h=new Error("Attribute value not specified.")).attribute=e,h}}function b(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in s.oids&&(t.name=s.oids[t.id]),void 0===t.id){if(!t.name||!(t.name in s.oids))throw(_=new Error("Extension ID not specified.")).extension=t,_;t.id=s.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var i=0,a=0,h=0;t.digitalSignature&&(a|=128,i=7),t.nonRepudiation&&(a|=64,i=6),t.keyEncipherment&&(a|=32,i=5),t.dataEncipherment&&(a|=16,i=4),t.keyAgreement&&(a|=8,i=3),t.keyCertSign&&(a|=4,i=2),t.cRLSign&&(a|=2,i=1),t.encipherOnly&&(a|=1,i=0),t.decipherOnly&&(h|=128,i=7);var c=String.fromCharCode(i);0!==h?c+=String.fromCharCode(a)+String.fromCharCode(h):0!==a&&(c+=String.fromCharCode(a)),t.value=n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,c)}else if("basicConstraints"===t.name)t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(n.create(n.Class.UNIVERSAL,n.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)!0===t[u]&&(u in o?l.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(o[u]).getBytes())):-1!==u.indexOf(".")&&l.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(u).getBytes())))}else if("nsCertType"===t.name)i=0,a=0,t.client&&(a|=128,i=7),t.server&&(a|=64,i=6),t.email&&(a|=32,i=5),t.objsign&&(a|=16,i=4),t.reserved&&(a|=8,i=3),t.sslCA&&(a|=4,i=2),t.emailCA&&(a|=2,i=1),t.objCA&&(a|=1,i=0),c=String.fromCharCode(i),0!==a&&(c+=String.fromCharCode(a)),t.value=n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,c);else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);for(var d=0;d<t.altNames.length;++d){if(c=(v=t.altNames[d]).value,7===v.type&&v.ip){if(null===(c=r.util.bytesFromIP(v.ip)))throw(_=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,_}else 8===v.type&&(c=v.oid?n.oidToDer(n.oidToDer(v.oid)):n.oidToDer(c));t.value.value.push(n.create(n.Class.CONTEXT_SPECIFIC,v.type,!1,c))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=n.create(n.Class.UNIVERSAL,n.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var f=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=f.toHex(),t.value=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){if(t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),l=t.value.value,t.keyIdentifier){var p=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var g=[n.create(n.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];l.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,g))}if(t.serialNumber){var y=r.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);l.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===t.name){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),l=t.value.value;var v,b=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),w=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);for(d=0;d<t.altNames.length;++d){if(c=(v=t.altNames[d]).value,7===v.type&&v.ip){if(null===(c=r.util.bytesFromIP(v.ip)))throw(_=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,_}else 8===v.type&&(c=v.oid?n.oidToDer(n.oidToDer(v.oid)):n.oidToDer(c));w.value.push(n.create(n.Class.CONTEXT_SPECIFIC,v.type,!1,c))}b.value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(b)}var _;if(void 0===t.value)throw(_=new Error("Extension value not specified.")).extension=t,_;return t}function w(t,e){if(t===o["RSASSA-PSS"]){var i=[];return void 0!==e.hash.algorithmOid&&i.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.hash.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&i.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.mgf.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.mgf.hash.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&i.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.saltLength).getBytes())])),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,i)}return n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")}function _(t){var e=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var i=t.attributes,s=0;s<i.length;++s){var o=i[s],a=o.value,h=n.Type.UTF8;"valueTagClass"in o&&(h=o.valueTagClass),h===n.Type.UTF8&&(a=r.util.encodeUtf8(a));var c=!1;"valueConstructed"in o&&(c=o.valueConstructed);var l=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(o.type).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,h,c,a)])]);e.value.push(l)}return e}s.certificateFromPem=function(t,e,i){var o=r.pem.decode(t)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var h=n.fromDer(o.body,i);return s.certificateFromAsn1(h,e)},s.certificateToPem=function(t,e){var i={type:"CERTIFICATE",body:n.toDer(s.certificateToAsn1(t)).getBytes()};return r.pem.encode(i,{maxline:e})},s.publicKeyFromPem=function(t){var e=r.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var i=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=e.type,i}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=n.fromDer(e.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(t,e){var i={type:"PUBLIC KEY",body:n.toDer(s.publicKeyToAsn1(t)).getBytes()};return r.pem.encode(i,{maxline:e})},s.publicKeyToRSAPublicKeyPem=function(t,e){var i={type:"RSA PUBLIC KEY",body:n.toDer(s.publicKeyToRSAPublicKey(t)).getBytes()};return r.pem.encode(i,{maxline:e})},s.getPublicKeyFingerprint=function(t,e){var i,o=(e=e||{}).md||r.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":i=n.toDer(s.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=n.toDer(s.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}o.start(),o.update(i);var a=o.digest();if("hex"===e.encoding){var h=a.toHex();return e.delimiter?h.match(/.{2}/g).join(e.delimiter):h}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},s.certificationRequestFromPem=function(t,e,i){var o=r.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var h=n.fromDer(o.body,i);return s.certificationRequestFromAsn1(h,e)},s.certificationRequestToPem=function(t,e){var i={type:"CERTIFICATE REQUEST",body:n.toDer(s.certificationRequestToAsn1(t)).getBytes()};return r.pem.encode(i,{maxline:e})},s.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return f(t.issuer,e)},t.issuer.addField=function(e){v([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return f(t.subject,e)},t.subject.addField=function(e){v([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,i){v(e),t.subject.attributes=e,delete t.subject.uniqueId,i&&(t.subject.uniqueId=i),t.subject.hash=null},t.setIssuer=function(e,i){v(e),t.issuer.attributes=e,delete t.issuer.uniqueId,i&&(t.issuer.uniqueId=i),t.issuer.hash=null},t.setExtensions=function(e){for(var i=0;i<e.length;++i)b(e[i],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var i,r=null,n=0;null===r&&n<t.extensions.length;++n)i=t.extensions[n],(e.id&&i.id===e.id||e.name&&i.name===e.name)&&(r=i);return r},t.sign=function(e,i){t.md=i||r.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var h=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw h.algorithm=t.md.algorithm,h}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=s.getTBSCertificate(t);var c=n.toDer(t.tbsCertificate);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var i=!1;if(!t.issued(e)){var r=e.issuer,o=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=r.attributes,a}var h=e.md;if(null===h){h=g({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||s.getTBSCertificate(e),l=n.toDer(c);h.update(l.getBytes())}return null!==h&&(i=y({certificate:t,md:h,signature:e.signature})),i},t.isIssuer=function(e){var i=!1,r=t.issuer,n=e.subject;if(r.hash&&n.hash)i=r.hash===n.hash;else if(r.attributes.length===n.attributes.length){var s,o;i=!0;for(var a=0;i&&a<r.attributes.length;++a)s=r.attributes[a],o=n.attributes[a],s.type===o.type&&s.value===o.value||(i=!1)}return i},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=o.subjectKeyIdentifier,i=0;i<t.extensions.length;++i){var n=t.extensions[i];if(n.id===e){var s=t.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(n.subjectKeyIdentifier)===s}}return!1},t},s.certificateFromAsn1=function(t,e){var i={},o=[];if(!n.validate(t,c,i,o)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}if(n.derToOid(i.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=s.createCertificate();h.version=i.certVersion?i.certVersion.charCodeAt(0):0;var l=r.util.createBuffer(i.certSerialNumber);h.serialNumber=l.toHex(),h.signatureOid=r.asn1.derToOid(i.certSignatureOid),h.signatureParameters=p(h.signatureOid,i.certSignatureParams,!0),h.siginfo.algorithmOid=r.asn1.derToOid(i.certinfoSignatureOid),h.siginfo.parameters=p(h.siginfo.algorithmOid,i.certinfoSignatureParams,!1),h.signature=i.certSignature;var u=[];if(void 0!==i.certValidity1UTCTime&&u.push(n.utcTimeToDate(i.certValidity1UTCTime)),void 0!==i.certValidity2GeneralizedTime&&u.push(n.generalizedTimeToDate(i.certValidity2GeneralizedTime)),void 0!==i.certValidity3UTCTime&&u.push(n.utcTimeToDate(i.certValidity3UTCTime)),void 0!==i.certValidity4GeneralizedTime&&u.push(n.generalizedTimeToDate(i.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(h.validity.notBefore=u[0],h.validity.notAfter=u[1],h.tbsCertificate=i.tbsCertificate,e){h.md=g({signatureOid:h.signatureOid,type:"certificate"});var d=n.toDer(h.tbsCertificate);h.md.update(d.getBytes())}var y=r.md.sha1.create(),m=n.toDer(i.certIssuer);y.update(m.getBytes()),h.issuer.getField=function(t){return f(h.issuer,t)},h.issuer.addField=function(t){v([t]),h.issuer.attributes.push(t)},h.issuer.attributes=s.RDNAttributesAsArray(i.certIssuer),i.certIssuerUniqueId&&(h.issuer.uniqueId=i.certIssuerUniqueId),h.issuer.hash=y.digest().toHex();var b=r.md.sha1.create(),w=n.toDer(i.certSubject);return b.update(w.getBytes()),h.subject.getField=function(t){return f(h.subject,t)},h.subject.addField=function(t){v([t]),h.subject.attributes.push(t)},h.subject.attributes=s.RDNAttributesAsArray(i.certSubject),i.certSubjectUniqueId&&(h.subject.uniqueId=i.certSubjectUniqueId),h.subject.hash=b.digest().toHex(),i.certExtensions?h.extensions=s.certificateExtensionsFromAsn1(i.certExtensions):h.extensions=[],h.publicKey=s.publicKeyFromAsn1(i.subjectPublicKeyInfo),h},s.certificateExtensionsFromAsn1=function(t){for(var e=[],i=0;i<t.value.length;++i)for(var r=t.value[i],n=0;n<r.value.length;++n)e.push(s.certificateExtensionFromAsn1(r.value[n]));return e},s.certificateExtensionFromAsn1=function(t){var e={};if(e.id=n.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===n.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in o)if(e.name=o[e.id],"keyUsage"===e.name){var i=0,s=0;(h=n.fromDer(e.value)).value.length>1&&(i=h.value.charCodeAt(1),s=h.value.length>2?h.value.charCodeAt(2):0),e.digitalSignature=128==(128&i),e.nonRepudiation=64==(64&i),e.keyEncipherment=32==(32&i),e.dataEncipherment=16==(16&i),e.keyAgreement=8==(8&i),e.keyCertSign=4==(4&i),e.cRLSign=2==(2&i),e.encipherOnly=1==(1&i),e.decipherOnly=128==(128&s)}else if("basicConstraints"===e.name){(h=n.fromDer(e.value)).value.length>0&&h.value[0].type===n.Type.BOOLEAN?e.cA=0!==h.value[0].value.charCodeAt(0):e.cA=!1;var a=null;h.value.length>0&&h.value[0].type===n.Type.INTEGER?a=h.value[0].value:h.value.length>1&&(a=h.value[1].value),null!==a&&(e.pathLenConstraint=n.derToInteger(a))}else if("extKeyUsage"===e.name)for(var h=n.fromDer(e.value),c=0;c<h.value.length;++c){var l=n.derToOid(h.value[c].value);l in o?e[o[l]]=!0:e[l]=!0}else if("nsCertType"===e.name)i=0,(h=n.fromDer(e.value)).value.length>1&&(i=h.value.charCodeAt(1)),e.client=128==(128&i),e.server=64==(64&i),e.email=32==(32&i),e.objsign=16==(16&i),e.reserved=8==(8&i),e.sslCA=4==(4&i),e.emailCA=2==(2&i),e.objCA=1==(1&i);else if("subjectAltName"===e.name||"issuerAltName"===e.name){var u;e.altNames=[],h=n.fromDer(e.value);for(var d=0;d<h.value.length;++d){var f={type:(u=h.value[d]).type,value:u.value};switch(e.altNames.push(f),u.type){case 1:case 2:case 6:break;case 7:f.ip=r.util.bytesToIP(u.value);break;case 8:f.oid=n.derToOid(u.value)}}}else"subjectKeyIdentifier"===e.name&&(h=n.fromDer(e.value),e.subjectKeyIdentifier=r.util.bytesToHex(h.value));return e},s.certificationRequestFromAsn1=function(t,e){var i={},o=[];if(!n.validate(t,d,i,o)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}if(n.derToOid(i.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=s.createCertificationRequest();if(h.version=i.csrVersion?i.csrVersion.charCodeAt(0):0,h.signatureOid=r.asn1.derToOid(i.csrSignatureOid),h.signatureParameters=p(h.signatureOid,i.csrSignatureParams,!0),h.siginfo.algorithmOid=r.asn1.derToOid(i.csrSignatureOid),h.siginfo.parameters=p(h.siginfo.algorithmOid,i.csrSignatureParams,!1),h.signature=i.csrSignature,h.certificationRequestInfo=i.certificationRequestInfo,e){h.md=g({signatureOid:h.signatureOid,type:"certification request"});var c=n.toDer(h.certificationRequestInfo);h.md.update(c.getBytes())}var l=r.md.sha1.create();return h.subject.getField=function(t){return f(h.subject,t)},h.subject.addField=function(t){v([t]),h.subject.attributes.push(t)},h.subject.attributes=s.RDNAttributesAsArray(i.certificationRequestInfoSubject,l),h.subject.hash=l.digest().toHex(),h.publicKey=s.publicKeyFromAsn1(i.subjectPublicKeyInfo),h.getAttribute=function(t){return f(h,t)},h.addAttribute=function(t){v([t]),h.attributes.push(t)},h.attributes=s.CRIAttributesAsArray(i.certificationRequestInfoAttributes||[]),h},s.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return f(t.subject,e)},t.subject.addField=function(e){v([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return f(t,e)},t.addAttribute=function(e){v([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){v(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){v(e),t.attributes=e},t.sign=function(e,i){t.md=i||r.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var h=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw h.algorithm=t.md.algorithm,h}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=s.getCertificationRequestInfo(t);var c=n.toDer(t.certificationRequestInfo);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,i=t.md;if(null===i){i=g({signatureOid:t.signatureOid,type:"certification request"});var r=t.certificationRequestInfo||s.getCertificationRequestInfo(t),o=n.toDer(r);i.update(o.getBytes())}return null!==i&&(e=y({certificate:t,md:i,signature:t.signature})),e},t};var x=new Date("1950-01-01T00:00:00Z"),E=new Date("2050-01-01T00:00:00Z");function S(t){return t>=x&&t<E?n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(t)):n.create(n.Class.UNIVERSAL,n.Type.GENERALIZEDTIME,!1,n.dateToGeneralizedTime(t))}s.getTBSCertificate=function(t){var e=S(t.validity.notBefore),i=S(t.validity.notAfter),o=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes())]),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(t.serialNumber)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.siginfo.algorithmOid).getBytes()),w(t.siginfo.algorithmOid,t.siginfo.parameters)]),m(t.issuer),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[e,i]),m(t.subject),s.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&o.value.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&o.value.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!0,[n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(t.extensions)),o},s.getCertificationRequestInfo=function(t){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),m(t.subject),s.publicKeyToAsn1(t.publicKey),_(t)])},s.distinguishedNameToAsn1=function(t){return m(t)},s.certificateToAsn1=function(t){var e=t.tbsCertificate||s.getTBSCertificate(t);return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[e,n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.certificateExtensionsToAsn1=function(t){var e=n.create(n.Class.CONTEXT_SPECIFIC,3,!0,[]),i=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);e.value.push(i);for(var r=0;r<t.length;++r)i.value.push(s.certificateExtensionToAsn1(t[r]));return e},s.certificateExtensionToAsn1=function(t){var e=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);e.value.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.id).getBytes())),t.critical&&e.value.push(n.create(n.Class.UNIVERSAL,n.Type.BOOLEAN,!1,String.fromCharCode(255)));var i=t.value;return"string"!=typeof t.value&&(i=n.toDer(i).getBytes()),e.value.push(n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,i)),e},s.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||s.getCertificationRequestInfo(t);return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[e,n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.createCaStore=function(t){var e={certs:{}};function i(t){return o(t),e.certs[t.hash]||null}function o(t){if(!t.hash){var e=r.md.sha1.create();t.attributes=s.RDNAttributesAsArray(m(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return i(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=r.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var i=e.certs[t.subject.hash];r.util.isArray(i)||(i=[i]),i.push(t),e.certs[t.subject.hash]=i}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=r.pki.certificateFromPem(t));var e=i(t.subject);if(!e)return!1;r.util.isArray(e)||(e=[e]);for(var o=n.toDer(s.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a)if(o===n.toDer(s.certificateToAsn1(e[a])).getBytes())return!0;return!1},e.listAllCertificates=function(){var t=[];for(var i in e.certs)if(e.certs.hasOwnProperty(i)){var n=e.certs[i];if(r.util.isArray(n))for(var s=0;s<n.length;++s)t.push(n[s]);else t.push(n)}return t},e.removeCertificate=function(t){var a;if("string"==typeof t&&(t=r.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))return null;var h=i(t.subject);if(!r.util.isArray(h))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var c=n.toDer(s.certificateToAsn1(t)).getBytes(),l=0;l<h.length;++l)c===n.toDer(s.certificateToAsn1(h[l])).getBytes()&&(a=h[l],h.splice(l,1));return 0===h.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a){var h=t[a];e.addCertificate(h)}return e},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(t,e,i){"function"==typeof i&&(i={verify:i}),i=i||{};var n=(e=e.slice(0)).slice(0),o=i.validityCheckDate;void 0===o&&(o=new Date);var a=!0,h=null,c=0;do{var l=e.shift(),u=null,d=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(h={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===h){if(null===(u=e[0]||t.getIssuer(l))&&l.isIssuer(l)&&(d=!0,u=l),u){var f=u;r.util.isArray(f)||(f=[f]);for(var p=!1;!p&&f.length>0;){u=f.shift();try{p=u.verify(l)}catch(t){}}p||(h={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==h||u&&!d||t.hasCertificate(l)||(h={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===h&&u&&!l.isIssuer(u)&&(h={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===h)for(var g={keyUsage:!0,basicConstraints:!0},y=0;null===h&&y<l.extensions.length;++y){var m=l.extensions[y];m.critical&&!(m.name in g)&&(h={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===h&&(!a||0===e.length&&(!u||d))){var v=l.getExtension("basicConstraints"),b=l.getExtension("keyUsage");null!==b&&(b.keyCertSign&&null!==v||(h={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==h||null===v||v.cA||(h={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===h&&null!==b&&"pathLenConstraint"in v&&c-1>v.pathLenConstraint&&(h={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var w=null===h||h.error,_=i.verify?i.verify(w,c,n):w;if(!0!==_)throw!0===w&&(h={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(_||0===_)&&("object"!=typeof _||r.util.isArray(_)?"string"==typeof _&&(h.error=_):(_.message&&(h.message=_.message),_.error&&(h.error=_.error))),h;h=null,a=!1,++c}while(e.length>0);return!0}},10815:t=>{const e={},i=t=>{t.addEventListener("message",(e=>{i.dispatchEvent("message",t,e)})),t.port&&t.port.addEventListener("message",(e=>{i.dispatchEvent("message",t,e)}))};i.addEventListener=(t,i)=>{e[t]||(e[t]=[]),e[t].push(i)},i.removeEventListener=(t,i)=>{e[t]&&(e[t]=e[t].filter((t=>t===i)))},i.dispatchEvent=function(){const t=Array.prototype.slice.call(arguments),i=t.shift();e[i]&&e[i].forEach((e=>e.apply(null,t)))},t.exports=i},61750:(t,e,i)=>{"use strict";const r=i(97759),n=i(80341);t.exports=(t,e)=>{const i=r(t,{...e,count:1});return n.fn((async t=>{t((()=>{i.cancel()}));const[e]=await i;return e}))()},t.exports.AggregateError=r.AggregateError},80341:t=>{"use strict";class e extends Error{constructor(t){super(t||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class i{static fn(t){return(...e)=>new i(((i,r,n)=>{e.push(n),t(...e).then(i,r)}))}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((e,i)=>{this._reject=i;const r=t=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(t)};return Object.defineProperties(r,{shouldReject:{get:()=>this._rejectOnCancel,set:t=>{this._rejectOnCancel=t}}}),t((t=>{this._isCanceled&&r.shouldReject||(this._isPending=!1,e(t))}),(t=>{this._isPending=!1,i(t)}),r)}))}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const t of this._cancelHandlers)t()}catch(t){return void this._reject(t)}this._rejectOnCancel&&this._reject(new e(t))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(i.prototype,Promise.prototype),t.exports=i,t.exports.CancelError=e},63931:t=>{"use strict";t.exports=()=>{const t={};return t.promise=new Promise(((e,i)=>{t.resolve=e,t.reject=i})),t}},35103:(t,e,i)=>{const r=i(91607),n=i(63931);t.exports=class{constructor(){this._buffer=new r,this._waitingConsumers=new r}push(t){const{promise:e,resolve:i}=n();return this._buffer.push({chunk:t,resolve:i}),this._consume(),e}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const t=this._waitingConsumers.shift(),e=this._buffer.shift();t.resolve(e.chunk),e.resolve()}}shift(){const{promise:t,resolve:e}=n();return this._waitingConsumers.push({resolve:e}),this._consume(),t}isEmpty(){return this._buffer.isEmpty()}}},27345:t=>{"use strict";t.exports=(t,e)=>(e=e||(()=>{}),t.then((t=>new Promise((t=>{t(e())})).then((()=>t))),(t=>new Promise((t=>{t(e())})).then((()=>{throw t})))))},80406:(t,e,i)=>{"use strict";const r=i(89161),n=t=>{if(!Number.isInteger(t)&&t!==1/0||!(t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const e=[];let i=0;const n=()=>{i--,e.length>0&&e.shift()()},s=(t,e,...s)=>{i++;const o=r(t,...s);e(o),o.then(n,n)},o=(r,...n)=>new Promise((o=>((r,n,...o)=>{i<t?s(r,n,...o):e.push(s.bind(null,r,n,...o))})(r,o,...n)));return Object.defineProperties(o,{activeCount:{get:()=>i},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),o};t.exports=n,t.exports.default=n},86301:(t,e,i)=>{"use strict";const r=i(56455);t.exports=async(t,e,{concurrency:i=1/0,stopOnError:n=!0}={})=>new Promise(((s,o)=>{if("function"!=typeof e)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(i)&&i!==1/0||!(i>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${i}\` (${typeof i})`);const a=[],h=[],c=t[Symbol.iterator]();let l=!1,u=!1,d=0,f=0;const p=()=>{if(l)return;const t=c.next(),i=f;if(f++,t.done)return u=!0,void(0===d&&(n||0===h.length?s(a):o(new r(h))));d++,(async()=>{try{const r=await t.value;a[i]=await e(r,i),d--,p()}catch(t){n?(l=!0,o(t)):(h.push(t),d--,p())}})()};for(let t=0;t<i&&(p(),!u);t++);}))},45860:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(26729),n=i(58147),s=i(66506),o=()=>{},a=new n.TimeoutError;e.default=class extends r{constructor(t){var e,i,r,n;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},t)).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(i=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==i?i:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(n=null===(r=t.interval)||void 0===r?void 0:r.toString())&&void 0!==n?n:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const e=this._queue.dequeue();return!!e&&(this.emit("active"),e(),t&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,e={}){return new Promise(((i,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===e.timeout?t():n.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,(()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&r(a)}));i(await s)}catch(t){r(t)}this._next()}),e),this._tryToStartAnother(),this.emit("add")}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}}))}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}}},87489:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){let r=0,n=t.length;for(;n>0;){const s=n/2|0;let o=r+s;i(t[o],e)<=0?(r=++o,n-=s+1):n=s}return r}},66506:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(87489);e.default=class{constructor(){this._queue=[]}enqueue(t,e){const i={priority:(e=Object.assign({priority:0},e)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(i);const n=r.default(this._queue,i,((t,e)=>e.priority-t.priority));this._queue.splice(n,0,i)}dequeue(){const t=this._queue.shift();return null==t?void 0:t.run}filter(t){return this._queue.filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return this._queue.length}}},47924:t=>{"use strict";const e=async t=>{try{return{isFulfilled:!0,isRejected:!1,value:await t}}catch(t){return{isFulfilled:!1,isRejected:!0,reason:t}}};t.exports=e,t.exports.default=e},42693:(t,e,i)=>{"use strict";const r=i(99353),n=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class s extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,({message:t}=t)):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const o=(t,e)=>new Promise(((i,o)=>{e={onFailedAttempt:()=>{},retries:10,...e};const a=r.operation(e);a.attempt((async r=>{try{i(await t(r))}catch(t){if(!(t instanceof Error))return void o(new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`));if(t instanceof s)a.stop(),o(t.originalError);else if(t instanceof TypeError&&(h=t.message,!n.includes(h)))a.stop(),o(t);else{((t,e,i)=>{const r=i.retries-(e-1);t.attemptNumber=e,t.retriesLeft=r})(t,r,e);try{await e.onFailedAttempt(t)}catch(t){return void o(t)}a.retry(t)||o(a.mainError())}}var h}))}));t.exports=o,t.exports.default=o,t.exports.AbortError=s},13296:(t,e,i)=>{"use strict";const r=i(47924),n=i(80406);t.exports=async(t,e={})=>{const{concurrency:i=1/0}=e,s=n(i);return Promise.all(t.map((t=>t&&"function"==typeof t.then?r(t):r("function"==typeof t?s((()=>t())):Promise.resolve(t)))))}},97759:(t,e,i)=>{"use strict";const r=i(56455),n=i(80341);class s extends Error{}t.exports=(t,e)=>new n(((i,n,o)=>{const{count:a,filter:h=(()=>!0)}=e;if(!Number.isFinite(a))return void n(new TypeError("Expected a finite number, got "+typeof e.count));const c=[],l=[];let u=0,d=!1;const f=new Set,p=()=>{for(const e of t)f.has(e)||"function"!=typeof e.cancel||e.cancel()};o(p);for(const e of t)u++,(async()=>{try{const t=await e;if(d)return;if(!h(t))throw new s("Value does not satisfy filter");c.push(t)}catch(t){l.push(t)}finally{f.add(e),!d&&(c.length===a&&(i(c),d=!0),u-l.length<a&&(n(new r(l)),d=!0),d)&&p()}})();a>u&&(n(new RangeError(`Expected input to contain at least ${e.count} items, but contains ${u} items`)),p())})),t.exports.AggregateError=r,t.exports.FilterError=s},58147:(t,e,i)=>{"use strict";const r=i(27345);class n extends Error{constructor(t){super(t),this.name="TimeoutError"}}const s=(t,e,i)=>new Promise(((s,o)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void s(t);const a=setTimeout((()=>{if("function"==typeof i){try{s(i())}catch(t){o(t)}return}const r=i instanceof Error?i:new n("string"==typeof i?i:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(r)}),e);r(t.then(s,o),(()=>{clearTimeout(a)}))}));t.exports=s,t.exports.default=s,t.exports.TimeoutError=n},89161:t=>{"use strict";const e=(t,...e)=>new Promise((i=>{i(t(...e))}));t.exports=e,t.exports.default=e},99591:(t,e,i)=>{"use strict";var r={};(0,i(24236).assign)(r,i(24555),i(78843),i(71619)),t.exports=r},24555:(t,e,i)=>{"use strict";var r=i(30405),n=i(24236),s=i(29373),o=i(48898),a=i(62292),h=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(o[i]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=r.deflateSetDictionary(this.strm,l)))throw new Error(o[i]);this._dict_set=!0}}function l(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}c.prototype.push=function(t,e){var i,o,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new n.Buf8(c),a.next_out=0,a.avail_out=c),1!==(i=r.deflate(a,o))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(n.shrinkBuf(a.output,a.next_out))):this.onData(n.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===o?(i=r.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==o||(this.onEnd(0),a.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=c,e.deflate=l,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},78843:(t,e,i)=>{"use strict";var r=i(27948),n=i(24236),s=i(29373),o=i(71619),a=i(48898),h=i(62292),c=i(42401),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=r.inflateInit2(this.strm,e.windowBits);if(i!==o.Z_OK)throw new Error(a[i]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=r.inflateSetDictionary(this.strm,e.dictionary))!==o.Z_OK))throw new Error(a[i])}function d(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}u.prototype.push=function(t,e){var i,a,h,c,u,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?d.input=s.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new n.Buf8(f),d.next_out=0,d.avail_out=f),(i=r.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(i=r.inflateSetDictionary(this.strm,p)),i===o.Z_BUF_ERROR&&!0===g&&(i=o.Z_OK,g=!1),i!==o.Z_STREAM_END&&i!==o.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&i!==o.Z_STREAM_END&&(0!==d.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(d.output,d.next_out),c=d.next_out-h,u=s.buf2string(d.output,h),d.next_out=c,d.avail_out=f-c,c&&n.arraySet(d.output,d.output,h,c,0),this.onData(u)):this.onData(n.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&i!==o.Z_STREAM_END);return i===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(i=r.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=u,e.inflate=d,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.ungzip=d},24236:(t,e)=>{"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,i,r,n){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+r),n);else for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){var e,i,r,n,s,o;for(r=0,e=0,i=t.length;e<i;e++)r+=t[e].length;for(o=new Uint8Array(r),n=0,e=0,i=t.length;e<i;e++)s=t[e],o.set(s,n),n+=s.length;return o}},s={arraySet:function(t,e,i,r,n){for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(i)},29373:(t,e,i)=>{"use strict";var r=i(24236),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",o=0;o<e;o++)i+=String.fromCharCode(t[o]);return i}o[254]=o[254]=1,e.string2buf=function(t){var e,i,n,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new r.Buf8(h),o=0,s=0;o<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<65536?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,r,n,s,a=e||t.length,c=new Array(2*a);for(r=0,i=0;i<a;)if((n=t[i++])<128)c[r++]=n;else if((s=o[n])>4)c[r++]=65533,i+=s-1;else{for(n&=2===s?31:3===s?15:7;s>1&&i<a;)n=n<<6|63&t[i++],s--;s>1?c[r++]=65533:n<65536?c[r++]=n:(n-=65536,c[r++]=55296|n>>10&1023,c[r++]=56320|1023&n)}return h(c,r)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+o[t[i]]>e?i:e}},66069:t=>{"use strict";t.exports=function(t,e,i,r){for(var n=65535&t|0,s=t>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{s=s+(n=n+e[r++]|0)|0}while(--o);n%=65521,s%=65521}return n|s<<16|0}},71619:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:t=>{"use strict";var e=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,i,r,n){var s=e,o=n+r;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^i[a])];return-1^t}},30405:(t,e,i)=>{"use strict";var r,n=i(24236),s=i(10342),o=i(66069),a=i(2869),h=i(48898),c=-2,l=258,u=262,d=103,f=113,p=666;function g(t,e){return t.msg=h[e],e}function y(t){return(t<<1)-(t>4?9:0)}function m(t){for(var e=t.length;--e>=0;)t[e]=0}function v(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(n.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function b(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function w(t,e){t.pending_buf[t.pending++]=e}function _(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function x(t,e){var i,r,n=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-u?t.strstart-(t.w_size-u):0,c=t.window,d=t.w_mask,f=t.prev,p=t.strstart+l,g=c[s+o-1],y=c[s+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(i=e)+o]===y&&c[i+o-1]===g&&c[i]===c[s]&&c[++i]===c[s+1]){s+=2,i++;do{}while(c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&s<p);if(r=l-(p-s),s=p-l,r>o){if(t.match_start=e,o=r,r>=a)break;g=c[s+o-1],y=c[s+o]}}}while((e=f[e&d])>h&&0!=--n);return o<=t.lookahead?o:t.lookahead}function E(t){var e,i,r,s,h,c,l,d,f,p,g=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-u)){n.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=i=t.hash_size;do{r=t.head[--e],t.head[e]=r>=g?r-g:0}while(--i);e=i=g;do{r=t.prev[--e],t.prev[e]=r>=g?r-g:0}while(--i);s+=g}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,d=t.strstart+t.lookahead,f=s,p=void 0,(p=c.avail_in)>f&&(p=f),i=0===p?0:(c.avail_in-=p,n.arraySet(l,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=o(c.adler,l,p,d):2===c.state.wrap&&(c.adler=a(c.adler,l,p,d)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=i,t.lookahead+t.insert>=3)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+3-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<u&&0!==t.strm.avail_in)}function S(t,e){for(var i,r;;){if(t.lookahead<u){if(E(t),t.lookahead<u&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-u&&(t.match_length=x(t,i)),t.match_length>=3)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}function T(t,e){for(var i,r,n;;){if(t.lookahead<u){if(E(t),t.lookahead<u&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-u&&(t.match_length=x(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(b(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&b(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}function A(t,e,i,r,n){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=r,this.func=n}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:f,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):g(t,c)}function R(t){var e,i=k(t);return 0===i&&((e=t.state).window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function P(t,e,i,r,s,o){if(!t)return c;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>9||8!==i||r<8||r>15||e<0||e>9||o<0||o>4)return g(t,c);8===r&&(r=9);var h=new C;return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new n.Buf8(2*h.w_size),h.head=new n.Buf16(h.hash_size),h.prev=new n.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new n.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=o,h.method=i,R(t)}r=[new A(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(E(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,b(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-u&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(b(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(b(t,!1),t.strm.avail_out),1)})),new A(4,4,8,4,S),new A(4,5,16,8,S),new A(4,6,32,32,S),new A(4,4,16,16,T),new A(8,16,32,32,T),new A(8,16,128,128,T),new A(8,32,128,256,T),new A(32,128,258,1024,T),new A(32,258,258,4096,T)],e.deflateInit=function(t,e){return P(t,e,8,15,8,0)},e.deflateInit2=P,e.deflateReset=R,e.deflateResetKeep=k,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?c:(t.state.gzhead=e,0):c},e.deflate=function(t,e){var i,n,o,h;if(!t||!t.state||e>5||e<0)return t?g(t,c):c;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||n.status===p&&4!==e)return g(t,0===t.avail_out?-5:c);if(n.strm=t,i=n.last_flush,n.last_flush=e,42===n.status)if(2===n.wrap)t.adler=0,w(n,31),w(n,139),w(n,8),n.gzhead?(w(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),w(n,255&n.gzhead.time),w(n,n.gzhead.time>>8&255),w(n,n.gzhead.time>>16&255),w(n,n.gzhead.time>>24&255),w(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),w(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(w(n,255&n.gzhead.extra.length),w(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=a(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(w(n,0),w(n,0),w(n,0),w(n,0),w(n,0),w(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),w(n,3),n.status=f);else{var u=8+(n.w_bits-8<<4)<<8;u|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(u|=32),u+=31-u%31,n.status=f,_(n,u),0!==n.strstart&&(_(n,t.adler>>>16),_(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>o&&(t.adler=a(t.adler,n.pending_buf,n.pending-o,o)),v(t),o=n.pending,n.pending!==n.pending_buf_size));)w(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(t.adler=a(t.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(t.adler=a(t.adler,n.pending_buf,n.pending-o,o)),v(t),o=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,w(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>o&&(t.adler=a(t.adler,n.pending_buf,n.pending-o,o)),0===h&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(t.adler=a(t.adler,n.pending_buf,n.pending-o,o)),v(t),o=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,w(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>o&&(t.adler=a(t.adler,n.pending_buf,n.pending-o,o)),0===h&&(n.status=d)}else n.status=d;if(n.status===d&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&v(t),n.pending+2<=n.pending_buf_size&&(w(n,255&t.adler),w(n,t.adler>>8&255),t.adler=0,n.status=f)):n.status=f),0!==n.pending){if(v(t),0===t.avail_out)return n.last_flush=-1,0}else if(0===t.avail_in&&y(e)<=y(i)&&4!==e)return g(t,-5);if(n.status===p&&0!==t.avail_in)return g(t,-5);if(0!==t.avail_in||0!==n.lookahead||0!==e&&n.status!==p){var x=2===n.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(E(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}(n,e):3===n.strategy?function(t,e){for(var i,r,n,o,a=t.window;;){if(t.lookahead<=l){if(E(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=a[n=t.strstart-1])===a[++n]&&r===a[++n]&&r===a[++n]){o=t.strstart+l;do{}while(r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&n<o);t.match_length=l-(o-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}(n,e):r[n.level].func(n,e);if(3!==x&&4!==x||(n.status=p),1===x||3===x)return 0===t.avail_out&&(n.last_flush=-1),0;if(2===x&&(1===e?s._tr_align(n):5!==e&&(s._tr_stored_block(n,0,0,!1),3===e&&(m(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),v(t),0===t.avail_out))return n.last_flush=-1,0}return 4!==e?0:n.wrap<=0?1:(2===n.wrap?(w(n,255&t.adler),w(n,t.adler>>8&255),w(n,t.adler>>16&255),w(n,t.adler>>24&255),w(n,255&t.total_in),w(n,t.total_in>>8&255),w(n,t.total_in>>16&255),w(n,t.total_in>>24&255)):(_(n,t.adler>>>16),_(n,65535&t.adler)),v(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==d&&e!==f&&e!==p?g(t,c):(t.state=null,e===f?g(t,-3):0):c},e.deflateSetDictionary=function(t,e){var i,r,s,a,h,l,u,d,f=e.length;if(!t||!t.state)return c;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return c;for(1===a&&(t.adler=o(t.adler,e,f,0)),i.wrap=0,f>=i.w_size&&(0===a&&(m(i.head),i.strstart=0,i.block_start=0,i.insert=0),d=new n.Buf8(i.w_size),n.arraySet(d,e,f-i.w_size,i.w_size,0),e=d,f=i.w_size),h=t.avail_in,l=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,E(i);i.lookahead>=3;){r=i.strstart,s=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+3-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--s);i.strstart=r,i.lookahead=2,E(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=l,t.input=u,t.avail_in=h,i.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},42401:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},94264:t=>{"use strict";t.exports=function(t,e){var i,r,n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b,w,_,x,E,S,T,A;i=t.state,r=t.next_in,T=t.input,n=r+(t.avail_in-5),s=t.next_out,A=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),h=i.dmax,c=i.wsize,l=i.whave,u=i.wnext,d=i.window,f=i.hold,p=i.bits,g=i.lencode,y=i.distcode,m=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),b=g[f&m];e:for(;;){if(f>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))A[s++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(f&(1<<w)-1)];continue e}if(32&w){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}_=65535&b,(w&=15)&&(p<w&&(f+=T[r++]<<p,p+=8),_+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),b=y[f&v];i:for(;;){if(f>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=y[(65535&b)+(f&(1<<w)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&b,p<(w&=15)&&(f+=T[r++]<<p,(p+=8)<w&&(f+=T[r++]<<p,p+=8)),(x+=f&(1<<w)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(f>>>=w,p-=w,x>(w=s-o)){if((w=x-w)>l&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(E=0,S=d,0===u){if(E+=c-w,w<_){_-=w;do{A[s++]=d[E++]}while(--w);E=s-x,S=A}}else if(u<w){if(E+=c+u-w,(w-=u)<_){_-=w;do{A[s++]=d[E++]}while(--w);if(E=0,u<_){_-=w=u;do{A[s++]=d[E++]}while(--w);E=s-x,S=A}}}else if(E+=u-w,w<_){_-=w;do{A[s++]=d[E++]}while(--w);E=s-x,S=A}for(;_>2;)A[s++]=S[E++],A[s++]=S[E++],A[s++]=S[E++],_-=3;_&&(A[s++]=S[E++],_>1&&(A[s++]=S[E++]))}else{E=s-x;do{A[s++]=A[E++],A[s++]=A[E++],A[s++]=A[E++],_-=3}while(_>2);_&&(A[s++]=A[E++],_>1&&(A[s++]=A[E++]))}break}}break}}while(r<n&&s<a);r-=_=p>>3,f&=(1<<(p-=_<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=s<a?a-s+257:257-(s-a),i.hold=f,i.bits=p}},27948:(t,e,i)=>{"use strict";var r=i(24236),n=i(66069),s=i(2869),o=i(94264),a=i(9241),h=-2,c=12,l=30;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):h}function p(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,f(t)):h}function g(t,e){var i,r;return t&&t.state?(r=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?h:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,p(t))):h}function y(t,e){var i,r;return t?(r=new d,t.state=r,r.window=null,0!==(i=g(t,e))&&(t.state=null),i):h}var m,v,b=!0;function w(t){if(b){var e;for(m=new r.Buf32(512),v=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,v,0,t.work,{bits:5}),b=!1}t.lencode=m,t.lenbits=9,t.distcode=v,t.distbits=5}function _(t,e,i,n){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),n>=o.wsize?(r.arraySet(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>n&&(s=n),r.arraySet(o.window,e,i-n,s,o.wnext),(n-=s)?(r.arraySet(o.window,e,i-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}e.inflateReset=p,e.inflateReset2=g,e.inflateResetKeep=f,e.inflateInit=function(t){return y(t,15)},e.inflateInit2=y,e.inflate=function(t,e){var i,d,f,p,g,y,m,v,b,x,E,S,T,A,C,k,R,P,I,O,M,D,B,L,N=0,U=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;(i=t.state).mode===c&&(i.mode=13),g=t.next_out,f=t.output,m=t.avail_out,p=t.next_in,d=t.input,y=t.avail_in,v=i.hold,b=i.bits,x=y,E=m,D=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;b<16;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(2&i.wrap&&35615===v){i.check=0,U[0]=255&v,U[1]=v>>>8&255,i.check=s(i.check,U,2,0),v=0,b=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",i.mode=l;break}if(8!=(15&v)){t.msg="unknown compression method",i.mode=l;break}if(b-=4,M=8+(15&(v>>>=4)),0===i.wbits)i.wbits=M;else if(M>i.wbits){t.msg="invalid window size",i.mode=l;break}i.dmax=1<<M,t.adler=i.check=1,i.mode=512&v?10:c,v=0,b=0;break;case 2:for(;b<16;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(i.flags=v,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=l;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=l;break}i.head&&(i.head.text=v>>8&1),512&i.flags&&(U[0]=255&v,U[1]=v>>>8&255,i.check=s(i.check,U,2,0)),v=0,b=0,i.mode=3;case 3:for(;b<32;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}i.head&&(i.head.time=v),512&i.flags&&(U[0]=255&v,U[1]=v>>>8&255,U[2]=v>>>16&255,U[3]=v>>>24&255,i.check=s(i.check,U,4,0)),v=0,b=0,i.mode=4;case 4:for(;b<16;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}i.head&&(i.head.xflags=255&v,i.head.os=v>>8),512&i.flags&&(U[0]=255&v,U[1]=v>>>8&255,i.check=s(i.check,U,2,0)),v=0,b=0,i.mode=5;case 5:if(1024&i.flags){for(;b<16;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}i.length=v,i.head&&(i.head.extra_len=v),512&i.flags&&(U[0]=255&v,U[1]=v>>>8&255,i.check=s(i.check,U,2,0)),v=0,b=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((S=i.length)>y&&(S=y),S&&(i.head&&(M=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),r.arraySet(i.head.extra,d,p,S,M)),512&i.flags&&(i.check=s(i.check,d,S,p)),y-=S,p+=S,i.length-=S),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===y)break t;S=0;do{M=d[p+S++],i.head&&M&&i.length<65536&&(i.head.name+=String.fromCharCode(M))}while(M&&S<y);if(512&i.flags&&(i.check=s(i.check,d,S,p)),y-=S,p+=S,M)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===y)break t;S=0;do{M=d[p+S++],i.head&&M&&i.length<65536&&(i.head.comment+=String.fromCharCode(M))}while(M&&S<y);if(512&i.flags&&(i.check=s(i.check,d,S,p)),y-=S,p+=S,M)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;b<16;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(v!==(65535&i.check)){t.msg="header crc mismatch",i.mode=l;break}v=0,b=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=c;break;case 10:for(;b<32;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}t.adler=i.check=u(v),v=0,b=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=g,t.avail_out=m,t.next_in=p,t.avail_in=y,i.hold=v,i.bits=b,2;t.adler=i.check=1,i.mode=c;case c:if(5===e||6===e)break t;case 13:if(i.last){v>>>=7&b,b-=7&b,i.mode=27;break}for(;b<3;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}switch(i.last=1&v,b-=1,3&(v>>>=1)){case 0:i.mode=14;break;case 1:if(w(i),i.mode=20,6===e){v>>>=2,b-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=l}v>>>=2,b-=2;break;case 14:for(v>>>=7&b,b-=7&b;b<32;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",i.mode=l;break}if(i.length=65535&v,v=0,b=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(S=i.length){if(S>y&&(S=y),S>m&&(S=m),0===S)break t;r.arraySet(f,d,p,S,g),y-=S,p+=S,m-=S,g+=S,i.length-=S;break}i.mode=c;break;case 17:for(;b<14;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(i.nlen=257+(31&v),v>>>=5,b-=5,i.ndist=1+(31&v),v>>>=5,b-=5,i.ncode=4+(15&v),v>>>=4,b-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=l;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;b<3;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}i.lens[F[i.have++]]=7&v,v>>>=3,b-=3}for(;i.have<19;)i.lens[F[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,B={bits:i.lenbits},D=a(0,i.lens,0,19,i.lencode,0,i.work,B),i.lenbits=B.bits,D){t.msg="invalid code lengths set",i.mode=l;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;k=(N=i.lencode[v&(1<<i.lenbits)-1])>>>16&255,R=65535&N,!((C=N>>>24)<=b);){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(R<16)v>>>=C,b-=C,i.lens[i.have++]=R;else{if(16===R){for(L=C+2;b<L;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(v>>>=C,b-=C,0===i.have){t.msg="invalid bit length repeat",i.mode=l;break}M=i.lens[i.have-1],S=3+(3&v),v>>>=2,b-=2}else if(17===R){for(L=C+3;b<L;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}b-=C,M=0,S=3+(7&(v>>>=C)),v>>>=3,b-=3}else{for(L=C+7;b<L;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}b-=C,M=0,S=11+(127&(v>>>=C)),v>>>=7,b-=7}if(i.have+S>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=l;break}for(;S--;)i.lens[i.have++]=M}}if(i.mode===l)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=l;break}if(i.lenbits=9,B={bits:i.lenbits},D=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,B),i.lenbits=B.bits,D){t.msg="invalid literal/lengths set",i.mode=l;break}if(i.distbits=6,i.distcode=i.distdyn,B={bits:i.distbits},D=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,B),i.distbits=B.bits,D){t.msg="invalid distances set",i.mode=l;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(y>=6&&m>=258){t.next_out=g,t.avail_out=m,t.next_in=p,t.avail_in=y,i.hold=v,i.bits=b,o(t,E),g=t.next_out,f=t.output,m=t.avail_out,p=t.next_in,d=t.input,y=t.avail_in,v=i.hold,b=i.bits,i.mode===c&&(i.back=-1);break}for(i.back=0;k=(N=i.lencode[v&(1<<i.lenbits)-1])>>>16&255,R=65535&N,!((C=N>>>24)<=b);){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(k&&0==(240&k)){for(P=C,I=k,O=R;k=(N=i.lencode[O+((v&(1<<P+I)-1)>>P)])>>>16&255,R=65535&N,!(P+(C=N>>>24)<=b);){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}v>>>=P,b-=P,i.back+=P}if(v>>>=C,b-=C,i.back+=C,i.length=R,0===k){i.mode=26;break}if(32&k){i.back=-1,i.mode=c;break}if(64&k){t.msg="invalid literal/length code",i.mode=l;break}i.extra=15&k,i.mode=22;case 22:if(i.extra){for(L=i.extra;b<L;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}i.length+=v&(1<<i.extra)-1,v>>>=i.extra,b-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;k=(N=i.distcode[v&(1<<i.distbits)-1])>>>16&255,R=65535&N,!((C=N>>>24)<=b);){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(0==(240&k)){for(P=C,I=k,O=R;k=(N=i.distcode[O+((v&(1<<P+I)-1)>>P)])>>>16&255,R=65535&N,!(P+(C=N>>>24)<=b);){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}v>>>=P,b-=P,i.back+=P}if(v>>>=C,b-=C,i.back+=C,64&k){t.msg="invalid distance code",i.mode=l;break}i.offset=R,i.extra=15&k,i.mode=24;case 24:if(i.extra){for(L=i.extra;b<L;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}i.offset+=v&(1<<i.extra)-1,v>>>=i.extra,b-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=l;break}i.mode=25;case 25:if(0===m)break t;if(S=E-m,i.offset>S){if((S=i.offset-S)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=l;break}S>i.wnext?(S-=i.wnext,T=i.wsize-S):T=i.wnext-S,S>i.length&&(S=i.length),A=i.window}else A=f,T=g-i.offset,S=i.length;S>m&&(S=m),m-=S,i.length-=S;do{f[g++]=A[T++]}while(--S);0===i.length&&(i.mode=21);break;case 26:if(0===m)break t;f[g++]=i.length,m--,i.mode=21;break;case 27:if(i.wrap){for(;b<32;){if(0===y)break t;y--,v|=d[p++]<<b,b+=8}if(E-=m,t.total_out+=E,i.total+=E,E&&(t.adler=i.check=i.flags?s(i.check,f,E,g-E):n(i.check,f,E,g-E)),E=m,(i.flags?v:u(v))!==i.check){t.msg="incorrect data check",i.mode=l;break}v=0,b=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;b<32;){if(0===y)break t;y--,v+=d[p++]<<b,b+=8}if(v!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=l;break}v=0,b=0}i.mode=29;case 29:D=1;break t;case l:D=-3;break t;case 31:return-4;default:return h}return t.next_out=g,t.avail_out=m,t.next_in=p,t.avail_in=y,i.hold=v,i.bits=b,(i.wsize||E!==t.avail_out&&i.mode<l&&(i.mode<27||4!==e))&&_(t,t.output,t.next_out,E-t.avail_out)?(i.mode=31,-4):(x-=t.avail_in,E-=t.avail_out,t.total_in+=x,t.total_out+=E,i.total+=E,i.wrap&&E&&(t.adler=i.check=i.flags?s(i.check,f,E,t.next_out-E):n(i.check,f,E,t.next_out-E)),t.data_type=i.bits+(i.last?64:0)+(i.mode===c?128:0)+(20===i.mode||15===i.mode?256:0),(0===x&&0===E||4===e)&&0===D&&(D=-5),D)},e.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?h:(i.head=e,e.done=!1,0):h},e.inflateSetDictionary=function(t,e){var i,r=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?h:11===i.mode&&n(1,e,r,0)!==i.check?-3:_(t,e,r,r)?(i.mode=31,-4):(i.havedict=1,0):h},e.inflateInfo="pako inflate (from Nodeca project)"},9241:(t,e,i)=>{"use strict";var r=i(24236),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,h,c,l,u,d){var f,p,g,y,m,v,b,w,_,x=d.bits,E=0,S=0,T=0,A=0,C=0,k=0,R=0,P=0,I=0,O=0,M=null,D=0,B=new r.Buf16(16),L=new r.Buf16(16),N=null,U=0;for(E=0;E<=15;E++)B[E]=0;for(S=0;S<h;S++)B[e[i+S]]++;for(C=x,A=15;A>=1&&0===B[A];A--);if(C>A&&(C=A),0===A)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(T=1;T<A&&0===B[T];T++);for(C<T&&(C=T),P=1,E=1;E<=15;E++)if(P<<=1,(P-=B[E])<0)return-1;if(P>0&&(0===t||1!==A))return-1;for(L[1]=0,E=1;E<15;E++)L[E+1]=L[E]+B[E];for(S=0;S<h;S++)0!==e[i+S]&&(u[L[e[i+S]]++]=S);if(0===t?(M=N=u,v=19):1===t?(M=n,D-=257,N=s,U-=257,v=256):(M=o,N=a,v=-1),O=0,S=0,E=T,m=l,k=C,R=0,g=-1,y=(I=1<<C)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){b=E-R,u[S]<v?(w=0,_=u[S]):u[S]>v?(w=N[U+u[S]],_=M[D+u[S]]):(w=96,_=0),f=1<<E-R,T=p=1<<k;do{c[m+(O>>R)+(p-=f)]=b<<24|w<<16|_|0}while(0!==p);for(f=1<<E-1;O&f;)f>>=1;if(0!==f?(O&=f-1,O+=f):O=0,S++,0==--B[E]){if(E===A)break;E=e[i+u[S]]}if(E>C&&(O&y)!==g){for(0===R&&(R=C),m+=T,P=1<<(k=E-R);k+R<A&&!((P-=B[k+R])<=0);)k++,P<<=1;if(I+=1<<k,1===t&&I>852||2===t&&I>592)return 1;c[g=O&y]=C<<24|k<<16|m-l|0}}return 0!==O&&(c[m+O]=E-R<<24|64<<16|0),d.bits=C,0}},48898:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},10342:(t,e,i)=>{"use strict";var r=i(24236);function n(t){for(var e=t.length;--e>=0;)t[e]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);n(c);var l=new Array(60);n(l);var u=new Array(512);n(u);var d=new Array(256);n(d);var f=new Array(29);n(f);var p,g,y,m=new Array(30);function v(t,e,i,r,n){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=t&&t.length}function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function w(t){return t<256?u[t]:u[256+(t>>>7)]}function _(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,_(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function E(t,e,i){x(t,i[2*e],i[2*e+1])}function S(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function T(t,e,i){var r,n,s=new Array(16),o=0;for(r=1;r<=15;r++)s[r]=o=o+i[r-1]<<1;for(n=0;n<=e;n++){var a=t[2*n+1];0!==a&&(t[2*n]=S(s[a]++,a))}}function A(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function C(t){t.bi_valid>8?_(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function k(t,e,i,r){var n=2*e,s=2*i;return t[n]<t[s]||t[n]===t[s]&&r[e]<=r[i]}function R(t,e,i){for(var r=t.heap[i],n=i<<1;n<=t.heap_len&&(n<t.heap_len&&k(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!k(e,r,t.heap[n],t.depth));)t.heap[i]=t.heap[n],i=n,n<<=1;t.heap[i]=r}function P(t,e,i){var r,n,a,h,c=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],n=t.pending_buf[t.l_buf+c],c++,0===r?E(t,n,e):(E(t,(a=d[n])+256+1,e),0!==(h=s[a])&&x(t,n-=f[a],h),E(t,a=w(--r),i),0!==(h=o[a])&&x(t,r-=m[a],h))}while(c<t.last_lit);E(t,256,e)}function I(t,e){var i,r,n,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[n]=0,t.opt_len--,a&&(t.static_len-=o[2*n+1]);for(e.max_code=c,i=t.heap_len>>1;i>=1;i--)R(t,s,i);n=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,s[2*n]=s[2*i]+s[2*r],t.depth[n]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,s[2*i+1]=s[2*r+1]=n,t.heap[1]=n++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,r,n,s,o,a,h=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,u=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(s=h[2*h[2*(r=t.heap[i])+1]+1]+1)>p&&(s=p,g++),h[2*r+1]=s,r>c||(t.bl_count[s]++,o=0,r>=f&&(o=d[r-f]),a=h[2*r],t.opt_len+=a*(s+o),u&&(t.static_len+=a*(l[2*r+1]+o)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(r=t.bl_count[s];0!==r;)(n=t.heap[--i])>c||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),r--)}}(t,e),T(s,c,t.bl_count)}function O(t,e,i){var r,n,s=-1,o=e[1],a=0,h=7,c=4;for(0===o&&(h=138,c=3),e[2*(i+1)+1]=65535,r=0;r<=i;r++)n=o,o=e[2*(r+1)+1],++a<h&&n===o||(a<c?t.bl_tree[2*n]+=a:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=n,0===o?(h=138,c=3):n===o?(h=6,c=3):(h=7,c=4))}function M(t,e,i){var r,n,s=-1,o=e[1],a=0,h=7,c=4;for(0===o&&(h=138,c=3),r=0;r<=i;r++)if(n=o,o=e[2*(r+1)+1],!(++a<h&&n===o)){if(a<c)do{E(t,n,t.bl_tree)}while(0!=--a);else 0!==n?(n!==s&&(E(t,n,t.bl_tree),a--),E(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(E(t,17,t.bl_tree),x(t,a-3,3)):(E(t,18,t.bl_tree),x(t,a-11,7));a=0,s=n,0===o?(h=138,c=3):n===o?(h=6,c=3):(h=7,c=4)}}n(m);var D=!1;function B(t,e,i,n){x(t,0+(n?1:0),3),function(t,e,i,n){C(t),_(t,i),_(t,~i),r.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i)}e._tr_init=function(t){D||(function(){var t,e,i,r,n,h=new Array(16);for(i=0,r=0;r<28;r++)for(f[r]=i,t=0;t<1<<s[r];t++)d[i++]=r;for(d[i-1]=r,n=0,r=0;r<16;r++)for(m[r]=n,t=0;t<1<<o[r];t++)u[n++]=r;for(n>>=7;r<30;r++)for(m[r]=n<<7,t=0;t<1<<o[r]-7;t++)u[256+n++]=r;for(e=0;e<=15;e++)h[e]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,h[8]++;for(;t<=255;)c[2*t+1]=9,t++,h[9]++;for(;t<=279;)c[2*t+1]=7,t++,h[7]++;for(;t<=287;)c[2*t+1]=8,t++,h[8]++;for(T(c,287,h),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=S(t,5);p=new v(c,s,257,286,15),g=new v(l,o,0,30,15),y=new v(new Array(0),a,0,19,7)}(),D=!0),t.l_desc=new b(t.dyn_ltree,p),t.d_desc=new b(t.dyn_dtree,g),t.bl_desc=new b(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,A(t)},e._tr_stored_block=B,e._tr_flush_block=function(t,e,i,r){var n,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),I(t,t.l_desc),I(t,t.d_desc),o=function(t){var e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),I(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=i+5,i+4<=n&&-1!==e?B(t,e,i,r):4===t.strategy||s===n?(x(t,2+(r?1:0),3),P(t,c,l)):(x(t,4+(r?1:0),3),function(t,e,i,r){var n;for(x(t,e-257,5),x(t,i-1,5),x(t,r-4,4),n=0;n<r;n++)x(t,t.bl_tree[2*h[n]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),P(t,t.dyn_ltree,t.dyn_dtree)),A(t),r&&C(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(d[i]+256+1)]++,t.dyn_dtree[2*w(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),E(t,256,c),function(t){16===t.bi_valid?(_(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},62292:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},52818:(t,e,i)=>{"use strict";var r=i(39809);e.certificate=i(41934);var n=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=n;var s=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=s;var o=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));e.PublicKey=o;var a=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),h=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=h;var c=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=c;var l=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=l,e.DSAparam=r.define("DSAparam",(function(){this.int()}));var u=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=u;var d=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},41934:(t,e,i)=>{"use strict";var r=i(39809),n=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),s=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),o=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())})),h=r.define("RelativeDistinguishedName",(function(){this.setof(s)})),c=r.define("RDNSequence",(function(){this.seqof(h)})),l=r.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),u=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))})),d=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),f=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(l),this.key("validity").use(u),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())})),p=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())}));t.exports=p},77631:(t,e,i)=>{var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=i(13048),a=i(44696),h=i(89509).Buffer;t.exports=function(t,e){var i,c=t.toString(),l=c.match(r);if(l){var u="aes"+l[1],d=h.from(l[2],"hex"),f=h.from(l[3].replace(/[\r\n]/g,""),"base64"),p=o(e,d.slice(0,8),parseInt(l[1],10)).key,g=[],y=a.createDecipheriv(u,p,d);g.push(y.update(f)),g.push(y.final()),i=h.concat(g)}else{var m=c.match(s);i=h.from(m[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(n)[1],data:i}}},70980:(t,e,i)=>{var r=i(52818),n=i(22562),s=i(77631),o=i(44696),a=i(25632),h=i(89509).Buffer;function c(t){var e;"object"!=typeof t||h.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=h.from(t));var i,c,l=s(t,e),u=l.tag,d=l.data;switch(u){case"CERTIFICATE":c=r.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(d,"der")),i=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":d=function(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=n[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,l=t.subjectPrivateKey,u=parseInt(s.split("-")[1],10)/8,d=a.pbkdf2Sync(e,i,r,u,"sha1"),f=o.createDecipheriv(s,d,c),p=[];return p.push(f.update(l)),p.push(f.final()),h.concat(p)}(d=r.EncryptedPrivateKey.decode(d,"der"),e);case"PRIVATE KEY":switch(i=(c=r.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=r.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+u)}}t.exports=c,c.signature=r.signature},25632:(t,e,i)=>{e.pbkdf2=i(88638),e.pbkdf2Sync=i(91257)},88638:(t,e,i)=>{var r,n,s=i(89509).Buffer,o=i(77357),a=i(12368),h=i(91257),c=i(57777),l=i.g.crypto&&i.g.crypto.subtle,u={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function f(){return n||(n=i.g.process&&i.g.process.nextTick?i.g.process.nextTick:i.g.queueMicrotask?i.g.queueMicrotask:i.g.setImmediate?i.g.setImmediate:i.g.setTimeout)}function p(t,e,i,r,n){return l.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return l.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:n}},t,r<<3)})).then((function(t){return s.from(t)}))}t.exports=function(t,e,n,g,y,m){"function"==typeof y&&(m=y,y=void 0);var v=u[(y=y||"sha1").toLowerCase()];if(v&&"function"==typeof i.g.Promise){if(o(n,g),t=c(t,a,"Password"),e=c(e,a,"Salt"),"function"!=typeof m)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){f()((function(){e(null,t)}))}),(function(t){f()((function(){e(t)}))}))}(function(t){if(i.g.process&&!i.g.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==d[t])return d[t];var e=p(r=r||s.alloc(8),r,10,128,t).then((function(){return!0})).catch((function(){return!1}));return d[t]=e,e}(v).then((function(i){return i?p(t,e,n,g,v):h(t,e,n,g,y)})),m)}else f()((function(){var i;try{i=h(t,e,n,g,y)}catch(t){return m(t)}m(null,i)}))}},12368:(t,e,i)=>{var r,n=i(34155);r=i.g.process&&i.g.process.browser?"utf-8":i.g.process&&i.g.process.version?parseInt(n.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=r},77357:t=>{var e=Math.pow(2,30)-1;t.exports=function(t,i){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>e||i!=i)throw new TypeError("Bad key length")}},91257:(t,e,i)=>{var r=i(78028),n=i(79785),s=i(89072),o=i(89509).Buffer,a=i(77357),h=i(12368),c=i(57777),l=o.alloc(128),u={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(t,e,i){var a=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new n).update(t).digest()}:"md5"===t?r:function(e){return s(t).update(e).digest()}}(t),h="sha512"===t||"sha384"===t?128:64;e.length>h?e=a(e):e.length<h&&(e=o.concat([e,l],h));for(var c=o.allocUnsafe(h+u[t]),d=o.allocUnsafe(h+u[t]),f=0;f<h;f++)c[f]=54^e[f],d[f]=92^e[f];var p=o.allocUnsafe(h+i+4);c.copy(p,0,0,h),this.ipad1=p,this.ipad2=c,this.opad=d,this.alg=t,this.blocksize=h,this.hash=a,this.size=u[t]}d.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,i,r,n){a(i,r);var s=new d(n=n||"sha1",t=c(t,h,"Password"),(e=c(e,h,"Salt")).length),l=o.allocUnsafe(r),f=o.allocUnsafe(e.length+4);e.copy(f,0,0,e.length);for(var p=0,g=u[n],y=Math.ceil(r/g),m=1;m<=y;m++){f.writeUInt32BE(m,e.length);for(var v=s.run(f,s.ipad1),b=v,w=1;w<i;w++){b=s.run(b,s.ipad2);for(var _=0;_<g;_++)v[_]^=b[_]}v.copy(l,p),p+=g}return l}},57777:(t,e,i)=>{var r=i(89509).Buffer;t.exports=function(t,e,i){if(r.isBuffer(t))return t;if("string"==typeof t)return r.from(t,e);if(ArrayBuffer.isView(t))return r.from(t.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},88785:(t,e,i)=>{"use strict";const{CID:r}=i(81362),n=i(22817),s=i(98441),o=i(99086),a=i(9885),{base58btc:h}=i(99086),{base32:c}=i(22817),{base16:l}=i(84835),u=i(28924),d=i(14437),f=i(98514),{PeerIdProto:p}=i(28780),{equals:g}=i(19588),{fromString:y}=i(52217),{toString:m}=i(92263),{identity:v}=i(78103),b={...n,...s,...o,...a},w=Object.keys(b).reduce(((t,e)=>t.or(b[e])),c.decoder),_=f(class{constructor(t,e,i){if(!(t instanceof Uint8Array))throw new Error("invalid id provided");if(e&&i&&!g(e.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=t,this._idB58String=h.encode(this.id).substring(1),this._privKey=e,this._pubKey=i}get id(){return this._id}set id(t){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(t){this._privKey=t}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{const t=u.decode(this.id);t.code===v.code&&(this._pubKey=d.unmarshalPublicKey(t.digest))}catch(t){}return this._pubKey}set pubKey(t){this._pubKey=t}marshalPubKey(){if(this.pubKey)return d.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return d.marshalPrivateKey(this.privKey)}marshal(t){return p.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:t?null:this.marshalPrivKey()}).finish()}toPrint(){let t=this.toB58String();t.startsWith("Qm")&&(t=t.slice(2));let e=6;return t.length<e&&(e=t.length),"<peer.ID "+t.substr(0,e)+">"}toJSON(){return{id:this.toB58String(),privKey:T(this.marshalPrivKey()),pubKey:T(this.marshalPubKey())}}toHexString(){return l.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){const t=r.createV1(114,u.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:t.toString(),enumerable:!1})}return this._idCIDString}equals(t){if(t instanceof Uint8Array)return g(this.id,t);if(t.id)return g(this.id,t.id);throw new Error("not valid Id")}isEqual(t){return this.equals(t)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&g(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(u.decode(this.id).code===v.code)return!0}catch(t){}return!1}},{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});e=t.exports=_;const x=t=>t.bytes.length<=42?u.create(v.code,t.bytes).bytes:t.hash(),E=async(t,e)=>{const i=await x(e);return new _(i,t,e)};e.create=async t=>{(t=t||{}).bits=t.bits||2048,t.keyType=t.keyType||"RSA";const e=await d.generateKeyPair(t.keyType,t.bits);return E(e,e.public)},e.createFromHexString=t=>new _(l.decode("f"+t)),e.createFromBytes=t=>{try{const i=r.decode(t);if(!S(i))throw new Error("Supplied PeerID CID is invalid");return e.createFromCID(i)}catch{if(u.decode(t).code!==v.code)throw new Error("Supplied PeerID CID is invalid");return new _(t)}},e.createFromB58String=t=>e.createFromBytes(h.decode("z"+t));const S=t=>114===t.code||112===t.code;function T(t){if(t)return m(t,"base64pad")}e.createFromCID=t=>{if(!(t=r.asCID(t))||!S(t))throw new Error("Supplied PeerID CID is invalid");return new _(t.multihash.bytes)},e.createFromPubKey=async t=>{let e=t;if("string"==typeof e&&(e=y(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const i=await d.unmarshalPublicKey(e);return E(void 0,i)},e.createFromPrivKey=async t=>{if("string"==typeof t&&(t=y(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const e=await d.unmarshalPrivateKey(t);return E(e,e.public)},e.createFromJSON=async t=>{const e=h.decode("z"+t.id),i=t.privKey&&y(t.privKey,"base64pad"),r=t.pubKey&&y(t.pubKey,"base64pad"),n=r&&await d.unmarshalPublicKey(r);if(!i)return new _(e,void 0,n);const s=await d.unmarshalPrivateKey(i),o=await x(s.public);let a;if(n&&(a=await x(n)),n&&!g(o,a))throw new Error("Public and private key do not match");if(e&&!g(o,e))throw new Error("Id and private key do not match");return new _(e,s,n)},e.createFromProtobuf=async t=>{"string"==typeof t&&(t=y(t,"base16"));let e,i,{id:r,privKey:n,pubKey:s}=p.decode(t);if(n=!!n&&await d.unmarshalPrivateKey(n),s=!!s&&await d.unmarshalPublicKey(s),n&&(i=await x(n.public)),s&&(e=await x(s)),n){if(s&&!g(i,e))throw new Error("Public and private key do not match");return new _(i,n,n.public)}if(s)return new _(e,void 0,s);if(r)return new _(r);throw new Error("Protobuf did not contain any usable key material")},e.parse=t=>("1"!==t.charAt(0)&&"Q"!==t.charAt(0)||(t=`z${t}`),e.createFromBytes(w.decode(t))),e.isPeerId=t=>Boolean("object"==typeof t&&t._id&&t._idB58String)},28780:(t,e,i)=>{"use strict";var r=i(62100),n=r.Reader,s=r.Writer,o=r.util,a=r.roots["libp2p-peer-id"]||(r.roots["libp2p-peer-id"]={});a.PeerIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.id=o.newBuffer([]),t.prototype.pubKey=o.newBuffer([]),t.prototype.privKey=o.newBuffer([]),t.encode=function(t,e){return e||(e=s.create()),e.uint32(10).bytes(t.id),null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(18).bytes(t.pubKey),null!=t.privKey&&Object.hasOwnProperty.call(t,"privKey")&&e.uint32(26).bytes(t.privKey),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new a.PeerIdProto;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:r.id=t.bytes();break;case 2:r.pubKey=t.bytes();break;case 3:r.privKey=t.bytes();break;default:t.skipType(7&s)}}if(!r.hasOwnProperty("id"))throw o.ProtocolError("missing required 'id'",{instance:r});return r},t.fromObject=function(t){if(t instanceof a.PeerIdProto)return t;var e=new a.PeerIdProto;return null!=t.id&&("string"==typeof t.id?o.base64.decode(t.id,e.id=o.newBuffer(o.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),null!=t.pubKey&&("string"==typeof t.pubKey?o.base64.decode(t.pubKey,e.pubKey=o.newBuffer(o.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.privKey&&("string"==typeof t.privKey?o.base64.decode(t.privKey,e.privKey=o.newBuffer(o.base64.length(t.privKey)),0):t.privKey.length&&(e.privKey=t.privKey)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.id="":(i.id=[],e.bytes!==Array&&(i.id=o.newBuffer(i.id))),e.bytes===String?i.pubKey="":(i.pubKey=[],e.bytes!==Array&&(i.pubKey=o.newBuffer(i.pubKey))),e.bytes===String?i.privKey="":(i.privKey=[],e.bytes!==Array&&(i.privKey=o.newBuffer(i.privKey)))),null!=t.id&&t.hasOwnProperty("id")&&(i.id=e.bytes===String?o.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id),null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(i.pubKey=e.bytes===String?o.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey),null!=t.privKey&&t.hasOwnProperty("privKey")&&(i.privKey=e.bytes===String?o.base64.encode(t.privKey,0,t.privKey.length):e.bytes===Array?Array.prototype.slice.call(t.privKey):t.privKey),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=a},82260:function(t){var e;e=function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1528)}([function(t,e){function i(t,e,i){var r=i?t[e]:Object.getOwnPropertyDescriptor(t,e);return!i&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function r(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!!i&&(i.value&&"object"==typeof i.value&&(i=i.value),!1===i.configurable)}function n(t,e,n,s){for(var a in e)if(e.hasOwnProperty(a)){var h=i(e,a,n);if(!1!==h){if(r((s||t).prototype,a)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=e[a]}}function s(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)n(t,e[i].prototype||e[i])}}function o(t){var e,i;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;e=function(){r.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,i=t.Extends,delete t.Extends):e.prototype.constructor=e;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),s(e,o),n(e,t,!0,i),e}o.extend=n,o.mixin=s,o.ignoreFinals=!1,t.exports=o},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,i){var r=typeof t;return t&&"number"!==r&&"string"!==r&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},function(t,e,i){var r=i(0),n=i(124),s=new r({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new s(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return n(this.x,t.x,e)&&n(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y;return this.x=i+e*(t.x-i),this.y=r+e*(t.y-r),this},transformMat3:function(t){var e=this.x,i=this.y,r=t.val;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this},transformMat4:function(t){var e=this.x,i=this.y,r=t.val;return this.x=r[0]*e+r[4]*i+r[12],this.y=r[1]*e+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e*this.x-i*this.y,i*this.x+e*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),t.exports=s},function(t,e,i){var r=i(0),n=i(56),s=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=n.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=s},function(t,e,i){var r=i(0),n=i(24),s=i(20),o=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},n.register("GameObjectFactory",o,"add"),t.exports=o},function(t,e){t.exports=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,s=i,o=0;o<r.length;o++){if(!n.hasOwnProperty(r[o])){s=i;break}s=n[r[o]],n=n[r[o]]}return s}return i}return i}},function(t,e){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e){var i={},r={install:function(t){for(var e in i)t[e]=i[e]},register:function(t,e){i[t]=e},destroy:function(){i={}}};t.exports=r},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function o(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,r,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new o(i,r||t,s),h=n?n+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function c(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},c.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},c.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},c.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var h,c,l=this._events[a],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,s),!0;case 6:return l.fn.call(l.context,e,i,r,s,o),!0}for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];l.fn.apply(l.context,h)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,i);break;case 4:l[c].fn.call(l[c].context,e,i,r);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];l[c].fn.apply(l[c].context,h)}}return!0},c.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},c.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},c.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||h(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==e||r&&!o[a].once||i&&o[a].context!==i)&&c.push(o[a]);c.length?this._events[s]=1===c.length?c[0]:c:h(this,s)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,e,i){var r=i(0),n=i(57),s=i(171),o=i(306),a=i(56),h=i(47),c=i(174),l=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=r},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return c(this,t)},setTo:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=l},function(t,e,i){t.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(t,e){function i(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}t.exports={getTintFromFloats:function(t,e,i,r){return((255&(255*r|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,e){e&&-1!==e||(e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var r=t.createShader(t.FRAGMENT_SHADER),n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var s=n.replace(/%forloop%/gi,i(e));if(t.shaderSource(r,s),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var i="",r=0;r<e;r++)r>0&&(i+="\n\telse "),r<e-1&&(i+="if (outTexId < "+r+".5)"),i+="\n\t{",i+="\n\t\ttexture = texture2D(uMainSampler["+r+"], outTexCoord);",i+="\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,i)}}},function(t,e,i){var r=i(193),n=i(6);t.exports=function(t,e,i){var s=n(t,e,null);if(null===s)return i;if(Array.isArray(s))return r.RND.pick(s);if("object"==typeof s){if(s.hasOwnProperty("randInt"))return r.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return r.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if("function"==typeof s)return s(e);return s}},function(t,e){var i={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=i},function(t,e,i){var r=i(0),n=i(176),s=i(101),o=i(9),a=i(75),h=i(20),c=new r({Extends:o,initialize:function(t,e){o.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(t,e){return this.data||(this.data=new s(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new s(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new s(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new s(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(t){return!(c.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(t)):i.unshift(this.scene.sys.displayList.getIndex(t)),i},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});c.RENDER_MASK=15,t.exports=c},function(t,e,i){var r=i(0),n=i(24),s=i(20),o=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},n.register("GameObjectCreator",o,"make"),t.exports=o},function(t,e,i){var r=i(7),n=function(){var t,e,i,s,o,a,h=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof h&&(u=h,h=arguments[1]||{},c=2),l===c&&(h=this,--c);c<l;c++)if(null!=(t=arguments[c]))for(e in t)i=h[e],h!==(s=t[e])&&(u&&s&&(r(s)||(o=Array.isArray(s)))?(o?(o=!1,a=i&&Array.isArray(i)?i:[]):a=i&&r(i)?i:{},h[e]=n(u,a,s)):void 0!==s&&(h[e]=s));return h};t.exports=n},function(t,e){t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},function(t,e,i){var r=i(25),n=new r,s=new r,o=new r,a={camera:n,sprite:s,calc:o};t.exports=function(t,e,i){var r=n,h=s,c=o;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),r.multiply(h,c),a}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,i){t.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(t,e,i){var r=i(0),n=i(21),s=i(95),o=i(2),a=i(155),h=i(240),c=i(517),l=i(156),u=new r({initialize:function(t,e){this.loader=t,this.cache=o(e,"cache",!1),this.type=o(e,"type",!1),this.key=o(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var r=o(e,"url");void 0===r?r=t.path+i+"."+o(e,"extension",""):"string"!=typeof r||r.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(r=t.path+r),this.url=r,this.src="",this.xhrSettings=l(o(e,"responseType",void 0)),o(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,o(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=c(this,this.loader.xhr))},onLoad:function(t,e){var i=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status,r=!(e.target&&200!==e.target.status)||i;4===t.readyState&&t.status>=400&&t.status<=599&&(r=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,r)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,i=this.type;this.loader.emit(s.FILE_COMPLETE,e,i,t),this.loader.emit(s.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});u.createObjectURL=function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var r=new FileReader;r.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+r.result.split(",")[1]},r.onerror=t.onerror,r.readAsDataURL(e)}},u.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=u},function(t,e){var i={},r={},n={register:function(t,e,r,n){void 0===n&&(n=!1),i[t]={plugin:e,mapping:r,custom:n}},registerCustom:function(t,e,i,n){r[t]={plugin:e,mapping:i,data:n}},hasCore:function(t){return i.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return i[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){i.hasOwnProperty(t)&&delete i[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in i)i.hasOwnProperty(t)&&delete i[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=n},function(t,e,i){var r=i(0),n=i(14),s=i(3),o=new r({initialize:function(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.matrix=new Float32Array([t,e,i,r,n,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],r=t[2],s=t[3];return e||i?i>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):r||s?n.TAU-(s>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),r=this.matrix,n=r[0],s=r[1],o=r[2],a=r[3];return r[0]=n*i+o*e,r[1]=s*i+a*e,r[2]=n*-e+o*i,r[3]=s*-e+a*i,this},multiply:function(t,e){var i=this.matrix,r=t.matrix,n=i[0],s=i[1],o=i[2],a=i[3],h=i[4],c=i[5],l=r[0],u=r[1],d=r[2],f=r[3],p=r[4],g=r[5],y=void 0===e?this:e;return y.a=l*n+u*o,y.b=l*s+u*a,y.c=d*n+f*o,y.d=d*s+f*a,y.e=p*n+g*o+h,y.f=p*s+g*a+c,y},multiplyWithOffset:function(t,e,i){var r=this.matrix,n=t.matrix,s=r[0],o=r[1],a=r[2],h=r[3],c=e*s+i*a+r[4],l=e*o+i*h+r[5],u=n[0],d=n[1],f=n[2],p=n[3],g=n[4],y=n[5];return r[0]=u*s+d*a,r[1]=u*o+d*h,r[2]=f*s+p*a,r[3]=f*o+p*h,r[4]=g*s+y*a+c,r[5]=g*o+y*h+l,this},transform:function(t,e,i,r,n,s){var o=this.matrix,a=o[0],h=o[1],c=o[2],l=o[3],u=o[4],d=o[5];return o[0]=t*a+e*c,o[1]=t*h+e*l,o[2]=i*a+r*c,o[3]=i*h+r*l,o[4]=n*a+s*c+u,o[5]=n*h+s*l+d,this},transformPoint:function(t,e,i){void 0===i&&(i={x:0,y:0});var r=this.matrix,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],c=r[5];return i.x=t*n+e*o+h,i.y=t*s+e*a+c,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=e*n-i*r;return t[0]=n/a,t[1]=-i/a,t[2]=-r/a,t[3]=e/a,t[4]=(r*o-n*s)/a,t[5]=-(e*o-i*s)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,r,n,s){var o=this.matrix;return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,i=e[0],r=e[1],n=e[2],s=e[3],o=i*s-r*n;if(t.translateX=e[4],t.translateY=e[5],i||r){var a=Math.sqrt(i*i+r*r);t.rotation=r>0?Math.acos(i/a):-Math.acos(i/a),t.scaleX=a,t.scaleY=o/a}else if(n||s){var h=Math.sqrt(n*n+s*s);t.rotation=.5*Math.PI-(s>0?Math.acos(-n/h):-Math.acos(n/h)),t.scaleX=o/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,i,r,n){var s=this.matrix,o=Math.sin(i),a=Math.cos(i);return s[4]=t,s[5]=e,s[0]=a*r,s[1]=o*r,s[2]=-o*n,s[3]=a*n,this},applyInverse:function(t,e,i){void 0===i&&(i=new s);var r=this.matrix,n=r[0],o=r[1],a=r[2],h=r[3],c=r[4],l=r[5],u=1/(n*h+a*-o);return i.x=h*u*t+-a*u*e+(l*a-c*h)*u,i.y=n*u*e+-o*u*t+(-l*n+c*o)*u,i},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,i){var r=this.getX(t,e);return i&&(r=Math.round(r)),r},getYRound:function(t,e,i){var r=this.getY(t,e);return i&&(r=Math.round(r)),r},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=o},function(t,e,i){var r=i(2);t.exports=function(t,e,i,n,s,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=o.width),void 0===n&&(n=o.height),s||(s={});var a=r(s,"isNotEmpty",!1),h=r(s,"isColliding",!1),c=r(s,"hasInterestingFace",!1);t<0&&(i+=t,t=0),e<0&&(n+=e,e=0),t+i>o.width&&(i=Math.max(o.width-t,0)),e+n>o.height&&(n=Math.max(o.height-e,0));for(var l=[],u=e;u<e+n;u++)for(var d=t;d<t+i;d++){var f=o.data[u][d];if(null!==f){if(a&&-1===f.index)continue;if(h&&!f.collides)continue;if(c&&!f.hasInterestingFace)continue;l.push(f)}}return l}},function(t,e){t.exports=function(t,e,i,r,n,s){var o;void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1);var a=0,h=t.length;if(1===s)for(o=n;o<h;o++)t[o][e]=i+a*r,a++;else for(o=n;o>=0;o--)t[o][e]=i+a*r,a++;return t}},function(t,e,i){var r=i(35),n=i(13);t.exports=function(t,e,i){e.x=n(i,"x",0),e.y=n(i,"y",0),e.depth=n(i,"depth",0),e.flipX=n(i,"flipX",!1),e.flipY=n(i,"flipY",!1);var s=n(i,"scale",null);"number"==typeof s?e.setScale(s):null!==s&&(e.scaleX=n(s,"x",1),e.scaleY=n(s,"y",1));var o=n(i,"scrollFactor",null);"number"==typeof o?e.setScrollFactor(o):null!==o&&(e.scrollFactorX=n(o,"x",1),e.scrollFactorY=n(o,"y",1)),e.rotation=n(i,"rotation",0);var a=n(i,"angle",null);null!==a&&(e.angle=a),e.alpha=n(i,"alpha",1);var h=n(i,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){var c=n(h,"x",.5),l=n(h,"y",.5);e.setOrigin(c,l)}return e.blendMode=n(i,"blendMode",r.NORMAL),e.visible=n(i,"visible",!0),n(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n,s){var o=n.alpha*i.alpha;if(o<=0)return!1;var a=r(i,n,s).calc;return e.globalCompositeOperation=t.blendModes[i.blendMode],e.globalAlpha=o,e.save(),a.setToContext(e),e.imageSmoothingEnabled=!(!t.antialias||i.frame&&i.frame.source.scaleMode),!0}},function(t,e,i){var r,n,s,o=i(33),a=i(192),h=[],c=!1;t.exports=(s=function(){var t=0;return h.forEach((function(e){e.parent&&t++})),t},{create2D:function(t,e,i){return r(t,e,i,o.CANVAS)},create:r=function(t,e,i,r,s){var l;void 0===e&&(e=1),void 0===i&&(i=1),void 0===r&&(r=o.CANVAS),void 0===s&&(s=!1);var u=n(r);return null===u?(u={parent:t,canvas:document.createElement("canvas"),type:r},r===o.CANVAS&&h.push(u),l=u.canvas):(u.parent=t,l=u.canvas),s&&(u.parent=l),l.width=e,l.height=i,c&&r===o.CANVAS&&a.disable(l.getContext("2d")),l},createWebGL:function(t,e,i){return r(t,e,i,o.WEBGL)},disableSmoothing:function(){c=!0},enableSmoothing:function(){c=!1},first:n=function(t){if(void 0===t&&(t=o.CANVAS),t===o.WEBGL)return null;for(var e=0;e<h.length;e++){var i=h[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return h.length-s()},pool:h,remove:function(t){var e=t instanceof HTMLCanvasElement;h.forEach((function(i){(e&&i.canvas===t||!e&&i.parent===t)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)}))},total:s})},function(t,e){var i={};t.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(t,e){var r,n;"boolean"==typeof e?(r=2,n=e):(r=1,n=!0);for(var s=r;s<arguments.length;s++){var o=arguments[s];if(o)for(var a in o)n&&o[a]&&o[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=o[a]:(t[a]=t[a]||{},i.extend(t[a],n,o[a])):t[a]=o[a]}return t},i.clone=function(t,e){return i.extend({},e,t)},i.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},i.values=function(t){var e=[];if(Object.keys){for(var i=Object.keys(t),r=0;r<i.length;r++)e.push(t[i[r]]);return e}for(var n in t)e.push(t[n]);return e},i.get=function(t,e,i,r){e=e.split(".").slice(i,r);for(var n=0;n<e.length;n+=1)t=t[e[n]];return t},i.set=function(t,e,r,n,s){var o=e.split(".").slice(n,s);return i.get(t,e,0,-1)[o[o.length-1]]=r,r},i.shuffle=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(i.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t},i.choose=function(t){return t[Math.floor(i.random()*t.length)]},i.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isFunction=function(t){return"function"==typeof t},i.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},i.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},i.clamp=function(t,e,i){return t<e?e:t>i?i:t},i.sign=function(t){return t<0?-1:1},i.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(e,i){return i=void 0!==i?i:1,(e=void 0!==e?e:0)+t()*(i-e)};var t=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280};i.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.map=function(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r+=1)i.push(e(t[r]));return i},i.topologicalSort=function(t){var e=[],r=[],n=[];for(var s in t)r[s]||n[s]||i._topologicalSort(s,r,n,t,e);return e},i._topologicalSort=function(t,e,r,n,s){var o=n[t]||[];r[t]=!0;for(var a=0;a<o.length;a+=1){var h=o[a];r[h]||e[h]||i._topologicalSort(h,e,r,n,s)}r[t]=!1,e[t]=!0,s.push(t)},i.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var i=arguments[e];i._chained?t.push.apply(t,i._chained):t.push(i)}var r=function(){for(var e,i=new Array(arguments.length),r=0,n=arguments.length;r<n;r++)i[r]=arguments[r];for(r=0;r<t.length;r+=1){var s=t[r].apply(e,i);void 0!==s&&(e=s)}return e};return r._chained=t,r},i.chainPathBefore=function(t,e,r){return i.set(t,e,i.chain(r,i.get(t,e)))},i.chainPathAfter=function(t,e,r){return i.set(t,e,i.chain(i.get(t,e),r))}}()},function(t,e,i){var r={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=r},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(47),a=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),s.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=a},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e,i){var r=i(14);t.exports=function(t){return t*r.DEG_TO_RAD}},function(t,e,i){t.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(t,e,i){var r=i(0),n=i(103),s=i(328),o=i(188),a=i(329),h=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,i,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,i,r,n){return void 0===r&&(r=255),void 0===n&&(n=!0),this._locked=!0,this.red=t,this.green=e,this.blue=i,this.alpha=r,this._locked=!1,this.update(n)},setGLTo:function(t,e,i,r){return void 0===r&&(r=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=i,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,i){return o(t,e,i,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,i=this.g,r=this.b,o=this.a;return this._color=n(e,i,r),this._color32=s(e,i,r,o),this._rgba="rgba("+e+","+i+","+r+","+o/255+")",t&&a(e,i,r,this),this},updateHSV:function(){var t=this.r,e=this.g,i=this.b;return a(t,e,i,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t)),r=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t));return this.setTo(i,r,n)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t));return this.setTo(i,i,i)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,i=this.g,r=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),this.setTo(e,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,o(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,o(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,o(this._h,this._s,t,this)}}});t.exports=h},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-n*o,this.y=n*s-i*a,this.z=i*o-r*s,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0;return Math.sqrt(e*e+i*i+r*r)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0;return e*e+i*i+r*r},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,r=t*t+e*e+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=i*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*n-e*o,this.z=e*s-i*n,this},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y,n=this.z;return this.x=i+e*(t.x-i),this.y=r+e*(t.y-r),this.z=n+e*(t.z-n),this},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,n=t.val;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=t.val,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this},transformMat3:function(t){var e=this.x,i=this.y,r=this.z,n=t.val;return this.x=e*n[0]+i*n[3]+r*n[6],this.y=e*n[1]+i*n[4]+r*n[7],this.z=e*n[2]+i*n[5]+r*n[8],this},transformMat4:function(t){var e=this.x,i=this.y,r=this.z,n=t.val;return this.x=n[0]*e+n[4]*i+n[8]*r+n[12],this.y=n[1]*e+n[5]*i+n[9]*r+n[13],this.z=n[2]*e+n[6]*i+n[10]*r+n[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,r=this.z,n=t.val,s=e*n[0]+i*n[4]+r*n[8]+n[12],o=e*n[1]+i*n[5]+r*n[9]+n[13],a=e*n[2]+i*n[6]+r*n[10]+n[14],h=e*n[3]+i*n[7]+r*n[11]+n[15];return this.x=s/h,this.y=o/h,this.z=a/h,this},transformQuat:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*r-o*i,c=a*i+o*e-n*r,l=a*r+n*i-s*e,u=-n*e-s*i-o*r;return this.x=h*a+u*-n+c*-o-l*-s,this.y=c*a+u*-s+l*-n-h*-o,this.z=l*a+u*-o+h*-s-c*-n,this},project:function(t){var e=this.x,i=this.y,r=this.z,n=t.val,s=n[0],o=n[1],a=n[2],h=n[3],c=n[4],l=n[5],u=n[6],d=n[7],f=n[8],p=n[9],g=n[10],y=n[11],m=n[12],v=n[13],b=n[14],w=1/(e*h+i*d+r*y+n[15]);return this.x=(e*s+i*c+r*f+m)*w,this.y=(e*o+i*l+r*p+v)*w,this.z=(e*a+i*u+r*g+b)*w,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var i=t.x,r=t.y,n=t.z,s=t.w,o=this.x-i,a=s-this.y-1-r,h=this.z;return this.x=2*o/n-1,this.y=2*a/s-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),t.exports=r},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83),o=i(165),a=i(32),h=i(84),c=i(271);!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(e){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=n.centre(e.vertices):e.hasOwnProperty("vertices")||(i.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var r=a.extend(i,e);return t(r,e),r.setOnCollideWith=function(t,e){return e?this.onCollideWith[t.id]=e:delete this.onCollideWith[t.id],this},r},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var t=function(t,e){e=e||{},r.set(t,{bounds:t.bounds||h.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var i=t.bounds;if(n.rotate(t.vertices,t.angle,t.position),c.rotate(t.axes,t.angle),h.update(i,t.vertices,t.velocity),r.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia}),1===t.parts.length){var o=t.centerOfMass,a=t.centerOffset,l=i.max.x-i.min.x,u=i.max.y-i.min.y;o.x=-(i.min.x-t.position.x)/l,o.y=-(i.min.y-t.position.y)/u,a.x=l*o.x,a.y=u*o.y}};r.set=function(t,e,i){var n;for(n in"string"==typeof e&&(n=e,(e={})[n]=i),e)if(Object.prototype.hasOwnProperty.call(e,n))switch(i=e[n],n){case"isStatic":r.setStatic(t,i);break;case"isSleeping":o.set(t,i);break;case"mass":r.setMass(t,i);break;case"density":r.setDensity(t,i);break;case"inertia":r.setInertia(t,i);break;case"vertices":r.setVertices(t,i);break;case"position":r.setPosition(t,i);break;case"angle":r.setAngle(t,i);break;case"velocity":r.setVelocity(t,i);break;case"angularVelocity":r.setAngularVelocity(t,i);break;case"parts":r.setParts(t,i);break;case"centre":r.setCentre(t,i);break;default:t[n]=i}},r.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var r=t.parts[i];r.isStatic=e,e?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null)}},r.setMass=function(t,e){var i=t.inertia/(t.mass/6);t.inertia=i*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,e){r.setMass(t,e*t.area),t.density=e},r.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},r.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=n.create(e,t),t.axes=c.fromVertices(t.vertices),t.area=n.area(t.vertices),r.setMass(t,t.density*t.area);var i=n.centre(t.vertices);n.translate(t.vertices,i,-1),r.setInertia(t,r._inertiaScale*n.inertia(t.vertices,t.mass)),n.translate(t.vertices,t.position),h.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,e,i){var s;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,s=0;s<e.length;s++){var o=e[s];o!==t&&(o.parent=t,t.parts.push(o))}if(1!==t.parts.length){if(i=void 0===i||i){var a=[];for(s=0;s<e.length;s++)a=a.concat(e[s].vertices);n.clockwiseSort(a);var c=n.hull(a),l=n.centre(c);r.setVertices(t,c),n.translate(t.vertices,l)}var u=r._totalProperties(t),d=u.centre.x,f=u.centre.y,p=t.bounds,g=t.centerOfMass,y=t.centerOffset;h.update(p,t.vertices,t.velocity),g.x=-(p.min.x-d)/(p.max.x-p.min.x),g.y=-(p.min.y-f)/(p.max.y-p.min.y),y.x=d,y.y=f,t.area=u.area,t.parent=t,t.position.x=d,t.position.y=f,t.positionPrev.x=d,t.positionPrev.y=f,r.setMass(t,u.mass),r.setInertia(t,u.inertia),r.setPosition(t,u.centre)}},r.setCentre=function(t,e,i){i?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},r.setPosition=function(t,e){var i=s.sub(e,t.position);t.positionPrev.x+=i.x,t.positionPrev.y+=i.y;for(var r=0;r<t.parts.length;r++){var o=t.parts[r];o.position.x+=i.x,o.position.y+=i.y,n.translate(o.vertices,i),h.update(o.bounds,o.vertices,t.velocity)}},r.setAngle=function(t,e){var i=e-t.angle;t.anglePrev+=i;for(var r=0;r<t.parts.length;r++){var o=t.parts[r];o.angle+=i,n.rotate(o.vertices,i,t.position),c.rotate(o.axes,i),h.update(o.bounds,o.vertices,t.velocity),r>0&&s.rotateAbout(o.position,i,t.position,o.position)}},r.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=s.magnitude(t.velocity)},r.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},r.translate=function(t,e){r.setPosition(t,s.add(t.position,e))},r.rotate=function(t,e,i){if(i){var n=Math.cos(e),s=Math.sin(e),o=t.position.x-i.x,a=t.position.y-i.y;r.setPosition(t,{x:i.x+(o*n-a*s),y:i.y+(o*s+a*n)}),r.setAngle(t,t.angle+e)}else r.setAngle(t,t.angle+e)},r.scale=function(t,e,i,s){var o=0,a=0;s=s||t.position;for(var l=0;l<t.parts.length;l++){var u=t.parts[l];u.scale.x=e,u.scale.y=i,n.scale(u.vertices,e,i,s),u.axes=c.fromVertices(u.vertices),u.area=n.area(u.vertices),r.setMass(u,t.density*u.area),n.translate(u.vertices,{x:-u.position.x,y:-u.position.y}),r.setInertia(u,r._inertiaScale*n.inertia(u.vertices,u.mass)),n.translate(u.vertices,{x:u.position.x,y:u.position.y}),l>0&&(o+=u.area,a+=u.inertia),u.position.x=s.x+(u.position.x-s.x)*e,u.position.y=s.y+(u.position.y-s.y)*i,h.update(u.bounds,u.vertices,t.velocity)}t.parts.length>1&&(t.area=o,t.isStatic||(r.setMass(t,t.density*o),r.setInertia(t,a))),t.circleRadius&&(e===i?t.circleRadius*=e:t.circleRadius=null)},r.update=function(t,e,i,r){var o=Math.pow(e*i*t.timeScale,2),a=1-t.frictionAir*i*t.timeScale,l=t.position.x-t.positionPrev.x,u=t.position.y-t.positionPrev.y;t.velocity.x=l*a*r+t.force.x/t.mass*o,t.velocity.y=u*a*r+t.force.y/t.mass*o,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*r+t.torque/t.inertia*o,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var d=0;d<t.parts.length;d++){var f=t.parts[d];n.translate(f.vertices,t.velocity),d>0&&(f.position.x+=t.velocity.x,f.position.y+=t.velocity.y),0!==t.angularVelocity&&(n.rotate(f.vertices,t.angularVelocity,t.position),c.rotate(f.axes,t.angularVelocity),d>0&&s.rotateAbout(f.position,t.angularVelocity,t.position,f.position)),h.update(f.bounds,f.vertices,t.velocity)}},r.applyForce=function(t,e,i){t.force.x+=i.x,t.force.y+=i.y;var r=e.x-t.position.x,n=e.y-t.position.y;t.torque+=r*i.y-n*i.x},r._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var r=t.parts[i],n=r.mass!==1/0?r.mass:1;e.mass+=n,e.area+=r.area,e.inertia+=r.inertia,e.centre=s.add(e.centre,s.mult(r.position,n))}return e.centre=s.div(e.centre,e.mass),e}}()},function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e){t.exports=function(t,e,i,r,n,s){var o;void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1);var a=0,h=t.length;if(1===s)for(o=n;o<h;o++)t[o][e]+=i+a*r,a++;else for(o=n;o>=0;o--)t[o][e]+=i+a*r,a++;return t}},function(t,e,i){var r=i(0),n=i(307),s=i(172),o=i(56),a=i(173),h=i(3),c=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=o.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=r},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return s(this,t,e,i)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x1=t,this.y1=e,this.x2=i,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=c},function(t,e){t.exports=function(t,e,i,r){var n=i||e.fillColor,s=r||e.fillAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.fillStyle="rgba("+o+","+a+","+h+","+s+")"}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r){var n=[];r.forEach((function(t){t&&n.push(t)})),this.loader=t,this.type=e,this.key=i,this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var s=0;s<n.length;s++)n[s].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=r},function(t,e){t.exports=function(t,e,i,r){var n=t-i,s=e-r;return Math.sqrt(n*n+s*s)}},function(t,e,i){t.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e){t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i}},function(t,e,i){var r=i(0),n=i(175),s=i(9),o=i(374),a=i(2),h=i(69),c=i(91),l=i(141),u=i(12),d=i(375),f=new r({Extends:s,initialize:function(t){s.call(this);var e=t.game,i=e.renderer,r=i.gl;this.name=a(t,"name","WebGLPipeline"),this.game=e,this.renderer=i,this.manager,this.gl=r,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=a(t,"topology",r.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=a(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t,e=this.gl,i=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=(new h).identity());var n=this.renderTargets,s=a(i,"renderTarget",!1);"boolean"==typeof s&&s&&(s=1);var u=r.width,d=r.height;if("number"==typeof s)for(t=0;t<s;t++)n.push(new l(r,u,d,1,0,!0));else if(Array.isArray(s))for(t=0;t<s.length;t++){var f=a(s[t],"scale",1),p=a(s[t],"minFilter",0),g=a(s[t],"autoClear",1);n.push(new l(r,u,d,f,p,g))}n.length&&(this.currentRenderTarget=n[0]),this.setShadersFromConfig(i);var y=this.shaders,m=0;for(t=0;t<y.length;t++)y[t].vertexSize>m&&(m=y[t].vertexSize);var v=a(i,"batchSize",r.config.batchSize);this.vertexCapacity=6*v;var b=new ArrayBuffer(this.vertexCapacity*m);this.vertexData=b,this.bytes=new Uint8Array(b),this.vertexViewF32=new Float32Array(b),this.vertexViewU32=new Uint32Array(b);var w=a(i,"vertices",null);for(w?(this.vertexViewF32.set(w),this.vertexBuffer=r.createVertexBuffer(b,e.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(b.byteLength,e.DYNAMIC_DRAW),this.setVertexBuffer(),t=y.length-1;t>=0;t--)y[t].rebind();this.hasBooted=!0,r.on(c.RESIZE,this.resize,this),r.on(c.PRE_RENDER,this.onPreRender,this),r.on(c.RENDER,this.onRender,this),r.on(c.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e){var i=this.renderer;return t===this.currentShader&&i.currentProgram===this.currentShader.program||(this.flush(),i.resetTextures(),this.setVertexBuffer()&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},setShadersFromConfig:function(t){var e,i=this.shaders,r=this.renderer;for(e=0;e<i.length;e++)i[e].destroy();var s="vertShader",o="fragShader",h="attributes",c=a(t,s,null),l=u.parseFragmentShaderMaxTextures(a(t,o,null),r.maxTextures),f=a(t,h,null),p=a(t,"shaders",[]),g=p.length;if(0===g)c&&l&&(this.shaders=[new d(this,"default",c,l,n(f))]);else{var y=[];for(e=0;e<g;e++){var m=p[e],v=a(m,"name","default"),b=a(m,s,c),w=u.parseFragmentShaderMaxTextures(a(m,o,l),r.maxTextures),_=a(m,h,f);b&&w&&y.push(new d(this,v,b,w,n(_)))}this.shaders=y}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.currentUnit=this.renderer.setTextureSource(e.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].resize(t,e);return this.setProjectionMatrix(t,e),this.emit(o.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=t,this.projectionHeight=e,i.ortho(0,t,e,0,-1e3,1e3);for(var r=this.shaders,n="uProjectionMatrix",s=0;s<r.length;s++){var o=r[s];o.hasUniform(n)&&(o.resetUniform(n),o.setMatrix4fv(n,!1,i.val,o))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,e=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var e=this.setVertexBuffer();return t.bind(e),this.currentShader=t,this.emit(o.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var e=this.shaders,i=e.length-1;i>=0;i--){var r=e[i].rebind();t&&r!==t||(this.currentShader=r)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,e=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==e&&(t.bindBuffer(t.ARRAY_BUFFER,e),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var e=this.gl,i=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,i*r)),e.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,i,r,n,s,o){var a=this.vertexViewF32,h=this.vertexViewU32,c=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++c]=t,a[++c]=e,a[++c]=i,a[++c]=r,a[++c]=n,a[++c]=s,h[++c]=o,this.vertexCount++},batchQuad:function(t,e,i,r,n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b){void 0===b&&(b=this.currentUnit);var w=!1;return this.shouldFlush(6)&&(this.flush(),w=!0,b=this.setTexture2D(v)),this.batchVert(e,i,c,l,b,m,f),this.batchVert(r,n,c,d,b,m,g),this.batchVert(s,o,u,d,b,m,y),this.batchVert(e,i,c,l,b,m,f),this.batchVert(s,o,u,d,b,m,y),this.batchVert(a,h,u,l,b,m,p),this.onBatch(t),w},batchTri:function(t,e,i,r,n,s,o,a,h,c,l,u,d,f,p,g,y){void 0===y&&(y=this.currentUnit);var m=!1;return this.shouldFlush(3)&&(this.flush(),m=!0,y=this.setTexture2D(g)),this.batchVert(e,i,a,h,y,p,u),this.batchVert(r,n,a,l,y,p,d),this.batchVert(s,o,c,l,y,p,f),this.onBatch(t),m},drawFillRect:function(t,e,i,r,n,s,o,a){void 0===o&&(o=this.renderer.whiteTexture.glTexture),void 0===a&&(a=!0),t=Math.floor(t),e=Math.floor(e);var h=Math.floor(t+i),c=Math.floor(e+r),l=this.setTexture2D(o),d=u.getTintAppendFloatAlphaAndSwap(n,s),f=0,p=1;a&&(f=1,p=0),this.batchQuad(null,t,e,t,c,h,c,h,e,0,f,1,p,d,d,d,d,0,o,l)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,e){void 0===e&&(e=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1f(t,e),this},set2f:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.set2f(t,e,i),this},set3f:function(t,e,i,r,n){return void 0===n&&(n=this.currentShader),n.set3f(t,e,i,r),this},set4f:function(t,e,i,r,n,s){return void 0===s&&(s=this.currentShader),s.set4f(t,e,i,r,n),this},set1fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1fv(t,e),this},set2fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2fv(t,e),this},set3fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3fv(t,e),this},set4fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4fv(t,e),this},set1iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1iv(t,e),this},set2iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2iv(t,e),this},set3iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3iv(t,e),this},set4iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4iv(t,e),this},set1i:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1i(t,e),this},set2i:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.set2i(t,e,i),this},set3i:function(t,e,i,r,n){return void 0===n&&(n=this.currentShader),n.set3i(t,e,i,r),this},set4i:function(t,e,i,r,n,s){return void 0===s&&(s=this.currentShader),s.set4i(t,e,i,r,n),this},setMatrix2fv:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix2fv(t,e,i),this},setMatrix3fv:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix3fv(t,e,i),this},setMatrix4fv:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix4fv(t,e,i),this},destroy:function(){var t;this.emit(o.DESTROY,this);var e=this.shaders;for(t=0;t<e.length;t++)e[t].destroy();var i=this.renderTargets;for(t=0;t<i.length;t++)i[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(c.RESIZE,this.resize,this),r.off(c.PRE_RENDER,this.onPreRender,this),r.off(c.RENDER,this.onRender,this),r.off(c.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=f},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,h,c,l,f,p,y=e&&e.length,m=y?e[0]*i:t.length,v=n(t,0,m,i,!0),b=[];if(!v||v.next===v.prev)return b;if(y&&(v=function(t,e,i,r){var o,a,h,c=[];for(o=0,a=e.length;o<a;o++)(h=n(t,e[o]*r,o<a-1?e[o+1]*r:t.length,r,!1))===h.next&&(h.steiner=!0),c.push(g(h));for(c.sort(u),o=0;o<c.length;o++)d(c[o],i),i=s(i,i.next);return i}(t,e,v,i)),t.length>80*i){r=h=t[0],a=c=t[1];for(var w=i;w<m;w+=i)(l=t[w])<r&&(r=l),(f=t[w+1])<a&&(a=f),l>h&&(h=l),f>c&&(c=f);p=0!==(p=Math.max(h-r,c-a))?1/p:0}return o(v,b,i,r,a,p),b}function n(t,e,i,r,n){var s,o;if(n===k(t,e,i,r)>0)for(s=e;s<i;s+=r)o=T(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=T(s,t[s],t[s+1],o);return o&&b(o,o.next)&&(A(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(A(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function o(t,e,i,r,n,u,d){if(t){!d&&u&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=p(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,h,c=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(h=c;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,c*=2}while(o>1)}(n)}(t,r,n,u);for(var f,g,y=t;t.prev!==t.next;)if(f=t.prev,g=t.next,u?h(t,r,n,u):a(t))e.push(f.i/i),e.push(t.i/i),e.push(g.i/i),A(t),t=g.next,y=g.next;else if((t=g)===y){d?1===d?o(t=c(s(t),e,i),e,i,r,n,u,2):2===d&&l(t,e,i,r,n,u):o(s(t),e,i,r,n,u,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(v(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(y(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,s=t,o=t.next;if(v(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,h=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,c=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,l=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,u=p(a,h,e,i,r),d=p(c,l,e,i,r),f=t.prevZ,g=t.nextZ;f&&f.z>=u&&g&&g.z<=d;){if(f!==t.prev&&f!==t.next&&y(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,g!==t.prev&&g!==t.next&&y(n.x,n.y,s.x,s.y,o.x,o.y,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;f&&f.z>=u;){if(f!==t.prev&&f!==t.next&&y(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;g&&g.z<=d;){if(g!==t.prev&&g!==t.next&&y(n.x,n.y,s.x,s.y,o.x,o.y,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function c(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!b(n,o)&&w(n,r,r.next,o)&&E(n,o)&&E(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),A(r),A(r.next),r=t=o),r=r.next}while(r!==t);return s(r)}function l(t,e,i,r,n,a){var h=t;do{for(var c=h.next.next;c!==h.prev;){if(h.i!==c.i&&m(h,c)){var l=S(h,c);return h=s(h,h.next),l=s(l,l.next),o(h,e,i,r,n,a),void o(l,e,i,r,n,a)}c=c.next}h=h.next}while(h!==t)}function u(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var h,c=i,l=i.x,u=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=l&&n!==r.x&&y(s<u?n:o,s,l,u,s<u?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),E(r,t)&&(h<d||h===d&&(r.x>i.x||r.x===i.x&&f(i,r)))&&(i=r,d=h)),r=r.next}while(r!==c);return i}(t,e),e){var i=S(e,t);s(e,e.next),s(i,i.next)}}function f(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function p(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&w(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,i,r){var n=x(v(t,e,i)),s=x(v(t,e,r)),o=x(v(i,r,t)),a=x(v(i,r,e));return n!==s&&o!==a||!(0!==n||!_(t,i,e))||!(0!==s||!_(t,r,e))||!(0!==o||!_(i,t,r))||!(0!==a||!_(i,e,r))}function _(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function x(t){return t>0?1:t<0?-1:0}function E(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function S(t,e){var i=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function T(t,e,i,r){var n=new C(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}r.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(k(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var c=e[a]*i,l=a<h-1?e[a+1]*i:t.length;o-=Math.abs(k(t,c,l,i))}var u=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,f=r[a+1]*i,p=r[a+2]*i;u+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i},t.exports=r},function(t,e){t.exports=function(t,e,i,r){var n=i||e.strokeColor,s=r||e.strokeAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.strokeStyle="rgba("+o+","+a+","+h+","+s+")",t.lineWidth=e.lineWidth}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(6),c=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,o){var l="json";if(c(e)){var u=e;e=a(u,"key"),i=a(u,"url"),r=a(u,"xhrSettings"),l=a(u,"extension",l),o=a(u,"dataKey",o)}var d={type:"json",cache:t.cacheManager.json,extension:l,responseType:"text",key:e,url:i,xhrSettings:r,config:o};s.call(this,t,d),c(i)&&(this.data=o?h(i,o):i,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});o.register("json",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,r,i));return this})),t.exports=l},function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,e,i){var r=i(158),n=i(26);t.exports=function(t,e,i,s,o){for(var a=null,h=null,c=null,l=null,u=n(t,e,i,s,null,o),d=0;d<u.length;d++){var f=u[d];f&&(f.collides?(a=r(f.x,f.y-1,!0,o),h=r(f.x,f.y+1,!0,o),c=r(f.x-1,f.y,!0,o),l=r(f.x+1,f.y,!0,o),f.faceTop=!a||!a.collides,f.faceBottom=!h||!h.collides,f.faceLeft=!c||!c.collides,f.faceRight=!l||!l.collides):f.resetFaces())}}},function(t,e,i){var r={};t.exports=r;var n=i(83),s=i(32);r.create=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r],s={x:n.x,y:n.y,index:r,body:e,isInternal:!1,contact:null,offset:null};s.contact={vertex:s,normalImpulse:0,tangentImpulse:0},i.push(s)}return i},r.fromPath=function(t,e){var i=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,e,r){i.push({x:parseFloat(e),y:parseFloat(r)})})),r.create(i,e)},r.centre=function(t){for(var e,i,s,o=r.area(t,!0),a={x:0,y:0},h=0;h<t.length;h++)s=(h+1)%t.length,e=n.cross(t[h],t[s]),i=n.mult(n.add(t[h],t[s]),e),a=n.add(a,i);return n.div(a,6*o)},r.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return n.div(e,t.length)},r.area=function(t,e){for(var i=0,r=t.length-1,n=0;n<t.length;n++)i+=(t[r].x-t[n].x)*(t[r].y+t[n].y),r=n;return e?i/2:Math.abs(i)/2},r.inertia=function(t,e){for(var i,r,s=0,o=0,a=t,h=0;h<a.length;h++)r=(h+1)%a.length,s+=(i=Math.abs(n.cross(a[r],a[h])))*(n.dot(a[r],a[r])+n.dot(a[r],a[h])+n.dot(a[h],a[h])),o+=i;return e/6*(s/o)},r.translate=function(t,e,i){var r;if(i)for(r=0;r<t.length;r++)t[r].x+=e.x*i,t[r].y+=e.y*i;else for(r=0;r<t.length;r++)t[r].x+=e.x,t[r].y+=e.y;return t},r.rotate=function(t,e,i){if(0!==e){for(var r=Math.cos(e),n=Math.sin(e),s=0;s<t.length;s++){var o=t[s],a=o.x-i.x,h=o.y-i.y;o.x=i.x+(a*r-h*n),o.y=i.y+(a*n+h*r)}return t}},r.contains=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=t[(i+1)%t.length];if((e.x-r.x)*(n.y-r.y)+(e.y-r.y)*(r.x-n.x)>0)return!1}return!0},r.scale=function(t,e,i,s){if(1===e&&1===i)return t;var o,a;s=s||r.centre(t);for(var h=0;h<t.length;h++)o=t[h],a=n.sub(o,s),t[h].x=s.x+a.x*e,t[h].y=s.y+a.y*i;return t},r.chamfer=function(t,e,i,r,o){e="number"==typeof e?[e]:e||[8],i=void 0!==i?i:-1,r=r||2,o=o||14;for(var a=[],h=0;h<t.length;h++){var c=t[h-1>=0?h-1:t.length-1],l=t[h],u=t[(h+1)%t.length],d=e[h<e.length?h:e.length-1];if(0!==d){var f=n.normalise({x:l.y-c.y,y:c.x-l.x}),p=n.normalise({x:u.y-l.y,y:l.x-u.x}),g=Math.sqrt(2*Math.pow(d,2)),y=n.mult(s.clone(f),d),m=n.normalise(n.mult(n.add(f,p),.5)),v=n.sub(l,n.mult(m,g)),b=i;-1===i&&(b=1.75*Math.pow(d,.32)),(b=s.clamp(b,r,o))%2==1&&(b+=1);for(var w=Math.acos(n.dot(f,p))/b,_=0;_<b;_++)a.push(n.add(n.rotate(y,w*_),v))}else a.push(l)}return a},r.clockwiseSort=function(t){var e=r.mean(t);return t.sort((function(t,i){return n.angle(e,t)-n.angle(e,i)})),t},r.isConvex=function(t){var e,i,r,n,s=0,o=t.length;if(o<3)return null;for(e=0;e<o;e++)if(r=(e+2)%o,n=(t[i=(e+1)%o].x-t[e].x)*(t[r].y-t[i].y),(n-=(t[i].y-t[e].y)*(t[r].x-t[i].x))<0?s|=1:n>0&&(s|=2),3===s)return!1;return 0!==s||null},r.hull=function(t){var e,i,r=[],s=[];for((t=t.slice(0)).sort((function(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y})),i=0;i<t.length;i+=1){for(e=t[i];s.length>=2&&n.cross3(s[s.length-2],s[s.length-1],e)<=0;)s.pop();s.push(e)}for(i=t.length-1;i>=0;i-=1){for(e=t[i];r.length>=2&&n.cross3(r[r.length-2],r[r.length-1],e)<=0;)r.pop();r.push(e)}return r.pop(),s.pop(),r.concat(s)}},function(t,e,i){var r=i(0),n=i(66),s=i(300),o=i(301),a=i(56),h=i(170),c=new r({initialize:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=a.CIRCLE,this.x=t,this.y=e,this._radius=i,this._diameter=2*i},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i){return this.x=t,this.y=e,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=c},function(t,e){t.exports=function(t,e,i){return t.radius>0&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius}},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e){t.exports=function(t,e,i){var r=i-e;return e+((t-e)%r+r)%r}},function(t,e,i){var r=i(0),n=i(39),s=1e-6,o=new r({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new o(this)},set:function(t){return this.copy(t)},setValues:function(t,e,i,r,n,s,o,a,h,c,l,u,d,f,p,g){var y=this.val;return y[0]=t,y[1]=e,y[2]=i,y[3]=r,y[4]=n,y[5]=s,y[6]=o,y[7]=a,y[8]=h,y[9]=c,y[10]=l,y[11]=u,y[12]=d,y[13]=f,y[14]=p,y[15]=g,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,i){var r=a.fromQuat(i).val,n=e.x,s=e.y,o=e.z;return this.setValues(r[0]*n,r[1]*n,r[2]*n,0,r[4]*s,r[5]*s,r[6]*s,0,r[8]*o,r[9]*o,r[10]*o,0,t.x,t.y,t.z,1)},xyz:function(t,e,i){this.identity();var r=this.val;return r[12]=t,r[13]=e,r[14]=i,this},scaling:function(t,e,i){this.zero();var r=this.val;return r[0]=t,r[5]=e,r[10]=i,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],i=t[2],r=t[3],n=t[6],s=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=n,t[11]=t[14],t[12]=r,t[13]=s,t[14]=o,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=t[9],u=t[10],d=t[11],f=t[12],p=t[13],g=t[14],y=t[15],m=e*o-i*s,v=e*a-r*s,b=e*h-n*s,w=i*a-r*o,_=i*h-n*o,x=r*h-n*a,E=c*p-l*f,S=c*g-u*f,T=c*y-d*f,A=l*g-u*p,C=l*y-d*p,k=u*y-d*g,R=m*k-v*C+b*A+w*T-_*S+x*E;return R?(R=1/R,this.setValues((o*k-a*C+h*A)*R,(r*C-i*k-n*A)*R,(p*x-g*_+y*w)*R,(u*_-l*x-d*w)*R,(a*T-s*k-h*S)*R,(e*k-r*T+n*S)*R,(g*b-f*x-y*v)*R,(c*x-u*b+d*v)*R,(s*C-o*T+h*E)*R,(i*T-e*C-n*E)*R,(f*_-p*b+y*m)*R,(l*b-c*_-d*m)*R,(o*S-s*A-a*E)*R,(e*A-i*S+r*E)*R,(p*v-f*w-g*m)*R,(c*w-l*v+u*m)*R)):this},adjoint:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=t[9],u=t[10],d=t[11],f=t[12],p=t[13],g=t[14],y=t[15];return this.setValues(o*(u*y-d*g)-l*(a*y-h*g)+p*(a*d-h*u),-(i*(u*y-d*g)-l*(r*y-n*g)+p*(r*d-n*u)),i*(a*y-h*g)-o*(r*y-n*g)+p*(r*h-n*a),-(i*(a*d-h*u)-o*(r*d-n*u)+l*(r*h-n*a)),-(s*(u*y-d*g)-c*(a*y-h*g)+f*(a*d-h*u)),e*(u*y-d*g)-c*(r*y-n*g)+f*(r*d-n*u),-(e*(a*y-h*g)-s*(r*y-n*g)+f*(r*h-n*a)),e*(a*d-h*u)-s*(r*d-n*u)+c*(r*h-n*a),s*(l*y-d*p)-c*(o*y-h*p)+f*(o*d-h*l),-(e*(l*y-d*p)-c*(i*y-n*p)+f*(i*d-n*l)),e*(o*y-h*p)-s*(i*y-n*p)+f*(i*h-n*o),-(e*(o*d-h*l)-s*(i*d-n*l)+c*(i*h-n*o)),-(s*(l*g-u*p)-c*(o*g-a*p)+f*(o*u-a*l)),e*(l*g-u*p)-c*(i*g-r*p)+f*(i*u-r*l),-(e*(o*g-a*p)-s*(i*g-r*p)+f*(i*a-r*o)),e*(o*u-a*l)-s*(i*u-r*l)+c*(i*a-r*o))},determinant:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=t[9],u=t[10],d=t[11],f=t[12],p=t[13],g=t[14],y=t[15];return(e*o-i*s)*(u*y-d*g)-(e*a-r*s)*(l*y-d*p)+(e*h-n*s)*(l*g-u*p)+(i*a-r*o)*(c*y-d*f)-(i*h-n*o)*(c*g-u*f)+(r*h-n*a)*(c*p-l*f)},multiply:function(t){var e=this.val,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11],p=e[12],g=e[13],y=e[14],m=e[15],v=t.val,b=v[0],w=v[1],_=v[2],x=v[3];return e[0]=b*i+w*o+_*l+x*p,e[1]=b*r+w*a+_*u+x*g,e[2]=b*n+w*h+_*d+x*y,e[3]=b*s+w*c+_*f+x*m,b=v[4],w=v[5],_=v[6],x=v[7],e[4]=b*i+w*o+_*l+x*p,e[5]=b*r+w*a+_*u+x*g,e[6]=b*n+w*h+_*d+x*y,e[7]=b*s+w*c+_*f+x*m,b=v[8],w=v[9],_=v[10],x=v[11],e[8]=b*i+w*o+_*l+x*p,e[9]=b*r+w*a+_*u+x*g,e[10]=b*n+w*h+_*d+x*y,e[11]=b*s+w*c+_*f+x*m,b=v[12],w=v[13],_=v[14],x=v[15],e[12]=b*i+w*o+_*l+x*p,e[13]=b*r+w*a+_*u+x*g,e[14]=b*n+w*h+_*d+x*y,e[15]=b*s+w*c+_*f+x*m,this},multiplyLocal:function(t){var e=this.val,i=t.val;return this.setValues(e[0]*i[0]+e[1]*i[4]+e[2]*i[8]+e[3]*i[12],e[0]*i[1]+e[1]*i[5]+e[2]*i[9]+e[3]*i[13],e[0]*i[2]+e[1]*i[6]+e[2]*i[10]+e[3]*i[14],e[0]*i[3]+e[1]*i[7]+e[2]*i[11]+e[3]*i[15],e[4]*i[0]+e[5]*i[4]+e[6]*i[8]+e[7]*i[12],e[4]*i[1]+e[5]*i[5]+e[6]*i[9]+e[7]*i[13],e[4]*i[2]+e[5]*i[6]+e[6]*i[10]+e[7]*i[14],e[4]*i[3]+e[5]*i[7]+e[6]*i[11]+e[7]*i[15],e[8]*i[0]+e[9]*i[4]+e[10]*i[8]+e[11]*i[12],e[8]*i[1]+e[9]*i[5]+e[10]*i[9]+e[11]*i[13],e[8]*i[2]+e[9]*i[6]+e[10]*i[10]+e[11]*i[14],e[8]*i[3]+e[9]*i[7]+e[10]*i[11]+e[11]*i[15],e[12]*i[0]+e[13]*i[4]+e[14]*i[8]+e[15]*i[12],e[12]*i[1]+e[13]*i[5]+e[14]*i[9]+e[15]*i[13],e[12]*i[2]+e[13]*i[6]+e[14]*i[10]+e[15]*i[14],e[12]*i[3]+e[13]*i[7]+e[14]*i[11]+e[15]*i[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.val,r=e.val,n=i[0],s=i[4],o=i[8],a=i[12],h=i[1],c=i[5],l=i[9],u=i[13],d=i[2],f=i[6],p=i[10],g=i[14],y=i[3],m=i[7],v=i[11],b=i[15],w=r[0],_=r[4],x=r[8],E=r[12],S=r[1],T=r[5],A=r[9],C=r[13],k=r[2],R=r[6],P=r[10],I=r[14],O=r[3],M=r[7],D=r[11],B=r[15];return this.setValues(n*w+s*S+o*k+a*O,h*w+c*S+l*k+u*O,d*w+f*S+p*k+g*O,y*w+m*S+v*k+b*O,n*_+s*T+o*R+a*M,h*_+c*T+l*R+u*M,d*_+f*T+p*R+g*M,y*_+m*T+v*R+b*M,n*x+s*A+o*P+a*D,h*x+c*A+l*P+u*D,d*x+f*A+p*P+g*D,y*x+m*A+v*P+b*D,n*E+s*C+o*I+a*B,h*E+c*C+l*I+u*B,d*E+f*C+p*I+g*B,y*E+m*C+v*I+b*B)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,i){var r=this.val;return r[12]=r[0]*t+r[4]*e+r[8]*i+r[12],r[13]=r[1]*t+r[5]*e+r[9]*i+r[13],r[14]=r[2]*t+r[6]*e+r[10]*i+r[14],r[15]=r[3]*t+r[7]*e+r[11]*i+r[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,i){var r=this.val;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*i,r[9]=r[9]*i,r[10]=r[10]*i,r[11]=r[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,o=t.y,a=t.z,h=n*s,c=n*o;return this.setValues(h*s+i,h*o-r*a,h*a+r*o,0,h*o+r*a,c*o+i,c*a-r*s,0,h*a-r*o,c*a+r*s,n*a*a+i,0,0,0,0,1)},rotate:function(t,e){var i=this.val,r=e.x,n=e.y,o=e.z,a=Math.sqrt(r*r+n*n+o*o);if(Math.abs(a)<s)return this;r*=a=1/a,n*=a,o*=a;var h=Math.sin(t),c=Math.cos(t),l=1-c,u=i[0],d=i[1],f=i[2],p=i[3],g=i[4],y=i[5],m=i[6],v=i[7],b=i[8],w=i[9],_=i[10],x=i[11],E=i[12],S=i[13],T=i[14],A=i[15],C=r*r*l+c,k=n*r*l+o*h,R=o*r*l-n*h,P=r*n*l-o*h,I=n*n*l+c,O=o*n*l+r*h,M=r*o*l+n*h,D=n*o*l-r*h,B=o*o*l+c;return this.setValues(u*C+g*k+b*R,d*C+y*k+w*R,f*C+m*k+_*R,p*C+v*k+x*R,u*P+g*I+b*O,d*P+y*I+w*O,f*P+m*I+_*O,p*P+v*I+x*O,u*M+g*D+b*B,d*M+y*D+w*B,f*M+m*D+_*B,p*M+v*D+x*B,E,S,T,A)},rotateX:function(t){var e=this.val,i=Math.sin(t),r=Math.cos(t),n=e[4],s=e[5],o=e[6],a=e[7],h=e[8],c=e[9],l=e[10],u=e[11];return e[4]=n*r+h*i,e[5]=s*r+c*i,e[6]=o*r+l*i,e[7]=a*r+u*i,e[8]=h*r-n*i,e[9]=c*r-s*i,e[10]=l*r-o*i,e[11]=u*r-a*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),r=Math.cos(t),n=e[0],s=e[1],o=e[2],a=e[3],h=e[8],c=e[9],l=e[10],u=e[11];return e[0]=n*r-h*i,e[1]=s*r-c*i,e[2]=o*r-l*i,e[3]=a*r-u*i,e[8]=n*i+h*r,e[9]=s*i+c*r,e[10]=o*i+l*r,e[11]=a*i+u*r,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),r=Math.cos(t),n=e[0],s=e[1],o=e[2],a=e[3],h=e[4],c=e[5],l=e[6],u=e[7];return e[0]=n*r+h*i,e[1]=s*r+c*i,e[2]=o*r+l*i,e[3]=a*r+u*i,e[4]=h*r-n*i,e[5]=c*r-s*i,e[6]=l*r-o*i,e[7]=u*r-a*i,this},fromRotationTranslation:function(t,e){var i=t.x,r=t.y,n=t.z,s=t.w,o=i+i,a=r+r,h=n+n,c=i*o,l=i*a,u=i*h,d=r*a,f=r*h,p=n*h,g=s*o,y=s*a,m=s*h;return this.setValues(1-(d+p),l+m,u-y,0,l-m,1-(c+p),f+g,0,u+y,f-g,1-(c+d),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,i=t.y,r=t.z,n=t.w,s=e+e,o=i+i,a=r+r,h=e*s,c=e*o,l=e*a,u=i*o,d=i*a,f=r*a,p=n*s,g=n*o,y=n*a;return this.setValues(1-(u+f),c+y,l-g,0,c-y,1-(h+f),d+p,0,l+g,d-p,1-(h+u),0,0,0,0,1)},frustum:function(t,e,i,r,n,s){var o=1/(e-t),a=1/(r-i),h=1/(n-s);return this.setValues(2*n*o,0,0,0,0,2*n*a,0,0,(e+t)*o,(r+i)*a,(s+n)*h,-1,0,0,s*n*2*h,0)},perspective:function(t,e,i,r){var n=1/Math.tan(t/2),s=1/(i-r);return this.setValues(n/e,0,0,0,0,n,0,0,0,0,(r+i)*s,-1,0,0,2*r*i*s,0)},perspectiveLH:function(t,e,i,r){return this.setValues(2*i/t,0,0,0,0,2*i/e,0,0,0,0,-r/(i-r),1,0,0,i*r/(i-r),0)},ortho:function(t,e,i,r,n,s){var o=t-e,a=i-r,h=n-s;return o=0===o?o:1/o,a=0===a?a:1/a,h=0===h?h:1/h,this.setValues(-2*o,0,0,0,0,-2*a,0,0,0,0,2*h,0,(t+e)*o,(r+i)*a,(s+n)*h,1)},lookAtRH:function(t,e,i){var r=this.val;return u.subVectors(t,e),0===u.getLengthSquared()&&(u.z=1),u.normalize(),c.crossVectors(i,u),0===c.getLengthSquared()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVectors(i,u)),c.normalize(),l.crossVectors(u,c),r[0]=c.x,r[1]=c.y,r[2]=c.z,r[4]=l.x,r[5]=l.y,r[6]=l.z,r[8]=u.x,r[9]=u.y,r[10]=u.z,this},lookAt:function(t,e,i){var r=t.x,n=t.y,o=t.z,a=i.x,h=i.y,c=i.z,l=e.x,u=e.y,d=e.z;if(Math.abs(r-l)<s&&Math.abs(n-u)<s&&Math.abs(o-d)<s)return this.identity();var f=r-l,p=n-u,g=o-d,y=1/Math.sqrt(f*f+p*p+g*g),m=h*(g*=y)-c*(p*=y),v=c*(f*=y)-a*g,b=a*p-h*f;(y=Math.sqrt(m*m+v*v+b*b))?(m*=y=1/y,v*=y,b*=y):(m=0,v=0,b=0);var w=p*b-g*v,_=g*m-f*b,x=f*v-p*m;return(y=Math.sqrt(w*w+_*_+x*x))?(w*=y=1/y,_*=y,x*=y):(w=0,_=0,x=0),this.setValues(m,w,f,0,v,_,p,0,b,x,g,0,-(m*r+v*n+b*o),-(w*r+_*n+x*o),-(f*r+p*n+g*o),1)},yawPitchRoll:function(t,e,i){this.zero(),a.zero(),h.zero();var r=this.val,n=a.val,s=h.val,o=Math.sin(i),c=Math.cos(i);return r[10]=1,r[15]=1,r[0]=c,r[1]=o,r[4]=-o,r[5]=c,o=Math.sin(e),c=Math.cos(e),n[0]=1,n[15]=1,n[5]=c,n[10]=c,n[9]=-o,n[6]=o,o=Math.sin(t),c=Math.cos(t),s[5]=1,s[15]=1,s[0]=c,s[2]=-o,s[8]=o,s[10]=c,this.multiplyLocal(a),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,i,r,n){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(i.x,i.y,i.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(h),r&&this.multiplyLocal(r),n&&this.multiplyLocal(n),this},multiplyToMat4:function(t,e){var i=this.val,r=t.val,n=i[0],s=i[1],o=i[2],a=i[3],h=i[4],c=i[5],l=i[6],u=i[7],d=i[8],f=i[9],p=i[10],g=i[11],y=i[12],m=i[13],v=i[14],b=i[15],w=r[0],_=r[1],x=r[2],E=r[3],S=r[4],T=r[5],A=r[6],C=r[7],k=r[8],R=r[9],P=r[10],I=r[11],O=r[12],M=r[13],D=r[14],B=r[15];return e.setValues(w*n+_*h+x*d+E*y,_*s+_*c+x*f+E*m,x*o+_*l+x*p+E*v,E*a+_*u+x*g+E*b,S*n+T*h+A*d+C*y,S*s+T*c+A*f+C*m,S*o+T*l+A*p+C*v,S*a+T*u+A*g+C*b,k*n+R*h+P*d+I*y,k*s+R*c+P*f+I*m,k*o+R*l+P*p+I*v,k*a+R*u+P*g+I*b,O*n+M*h+D*d+B*y,O*s+M*c+D*f+B*m,O*o+M*l+D*p+B*v,O*a+M*u+D*g+B*b)},fromRotationXYTranslation:function(t,e,i){var r=e.x,n=e.y,s=e.z,o=Math.sin(t.x),a=Math.cos(t.x),h=Math.sin(t.y),c=Math.cos(t.y),l=r,u=n,d=s,f=-o,p=0-f*h,g=0-a*h,y=f*c,m=a*c;return i||(l=c*r+h*s,u=p*r+a*n+y*s,d=g*r+o*n+m*s),this.setValues(c,p,g,0,0,a,o,0,h,y,m,0,l,u,d,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}}),a=new o,h=new o,c=new n,l=new n,u=new n;t.exports=o},function(t,e,i){t.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function t(e,i,r,n,o){var c,l="png";if(h(i)){var u=i;i=a(u,"key"),r=a(u,"url"),c=a(u,"normalMap"),n=a(u,"xhrSettings"),l=a(u,"extension",l),o=a(u,"frameConfig")}Array.isArray(r)&&(c=r[1],r=r[0]);var d={type:"image",cache:e.textureManager,extension:l,responseType:"blob",key:i,url:r,xhrSettings:n,config:o};if(s.call(this,e,d),c){var f=new t(e,this.key,c,n,o);f.type="normalMap",this.setLink(f),e.addFile(f)}},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){s.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(t.data),t.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===n.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});o.register("image",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e){t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,e,i){var r=i(164),n=i(0),s=i(11),o=i(15),a=i(1065),h=new n({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,a],initialize:function(t,e,i,n,s){o.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,s),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=h},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,r=t[e],n=e;n<i;n++)t[n]=t[n+1];return t.length=i,r}}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(t,e){t.exports=function(t,e,i,r){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),r?(i+t)/e:i+t)}},function(t,e){t.exports=function(t){var e={};for(var i in t)Array.isArray(t[i])?e[i]=t[i].slice(0):e[i]=t[i];return e}},function(t,e){t.exports=function(t,e,i,r){var n=t.length;if(e<0||e>n||e>=i||i>n||e+i>n){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e){function i(t,e){return String(t).localeCompare(e)}function r(t,e,i,r){var n,s,o,a,h,c=t.length,l=0,u=2*i;for(n=0;n<c;n+=u)for(o=(s=n+i)+i,s>c&&(s=c),o>c&&(o=c),a=n,h=s;;)if(a<s&&h<o)e(t[a],t[h])<=0?r[l++]=t[a++]:r[l++]=t[h++];else if(a<s)r[l++]=t[a++];else{if(!(h<o))break;r[l++]=t[h++]}}t.exports=function(t,e){void 0===e&&(e=i);var n=function(t,e){var i=t.length;if(i<=1)return t;for(var n=new Array(i),s=1;s<i;s*=2){r(t,e,s,n);var o=t;t=n,n=o}return t}(t,e);return n!==t&&r(n,null,t.length,t),t}},function(t,e,i){var r=i(134),n=i(205);t.exports=function(t,e){var i=r.Power0;if("string"==typeof t)if(r.hasOwnProperty(t))i=r[t];else{var s="";t.indexOf(".")&&("in"===(s=t.substr(t.indexOf(".")+1)).toLowerCase()?s="easeIn":"out"===s.toLowerCase()?s="easeOut":"inout"===s.toLowerCase()&&(s="easeInOut")),t=n(t.substr(0,t.indexOf(".")+1)+s),r.hasOwnProperty(t)&&(i=r[t])}else"function"==typeof t?i=t:Array.isArray(t)&&t.length;if(!e)return i;var o=e.slice(0);return o.unshift(0),function(t){return o[0]=t,i.apply(this,o)}}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n,s){var o=t.strokeTint,a=r.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);o.TL=a,o.TR=a,o.BL=a,o.BR=a;var h=e.pathData,c=h.length-1,l=e.lineWidth,u=l/2,d=h[0]-n,f=h[1]-s;e.closePath||(c-=2);for(var p=2;p<c;p+=2){var g=h[p]-n,y=h[p+1]-s;t.batchLine(d,f,g,y,u,u,l,p-2,!!e.closePath&&p===c-1),d=g,f=y}}},function(t,e,i){var r=i(0),n=i(115),s=i(476),o=i(477),a=i(56),h=i(47),c=i(181),l=new r({initialize:function(t,e,i,r,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),this.type=a.TRIANGLE,this.x1=t,this.y1=e,this.x2=i,this.y2=r,this.x3=n,this.y3=s},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return c(this,t)},setTo:function(t,e,i,r,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x1=t,this.y1=e,this.x2=i,this.y2=r,this.x3=n,this.y3=s,this},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=l},function(t,e){var i={};t.exports=i,i.create=function(t,e){return{x:t||0,y:e||0}},i.clone=function(t){return{x:t.x,y:t.y}},i.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},i.rotate=function(t,e,i){var r=Math.cos(e),n=Math.sin(e);i||(i={});var s=t.x*r-t.y*n;return i.y=t.x*n+t.y*r,i.x=s,i},i.rotateAbout=function(t,e,i,r){var n=Math.cos(e),s=Math.sin(e);r||(r={});var o=i.x+((t.x-i.x)*n-(t.y-i.y)*s);return r.y=i.y+((t.x-i.x)*s+(t.y-i.y)*n),r.x=o,r},i.normalise=function(t){var e=i.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},i.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},i.add=function(t,e,i){return i||(i={}),i.x=t.x+e.x,i.y=t.y+e.y,i},i.sub=function(t,e,i){return i||(i={}),i.x=t.x-e.x,i.y=t.y-e.y,i},i.mult=function(t,e){return{x:t.x*e,y:t.y*e}},i.div=function(t,e){return{x:t.x/e,y:t.y/e}},i.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},i.neg=function(t){return{x:-t.x,y:-t.y}},i.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},function(t,e){var i={};t.exports=i,i.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&i.update(e,t),e},i.update=function(t,e,i){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var r=0;r<e.length;r++){var n=e[r];n.x>t.max.x&&(t.max.x=n.x),n.x<t.min.x&&(t.min.x=n.x),n.y>t.max.y&&(t.max.y=n.y),n.y<t.min.y&&(t.min.y=n.y)}i&&(i.x>0?t.max.x+=i.x:t.min.x+=i.x,i.y>0?t.max.y+=i.y:t.min.y+=i.y)},i.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},i.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},i.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},i.shift=function(t,e){var i=t.max.x-t.min.x,r=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+r}},function(t,e,i){var r=i(29),n=i(0),s=i(11),o=i(502),a=new n({Mixins:[s.Alpha,s.Flip,s.Visible],initialize:function(t,e,i,r,n,s,o,a){this.layer=t,this.index=e,this.x=i,this.y=r,this.width=n,this.height=s,this.right,this.bottom,this.baseWidth=void 0!==o?o:n,this.baseHeight=void 0!==a?a:s,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*e.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new o),e.x=this.getLeft(),e.y=this.getTop(),e.width=this.getRight()-e.x,e.height=this.getBottom()-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,e,i,r){return!(i<=this.pixelX||r<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,i,r,n){return void 0===e&&(e=t),void 0===i&&(i=t),void 0===r&&(r=t),void 0===n&&(n=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=r,this.faceLeft=t,this.faceRight=e,this.faceTop=i,this.faceBottom=r,n&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,i,r){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==i&&(this.baseWidth=i),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var t=this.layer.orientation;if(t===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===r.HEXAGONAL){var e=this.layer.hexSideLength,i=(this.baseHeight-e)/2+e;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*i}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=a},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(32),o=i(41),a=i(84),h=i(83),c=i(1393);r.rectangle=function(t,e,i,r,a){a=a||{};var h={label:"Rectangle Body",position:{x:t,y:e},vertices:n.fromPath("L 0 0 L "+i+" 0 L "+i+" "+r+" L 0 "+r)};if(a.chamfer){var c=a.chamfer;h.vertices=n.chamfer(h.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return o.create(s.extend({},h,a))},r.trapezoid=function(t,e,i,r,a,h){h=h||{};var c,l=i*(a*=.5),u=l+(1-2*a)*i,d=u+l;c=a<.5?"L 0 0 L "+l+" "+-r+" L "+u+" "+-r+" L "+d+" 0":"L 0 0 L "+u+" "+-r+" L "+d+" 0";var f={label:"Trapezoid Body",position:{x:t,y:e},vertices:n.fromPath(c)};if(h.chamfer){var p=h.chamfer;f.vertices=n.chamfer(f.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete h.chamfer}return o.create(s.extend({},f,h))},r.circle=function(t,e,i,n,o){n=n||{};var a={label:"Circle Body",circleRadius:i};o=o||25;var h=Math.ceil(Math.max(10,Math.min(o,i)));return h%2==1&&(h+=1),r.polygon(t,e,h,i,s.extend({},a,n))},r.polygon=function(t,e,i,a,h){if(h=h||{},i<3)return r.circle(t,e,a,h);for(var c=2*Math.PI/i,l="",u=.5*c,d=0;d<i;d+=1){var f=u+d*c,p=Math.cos(f)*a,g=Math.sin(f)*a;l+="L "+p.toFixed(3)+" "+g.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:t,y:e},vertices:n.fromPath(l)};if(h.chamfer){var m=h.chamfer;y.vertices=n.chamfer(y.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete h.chamfer}return o.create(s.extend({},y,h))},r.fromVertices=function(t,e,i,a,h,l,u){var d,f,p,g,y,m;for(a=a||{},f=[],h=void 0!==h&&h,l=void 0!==l?l:.01,u=void 0!==u?u:10,c||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(i[0])||(i=[i]),m=0;m<i.length;m+=1)if(g=i[m],(p=n.isConvex(g))||!c)g=p?n.clockwiseSort(g):n.hull(g),f.push({position:{x:t,y:e},vertices:g});else{var v=g.map((function(t){return[t.x,t.y]}));c.makeCCW(v),!1!==l&&c.removeCollinearPoints(v,l);var b=c.quickDecomp(v);for(y=0;y<b.length;y++){var w=b[y].map((function(t){return{x:t[0],y:t[1]}}));u>0&&n.area(w)<u||f.push({position:n.centre(w),vertices:w})}}for(y=0;y<f.length;y++)f[y]=o.create(s.extend(f[y],a));return h&&r.flagCoincidentParts(f,5),f.length>1?(d=o.create(s.extend({parts:f.slice(0)},a)),o.setPosition(d,{x:t,y:e}),d):f[0]},r.flagCoincidentParts=function(t,e){void 0===e&&(e=5);for(var i=0;i<t.length;i++)for(var r=t[i],n=i+1;n<t.length;n++){var s=t[n];if(a.overlaps(r.bounds,s.bounds))for(var o=r.vertices,c=s.vertices,l=0;l<r.vertices.length;l++)for(var u=0;u<s.vertices.length;u++){var d=h.magnitudeSquared(h.sub(o[(l+1)%o.length],c[u])),f=h.magnitudeSquared(h.sub(o[l],c[(u+1)%c.length]));d<e&&f<e&&(o[l].isInternal=!0,c[u].isInternal=!0)}}return t}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var i=t.width*t.originX;return t.x=e+i-.5*t.width,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e){t.exports=function(t,e){var i=t.height*t.originY;return t.y=e+i-.5*t.height,t}},function(t,e,i){t.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(t,e){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,e,i){var r=i(74);t.exports=function(t,e,i,n){var s;if(void 0===n&&(n=t),!Array.isArray(e))return-1!==(s=t.indexOf(e))?(r(t,s),i&&i.call(n,e),e):null;for(var o=e.length-1,a=[];o>=0;){var h=e[o];-1!==(s=t.indexOf(h))&&(r(t,s),a.push(h),i&&i.call(n,h)),o--}return a}},function(t,e,i){var r=i(0),n=i(199),s=i(10),o=i(3),a=new r({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t||(t=new s),void 0===e&&(e=16);var i=this.getLength();e>i&&(e=i/2);var r=Math.max(1,Math.round(i/e));return n(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var e=this.getLength(),i=Math.max(1,e/t);return this.getSpacedPoints(i)},getEndPoint:function(t){return void 0===t&&(t=new o),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],r=this.getPoint(0,this._tmpVec2A),n=0;i.push(0);for(var s=1;s<=t;s++)n+=(e=this.getPoint(s/t,this._tmpVec2B)).distance(r),i.push(n),r.copy(e);return this.cacheArcLengths=i,i},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t,e,i){void 0===i&&(i=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var r=0;r<=t;r++)i.push(this.getPoint(r/t));return i},getRandomPoint:function(t){return void 0===t&&(t=new o),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,i){void 0===i&&(i=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var r=0;r<=t;r++){var n=this.getUtoTmapping(r/t,null,t);i.push(this.getPoint(n))}return i},getStartPoint:function(t){return void 0===t&&(t=new o),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new o);var i=1e-4,r=t-i,n=t+i;return r<0&&(r=0),n>1&&(n=1),this.getPoint(r,this._tmpVec2A),this.getPoint(n,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var i=this.getUtoTmapping(t);return this.getTangent(i,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,i){var r,n=this.getLengths(i),s=0,o=n.length;r=e?Math.min(e,n[o-1]):t*n[o-1];for(var a,h=0,c=o-1;h<=c;)if((a=n[s=Math.floor(h+(c-h)/2)]-r)<0)h=s+1;else{if(!(a>0)){c=s;break}c=s-1}if(n[s=c]===r)return s/(o-1);var l=n[s];return(s+(r-l)/(n[s+1]-l))/(o-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=a},function(t,e,i){t.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.x1,s=t.y1,o=t.x2,a=t.y2,h=e.x1,c=e.y1,l=e.x2,u=e.y2,d=(u-c)*(o-n)-(l-h)*(a-s);if(0===d)return!1;var f=((l-h)*(s-c)-(u-c)*(n-h))/d,p=((o-n)*(s-c)-(a-s)*(n-h))/d;return f>=0&&f<=1&&p>=0&&p<=1&&(i.x=n+f*(o-n),i.y=s+f*(a-s),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,e,i){var r=i(18);t.exports=function(t,e,i){return(i-e)*(t=r(t,0,1))+e}},function(t,e){t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,i){var r=i(0),n=i(315),s=new r({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],r=0;r<t.length;r++)i.push(e[t[r]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var i=this,r=this.list,s=this.events,o=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(e){if(!i._frozen){var a=r[t];r[t]=e,s.emit(n.CHANGE_DATA,o,t,e,a),s.emit(n.CHANGE_DATA_KEY+t,o,e,a)}}}),r[t]=e,s.emit(n.SET_DATA,o,t,e)}return this},each:function(t,e){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[1]=n,i[2]=this.list[n],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=s},function(t,e,i){var r=new(i(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,r=t.entries;for(var n in r)i.hasOwnProperty(n)&&e?i[n]=r[n]:this.set(n,r[n]);return this}});t.exports=r},function(t,e){t.exports=function(t,e,i){return t<<16|e<<8|i}},function(t,e,i){t.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(t,e,i){(function(e){var i={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=navigator.userAgent;/Windows/.test(t)?i.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(i.iOS=!0,i.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),i.iOSVersion=parseInt(RegExp.$1,10)):i.macOS=!0:/Android/.test(t)?i.android=!0:/Linux/.test(t)?i.linux=!0:/iP[ao]d|iPhone/i.test(t)?(i.iOS=!0,navigator.appVersion.match(/OS (\d+)/),i.iOSVersion=parseInt(RegExp.$1,10),i.iPhone=-1!==t.toLowerCase().indexOf("iphone"),i.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?i.kindle=!0:/CrOS/.test(t)&&(i.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.android=!1,i.iOS=!1,i.macOS=!1,i.windows=!0,i.windowsPhone=!0);var r=/Silk/.test(t);return(i.windows||i.macOS||i.linux&&!r||i.chromeOS)&&(i.desktop=!0),(i.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.desktop=!1),navigator.standalone&&(i.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(i.cordova=!0),void 0!==window.ejecta&&(i.ejecta=!0)),void 0!==e&&e.versions&&e.versions.node&&(i.node=!0),i.node&&"object"==typeof e.versions&&(i.nodeWebkit=!!e.versions["node-webkit"],i.electron=!!e.versions.electron),/Crosswalk/.test(t)&&(i.crosswalk=!0),i.pixelRatio=window.devicePixelRatio||1,i}()}).call(this,i(807))},function(t,e,i){t.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(t,e){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,e,i){var r=i(0),n=i(59),s=i(2),o=i(878),a=i(879),h=i(25),c=i(12),l=i(107),u=i(58),d=new r({Extends:u,initialize:function(t){var e=t.game.renderer,i=s(t,"fragShader",o);t.fragShader=c.parseFragmentShaderMaxTextures(i,e.maxTextures),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),u.call(this,t),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){u.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,e,i){this.manager.set(this,t);var r=this._tempMatrix1,n=this._tempMatrix2,s=this._tempMatrix3,o=t.frame,a=o.glTexture,h=o.u0,l=o.v0,u=o.u1,d=o.v1,f=o.x,p=o.y,g=o.cutWidth,y=o.cutHeight,m=o.customPivot,v=t.displayOriginX,b=t.displayOriginY,w=-v+f,_=-b+p;if(t.isCropped){var x=t._crop;x.flipX===t.flipX&&x.flipY===t.flipY||o.updateCropUVs(x,t.flipX,t.flipY),h=x.u0,l=x.v0,u=x.u1,d=x.v1,g=x.width,y=x.height,w=-v+(f=x.x),_=-b+(p=x.y)}var E=1,S=1;t.flipX&&(m||(w+=-o.realWidth+2*v),E=-1),(t.flipY||o.source.isGLTexture&&!a.flipY)&&(m||(_+=-o.realHeight+2*b),S=-1),n.applyITRS(t.x,t.y,t.rotation,t.scaleX*E,t.scaleY*S),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),n.e=t.x,n.f=t.y):(n.e-=e.scrollX*t.scrollFactorX,n.f-=e.scrollY*t.scrollFactorY),r.multiply(n,s);var T=w+g,A=_+y,C=e.roundPixels,k=s.getXRound(w,_,C),R=s.getYRound(w,_,C),P=s.getXRound(w,A,C),I=s.getYRound(w,A,C),O=s.getXRound(T,A,C),M=s.getYRound(T,A,C),D=s.getXRound(T,_,C),B=s.getYRound(T,_,C),L=c.getTintAppendFloatAlpha,N=e.alpha,U=L(t.tintTopLeft,N*t._alphaTL),F=L(t.tintTopRight,N*t._alphaTR),z=L(t.tintBottomLeft,N*t._alphaBL),j=L(t.tintBottomRight,N*t._alphaBR);this.shouldFlush(6)&&this.flush();var V=this.setGameObject(t,o);this.manager.preBatch(t),this.batchQuad(t,k,R,P,I,O,M,D,B,h,l,u,d,U,F,z,j,t.tintFill,a,V),this.manager.postBatch(t)},batchTexture:function(t,e,i,r,n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b,w,_,x,E,S,T,A,C,k,R,P,I){this.manager.set(this,t);var O=this._tempMatrix1,M=this._tempMatrix2,D=this._tempMatrix3,B=m/i+A,L=v/r+C,N=(m+b)/i+A,U=(v+w)/r+C,F=o,z=a,j=-g,V=-y;if(t.isCropped){var G=t._crop,H=G.width,Y=G.height;F=H,z=Y,o=H,a=Y;var K=m=G.x,W=v=G.y;u&&(K=b-G.x-H),d&&(W=w-G.y-Y),B=K/i+A,L=W/r+C,N=(K+H)/i+A,U=(W+Y)/r+C,j=-g+m,V=-y+v}u&&(F*=-1,j+=o),(d^=!P&&e.isRenderTexture?1:0)&&(z*=-1,V+=a);var X=j+F,q=V+z;M.applyITRS(n,s,l,h,c),O.copyFrom(k.matrix),R?(O.multiplyWithOffset(R,-k.scrollX*f,-k.scrollY*p),M.e=n,M.f=s):(M.e-=k.scrollX*f,M.f-=k.scrollY*p),O.multiply(M,D);var $=k.roundPixels,J=D.getXRound(j,V,$),Z=D.getYRound(j,V,$),Q=D.getXRound(j,q,$),tt=D.getYRound(j,q,$),et=D.getXRound(X,q,$),it=D.getYRound(X,q,$),rt=D.getXRound(X,V,$),nt=D.getYRound(X,V,$);void 0===I&&(I=this.renderer.setTexture2D(e)),t&&this.manager.preBatch(t),this.batchQuad(t,J,Z,Q,tt,et,it,rt,nt,B,L,N,U,_,x,E,S,T,e,I),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,i,r,n,s,o){this.manager.set(this);var a=this._tempMatrix1.copyFrom(s),h=this._tempMatrix2,l=e+t.width,u=i+t.height;o?a.multiply(o,h):h=a;var d=h.getX(e,i),f=h.getY(e,i),p=h.getX(e,u),g=h.getY(e,u),y=h.getX(l,u),m=h.getY(l,u),v=h.getX(l,i),b=h.getY(l,i),w=this.renderer.setTextureSource(t.source);r=c.getTintAppendFloatAlpha(r,n),this.batchQuad(null,d,f,p,g,y,m,v,b,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,w)},batchFillRect:function(t,e,i,r,n,s){this.renderer.pipelines.set(this);var o=this.calcMatrix;s&&s.multiply(n,o);var a=t+i,h=e+r,c=o.getX(t,e),l=o.getY(t,e),u=o.getX(t,h),d=o.getY(t,h),f=o.getX(a,h),p=o.getY(a,h),g=o.getX(a,e),y=o.getY(a,e),m=this.fillTint;this.batchQuad(null,c,l,u,d,f,p,g,y,0,0,1,1,m.TL,m.TR,m.BL,m.BR,2)},batchFillTriangle:function(t,e,i,r,n,s,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var c=h.getX(t,e),l=h.getY(t,e),u=h.getX(i,r),d=h.getY(i,r),f=h.getX(n,s),p=h.getY(n,s),g=this.fillTint;this.batchTri(null,c,l,u,d,f,p,0,0,1,1,g.TL,g.TR,g.BL,2)},batchStrokeTriangle:function(t,e,i,r,n,s,o,a,h){var c=this.tempTriangle;c[0].x=t,c[0].y=e,c[0].width=o,c[1].x=i,c[1].y=r,c[1].width=o,c[2].x=n,c[2].y=s,c[2].width=o,c[3].x=t,c[3].y=e,c[3].width=o,this.batchStrokePath(c,o,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(e,r);for(var s,o,a=t.length,h=this.polygonCache,c=this.fillTint.TL,l=this.fillTint.TR,u=this.fillTint.BL,d=0;d<a;++d)o=t[d],h.push(o.x,o.y);a=(s=n(h)).length;for(var f=0;f<a;f+=3){var p=2*s[f+0],g=2*s[f+1],y=2*s[f+2],m=h[p+0],v=h[p+1],b=h[g+0],w=h[g+1],_=h[y+0],x=h[y+1],E=r.getX(m,v),S=r.getY(m,v),T=r.getX(b,w),A=r.getY(b,w),C=r.getX(_,x),k=r.getY(_,x);this.batchTri(null,E,S,T,A,C,k,0,0,1,1,c,l,u,2)}h.length=0},batchStrokePath:function(t,e,i,r,n){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,o=0;o<s;o++){var a=t[o],h=t[o+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,o,!i&&o===s-1,r,n)}},batchLine:function(t,e,i,r,n,s,o,a,h,c,l){this.renderer.pipelines.set(this);var u=this.calcMatrix;l&&l.multiply(c,u);var d=i-t,f=r-e,p=Math.sqrt(d*d+f*f),g=n*(r-e)/p,y=n*(t-i)/p,m=s*(r-e)/p,v=s*(t-i)/p,b=i-m,w=r-v,_=t-g,x=e-y,E=i+m,S=r+v,T=t+g,A=e+y,C=u.getX(b,w),k=u.getY(b,w),R=u.getX(_,x),P=u.getY(_,x),I=u.getX(E,S),O=u.getY(E,S),M=u.getX(T,A),D=u.getY(T,A),B=this.strokeTint,L=B.TL,N=B.TR,U=B.BL,F=B.BR;if(this.batchQuad(null,M,D,R,P,C,k,I,O,0,0,1,1,L,N,U,F,2),!(o<=2)){var z=this.prevQuad,j=this.firstQuad;a>0&&z[4]?this.batchQuad(null,M,D,R,P,z[0],z[1],z[2],z[3],0,0,1,1,L,N,U,F,2):(j[0]=M,j[1]=D,j[2]=R,j[3]=P,j[4]=1),h&&j[4]?this.batchQuad(null,C,k,I,O,j[0],j[1],j[2],j[3],0,0,1,1,L,N,U,F,2):(z[0]=C,z[1]=k,z[2]=I,z[3]=O,z[4]=1)}}});t.exports=d},function(t,e,i){var r=i(0),n=i(18),s=i(17),o=new r({initialize:function(t,e,i,r,n,s,o){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(s,o,r,n)},setSize:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this.cutX=i,this.cutY=r,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var n=this.data,s=n.cut;s.x=i,s.y=r,s.w=t,s.h=e,s.r=i+t,s.b=r+e,n.sourceSize.w=t,n.sourceSize.h=e,n.spriteSourceSize.w=t,n.spriteSourceSize.h=e,n.radius=.5*Math.sqrt(t*t+e*e);var o=n.drawImage;return o.x=i,o.y=r,o.width=t,o.height=e,this.updateUVs()},setTrim:function(t,e,i,r,n,s){var o=this.data,a=o.spriteSourceSize;return o.trim=!0,o.sourceSize.w=t,o.sourceSize.h=e,a.x=i,a.y=r,a.w=n,a.h=s,a.r=i+n,a.b=r+s,this.x=i,this.y=r,this.width=n,this.height=s,this.halfWidth=.5*n,this.halfHeight=.5*s,this.centerX=Math.floor(n/2),this.centerY=Math.floor(s/2),this.updateUVs()},setCropUVs:function(t,e,i,r,s,o,a){var h=this.cutX,c=this.cutY,l=this.cutWidth,u=this.cutHeight,d=this.realWidth,f=this.realHeight,p=h+(e=n(e,0,d)),g=c+(i=n(i,0,f)),y=r=n(r,0,d-e),m=s=n(s,0,f-i),v=this.data;if(v.trim){var b=v.spriteSourceSize,w=e+(r=n(r,0,l-e)),_=i+(s=n(s,0,u-i));if(b.r<e||b.b<i||b.x>w||b.y>_)p=0,g=0,y=0,m=0;else{var x=Math.max(b.x,e),E=Math.max(b.y,i),S=Math.min(b.r,w)-x,T=Math.min(b.b,_)-E;y=S,m=T,p=o?h+(l-(x-b.x)-S):h+(x-b.x),g=a?c+(u-(E-b.y)-T):c+(E-b.y),e=x,i=E,r=S,s=T}}else o&&(p=h+(l-e-r)),a&&(g=c+(u-i-s));var A=this.source.width,C=this.source.height;return t.u0=Math.max(0,p/A),t.v0=Math.max(0,g/C),t.u1=Math.min(1,(p+y)/A),t.v1=Math.min(1,(g+m)/C),t.x=e,t.y=i,t.cx=p,t.cy=g,t.cw=y,t.ch=m,t.width=r,t.height=s,t.flipX=o,t.flipY=a,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},setUVs:function(t,e,i,r,n,s){var o=this.data.drawImage;return o.width=t,o.height=e,this.u0=i,this.v0=r,this.u1=n,this.v1=s,this},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,r=this.cutHeight,n=this.data.drawImage;n.width=i,n.height=r;var s=this.source.width,o=this.source.height;return this.u0=t/s,this.v0=e/o,this.u1=(t+i)/s,this.v1=(e+r)/o,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new o(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=s(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=o},function(t,e,i){var r=i(208),n=i(0),s=i(1),o=i(79),a=new n({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(t,e){return e?r.Add(this.list,t):r.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,i){return i?r.AddAt(this.list,t,e):r.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),o(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,i,n){return r.GetFirst(this.list,t,e,i,n)},getAll:function(t,e,i,n){return r.GetAll(this.list,t,e,i,n)},count:function(t,e){return r.CountAllMatching(this.list,t,e)},swap:function(t,e){r.Swap(this.list,t,e)},moveTo:function(t,e){return r.MoveTo(this.list,t,e)},moveAbove:function(t,e){return r.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return r.MoveBelow(this.list,t,e)},remove:function(t,e){return e?r.Remove(this.list,t):r.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?r.RemoveAt(this.list,t):r.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,i){return i?r.RemoveBetween(this.list,t,e):r.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return r.BringToTop(this.list,t)},sendToBack:function(t){return r.SendToBack(this.list,t)},moveUp:function(t){return r.MoveUp(this.list,t),t},moveDown:function(t){return r.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e){return r.Replace(this.list,t,e)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,n){return r.SetAll(this.list,t,e,i,n),this},each:function(t,e){for(var i=[null],r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],t.apply(e,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=a},function(t,e,i){var r=i(0),n=i(112),s=i(445),o=i(446),a=i(56),h=i(180),c=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=a.ELLIPSE,this.x=t,this.y=e,this.width=i,this.height=r},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},function(t,e){t.exports=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var r=(e-t.x)/t.width,n=(i-t.y)/t.height;return(r*=r)+(n*=n)<.25}},function(t,e,i){var r=i(275),n=i(0),s=i(75),o=i(9),a=i(207),h=i(2),c=i(6),l=i(7),u=i(437),d=i(149),f=i(73),p=new n({Extends:o,initialize:function(t,e,i){o.call(this),i?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?l(e[0])&&(i=e,e=null):l(e)&&(i=e,e=null),this.scene=t,this.children=new d,this.isParent=!0,this.type="Group",this.classType=h(i,"classType",f),this.name=h(i,"name",""),this.active=h(i,"active",!0),this.maxSize=h(i,"maxSize",-1),this.defaultKey=h(i,"defaultKey",null),this.defaultFrame=h(i,"defaultFrame",null),this.runChildUpdate=h(i,"runChildUpdate",!1),this.createCallback=h(i,"createCallback",null),this.removeCallback=h(i,"removeCallback",null),this.createMultipleCallback=h(i,"createMultipleCallback",null),this.internalCreateCallback=h(i,"internalCreateCallback",null),this.internalRemoveCallback=h(i,"internalRemoveCallback",null),e&&this.addMultiple(e),i&&this.createMultiple(i),this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,e,i,r,n,s){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===n&&(n=!0),void 0===s&&(s=!0),this.isFull())return null;var o=new this.classType(this.scene,t,e,i,r);return o.addToDisplayList(this.scene.sys.displayList),o.addToUpdateList(),o.visible=n,o.setActive(s),this.add(o),o},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var i=0;i<t.length;i++){var r=this.createFromConfig(t[i]);e=e.concat(r)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=h(t,"classType",this.classType);var e=h(t,"key",void 0),i=h(t,"frame",null),n=h(t,"visible",!0),s=h(t,"active",!0),o=[];if(void 0===e)return o;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);var a=h(t,"repeat",0),l=h(t,"randomKey",!1),d=h(t,"randomFrame",!1),f=h(t,"yoyo",!1),p=h(t,"quantity",!1),g=h(t,"frameQuantity",1),y=h(t,"max",0),m=u(e,i,{max:y,qty:p||g,random:l,randomB:d,repeat:a,yoyo:f});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var v=0;v<m.length;v++){var b=this.create(0,0,m[v].a,m[v].b,n,s);if(!b)break;o.push(b)}var w=c(t,"setXY.x",0),_=c(t,"setXY.y",0),x=c(t,"setXY.stepX",0),E=c(t,"setXY.stepY",0);r.SetXY(o,w,_,x,E);var S=c(t,"setRotation.value",0),T=c(t,"setRotation.step",0);r.SetRotation(o,S,T);var A=c(t,"setScale.x",1),C=c(t,"setScale.y",A),k=c(t,"setScale.stepX",0),R=c(t,"setScale.stepY",0);r.SetScale(o,A,C,k,R);var P=c(t,"setOrigin.x",.5),I=c(t,"setOrigin.y",P),O=c(t,"setOrigin.stepX",0),M=c(t,"setOrigin.stepY",0);r.SetOrigin(o,P,I,O,M);var D=c(t,"setAlpha.value",1),B=c(t,"setAlpha.step",0);r.SetAlpha(o,D,B);var L=c(t,"setDepth.value",0),N=c(t,"setDepth.step",0);r.SetDepth(o,L,N);var U=c(t,"setScrollFactor.x",1),F=c(t,"setScrollFactor.y",U),z=c(t,"setScrollFactor.stepX",0),j=c(t,"setScrollFactor.stepY",0);r.SetScrollFactor(o,U,F,z,j);var V=h(t,"hitArea",null),G=h(t,"hitAreaCallback",null);V&&r.SetHitArea(o,V,G);var H=h(t,"gridAlign",!1);return H&&r.GridAlign(o,H),this.createMultipleCallback&&this.createMultipleCallback.call(this,o),o},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var n=i[r];n.active&&n.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(s.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i],e);return this},remove:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(s.DESTROY,this.remove,this),i?t.destroy():e&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var i=this.children,r=0;r<i.size;r++){var n=i.entries[r];n.off(s.DESTROY,this.remove,this),e?n.destroy():t&&(n.removeFromDisplayList(),n.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,e,i,r){return a(this.children.entries,t,e,i,r)},getFirst:function(t,e,i,r,n,s,o){return this.getHandler(!0,1,t,e,i,r,n,s,o)},getFirstNth:function(t,e,i,r,n,s,o,a){return this.getHandler(!0,t,e,i,r,n,s,o,a)},getLast:function(t,e,i,r,n,s,o){return this.getHandler(!1,1,t,e,i,r,n,s,o)},getLastNth:function(t,e,i,r,n,s,o,a){return this.getHandler(!1,t,e,i,r,n,s,o,a)},getHandler:function(t,e,i,r,n,s,o,a,h){var c,l;void 0===i&&(i=!1),void 0===r&&(r=!1);var u=0,d=this.children.entries;if(t)for(l=0;l<d.length;l++)if((c=d[l]).active===i){if(++u===e)break}else c=null;else for(l=d.length-1;l>=0;l--)if((c=d[l]).active===i){if(++u===e)break}else c=null;return c?("number"==typeof n&&(c.x=n),"number"==typeof s&&(c.y=s),c):r?this.create(n,s,o,a,h):null},get:function(t,e,i,r,n){return this.getFirst(!1,!0,t,e,i,r,n)},getFirstAlive:function(t,e,i,r,n,s){return this.getFirst(!0,t,e,i,r,n,s)},getFirstDead:function(t,e,i,r,n,s){return this.getFirst(!1,t,e,i,r,n,s)},playAnimation:function(t,e){return r.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,i=0;i<this.children.size;i++)this.children.entries[i].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,i,n,s){return r.PropertyValueSet(this.children.entries,t,e,i,n,s),this},propertyValueInc:function(t,e,i,n,s){return r.PropertyValueInc(this.children.entries,t,e,i,n,s),this},setX:function(t,e){return r.SetX(this.children.entries,t,e),this},setY:function(t,e){return r.SetY(this.children.entries,t,e),this},setXY:function(t,e,i,n){return r.SetXY(this.children.entries,t,e,i,n),this},incX:function(t,e){return r.IncX(this.children.entries,t,e),this},incY:function(t,e){return r.IncY(this.children.entries,t,e),this},incXY:function(t,e,i,n){return r.IncXY(this.children.entries,t,e,i,n),this},shiftPosition:function(t,e,i){return r.ShiftPosition(this.children.entries,t,e,i),this},angle:function(t,e){return r.Angle(this.children.entries,t,e),this},rotate:function(t,e){return r.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return r.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,i){return r.RotateAroundDistance(this.children.entries,t,e,i),this},setAlpha:function(t,e){return r.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,i,n){return r.SetTint(this.children.entries,t,e,i,n),this},setOrigin:function(t,e,i,n){return r.SetOrigin(this.children.entries,t,e,i,n),this},scaleX:function(t,e){return r.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return r.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,i,n){return r.ScaleXY(this.children.entries,t,e,i,n),this},setDepth:function(t,e){return r.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return r.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return r.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return r.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,i){return r.SetVisible(this.children.entries,t,e,i),this},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.emit(s.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(e,t),this.scene=void 0,this.children=void 0)}});t.exports=p},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n,s,o){for(var a=r.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),h=i.pathData,c=i.pathIndexes,l=0;l<c.length;l+=3){var u=2*c[l],d=2*c[l+1],f=2*c[l+2],p=h[u+0]-s,g=h[u+1]-o,y=h[d+0]-s,m=h[d+1]-o,v=h[f+0]-s,b=h[f+1]-o,w=e.getX(p,g),_=e.getY(p,g),x=e.getX(y,m),E=e.getY(y,m),S=e.getX(v,b),T=e.getY(v,b);t.batchTri(i,w,_,x,E,S,T,0,0,1,1,a,a,a,2)}}},function(t,e){t.exports=function(t,e,i){var r=t.x3-t.x1,n=t.y3-t.y1,s=t.x2-t.x1,o=t.y2-t.y1,a=e-t.x1,h=i-t.y1,c=r*r+n*n,l=r*s+n*o,u=r*a+n*h,d=s*s+o*o,f=s*a+o*h,p=c*d-l*l,g=0===p?0:1/p,y=(d*u-l*f)*g,m=(c*f-l*u)*g;return y>=0&&m>=0&&y+m<1}},function(t,e,i){var r=i(0),n=i(10),s=i(3);function o(t,e,i,r){var n=t-i,s=e-r,o=n*n+s*s;return Math.sqrt(o)}var a=new r({initialize:function(t,e,i){this.vertex1=t,this.vertex2=e,this.vertex3=i,this.bounds=new n,this._inCenter=new s},getInCenter:function(t){void 0===t&&(t=!0);var e,i,r,n,s,a,h=this.vertex1,c=this.vertex2,l=this.vertex3;t?(e=h.x,i=h.y,r=c.x,n=c.y,s=l.x,a=l.y):(e=h.vx,i=h.vy,r=c.vx,n=c.vy,s=l.vx,a=l.vy);var u=o(s,a,r,n),d=o(e,i,s,a),f=o(r,n,e,i),p=u+d+f;return this._inCenter.set((e*u+r*d+s*f)/p,(i*u+n*d+a*f)/p)},contains:function(t,e,i){var r=this.vertex1,n=this.vertex2,s=this.vertex3,o=r.vx,a=r.vy,h=n.vx,c=n.vy,l=s.vx,u=s.vy;if(i){var d=i.a,f=i.b,p=i.c,g=i.d,y=i.e,m=i.f;o=r.vx*d+r.vy*p+y,a=r.vx*f+r.vy*g+m,h=n.vx*d+n.vy*p+y,c=n.vx*f+n.vy*g+m,l=s.vx*d+s.vy*p+y,u=s.vx*f+s.vy*g+m}var v=l-o,b=u-a,w=h-o,_=c-a,x=t-o,E=e-a,S=v*v+b*b,T=v*w+b*_,A=v*x+b*E,C=w*w+_*_,k=w*x+_*E,R=S*C-T*T,P=0===R?0:1/R,I=(C*A-T*k)*P,O=(S*k-T*A)*P;return I>=0&&O>=0&&I+O<1},isCounterClockwise:function(t){var e=this.vertex1,i=this.vertex2,r=this.vertex3,n=(i.vx-e.vx)*(r.vy-e.vy)-(i.vy-e.vy)*(r.vx-e.vx);return t<=0?n>=0:n<0},load:function(t,e,i,r,n){return i=this.vertex1.load(t,e,i,r,n),i=this.vertex2.load(t,e,i,r,n),this.vertex3.load(t,e,i,r,n)},transformCoordinatesLocal:function(t,e,i,r){return this.vertex1.transformCoordinatesLocal(t,e,i,r),this.vertex2.transformCoordinatesLocal(t,e,i,r),this.vertex3.transformCoordinatesLocal(t,e,i,r),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3,r=this.bounds;return r.x=Math.min(t.vx,e.vx,i.vx),r.y=Math.min(t.vy,e.vy,i.vy),r.width=Math.max(t.vx,e.vx,i.vx)-r.x,r.height=Math.max(t.vy,e.vy,i.vy)-r.y,this},isInView:function(t,e,i,r,n,s,o,a,h,c,l){var u=this.vertex1.update(n,s,o,a,h,c,l,r),d=this.vertex2.update(n,s,o,a,h,c,l,r),f=this.vertex3.update(n,s,o,a,h,c,l,r);if(u.ta<=0&&d.ta<=0&&f.ta<=0)return!1;if(e&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(u.tx,d.tx,f.tx),p.y=Math.min(u.ty,d.ty,f.ty),p.width=Math.max(u.tx,d.tx,f.tx)-p.x,p.height=Math.max(u.ty,d.ty,f.ty)-p.y;var g=t.x+t.width,y=t.y+t.height;return!(p.width<=0||p.height<=0||t.width<=0||t.height<=0||p.right<t.x||p.bottom<t.y||p.x>g||p.y>y)},translate:function(t,e){void 0===e&&(e=0);var i=this.vertex1,r=this.vertex2,n=this.vertex3;return i.x+=t,i.y+=e,r.x+=t,r.y+=e,n.x+=t,n.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.alpha+e.alpha+i.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.vz+e.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=a},function(t,e,i){var r=i(0),n=i(12),s=i(39),o=new r({Extends:s,initialize:function(t,e,i,r,n,o,a,h,c,l){void 0===o&&(o=16777215),void 0===a&&(a=1),void 0===h&&(h=0),void 0===c&&(c=0),void 0===l&&(l=0),s.call(this,t,e,i),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=c,this.nz=l,this.u=r,this.v=n,this.color=o,this.alpha=a,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,e){return this.u=t,this.v=e,this},transformCoordinatesLocal:function(t,e,i,r){var n=this.x,s=this.y,o=this.z,a=t.val,h=n*a[0]+s*a[4]+o*a[8]+a[12],c=n*a[1]+s*a[5]+o*a[9]+a[13],l=n*a[2]+s*a[6]+o*a[10]+a[14],u=n*a[3]+s*a[7]+o*a[11]+a[15];this.vx=h/u*e,this.vy=-c/u*i,this.vz=r<=0?l/u:-l/u},update:function(t,e,i,r,n,s,o,a){var h=this.vx*t+this.vy*i+n,c=this.vx*e+this.vy*r+s;return o&&(h=Math.round(h),c=Math.round(c)),this.tx=h,this.ty=c,this.ta=this.alpha*a,this},load:function(t,e,i,r,s){return t[++i]=this.tx,t[++i]=this.ty,t[++i]=this.u,t[++i]=this.v,t[++i]=r,t[++i]=s,e[++i]=n.getTintAppendFloatAlpha(this.color,this.ta),i}});t.exports=o},function(t,e,i){var r={};t.exports=r;var n=i(166),s=i(32),o=i(84),a=i(41);r.create=function(t){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},r.setModified=function(t,e,i,s){if(n.trigger(t,"compositeModified",t),t.isModified=e,i&&t.parent&&r.setModified(t.parent,e,i,s),s)for(var o=0;o<t.composites.length;o++){var a=t.composites[o];r.setModified(a,e,i,s)}},r.add=function(t,e){var i=[].concat(e);n.trigger(t,"beforeAdd",{object:e});for(var o=0;o<i.length;o++){var a=i[o];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(t,a);break;case"constraint":r.addConstraint(t,a);break;case"composite":r.addComposite(t,a);break;case"mouseConstraint":r.addConstraint(t,a.constraint)}}return n.trigger(t,"afterAdd",{object:e}),t},r.remove=function(t,e,i){var s=[].concat(e);n.trigger(t,"beforeRemove",{object:e});for(var o=0;o<s.length;o++){var a=s[o];switch(a.type){case"body":r.removeBody(t,a,i);break;case"constraint":r.removeConstraint(t,a,i);break;case"composite":r.removeComposite(t,a,i);break;case"mouseConstraint":r.removeConstraint(t,a.constraint)}}return n.trigger(t,"afterRemove",{object:e}),t},r.addComposite=function(t,e){return t.composites.push(e),e.parent=t,r.setModified(t,!0,!0,!1),t},r.removeComposite=function(t,e,i){var n=t.composites.indexOf(e);if(-1!==n&&(r.removeCompositeAt(t,n),r.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)r.removeComposite(t.composites[s],e,!0);return t},r.removeCompositeAt=function(t,e){return t.composites.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addBody=function(t,e){return t.bodies.push(e),r.setModified(t,!0,!0,!1),t},r.removeBody=function(t,e,i){var n=t.bodies.indexOf(e);if(-1!==n&&(r.removeBodyAt(t,n),r.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)r.removeBody(t.composites[s],e,!0);return t},r.removeBodyAt=function(t,e){return t.bodies.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addConstraint=function(t,e){return t.constraints.push(e),r.setModified(t,!0,!0,!1),t},r.removeConstraint=function(t,e,i){var n=t.constraints.indexOf(e);if(-1!==n&&r.removeConstraintAt(t,n),i)for(var s=0;s<t.composites.length;s++)r.removeConstraint(t.composites[s],e,!0);return t},r.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),r.setModified(t,!0,!0,!1),t},r.clear=function(t,e,i){if(i)for(var n=0;n<t.composites.length;n++)r.clear(t.composites[n],e,!0);return e?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,r.setModified(t,!0,!0,!1),t},r.allBodies=function(t){for(var e=[].concat(t.bodies),i=0;i<t.composites.length;i++)e=e.concat(r.allBodies(t.composites[i]));return e},r.allConstraints=function(t){for(var e=[].concat(t.constraints),i=0;i<t.composites.length;i++)e=e.concat(r.allConstraints(t.composites[i]));return e},r.allComposites=function(t){for(var e=[].concat(t.composites),i=0;i<t.composites.length;i++)e=e.concat(r.allComposites(t.composites[i]));return e},r.get=function(t,e,i){var n,s;switch(i){case"body":n=r.allBodies(t);break;case"constraint":n=r.allConstraints(t);break;case"composite":n=r.allComposites(t).concat(t)}return n?0===(s=n.filter((function(t){return t.id.toString()===e.toString()}))).length?null:s[0]:null},r.move=function(t,e,i){return r.remove(t,e),r.add(i,e),t},r.rebase=function(t){for(var e=r.allBodies(t).concat(r.allConstraints(t)).concat(r.allComposites(t)),i=0;i<e.length;i++)e[i].id=s.nextId();return r.setModified(t,!0,!0,!1),t},r.translate=function(t,e,i){for(var n=i?r.allBodies(t):t.bodies,s=0;s<n.length;s++)a.translate(n[s],e);return r.setModified(t,!0,!0,!1),t},r.rotate=function(t,e,i,n){for(var s=Math.cos(e),o=Math.sin(e),h=n?r.allBodies(t):t.bodies,c=0;c<h.length;c++){var l=h[c],u=l.position.x-i.x,d=l.position.y-i.y;a.setPosition(l,{x:i.x+(u*s-d*o),y:i.y+(u*o+d*s)}),a.rotate(l,e)}return r.setModified(t,!0,!0,!1),t},r.scale=function(t,e,i,n,s){for(var o=s?r.allBodies(t):t.bodies,h=0;h<o.length;h++){var c=o[h],l=c.position.x-n.x,u=c.position.y-n.y;a.setPosition(c,{x:n.x+l*e,y:n.y+u*i}),a.scale(c,e,i)}return r.setModified(t,!0,!0,!1),t},r.bounds=function(t){for(var e=r.allBodies(t),i=[],n=0;n<e.length;n+=1){var s=e[n];i.push(s.bounds.min,s.bounds.max)}return o.create(i)}},function(t,e){t.exports=function(t,e,i){return t>=0&&t<i.width&&e>=0&&e<i.height}},function(t,e,i){var r=i(0),n=i(29),s=i(2),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=s(t,"name","layer"),this.x=s(t,"x",0),this.y=s(t,"y",0),this.width=s(t,"width",0),this.height=s(t,"height",0),this.tileWidth=s(t,"tileWidth",0),this.tileHeight=s(t,"tileHeight",0),this.baseTileWidth=s(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(t,"baseTileHeight",this.tileHeight),this.orientation=s(t,"orientation",n.ORTHOGONAL),this.widthInPixels=s(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(t,"alpha",1),this.visible=s(t,"visible",!0),this.properties=s(t,"properties",[]),this.indexes=s(t,"indexes",[]),this.collideIndexes=s(t,"collideIndexes",[]),this.callbacks=s(t,"callbacks",[]),this.bodies=s(t,"bodies",[]),this.data=s(t,"data",[]),this.tilemapLayer=s(t,"tilemapLayer",null),this.hexSideLength=s(t,"hexSideLength",0)}});t.exports=o},function(t,e,i){var r=i(0),n=i(29),s=i(2),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=s(t,"name","map"),this.width=s(t,"width",0),this.height=s(t,"height",0),this.infinite=s(t,"infinite",!1),this.tileWidth=s(t,"tileWidth",0),this.tileHeight=s(t,"tileHeight",0),this.widthInPixels=s(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(t,"heightInPixels",this.height*this.tileHeight),this.format=s(t,"format",null),this.orientation=s(t,"orientation",n.ORTHOGONAL),this.renderOrder=s(t,"renderOrder","right-down"),this.version=s(t,"version","1"),this.properties=s(t,"properties",{}),this.layers=s(t,"layers",[]),this.images=s(t,"images",[]),this.objects=s(t,"objects",{}),this.collision=s(t,"collision",{}),this.tilesets=s(t,"tilesets",[]),this.imageCollections=s(t,"imageCollections",[]),this.tiles=s(t,"tiles",[]),this.hexSideLength=s(t,"hexSideLength",0)}});t.exports=o},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n,s,o,a){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o={}),void 0===a&&(a={}),this.name=t,this.firstgid=e,this.tileWidth=i,this.tileHeight=r,this.tileMargin=n,this.tileSpacing=s,this.tileProperties=o,this.tileData=a,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e){var i=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),r=Math.floor(r),this.rows=i,this.columns=r,this.total=i*r,this.texCoordinates.length=0;for(var n=this.tileMargin,s=this.tileMargin,o=0;o<this.rows;o++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:n,y:s}),n+=this.tileWidth+this.tileSpacing;n=this.tileMargin,s+=this.tileHeight+this.tileSpacing}return this}});t.exports=r},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(1068),a=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,o],initialize:function(t,e,i,r,n){s.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,n),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=a},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,i){var r=i(77);t.exports=function(t,e){var i=r(t);for(var n in e)i.hasOwnProperty(n)||(i[n]=e[n]);return i}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83),o=i(165),a=i(84),h=i(271),c=i(32);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var i=e.bodyA?s.add(e.bodyA.position,e.pointA):e.pointA,r=e.bodyB?s.add(e.bodyB.position,e.pointB):e.pointB,n=s.magnitude(s.sub(i,r));e.length=void 0!==e.length?e.length:n,e.id=e.id||c.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var o={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&e.stiffness>.1?(o.type="pin",o.anchors=!1):e.stiffness<.9&&(o.type="spring"),e.render=c.extend(o,e.render),e},r.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var i=t[e],r=i.constraintImpulse;i.isStatic||0===r.x&&0===r.y&&0===r.angle||(i.position.x+=r.x,i.position.y+=r.y,i.angle+=r.angle)}},r.solveAll=function(t,e){for(var i=0;i<t.length;i+=1){var n=t[i],s=!n.bodyA||n.bodyA&&n.bodyA.isStatic,o=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(s||o)&&r.solve(t[i],e)}for(i=0;i<t.length;i+=1)s=!(n=t[i]).bodyA||n.bodyA&&n.bodyA.isStatic,o=!n.bodyB||n.bodyB&&n.bodyB.isStatic,s||o||r.solve(t[i],e)},r.solve=function(t,e){var i=t.bodyA,n=t.bodyB,o=t.pointA,a=t.pointB;if(i||n){i&&!i.isStatic&&(s.rotate(o,i.angle-t.angleA,o),t.angleA=i.angle),n&&!n.isStatic&&(s.rotate(a,n.angle-t.angleB,a),t.angleB=n.angle);var h=o,c=a;if(i&&(h=s.add(i.position,o)),n&&(c=s.add(n.position,a)),h&&c){var l=s.sub(h,c),u=s.magnitude(l);u<r._minLength&&(u=r._minLength);var d,f,p,g,y,m=(u-t.length)/u,v=t.stiffness<1?t.stiffness*e:t.stiffness,b=s.mult(l,m*v),w=(i?i.inverseMass:0)+(n?n.inverseMass:0),_=w+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(t.damping){var x=s.create();p=s.div(l,u),y=s.sub(n&&s.sub(n.position,n.positionPrev)||x,i&&s.sub(i.position,i.positionPrev)||x),g=s.dot(p,y)}i&&!i.isStatic&&(f=i.inverseMass/w,i.constraintImpulse.x-=b.x*f,i.constraintImpulse.y-=b.y*f,i.position.x-=b.x*f,i.position.y-=b.y*f,t.damping&&(i.positionPrev.x-=t.damping*p.x*g*f,i.positionPrev.y-=t.damping*p.y*g*f),d=s.cross(o,b)/_*r._torqueDampen*i.inverseInertia*(1-t.angularStiffness),i.constraintImpulse.angle-=d,i.angle-=d),n&&!n.isStatic&&(f=n.inverseMass/w,n.constraintImpulse.x+=b.x*f,n.constraintImpulse.y+=b.y*f,n.position.x+=b.x*f,n.position.y+=b.y*f,t.damping&&(n.positionPrev.x+=t.damping*p.x*g*f,n.positionPrev.y+=t.damping*p.y*g*f),d=s.cross(a,b)/_*r._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle+=d,n.angle+=d)}}},r.postSolveAll=function(t){for(var e=0;e<t.length;e++){var i=t[e],c=i.constraintImpulse;if(!(i.isStatic||0===c.x&&0===c.y&&0===c.angle)){o.set(i,!1);for(var l=0;l<i.parts.length;l++){var u=i.parts[l];n.translate(u.vertices,c),l>0&&(u.position.x+=c.x,u.position.y+=c.y),0!==c.angle&&(n.rotate(u.vertices,c.angle,i.position),h.rotate(u.axes,c.angle),l>0&&s.rotateAbout(u.position,c.angle,i.position,u.position)),a.update(u.bounds,u.vertices,i.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}},r.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},r.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,e,i){var r=i(35),n=i(65),s=i(66),o=i(0),a=i(11),h=i(15),c=i(10),l=i(57),u=new o({Extends:h,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(t,e,i,n,s){void 0===n&&(n=1),void 0===s&&(s=n),h.call(this,t,"Zone"),this.setPosition(e,i),this.width=n,this.height=s,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,i){void 0===i&&(i=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var r=this.input;return i&&r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new n(0,0,t),s)},setRectangleDropZone:function(t,e){return this.setDropZone(new c(0,0,t,e),l)},setDropZone:function(t,e){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,e,i){i.addToRenderList(e)},renderWebGL:function(t,e,i){i.addToRenderList(e)}});t.exports=u},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e){t.exports=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t}},function(t,e,i){t.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(t,e,i){var r=i(0),n=i(11),s=i(36),o=i(9),a=i(37),h=i(10),c=i(25),l=i(187),u=i(3),d=new r({Extends:o,Mixins:[n.Alpha,n.Visible],initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._width=i,this._height=r,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new c,this.transparent=!0,this.backgroundColor=l("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new u(i/2,r/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,i){void 0===i&&(i=new u);var r=.5*this.width,n=.5*this.height;return i.x=t-r,i.y=e-n,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,e=.5*this.width,i=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-i}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,i=e[0],r=e[1],n=e[2],s=e[3],o=i*s-r*n;if(!o)return t;var a=e[4],h=e[5],c=this.scrollX,l=this.scrollY,u=this.width,d=this.height,f=this.y,p=f+d,g=this.x,y=g+u,m=this.culledObjects,v=t.length;o=1/o,m.length=0;for(var b=0;b<v;++b){var w=t[b];if(w.hasOwnProperty("width")&&!w.parentContainer){var _=w.width,x=w.height,E=w.x-c*w.scrollFactorX-_*w.originX,S=w.y-l*w.scrollFactorY-x*w.originY;(E+_)*i+(S+x)*n+a>g&&E*i+S*n+a<y&&(E+_)*r+(S+x)*s+h>f&&E*r+S*s+h<p&&m.push(w)}else m.push(w)}return m},getWorldPoint:function(t,e,i){void 0===i&&(i=new u);var r=this.matrix.matrix,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],c=r[5],l=n*a-s*o;if(!l)return i.x=t,i.y=e,i;var d=a*(l=1/l),f=-s*l,p=-o*l,g=n*l,y=(o*c-a*h)*l,m=(s*h-n*c)*l,v=Math.cos(this.rotation),b=Math.sin(this.rotation),w=this.zoomX,_=this.zoomY,x=this.scrollX,E=this.scrollY,S=t+(x*v-E*b)*w,T=e+(x*b+E*v)*_;return i.x=S*d+T*p+y,i.y=S*f+T*g+m,i},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,r=.5*e,n=this.zoomX,s=this.zoomY,o=this.matrix,a=t*this.originX,h=e*this.originY,c=this.scrollX,l=this.scrollY;this.useBounds&&(c=this.clampX(c),l=this.clampY(l)),this.roundPixels&&(a=Math.round(a),h=Math.round(h)),this.scrollX=c,this.scrollY=l;var u=c+i,d=l+r;this.midPoint.set(u,d);var f=t/n,p=e/s;this.worldView.setTo(u-f/2,d-p/2,f,p),o.applyITRS(this.x+a,this.y+h,this.rotation,n,s),o.translate(-a,-h)},clampX:function(t){var e=this._bounds,i=this.displayWidth,r=e.x+(i-this.width)/2,n=Math.max(r,r+e.width-i);return t<r?t=r:t>n&&(t=n),t},clampY:function(t){var e=this._bounds,i=this.displayHeight,r=e.y+(i-this.height)/2,n=Math.max(r,r+e.height-i);return t<r?t=r:t>n&&(t=n),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=s(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=l(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,i,r,n){return void 0===n&&(n=!1),this._bounds.setTo(t,e,i,r),this.dirty=!0,this.useBounds=!0,n?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var e=t.sys;return this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},setZoom:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),0===t&&(t=.001),0===e&&(e=.001),this.zoomX=t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager;t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=d},function(t,e,i){var r=i(334),n=i(335),s=i(336),o=i(337),a=i(338),h=i(339),c=i(340),l=i(341),u=i(342),d=i(343),f=i(344),p=i(345);t.exports={Power0:c,Power1:l.Out,Power2:o.Out,Power3:u.Out,Power4:d.Out,Linear:c,Quad:l.Out,Cubic:o.Out,Quart:u.Out,Quint:d.Out,Sine:f.Out,Expo:h.Out,Circ:s.Out,Elastic:a.Out,Back:r.Out,Bounce:n.Out,Stepped:p,"Quad.easeIn":l.In,"Cubic.easeIn":o.In,"Quart.easeIn":u.In,"Quint.easeIn":d.In,"Sine.easeIn":f.In,"Expo.easeIn":h.In,"Circ.easeIn":s.In,"Elastic.easeIn":a.In,"Back.easeIn":r.In,"Bounce.easeIn":n.In,"Quad.easeOut":l.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":u.Out,"Quint.easeOut":d.Out,"Sine.easeOut":f.Out,"Expo.easeOut":h.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":a.Out,"Back.easeOut":r.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":l.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":u.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":n.InOut}},function(t,e){t.exports=function(t,e,i){return(e-t)*i+t}},function(t,e,i){var r,n=i(105),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=(r=navigator.userAgent,/Edge\/\d+/.test(r)?s.edge=!0:/Chrome\/(\d+)/.test(r)&&!n.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(r)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(r)&&n.iOS?s.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(r)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(r)?s.opera=!0:/Safari/.test(r)&&!n.windowsPhone?s.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(s.silk=!0),s)},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)}},function(t,e){t.exports=function(t,e,i,r){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),r?(i+t)/e:i+t)}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return Math.sqrt(t*t+e*e+i*i+r*r)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return t*t+e*e+i*i+r*r},normalize:function(){var t=this.x,e=this.y,i=this.z,r=this.w,n=t*t+e*e+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=i*n,this.w=r*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y,n=this.z,s=this.w;return this.x=i+e*(t.x-i),this.y=r+e*(t.y-r),this.z=n+e*(t.z-n),this.w=s+e*(t.w-s),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(e*e+i*i+r*r+n*n)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0,n=t.w-this.w||0;return e*e+i*i+r*r+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.val;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this},transformQuat:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*r-o*i,c=a*i+o*e-n*r,l=a*r+n*i-s*e,u=-n*e-s*i-o*r;return this.x=h*a+u*-n+c*-o-l*-s,this.y=c*a+u*-s+l*-n-h*-o,this.z=l*a+u*-o+h*-s-c*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,t.exports=r},function(t,e,i){var r=i(0),n=i(91),s=new r({initialize:function(t,e,i,r,n,s,o){void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=!0),void 0===o&&(o=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=r,this.minFilter=n,this.autoClear=s,this.autoResize=!1,this.resize(e,i),o&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(n.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(n.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){var i=t*this.scale,r=e*this.scale;if(i!==this.width||r!==this.height){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),t*=this.scale,e*=this.scale,(t=Math.round(t))<=0&&(t=1),(e=Math.round(e))<=0&&(e=1),this.texture=n.createTextureFromSource(null,t,e,this.minFilter),this.framebuffer=n.createFramebuffer(t,e,this.texture,!1),this.width=t,this.height=e}return this},bind:function(t,e,i){if(void 0===t&&(t=!1),t&&this.renderer.flush(),e&&i&&this.resize(e,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var e=this.renderer;return t&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(n.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=s},function(t,e){t.exports=function(t,e){var i;if(e)"string"==typeof e?i=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(i=e);else if(t.parentElement||null===e)return t;return i||(i=document.body),i.appendChild(t),t}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,i){var r=i(0),n=i(77),s=i(9),o=i(70),a=i(22),h=i(1),c=i(207),l=i(428),u=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(a.BLUR,this.onGameBlur,this),t.events.on(a.FOCUS,this.onGameFocus,this),t.events.on(a.PRE_STEP,this.update,this),t.events.once(a.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(t,e){void 0===e&&(e={});var i=this.add(t,e);for(var r in i.spritemap=this.jsonCache.get(t).spritemap,i.spritemap)if(i.spritemap.hasOwnProperty(r)){var s=n(e),o=i.spritemap[r];s.loop=!!o.hasOwnProperty("loop")&&o.loop,i.addMarker({name:r,start:o.start,duration:o.end-o.start,config:s})}return i},get:function(t){return l(this.sounds,"key",t)},getAll:function(t){return c(this.sounds,"key",t)},play:function(t,e){var i=this.add(t);return i.once(o.COMPLETE,i.destroy,i),e?e.name?(i.addMarker(e),i.play(e.name)):i.play(e):i.play()},playAudioSprite:function(t,e,i){var r=this.addAudioSprite(t);return r.once(o.COMPLETE,r.destroy,r),r.play(e,i)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var e=0,i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];r.key===t&&(r.destroy(),this.sounds.splice(i,1),e++)}return e},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(o.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach((function(t){t.stop()&&e++})),e},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach((function(i){i.update(t,e)}))},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var i=this;this.sounds.forEach((function(r,n){r&&!r.pendingRemove&&t.call(e||i,r,n,i.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(o.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(o.GLOBAL_DETUNE,this,t)}}});t.exports=u},function(t,e,i){var r=i(0),n=i(9),s=i(70),o=i(17),a=i(1),h=new r({Extends:n,initialize:function(t,e,i){n.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=o(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=o(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=o(this.currentConfig,e),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=h},function(t,e,i){var r=i(209),n=i(435);t.exports=function(t,e){if(void 0===e&&(e=90),!r(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=n(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=n(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},function(t,e,i){var r=i(0),n=i(18),s=i(11),o=i(15),a=i(1043),h=i(1044),c=i(212),l=i(10),u=i(1045),d=new r({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,u],initialize:function(t,e,i,r,n,s,h){void 0===n&&(n=""),void 0===h&&(h=0),o.call(this,t,"BitmapText"),this.font=r;var c=this.scene.sys.cache.bitmapFont.get(r);c||console.warn("Invalid BitmapText key: "+r),this.fontData=c.data,this._text="",this._fontSize=s||this.fontData.size,this._letterSpacing=0,this._align=h,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=c.fromAtlas,this.setTexture(c.texture,c.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=i,this.dropShadowAlpha=r,this},setCharacterTint:function(t,e,i,r,s,o,a){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=!1),void 0===r&&(r=-1),void 0===s&&(s=r,o=r,a=r);var h=this.text.length;-1===e&&(e=h),t<0&&(t=h+t),t=n(t,0,h-1);for(var c=n(t+e,t,h),l=this.charColors,u=t;u<c;u++){var d=l[u];if(-1===r)l[u]=null;else{var f=i?1:0;d?(d.tintEffect=f,d.tintTL=r,d.tintTR=s,d.tintBL=o,d.tintBR=a):l[u]={tintEffect:f,tintTL:r,tintTR:s,tintBL:o,tintBR:a}}}return this},setWordTint:function(t,e,i,r,n,s,o){void 0===e&&(e=1);for(var a=this.getTextBounds().words,h="number"==typeof t,c=0,l=0;l<a.length;l++){var u=a[l];if((h&&l===t||!h&&u.word===t)&&(this.setCharacterTint(u.i,u.word.length,i,r,n,s,o),++c===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(a(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,i){for(var r=this.getLocalPoint(t,e,null,i),n=this.getTextBounds().characters,s=new l,o=0;o<n.length;o++){var a=n[o];if(s.setTo(a.x,a.t,a.r-a.x,a.b),s.contains(r.x,r.y))return a}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,i){if(void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t!==this.font){var r=this.scene.sys.cache.bitmapFont.get(t);r&&(this.font=t,this.fontData=r.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===r.fromAtlas,this.setTexture(r.texture,r.frame),a(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=s.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=h,d.ParseXMLBitmapFont=c,t.exports=d},function(t,e,i){var r=new(i(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[t]===e)return r}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var i,r=this.entries.slice(),n=r.length;if(e)for(i=0;i<n&&!1!==t.call(e,r[i],i);i++);else for(i=0;i<n&&!1!==t(r[i],i);i++);return this},iterate:function(t,e){var i,r=this.entries.length;if(e)for(i=0;i<r&&!1!==t.call(e,this.entries[i],i);i++);else for(i=0;i<r&&!1!==t(this.entries[i],i);i++);return this},iterateLocal:function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var r=this.entries.length;for(e=0;e<r;e++){var n=this.entries[e];n[t].apply(n,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var e=new r;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new r;return this.entries.forEach((function(i){t.contains(i)&&e.set(i)})),e},difference:function(t){var e=new r;return this.entries.forEach((function(i){t.contains(i)||e.set(i)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=r},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(189),a=i(92),h=i(1182),c=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible,h],initialize:function(t,e,i,r,n,h,c){void 0===r&&(r=16777215),void 0===n&&(n=128),void 0===h&&(h=1),void 0===c&&(c=.1),s.call(this,t,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.setPosition(e,i),this.color=o(r),this.intensity=h,this.attenuation=c,this.width=2*n,this.height=2*n,this._radius=n},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=c},function(t,e){t.exports=function(t,e){var i=e.width/2,r=e.height/2,n=Math.abs(t.x-e.x-i),s=Math.abs(t.y-e.y-r),o=i+t.radius,a=r+t.radius;if(n>o||s>a)return!1;if(n<=i||s<=r)return!0;var h=n-i,c=s-r;return h*h+c*c<=t.radius*t.radius}},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,i){var r=i(6),n={},s={register:function(t,e,i,r,s){n[t]={plugin:e,mapping:i,settingsKey:r,configKey:s}},getPlugin:function(t){return n[t]},install:function(t){var e=t.scene.sys,i=e.settings.input,s=e.game.config;for(var o in n){var a=n[o].plugin,h=n[o].mapping,c=n[o].settingsKey,l=n[o].configKey;r(i,c,s[l])&&(t[h]=new a(t))}},remove:function(t){n.hasOwnProperty(t)&&delete n[t]}};t.exports=s},function(t,e,i){t.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e){t.exports=function(t,e,i,r,n,s){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===n&&(n=0),void 0===s&&(s=!1),{responseType:t,async:e,user:i,password:r,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}}},function(t,e,i){var r=i(0),n=i(243),s=i(73),o=new r({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.body=null}});t.exports=o},function(t,e,i){var r=i(119);t.exports=function(t,e,i,n){if(void 0===i&&(i=!1),r(t,e,n)){var s=n.data[e][t]||null;return s?-1===s.index?i?s:null:s:null}return null}},function(t,e){t.exports=function(t,e,i,r){var n,s,o,a=t.data,h=t.width,c=t.height,l=t.tilemapLayer,u=Math.max(0,e.left),d=Math.min(h,e.right),f=Math.max(0,e.top),p=Math.min(c,e.bottom);if(0===i)for(s=f;s<p;s++)for(n=u;a[s]&&n<d;n++)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);else if(1===i)for(s=f;s<p;s++)for(n=d;a[s]&&n>=u;n--)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);else if(2===i)for(s=p;s>=f;s--)for(n=u;a[s]&&n<d;n++)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);else if(3===i)for(s=p;s>=f;s--)for(n=d;a[s]&&n>=u;n--)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);return l.tilesDrawn=r.length,l.tilesTotal=h*c,r}},function(t,e){t.exports=function(t,e,i){var r=i.collideIndexes.indexOf(t);e&&-1===r?i.collideIndexes.push(t):e||-1===r||i.collideIndexes.splice(r,1)}},function(t,e,i){var r=i(2);t.exports=function(t,e,i){if(!e)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=e.x+r(e,"startx",0)*t.tilewidth+r(e,"offsetx",0),s=e.y+r(e,"starty",0)*t.tileheight+r(e,"offsety",0);return{i:0,layers:e.layers,name:i.name+e.name+"/",opacity:i.opacity*e.opacity,visible:i.visible&&e.visible,x:i.x+n,y:i.y+s}}},function(t,e){t.exports=function(t,e,i){return t.hasOwnProperty(e)?"function"==typeof t[e]?function(i,r,n,s,o,a){return t[e](i,r,n,s,o,a)}:function(){return t[e]}:"function"==typeof i?i:function(){return i}}},function(t,e,i){var r=i(265),n=i(13),s=i(99),o=i(80),a=i(162),h=i(583),c=i(263),l=i(6),u=i(264),d=i(266),f=i(268);t.exports=function(t,e,i){void 0===i&&(i=r);for(var p=i.targets?i.targets:c(e),g=h(e),y=a(e,"delay",i.delay),m=a(e,"duration",i.duration),v=l(e,"easeParams",i.easeParams),b=o(l(e,"ease",i.ease),v),w=a(e,"hold",i.hold),_=a(e,"repeat",i.repeat),x=a(e,"repeatDelay",i.repeatDelay),E=s(e,"yoyo",i.yoyo),S=s(e,"flipX",i.flipX),T=s(e,"flipY",i.flipY),A=[],C=0;C<g.length;C++)for(var k=g[C].key,R=g[C].value,P=0;P<p.length;P++){var I=u(k,R),O=f(p[P],P,k,I.getEnd,I.getStart,I.getActive,o(l(R,"ease",b),l(R,"easeParams",v)),a(R,"delay",y),a(R,"duration",m),s(R,"yoyo",E),a(R,"hold",w),a(R,"repeat",_),a(R,"repeatDelay",x),s(R,"flipX",S),s(R,"flipY",T));A.push(O)}var M=new d(t,A,p);M.offset=n(e,"offset",null),M.completeDelay=n(e,"completeDelay",0),M.loop=Math.round(n(e,"loop",0)),M.loopDelay=Math.round(n(e,"loopDelay",0)),M.paused=s(e,"paused",!1),M.useFrames=s(e,"useFrames",!1);for(var D=l(e,"callbackScope",M),B=[M,null],L=d.TYPES,N=0;N<L.length;N++){var U=L[N],F=l(e,U,!1);if(F){var z=l(e,U+"Scope",D),j=l(e,U+"Params",[]);M.setCallback(U,F,B.concat(j),z)}}return M}},function(t,e,i){var r=i(0),n=i(102),s=i(2),o=i(132),a=i(185),h=new r({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];null===this.nextAnim?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e=this.animationManager,i="string"==typeof t?t:s(t,"key",null),r=this.exists(i)?this.get(i):e.get(i);if(r){this.currentAnim=r;var n=r.getTotalFrames(),o=s(t,"frameRate",r.frameRate),a=s(t,"duration",r.duration);r.calculateDuration(this,n,a,o),this.delay=s(t,"delay",r.delay),this.repeat=s(t,"repeat",r.repeat),this.repeatDelay=s(t,"repeatDelay",r.repeatDelay),this.yoyo=s(t,"yoyo",r.yoyo),this.showOnStart=s(t,"showOnStart",r.showOnStart),this.hideOnComplete=s(t,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=s(t,"skipMissedFrames",r.skipMissedFrames),this.timeScale=s(t,"timeScale",this.timeScale);var h=s(t,"startFrame",0);h>r.getTotalFrames()&&(h=0);var c=r.frames[h];0!==h||this.forward||(c=r.getLastFrame()),this.currentFrame=c}else console.warn("Missing animation: "+i);return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){if(this.isPlaying){var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e}else this.delayCounter=e,this.play(t,!0);return this.parent},playAfterRepeat:function(t,e){if(void 0===e&&(e=1),this.isPlaying){var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e}else this.play(t);return this.parent},play:function(t,e){void 0===e&&(e=!1);var i=this.currentAnim,r=this.parent,n="string"==typeof t?t:t.key;if(e&&this.isPlaying&&i.key===n)return r;if(i&&this.isPlaying){var s=this.animationManager.getMix(i.key,t);if(s>0)return this.playAfterDelay(t,s)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){void 0===e&&(e=!1);var i="string"==typeof t?t:t.key;return e&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var e=this.currentAnim,i=this.parent;return e?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,e.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),i):i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var i=this.currentAnim,r=this.currentFrame,n=this.parent,s=r.textureFrame;n.emit(t,i,r,n,s),e&&n.emit(e+i.key,i,r,n,s)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var e=t.progress;return this.inReverse&&(e*=-1),e},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.currentAnim,r=this.parent;return i?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=e*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do{this.forward?i.nextFrame(this):i.previousFrame(this),r++}while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new a(this,e,t),this.anims||(this.anims=new n),this.anims.set(e,i))),i},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=h},function(t,e,i){var r={};t.exports=r;var n=i(166);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var s=t[n],o=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,o),h=Math.max(s.motion,o);s.motion=r._minBias*a+(1-r._minBias)*h,s.sleepThreshold>0&&s.motion<r._motionSleepThreshold*i?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&r.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}else r.set(s,!1)}},r.afterCollisions=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var s=t[n];if(s.isActive){var o=s.collision,a=o.bodyA.parent,h=o.bodyB.parent;if(!(a.isSleeping&&h.isSleeping||a.isStatic||h.isStatic)&&(a.isSleeping||h.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:h,l=c===a?h:a;!c.isStatic&&l.motion>r._motionWakeThreshold*i&&r.set(c,!1)}}}},r.set=function(t,e){var i=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,i||n.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,i&&n.trigger(t,"sleepEnd"))}},function(t,e,i){var r={};t.exports=r;var n=i(32);r.on=function(t,e,i){for(var r,n=e.split(" "),s=0;s<n.length;s++)r=n[s],t.events=t.events||{},t.events[r]=t.events[r]||[],t.events[r].push(i);return i},r.off=function(t,e,i){if(e){"function"==typeof e&&(i=e,e=n.keys(t.events).join(" "));for(var r=e.split(" "),s=0;s<r.length;s++){var o=t.events[r[s]],a=[];if(i&&o)for(var h=0;h<o.length;h++)o[h]!==i&&a.push(o[h]);t.events[r[s]]=a}}else t.events={}},r.trigger=function(t,e,i){var r,s,o,a,h=t.events;if(h&&n.keys(h).length>0){i||(i={}),r=e.split(" ");for(var c=0;c<r.length;c++)if(o=h[s=r[c]]){(a=n.clone(i,!1)).name=s,a.source=t;for(var l=0;l<o.length;l++)o[l].apply(t,[a])}}}},function(t,e,i){var r=i(175),n=i(92),s=i(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=n.MULTI_PIPELINE);var e=this.scene.sys.renderer;if(!e)return!1;var i=e.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var r=i.get(t);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(t,e,i){var n=this.scene.sys.renderer;if(!n)return this;var s=n.pipelines;if(s){var o=s.get(t);o&&(this.pipeline=o),e&&(this.pipelineData=i?r(e):e)}return this},setPostPipeline:function(t,e,i){var n=this.scene.sys.renderer;if(!n)return this;var s=n.pipelines;if(s){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=s.getPostPipeline(t[o],this);a&&this.postPipelines.push(a)}e&&(this.pipelineData=i?r(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,e){var i=this.pipelineData;return void 0===e?delete i[t]:i[t]=e,this},getPostPipeline:function(t){for(var e=this.postPipelines,i=[],r=0;r<e.length;r++){var n=e[r];("string"==typeof t&&n.name===t||n instanceof t)&&i.push(n)}return 1===i.length?i[0]:i},resetPipeline:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),e&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,i=0;i<e.length;i++)e[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var e=this.postPipelines,i=e.length-1;i>=0;i--){var r=e[i];("string"==typeof t&&r.name===t||"string"!=typeof t&&r instanceof t)&&(r.destroy(),s(e,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=o},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new r),i.x=t.x+t.radius*Math.cos(e),i.y=t.y+t.radius*Math.sin(e),i}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=2*Math.PI*Math.random(),n=Math.random()+Math.random(),s=n>1?2-n:n,o=s*Math.cos(i),a=s*Math.sin(i);return e.x=t.x+o*t.radius,e.y=t.y+a*t.radius,e}},function(t,e,i){var r=i(130),n=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new n),e<=0||e>=1)return i.x=t.x,i.y=t.y,i;var s=r(t)*e;return e>.5?(s-=t.width+t.height)<=t.width?(i.x=t.right-s,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(s-t.width)):s<=t.width?(i.x=t.x+s,i.y=t.y):(i.x=t.right,i.y=t.y+(s-t.width)),i}},function(t,e,i){var r=i(67),n=i(4);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&i>0&&(e=r(t)/i);for(var o=t.x1,a=t.y1,h=t.x2,c=t.y2,l=0;l<e;l++){var u=l/e,d=o+(h-o)*u,f=a+(c-a)*u;s.push(new n(d,f))}return s}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e){var i=function(t){var e,r,n;if("object"!=typeof t||null===t)return t;for(n in e=Array.isArray(t)?[]:{},t)r=t[n],e[n]=i(r);return e};t.exports=i},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o,a,h){void 0===h&&(h=new r);var c=Math.sin(s),l=Math.cos(s),u=l*o,d=c*o,f=-c*a,p=l*a,g=1/(u*p+f*-d);return h.x=p*g*t+-f*g*e+(n*f-i*p)*g,h.y=u*g*e+-d*g*t+(-n*u+i*d)*g,h}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,r=0;r<e;r++)i=t.shift(),t.push(i);return i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,r=0;r<e;r++)i=t.pop(),t.unshift(i);return i}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return e.x=t.x+n*Math.cos(i)*t.width/2,e.y=t.y+n*Math.sin(i)*t.height/2,e}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=t.x2-t.x1,n=t.y2-t.y1,s=t.x3-t.x1,o=t.y3-t.y1,a=Math.random(),h=Math.random();return a+h>=1&&(a=1-a,h=1-h),e.x=t.x1+(i*a+s*h),e.y=t.y1+(n*a+o*h),e}},function(t,e){t.exports=function(t,e,i,r,n){var s=r+Math.atan2(t.y-i,t.x-e);return t.x=e+n*Math.cos(s),t.y=i+n*Math.sin(s),t}},function(t,e){t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}},function(t,e,i){var r=i(18),n=i(0),s=i(132),o=i(318),a=i(319),h=i(6),c=i(320),l=new n({initialize:function(t,e,i){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,h(i,"frames",[]),h(i,"defaultTextureKey",null),h(i,"sortFrames",!0)),this.frameRate=h(i,"frameRate",null),this.duration=h(i,"duration",null),this.msPerFrame,this.skipMissedFrames=h(i,"skipMissedFrames",!0),this.delay=h(i,"delay",0),this.repeat=h(i,"repeat",0),this.repeatDelay=h(i,"repeatDelay",0),this.yoyo=h(i,"yoyo",!1),this.showOnStart=h(i,"showOnStart",!1),this.hideOnComplete=h(i,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,i,r){null===i&&null===r?(t.frameRate=24,t.duration=24/e*1e3):i&&null===r?(t.duration=i,t.frameRate=e/(i/1e3)):(t.frameRate=r,t.duration=e/r*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var i=this.getFrames(this.manager.textureManager,e);if(i.length>0){if(0===t)this.frames=i.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(i);else{var r=this.frames.slice(0,t),n=this.frames.slice(t);this.frames=r.concat(i,n)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,i,r){void 0===r&&(r=!0);var n,s,o,l,u=[],d=1;if("string"==typeof e){l=e;var f=t.get(l).getFrameNames();r&&c(f),e=[],f.forEach((function(t){e.push({key:l,frame:t})}))}if(!Array.isArray(e)||0===e.length)return u;for(o=0;o<e.length;o++){var p=e[o],g=h(p,"key",i);if(g){var y=h(p,"frame",0),m=t.getFrame(g,y);(s=new a(g,y,d,m)).duration=h(p,"duration",0),s.isFirst=!n,n&&(n.nextFrame=s,s.prevFrame=n),u.push(s),n=s,d++}}if(u.length>0){s.isLast=!0,s.nextFrame=u[0],u[0].prevFrame=s;var v=1/(u.length-1);for(o=0;o<u.length;o++)u[o].progress=o*v}return u},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=r(t,0,1),o(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e||(e=!1),t.inReverse===!e&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=e),void this.repeatAnimation(t);if(t.inReverse===e||0!==t.repeatCounter){t.forward=e;var i=e?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,i)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,i=1/(e-1),r=0;r<e;r++)(t=this.frames[r]).index=r+1,t.isFirst=!1,t.isLast=!1,t.progress=r*i,0===r?(t.isFirst=!0,1===e?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[r+1])):r===e-1&&e>1?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):e>1&&(t.prevFrame=this.frames[r-1],t.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=l},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=" "),void 0===r&&(r=3);var n=0;if(e+1>=(t=t.toString()).length)switch(r){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var s=Math.ceil((n=e-t.length)/2);t=new Array(n-s+1).join(i)+t+new Array(s+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},function(t,e,i){var r=i(327),n=i(189),s=i(331),o=i(332);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?o(t):r(t);case"number":return n(t);case"object":return s(t)}}},function(t,e,i){var r=i(103);function n(t,e,i,r){var n=(t+6*e)%6,s=Math.min(n,4-n,1);return Math.round(255*(r-r*i*Math.max(0,s)))}t.exports=function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=1);var o=n(5,t,e,i),a=n(3,t,e,i),h=n(1,t,e,i);return s?s.setTo?s.setTo(o,a,h,s.alpha,!1):(s.r=o,s.g=a,s.b=h,s.color=r(o,a,h),s):{r:o,g:a,b:h,color:r(o,a,h)}}},function(t,e,i){var r=i(38),n=i(330);t.exports=function(t){var e=n(t);return new r(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t,e,i){return t.x=e-t.width/2,t.y=i-t.height/2,t}},function(t,e,i){var r=i(105),n=i(136),s=i(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(t){o.localStorage=!1}o.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),o.fileSystem=!!window.requestFileSystem;var t,e,i,a=!1;return o.webGL=function(){if(window.WebGLRenderingContext)try{var t=s.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=s.create2D(this),r=i.getContext("2d").createImageData(1,1);return a=r.data instanceof Uint8ClampedArray,s.remove(t),s.remove(i),!!e}catch(t){return!1}return!1}(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(o.getUserMedia=!1),!r.iOS&&(n.ie||n.firefox||n.chrome)&&(o.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(o.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),o.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==o.littleEndian&&a,o}()},function(t,e){var i,r="";t.exports={disable:function(t){return""===r&&(r=i(t)),r&&(t[r]=!1),t},enable:function(t){return""===r&&(r=i(t)),r&&(t[r]=!0),t},getPrefix:i=function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var r=e[i]+"mageSmoothingEnabled";if(r in t)return r}return null},isEnabled:function(t){return null!==r?t[r]:null}}},function(t,e,i){var r=i(14),n=i(17),s={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};s=n(!1,s,r),t.exports=s},function(t,e){t.exports=function(t,e,i,r,n){var s=.5*(r-e),o=.5*(n-i),a=t*t;return(2*i-2*r+s+o)*(t*a)+(-3*i+3*r-2*s-o)*a+s*t+i}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,i){var r=i(14);t.exports=function(t){return t*r.RAD_TO_DEG}},function(t,e,i){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,e,i){var r=new(i(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=2*t/3+1,r=-.5*(i-1);return this.multiply([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=.213,s=.715,o=.072;return this.multiply([n+.787*i+r*-n,s+i*-s+r*-s,o+i*-o+.928*r,0,0,n+i*-n+.143*r,s+i*(1-s)+.14*r,o+i*-o+-.283*r,0,0,n+i*-n+-.787*r,s+i*-s+r*s,o+.928*i+r*o,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t+1,r=-.5*(i-1);return this.multiply([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,e){e||this.reset();for(var i=this._matrix,r=[],n=0;n<20;n++)r[n]=i[n];return i[0]=r[0]*t[0]+r[1]*t[5]+r[2]*t[10]+r[3]*t[15],i[1]=r[0]*t[1]+r[1]*t[6]+r[2]*t[11]+r[3]*t[16],i[2]=r[0]*t[2]+r[1]*t[7]+r[2]*t[12]+r[3]*t[17],i[3]=r[0]*t[3]+r[1]*t[8]+r[2]*t[13]+r[3]*t[18],i[4]=r[0]*t[4]+r[1]*t[9]+r[2]*t[14]+r[3]*t[19]+r[4],i[5]=r[5]*t[0]+r[6]*t[5]+r[7]*t[10]+r[8]*t[15],i[6]=r[5]*t[1]+r[6]*t[6]+r[7]*t[11]+r[8]*t[16],i[7]=r[5]*t[2]+r[6]*t[7]+r[7]*t[12]+r[8]*t[17],i[8]=r[5]*t[3]+r[6]*t[8]+r[7]*t[13]+r[8]*t[18],i[9]=r[5]*t[4]+r[6]*t[9]+r[7]*t[14]+r[8]*t[19]+r[9],i[10]=r[10]*t[0]+r[11]*t[5]+r[12]*t[10]+r[13]*t[15],i[11]=r[10]*t[1]+r[11]*t[6]+r[12]*t[11]+r[13]*t[16],i[12]=r[10]*t[2]+r[11]*t[7]+r[12]*t[12]+r[13]*t[17],i[13]=r[10]*t[3]+r[11]*t[8]+r[12]*t[13]+r[13]*t[18],i[14]=r[10]*t[4]+r[11]*t[9]+r[12]*t[14]+r[13]*t[19]+r[14],i[15]=r[15]*t[0]+r[16]*t[5]+r[17]*t[10]+r[18]*t[15],i[16]=r[15]*t[1]+r[16]*t[6]+r[17]*t[11]+r[18]*t[16],i[17]=r[15]*t[2]+r[16]*t[7]+r[17]*t[12]+r[18]*t[17],i[18]=r[15]*t[3]+r[16]*t[8]+r[17]*t[13]+r[18]*t[18],i[19]=r[15]*t[4]+r[16]*t[9]+r[17]*t[14]+r[18]*t[19]+r[19],this._dirty=!0,this}});t.exports=r},function(t,e,i){var r=i(10),n=i(14);t.exports=function(t,e){if(void 0===e&&(e=new r),0===t.length)return e;for(var i,s,o,a=Number.MAX_VALUE,h=Number.MAX_VALUE,c=n.MIN_SAFE_INTEGER,l=n.MIN_SAFE_INTEGER,u=0;u<t.length;u++)i=t[u],Array.isArray(i)?(s=i[0],o=i[1]):(s=i.x,o=i.y),a=Math.min(a,s),h=Math.min(h,o),c=Math.max(c,s),l=Math.max(l,o);return e.x=a,e.y=h,e.width=c-a,e.height=l-h,e}},function(t,e,i){var r=i(0),n=i(1),s=new r({initialize:function(t,e,i){this._rgb=[0,0,0],this.onChangeCallback=n,this.dirty=!1,this.set(t,e,i)},set:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._rgb=[t,e,i],this.onChange(),this},equals:function(t,e,i){var r=this._rgb;return r.r===t&&r.g===e&&r.b===i},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=s},function(t,e,i){var r={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};t.exports=r},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,i){var r=i(0),n=i(144),s=i(197),o=i(20),a=i(419),h=i(420),c=i(33),l=i(1),u=i(421),d=new r({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=u.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(t){this.settings.status=n.INIT,this.sceneUpdate=l,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;this.plugins=e,e.addToScene(this,s.Global,[s.CoreScene,h(this),a(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var i=this.events;i.emit(o.PRE_UPDATE,t,e),i.emit(o.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),i.emit(o.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(o.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(o.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.events,i=this.settings;return this.settings.active&&(i.status=n.PAUSED,i.active=!1,e.emit(o.PAUSE,this,t)),this},resume:function(t){var e=this.events,i=this.settings;return this.settings.active||(i.status=n.RUNNING,i.active=!0,e.emit(o.RESUME,this,t)),this},sleep:function(t){var e=this.events,i=this.settings;return i.status=n.SLEEPING,i.active=!1,i.visible=!1,e.emit(o.SLEEP,this,t),this},wake:function(t){var e=this.events,i=this.settings;return i.status=n.RUNNING,i.active=!0,i.visible=!0,e.emit(o.WAKE,this,t),i.isTransition&&e.emit(o.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===n.SLEEPING},isActive:function(){return this.settings.status===n.RUNNING},isPaused:function(){return this.settings.status===n.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,i=this.settings;t&&(i.data=t),i.status=n.START,i.active=!0,i.visible=!0,e.emit(o.START,this),e.emit(o.READY,this,t)},shutdown:function(t){var e=this.events,i=this.settings;e.off(o.TRANSITION_INIT),e.off(o.TRANSITION_START),e.off(o.TRANSITION_COMPLETE),e.off(o.TRANSITION_OUT),i.status=n.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===c.WEBGL&&this.renderer.resetTextures(!0),e.emit(o.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=n.DESTROYED,e.active=!1,e.visible=!1,t.emit(o.DESTROY,this),t.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<i.length;r++)this[i[r]]=null}});t.exports=d},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,i){var r=i(33),n=i(0),s=i(109),o=i(424),a="Texture.frame missing: ",h=new n({initialize:function(t,e,i,r,n){Array.isArray(i)||(i=[i]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var s=0;s<i.length;s++)this.source.push(new o(this,i[s],r,n))},add:function(t,e,i,r,n,o){if(this.has(t))return null;var a=new s(this,t,e,i,r,n,o);return this.frames[t]=a,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,a},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var e=this.frames[t];return e||(console.warn(a+t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var i=[];for(var r in this.frames)if("__BASE"!==r||e){var n=this.frames[r];n.sourceIndex===t&&i.push(n)}return i},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);if(!t){var i=e.indexOf("__BASE");-1!==i&&e.splice(i,1)}return e},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn(a+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e,i=this.frames[t];return i?e=i.sourceIndex:(console.warn(a+t),e=this.frames.__BASE.sourceIndex),this.dataSource[e].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this.source[e];this.dataSource.push(new o(this,t[e],i.width,i.height))}},setFilter:function(t){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames)this.frames[e].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var i=this.manager.game.renderer;i&&i.type===r.WEBGL&&i.resetTextures(!0),this.manager=null}});t.exports=h},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var o=[];if(r(t,n,s))for(var a=n;a<s;a++){var h=t[a];(!e||e&&void 0===i&&h.hasOwnProperty(e)||e&&void 0!==i&&h[e]===i)&&o.push(h)}return o}},function(t,e,i){t.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var r=e+Math.floor(Math.random()*i);return void 0===t[r]?null:t[r]}},function(t,e,i){var r=i(0),n=i(9),s=i(438),o=new r({Extends:n,initialize:function(){n.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,e,i=this._destroy,r=this._active;for(t=0;t<i.length;t++){e=i[t];var n=r.indexOf(e);-1!==n&&(r.splice(n,1),this.emit(s.PROCESS_QUEUE_REMOVE,e))}for(i.length=0,i=this._pending,t=0;t<i.length;t++)e=i[t],(!this.checkQueue||this.checkQueue&&-1===r.indexOf(e))&&(r.push(e),this.emit(s.PROCESS_QUEUE_ADD,e));return i.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=o},function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,r,n,s){void 0===r&&(r=0),void 0===n&&(n=0);var o=e.cutX,a=e.cutY,h=e.source.width,c=e.source.height,l=e.sourceIndex,u={},d=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];u.font=d.getAttribute("face"),u.size=i(d,"size"),u.lineHeight=i(f,"lineHeight")+n,u.chars={};var p=t.getElementsByTagName("char"),g=void 0!==e&&e.trimmed;if(g)var y=e.height,m=e.width;for(var v=0;v<p.length;v++){var b=p[v],w=i(b,"id"),_=String.fromCharCode(w),x=i(b,"x"),E=i(b,"y"),S=i(b,"width"),T=i(b,"height");g&&(x<m&&(m=x),E<y&&(y=E)),g&&0!==y&&0!==m&&(x-=e.x,E-=e.y);var A=(o+x)/h,C=(a+E)/c,k=(o+x+S)/h,R=(a+E+T)/c;if(u.chars[w]={x,y:E,width:S,height:T,centerX:Math.floor(S/2),centerY:Math.floor(T/2),xOffset:i(b,"xoffset"),yOffset:i(b,"yoffset"),xAdvance:i(b,"xadvance")+r,data:{},kerning:{},u0:A,v0:C,u1:k,v1:R},s&&0!==S&&0!==T){var P=s.add(_,l,x,E,S,T);P&&P.setUVs(S,T,A,C,k,R)}}var I=t.getElementsByTagName("kerning");for(v=0;v<I.length;v++){var O=I[v],M=i(O,"first"),D=i(O,"second"),B=i(O,"amount");u.chars[D].kerning[M]=B}return u}},function(t,e,i){var r=i(1049),n=i(440),s=i(0),o=i(11),a=i(109),h=i(15),c=i(110),l=new s({Extends:h,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,r],initialize:function(t,e,i,r,n){h.call(this,t,"Blitter"),this.setTexture(r,n),this.setPosition(e,i),this.initPipeline(),this.children=new c,this.renderList=[],this.dirty=!1},create:function(t,e,i,r,s){void 0===r&&(r=!0),void 0===s&&(s=this.children.length),void 0===i?i=this.frame:i instanceof a||(i=this.texture.get(i));var o=new n(this,t,e,i,r);return this.children.addAt(o,s,!1),this.dirty=!0,o},createFromCallback:function(t,e,i,r){for(var n=this.createMultiple(e,i,r),s=0;s<n.length;s++){var o=n[s];t.call(this,o,s)}return n},createMultiple:function(t,e,i){void 0===e&&(e=this.frame.name),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var r=[],n=this;return e.forEach((function(e){for(var s=0;s<t;s++)r.push(n.create(0,0,e,i))})),r},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=l},function(t,e,i){var r=i(208),n=i(35),s=i(0),o=i(11),a=i(75),h=i(15),c=i(10),l=i(1052),u=i(441),d=i(3),f=new s({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,l],initialize:function(t,e,i,r){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new c),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var i=this.list,r=new c,n=!1;t.setEmpty();for(var s=0;s<i.length;s++){var o=i[s];o.getBounds&&(o.getBounds(r),n?u(r,t,t):(t.setTo(r.x,r.y,r.width,r.height),n=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(a.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new d(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return r.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return r.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),r.StableSort(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,i,n){return r.GetFirst(this.list,t,e,i,n)},getAll:function(t,e,i,n){return r.GetAll(this.list,t,e,i,n)},count:function(t,e,i,n){return r.CountAllMatching(this.list,t,e,i,n)},swap:function(t,e){return r.Swap(this.list,t,e),this},moveTo:function(t,e){return r.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return r.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return r.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=r.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)i[n].destroy()}return this},removeAt:function(t,e){var i=r.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var n=r.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var s=0;s<n.length;s++)n[s].destroy();return this},removeAll:function(t){var e=r.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return r.BringToTop(this.list,t),this},sendToBack:function(t){return r.SendToBack(this.list,t),this},moveUp:function(t){return r.MoveUp(this.list,t),this},moveDown:function(t){return r.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e,i){return r.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,n){return r.SetAll(this.list,t,e,i,n),this},each:function(t,e){var i,r=[null],n=this.list.slice(),s=n.length;for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<s;i++)r[0]=n[i],t.apply(e,r);return this},iterate:function(t,e){var i,r=[null];for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<this.list.length;i++)r[0]=this.list[i],t.apply(e,r);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(r.SetAll(this.list,"scrollFactorX",t),r.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=f},function(t,e,i){var r=i(148),n=i(0),s=i(1057),o=new n({Extends:r,Mixins:[s],initialize:function(t,e,i,n,s,o,a){r.call(this,t,e,i,n,s,o,a),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=o},function(t,e,i){var r=i(133),n=i(0),s=i(217),o=i(303),a=i(304),h=i(305),c=i(309),l=i(167),u=i(312),d=i(313),f=i(314),p=i(111),g=i(15),y=i(2),m=i(6),v=i(14),b=i(1063),w=new n({Extends:g,Mixins:[o,a,h,c,l,d,f,u,b],initialize:function(t,e){var i=m(e,"x",0),r=m(e,"y",0);g.call(this,t,"Graphics"),this.setPosition(i,r),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return m(t,"lineStyle",null)&&(this.defaultStrokeWidth=m(t,"lineStyle.width",1),this.defaultStrokeColor=m(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(t,"fillStyle",null)&&(this.defaultFillColor=m(t,"fillStyle.color",16777215),this.defaultFillAlpha=m(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(s.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(s.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,r,n,o,a,h){return void 0===n&&(n=1),void 0===o&&(o=n),void 0===a&&(a=n),void 0===h&&(h=n),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,n,o,a,h,t,e,i,r),this},lineGradientStyle:function(t,e,i,r,n,o){return void 0===o&&(o=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,t,o,e,i,r,n),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,v.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,v.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,r){return this.commandBuffer.push(s.FILL_RECT,t,e,i,r),this},strokeRect:function(t,e,i,r){var n=this._lineWidth/2,s=t-n,o=t+n;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+r),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+r),this.strokePath(),this.beginPath(),this.moveTo(s,e),this.lineTo(o+i,e),this.strokePath(),this.beginPath(),this.moveTo(s,e+r),this.lineTo(o+i,e+r),this.strokePath(),this},fillRoundedRect:function(t,e,i,r,n){void 0===n&&(n=20);var s=n,o=n,a=n,h=n;return"number"!=typeof n&&(s=y(n,"tl",20),o=y(n,"tr",20),a=y(n,"bl",20),h=y(n,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-o,e),this.arc(t+i-o,e+o,o,-v.TAU,0),this.lineTo(t+i,e+r-h),this.arc(t+i-h,e+r-h,h,0,v.TAU),this.lineTo(t+a,e+r),this.arc(t+a,e+r-a,a,v.TAU,Math.PI),this.lineTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-v.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,r,n){void 0===n&&(n=20);var s=n,o=n,a=n,h=n;return"number"!=typeof n&&(s=y(n,"tl",20),o=y(n,"tr",20),a=y(n,"bl",20),h=y(n,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-o,e),this.moveTo(t+i-o,e),this.arc(t+i-o,e+o,o,-v.TAU,0),this.lineTo(t+i,e+r-h),this.moveTo(t+i,e+r-h),this.arc(t+i-h,e+r-h,h,0,v.TAU),this.lineTo(t+a,e+r),this.moveTo(t+a,e+r),this.arc(t+a,e+r-a,a,v.TAU,Math.PI),this.lineTo(t,e+s),this.moveTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-v.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(s.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,r,n,o){return this.commandBuffer.push(s.FILL_TRIANGLE,t,e,i,r,n,o),this},strokeTriangle:function(t,e,i,r,n,o){return this.commandBuffer.push(s.STROKE_TRIANGLE,t,e,i,r,n,o),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,r){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,r),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(s.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(s.MOVE_TO,t,e),this},strokePoints:function(t,e,i,r){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<r;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,r){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<r;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,r,n){void 0===n&&(n=32);var s=new p(t,e,i,r).getPoints(n);return this.strokePoints(s,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,r,n){void 0===n&&(n=32);var s=new p(t,e,i,r).getPoints(n);return this.fillPoints(s,!0)},arc:function(t,e,i,r,n,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.commandBuffer.push(s.ARC,t,e,i,r,n,o,a),this},slice:function(t,e,i,r,n,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,t,e),this.commandBuffer.push(s.ARC,t,e,i,r,n,o,a),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(s.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(s.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(s.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var r,n,s=this.scene.sys,o=s.game.renderer;if(void 0===e&&(e=s.scale.width),void 0===i&&(i=s.scale.height),w.TargetCamera.setScene(this.scene),w.TargetCamera.setViewport(0,0,e,i),w.TargetCamera.scrollX=this.x,w.TargetCamera.scrollY=this.y,"string"==typeof t)if(s.textures.exists(t)){var a=(r=s.textures.get(t)).getSourceImage();a instanceof HTMLCanvasElement&&(n=a.getContext("2d"))}else n=(r=s.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(n=t.getContext("2d"));return n&&(this.renderCanvas(o,this,w.TargetCamera,null,n,!1),r&&r.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});w.TargetCamera=new r,t.exports=w},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.width/2,s=t.height/2;return i.x=t.x+n*Math.cos(e),i.y=t.y+s*Math.sin(e),i}},function(t,e,i){var r=i(35),n=i(0),s=i(11),o=i(176),a=i(101),h=i(9),c=i(75),l=i(110),u=i(1071),d=i(20),f=i(79),p=new n({Extends:l,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Visible,h,u],initialize:function(t,e){l.call(this,t),h.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,e){return this.data||(this.data=new a(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new a(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return i.unshift(this.displayList.getIndex(t)),i},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(c.ADDED_TO_SCENE,t,this.scene),this.events.emit(d.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(c.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(c.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=p},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(450),a=i(110),h=i(452),c=i(1075),l=new r({Extends:s,Mixins:[n.Depth,n.Mask,n.Pipeline,n.Transform,n.Visible,c],initialize:function(t,e,i,r){if(s.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(r=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new a(this),this.wells=new a(this),r){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++)this.createEmitter(r[n])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return e.forEach((function(t){i.push(t.name)})),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var i=e.frames;i.length=0;for(var r=0;r<t.length;r++){var n=t[r];-1!==this.frameNames.indexOf(n)&&i.push(this.texture.get(n))}return i.length>0?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new h(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new o(t))},emitParticle:function(t,e,i){for(var r=this.emitters.list,n=0;n<r.length;n++){var s=r[n];s.active&&s.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,r=0;r<i.length;r++){var n=i[r];n.active&&n.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=l},function(t,e,i){var r=i(35),n=i(133),s=i(31),o=i(0),a=i(11),h=i(33),c=i(109),l=i(15),u=i(1),d=i(92),f=i(1079),p=i(141),g=i(12),y=i(222),m=new o({Extends:l,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,f],initialize:function(t,e,i,r,o,a,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=32),void 0===o&&(o=32),l.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===a?(this.canvas=s.create2D(this,r,o),this.texture=t.sys.textures.addCanvas(y(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(c),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new n(0,0,r,o),this.renderTarget=null;var f=this.renderer;f?f.type===h.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new p(f,r,o,1,0,!1)):f.type===h.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=u,this.camera.setScene(t),this.setPosition(e,i),void 0===a&&this.setSize(r,o),this.setOrigin(0,0),this.initPipeline(d.SINGLE_PIPELINE)},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){void 0===e&&(e=t);var i=this.frame;if(t!==this.width||e!==this.height){if("__BASE"===i.name){this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e;var r=this.renderTarget;r&&(r.resize(t,e),i.glTexture=r.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=r.texture),this.camera.setSize(t,e),i.source.width=t,i.source.height=e,i.setSize(t,e),this.width=t,this.height=e}}else{var n=this.texture.getSourceImage();i.cutX+t>n.width&&(t=n.width-i.cutX),i.cutY+e>n.height&&(e=n.height-i.cutY),i.setSize(t,e,i.cutX,i.cutY)}this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,i,r,n,s){var o=this.frame,a=this.camera,h=this.renderer;void 0===e&&(e=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=o.cutWidth),void 0===s&&(s=o.cutHeight);var c=(t>>16&255)/255,l=(t>>8&255)/255,u=(255&t)/255,d=this.renderTarget;if(a.preRender(),d){d.bind(!0);var f=this.pipeline;f.manager.set(f);var p=d.width,y=d.height,m=h.width/p,v=h.height/y;f.drawFillRect(i*m,r*v,n*m,s*v,g.getTintFromFloats(u,l,c,1),e),d.unbind(!0)}else{var b=this.context;h.setContext(b),b.fillStyle="rgba("+c+","+l+","+u+","+e+")",b.fillRect(i+o.cutX,r+o.cutY,n,s),h.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var e=this.context;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.restore()}this.dirty=!1}return this},erase:function(t,e,i){return this._eraseMode=!0,this.draw(t,e,i,1,16777215),this._eraseMode=!1,this},draw:function(t,e,i,r,n){return this.beginDraw(),this.batchDraw(t,e,i,r,n),this.endDraw(),this},drawFrame:function(t,e,i,r,n,s){return this.beginDraw(),this.batchDrawFrame(t,e,i,r,n,s),this.endDraw(),this},beginDraw:function(){var t=this.camera,e=this.renderer,i=this.renderTarget;return t.preRender(),i?e.beginCapture(i.width,i.height):e.setContext(this.context),this},batchDraw:function(t,e,i,r,n){return void 0===r&&(r=this.globalAlpha),n=void 0===n?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(n>>16)+(65280&n)+((255&n)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,e,i,r,n),this},batchDrawFrame:function(t,e,i,r,n,s){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.globalAlpha),s=void 0===s?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(s>>16)+(65280&s)+((255&s)<<16);var o=this.textureManager.getFrame(t,e);return o&&(this.renderTarget?this.pipeline.batchTextureFrame(o,i,r,s,n,this.camera.matrix,null):this.batchTextureFrame(o,i+this.frame.cutX,r+this.frame.cutY,n,s)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var e=this.renderer,i=this.renderTarget;if(i){var r=e.endCapture();e.pipelines.setUtility().blitFrame(r,i,1,!1,!1,t),e.resetScissor(),e.resetViewport()}else e.setContext();return this.dirty=!0,this},batchList:function(t,e,i,r,n){for(var s=0;s<t.length;s++){var o=t[s];o&&o!==this&&(o.renderWebGL||o.renderCanvas?this.drawGameObject(o,e,i):o.isParent||o.list?this.batchGroup(o.getChildren(),e,i):"string"==typeof o?this.batchTextureFrameKey(o,null,e,i,r,n):o instanceof c?this.batchTextureFrame(o,e,i,r,n):Array.isArray(o)&&this.batchList(o,e,i,r,n))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY;for(var r=0;r<t.length;r++){var n=t[r];if(n.willRender(this.camera)){var s=n.x+e,o=n.y+i;this.drawGameObject(n,s,o)}}},batchGameObjectWebGL:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var r=t.x,n=t.y;t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(r,n)},batchGameObjectCanvas:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var n=t.x,s=t.y;if(this._eraseMode){var o=t.blendMode;t.blendMode=r.ERASE}t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(n,s),this._eraseMode&&(t.blendMode=o)},batchTextureFrameKey:function(t,e,i,r,n,s){var o=this.textureManager.getFrame(t,e);o&&this.batchTextureFrame(o,i,r,n,s)},batchTextureFrame:function(t,e,i,r,n){if(void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,e,i,n,r,this.camera.matrix,null);else{var s=this.context,o=t.canvasData,a=t.source.image,h=this.camera.matrix;s.save(),s.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",s.globalAlpha=r,h.setToContext(s),s.drawImage(a,o.x,o.y,o.width,o.height,e,i,o.width,o.height),s.restore()}},snapshotArea:function(t,e,i,r,n,s,o){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!1,t,e,i,r,s,o):this.renderer.snapshotCanvas(this.canvas,n,!1,t,e,i,r,s,o),this},snapshot:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,i):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,i),this},snapshotPixel:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,t,e):this.renderer.snapshotCanvas(this.canvas,i,!0,t,e),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=m},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,i){var r=i(164),n=i(0),s=i(11),o=i(15),a=i(92),h=i(1085),c=i(3),l=new n({Extends:o,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,h],initialize:function(t,e,i,n,s,h,l,u,d){void 0===n&&(n="__DEFAULT"),void 0===h&&(h=2),void 0===l&&(l=!0),o.call(this,t,"Rope"),this.anims=new r(this),this.points=h,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n,this.dirty=!1,this.horizontal=l,this._flipX=!1,this._flipY=!1,this._perp=new c,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,s),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),Array.isArray(h)&&this.resizeArrays(h.length),this.setPoints(h,u,d),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var i=this.points.length;if(i<1)return this;var r,n=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var s=0;if(void 0!==e)for(r=0;r<i;r++)n[s=2*r]=t,n[s+1]=e;else if(t.length===i)for(r=0;r<i;r++)n[s=2*r]=t[r],n[s+1]=t[r];else{var o=t[0];for(r=0;r<i;r++)s=2*r,t.length>s&&(o=t[s]),n[s]=o,t.length>s+1&&(o=t[s+1]),n[s+1]=o}return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var i,r=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var n=0;if(t.length===e)for(i=0;i<e;i++)r[n=2*i]=t[i],r[n+1]=t[i];else{var s=t[0];for(i=0;i<e;i++)n=2*i,t.length>n&&(s=t[n]),r[n]=s,t.length>n+1&&(s=t[n+1]),r[n+1]=s}return this},setPoints:function(t,e,i){if(void 0===t&&(t=2),"number"==typeof t){var r,n,s,o=t;if(o<2&&(o=2),t=[],this.horizontal)for(s=-this.frame.halfWidth,n=this.frame.width/(o-1),r=0;r<o;r++)t.push({x:s+r*n,y:0});else for(s=-this.frame.halfHeight,n=this.frame.height/(o-1),r=0;r<o;r++)t.push({x:0,y:s+r*n})}var a=t.length,h=this.points.length;return a<1?(console.warn("Rope: Not enough points given"),this):(1===a&&(t.unshift({x:0,y:0}),a++),h!==a&&this.resizeArrays(a),this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i),this)},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,r=this.frame.v0,n=this.frame.u1,s=this.frame.v1,o=(n-i)/(e-1),a=(s-r)/(e-1),h=0;h<e;h++){var c,l,u,d,f=4*h;this.horizontal?(this._flipX?(c=n-h*o,u=n-h*o):(c=i+h*o,u=i+h*o),this._flipY?(l=s,d=r):(l=r,d=s)):(this._flipX?(c=i,u=n):(c=n,u=i),this._flipY?(l=s-h*a,d=s-h*a):(l=r+h*a,d=r+h*a)),t[f+0]=c,t[f+1]=l,t[f+2]=u,t[f+3]=d}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),i=new Float32Array(2*t);for(var r=0;r<2*t;r++)e[r]=16777215,i[r]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,r=e.length;if(this.dirty=!1,!(r<1)){for(var n,s=e[0],o=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,a=0;a<r;a++){var h=e[a],c=4*a;n=a<r-1?e[a+1]:h,t.x=n.y-s.y,t.y=-(n.x-s.x);var l=t.length();t.x/=l,t.y/=l,t.x*=o,t.y*=o,i[c]=h.x+t.x,i[c+1]=h.y+t.y,i[c+2]=h.x-t.x,i[c+3]=h.y-t.y,s=h}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var r=t.debugGraphic,n=i[0],s=i[1],o=i[2],a=i[3];r.lineBetween(n,s,o,a);for(var h=4;h<e;h+=4){var c=i[h+0],l=i[h+1],u=i[h+2],d=i[h+3];r.lineBetween(n,s,c,l),r.lineBetween(o,a,u,d),r.lineBetween(o,a,c,l),r.lineBetween(c,l,u,d),n=c,s=l,o=u,a=d}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=l},function(t,e,i){var r=i(142),n=i(31),s=i(0),o=i(11),a=i(22),h=i(15),c=i(458),l=i(6),u=i(202),d=i(1088),f=i(459),p=new s({Extends:h,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,d],initialize:function(t,e,i,r,s){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=n.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,s),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(r),s&&s.padding&&this.setPadding(s.padding),s&&s.lineSpacing&&this.setLineSpacing(s.lineSpacing),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var r="",n=t.replace(/ +/gi," ").split(this.splitRegExp),s=n.length,o=0;o<s;o++){var a=n[o],h="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<i)r+=a+"\n";else{for(var c=i,l=a.split(" "),u=0;u<l.length;u++){var d=l[u],f=d+" ",p=e.measureText(f).width;if(p>c){if(0===u){for(var g=f;g.length&&(g=g.slice(0,-1),!((p=e.measureText(g).width)<=c)););if(!g.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var y=d.substr(g.length);l[u]=y,h+=g}var m=l[u].length?u:u+1,v=l.slice(m).join(" ").replace(/[ \n]*$/gi,"");n[o+1]=v+" "+(n[o+1]||""),s=n.length;break}h+=f,c-=p}r+=h.replace(/[ \n]*$/gi,"")+"\n"}}return r.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var r="",n=t.split(this.splitRegExp),s=n.length-1,o=e.measureText(" ").width,a=0;a<=s;a++){for(var h=i,c=n[a].split(" "),l=c.length-1,u=0;u<=l;u++){var d=c[u],f=e.measureText(d).width,p=f;u<l&&(p+=o),p>h&&u>0&&(r+="\n",h=i),r+=d,u<l?(r+=" ",h-=p):h-=f}a<s&&(r+="\n")}return r},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,r,n,s){return this.style.setShadow(t,e,i,r,n,s)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,r){if("object"==typeof t){var n=t,s=l(n,"x",null);null!==s?(t=s,i=s):(t=l(n,"left",0),i=l(n,"right",t));var o=l(n,"y",null);null!==o?(e=o,r=o):(e=l(n,"top",0),r=l(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===r&&(r=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=r,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,r=i.resolution,n=i.metrics;i.syncFont(t,e);var s=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(s=this.runWordWrap(this._text));var o,a=s.split(this.splitRegExp),h=c(this,n,a),l=this.padding;0===i.fixedWidth?(this.width=h.width+l.left+l.right,o=h.width):(this.width=i.fixedWidth,(o=this.width-l.left-l.right)<h.width&&(o=h.width)),0===i.fixedHeight?this.height=h.height+l.top+l.bottom:this.height=i.fixedHeight;var u,d,f=this.width,p=this.height;this.updateDisplayOrigin(),f*=r,p*=r,f=Math.max(f,1),p=Math.max(p,1),t.width!==f||t.height!==p?(t.width=f,t.height=p,this.frame.setSize(f,p),i.syncFont(t,e)):e.clearRect(0,0,f,p),e.save(),e.scale(r,r),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,f,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(l.left,l.top);for(var g=0;g<h.lines;g++){if(u=i.strokeThickness/2,d=i.strokeThickness/2+g*h.lineHeight+n.ascent,g>0&&(d+=h.lineSpacing*g),i.rtl)u=f-u;else if("right"===i.align)u+=o-h.lineWidths[g];else if("center"===i.align)u+=(o-h.lineWidths[g])/2;else if("justify"===i.align&&h.lineWidths[g]/h.width>=.85){var y=h.width-h.lineWidths[g],m=e.measureText(" ").width,v=a[g].trim(),b=v.split(" ");y+=(a[g].length-v.length)*m;for(var w=Math.floor(y/m),_=0;w>0;)b[_]+=" ",_=(_+1)%(b.length-1||1),--w;a[g]=b.join(" ")}this.autoRound&&(u=Math.round(u),d=Math.round(d)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(a[g],u,d)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(a[g],u,d))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var x=this.input;return x&&!x.customHitArea&&(x.hitArea.width=this.width,x.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=o.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&u(this.canvas),n.remove(this.canvas),this.texture.destroy()}});t.exports=p},function(t,e,i){var r=i(31),n=i(0),s=i(11),o=i(22),a=i(15),h=i(361),c=i(192),l=i(1091),u=i(3),d=new n({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,l],initialize:function(t,e,i,n,s,c,l){var d=t.sys.renderer;a.call(this,t,"TileSprite");var f=t.sys.textures.get(c),p=f.get(l);n&&s?(n=Math.floor(n),s=Math.floor(s)):(n=p.width,s=p.height),this._tilePosition=new u,this._tileScale=new u(1,1),this.dirty=!1,this.renderer=d,this.canvas=r.create(this,n,s),this.context=this.canvas.getContext("2d"),this.displayTexture=f,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(p.width),this.potHeight=h(p.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(n,s),this.setFrame(l),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(o.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=h(e.width),this.potHeight=h(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,r=this.potWidth,n=this.potHeight;this.renderer&&this.renderer.gl||(r=t.cutWidth,n=t.cutHeight),e.clearRect(0,0,r,n),i.width=r,i.height=n,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,r,n),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||c.disable(e);var i=this._tileScale.x,r=this._tileScale.y,n=this._tilePosition.x,s=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(i,r),e.translate(-n,-s),e.fillStyle=this.fillPattern,e.fillRect(n,s,this.width/i,this.height/r),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=d},function(t,e,i){var r=i(0),n=i(18),s=i(11),o=i(75),a=i(22),h=i(51),c=i(15),l=i(70),u=i(222),d=i(1094),f=i(14),p=new r({Extends:c,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,d],initialize:function(t,e,i,r){c.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=u(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,i),this.initPipeline(),r&&this.changeSource(r,!1);var n=t.sys.game.events;n.on(a.PAUSE,this.globalPause,this),n.on(a.RESUME,this.globalResume,this);var s=t.sys.sound;s&&s.on(l.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,e,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;void 0===t&&(t=r.loop);var n=this.scene.sys.sound;n&&n.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(i)&&i>e&&(this._markerOut=i),r.loop=t;var s=this._callbacks,o=r.play();return void 0!==o?o.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",s.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",s.end,!0),r.addEventListener("timeupdate",s.time,!0),r.addEventListener("seeking",s.seeking,!0),r.addEventListener("seeked",s.seeked,!0),this},changeSource:function(t,e,i,r,n){void 0===e&&(e=!0),this.video&&this.stop();var s=this.scene.sys.cache.video.get(t);return s?(this.video=s,this._cacheKey=t,this._codePaused=s.paused,this._codeMuted=s.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,s,s.videoWidth,s.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,s.videoWidth,s.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,s.videoWidth,s.videoHeight)):this.updateTexture(),s.currentTime=0,this._lastUpdate=0,e&&this.play(i,r,n)):this.video=null,this},addMarker:function(t,e,i){return!isNaN(e)&&e>=0&&!isNaN(i)&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){var i=this.markers[t];return i&&this.play(e,i[0],i[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,r,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===r&&(r=this.height),void 0===n&&(n=i),void 0===s&&(s=r);var o=this.video,a=this.snapshotTexture;return a?(a.setSize(n,s),o&&a.context.drawImage(o,t,e,i,r,0,0,n,s)):(a=this.scene.sys.textures.createCanvas(u(),n,s),this.snapshotTexture=a,o&&a.context.drawImage(o,t,e,i,r,0,0,n,s)),a.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");return r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0),r.src=t,r.load(),this.video=r,this},loadMediaStream:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=t}catch(e){r.src=window.URL.createObjectURL(t)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(h.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(o.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var e=t.currentTime;e!==this._lastUpdate&&(this._lastUpdate=e,this.updateTexture(),e>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=e,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,e=t.videoWidth,i=t.videoHeight;if(this.videoTexture){var r=this.videoTextureSource;r.source!==t&&(r.source=t,r.width=e,r.height=i),r.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,e,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,e,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,e,i)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e=this.video;if(e){var i=e.duration;if(i!==1/0&&!isNaN(i)){var r=i*t;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e=this.video;if(e){if("string"==typeof t){var i=t[0],r=parseFloat(t.substr(1));"+"===i?t=e.currentTime+r:"-"===i&&(t=e.currentTime-r)}e.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,i=t.duration;if(i!==1/0&&!isNaN(i))return e/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=n(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var i in e)t.removeEventListener(i,e[i],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(a.PAUSE,this.globalPause,this),t.off(a.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(l.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=p},function(t,e,i){var r=i(0),n=i(228),s=i(470),o=i(56),a=new r({initialize:function(t){this.type=o.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return n(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,i=Number.MAX_VALUE,r=0;r<t.length;r++)e={x:0,y:0},"number"==typeof t[r]||"string"==typeof t[r]?(e.x=parseFloat(t[r]),e.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(e.x=t[r][0],e.y=t[r][1]):(e.x=t[r].x,e.y=t[r].y),this.points.push(e),e.y<i&&(i=e.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,i=0,r=0;r<this.points.length-1;r++)t=this.points[r],i+=((e=this.points[r+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],i+=(t.x-e.x)*(e.y+t.y),this.area=.5*-i,this.area},getPoints:function(t,e,i){return s(this,t,e,i)}});t.exports=a},function(t,e){t.exports=function(t,e,i){for(var r=!1,n=-1,s=t.points.length-1;++n<t.points.length;s=n){var o=t.points[n].x,a=t.points[n].y,h=t.points[s].x,c=t.points[s].y;(a<=i&&i<c||c<=i&&i<a)&&e<(h-o)*(i-a)/(c-a)+o&&(r=!r)}return r}},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(2),a=i(17),h=i(478),c=i(1176),l=i(25),u=new r({Extends:s,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,c],initialize:function(t,e,i,r,n,o,a,h){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=128),void 0===o&&(o=128),s.call(this,t,"Shader"),this.blendMode=-1,this.shader;var c=t.sys.renderer;this.renderer=c,this.gl=c.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=c.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=c.width,this._rendererHeight=c.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,r),this.setSize(n,o),this.setOrigin(.5,.5),this.setShader(e,a,h)},willRender:function(t){return!!this.renderToTexture||!(s.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){if(void 0===e&&(e=!1),!this.renderToTexture){var i=this.width,r=this.height,n=this.renderer;this.glTexture=n.createTextureFromSource(null,i,r,0),this.glTexture.flipY=e,this.framebuffer=n.createFramebuffer(i,r,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,i,r))}return this.shader&&(n.pipelines.clear(),this.load(),this.flush(),n.pipelines.rebind()),this},setShader:function(t,e,i){if(void 0===e&&(e=[]),"string"==typeof t){var r=this.scene.sys.cache.shader;if(!r.has(t))return console.warn("Shader missing: "+t),this;this.shader=r.get(t)}else this.shader=t;var n=this.gl,s=this.renderer;this.program&&n.deleteProgram(this.program);var o=s.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.uniformMatrix4fv(n.getUniformLocation(o,"uViewMatrix"),!1,this.viewMatrix),n.uniformMatrix4fv(n.getUniformLocation(o,"uProjectionMatrix"),!1,this.projectionMatrix),n.uniform2f(n.getUniformLocation(o,"uResolution"),this.width,this.height),this.program=o;var h=new Date,c={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),60*h.getHours()*60+60*h.getMinutes()+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,c):this.uniforms=c;for(var l=0;l<4;l++)e[l]&&this.setSampler2D("iChannel"+l,e[l],l,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,r){var n=1/(t-e),s=1/(i-r),o=this.projectionMatrix;o[0]=-2*n,o[5]=-2*s,o[10]=-.001,o[12]=(t+e)*n,o[13]=(r+i)*s,o[14]=-0;var a=this.program,h=this.gl;this.renderer.setProgram(a),h.uniformMatrix4fv(h.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,i=this.program;for(var r in this._textureCount=0,this.uniforms){var n=this.uniforms[r],s=n.type,o=e[s];n.uniformLocation=t.getUniformLocation(i,r),"sampler2D"!==s&&(n.glMatrix=o.matrix,n.glValueLength=o.length,n.glFunc=o.func)}},setSampler2DBuffer:function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s={});var o=this.uniforms[t];return o.value=e,s.width=i,s.height=r,o.textureData=s,this._textureCount=n,this.initSampler2D(o),this},setSampler2D:function(t,e,i,r){void 0===i&&(i=0);var n=this.scene.sys.textures;if(n.exists(e)){var s=n.getFrame(e);if(s.glTexture&&s.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,s.glTexture,s.width,s.height,i,r);var o=this.uniforms[t],a=s.source;o.textureKey=e,o.source=a.image,o.value=s.glTexture,a.isGLTexture&&(r||(r={}),r.width=a.width,r.height=a.height),r&&(o.textureData=r),this._textureCount=i,this.initSampler2D(o)}return this},setUniform:function(t,e){return h(this.uniforms,t,e),this},getUniform:function(t){return o(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=this.gl;e.activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value);var i=t.textureData;if(i&&!t.value.isRenderTexture){var r=e[o(i,"magFilter","linear").toUpperCase()],n=e[o(i,"minFilter","linear").toUpperCase()],s=e[o(i,"wrapS","repeat").toUpperCase()],a=e[o(i,"wrapT","repeat").toUpperCase()],h=e[o(i,"format","rgba").toUpperCase()];if(i.repeat&&(s=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var c=o(i,"width",512),l=o(i,"height",2),u=o(i,"border",0);e.texImage2D(e.TEXTURE_2D,0,h,c,l,u,h,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,h,e.RGBA,e.UNSIGNED_BYTE,t.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,e,i,r,n,s=this.gl,o=this.uniforms,a=0;for(var h in o)i=(t=o[h]).glFunc,e=t.glValueLength,r=t.uniformLocation,null!==(n=t.value)&&(1===e?t.glMatrix?i.call(s,r,t.transpose,n):i.call(s,r,n):2===e?i.call(s,r,n.x,n.y):3===e?i.call(s,r,n.x,n.y,n.z):4===e?i.call(s,r,n.x,n.y,n.z,n.w):"sampler2D"===t.type&&(s.activeTexture(s.TEXTURE0+a),s.bindTexture(s.TEXTURE_2D,n),s.uniform1i(r,a),a++))},load:function(t){var e=this.gl,i=this.width,r=this.height,n=this.renderer,s=this.program,o=this.viewMatrix;if(!this.renderToTexture){var a=-this._displayOriginX,h=-this._displayOriginY;o[0]=t[0],o[1]=t[1],o[4]=t[2],o[5]=t[3],o[8]=t[4],o[9]=t[5],o[12]=o[0]*a+o[4]*h,o[13]=o[1]*a+o[5]*h}e.useProgram(s),e.uniformMatrix4fv(e.getUniformLocation(s,"uViewMatrix"),!1,o),e.uniform2f(e.getUniformLocation(s,"uResolution"),this.width,this.height);var c=this.uniforms,l=c.resolution;l.value.x=i,l.value.y=r,c.time.value=n.game.loop.getDuration();var u=this.pointer;if(u){var d=c.mouse,f=u.x/i,p=1-u.y/r;d.value.x=f.toFixed(2),d.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,r=this.gl,n=this.vertexBuffer,s=this.renderer,o=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(s.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,n);var a=r.getAttribLocation(i,"inPosition");-1!==a&&(r.enableVertexAttribArray(a),r.vertexAttribPointer(a,2,r.FLOAT,!1,o,0));var h=this.vertexViewF32;h[3]=e,h[4]=t,h[5]=e,h[8]=t,h[9]=e,h[10]=t,r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,6*o)),r.drawArrays(r.TRIANGLES,0,6),this.renderToTexture&&s.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=u},function(t,e,i){var r=i(0),n=i(11),s=i(36),o=i(116),a=i(15),h=i(479),c=i(480),l=i(19),u=i(69),d=i(1179),f=i(79),p=i(39),g=i(117),y=new r({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,d],initialize:function(t,e,i,r,n,s,o,h,c,l,d,f){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r="__WHITE"),a.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new u,this.viewPosition=new p,this.viewMatrix=new u,this.projectionMatrix=new u,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var g=t.sys.renderer;this.setPosition(e,i),this.setTexture(r,n),this.setSize(g.width,g.height),this.initPipeline(),this.setPerspective(g.width,g.height),s&&this.addVertices(s,o,h,c,l,d,f)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(p.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=p.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,i,r,n){return void 0===i&&(i=45),void 0===r&&(r=.01),void 0===n&&(n=1e3),this.projectionMatrix.perspective(s(i),t/e,r,n),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,i,r){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===i&&(i=-1e3),void 0===r&&(r=1e3),this.projectionMatrix.ortho(-t,t,-e,e,i,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,i,r,n,s,o,a,h){var l=this.scene.sys.cache.obj.get(t);return l&&c(l,this,e,i,r,n,s,o,a,h),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(t,e,i,r,n,s,o){var a=new g(t,e,i,r,n,s,o);return this.vertices.push(a),a},addFace:function(t,e,i){var r=new o(t,e,i);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(t,e,i,r,n,s,o){var a=h(t,e,i,r,n,s,o);return a&&(this.faces=this.faces.concat(a.faces),this.vertices=this.vertices.concat(a.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var r=l(this,i).calc,n=this.faces,s=[],o=0;o<n.length;o++){var a=n[o];a.contains(t,e,r)&&s.push(a)}return f(s,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,i=this.modelScale,r=this.dirtyCache,n=t.x,s=t.y,o=t.z,a=e.x,h=e.y,c=e.z,l=i.x,u=i.y,d=i.z,f=this.getFaceCount(),p=r[0],g=r[1],y=r[2],m=r[3],v=r[4],b=r[5],w=r[6],_=r[7],x=r[8],E=r[9];return r[0]=n,r[1]=s,r[2]=o,r[3]=a,r[4]=h,r[5]=c,r[6]=l,r[7]=u,r[8]=d,r[9]=f,p!==n||g!==s||y!==o||m!==a||v!==h||b!==c||w!==l||_!==u||x!==d||E!==f},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,i=this.height,r=this.viewMatrix,n=this.viewPosition;t[10]&&(r.identity(),r.translate(n),r.invert(),t[10]=0);var s=this.transformMatrix;s.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var o=n.z,a=this.faces,h=0;h<a.length;h++)a[h].transformCoordinatesLocal(s,e,i,o);this.depthSort()}},renderDebug:function(t,e){for(var i=t.debugGraphic,r=0;r<e.length;r++){var n=e[r],s=n.vertex1.tx,o=n.vertex1.ty,a=n.vertex2.tx,h=n.vertex2.ty,c=n.vertex3.tx,l=n.vertex3.ty;i.strokeTriangle(s,o,a,h,c,l)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=y},function(t,e,i){var r=i(50);t.exports=function(t,e){return r(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e,i){var r=i(4),n=i(233);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s,o,a=t.x1,h=t.y1,c=t.x2,l=t.y2,u=e.x,d=e.y,f=e.radius,p=c-a,g=l-h,y=a-u,m=h-d,v=p*p+g*g,b=2*(p*y+g*m),w=b*b-4*v*(y*y+m*m-f*f);if(0===w){var _=-b/(2*v);s=a+_*p,o=h+_*g,_>=0&&_<=1&&i.push(new r(s,o))}else if(w>0){var x=(-b-Math.sqrt(w))/(2*v);s=a+x*p,o=h+x*g,x>=0&&x<=1&&i.push(new r(s,o));var E=(-b+Math.sqrt(w))/(2*v);s=a+E*p,o=h+E*g,E>=0&&E<=1&&i.push(new r(s,o))}}return i}},function(t,e,i){var r=i(66),n=new(i(4));t.exports=function(t,e,i){if(void 0===i&&(i=n),r(e,t.x1,t.y1))return i.x=t.x1,i.y=t.y1,!0;if(r(e,t.x2,t.y2))return i.x=t.x2,i.y=t.y2,!0;var s=t.x2-t.x1,o=t.y2-t.y1,a=e.x-t.x1,h=e.y-t.y1,c=s*s+o*o,l=s,u=o;if(c>0){var d=(a*s+h*o)/c;l*=d,u*=d}return i.x=t.x1+l,i.y=t.y1+u,l*l+u*u<=c&&l*s+u*o>=0&&r(e,i.x,i.y)}},function(t,e,i){var r=i(4),n=i(96),s=i(488);t.exports=function(t,e,i){if(void 0===i&&(i=[]),s(t,e))for(var o=e.getLineA(),a=e.getLineB(),h=e.getLineC(),c=e.getLineD(),l=[new r,new r,new r,new r],u=[n(o,t,l[0]),n(a,t,l[1]),n(h,t,l[2]),n(c,t,l[3])],d=0;d<4;d++)u[d]&&i.push(l[d]);return i}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=!1),void 0===r&&(r=[]);for(var n,s,o,a,h,c,l=t.x3-t.x1,u=t.y3-t.y1,d=t.x2-t.x1,f=t.y2-t.y1,p=l*l+u*u,g=l*d+u*f,y=d*d+f*f,m=p*y-g*g,v=0===m?0:1/m,b=t.x1,w=t.y1,_=0;_<e.length&&(s=(p*(c=d*(o=e[_].x-b)+f*(a=e[_].y-w))-g*(h=l*o+u*a))*v,!((n=(y*h-g*c)*v)>=0&&s>=0&&n+s<1&&(r.push({x:e[_].x,y:e[_].y}),i)));_++);return r}},function(t,e){t.exports=function(t,e,i,r){var n=Math.cos(r),s=Math.sin(r),o=t.x1-e,a=t.y1-i;return t.x1=o*n-a*s+e,t.y1=o*s+a*n+i,o=t.x2-e,a=t.y2-i,t.x2=o*n-a*s+e,t.y2=o*s+a*n+i,t}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,i,r){var n=Math.cos(r),s=Math.sin(r),o=t.x1-e,a=t.y1-i;return t.x1=o*n-a*s+e,t.y1=o*s+a*n+i,o=t.x2-e,a=t.y2-i,t.x2=o*n-a*s+e,t.y2=o*s+a*n+i,o=t.x3-e,a=t.y3-i,t.x3=o*n-a*s+e,t.y3=o*s+a*n+i,t}},function(t,e,i){t.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(t,e,i){var r=i(17),n=i(156);t.exports=function(t,e){var i=void 0===t?n():r({},t);if(e)for(var s in e)void 0!==e[s]&&(i[s]=e[s]);return i}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=i(408),l=new r({Extends:s,initialize:function(t,e,i,r){var n="xml";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var c={type:"xml",cache:t.cacheManager.xml,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=c(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r){var n="text",o="txt",c=t.cacheManager.text;if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),r=a(l,"xhrSettings"),o=a(l,"extension",o),n=a(l,"type",n),c=a(l,"cache",c)}var u={type:n,cache:c,extension:o,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){t.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(t,e){t.exports=function(t,e,i,r,n,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1);var a=[],h=[],c=t.treeMinMax;if(c.minX=e,c.minY=i,c.maxX=e+r,c.maxY=i+n,o&&(h=t.staticTree.search(c)),s&&t.useTree)a=t.tree.search(c);else if(s){var l=t.bodies,u={position:{x:e,y:i},left:e,top:i,right:e+r,bottom:i+n,isCircle:!1},d=t.intersects;l.iterate((function(t){d(t,u)&&a.push(t)}))}return h.concat(a)}},function(t,e,i){t.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(t,e,i){var r=i(62);t.exports=function(t,e,i,n){var s=0,o=t.deltaAbsX()+e.deltaAbsX()+n;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(s=t.right-e.x)>o&&!i||!1===t.checkCollision.right||!1===e.checkCollision.left?s=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(s=t.x-e.width-e.x)>o&&!i||!1===t.checkCollision.left||!1===e.checkCollision.right?s=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=s,e.overlapX=s,s}},function(t,e,i){var r=i(62);t.exports=function(t,e,i,n){var s=0,o=t.deltaAbsY()+e.deltaAbsY()+n;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(s=t.bottom-e.y)>o&&!i||!1===t.checkCollision.down||!1===e.checkCollision.up?s=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(s=t.y-e.bottom)>o&&!i||!1===t.checkCollision.up||!1===e.checkCollision.down?s=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=s,e.overlapY=s,s}},function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},function(t,e,i){t.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(t,e){var i={};t.exports=i,i.create=function(t,e){var r=t.bodyA,n=t.bodyB,s={id:i.id(r,n),bodyA:r,bodyB:n,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||n.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(s,t,e),s},i.update=function(t,e,r){if(t.collision=e,e.collided){var n=e.supports,s=t.activeContacts,o=e.parentA,a=e.parentB;t.inverseMass=o.inverseMass+a.inverseMass,t.friction=Math.min(o.friction,a.friction),t.frictionStatic=Math.max(o.frictionStatic,a.frictionStatic),t.restitution=Math.max(o.restitution,a.restitution),t.slop=Math.max(o.slop,a.slop);for(var h=0;h<n.length;h++)s[h]=n[h].contact;var c=n.length;c<s.length&&(s.length=c),t.separation=e.depth,i.setActive(t,!0,r)}else!0===t.isActive&&i.setActive(t,!1,r)},i.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},i.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},function(t,e,i){t.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(t,e,i){var r=i(158);t.exports=function(t,e,i){var n=r(t,e,!0,i),s=r(t,e-1,!0,i),o=r(t,e+1,!0,i),a=r(t-1,e,!0,i),h=r(t+1,e,!0,i),c=n&&n.collides;return c&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),s&&s.collides&&(c&&(n.faceTop=!1),s.faceBottom=!c),o&&o.collides&&(c&&(n.faceBottom=!1),o.faceTop=!c),a&&a.collides&&(c&&(n.faceLeft=!1),a.faceRight=!c),h&&h.collides&&(c&&(n.faceRight=!1),h.faceLeft=!c),n&&!n.collides&&n.resetFaces(),n}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileWidth,n=i.tilemapLayer,s=0;return n&&(e||(e=n.scene.cameras.main),s=n.x+e.scrollX*(1-n.scrollFactorX),r*=n.scaleX),s+t*r}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;return n&&(e||(e=n.scene.cameras.main),s=n.y+e.scrollY*(1-n.scrollFactorY),r*=n.scaleY),s+t*r}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=!0);var n=r.baseTileWidth,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),t-=s.x+i.scrollX*(1-s.scrollFactorX),n*=s.scaleX),e?Math.floor(t/n):t/n}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=!0);var n=r.baseTileHeight,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY),e?Math.floor(t/n):t/n}},function(t,e,i){var r=i(85),n=i(119),s=i(252),o=i(72);t.exports=function(t,e,i,a,h){if(void 0===a&&(a=!0),!n(e,i,h))return null;var c=h.data[i][e],l=c&&c.collides;if(t instanceof r)null===h.data[i][e]&&(h.data[i][e]=new r(h,t.index,e,i,h.tileWidth,h.tileHeight)),h.data[i][e].copy(t);else{var u=t;null===h.data[i][e]?h.data[i][e]=new r(h,u,e,i,h.tileWidth,h.tileHeight):h.data[i][e].index=u}var d=h.data[i][e],f=-1!==h.collideIndexes.indexOf(d.index);return o(d,f),a&&l!==d.collides&&s(e,i,h),d}},function(t,e,i){var r=i(29);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?r.ISOMETRIC:"staggered"===t?r.STAGGERED:"hexagonal"===t?r.HEXAGONAL:r.ORTHOGONAL}},function(t,e,i){var r=i(40),n=i(120),s=i(121),o=i(85);t.exports=function(t,e,i,a,h){for(var c=new n({tileWidth:i,tileHeight:a}),l=new s({name:t,tileWidth:i,tileHeight:a,format:r.ARRAY_2D,layers:[c]}),u=[],d=e.length,f=0,p=0;p<e.length;p++){u[p]=[];for(var g=e[p],y=0;y<g.length;y++){var m=parseInt(g[y],10);isNaN(m)||-1===m?u[p][y]=h?null:new o(c,-1,y,p,i,a):u[p][y]=new o(c,m,y,p,i,a)}0===f&&(f=g.length)}return l.width=c.width=f,l.height=c.height=d,l.widthInPixels=c.widthInPixels=f*i,l.heightInPixels=c.heightInPixels=d*a,c.data=u,l}},function(t,e,i){var r=i(571),n=i(261),s=function(t){return{x:t.x,y:t.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var a=r(t,o);if(a.x+=e,a.y+=i,t.gid){var h=n(t.gid);a.gid=h.gid,a.flippedHorizontal=h.flippedHorizontal,a.flippedVertical=h.flippedVertical,a.flippedAntiDiagonal=h.flippedAntiDiagonal}else t.polyline?a.polyline=t.polyline.map(s):t.polygon?a.polygon=t.polygon.map(s):t.ellipse?a.ellipse=t.ellipse:t.text?a.text=t.text:t.point?a.point=!0:a.rectangle=!0;return a}},function(t,e){t.exports=function(t){var e=Boolean(2147483648&t),i=Boolean(1073741824&t),r=Boolean(536870912&t);t&=536870911;var n=0,s=!1;return e&&i&&r?(n=Math.PI/2,s=!0):e&&i&&!r?(n=Math.PI,s=!1):e&&!i&&r?(n=Math.PI/2,s=!1):!e||i||r?!e&&i&&r?(n=3*Math.PI/2,s=!1):e||!i||r?e||i||!r?e||i||r||(n=0,s=!1):(n=3*Math.PI/2,s=!0):(n=Math.PI,s=!0):(n=0,s=!0),{gid:t,flippedHorizontal:e,flippedVertical:i,flippedAntiDiagonal:r,rotation:n,flipped:s}}},function(t,e,i){var r=i(40),n=i(121),s=i(564),o=i(580);t.exports=function(t,e,i,a,h,c,l,u){void 0===i&&(i=32),void 0===a&&(a=32),void 0===h&&(h=10),void 0===c&&(c=10),void 0===u&&(u=!1);var d=null;if(Array.isArray(l))d=s(void 0!==e?e:"map",r.ARRAY_2D,l,i,a,u);else if(void 0!==e){var f=t.cache.tilemap.get(e);f?d=s(e,f.format,f.data,i,a,u):console.warn("No map data found for key "+e)}return null===d&&(d=new n({tileWidth:i,tileHeight:a,width:h,height:c})),new o(t,d)}},function(t,e,i){var r=i(6);t.exports=function(t){var e=r(t,"targets",null);return null===e||("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},function(t,e){function i(t){return!!t.getActive&&"function"==typeof t.getActive}function r(t){return!!t.getStart&&"function"==typeof t.getStart}function n(t){return!!t.getEnd&&"function"==typeof t.getEnd}var s=function(t,e){var o,a,h=function(t,e,i){return i},c=function(t,e,i){return i},l=null,u=typeof e;if("number"===u)h=function(){return e};else if("string"===u){var d=e[0],f=parseFloat(e.substr(2));switch(d){case"+":h=function(t,e,i){return i+f};break;case"-":h=function(t,e,i){return i-f};break;case"*":h=function(t,e,i){return i*f};break;case"/":h=function(t,e,i){return i/f};break;default:h=function(){return parseFloat(e)}}}else if("function"===u)h=e;else if("object"===u)if(r(a=e)||n(a)||i(a))i(e)&&(l=e.getActive),n(e)&&(h=e.getEnd),r(e)&&(c=e.getStart);else if(e.hasOwnProperty("value"))o=s(t,e.value);else{var p=e.hasOwnProperty("to"),g=e.hasOwnProperty("from"),y=e.hasOwnProperty("start");if(p&&(g||y)){if(o=s(t,e.to),y){var m=s(t,e.start);o.getActive=m.getEnd}if(g){var v=s(t,e.from);o.getStart=v.getEnd}}}return o||(o={getActive:l,getEnd:h,getStart:c}),o};t.exports=s},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,i){var r=i(0),n=i(9),s=i(267),o=i(16),a=i(5),h=i(100),c=i(14),l=new r({Extends:n,initialize:function(t,e,i){n.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=i,this.totalTargets=i.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=h.PENDING_ADD,this._pausedState=h.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},isPaused:function(){return this.state===h.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,i){void 0===i&&(i=!1);for(var r=0;r<this.totalData;r++){var n=this.data[r];n.key===t&&(n.end=e,i&&(n.start=n.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===h.ACTIVE?this.seek(0):this.state===h.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===h.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=c.MAX_SAFE_INTEGER,i=this.data,r=0;r<this.totalData;r++){var n=i[r];n.t1=n.duration+n.hold,n.yoyo&&(n.t1+=n.duration),n.t2=n.t1+n.repeatDelay,n.totalDuration=n.delay+n.t1,-1===n.repeat?n.totalDuration+=999999999999*n.t2:n.repeat>0&&(n.totalDuration+=n.t2*n.repeat),n.totalDuration>t&&(t=n.totalDuration),n.delay<e&&(e=n.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=h.PENDING_ADD,this._pausedState=h.INIT,!1;for(var t=this.data,e=this.totalTargets,i=0;i<this.totalData;i++){var r=t[i],n=r.target,s=r.gen,o=r.key,a=r.index;r.delay=s.delay(n,o,0,a,e,this),r.duration=Math.max(s.duration(n,o,0,a,e,this),.001),r.hold=s.hold(n,o,0,a,e,this),r.repeat=s.repeat(n,o,0,a,e,this),r.repeatDelay=s.repeatDelay(n,o,0,a,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=h.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===h.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED),this},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==h.INIT||this.parentIsTimeline?e===h.ACTIVE||e===h.PENDING_ADD&&this._pausedState===h.PENDING_ADD?this:this.parentIsTimeline||e!==h.PENDING_REMOVE&&e!==h.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=h.ACTIVE:(this.countdown=this.calculatedOffset,this.state=h.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=h.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=h.ACTIVE,this)},resetTweenData:function(t){for(var e=this.data,i=this.totalData,r=this.totalTargets,n=0;n<i;n++){var s=e[n],o=s.target,a=s.key,c=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,t?(s.start=s.getStartValue(o,a,s.start,c,r,this),s.end=s.getEndValue(o,a,s.end,c,r,this),s.current=s.start,s.state=h.PLAYING_FORWARD):s.state=h.PENDING_RENDER,s.delay>0&&(s.elapsed=s.delay,s.state=h.DELAY),s.getActiveValue&&(o[a]=s.getActiveValue(s.target,s.key,s.start))}},resume:function(){return this.state===h.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){void 0===e&&(e=16.6),this.state===h.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,r=this.totalTargets,n=0;n<this.totalData;n++){var s=i[n],o=s.target,a=s.gen,c=s.key,l=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,s.delay=a.delay(o,c,0,l,r,this),s.duration=Math.max(a.duration(o,c,0,l,r,this),.001),s.hold=a.hold(o,c,0,l,r,this),s.repeat=a.repeat(o,c,0,l,r,this),s.repeatDelay=a.repeatDelay(o,c,0,l,r,this),s.current=s.start,s.state=h.PLAYING_FORWARD,this.updateTweenData(this,s,0,l,r),s.delay>0&&(s.elapsed=s.delay,s.state=h.DELAY)}this.calcDuration();var u=!1;this.state===h.PAUSED&&(u=!0,this.state=h.ACTIVE),this.isSeeking=!0;do{this.update(0,e)}while(this.totalProgress<t);return this.isSeeking=!1,u&&(this.state=h.PAUSED),this},setCallback:function(t,e,i,r){return this.callbacks[t]={func:e,scope:r,params:i},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=h.COMPLETE_DELAY,this.countdown=t):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===h.ACTIVE&&void 0!==t&&this.seek(t),this.state!==h.REMOVED&&(this.state!==h.PAUSED&&this.state!==h.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=h.PENDING_REMOVE),this},update:function(t,e){if(this.state===h.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var i=!1,r=0;r<this.totalData;r++){var n=this.data[r];this.updateTweenData(this,n,e)&&(i=!0)}i||this.nextState();break;case h.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case h.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE);break;case h.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===h.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,i){this.isSeeking||(this.emit(t,this,i.key,i.target,i.current,i.previous),e&&(e.params[1]=i.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,i){return e.yoyo?(e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),h.PLAYING_BACKWARD):e.repeatCounter>0?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},setStateFromStart:function(t,e,i){return e.repeatCounter>0?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},updateTweenData:function(t,e,i){var r=e.target;switch(e.state){case h.PLAYING_FORWARD:case h.PLAYING_BACKWARD:if(!r){e.state=h.COMPLETE;break}var n=e.elapsed,o=e.duration,a=0;(n+=i)>o&&(a=n-o,n=o);var c=e.state===h.PLAYING_FORWARD,l=n/o;if(e.elapsed=n,e.progress=l,e.previous=e.current,1===l)c?(e.current=e.end,r[e.key]=e.end,e.hold>0?(e.elapsed=e.hold-a,e.state=h.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,a)):(e.current=e.start,r[e.key]=e.start,e.state=this.setStateFromStart(t,e,a));else{var u=c?e.ease(l):e.ease(1-l);e.current=e.start+(e.end-e.start)*u,r[e.key]=e.current}this.dispatchTweenDataEvent(s.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case h.DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PENDING_RENDER);break;case h.REPEAT_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case h.HOLD_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case h.PENDING_RENDER:r?(e.start=e.getStartValue(r,e.key,r[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(r,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,r[e.key]=e.start,e.state=h.PLAYING_FORWARD):e.state=h.COMPLETE}return e.state!==h.COMPLETE}});l.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],a.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),o.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=l},function(t,e,i){t.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(t,e){t.exports=function(t,e,i,r,n,s,o,a,h,c,l,u,d,f,p){return{target:t,index:e,key:i,getActiveValue:s,getEndValue:r,getStartValue:n,ease:o,duration:0,totalDuration:0,delay:0,yoyo:c,hold:0,repeat:0,repeatDelay:0,flipX:f,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:a,duration:h,hold:l,repeat:u,repeatDelay:d},state:0}}},function(t,e,i){var r=i(68);t.exports=function(t){return r(t,-Math.PI,Math.PI)}},function(t,e,i){var r=i(68);t.exports=function(t){return r(t,-180,180)}},function(t,e,i){var r={};t.exports=r;var n=i(83),s=i(32);r.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var r=(i+1)%t.length,o=n.normalise({x:t[r].y-t[i].y,y:t[i].x-t[r].x}),a=0===o.y?1/0:o.x/o.y;e[a=a.toFixed(3).toString()]=o}return s.values(e)},r.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),r=Math.sin(e),n=0;n<t.length;n++){var s,o=t[n];s=o.x*i-o.y*r,o.y=o.x*r+o.y*i,o.x=s}}},function(t,e,i){t.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(t,e,i){var r={};t.exports=r;var n=i(274),s=i(250),o=i(84);r.collisions=function(t,e){for(var i=[],a=e.pairs.table,h=e.metrics,c=0;c<t.length;c++){var l=t[c][0],u=t[c][1];if((!l.isStatic&&!l.isSleeping||!u.isStatic&&!u.isSleeping)&&r.canCollide(l.collisionFilter,u.collisionFilter)&&(h.midphaseTests+=1,o.overlaps(l.bounds,u.bounds)))for(var d=l.parts.length>1?1:0;d<l.parts.length;d++)for(var f=l.parts[d],p=u.parts.length>1?1:0;p<u.parts.length;p++){var g=u.parts[p];if(f===l&&g===u||o.overlaps(f.bounds,g.bounds)){var y,m=a[s.id(f,g)];y=m&&m.isActive?m.collision:null;var v=n.collides(f,g,y);h.narrowphaseTests+=1,v.reused&&(h.narrowReuseCount+=1),v.collided&&(i.push(v),h.narrowDetections+=1)}}}return i},r.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83);r.collides=function(t,e,i){var o,a,h,c,l=!1;if(i){var u=t.parent,d=e.parent,f=u.speed*u.speed+u.angularSpeed*u.angularSpeed+d.speed*d.speed+d.angularSpeed*d.angularSpeed;l=i&&i.collided&&f<.2,c=i}else c={collided:!1,bodyA:t,bodyB:e};if(i&&l){var p=c.axisBody,g=p===t?e:t,y=[p.axes[i.axisNumber]];if(h=r._overlapAxes(p.vertices,g.vertices,y),c.reused=!0,h.overlap<=0)return c.collided=!1,c}else{if((o=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;if((a=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;o.overlap<a.overlap?(h=o,c.axisBody=t):(h=a,c.axisBody=e),c.axisNumber=h.axisNumber}c.bodyA=t.id<e.id?t:e,c.bodyB=t.id<e.id?e:t,c.collided=!0,c.depth=h.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,t=c.bodyA,e=c.bodyB,s.dot(h.axis,s.sub(e.position,t.position))<0?c.normal={x:h.axis.x,y:h.axis.y}:c.normal={x:-h.axis.x,y:-h.axis.y},c.tangent=s.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var m=r._findSupports(t,e,c.normal),v=[];if(n.contains(t.vertices,m[0])&&v.push(m[0]),n.contains(t.vertices,m[1])&&v.push(m[1]),v.length<2){var b=r._findSupports(e,t,s.neg(c.normal));n.contains(e.vertices,b[0])&&v.push(b[0]),v.length<2&&n.contains(e.vertices,b[1])&&v.push(b[1])}return v.length<1&&(v=[m[0]]),c.supports=v,c},r._overlapAxes=function(t,e,i){for(var n,o,a=s._temp[0],h=s._temp[1],c={overlap:Number.MAX_VALUE},l=0;l<i.length;l++){if(o=i[l],r._projectToAxis(a,t,o),r._projectToAxis(h,e,o),(n=Math.min(a.max-h.min,h.max-a.min))<=0)return c.overlap=n,c;n<c.overlap&&(c.overlap=n,c.axis=o,c.axisNumber=l)}return c},r._projectToAxis=function(t,e,i){for(var r=s.dot(e[0],i),n=r,o=1;o<e.length;o+=1){var a=s.dot(e[o],i);a>n?n=a:a<r&&(r=a)}t.min=r,t.max=n},r._findSupports=function(t,e,i){for(var r,n,o,a,h=Number.MAX_VALUE,c=s._temp[0],l=e.vertices,u=t.position,d=0;d<l.length;d++)n=l[d],c.x=n.x-u.x,c.y=n.y-u.y,(r=-s.dot(i,c))<h&&(h=r,o=n);return n=l[o.index-1>=0?o.index-1:l.length-1],c.x=n.x-u.x,c.y=n.y-u.y,h=-s.dot(i,c),a=n,n=l[(o.index+1)%l.length],c.x=n.x-u.x,c.y=n.y-u.y,(r=-s.dot(i,c))<h&&(a=n),[o,a]}},function(t,e,i){t.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(t,e,i){var r=i(123),n=[];n[r.BOTTOM_CENTER]=i(277),n[r.BOTTOM_LEFT]=i(278),n[r.BOTTOM_RIGHT]=i(279),n[r.LEFT_BOTTOM]=i(280),n[r.LEFT_CENTER]=i(281),n[r.LEFT_TOP]=i(282),n[r.RIGHT_BOTTOM]=i(283),n[r.RIGHT_CENTER]=i(284),n[r.RIGHT_TOP]=i(285),n[r.TOP_CENTER]=i(286),n[r.TOP_LEFT]=i(287),n[r.TOP_RIGHT]=i(288),t.exports=function(t,e,i,r,s){return n[i](t,e,r,s)}},function(t,e,i){var r=i(42),n=i(87),s=i(88),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(43),s=i(53),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)-i),o(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(44),s=i(54),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(43),s=i(55),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(89),n=i(43),s=i(90),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(43),n=i(45),s=i(54),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)-i),o(t,n(e)-a),t}},function(t,e,i){var r=i(42),n=i(44),s=i(55),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(89),n=i(44),s=i(90),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(44),n=i(45),s=i(53),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)-a),t}},function(t,e,i){var r=i(87),n=i(45),s=i(55),o=i(88);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)-a),t}},function(t,e,i){var r=i(43),n=i(45),s=i(55),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)-i),s(t,n(e)-a),t}},function(t,e,i){var r=i(44),n=i(45),s=i(55),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)-a),t}},function(t,e,i){var r=i(123),n=[];n[r.BOTTOM_CENTER]=i(290),n[r.BOTTOM_LEFT]=i(291),n[r.BOTTOM_RIGHT]=i(292),n[r.CENTER]=i(293),n[r.LEFT_CENTER]=i(295),n[r.RIGHT_CENTER]=i(296),n[r.TOP_CENTER]=i(297),n[r.TOP_LEFT]=i(298),n[r.TOP_RIGHT]=i(299),n[r.LEFT_BOTTOM]=n[r.BOTTOM_LEFT],n[r.LEFT_TOP]=n[r.TOP_LEFT],n[r.RIGHT_BOTTOM]=n[r.BOTTOM_RIGHT],n[r.RIGHT_TOP]=n[r.TOP_RIGHT],t.exports=function(t,e,i,r,s){return n[i](t,e,r,s)}},function(t,e,i){var r=i(42),n=i(87),s=i(55),o=i(88);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(43),s=i(55),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(44),s=i(55),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(294),n=i(87),s=i(89);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i,s(e)+o),t}},function(t,e,i){var r=i(88),n=i(90);t.exports=function(t,e,i){return r(t,e),n(t,i)}},function(t,e,i){var r=i(89),n=i(43),s=i(90),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(89),n=i(44),s=i(90),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(87),n=i(45),s=i(88),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)-a),t}},function(t,e,i){var r=i(43),n=i(45),s=i(53),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)-i),o(t,n(e)-a),t}},function(t,e,i){var r=i(44),n=i(45),s=i(54),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)-a),t}},function(t,e,i){var r=i(169),n=i(98),s=i(14),o=i(4);t.exports=function(t,e,i){void 0===i&&(i=new o);var a=n(e,0,s.PI2);return r(t,a,i)}},function(t,e,i){var r=i(302),n=i(169),s=i(98),o=i(14);t.exports=function(t,e,i,a){void 0===a&&(a=[]),!e&&i>0&&(e=r(t)/i);for(var h=0;h<e;h++){var c=s(h/e,0,o.PI2);a.push(n(t,c))}return a}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,i){var r=i(18),n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=n},function(t,e,i){var r=i(35),n={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=r[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=n},function(t,e){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,e,i){var r=i(171),n=i(130);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&i>0&&(e=n(t)/i);for(var o=0;o<e;o++){var a=o/e;s.push(r(t,a))}return s}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new r),i.x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},function(t,e){t.exports=function(t,e,i,r){var n=Math.cos(r),s=Math.sin(r),o=t.x-e,a=t.y-i;return t.x=o*n-a*s+e,t.y=o*s+a*n+i,t}},function(t,e,i){var r=i(310),n=i(311),s={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new r(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new n(this.scene,t)}};t.exports=s},function(t,e,i){var r=i(0),n=i(22),s=i(91),o=new r({initialize:function(t,e){var i=t.sys.renderer;this.renderer=i,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(n.CONTEXT_RESTORED,this.createMask,this),i&&i.on(s.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var e=t.width,i=t.height,r=0==(e&e-1)&&0==(i&i-1),n=t.gl,s=r?n.REPEAT:n.CLAMP_TO_EDGE,o=n.LINEAR;this.mainTexture=t.createTexture2D(0,o,o,s,s,n.RGBA,null,e,i),this.maskTexture=t.createTexture2D(0,o,o,s,s,n.RGBA,null,e,i),this.mainFramebuffer=t.createFramebuffer(e,i,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(e,i,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,i)},postRenderWebGL:function(t,e){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=o},function(t,e,i){var r=new(i(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,i){var r=t.gl;t.flush(),0===t.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var r=t.gl,n=this.geometryMask,s=t.maskCount;r.colorMask(!1,!1,!1,!1),i?(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),n.renderWebGL(t,n,e),t.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,s+1,255):r.stencilFunc(r.EQUAL,s+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,s,255):r.stencilFunc(r.EQUAL,s,255)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var i=t.currentMask;if(0===t.maskStack.length)i.mask=null,e.disable(e.STENCIL_TEST);else{var r=t.maskStack[t.maskStack.length-1];r.mask.applyStencil(t,r.camera,!1),t.currentCameraMask.mask!==r.mask?(i.mask=r.mask,i.camera=r.camera):i.mask=null}},preRenderCanvas:function(t,e,i){var r=this.geometryMask;t.currentContext.save(),r.renderCanvas(t,r,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=r},function(t,e){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},function(t,e,i){var r=i(14),n=i(25),s=i(177),o=i(269),a=i(270),h=i(3),c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return a(this._rotation*r.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=o(t)}},setPosition:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=i,this.w=r,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*i,this.y=e+Math.random()*r,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new n),void 0===e&&(e=new n);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getLocalPoint:function(t,e,i,r){i||(i=new h),r||(r=this.scene.sys.cameras.main);var n=r.scrollX,o=r.scrollY,a=t+n*this.scrollFactorX-n,c=e+o*this.scrollFactorY-o;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,c,i):s(a,c,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=c},function(t,e){t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},function(t,e,i){t.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(t,e,i){var r=i(130),n=i(4);t.exports=function(t,e,i,s){if(void 0===s&&(s=[]),!e&&!i)return s;e?i=Math.round(r(t)/e):e=r(t)/i;for(var o=t.x,a=t.y,h=0,c=0;c<i;c++)switch(s.push(new n(o,a)),h){case 0:(o+=e)>=t.right&&(h=1,a+=o-t.right,o=t.right);break;case 1:(a+=e)>=t.bottom&&(h=2,o-=a-t.bottom,a=t.bottom);break;case 2:(o-=e)<=t.left&&(h=3,a-=t.left-o,o=t.left);break;case 3:(a-=e)<=t.top&&(h=0,a=t.top)}return s}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=[]);var r=Math.round(t.x1),n=Math.round(t.y1),s=Math.round(t.x2),o=Math.round(t.y2),a=Math.abs(s-r),h=Math.abs(o-n),c=r<s?1:-1,l=n<o?1:-1,u=a-h;i.push({x:r,y:n});for(var d=1;r!==s||n!==o;){var f=u<<1;f>-h&&(u-=h,r+=c),f<a&&(u+=a,n+=l),d%e==0&&i.push({x:r,y:n}),d++}return i}},function(t,e){t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var r,n,s=1;if(i){if(t<e[0][i])return e[0];for(;e[s][i]<t;)s++}else for(;e[s]<t;)s++;return s>e.length&&(s=e.length),i?(r=e[s-1][i],(n=e[s][i])-t<=t-r?e[s]:e[s-1]):(r=e[s-1],(n=e[s])-t<=t-r?n:r)}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n){void 0===n&&(n=!1),this.textureKey=t,this.textureFrame=e,this.index=i,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=r},function(t,e){t.exports=function(t){var e=/\D/g;return t.sort((function(t,i){return parseInt(t.replace(e,""),10)-parseInt(i.replace(e,""),10)})),t}},function(t,e,i){var r=i(185),n=i(0),s=i(102),o=i(9),a=i(132),h=i(22),c=i(2),l=i(6),u=i(186),d=i(322),f=new n({Extends:o,initialize:function(t){o.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(t,e,i){var r=this.anims,n=this.mixes,s="string"==typeof t?t:t.key,o="string"==typeof e?e:e.key;if(r.has(s)&&r.has(o)){var a=n.get(s);a||(a={}),a[o]=i,n.set(s,a)}return this},removeMix:function(t,e){var i=this.mixes,r="string"==typeof t?t:t.key,n=i.get(r);if(n)if(e){var s="string"==typeof e?e:e.key;n.hasOwnProperty(s)&&delete n[s]}else e||i.delete(r);return this},getMix:function(t,e){var i=this.mixes,r="string"==typeof t?t:t.key,n="string"==typeof e?e:e.key,s=i.get(r);return s&&s.hasOwnProperty(n)?s[n]:0},add:function(t,e){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e),this)},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,e){var i=[],r=this.game.cache.json.get(t);if(!r)return i;var n=this,s=l(r,"meta",null),o=l(r,"frames",null);return s&&o&&l(s,"frameTags",[]).forEach((function(r){var s=[],a=c(r,"name",null),h=c(r,"from",0),l=c(r,"to",0),u=c(r,"direction","forward");if(a&&(!e||e&&e.indexOf(a)>-1)){for(var d=[],f=Number.MAX_SAFE_INTEGER,p=h;p<=l;p++){var g=p.toString(),y=o[g];if(y){var m=c(y,"duration",Number.MAX_SAFE_INTEGER);m<f&&(f=m),d.push({frame:g,duration:m})}}d.forEach((function(e){s.push({key:t,frame:e.frame,duration:f-e.duration})}));var v=f*s.length;"reverse"===u&&(s=s.reverse());var b={key:a,frames:s,duration:v,yoyo:"pingpong"===u},w=n.create(b);w&&i.push(w)}})),i},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new r(this,e,t),this.anims.set(e,i),this.emit(a.ADD_ANIMATION,e,i))),i},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var i=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var r=0;r<t.anims.length;r++)i.push(this.create(t.anims[r]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&i.push(this.create(t));return i},generateFrameNames:function(t,e){var i,r=l(e,"prefix",""),n=l(e,"start",0),s=l(e,"end",0),o=l(e,"suffix",""),a=l(e,"zeroPad",0),h=l(e,"outputArray",[]),c=l(e,"frames",!1),f=this.textureManager.get(t);if(!f)return h;if(e)for(c||(c=d(n,s)),i=0;i<c.length;i++){var p=r+u(c[i],a,"0",1)+o;f.has(p)?h.push({key:t,frame:p}):console.warn("generateFrameNames: Frame missing: "+p+" from texture: "+t)}else for(c=f.getFrameNames(),i=0;i<c.length;i++)h.push({key:t,frame:c[i]});return h},generateFrameNumbers:function(t,e){var i=l(e,"start",0),r=l(e,"end",-1),n=l(e,"first",!1),s=l(e,"outputArray",[]),o=l(e,"frames",!1),a=this.textureManager.get(t);if(!a)return s;n&&a.has(n)&&s.push({key:t,frame:n}),o||(-1===r&&(r=a.frameTotal-2),o=d(i,r));for(var h=0;h<o.length;h++)a.has(o[h])?s.push({key:t,frame:o[h]}):console.warn("generateFrameNumbers: Frame "+h+" missing from texture: "+t);return s},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)e[i].anims.play(t);return this},staggerPlay:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=!0),Array.isArray(e)||(e=[e]);var n=e.length;r||n--;for(var s=0;s<e.length;s++){var o=i<0?Math.abs(i)*(n-s):i*s;e[s].anims.playAfterDelay(t,o)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,i){e.anims.push(i.toJSON())})),e},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=f},function(t,e){t.exports=function(t,e,i,r){var n,s=[],o=!1;if((i||r)&&(o=!0,i||(i=""),r||(r="")),e<t)for(n=t;n>=e;n--)o?s.push(i+n.toString()+r):s.push(n);else for(n=t;n<=e;n++)o?s.push(i+n.toString()+r):s.push(n);return s}},function(t,e,i){var r=i(0),n=i(102),s=i(9),o=i(324),a=new r({initialize:function(){this.entries=new n,this.events=new s},add:function(t,e){return this.entries.set(t,e),this.events.emit(o.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(o.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=a},function(t,e,i){t.exports={ADD:i(736),REMOVE:i(737)}},function(t,e,i){var r=i(323),n=i(0),s=i(22),o=new n({initialize:function(t){this.game=t,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.video=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new r),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});t.exports=o},function(t,e,i){var r=i(133),n=i(190),s=i(18),o=i(0),a=i(11),h=i(333),c=i(37),l=i(135),u=i(10),d=i(3),f=new o({Extends:r,Mixins:[a.Flip,a.Tint,a.Pipeline],initialize:function(t,e,i,n){r.call(this,t,e,i,n),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new u(0,0,t,e),this._follow){var i=this.width/2,r=this.height/2,s=this._follow.x-this.followOffset.x,o=this._follow.y-this.followOffset.y;this.midPoint.set(s,o),this.scrollX=s-i,this.scrollY=o-r}n(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,i,r,n,s){return this.fadeEffect.start(!1,t,e,i,r,!0,n,s)},fadeOut:function(t,e,i,r,n,s){return this.fadeEffect.start(!0,t,e,i,r,!0,n,s)},fadeFrom:function(t,e,i,r,n,s,o){return this.fadeEffect.start(!1,t,e,i,r,n,s,o)},fade:function(t,e,i,r,n,s,o){return this.fadeEffect.start(!0,t,e,i,r,n,s,o)},flash:function(t,e,i,r,n,s,o){return this.flashEffect.start(t,e,i,r,n,s,o)},shake:function(t,e,i,r,n){return this.shakeEffect.start(t,e,i,r,n)},pan:function(t,e,i,r,n,s,o){return this.panEffect.start(t,e,i,r,n,s,o)},rotateTo:function(t,e,i,r,n,s,o){return this.rotateToEffect.start(t,e,i,r,n,s,o)},zoomTo:function(t,e,i,r,n,s){return this.zoomEffect.start(t,e,i,r,n,s)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,r=.5*e,s=this.zoom,o=this.matrix,a=t*this.originX,h=e*this.originY,u=this._follow,d=this.deadzone,f=this.scrollX,p=this.scrollY;d&&n(d,this.midPoint.x,this.midPoint.y);var g=!1;if(u&&!this.panEffect.isRunning){var y=u.x-this.followOffset.x,m=u.y-this.followOffset.y;d?(y<d.x?f=l(f,f-(d.x-y),this.lerp.x):y>d.right&&(f=l(f,f+(y-d.right),this.lerp.x)),m<d.y?p=l(p,p-(d.y-m),this.lerp.y):m>d.bottom&&(p=l(p,p+(m-d.bottom),this.lerp.y))):(f=l(f,y-a,this.lerp.x),p=l(p,m-h,this.lerp.y)),g=!0}this.useBounds&&(f=this.clampX(f),p=this.clampY(p)),this.roundPixels&&(a=Math.round(a),h=Math.round(h),f=Math.round(f),p=Math.round(p)),this.scrollX=f,this.scrollY=p;var v=f+i,b=p+r;this.midPoint.set(v,b);var w=t/s,_=e/s,x=v-w/2,E=b-_/2;this.roundPixels&&(x=Math.round(x),E=Math.round(E)),this.worldView.setTo(x,E,w,_),o.applyITRS(this.x+a,this.y+h,this.rotation,s,s),o.translate(-a,-h),this.shakeEffect.preRender(),g&&this.emit(c.FOLLOW_UPDATE,this,u)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,i,r,n,o){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===r&&(r=i),void 0===n&&(n=0),void 0===o&&(o=n),this._follow=t,this.roundPixels=e,i=s(i,0,1),r=s(r,0,1),this.lerp.set(i,r),this.followOffset.set(n,o);var a=this.width/2,h=this.height/2,c=t.x-n,l=t.y-o;return this.midPoint.set(c,l),this.scrollX=c-a,this.scrollY=l-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=f},function(t,e,i){var r=i(38);t.exports=function(t){var e=new r;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,r){return e+e+i+i+r+r}));var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(i){var n=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);e.setTo(n,s,o)}return e}},function(t,e){t.exports=function(t,e,i,r){return r<<24|t<<16|e<<8|i}},function(t,e){t.exports=function(t,e,i,r){void 0===r&&(r={h:0,s:0,v:0}),t/=255,e/=255,i/=255;var n=Math.min(t,e,i),s=Math.max(t,e,i),o=s-n,a=0,h=0===s?0:o/s,c=s;return s!==n&&(s===t?a=(e-i)/o+(e<i?6:0):s===e?a=(i-t)/o+2:s===i&&(a=(t-e)/o+4),a/=6),r.hasOwnProperty("_h")?(r._h=a,r._s=h,r._v=c):(r.h=a,r.s=h,r.v=c),r}},function(t,e){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,i){var r=i(38);t.exports=function(t){return new r(t.r,t.g,t.b,t.a)}},function(t,e,i){var r=i(38);t.exports=function(t){var e=new r,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(i){var n=parseInt(i[1],10),s=parseInt(i[2],10),o=parseInt(i[3],10),a=void 0!==i[4]?parseFloat(i[4]):1;e.setTo(n,s,o,255*a)}return e}},function(t,e,i){t.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(t,e,i){t.exports={In:i(764),Out:i(765),InOut:i(766)}},function(t,e,i){t.exports={In:i(767),Out:i(768),InOut:i(769)}},function(t,e,i){t.exports={In:i(770),Out:i(771),InOut:i(772)}},function(t,e,i){t.exports={In:i(773),Out:i(774),InOut:i(775)}},function(t,e,i){t.exports={In:i(776),Out:i(777),InOut:i(778)}},function(t,e,i){t.exports={In:i(779),Out:i(780),InOut:i(781)}},function(t,e,i){t.exports=i(782)},function(t,e,i){t.exports={In:i(783),Out:i(784),InOut:i(785)}},function(t,e,i){t.exports={In:i(786),Out:i(787),InOut:i(788)}},function(t,e,i){t.exports={In:i(789),Out:i(790),InOut:i(791)}},function(t,e,i){t.exports={In:i(792),Out:i(793),InOut:i(794)}},function(t,e,i){t.exports=i(795)},function(t,e,i){var r=i(0),n=i(33),s=i(347),o=i(2),a=i(6),h=i(7),c=i(193),l=i(1),u=i(197),d=i(187),f=new r({initialize:function(t){void 0===t&&(t={}),this.width=a(t,"width",1024),this.height=a(t,"height",768),this.zoom=a(t,"zoom",1),this.parent=a(t,"parent",void 0),this.scaleMode=a(t,"scaleMode",0),this.expandParent=a(t,"expandParent",!0),this.autoRound=a(t,"autoRound",!1),this.autoCenter=a(t,"autoCenter",0),this.resizeInterval=a(t,"resizeInterval",500),this.fullscreenTarget=a(t,"fullscreenTarget",null),this.minWidth=a(t,"minWidth",0),this.maxWidth=a(t,"maxWidth",0),this.minHeight=a(t,"minHeight",0),this.maxHeight=a(t,"maxHeight",0);var e=a(t,"scale",null);e&&(this.width=a(e,"width",this.width),this.height=a(e,"height",this.height),this.zoom=a(e,"zoom",this.zoom),this.parent=a(e,"parent",this.parent),this.scaleMode=a(e,"mode",this.scaleMode),this.expandParent=a(e,"expandParent",this.expandParent),this.autoRound=a(e,"autoRound",this.autoRound),this.autoCenter=a(e,"autoCenter",this.autoCenter),this.resizeInterval=a(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(e,"min.width",this.minWidth),this.maxWidth=a(e,"max.width",this.maxWidth),this.minHeight=a(e,"min.height",this.minHeight),this.maxHeight=a(e,"max.height",this.maxHeight)),this.renderType=a(t,"type",n.AUTO),this.canvas=a(t,"canvas",null),this.context=a(t,"context",null),this.canvasStyle=a(t,"canvasStyle",null),this.customEnvironment=a(t,"customEnvironment",!1),this.sceneConfig=a(t,"scene",null),this.seed=a(t,"seed",[(Date.now()*Math.random()).toString()]),c.RND=new c.RandomDataGenerator(this.seed),this.gameTitle=a(t,"title",""),this.gameURL=a(t,"url","https://phaser.io"),this.gameVersion=a(t,"version",""),this.autoFocus=a(t,"autoFocus",!0),this.domCreateContainer=a(t,"dom.createContainer",!1),this.domBehindCanvas=a(t,"dom.behindCanvas",!1),this.domPointerEvents=a(t,"dom.pointerEvents","none"),this.inputKeyboard=a(t,"input.keyboard",!0),this.inputKeyboardEventTarget=a(t,"input.keyboard.target",window),this.inputKeyboardCapture=a(t,"input.keyboard.capture",[]),this.inputMouse=a(t,"input.mouse",!0),this.inputMouseEventTarget=a(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(t,"input.touch",s.input.touch),this.inputTouchEventTarget=a(t,"input.touch.target",null),this.inputTouchCapture=a(t,"input.touch.capture",!0),this.inputActivePointers=a(t,"input.activePointers",1),this.inputSmoothFactor=a(t,"input.smoothFactor",0),this.inputWindowEvents=a(t,"input.windowEvents",!0),this.inputGamepad=a(t,"input.gamepad",!1),this.inputGamepadEventTarget=a(t,"input.gamepad.target",window),this.disableContextMenu=a(t,"disableContextMenu",!1),this.audio=a(t,"audio",{}),this.hideBanner=!1===a(t,"banner",null),this.hidePhaser=a(t,"banner.hidePhaser",!1),this.bannerTextColor=a(t,"banner.text","#ffffff"),this.bannerBackgroundColor=a(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(t,"fps",null);var i=a(t,"render",t);this.pipeline=a(i,"pipeline",null),this.antialias=a(i,"antialias",!0),this.antialiasGL=a(i,"antialiasGL",!0),this.mipmapFilter=a(i,"mipmapFilter","LINEAR"),this.desynchronized=a(i,"desynchronized",!1),this.roundPixels=a(i,"roundPixels",!1),this.pixelArt=a(i,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(i,"transparent",!1),this.clearBeforeRender=a(i,"clearBeforeRender",!0),this.preserveDrawingBuffer=a(i,"preserveDrawingBuffer",!1),this.premultipliedAlpha=a(i,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(i,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(i,"powerPreference","default"),this.batchSize=a(i,"batchSize",4096),this.maxTextures=a(i,"maxTextures",-1),this.maxLights=a(i,"maxLights",10);var r=a(t,"backgroundColor",0);this.backgroundColor=d(r),this.transparent&&(this.backgroundColor=d(0),this.backgroundColor.alpha=0),this.preBoot=a(t,"callbacks.preBoot",l),this.postBoot=a(t,"callbacks.postBoot",l),this.physics=a(t,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(t,"loader.baseURL",""),this.loaderPath=a(t,"loader.path","");var f=s.os.android?6:32;this.loaderMaxParallelDownloads=a(t,"loader.maxParallelDownloads",f),this.loaderCrossOrigin=a(t,"loader.crossOrigin",void 0),this.loaderResponseType=a(t,"loader.responseType",""),this.loaderAsync=a(t,"loader.async",!0),this.loaderUser=a(t,"loader.user",""),this.loaderPassword=a(t,"loader.password",""),this.loaderTimeout=a(t,"loader.timeout",0),this.loaderWithCredentials=a(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var p=a(t,"plugins",null),g=u.DefaultScene;p&&(Array.isArray(p)?this.defaultPlugins=p:h(p)&&(this.installGlobalPlugins=o(p,"global",[]),this.installScenePlugins=o(p,"scene",[]),Array.isArray(p.default)?g=p.default:Array.isArray(p.defaultMerge)&&(g=g.concat(p.defaultMerge)))),this.defaultPlugins=g;var y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(t,"images.default",y+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(t,"images.missing",y+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=n.WEBGL:window.FORCE_CANVAS&&(this.renderType=n.CANVAS))}});t.exports=f},function(t,e,i){t.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(t,e,i){var r,n,s,o=i(31),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(s=new Image).onload=function(){var t=new Image;t.onload=function(){var e=o.create(t,6,1).getContext("2d");if(e.globalCompositeOperation="multiply",e.drawImage(s,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var i=e.getImageData(2,0,1,1).data;o.remove(t),a.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},t.src=r+"/wCKxvRF"+n},s.src=r+"AP804Oa6"+n,!1),a.supportInverseAlpha=function(){var t=o.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var i=t.getImageData(1,0,1,1);return i.data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3]}()),a)},function(t,e){t.exports=function(t,e,i,r){return Math.atan2(r-e,i-t)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}},function(t,e){t.exports=function(t,e,i,r){var n=t-i,s=e-r;return n*n+s*s}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t>e-i}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t<e+i}},function(t,e,i){var r=i(357);t.exports=function(t,e){return r(t)/r(e)/r(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,i,r,n){return function(t,e){var i=1-t;return i*i*i*e}(t,e)+function(t,e){var i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,n)}},function(t,e){t.exports=function(t,e,i,r){return function(t,e){var i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,r)}},function(t,e,i){var r=i(184);t.exports=function(t,e,i){return e+(i-e)*r(t,0,1)}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e){var i=t.x,r=t.y;return t.x=i*Math.cos(e)-r*Math.sin(e),t.y=i*Math.sin(e)+r*Math.cos(e),t}},function(t,e){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,e,i){var r=new(i(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},fromMat4:function(t){var e=t.val,i=this.val;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=r,this},invert:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=c*s-o*h,u=-c*n+o*a,d=h*n-s*a,f=e*l+i*u+r*d;return f?(f=1/f,t[0]=l*f,t[1]=(-c*i+r*h)*f,t[2]=(o*i-r*s)*f,t[3]=u*f,t[4]=(c*e-r*a)*f,t[5]=(-o*e+r*n)*f,t[6]=d*f,t[7]=(-h*e+i*a)*f,t[8]=(s*e-i*n)*f,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8];return t[0]=s*c-o*h,t[1]=r*h-i*c,t[2]=i*o-r*s,t[3]=o*a-n*c,t[4]=e*c-r*a,t[5]=r*n-e*o,t[6]=n*h-s*a,t[7]=i*a-e*h,t[8]=e*s-i*n,this},determinant:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8];return e*(c*s-o*h)+i*(-c*n+o*a)+r*(h*n-s*a)},multiply:function(t){var e=this.val,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],c=e[7],l=e[8],u=t.val,d=u[0],f=u[1],p=u[2],g=u[3],y=u[4],m=u[5],v=u[6],b=u[7],w=u[8];return e[0]=d*i+f*s+p*h,e[1]=d*r+f*o+p*c,e[2]=d*n+f*a+p*l,e[3]=g*i+y*s+m*h,e[4]=g*r+y*o+m*c,e[5]=g*n+y*a+m*l,e[6]=v*i+b*s+w*h,e[7]=v*r+b*o+w*c,e[8]=v*n+b*a+w*l,this},translate:function(t){var e=this.val,i=t.x,r=t.y;return e[6]=i*e[0]+r*e[3]+e[6],e[7]=i*e[1]+r*e[4]+e[7],e[8]=i*e[2]+r*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=Math.sin(t),c=Math.cos(t);return e[0]=c*i+h*s,e[1]=c*r+h*o,e[2]=c*n+h*a,e[3]=c*s-h*i,e[4]=c*o-h*r,e[5]=c*a-h*n,this},scale:function(t){var e=this.val,i=t.x,r=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=r*e[3],e[4]=r*e[4],e[5]=r*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,r=t.z,n=t.w,s=e+e,o=i+i,a=r+r,h=e*s,c=e*o,l=e*a,u=i*o,d=i*a,f=r*a,p=n*s,g=n*o,y=n*a,m=this.val;return m[0]=1-(u+f),m[3]=c+y,m[6]=l-g,m[1]=c-y,m[4]=1-(h+f),m[7]=d+p,m[2]=l+g,m[5]=d-p,m[8]=1-(h+u),this},normalFromMat4:function(t){var e=t.val,i=this.val,r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],p=e[11],g=e[12],y=e[13],m=e[14],v=e[15],b=r*h-n*a,w=r*c-s*a,_=r*l-o*a,x=n*c-s*h,E=n*l-o*h,S=s*l-o*c,T=u*y-d*g,A=u*m-f*g,C=u*v-p*g,k=d*m-f*y,R=d*v-p*y,P=f*v-p*m,I=b*P-w*R+_*k+x*C-E*A+S*T;return I?(I=1/I,i[0]=(h*P-c*R+l*k)*I,i[1]=(c*C-a*P-l*A)*I,i[2]=(a*R-h*C+l*T)*I,i[3]=(s*R-n*P-o*k)*I,i[4]=(r*P-s*C+o*A)*I,i[5]=(n*C-r*R-o*T)*I,i[6]=(y*S-m*E+v*x)*I,i[7]=(m*_-g*S-v*w)*I,i[8]=(g*E-y*_+v*b)*I,this):null}});t.exports=r},function(t,e,i){var r=i(0),n=i(364),s=i(1),o=i(39),a=1e-6,h=new Int8Array([1,2,0]),c=new Float32Array([0,0,0]),l=new o(1,0,0),u=new o(0,1,0),d=new o,f=new n,p=new r({initialize:function(t,e,i,r){this.onChangeCallback=s,this.set(t,e,i,r)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,i,r,n){return void 0===n&&(n=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=i||0,this._w=r||0),n&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return Math.sqrt(t*t+e*e+i*i+r*r)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return t*t+e*e+i*i+r*r},normalize:function(){var t=this.x,e=this.y,i=this.z,r=this.w,n=t*t+e*e+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),this._x=t*n,this._y=e*n,this._z=i*n,this._w=r*n),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y,n=this.z,s=this.w;return this.set(i+e*(t.x-i),r+e*(t.y-r),n+e*(t.z-n),s+e*(t.w-s))},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(d.copy(l).cross(t).length()<a&&d.copy(u).cross(t),d.normalize(),this.setAxisAngle(d,Math.PI)):i>.999999?this.set(0,0,0,1):(d.copy(t).cross(e),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+i,this.normalize())},setAxes:function(t,e,i){var r=f.val;return r[0]=e.x,r[3]=e.y,r[6]=e.z,r[1]=i.x,r[4]=i.y,r[7]=i.z,r[2]=-t.x,r[5]=-t.y,r[8]=-t.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.set(i*t.x,i*t.y,i*t.z,Math.cos(e))},multiply:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.x,o=t.y,a=t.z,h=t.w;return this.set(e*h+n*s+i*a-r*o,i*h+n*o+r*s-e*a,r*h+n*a+e*o-i*s,n*h-e*s-i*o-r*a)},slerp:function(t,e){var i=this.x,r=this.y,n=this.z,s=this.w,o=t.x,h=t.y,c=t.z,l=t.w,u=i*o+r*h+n*c+s*l;u<0&&(u=-u,o=-o,h=-h,c=-c,l=-l);var d=1-e,f=e;if(1-u>a){var p=Math.acos(u),g=Math.sin(p);d=Math.sin((1-e)*p)/g,f=Math.sin(e*p)/g}return this.set(d*i+f*o,d*r+f*h,d*n+f*c,d*s+f*l)},invert:function(){var t=this.x,e=this.y,i=this.z,r=this.w,n=t*t+e*e+i*i+r*r,s=n?1/n:0;return this.set(-t*s,-e*s,-i*s,r*s)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o+n*s,i*o+r*s,r*o-i*s,n*o-e*s)},rotateY:function(t){t*=.5;var e=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o-r*s,i*o+n*s,r*o+e*s,n*o-i*s)},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o+i*s,i*o-e*s,r*o+n*s,n*o-r*s)},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},setFromEuler:function(t,e){var i=t.x/2,r=t.y/2,n=t.z/2,s=Math.cos(i),o=Math.cos(r),a=Math.cos(n),h=Math.sin(i),c=Math.sin(r),l=Math.sin(n);switch(t.order){case"XYZ":this.set(h*o*a+s*c*l,s*c*a-h*o*l,s*o*l+h*c*a,s*o*a-h*c*l,e);break;case"YXZ":this.set(h*o*a+s*c*l,s*c*a-h*o*l,s*o*l-h*c*a,s*o*a+h*c*l,e);break;case"ZXY":this.set(h*o*a-s*c*l,s*c*a+h*o*l,s*o*l+h*c*a,s*o*a-h*c*l,e);break;case"ZYX":this.set(h*o*a-s*c*l,s*c*a+h*o*l,s*o*l-h*c*a,s*o*a+h*c*l,e);break;case"YZX":this.set(h*o*a+s*c*l,s*c*a+h*o*l,s*o*l-h*c*a,s*o*a-h*c*l,e);break;case"XZY":this.set(h*o*a-s*c*l,s*c*a-h*o*l,s*o*l+h*c*a,s*o*a+h*c*l,e)}return this},setFromRotationMatrix:function(t){var e,i=t.val,r=i[0],n=i[4],s=i[8],o=i[1],a=i[5],h=i[9],c=i[2],l=i[6],u=i[10],d=r+a+u;return d>0?(e=.5/Math.sqrt(d+1),this.set((l-h)*e,(s-c)*e,(o-n)*e,.25/e)):r>a&&r>u?(e=2*Math.sqrt(1+r-a-u),this.set(.25*e,(n+o)/e,(s+c)/e,(l-h)/e)):a>u?(e=2*Math.sqrt(1+a-r-u),this.set((n+o)/e,.25*e,(h+l)/e,(s-c)/e)):(e=2*Math.sqrt(1+u-r-a),this.set((s+c)/e,(h+l)/e,.25*e,(o-n)/e)),this},fromMat3:function(t){var e,i=t.val,r=i[0]+i[4]+i[8];if(r>0)e=Math.sqrt(r+1),this.w=.5*e,e=.5/e,this._x=(i[7]-i[5])*e,this._y=(i[2]-i[6])*e,this._z=(i[3]-i[1])*e;else{var n=0;i[4]>i[0]&&(n=1),i[8]>i[3*n+n]&&(n=2);var s=h[n],o=h[s];e=Math.sqrt(i[3*n+n]-i[3*s+s]-i[3*o+o]+1),c[n]=.5*e,e=.5/e,c[s]=(i[3*s+n]+i[3*n+s])*e,c[o]=(i[3*o+n]+i[3*n+o])*e,this._x=c[0],this._y=c[1],this._z=c[2],this._w=(i[3*o+s]-i[3*s+o])*e}return this.onChangeCallback(this),this}});t.exports=p},function(t,e,i){var r=i(367),n=i(31),s=i(33),o=i(191);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==s.HEADLESS)if(e.renderType===s.CANVAS||e.renderType!==s.CANVAS&&!o.webGL){if(!o.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=s.CANVAS}else e.renderType=s.WEBGL;e.antialias||n.disableSmoothing();var a,h,c=t.scale.baseSize,l=c.width,u=c.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=l,t.canvas.height=u):t.canvas=n.create(t,l,u,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||r.setCrisp(t.canvas),e.renderType!==s.HEADLESS&&(a=i(368),h=i(371),e.renderType===s.WEBGL?t.renderer=new h(t):(t.renderer=new a(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e,i){var r=i(37),n=i(369),s=i(0),o=i(33),a=i(9),h=i(91),c=i(370),l=i(104),u=i(106),d=i(25),f=new s({Extends:a,initialize:function(t){a.call(this);var e=t.config;this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var i={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=e.context?e.context:this.gameCanvas.getContext("2d",i),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=c(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(u.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(l.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(h.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,r=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,i,r),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,r))),t.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(t,e,i){var n=e.length;this.emit(h.RENDER,t,i);var s=i.x,o=i.y,a=i.width,c=i.height,l=i.renderToTexture?i.context:t.sys.context;l.save(),this.game.scene.customViewports&&(l.beginPath(),l.rect(s,o,a,c),l.clip()),this.currentContext=l;var u=i.mask;u&&u.preRenderCanvas(this,null,i._maskCamera),i.transparent||(l.fillStyle=i.backgroundColor.rgba,l.fillRect(s,o,a,c)),l.globalAlpha=i.alpha,l.globalCompositeOperation="source-over",this.drawCount+=n,i.renderToTexture&&i.emit(r.PRE_RENDER,i),i.matrix.copyToContext(l);for(var d=0;d<n;d++){var f=e[d];f.mask&&f.mask.preRenderCanvas(this,f,i),f.renderCanvas(this,f,i),f.mask&&f.mask.postRenderCanvas(this,f,i)}l.setTransform(1,0,0,1,0,0),l.globalCompositeOperation="source-over",l.globalAlpha=1,i.flashEffect.postRenderCanvas(l),i.fadeEffect.postRenderCanvas(l),i.dirty=!1,u&&u.postRenderCanvas(this),l.restore(),i.renderToTexture&&(i.emit(r.POST_RENDER,i),i.renderToGame&&t.sys.context.drawImage(i.canvas,s,o))},postRender:function(){this.gameContext.restore(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(n(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,i,r,s,o,a,h,c){void 0===i&&(i=!1),this.snapshotArea(r,s,o,a,e,h,c);var l=this.snapshotState;return l.getPixel=i,n(this.canvas,l),l.callback=null,this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,r,n,s,o){var a=this.snapshotState;return a.callback=n,a.type=s,a.encoder=o,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gameCanvas.width),a.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,r){var n=i.alpha*t.alpha;if(0!==n){var s=this.currentContext,o=this._tempMatrix1,a=this._tempMatrix2,h=e.canvasData,c=h.x,l=h.y,u=e.cutWidth,d=e.cutHeight,f=e.customPivot,p=e.source.resolution,g=t.displayOriginX,y=t.displayOriginY,m=-g+e.x,v=-y+e.y;if(t.isCropped){var b=t._crop;b.flipX===t.flipX&&b.flipY===t.flipY||e.updateCropUVs(b,t.flipX,t.flipY),u=b.cw,d=b.ch,c=b.cx,l=b.cy,m=-g+b.x,v=-y+b.y,t.flipX&&(m>=0?m=-(m+u):m<0&&(m=Math.abs(m)-u)),t.flipY&&(v>=0?v=-(v+d):v<0&&(v=Math.abs(v)-d))}var w=1,_=1;t.flipX&&(f||(m+=-e.realWidth+2*g),w=-1),t.flipY&&(f||(v+=-e.realHeight+2*y),_=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*w,t.scaleY*_),o.copyFrom(i.matrix),r?(o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),o.multiply(a),s.save(),o.setToContext(s),s.globalCompositeOperation=this.blendModes[t.blendMode],s.globalAlpha=n,s.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,i),s.drawImage(e.source.image,c,l,u,d,m,v,u/p,d/p),t.mask&&t.mask.postRenderCanvas(this,t,i),s.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=f},function(t,e,i){var r=i(31),n=i(38),s=i(2);t.exports=function(t,e){var i=s(e,"callback"),o=s(e,"type","image/png"),a=s(e,"encoder",.92),h=Math.abs(Math.round(s(e,"x",0))),c=Math.abs(Math.round(s(e,"y",0))),l=s(e,"width",t.width),u=s(e,"height",t.height);if(s(e,"getPixel",!1)){var d=t.getContext("2d").getImageData(h,c,1,1).data;i.call(null,new n(d[0],d[1],d[2],d[3]/255))}else if(0!==h||0!==c||l!==t.width||u!==t.height){var f=r.createWebGL(this,l,u);f.getContext("2d").drawImage(t,h,c,l,u,0,0,l,u);var p=new Image;p.onerror=function(){i.call(null),r.remove(f)},p.onload=function(){i.call(null,p),r.remove(f)},p.src=f.toDataURL(o,a)}else{var g=new Image;g.onerror=function(){i.call(null)},g.onload=function(){i.call(null,g)},g.src=t.toDataURL(o,a)}}},function(t,e,i){var r=i(35),n=i(348);t.exports=function(){var t=[],e=n.supportNewBlendModes,i="source-over";return t[r.NORMAL]=i,t[r.ADD]="lighter",t[r.MULTIPLY]=e?"multiply":i,t[r.SCREEN]=e?"screen":i,t[r.OVERLAY]=e?"overlay":i,t[r.DARKEN]=e?"darken":i,t[r.LIGHTEN]=e?"lighten":i,t[r.COLOR_DODGE]=e?"color-dodge":i,t[r.COLOR_BURN]=e?"color-burn":i,t[r.HARD_LIGHT]=e?"hard-light":i,t[r.SOFT_LIGHT]=e?"soft-light":i,t[r.DIFFERENCE]=e?"difference":i,t[r.EXCLUSION]=e?"exclusion":i,t[r.HUE]=e?"hue":i,t[r.SATURATION]=e?"saturation":i,t[r.COLOR]=e?"color":i,t[r.LUMINOSITY]=e?"luminosity":i,t[r.ERASE]="destination-out",t[r.SOURCE_IN]="source-in",t[r.SOURCE_OUT]="source-out",t[r.SOURCE_ATOP]="source-atop",t[r.DESTINATION_OVER]="destination-over",t[r.DESTINATION_IN]="destination-in",t[r.DESTINATION_OUT]="destination-out",t[r.DESTINATION_ATOP]="destination-atop",t[r.LIGHTER]="lighter",t[r.COPY]="copy",t[r.XOR]="xor",t}},function(t,e,i){var r=i(93),n=i(37),s=i(0),o=i(33),a=i(9),h=i(91),c=i(22),l=i(138),u=i(69),d=i(1),f=i(372),p=i(141),g=i(104),y=i(106),m=i(12),v=i(383),b=new s({Extends:a,initialize:function(t){a.call(this);var e=t.config,i={alpha:e.transparent,desynchronized:e.desynchronized,depth:!1,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:i,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var e,i=this.game,r=this.canvas,n=t.backgroundColor;if(!(e=i.config.context?i.config.context:r.getContext("webgl",t.contextCreation)||r.getContext("experimental-webgl",t.contextCreation))||e.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=e;var s=this;this.contextLostHandler=function(t){s.contextLost=!0,s.game.events.emit(c.CONTEXT_LOST,s),t.preventDefault()},this.contextRestoredHandler=function(){s.contextLost=!1,s.init(s.config),s.game.events.emit(c.CONTEXT_RESTORED,s)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=e;for(var a=0;a<=27;a++)this.blendModes.push({func:[e.ONE,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_ADD});this.blendModes[1].func=[e.ONE,e.DST_ALPHA],this.blendModes[2].func=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[e.ZERO,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=e.BYTE,this.glFormats[1]=e.SHORT,this.glFormats[2]=e.UNSIGNED_BYTE,this.glFormats[3]=e.UNSIGNED_SHORT,this.glFormats[4]=e.FLOAT,this.glFuncMap={mat2:{func:e.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:e.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:e.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:e.uniform1f,length:1},"1fv":{func:e.uniform1fv,length:1},"1i":{func:e.uniform1i,length:1},"1iv":{func:e.uniform1iv,length:1},"2f":{func:e.uniform2f,length:2},"2fv":{func:e.uniform2fv,length:1},"2i":{func:e.uniform2i,length:2},"2iv":{func:e.uniform2iv,length:1},"3f":{func:e.uniform3f,length:3},"3fv":{func:e.uniform3fv,length:1},"3i":{func:e.uniform3i,length:3},"3iv":{func:e.uniform3iv,length:1},"4f":{func:e.uniform4f,length:4},"4fv":{func:e.uniform4fv,length:1},"4i":{func:e.uniform4i,length:4},"4iv":{func:e.uniform4iv,length:1}};var h=e.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE));var l="WEBGL_compressed_texture_",d="WEBKIT_"+l;this.compression.ETC1=e.getExtension(l+"etc1")||e.getExtension(d+"etc1"),this.compression.PVRTC=e.getExtension(l+"pvrtc")||e.getExtension(d+"pvrtc"),this.compression.S3TC=e.getExtension(l+"s3tc")||e.getExtension(d+"s3tc"),this.supportedExtensions=h;var p="ANGLE_instanced_arrays";this.instancedArraysExtension=h.indexOf(p)>-1?e.getExtension(p):null;var g="OES_vertex_array_object";this.vaoExtension=h.indexOf(g)>-1?e.getExtension(g):null,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL),this.mipmapFilter=e[t.mipmapFilter],this.maxTextures=m.checkShaderMax(e,t.maxTextures),this.textureIndexes=[];var v=this.tempTextures;if(Array.isArray(v))for(var b=0;a<this.maxTextures;b++)e.deleteTexture(v[b]);else v=new Array(this.maxTextures);for(var w=0;w<this.maxTextures;w++){var _=e.createTexture();e.activeTexture(e.TEXTURE0+w),e.bindTexture(e.TEXTURE_2D,_),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),v[w]=_,this.textureIndexes.push(w)}return this.tempTextures=v,this.currentActiveTexture=1,this.startActiveTexture++,e.activeTexture(e.TEXTURE1),this.pipelines=new f(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=(new u).identity(),i.textures.once(y.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new p(this,this.width,this.height,1,0,!0,!0),e.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),t.scale.on(g.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var i=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),i.viewport(0,0,t,e),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(h.RESIZE,t,e),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=[t,e,i,r];return this.scissorStack.push(s),this.setScissor(t,e,i,r,n),this.currentScissor=s,s},setScissor:function(t,e,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=this.gl,o=this.currentScissor,a=i>0&&r>0;if(o&&a){var h=o[0],c=o[1],l=o[2],u=o[3];a=h!==t||c!==e||l!==i||u!==r}a&&(this.flush(),s.scissor(t,n-e-r,i,r))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var e=this.currentScissor;if(e){var i=e[0],r=e[1],n=e[2],s=e[3];n>0&&s>0&&t.scissor(i,this.drawingBufferHeight-r-s,n,s)}},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){void 0===e&&(e=!1);var i=this.gl,r=this.blendModes[t];return!!(e||t!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,i){return this.blendModes[t]&&(this.blendModes[t].func=e,i&&(this.blendModes[t].equation=i)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,e){return this.textureZero!==t||this.normalTexture!==e},setTextureZero:function(t,e){if(this.textureZero!==t){e&&this.flush();var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){if(this.normalTexture!==t){var e=this.gl;e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var e=this.gl,i=this.tempTextures;if(t){for(var r=0;r<i.length;r++)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,i[r]);e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]),this.isTextureClean=!0}else e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i[0]),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,e,i,r){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,i,r))},setFramebuffer:function(t,e,i,r){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=!0),t===this.currentFramebuffer)return this;var n=this.gl,s=this.width,o=this.height;return t&&t.renderTexture&&r?(s=t.renderTexture.width,o=t.renderTexture.height):this.flush(),n.bindFramebuffer(n.FRAMEBUFFER,t),r&&n.viewport(0,0,s,o),e&&(t?(this.drawingBufferHeight=o,this.pushScissor(0,0,s,o)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,i&&this.resetTextures(),this},popFramebuffer:function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!0);var r=this.fboStack;r.pop();var n=r[r.length-1];return n||(n=null),this.setFramebuffer(n,t,e,i),n},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,e,i,r){var n=this.gl,s=n.NEAREST,a=n.NEAREST,h=n.CLAMP_TO_EDGE;e=t?t.width:e,i=t?t.height:i;var c=l(e,i);return c&&(h=n.REPEAT),r===o.ScaleModes.LINEAR&&this.config.antialias&&(s=c?this.mipmapFilter:n.LINEAR,a=n.LINEAR),t||"number"!=typeof e||"number"!=typeof i?this.createTexture2D(0,s,a,h,h,n.RGBA,t):this.createTexture2D(0,s,a,h,h,n.RGBA,null,e,i)},createTexture2D:function(t,e,i,r,n,s,o,a,h,c,u,d){c=null==c||c,void 0===u&&(u=!1),void 0===d&&(d=!1);var f=this.gl,p=f.createTexture();f.activeTexture(f.TEXTURE0);var g=f.getParameter(f.TEXTURE_BINDING_2D);return f.bindTexture(f.TEXTURE_2D,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,n),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,r),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,d),null==o?f.texImage2D(f.TEXTURE_2D,t,s,a,h,0,s,f.UNSIGNED_BYTE,null):(u||(a=o.width,h=o.height),f.texImage2D(f.TEXTURE_2D,t,s,s,f.UNSIGNED_BYTE,o)),l(a,h)&&f.generateMipmap(f.TEXTURE_2D),g&&f.bindTexture(f.TEXTURE_2D,g),p.isAlphaPremultiplied=c,p.isRenderTexture=!1,p.width=a,p.height=h,p.glIndex=0,p.glIndexCounter=-1,p},createFramebuffer:function(t,e,i,r){var n,s=this.gl,o=s.createFramebuffer();if(this.setFramebuffer(o),r){var a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t,e),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),(n=s.checkFramebufferStatus(s.FRAMEBUFFER))!==s.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[n]);return o.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),o},createProgram:function(t,e){var i=this.gl,r=i.createProgram(),n=i.createShader(i.VERTEX_SHADER),s=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(n,t),i.shaderSource(s,e),i.compileShader(n),i.compileShader(s),!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+i.getShaderInfoLog(n));if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+i.getShaderInfoLog(s));if(i.attachShader(r,n),i.attachShader(r,s),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error("Link Program failed:\n"+i.getProgramInfoLog(r));return i.useProgram(r),r},createVertexBuffer:function(t,e){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,r),i.bufferData(i.ARRAY_BUFFER,t,e),i.bindBuffer(i.ARRAY_BUFFER,null),r},createIndexBuffer:function(t,e){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(t,e){return e&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),r(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e=t.x,i=t.y,r=t.width,s=t.height,o=t.backgroundColor;t.emit(n.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,i,r,s),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),o.alphaGL>0&&this.pipelines.setMulti().drawFillRect(e,i,r,s,m.getTintFromFloats(o.blueGL,o.greenGL,o.redGL,1),o.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,i=this.currentCameraMask;return e.length>0?t=e[e.length-1]:i.mask&&i.mask.isStencil&&(t=i),t},postRenderCamera:function(t){var e=t.flashEffect,i=t.fadeEffect;if(e.isRunning||i.isRunning||i.isComplete){var r=this.pipelines.setMulti();e.postRenderWebGL(r,m.getTintFromFloats),i.postRenderWebGL(r,m.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(n.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var e=this.config.backgroundColor;t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(h.PRE_RENDER)}},render:function(t,e,i){if(!this.contextLost){var r=e.length;if(this.emit(h.RENDER,t,i),this.preRenderCamera(i),0===r)return this.setBlendMode(o.BlendModes.NORMAL),void this.postRenderCamera(i);this.currentType="";for(var n=this.currentMask,s=0;s<r;s++){this.finalType=s===r-1;var a=e[s],c=a.mask;(n=this.currentMask).mask&&n.mask!==c&&n.mask.postRenderWebGL(this,n.camera),c&&n.mask!==c&&c.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var l=a.type;l!==this.currentType&&(this.newType=!0,this.currentType=l),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[s+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}(n=this.currentMask).mask&&n.mask.postRenderWebGL(this,n.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(v(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,i)},snapshotArea:function(t,e,i,r,n,s,o){var a=this.snapshotState;return a.callback=n,a.type=s,a.encoder=o,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gl.drawingBufferWidth),a.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,i,r,n,s,o,a,h,c,l){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=e),void 0===h&&(h=i);var u=this.currentFramebuffer;this.snapshotArea(s,o,a,h,r,c,l);var d=this.snapshotState;return d.getPixel=n,d.isFramebuffer=!0,d.bufferWidth=e,d.bufferHeight=i,this.setFramebuffer(t),v(this.canvas,d),this.setFramebuffer(u),d.callback=null,d.isFramebuffer=!1,this},canvasToTexture:function(t,e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e?this.updateCanvasTexture(t,e,r):this.createCanvasTexture(t,i,r)},createCanvasTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this.gl,n=r.NEAREST,s=r.NEAREST,o=t.width,a=t.height,h=r.CLAMP_TO_EDGE,c=l(o,a);return!e&&c&&(h=r.REPEAT),this.config.antialias&&(n=c?this.mipmapFilter:r.LINEAR,s=r.LINEAR),this.createTexture2D(0,n,s,h,h,r.RGBA,t,o,a,!0,!1,i)},updateCanvasTexture:function(t,e,i){void 0===i&&(i=!1);var r=this.gl,n=t.width,s=t.height;if(n>0&&s>0){r.activeTexture(r.TEXTURE0);var o=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=n,e.height=s,o&&r.bindTexture(r.TEXTURE_2D,o)}return e},createVideoTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this.gl,n=r.NEAREST,s=r.NEAREST,o=t.videoWidth,a=t.videoHeight,h=r.CLAMP_TO_EDGE,c=l(o,a);return!e&&c&&(h=r.REPEAT),this.config.antialias&&(n=c?this.mipmapFilter:r.LINEAR,s=r.LINEAR),this.createTexture2D(0,n,s,h,h,r.RGBA,t,o,a,!0,!0,i)},updateVideoTexture:function(t,e,i){void 0===i&&(i=!1);var r=this.gl,n=t.videoWidth,s=t.videoHeight;if(n>0&&s>0){r.activeTexture(r.TEXTURE0);var o=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=n,e.height=s,o&&r.bindTexture(r.TEXTURE_2D,o)}return e},setTextureFilter:function(t,e){var i=this.gl,r=[i.LINEAR,i.NEAREST][e];i.activeTexture(i.TEXTURE0);var n=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),n&&i.bindTexture(i.TEXTURE_2D,n),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.deleteTexture(e[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=b},function(t,e,i){var r=i(0),n=i(92),s=i(102),o=i(373),a=i(376),h=i(377),c=i(108),l=i(378),u=i(379),d=i(380),f=i(381),p=new r({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new s([[n.UTILITY_PIPELINE,f],[n.MULTI_PIPELINE,c],[n.BITMAPMASK_PIPELINE,o],[n.SINGLE_PIPELINE,d],[n.ROPE_PIPELINE,u],[n.LIGHT_PIPELINE,h],[n.POINTLIGHT_PIPELINE,l],[n.GRAPHICS_PIPELINE,a]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var e,i,r=this,s=this.game;if(this.classes.each((function(t,i){e=r.add(t,new i({game:s})),t===n.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=e,r.fullFrame1=e.fullFrame1,r.fullFrame2=e.fullFrame2,r.halfFrame1=e.halfFrame1,r.halfFrame2=e.halfFrame2)})),this.MULTI_PIPELINE=this.get(n.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(n.BITMAPMASK_PIPELINE),t)for(i in t){var o=t[i];(e=new o(s)).isPostFX?this.postPipelineClasses.set(i,o):this.has(i)||(this.classes.set(i,o),this.add(i,e))}},add:function(t,e){if(!e.isPostFX){var i=this.pipelines,r=this.renderer;return i.has(t)?console.warn("Pipeline exists: "+t):(e.name=t,e.manager=this,i.set(t,e)),e.hasBooted||e.boot(),0!==r.width&&0!==r.height&&e.resize(r.width,r.height),e}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"==typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"==typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e){var i,r=this.postPipelineClasses;if("string"==typeof t?i=r.get(t):"function"==typeof t?r.contains(t)&&(i=t):"object"==typeof t&&(i=r.get(t.name)),i){var n=new i(this.game);return e&&(n.gameObject=e),n}},remove:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.pipelines.delete(t),e&&this.classes.delete(t),i&&this.postPipelineClasses.delete(t)},set:function(t,e,i){if(!t.isPostFX)return this.isCurrent(t,i)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(i)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;i>=0;i--){var r=e[i];r.active&&r.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var r=e[i];r.active&&r.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;i>=0;i--){var r=e[i];r.active&&r.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var r=e[i];r.active&&r.postBatch(t)}}},isCurrent:function(t,e){var i=this.renderer,r=this.current;return r&&!e&&(e=r.currentShader),!(r!==t||e.program!==i.currentProgram)},copyFrame:function(t,e,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,i,r,n),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,i,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,i,r),this},blendFrames:function(t,e,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,i,r,n),this},blendFramesAdditive:function(t,e,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,i,r,n),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,i,r,n,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,i,r,n,s),this},copyFrameRect:function(t,e,i,r,n,s,o,a){return this.UTILITY_PIPELINE.copyFrameRect(t,e,i,r,n,s,o,a),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e=this.renderer,i=e.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),e.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,e.width,e.height),e.currentProgram=null,e.setBlendMode(0,!0);var r=this.pipelines.entries;for(var n in r)r[n].glReset=!0;t&&(this.current=t,t.rebind()),e.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=p},function(t,e,i){var r=i(0),n=i(2),s=i(866),o=i(867),a=i(107),h=i(58),c=new r({Extends:h,initialize:function(t){t.fragShader=n(t,"fragShader",s),t.vertShader=n(t,"vertShader",o),t.batchSize=n(t,"batchSize",1),t.vertices=n(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=n(t,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),h.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){h.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,i){var r=this.gl;if(t.bitmapMask&&r){var n=this.renderer;n.flush(),n.pushFramebuffer(t.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),n.currentCameraMask.mask!==t&&(n.currentMask.mask=t,n.currentMask.camera=i)}},endMask:function(t,e){var i=this.gl,r=this.renderer,n=t.bitmapMask;if(n&&i){r.flush(),r.pushFramebuffer(t.maskFramebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),n.renderWebGL(r,n,e),r.flush(),r.popFramebuffer(),r.popFramebuffer();var s=r.getCurrentStencilMask();s?(i.enable(i.STENCIL_TEST),s.mask.applyStencil(r,s.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.maskTexture),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),i.drawArrays(this.topology,0,3),r.resetTextures()}}});t.exports=c},function(t,e,i){t.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(t,e,i){var r=i(0),n=i(2),s=i(107),o=new r({initialize:function(t,e,i,r,n){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(i,r),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(t){var e=0,i=0,r=[];this.vertexComponentCount=0;for(var o=0;o<t.length;o++){var a=t[o],h=a.name,c=n(a,"size",1),l=n(a,"type",s.FLOAT),u=l.enum,d=l.size,f=!!a.normalized;r.push({name:h,size:c,type:u,normalized:f,offset:i,enabled:!1,location:-1}),4===d?e+=c:e++,i+=c*d}this.vertexSize=i,this.vertexComponentCount=e,this.attributes=r},bind:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),e&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,i=this.vertexSize,r=this.attributes,n=this.program,s=0;s<r.length;s++){var o=r[s],a=o.size,h=o.type,c=o.offset,l=o.enabled,u=o.location,d=!!o.normalized;if(t){var f=e.getAttribLocation(n,o.name);f>=0?(e.enableVertexAttribArray(f),e.vertexAttribPointer(f,a,h,d,i,c),o.enabled=!0,o.location=f):-1!==f&&e.disableVertexAttribArray(f)}else l?e.vertexAttribPointer(u,a,h,d,i,c):!l&&u>-1&&(e.disableVertexAttribArray(u),o.location=-1)}return this},createUniforms:function(){var t,e,i,r=this.gl,n=this.program,s=this.uniforms,o=r.getProgramParameter(n,r.ACTIVE_UNIFORMS);for(t=0;t<o;t++){var a=r.getActiveUniform(n,t);if(a){e=a.name,null!==(i=r.getUniformLocation(n,e))&&(s[e]={name:e,location:i,value1:null,value2:null,value3:null,value4:null});var h=e.indexOf("[");h>0&&(e=e.substr(0,h),s.hasOwnProperty(e)||null!==(i=r.getUniformLocation(n,e))&&(s[e]={name:e,location:i,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var e=this.uniforms[t];return e&&(e.value1=null,e.value2=null,e.value3=null,e.value4=null),this},setUniform1:function(t,e,i,r){var n=this.uniforms[e];return n?((r||n.value1!==i)&&(n.value1=i,this.renderer.setProgram(this.program),t.call(this.gl,n.location,i),this.pipeline.currentShader=this),this):this},setUniform2:function(t,e,i,r,n){var s=this.uniforms[e];return s?((n||s.value1!==i||s.value2!==r)&&(s.value1=i,s.value2=r,this.renderer.setProgram(this.program),t.call(this.gl,s.location,i,r),this.pipeline.currentShader=this),this):this},setUniform3:function(t,e,i,r,n,s){var o=this.uniforms[e];return o?((s||o.value1!==i||o.value2!==r||o.value3!==n)&&(o.value1=i,o.value2=r,o.value3=n,this.renderer.setProgram(this.program),t.call(this.gl,o.location,i,r,n),this.pipeline.currentShader=this),this):this},setUniform4:function(t,e,i,r,n,s,o){var a=this.uniforms[e];return a?((o||a.value1!==i||a.value2!==r||a.value3!==n||a.value4!==s)&&(a.value1=i,a.value2=r,a.value3=n,a.value4=s,this.renderer.setProgram(this.program),t.call(this.gl,a.location,i,r,n,s),this.pipeline.currentShader=this),this):this},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,i){return this.setUniform2(this.gl.uniform2f,t,e,i)},set3f:function(t,e,i,r){return this.setUniform3(this.gl.uniform3f,t,e,i,r)},set4f:function(t,e,i,r,n){return this.setUniform4(this.gl.uniform4f,t,e,i,r,n)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,i){return this.setUniform2(this.gl.uniform2i,t,e,i)},set3i:function(t,e,i,r){return this.setUniform3(this.gl.uniform3i,t,e,i,r)},set4i:function(t,e,i,r,n){return this.setUniform4(this.gl.uniform4i,t,e,i,r,n)},setMatrix2fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,i,!0)},setMatrix3fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,i,!0)},setMatrix4fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=o},function(t,e,i){var r=i(0),n=i(59),s=i(2),o=i(875),a=i(876),h=i(25),c=i(107),l=i(58),u=new r({Extends:l,initialize:function(t){t.fragShader=s(t,"fragShader",o),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),l.call(this,t),this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,e,i,r,n,s){this.renderer.pipelines.set(this);var o=this.calcMatrix;s&&s.multiply(n,o);var a=t+i,h=e+r,c=o.getX(t,e),l=o.getY(t,e),u=o.getX(t,h),d=o.getY(t,h),f=o.getX(a,h),p=o.getY(a,h),g=o.getX(a,e),y=o.getY(a,e),m=this.fillTint;this.batchQuad(c,l,u,d,f,p,g,y,m.TL,m.TR,m.BL,m.BR)},batchFillTriangle:function(t,e,i,r,n,s,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var c=h.getX(t,e),l=h.getY(t,e),u=h.getX(i,r),d=h.getY(i,r),f=h.getX(n,s),p=h.getY(n,s),g=this.fillTint;this.batchTri(c,l,u,d,f,p,g.TL,g.TR,g.BL)},batchStrokeTriangle:function(t,e,i,r,n,s,o,a,h){var c=this.tempTriangle;c[0].x=t,c[0].y=e,c[0].width=o,c[1].x=i,c[1].y=r,c[1].width=o,c[2].x=n,c[2].y=s,c[2].width=o,c[3].x=t,c[3].y=e,c[3].width=o,this.batchStrokePath(c,o,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(e,r);for(var s,o,a=t.length,h=this.polygonCache,c=this.fillTint.TL,l=this.fillTint.TR,u=this.fillTint.BL,d=0;d<a;++d)o=t[d],h.push(o.x,o.y);a=(s=n(h)).length;for(var f=0;f<a;f+=3){var p=2*s[f+0],g=2*s[f+1],y=2*s[f+2],m=h[p+0],v=h[p+1],b=h[g+0],w=h[g+1],_=h[y+0],x=h[y+1],E=r.getX(m,v),S=r.getY(m,v),T=r.getX(b,w),A=r.getY(b,w),C=r.getX(_,x),k=r.getY(_,x);this.batchTri(E,S,T,A,C,k,c,l,u)}h.length=0},batchStrokePath:function(t,e,i,r,n){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,o=0;o<s;o++){var a=t[o],h=t[o+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,o,!i&&o===s-1,r,n)}},batchLine:function(t,e,i,r,n,s,o,a,h,c,l){this.renderer.pipelines.set(this);var u=this.calcMatrix;l&&l.multiply(c,u);var d=i-t,f=r-e,p=Math.sqrt(d*d+f*f),g=n*(r-e)/p,y=n*(t-i)/p,m=s*(r-e)/p,v=s*(t-i)/p,b=i-m,w=r-v,_=t-g,x=e-y,E=i+m,S=r+v,T=t+g,A=e+y,C=u.getX(b,w),k=u.getY(b,w),R=u.getX(_,x),P=u.getY(_,x),I=u.getX(E,S),O=u.getY(E,S),M=u.getX(T,A),D=u.getY(T,A),B=this.strokeTint,L=B.TL,N=B.TR,U=B.BL,F=B.BR;if(this.batchQuad(M,D,R,P,C,k,I,O,L,N,U,F),!(o<=2)){var z=this.prevQuad,j=this.firstQuad;a>0&&z[4]?this.batchQuad(M,D,R,P,z[0],z[1],z[2],z[3],L,N,U,F):(j[0]=M,j[1]=D,j[2]=R,j[3]=P,j[4]=1),h&&j[4]?this.batchQuad(C,k,I,O,j[0],j[1],j[2],j[3],L,N,U,F):(z[0]=C,z[1]=k,z[2]=I,z[3]=O,z[4]=1)}},batchVert:function(t,e,i){var r=this.vertexViewF32,n=this.vertexViewU32,s=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++s]=t,r[++s]=e,n[++s]=i,this.vertexCount++},batchQuad:function(t,e,i,r,n,s,o,a,h,c,l,u){var d=!1;return this.shouldFlush(6)&&(this.flush(),d=!0),this.batchVert(t,e,h),this.batchVert(i,r,l),this.batchVert(n,s,u),this.batchVert(t,e,h),this.batchVert(n,s,u),this.batchVert(o,a,c),d},batchTri:function(t,e,i,r,n,s,o,a,h){var c=!1;return this.shouldFlush(3)&&(this.flush(),c=!0),this.batchVert(t,e,o),this.batchVert(i,r,a),this.batchVert(n,s,h),c},destroy:function(){return l.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=u},function(t,e,i){var r=i(0),n=i(2),s=i(877),o=i(108),a=i(3),h=i(58),c=10,l=new a,u=new r({Extends:o,initialize:function(t){c=t.game.renderer.config.maxLights;for(var e=n(t,"fragShader",s),i=[],r=1;r<=c;r++)i.push({name:"lights"+r,fragShader:e.replace("%LIGHT_COUNT%",r.toString())});t.shaders=i,o.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){h.prototype.boot.call(this);var t=this.gl,e=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:e};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(t,e){var i=t.sys.lights;if(this.lightsActive=!1,i&&i.active){var r=i.getLights(e),n=r.length;if(0!==n){var s;this.lightsActive=!0,this.setShader(this["lightShader"+n],!0);var o=this.renderer.height,a=e.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),s=0;s<n;s++){var h=r[s].light,c=h.color,u="uLights["+s+"].";a.transformPoint(h.x,h.y,l),this.set2f(u+"position",l.x-e.scrollX*h.scrollFactorX*e.zoom,o-(l.y-e.scrollY*h.scrollFactorY*e.zoom)),this.set3f(u+"color",c.r,c.g,c.b),this.set1f(u+"intensity",h.intensity),this.set1f(u+"radius",h.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var e=this.inverseRotationMatrix;if(t){var i=-t,r=Math.cos(i),n=Math.sin(i);e[1]=n,e[3]=-n,e[0]=e[4]=r}else e[0]=e[4]=1,e[1]=e[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t}},setTexture2D:function(t,e){var i=this.renderer;void 0===t&&(t=i.tempTextures[0]);var r=this.getNormalMap(e);i.isNewNormalMap(t,r)&&(this.flush(),i.setTextureZero(t),i.setNormalMap(r));var n=e?e.rotation:0;return this.setNormalMapRotation(n),this.currentUnit=0,0},setGameObject:function(t,e){void 0===e&&(e=t.frame);var i=this.renderer,r=e.glTexture,n=this.getNormalMap(t);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(r),i.setNormalMap(n)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function(t){var e;return t?t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):e=this.defaultNormalMap,e||(e=this.defaultNormalMap),e.glTexture},batchSprite:function(t,e,i){this.lightsActive&&o.prototype.batchSprite.call(this,t,e,i)},batchTexture:function(t,e,i,r,n,s,a,h,c,l,u,d,f,p,g,y,m,v,b,w,_,x,E,S,T,A,C,k,R,P,I,O){this.lightsActive&&o.prototype.batchTexture.call(this,t,e,i,r,n,s,a,h,c,l,u,d,f,p,g,y,m,v,b,w,_,x,E,S,T,A,C,k,R,P,I,O)},batchTextureFrame:function(t,e,i,r,n,s,a){this.lightsActive&&o.prototype.batchTextureFrame.call(this,t,e,i,r,n,s,a)}});u.LIGHT_COUNT=c,t.exports=u},function(t,e,i){var r=i(0),n=i(2),s=i(880),o=i(881),a=i(58),h=new r({Extends:a,initialize:function(t){t.vertShader=n(t,"vertShader",o),t.fragShader=n(t,"fragShader",s),t.attributes=n(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,i,r,n,s,o,a,h,c,l,u){var d=t.color,f=t.intensity,p=t.radius,g=t.attenuation,y=d.r*f,m=d.g*f,v=d.b*f,b=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,r,l,u,p,g,y,m,v,b),this.batchLightVert(n,s,l,u,p,g,y,m,v,b),this.batchLightVert(o,a,l,u,p,g,y,m,v,b),this.batchLightVert(i,r,l,u,p,g,y,m,v,b),this.batchLightVert(o,a,l,u,p,g,y,m,v,b),this.batchLightVert(h,c,l,u,p,g,y,m,v,b)},batchLightVert:function(t,e,i,r,n,s,o,a,h,c){var l=this.vertexViewF32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;l[++u]=t,l[++u]=e,l[++u]=i,l[++u]=r,l[++u]=n,l[++u]=s,l[++u]=o,l[++u]=a,l[++u]=h,l[++u]=c,this.vertexCount++}});t.exports=h},function(t,e,i){var r=i(0),n=i(2),s=i(108),o=new r({Extends:s,initialize:function(t){t.topology=5,t.batchSize=n(t,"batchSize",256),s.call(this,t)}});t.exports=o},function(t,e,i){var r=i(0),n=i(2),s=i(108),o=i(882),a=i(883),h=i(58),c=new r({Extends:s,initialize:function(t){t.fragShader=n(t,"fragShader",o),t.vertShader=n(t,"vertShader",a),t.forceZero=!0,s.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=c},function(t,e,i){var r=i(884),n=i(35),s=i(0),o=i(198),a=i(885),h=i(886),c=i(2),l=i(887),u=i(382),d=i(58),f=new s({Extends:d,initialize:function(t){t.renderTarget=c(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=c(t,"vertShader",u),t.shaders=c(t,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:r},{name:"LinearBlend",fragShader:l},{name:"ColorMatrix",fragShader:a}]),t.attributes=c(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,d.call(this,t),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,i,r,n){void 0===i&&(i=1),void 0===r&&(r=!0),void 0===n&&(n=!0);var s=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0)):s.viewport(0,0,t.width,t.height),r&&(n?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT)),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blitFrame:function(t,e,i,r,s,o){void 0===i&&(i=1),void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),t.height>e.height)a.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e);else{var h=e.height-t.height;a.viewport(0,h,t.width,t.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,e.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e.texture,0),r&&(s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),o){var c=this.renderer.currentBlendMode;this.renderer.setBlendMode(n.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),o&&this.renderer.setBlendMode(c),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,i,r,n,s,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture,0),o&&(a?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,r,n,s),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,e,i,r){void 0===i&&(i=!0),void 0===r&&(r=this.colorMatrix);var n=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture),e?(n.viewport(0,0,e.width,e.height),n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.texture,0)):n.viewport(0,0,t.width,t.height),i?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blendFrames:function(t,e,i,r,n,s){void 0===r&&(r=1),void 0===n&&(n=!0),void 0===s&&(s=this.linearShader);var o=this.gl;this.setShader(s),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,e.texture),i?(o.bindFramebuffer(o.FRAMEBUFFER,i.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i.texture,0),o.viewport(0,0,i.width,i.height)):o.viewport(0,0,t.width,t.height),n?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,i,r,n){this.blendFrames(t,e,i,r,n,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var i=this.gl;i.viewport(0,0,t.width,t.height),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer),e?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,r)},setUVs:function(t,e,i,r,n,s,o,a){var h=this.vertexViewF32;h[2]=t,h[3]=e,h[6]=i,h[7]=r,h[10]=n,h[11]=s,h[14]=t,h[15]=e,h[18]=n,h[19]=s,h[22]=o,h[23]=a},setTargetUVs:function(t,e){var i=e.height/t.height;i=i>.5?.5-(i-.5):.5-i+.5,this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=f},function(t,e){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,e,i){var r=i(31),n=i(38),s=i(2);t.exports=function(t,e){var i=t.getContext("experimental-webgl"),o=s(e,"callback"),a=s(e,"type","image/png"),h=s(e,"encoder",.92),c=s(e,"x",0),l=s(e,"y",0),u=s(e,"getPixel",!1),d=s(e,"isFramebuffer",!1),f=d?s(e,"bufferWidth",1):i.drawingBufferWidth,p=d?s(e,"bufferHeight",1):i.drawingBufferHeight;if(u){var g=new Uint8Array(4),y=d?l:p-l;i.readPixels(c,y,1,1,i.RGBA,i.UNSIGNED_BYTE,g),o.call(null,new n(g[0],g[1],g[2],g[3]/255))}else{var m=s(e,"width",f),v=s(e,"height",p),b=new Uint8Array(m*v*4);i.readPixels(c,p-l-v,m,v,i.RGBA,i.UNSIGNED_BYTE,b);for(var w=r.createWebGL(this,m,v),_=w.getContext("2d"),x=_.getImageData(0,0,m,v),E=x.data,S=0;S<v;S++)for(var T=0;T<m;T++){var A=4*((v-S-1)*m+T),C=4*(S*m+T);E[C+0]=b[A+0],E[C+1]=b[A+1],E[C+2]=b[A+2],E[C+3]=b[A+3]}_.putImageData(x,0,0);var k=new Image;k.onerror=function(){o.call(null),r.remove(w)},k.onload=function(){o.call(null,k),r.remove(w)},k.src=w.toDataURL(a,h)}}},function(t,e,i){var r=i(33);t.exports=function(t){var e=t.config;if(!e.hideBanner){var i="WebGL";e.renderType===r.CANVAS?i="Canvas":e.renderType===r.HEADLESS&&(i="Headless");var n,s=e.audio,o=t.device.audio;if(n=o.webAudio&&!s.disableWebAudio?"Web Audio":s.noAudio||!o.webAudio&&!o.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var a,h="",c=[h];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach((function(t){h=h.concat("%c "),c.push("background: "+t),a=t})),c[c.length-1]="color: "+e.bannerTextColor+"; background: "+a):(h=h.concat("%c "),c.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),c.push("background: transparent"),e.gameTitle&&(h=h.concat(e.gameTitle),e.gameVersion&&(h=h.concat(" v"+e.gameVersion)),e.hidePhaser||(h=h.concat(" / "))),e.hidePhaser||(h=h.concat("Phaser v"+r.VERSION+" ("+i+" | "+n+")")),h=h.concat(" %c "+e.gameURL),c[0]=h,console.log.apply(console,c)}}}},function(t,e,i){var r=i(0),n=i(6),s=i(1),o=i(386),a=new r({initialize:function(t,e){this.game=t,this.raf=new o,this.started=!1,this.running=!1,this.minFps=n(e,"min",5),this.targetFps=n(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=n(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=n(e,"deltaHistory",10),this.panicMax=n(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=n(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var e=t-this.lastTime;e<0&&(e=0),this.rawDelta=e;var i=this.deltaIndex,r=this.deltaHistory,n=this.deltaSmoothingMax,s=e,o=e;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,s=Math.min(s,this._target)),s>this._min&&(s=r[i],s=Math.min(s,this._min)),r[i]=s,this.deltaIndex++,this.deltaIndex>n&&(this.deltaIndex=0),o=0;for(var a=0;a<n;a++)o+=r[a];o/=n}this.delta=o,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var h=o/this._target;this.callback(t,o,h),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});t.exports=a},function(t,e,i){var r=i(0),n=i(1),s=new r({initialize:function(){this.isRunning=!1,this.callback=n,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function e(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var i=Date.now(),r=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(e,r)}},start:function(t,e,i){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.target=i,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=n}});t.exports=s},function(t,e,i){var r=i(22);t.exports=function(t){var e,i=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?i.emit(r.HIDDEN):i.emit(r.VISIBLE)}),!1),window.onblur=function(){i.emit(r.BLUR)},window.onfocus=function(){i.emit(r.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,i){var r=i(389),n=i(31),s=i(6);t.exports=function(t){var e=s(t,"data",[]),i=s(t,"canvas",null),o=s(t,"palette",r),a=s(t,"pixelWidth",1),h=s(t,"pixelHeight",a),c=s(t,"resizeCanvas",!0),l=s(t,"clearCanvas",!0),u=s(t,"preRender",null),d=s(t,"postRender",null),f=Math.floor(Math.abs(e[0].length*a)),p=Math.floor(Math.abs(e.length*h));i||(i=n.create2D(this,f,p),c=!1,l=!1),c&&(i.width=f,i.height=p);var g=i.getContext("2d");l&&g.clearRect(0,0,f,p),u&&u(i,g);for(var y=0;y<e.length;y++)for(var m=e[y],v=0;v<m.length;v++){var b=m[v];"."!==b&&" "!==b&&(g.fillStyle=o[b],g.fillRect(v*a,y*h,a,h))}return d&&d(i,g),i}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,i){var r=i(0),n=i(358),s=i(94),o=i(3),a=new r({Extends:s,initialize:function(t,e,i,r){s.call(this,"CubicBezierCurve"),Array.isArray(t)&&(r=new o(t[6],t[7]),i=new o(t[4],t[5]),e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i,this.p3=r},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.p0,r=this.p1,s=this.p2,a=this.p3;return e.set(n(t,i.x,r.x,s.x,a.x),n(t,i.y,r.y,s.y,a.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),r=new o(e[2],e[3]),n=new o(e[4],e[5]),s=new o(e[6],e[7]);return new a(i,r,n,s)},t.exports=a},function(t,e,i){var r=i(0),n=i(94),s=i(36),o=i(6),a=i(196),h=i(3),c=new r({Extends:n,initialize:function(t,e,i,r,a,c,l,u){if("object"==typeof t){var d=t;t=o(d,"x",0),e=o(d,"y",0),i=o(d,"xRadius",0),r=o(d,"yRadius",i),a=o(d,"startAngle",0),c=o(d,"endAngle",360),l=o(d,"clockwise",!1),u=o(d,"rotation",0)}else void 0===r&&(r=i),void 0===a&&(a=0),void 0===c&&(c=360),void 0===l&&(l=!1),void 0===u&&(u=0);n.call(this,"EllipseCurve"),this.p0=new h(t,e),this._xRadius=i,this._yRadius=r,this._startAngle=s(a),this._endAngle=s(c),this._clockwise=l,this._rotation=s(u)},getStartPoint:function(t){return void 0===t&&(t=new h),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new h);for(var i=2*Math.PI,r=this._endAngle-this._startAngle,n=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=n?0:i),this._clockwise&&!n&&(r===i?r=-i:r-=i);var s=this._startAngle+t*r,o=this.p0.x+this._xRadius*Math.cos(s),a=this.p0.y+this._yRadius*Math.sin(s);if(0!==this._rotation){var c=Math.cos(this._rotation),l=Math.sin(this._rotation),u=o-this.p0.x,d=a-this.p0.y;o=u*c-d*l+this.p0.x,a=u*l+d*c+this.p0.y}return e.set(o,a)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return a(this._startAngle)},set:function(t){this._startAngle=s(t)}},endAngle:{get:function(){return a(this._endAngle)},set:function(t){this._endAngle=s(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return a(this._rotation)},set:function(t){this._rotation=s(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});c.fromJSON=function(t){return new c(t)},t.exports=c},function(t,e,i){var r=i(0),n=i(94),s=i(199),o=i(10),a=i(3),h=new r({Extends:n,initialize:function(t,e){n.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new o),s([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return void 0===e&&(e=new a),e.copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,i){var r;if(e){var n=this.getLengths(i),s=n[n.length-1];r=Math.min(e,s)/s}else r=t;return r},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),r=new a(e[2],e[3]);return new h(i,r)},t.exports=h},function(t,e,i){var r=i(0),n=i(3),s=new r({initialize:function(t,e){this.active=!1,this.p0=new n(t,e)},getPoint:function(t,e){return void 0===e&&(e=new n),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=s},function(t,e,i){var r=i(0),n=i(94),s=i(359),o=i(3),a=new r({Extends:n,initialize:function(t,e,i){n.call(this,"QuadraticBezier"),Array.isArray(t)&&(i=new o(t[4],t[5]),e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.p0,r=this.p1,n=this.p2;return e.set(s(t,i.x,r.x,n.x),s(t,i.y,r.y,n.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),r=new o(e[2],e[3]),n=new o(e[4],e[5]);return new a(i,r,n)},t.exports=a},function(t,e,i){var r=i(194),n=i(0),s=i(94),o=i(3),a=new n({Extends:s,initialize:function(t){void 0===t&&(t=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var i=new o;"number"==typeof t[e]?(i.x=t[e],i.y=t[e+1],e++):Array.isArray(t[e])?(i.x=t[e][0],i.y=t[e][1]):(i.x=t[e].x,i.y=t[e].y),this.points.push(i)}return this},addPoint:function(t,e){var i=new o(t,e);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.points,n=(i.length-1)*t,s=Math.floor(n),a=n-s,h=i[0===s?s:s-1],c=i[s],l=i[s>i.length-2?i.length-1:s+1],u=i[s>i.length-3?i.length-1:s+2];return e.set(r(a,h.x,c.x,l.x,u.x),r(a,h.y,c.y,l.y,u.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},t.exports=a},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),i&&""!==i||(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===r&&(r=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=i,this.uniforms=r}});t.exports=r},function(t,e,i){var r=i(38);r.ColorSpectrum=i(909),r.ColorToRGBA=i(910),r.ComponentToHex=i(398),r.GetColor=i(103),r.GetColor32=i(328),r.HexStringToColor=i(327),r.HSLToColor=i(911),r.HSVColorWheel=i(912),r.HSVToRGB=i(188),r.HueToComponent=i(399),r.IntegerToColor=i(189),r.IntegerToRGB=i(330),r.Interpolate=i(913),r.ObjectToColor=i(331),r.RandomRGB=i(914),r.RGBStringToColor=i(332),r.RGBToHSV=i(329),r.RGBToString=i(915),r.ValueToColor=i(187),t.exports=r},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},function(t,e,i){var r=i(105);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()};document.body?r.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}else t()}},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),i={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),i.w=90===e?r.offsetHeight:window.innerWidth,i.h=90===e?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,90!==Math.abs(window.orientation)?i.h:i.w}},function(t,e,i){var r=i(201);t.exports=function(t,e){var i=window.screen,n=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);return n&&"string"==typeof n.type?n.type:"string"==typeof n?n:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?r.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?r.ORIENTATION.LANDSCAPE:void 0:e>t?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE}},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||(e=document.body),e}},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,i){var r=i(0),n=i(203),s=i(9),o=i(51),a=i(22),h=i(410),c=i(411),l=i(412),u=i(413),d=i(25),f=i(177),p=new r({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new h(this):null,this.mouse=e.inputMouse?new c(this):null,this.touch=e.inputTouch?new u(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var r=new l(this,i);r.smoothFactor=e.inputSmoothFactor,this.pointers.push(r)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(a.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(a.PRE_RENDER,this.preRender,this),this.game.events.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(o.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(o.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(o.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&n.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var r=this.pointers.length,n=new l(this,r);n.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(n),this.pointersTotal++,e.push(n)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&(n.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(!a.active){a.touchstart(s,t),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(n.TOUCH_START,i)},onTouchMove:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchmove(s,t),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(n.TOUCH_MOVE,i)},onTouchEnd:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchend(s,t),i.push(a);break}}this.updateInputPlugins(n.TOUCH_END,i)},onTouchCancel:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchcancel(s,t),i.push(a);break}}this.updateInputPlugins(n.TOUCH_CANCEL,i)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(o.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!i.alwaysEnabled&&!t.willRender(e))return!1;var r=!0,n=t.parentContainer;if(n)do{if(!n.willRender(e)){r=!1;break}n=n.parentContainer}while(n);return r},hitTest:function(t,e,i,r){void 0===r&&(r=this._tempHitTest);var n=this._tempPoint,s=i.scrollX,o=i.scrollY;r.length=0;var a=t.x,h=t.y;i.getWorldPoint(a,h,n),t.worldX=n.x,t.worldY=n.y;for(var c={x:0,y:0},l=this._tempMatrix,u=this._tempMatrix2,d=0;d<e.length;d++){var p=e[d];if(this.inputCandidate(p,i)){var g=n.x+s*p.scrollFactorX-s,y=n.y+o*p.scrollFactorY-o;p.parentContainer?(p.getWorldTransformMatrix(l,u),l.applyInverse(g,y,c)):f(g,y,p.x,p.y,p.rotation,p.scaleX,p.scaleY,c),this.pointWithinHitArea(p,c.x,c.y)&&r.push(p)}}return r},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var r=t.input;return!(!r||!r.hitAreaCallback(r.hitArea,e,i,t)||(r.localX=e,r.localY=i,0))},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,r){var n=t.position,s=t.prevPosition;s.x=n.x,s.y=n.y;var o=this.scaleManager.transformX(e),a=this.scaleManager.transformY(i),h=t.smoothFactor;r&&0!==h?(n.x=o*h+s.x*(1-h),n.y=a*h+s.y*(1-h)):(n.x=o,n.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=p},function(t,e,i){var r=i(93),n=i(0),s=i(22),o=i(51),a=i(143),h=i(1),c=new n({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(o.MANAGER_PROCESS);var i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!i&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}},this.onKeyUp=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(o.MANAGER_PROCESS);var i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!i&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var r=t[i];"string"==typeof r&&(r=a[r.trim().toUpperCase()]),-1===e.indexOf(r)&&e.push(r)}this.preventDefault=e.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var n=t[i];"string"==typeof n&&(n=a[n.toUpperCase()]),r(e,n)}this.preventDefault=e.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=c},function(t,e,i){var r=i(0),n=i(191),s=i(51),o=i(1),a=new r({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(n.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){n.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var e=this,i=this.manager,r=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseMove(t),e.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){s&&window.focus(),!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseDown(t),e.preventDefaultDown&&t.target===r&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==r&&i.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseUp(t),e.preventDefaultUp&&t.target===r&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==r&&i.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.onMouseWheel(t),e.preventDefaultWheel&&t.target===r&&t.preventDefault()};var o={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,o),t.addEventListener("mouseout",this.onMouseOut,o),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,o),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,o),window.top.addEventListener("mouseup",this.onMouseUpWindow,o)}catch(t){window.addEventListener("mousedown",this.onMouseDownWindow,o),window.addEventListener("mouseup",this.onMouseUpWindow,o),this.isTop=!1}n.pointerLock&&(this.pointerLockChange=function(t){var r=e.target;e.locked=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r,i.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),n.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,i){var r=i(349),n=i(0),s=i(50),o=i(124),a=i(360),h=i(3),c=i(105),l=new n({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=t.getWorldPoint(this.x,this.y);return this.worldX=e.x,this.worldY=e.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t=this.position.x,e=this.position.y,i=this.midPoint.x,n=this.midPoint.y;if(t!==i||e!==n){var s=a(this.motionFactor,i,t),h=a(this.motionFactor,n,e);o(s,t,.1)&&(s=t),o(h,e,.1)&&(h=e),this.midPoint.set(s,h);var c=t-s,l=e-h;this.velocity.set(c,l),this.angle=r(s,h,t,e),this.distance=Math.sqrt(c*c+l*l)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),c.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var i=this.prevPosition.x,r=this.prevPosition.y,n=this.position.x,s=this.position.y,o=0;o<t;o++){var h=1/t*o;e[o]={x:a(h,i,n),y:a(h,r,s)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=l},function(t,e,i){var r=i(0),n=i(51),s=i(1),o=new r({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,t.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,e=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(r){i&&window.focus(),!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(r),t.capture&&r.cancelable&&r.target===e&&r.preventDefault())},this.onTouchStartWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchStart(i)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchEnd=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(i),t.capture&&i.cancelable&&i.target===e&&i.preventDefault())},this.onTouchEndWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchEnd(i)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var r=this.target;if(r){var n={passive:!0},s={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?s:n),r.addEventListener("touchmove",this.onTouchMove,this.capture?s:n),r.addEventListener("touchend",this.onTouchEnd,this.capture?s:n),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?s:n),r.addEventListener("touchover",this.onTouchOver,this.capture?s:n),r.addEventListener("touchout",this.onTouchOut,this.capture?s:n),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,s),window.addEventListener("touchend",this.onTouchEndWindow,s),window.addEventListener("touchcancel",this.onTouchCancelWindow,s)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=o},function(t,e,i){var r=i(0),n=i(22),s=i(9),o=i(8),a=i(16),h=i(5),c=i(2),l=i(24),u=i(93),d=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(n.BOOT,this.boot,this)},boot:function(){var t,e,i,r,s,o,a,h=this.game.config,l=h.installGlobalPlugins;for(l=l.concat(this._pendingGlobal),t=0;t<l.length;t++)e=l[t],i=c(e,"key",null),r=c(e,"plugin",null),s=c(e,"start",!1),o=c(e,"mapping",null),a=c(e,"data",null),i&&(r?this.install(i,r,s,o,a):console.warn("Missing `plugin` for key: "+i));for(l=(l=h.installScenePlugins).concat(this._pendingScene),t=0;t<l.length;t++)e=l[t],i=c(e,"key",null),r=c(e,"plugin",null),o=c(e,"mapping",null),i&&(r?this.installScenePlugin(i,r,o):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(t,e,i){var r,n,s,o=this.game,a=t.scene,h=t.settings.map,c=t.settings.isBooted;for(r=0;r<e.length;r++)o[n=e[r]]?(t[n]=o[n],h.hasOwnProperty(n)&&(a[h[n]]=t[n])):"game"===n&&h.hasOwnProperty(n)&&(a[h[n]]=o);for(var u=0;u<i.length;u++)for(s=i[u],r=0;r<s.length;r++)if(n=s[r],l.hasCore(n)){var d=l.getCore(n),f=d.mapping,p=new d.plugin(a,this,f);t[f]=p,d.custom?a[f]=p:h.hasOwnProperty(f)&&(a[h[f]]=p),c&&p.boot()}for(s=this.plugins,r=0;r<s.length;r++){var g=s[r];g.mapping&&(a[g.mapping]=g.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t.concat(this.scenePlugins)},installScenePlugin:function(t,e,i,r,n){if(void 0===n&&(n=!1),"function"==typeof e){if(l.hasCore(t)){if(!n&&l.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else l.register(t,e,i,!0),this.scenePlugins.push(t);if(r){var s=new e(r,this,t);r.sys[t]=s,i&&""!==i&&(r[i]=s),s.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,i,r,n){if(void 0===i&&(i=!1),void 0===r&&(r=null),void 0===n&&(n=null),"function"!=typeof e)return console.warn("Invalid Plugin: "+t),null;if(l.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==r&&(i=!0),this.game.isBooted){if(l.registerCustom(t,e,r,n),i)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:i,mapping:r,data:n});return null},getIndex:function(t){for(var e=this.plugins,i=0;i<e.length;i++)if(e[i].key===t)return i;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var i=this.getEntry(e);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(t,e)),i?i.plugin:null},createEntry:function(t,e){var i=l.getCustom(t);if(i){var r=new i.plugin(this);i={key:e,plugin:r,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),r.init(i.data),r.start()}return i},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var i=this.getEntry(t);if(i)return i.plugin;var r=this.getClass(t);return r&&e?(i=this.createEntry(t,t))?i.plugin:null:r||null},getClass:function(t){return l.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&u(this.plugins,e),l.removeCustom(t)},removeScenePlugin:function(t){u(this.scenePlugins,t),l.remove(t)},registerGameObject:function(t,e,i){return e&&h.register(t,e),i&&a.register(t,i),this},removeGameObject:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),e&&h.remove(t),i&&a.remove(t),this},registerFileType:function(t,e,i){o.register(t,e),i&&i.sys.load&&(i.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();l.destroyCustomPlugins(),this.game.noReturn&&l.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=d},function(t,e,i){var r=i(201),n=i(0),s=i(9),o=i(104),a=i(22),h=i(401),c=i(407),l=i(402),u=i(1),d=i(10),f=i(416),p=i(76),g=i(3),y=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=r.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==r.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(a.PRE_STEP,this.step,this),t.events.once(a.READY,this.refresh,this),t.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e=t.width,i=t.height,n=t.scaleMode,s=t.zoom,o=t.autoRound;if("string"==typeof e){var a=this.parentSize.width;0===a&&(a=window.innerWidth);var h=parseInt(e,10)/100;e=Math.floor(a*h)}if("string"==typeof i){var c=this.parentSize.height;0===c&&(c=window.innerHeight);var u=parseInt(i,10)/100;i=Math.floor(c*u)}this.scaleMode=n,this.autoRound=o,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,o&&(e=Math.floor(e),i=Math.floor(i)),this.gameSize.setSize(e,i),s===r.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,1!==s&&(this._resetZoom=!0),this.baseSize.setSize(e,i),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*s,t.minHeight*s),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*s,t.maxHeight*s),this.displaySize.setSize(e,i),this.orientation=l(e,i)},getParent:function(t){var e=t.parent;if(null!==e){if(this.parent=c(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==r.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||0===i.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==i.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=h(!0));var i=e.width,r=e.height;return(t.width!==i||t.height!==r)&&(t.setSize(i,r),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var i=this.autoRound;i&&(t=Math.floor(t),e=Math.floor(e));var r=this.width,n=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,n)},resize:function(t,e){var i=this.zoom,r=this.autoRound;r&&(t=Math.floor(t),e=Math.floor(e));var n=this.width,s=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t,e),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*i,e*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var o=this.canvas.style,a=t*i,h=e*i;return r&&(a=Math.floor(a),h=Math.floor(h)),a===t&&h===e||(o.width=a+"px",o.height=h+"px"),this.refresh(n,s)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style,n=i.style;n.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",n.marginLeft=r.marginLeft,n.marginTop=r.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=l(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(o.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,e,i=this.canvas.style,n=this.gameSize.width,s=this.gameSize.height,o=this.zoom,a=this.autoRound;this.scaleMode===r.SCALE_MODE.NONE?(this.displaySize.setSize(n*o,s*o),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(i.width=t+"px",i.height=e+"px",this._resetZoom=!1)):this.scaleMode===r.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=p(this.parentSize.width,this.gameSize.width,0,!0),e=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t=this.autoCenter;if(t!==r.CENTER.NO_CENTER){var e=this.canvas,i=e.style,n=e.getBoundingClientRect(),s=n.width,o=n.height,a=Math.floor((this.parentSize.width-s)/2),h=Math.floor((this.parentSize.height-o)/2);t===r.CENTER.CENTER_HORIZONTALLY?h=0:t===r.CENTER.CENTER_VERTICALLY&&(a=0),i.marginLeft=a+"px",i.marginTop=h+"px"}},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e=this.fullscreen;if(e.available){if(!e.active){var i=this.getFullscreenTarget();e.keyboard?i[e.request](Element.ALLOW_KEYBOARD_INPUT):i[e.request](t)}}else this.emit(o.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.canvas,t),e.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;e.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=y},function(t,e,i){var r=i(18),n=i(0),s=i(76),o=i(3),a=new n({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===r&&(r=null),this._width=t,this._height=e,this._parent=r,this.aspectMode=i,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=r(t,0,this.maxWidth),this.minHeight=r(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=r(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var r=this.snapTo,n=0===e?1:t/e;return i&&this.aspectRatio>n||!i&&this.aspectRatio<n?(e=(t=s(t,r.x))/this.aspectRatio,r.y>0&&(t=(e=s(e,r.y))*this.aspectRatio)):(i&&this.aspectRatio<n||!i&&this.aspectRatio>n)&&(t=(e=s(e,r.y))*this.aspectRatio,r.x>0&&(e=(t=s(t,r.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},function(t,e,i){var r=i(0),n=i(144),s=i(20),o=i(22),a=i(6),h=i(95),c=i(1),l=i(418),u=i(204),d=new r({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this._pending.push({key:"default",scene:e[i],autoStart:0===i,data:{}})}t.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,i,r;for(t=0;t<this._pending.length;t++){var n;i=(e=this._pending[t]).key,(r=e.scene)instanceof l?n=this.createSceneFromInstance(i,r):"object"==typeof r?n=this.createSceneFromObject(i,r):"function"==typeof r&&(n=this.createSceneFromFunction(i,r)),i=n.sys.settings.key,this.keys[i]=n,this.scenes.push(n),this._data[i]&&(n.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(e.autoStart=!0)),(e.autoStart||n.sys.settings.active)&&this._start.push(i)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t=this._pending.length,e=this._queue.length;if(0!==t||0!==e){var i,r;if(t){for(i=0;i<t;i++)r=this._pending[i],this.add(r.key,r.scene,r.autoStart,r.data);for(i=0;i<this._start.length;i++)r=this._start[i],this.start(r);return this._start.length=0,void(this._pending.length=0)}for(i=0;i<this._queue.length;i++)this[(r=this._queue[i]).op](r.keyA,r.keyB);this._queue.length=0}},add:function(t,e,i,r){return void 0===i&&(i=!1),void 0===r&&(r={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:i,data:r}),this.isBooted||(this._data[t]={data:r}),null):(t=this.getKey(t,e),e instanceof l?n=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,n=this.createSceneFromObject(t,e)):"function"==typeof e&&(n=this.createSceneFromFunction(t,e)),n.sys.settings.data=r,t=n.sys.settings.key,this.keys[t]=n,this.scenes.push(n),(i||n.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),n);var n},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var i=this.scenes.indexOf(e),r=e.sys.settings.key;i>-1&&(delete this.keys[r],this.scenes.splice(i,1),this._start.indexOf(r)>-1&&(i=this._start.indexOf(r),this._start.splice(i,1)),e.sys.destroy())}return this},bootScene:function(t){var e,i=t.sys,r=i.settings;i.sceneUpdate=c,t.init&&(t.init.call(t,r.data),r.status=n.INIT,r.isTransition&&i.events.emit(s.TRANSITION_INIT,r.transitionFrom,r.transitionDuration)),i.load&&(e=i.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(r.status=n.LOADING,e.once(h.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;r.settings.status>n.START&&r.settings.status<=n.RUNNING&&r.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var i=this.scenes[e].sys;i.settings.visible&&i.settings.status>=n.LOADING&&i.settings.status<n.SLEEPING&&i.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,i=e.settings;t.create&&(i.status=n.CREATING,t.create.call(t,i.data),i.status===n.DESTROYED)||(i.isTransition&&e.events.emit(s.TRANSITION_START,i.transitionFrom,i.transitionDuration),t.update&&(e.sceneUpdate=t.update),i.status=n.RUNNING,e.events.emit(s.CREATE,t))},createSceneFromFunction:function(t,e){var i=new e;if(i instanceof l){var r=i.sys.settings.key;if(""!==r&&(t=r),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,i)}return i.sys=new u(i),i.sys.settings.key=t,i.sys.init(this.game),i},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var i=new l(e),r=i.sys.settings.key;""!==r?t=r:i.sys.settings.key=t,i.sys.init(this.game);for(var n=["init","preload","create","update","render"],s=0;s<n.length;s++){var o=a(e,n[s],null);o&&(i[n[s]]=o)}if(e.hasOwnProperty("extend"))for(var h in e.extend)if(e.extend.hasOwnProperty(h)){var c=e.extend[h];"data"===h&&i.hasOwnProperty("data")&&"object"==typeof c?i.data.merge(c):"sys"!==h&&(i[h]=c)}return i},getKey:function(t,e){if(t||(t="default"),"function"==typeof e)return t;if(e instanceof l?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var i=[],r=this.scenes,n=0;n<r.length;n++){var s=r[n];s&&(!t||t&&s.sys.isActive())&&i.push(s)}return e?i.reverse():i},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var i=this.getScene(t);return i&&i.sys.pause(e),this},resume:function(t,e){var i=this.getScene(t);return i&&i.sys.resume(e),this},sleep:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.sleep(e),this},wake:function(t,e){var i=this.getScene(t);return i&&i.sys.wake(e),this},run:function(t,e){var i=this.getScene(t);if(!i){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===t){this.queueOp("start",t,e);break}return this}i.sys.isSleeping()?i.sys.wake(e):i.sys.isPaused()?i.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var i=this.getScene(t);if(i){var r,s=i.sys;if(s.isActive()||s.isPaused())s.shutdown(),s.sceneUpdate=c,s.start(e);else if(s.sceneUpdate=c,s.start(e),s.load&&(r=s.load),r&&s.settings.hasOwnProperty("pack")&&(r.reset(),r.addPack({payload:s.settings.pack})))return s.settings.status=n.LOADING,r.once(h.COMPLETE,this.payloadComplete,this),r.start(),this;this.bootScene(i)}return this},stop:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(e),this},switch:function(t,e){var i=this.getScene(t),r=this.getScene(e);return i&&r&&i!==r&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e<this.scenes.length){var i=this.getScene(t);this.scenes.splice(e,1),this.scenes.push(i)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e>0){var i=this.getScene(t);this.scenes.splice(e,1),this.scenes.unshift(i)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e>0){var i=e-1,r=this.getScene(t),n=this.getAt(i);this.scenes[e]=n,this.scenes[i]=r}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e<this.scenes.length-1){var i=e+1,r=this.getScene(t),n=this.getAt(i);this.scenes[e]=n,this.scenes[i]=r}}return this},moveAbove:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:e});else{var i=this.getIndex(t),r=this.getIndex(e);if(-1!==i&&-1!==r){var n=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(i+1,0,n)}}return this},moveBelow:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:e});else{var i=this.getIndex(t),r=this.getIndex(e);if(-1!==i&&-1!==r){var n=this.getAt(r);this.scenes.splice(r,1),0===i?this.scenes.unshift(n):this.scenes.splice(i,0,n)}}return this},queueOp:function(t,e,i){return this._queue.push({op:t,keyA:e,keyB:i}),this},swapPosition:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:e});else{var i=this.getIndex(t),r=this.getIndex(e);if(i!==r&&-1!==i&&-1!==r){var n=this.getAt(i);this.scenes[i]=this.scenes[r],this.scenes[r]=n}}return this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys,s=!r.settings.visible||r.settings.status!==n.RUNNING&&r.settings.status!==n.PAUSED?"[-] ":"[*] ";s+=r.settings.key+" ("+e[r.settings.status]+")",t.push(s)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=c,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=d},function(t,e,i){var r=i(0),n=i(204),s=new r({initialize:function(t){this.sys=new n(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=s},function(t,e,i){var r=i(2),n=i(205);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,i=r(t.settings,"physics",!1);if(e||i){var s=[];if(e&&s.push(n(e+"Physics")),i)for(var o in i)o=n(o.concat("Physics")),-1===s.indexOf(o)&&s.push(o);return s}}},function(t,e,i){var r=i(2);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),i=r(t.settings,"plugins",!1);return Array.isArray(i)?i:e||[]}},function(t,e,i){var r=i(144),n=i(6),s=i(127),o=i(978),a={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:r.PENDING,key:n(t,"key",""),active:n(t,"active",!1),visible:n(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(t,"pack",!1),cameras:n(t,"cameras",null),map:n(t,"map",s(o,n(t,"mapAdd",{}))),physics:n(t,"physics",{}),loader:n(t,"loader",{}),plugins:n(t,"plugins",!1),input:n(t,"input",{})}}};t.exports=a},function(t,e,i){var r=i(31),n=i(423),s=i(0),o=i(38),a=i(33),h=i(9),c=i(106),l=i(22),u=i(388),d=i(6),f=i(425),p=i(206),g=new s({Extends:h,initialize:function(t){h.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(l.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(c.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var i=this,r=new Image;r.onerror=function(){i.emit(c.ERROR,t)},r.onload=function(){var e=i.create(t,r);f.Image(e,0),i.emit(c.ADD,t,e),i.emit(c.LOAD,t,e)},r.src=e}return this},getBase64:function(t,e,i,n){void 0===i&&(i="image/png"),void 0===n&&(n=.92);var s="",o=this.getFrame(t,e);if(o&&(o.source.isRenderTexture||o.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(o){var a=o.canvasData,h=r.create2D(this,a.width,a.height);h.getContext("2d").drawImage(o.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),s=h.toDataURL(i,n),r.remove(h)}return s},addImage:function(t,e,i){var r=null;return this.checkKey(t)&&(r=this.create(t,e),f.Image(r,0),i&&r.setDataSource(i),this.emit(c.ADD,t,r)),r},addGLTexture:function(t,e,i,r){var n=null;return this.checkKey(t)&&(void 0===i&&(i=e.width),void 0===r&&(r=e.height),(n=this.create(t,e,i,r)).add("__BASE",0,0,0,i,r),this.emit(c.ADD,t,n)),n},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(c.ADD,t,i)),i},generate:function(t,e){if(this.checkKey(t)){var i=r.create(this,1,1);return e.canvas=i,u(e),this.addCanvas(t,i)}return null},createCanvas:function(t,e,i){if(void 0===e&&(e=256),void 0===i&&(i=256),this.checkKey(t)){var n=r.create(this,e,i,a.CANVAS,!0);return this.addCanvas(t,n)}return null},addCanvas:function(t,e,i){void 0===i&&(i=!1);var r=null;return i?r=new n(this,t,e,e.width,e.height):this.checkKey(t)&&(r=new n(this,t,e,e.width,e.height),this.list[t]=r,this.emit(c.ADD,t,r)),r},addAtlas:function(t,e,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,r):this.addAtlasJSONHash(t,e,i,r)},addAtlasJSONArray:function(t,e,i,r){var n=null;if(this.checkKey(t)){if(n=this.create(t,e),Array.isArray(i))for(var s=1===i.length,o=0;o<n.source.length;o++){var a=s?i[0]:i[o];f.JSONArray(n,o,a)}else f.JSONArray(n,0,i);r&&n.setDataSource(r),this.emit(c.ADD,t,n)}return n},addAtlasJSONHash:function(t,e,i,r){var n=null;if(this.checkKey(t)){if(n=this.create(t,e),Array.isArray(i))for(var s=0;s<i.length;s++)f.JSONHash(n,s,i[s]);else f.JSONHash(n,0,i);r&&n.setDataSource(r),this.emit(c.ADD,t,n)}return n},addAtlasXML:function(t,e,i,r){var n=null;return this.checkKey(t)&&(n=this.create(t,e),f.AtlasXML(n,0,i),r&&n.setDataSource(r),this.emit(c.ADD,t,n)),n},addUnityAtlas:function(t,e,i,r){var n=null;return this.checkKey(t)&&(n=this.create(t,e),f.UnityYAML(n,0,i),r&&n.setDataSource(r),this.emit(c.ADD,t,n)),n},addSpriteSheet:function(t,e,i){var r=null;if(this.checkKey(t)){var n=(r=this.create(t,e)).source[0].width,s=r.source[0].height;f.SpriteSheet(r,0,0,0,n,s,i),this.emit(c.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=d(e,"atlas",null),r=d(e,"frame",null);if(i&&r){var n=this.get(i).get(r);if(n){var s=this.create(t,n.source.image);return n.trimmed?f.SpriteSheetFromAtlas(s,n,e):f.SpriteSheet(s,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,e),this.emit(c.ADD,t,s),s}}},create:function(t,e,i,r){var n=null;return this.checkKey(t)&&(n=new p(this,t,e,i,r),this.list[t]=n),n},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof p?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,r){var n=this.getFrame(i,r);if(n){t-=n.x,e-=n.y;var s=n.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(n.source.image,t,e,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return new o(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(t,e,i,r){var n=this.getFrame(i,r);if(n){t-=n.x,e-=n.y;var s=n.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var o=this._tempContext;return o.clearRect(0,0,1,1),o.drawImage(n.source.image,t,e,1,1,0,0,1,1),o.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e||(i.key=e,this.list[e]=i,delete this.list[t],0))},each:function(t,e){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[0]=this.list[n],t.apply(e,i)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,r.remove(this._tempCanvas)}});t.exports=g},function(t,e,i){var r=i(0),n=i(18),s=i(38),o=i(33),a=i(138),h=i(206),c=new r({Extends:h,initialize:function(t,e,i,r,n){h.call(this,t,e,i,r,n),this.add("__BASE",0,0,0,r,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=r,this.height=n,this.imageData=this.context.getImageData(0,0,r,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(t,e,i){return this.context.drawImage(i,t,e),this.update()},drawFrame:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=this.manager.getFrame(t,e);if(n){var s=n.canvasData,o=n.cutWidth,a=n.cutHeight,h=n.source.resolution;return this.context.drawImage(n.source.image,s.x,s.y,o,a,i,r,o/h,a/h),this.update()}return this},setPixel:function(t,e,i,r,n,s){if(void 0===s&&(s=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),this.getIndex(t,e)>-1){var o=this.context.getImageData(t,e,1,1);o.data[0]=i,o.data[1]=r,o.data[2]=n,o.data[3]=s,this.context.putImageData(o,t,e)}return this},putData:function(t,e,i,r,n,s,o){return void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=t.width),void 0===o&&(o=t.height),this.context.putImageData(t,e,i,r,n,s,o),this},getData:function(t,e,i,r){return t=n(Math.floor(t),0,this.width-1),e=n(Math.floor(e),0,this.height-1),i=n(i,1,this.width-t),r=n(r,1,this.height-e),this.context.getImageData(t,e,i,r)},getPixel:function(t,e,i){i||(i=new s);var r=this.getIndex(t,e);if(r>-1){var n=this.data,o=n[r+0],a=n[r+1],h=n[r+2],c=n[r+3];i.setTo(o,a,h,c)}return i},getPixels:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===r&&(r=i),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var o=n(t,0,this.width),a=n(t+i,0,this.width),h=n(e,0,this.height),c=n(e+r,0,this.height),l=new s,u=[],d=h;d<c;d++){for(var f=[],p=o;p<a;p++)l=this.getPixel(p,d,l),f.push({x:p,y:d,color:l.color,alpha:l.alphaGL});u.push(f)}return u},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===r&&(r=this.height),this.context.clearRect(t,e,i,r),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=a(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=c},function(t,e,i){var r=i(31),n=i(0),s=i(138),o=i(168),a=new n({initialize:function(t,e,i,r,n){void 0===n&&(n=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=i||e.naturalWidth||e.videoWidth||e.width||0,this.height=r||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&e instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=n,this.init(a)},init:function(t){var e=this.renderer;e&&(e.gl?this.isCanvas?this.glTexture=e.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=e.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=e.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=e.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=a},function(t,e,i){t.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(t,e,i){var r=i(427),n=i(430),s=i(432),o={create:function(t){var e=t.config.audio,i=t.device.audio;return e.noAudio||!i.webAudio&&!i.audioData?new n(t):i.webAudio&&!e.disableWebAudio?new s(t):new r(t)}};t.exports=o},function(t,e,i){var r=i(145),n=i(0),s=i(70),o=i(429),a=new n({Extends:r,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,t)},add:function(t,e){var i=new o(this,t,e);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(e,i){for(var r=0;r<i.length;r++)if("true"===i[r].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var e=!1,i=function(){e=!0},r=function(){if(e)e=!1;else{document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",r);var n=[];if(t.game.cache.audio.entries.each((function(t,e){for(var i=0;i<e.length;i++){var r=e[i];"true"===r.dataset.locked&&n.push(r)}return!0})),0!==n.length){var s=n[n.length-1];s.oncanplaythrough=function(){s.oncanplaythrough=null,n.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},n.forEach((function(t){t.load()}))}}};this.once(s.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,i){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:i}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(s.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(s.GLOBAL_VOLUME,this,t)}}});t.exports=a},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),r(t,n,s))for(var o=n;o<s;o++){var a=t[o];if(!e||e&&void 0===i&&a.hasOwnProperty(e)||e&&void 0!==i&&a[e]===i)return a}return null}},function(t,e,i){var r=i(146),n=i(0),s=i(70),o=i(18),a=new n({Extends:r,initialize:function(t,e,i){if(void 0===i&&(i={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,t,e,i)},play:function(t,e){return!(this.manager.isLocked(this,"play",[t,e])||!r.prototype.play.call(this,t,e)||!this.pickAndPlayAudioTag()||(this.emit(s.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!r.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(s.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&i.push(t)}),this),i.sort((function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}));var r=i[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var e=this.currentMarker?this.currentMarker.start:0,i=e+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=i-this.manager.loopEndOffset?(this.audio.currentTime=e+Math.max(0,r-i),r=this.audio.currentTime):r<e&&(this.audio.currentTime+=e,r=this.audio.currentTime),r<this.previousTime&&this.emit(s.LOOPED,this);else if(r>=i)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(s.COMPLETE,this);this.previousTime=r}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(s.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(s.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,s.RATE,t)||(this.calculateRate(),this.emit(s.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,s.DETUNE,t)||(this.calculateRate(),this.emit(s.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(s.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(s.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(s.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=a},function(t,e,i){var r=i(145),n=i(0),s=i(9),o=i(431),a=i(1),h=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var i=new o(this,t,e);return this.sounds.push(i),i},addAudioSprite:function(t,e){var i=this.add(t,e);return i.spritemap={},i},play:function(t,e){return!1},playAudioSprite:function(t,e,i){return!1},remove:function(t){return r.prototype.remove.call(this,t)},removeByKey:function(t){return r.prototype.removeByKey.call(this,t)},pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,forEachActiveSound:function(t,e){r.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){r.prototype.destroy.call(this)}});t.exports=h},function(t,e,i){var r=i(146),n=i(0),s=i(9),o=i(17),a=function(){return!1},h=function(){return this},c=new n({Extends:s,initialize:function(t,e,i){void 0===i&&(i={}),s.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},i),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:function(){return null},play:a,pause:a,resume:a,stop:a,destroy:function(){r.prototype.destroy.call(this)},setMute:h,setVolume:h,setRate:h,setDetune:h,setSeek:h,setLoop:h,setPan:h});t.exports=c},function(t,e,i){var r=i(433),n=i(145),s=i(0),o=i(70),a=i(22),h=i(434),c=new s({Extends:n,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),n.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(t){var e=t.config.audio;return e.context?(e.context.resume(),e.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var i=new h(this,t,e);return this.sounds.push(i),i},decodeAudio:function(t,e){var i;i=Array.isArray(t)?t:[{key:t,data:e}];for(var n=this.game.cache.audio,s=i.length,a=0;a<i.length;a++){var h=i[a],c=h.key,l=h.data;"string"==typeof l&&(l=r(l));var u=function(t,e){n.add(t,e),this.emit(o.DECODED,t),0==--s&&this.emit(o.DECODED_ALL)}.bind(this,c),d=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0==--s&&this.emit(o.DECODED_ALL)}.bind(this,c);this.context.decodeAudioData(l,u,d)}},unlock:function(){var t=this,e=document.body,i=function i(){if(t.context&&e){var r=e.removeEventListener;t.context.resume().then((function(){r("touchstart",i),r("touchend",i),r("click",i),r("keydown",i),t.unlocked=!0}),(function(){r("touchstart",i),r("touchend",i),r("click",i),r("keydown",i)}))}};e&&(e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",i,!1),e.addEventListener("click",i,!1),e.addEventListener("keydown",i,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function(t,e){n.prototype.update.call(this,t,e);var i=this.context;i&&"interrupted"===i.state&&i.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}n.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(o.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(o.GLOBAL_VOLUME,this,t)}}});t.exports=c},function(t,e){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<i.length;n++)r[i.charCodeAt(n)]=n;t.exports=function(t){var e,i,n,s,o=(t=t.substr(t.indexOf(",")+1)).length,a=.75*o,h=0;"="===t[o-1]&&(a--,"="===t[o-2]&&a--);for(var c=new ArrayBuffer(a),l=new Uint8Array(c),u=0;u<o;u+=4)e=r[t.charCodeAt(u)],i=r[t.charCodeAt(u+1)],n=r[t.charCodeAt(u+2)],s=r[t.charCodeAt(u+3)],l[h++]=e<<2|i>>4,l[h++]=(15&i)<<4|n>>2,l[h++]=(3&n)<<6|63&s;return c}},function(t,e,i){var r=i(146),n=i(0),s=i(70),o=new n({Extends:r,initialize:function(t,e,i){if(void 0===i&&(i={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('Audio key "'+e+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,t,e,i)},play:function(t,e){return!!r.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(s.RESUME,this),0))},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,i=this.manager.context.currentTime+e,r=(this.currentMarker?this.currentMarker.start:0)+t,n=this.duration-t;this.playTime=i-t,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,n)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),r.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){r.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(s.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(s.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(s.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(s.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(s.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=o},function(t,e){t.exports=function(t){for(var e=t.length,i=t[0].length,r=new Array(i),n=0;n<i;n++){r[n]=new Array(e);for(var s=e-1;s>-1;s--)r[n][s]=t[s][n]}return r}},function(t,e){function i(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t,e,s,o,a){for(void 0===s&&(s=0),void 0===o&&(o=t.length-1),void 0===a&&(a=r);o>s;){if(o-s>600){var h=o-s+1,c=e-s+1,l=Math.log(h),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(h-u)/h)*(c-h/2<0?-1:1),f=Math.max(s,Math.floor(e-c*u/h+d)),p=Math.min(o,Math.floor(e+(h-c)*u/h+d));n(t,e,f,p,a)}var g=t[e],y=s,m=o;for(i(t,s,e),a(t[o],g)>0&&i(t,s,o);y<m;){for(i(t,y,m),y++,m--;a(t[y],g)<0;)y++;for(;a(t[m],g)>0;)m--}0===a(t[s],g)?i(t,s,m):i(t,++m,o),m<=e&&(s=m+1),e<=m&&(o=m-1)}};t.exports=n},function(t,e,i){var r=i(6),n=i(131),s=function(t,e,i){for(var r=[],n=0;n<t.length;n++)for(var s=0;s<e.length;s++)for(var o=0;o<i;o++)r.push({a:t[n],b:e[s]});return r};t.exports=function(t,e,i){var o=r(i,"max",0),a=r(i,"qty",1),h=r(i,"random",!1),c=r(i,"randomB",!1),l=r(i,"repeat",0),u=r(i,"yoyo",!1),d=[];if(c&&n(e),-1===l)if(0===o)l=0;else{var f=t.length*e.length*a;u&&(f*=2),l=Math.ceil(o/f)}for(var p=0;p<=l;p++){var g=s(t,e,a);h&&n(g),d=d.concat(g),u&&(g.reverse(),d=d.concat(g))}return o&&d.splice(o),d}},function(t,e,i){t.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(t,e,i){var r=i(13);t.exports=function(t,e){var i=r(e,"anims",null);if(null===i)return t;if("string"==typeof i)t.anims.play(i);else if("object"==typeof i){var n=t.anims,s=r(i,"key",void 0);if(s){var o=r(i,"startFrame",void 0),a=r(i,"delay",0),h=r(i,"repeat",0),c=r(i,"repeatDelay",0),l=r(i,"yoyo",!1),u=r(i,"play",!1),d=r(i,"delayedPlay",0),f={key:s,delay:a,repeat:h,repeatDelay:c,yoyo:l,startFrame:o};u?n.play(f):d>0?n.playAfterDelay(f,d):n.load(f)}}return t}},function(t,e,i){var r=i(0),n=i(109),s=new r({initialize:function(t,e,i,r,n){this.parent=t,this.x=e,this.y=i,this.frame=r,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof n&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=s},function(t,e,i){var r=i(10);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=Math.min(t.x,e.x),s=Math.min(t.y,e.y),o=Math.max(t.right,e.right)-n,a=Math.max(t.bottom,e.bottom)-s;return i.setTo(n,s,o,a)}},function(t,e,i){var r=i(0),n=i(11),s=i(1055),o=i(15),a=i(7),h=i(202),c=i(20),l=i(140),u=new r({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,s],initialize:function(t,e,i,r,n,s){o.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new l,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof r?"#"===r[0]?this.setElement(r.substr(1),n,s):this.createElement(r,n,s):r&&this.setElement(r,n,s),t.sys.events.on(c.SLEEP,this.handleSceneEvent,this),t.sys.events.on(c.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var r;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),r=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(r=t),!r)return this;if(this.node=r,e&&a(e))for(var n in e)r.style[n]=e[n];else"string"==typeof e&&(r.style=e);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),i&&(r.innerText=i),this.updateSize()},createFromCache:function(t,e){var i=this.cache.get(t);return i&&this.createFromHTML(i,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var i=document.createElement(e);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),r=0;r<i.length;r++)if(i[r][t]===e)return i[r];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(c.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(c.WAKE,this.handleSceneEvent,this)}});t.exports=u},function(t,e,i){var r=i(1056),n=i(15),s=i(25),o=new s,a=new s,h=new s;t.exports=function(t,e,i,s){if(e.node){var c=e.node.style,l=e.scene.sys.settings;if(!c||!l.visible||n.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&i.id||e.parentContainer&&!e.parentContainer.willRender())c.display="none";else{var u=e.parentContainer,d=i.alpha*e.alpha;u&&(d*=u.alpha);var f=o,p=a,g=h,y=0,m=0,v="0%",b="0%";s?(y=e.width*e.scaleX*e.originX,m=e.height*e.scaleY*e.originY,p.applyITRS(e.x-y,e.y-m,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),f.multiplyWithOffset(s,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),p.e=e.x-y,p.f=e.y-m,f.multiply(p,g)):(y=e.width*e.originX,m=e.height*e.originY,p.applyITRS(e.x-y,e.y-m,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),v=100*e.originX+"%",b=100*e.originY+"%",p.e-=i.scrollX*e.scrollFactorX,p.f-=i.scrollY*e.scrollFactorY,f.multiply(p,g)),e.transformOnly||(c.display="block",c.opacity=d,c.zIndex=e._depth,c.pointerEvents=e.pointerEvents,c.mixBlendMode=r[e._blendMode]),c.transform=g.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",c.transformOrigin=v+" "+b}}}},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(1060),a=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,o],initialize:function(t){s.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=a},function(t,e,i){var r=i(218),n=i(98),s=i(14),o=i(4);t.exports=function(t,e,i){void 0===i&&(i=new o);var a=n(e,0,s.PI2);return r(t,a,i)}},function(t,e,i){var r=i(447),n=i(218),s=i(98),o=i(14);t.exports=function(t,e,i,a){void 0===a&&(a=[]),!e&&i>0&&(e=r(t)/i);for(var h=0;h<e;h++){var c=s(h/e,0,o.PI2);a.push(n(t,c))}return a}},function(t,e){t.exports=function(t){var e=t.width/2,i=t.height/2,r=Math.pow(e-i,2)/Math.pow(e+i,2);return Math.PI*(e+i)*(1+3*r/(10+Math.sqrt(4-3*r)))}},function(t,e,i){var r=i(217),n=i(30);t.exports=function(t,e,i,s,o,a){var h=e.commandBuffer,c=h.length,l=o||t.currentContext;if(0!==c&&n(t,l,e,i,s)){i.addToRenderList(e);var u=1,d=1,f=0,p=0,g=1,y=0,m=0,v=0;l.beginPath();for(var b=0;b<c;++b)switch(h[b]){case r.ARC:l.arc(h[b+1],h[b+2],h[b+3],h[b+4],h[b+5],h[b+6]),b+=7;break;case r.LINE_STYLE:g=h[b+1],f=h[b+2],u=h[b+3],y=(16711680&f)>>>16,m=(65280&f)>>>8,v=255&f,l.strokeStyle="rgba("+y+","+m+","+v+","+u+")",l.lineWidth=g,b+=3;break;case r.FILL_STYLE:p=h[b+1],d=h[b+2],y=(16711680&p)>>>16,m=(65280&p)>>>8,v=255&p,l.fillStyle="rgba("+y+","+m+","+v+","+d+")",b+=2;break;case r.BEGIN_PATH:l.beginPath();break;case r.CLOSE_PATH:l.closePath();break;case r.FILL_PATH:a||l.fill();break;case r.STROKE_PATH:a||l.stroke();break;case r.FILL_RECT:a?l.rect(h[b+1],h[b+2],h[b+3],h[b+4]):l.fillRect(h[b+1],h[b+2],h[b+3],h[b+4]),b+=4;break;case r.FILL_TRIANGLE:l.beginPath(),l.moveTo(h[b+1],h[b+2]),l.lineTo(h[b+3],h[b+4]),l.lineTo(h[b+5],h[b+6]),l.closePath(),a||l.fill(),b+=6;break;case r.STROKE_TRIANGLE:l.beginPath(),l.moveTo(h[b+1],h[b+2]),l.lineTo(h[b+3],h[b+4]),l.lineTo(h[b+5],h[b+6]),l.closePath(),a||l.stroke(),b+=6;break;case r.LINE_TO:l.lineTo(h[b+1],h[b+2]),b+=2;break;case r.MOVE_TO:l.moveTo(h[b+1],h[b+2]),b+=2;break;case r.LINE_FX_TO:l.lineTo(h[b+1],h[b+2]),b+=5;break;case r.MOVE_FX_TO:l.moveTo(h[b+1],h[b+2]),b+=5;break;case r.SAVE:l.save();break;case r.RESTORE:l.restore();break;case r.TRANSLATE:l.translate(h[b+1],h[b+2]),b+=2;break;case r.SCALE:l.scale(h[b+1],h[b+2]),b+=2;break;case r.ROTATE:l.rotate(h[b+1]),b+=1;break;case r.GRADIENT_FILL_STYLE:b+=5;break;case r.GRADIENT_LINE_STYLE:b+=6}l.restore()}}},function(t,e,i){var r=i(0),n=i(137),s=i(80),o=i(2),a=i(68),h=new r({initialize:function(t,e,i,r){void 0===r&&(r=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=r,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=o(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var i=this.has(t,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(t,"ease")?t.ease:"Linear";this.ease=s(r,t.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===e&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===e&&this.has(t,"random")){var n=t.random;Array.isArray(n)&&(this.start=n[0],this.end=n[1]),this.onEmit=this.randomRangedValueEmit}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=n(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=a(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var r=t.data[e];return(r.max-r.min)*this.ease(i)+r.min}});t.exports=h},function(t,e,i){var r=i(0),n=i(2),s=new r({initialize:function(t,e,i,r,s){if("object"==typeof t){var o=t;t=n(o,"x",0),e=n(o,"y",0),i=n(o,"power",0),r=n(o,"epsilon",100),s=n(o,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===s&&(s=50);this.x=t,this.y=e,this.active=!0,this._gravity=s,this._power=0,this._epsilon=0,this.power=i,this.epsilon=r},update:function(t,e){var i=this.x-t.x,r=this.y-t.y,n=i*i+r*r;if(0!==n){var s=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var o=this._power*e/(n*s)*100;t.velocityX+=i*o,t.velocityY+=r*o}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=s},function(t,e,i){var r=i(0),n=i(36),s=i(50),o=new r({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),this.x+=void 0===t?i.x.onEmit(this,"x"):t,this.y+=void 0===e?i.y.onEmit(this,"y"):e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=i.speedX.onEmit(this,"speedX"),o=i.speedY?i.speedY.onEmit(this,"speedY"):r;if(i.radial){var a=n(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(a)*Math.abs(r),this.velocityY=Math.sin(a)*Math.abs(o)}else if(i.moveTo){var h=i.moveToX.onEmit(this,"moveToX"),c=i.moveToY?i.moveToY.onEmit(this,"moveToY"):h,l=Math.atan2(c-this.y,h-this.x),u=s(this.x,this.y,h,c)/(this.life/1e3);this.velocityX=Math.cos(l)*u,this.velocityY=Math.sin(l)*u}else this.velocityX=r,this.velocityY=o;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=n(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,r){var n=this.velocityX,s=this.velocityY,o=this.accelerationX,a=this.accelerationY,h=this.maxVelocityX,c=this.maxVelocityY;n+=t.gravityX*i,s+=t.gravityY*i,o&&(n+=o*i),a&&(s+=a*i),n>h?n=h:n<-h&&(n=-h),s>c?s=c:s<-c&&(s=-c),this.velocityX=n,this.velocityY=s;for(var l=0;l<r.length;l++)r[l].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var r=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(r,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",s,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=n(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=r.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=o},function(t,e,i){var r=i(35),n=i(0),s=i(11),o=i(453),a=i(454),h=i(449),c=i(2),l=i(210),u=i(455),d=i(126),f=i(451),p=i(456),g=i(10),y=i(79),m=i(3),v=i(68),b=new n({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new h(e,"x",0,!0),this.y=new h(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new h(e,"accelerationX",0,!0),this.accelerationY=new h(e,"accelerationY",0,!0),this.maxVelocityX=new h(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new h(e,"maxVelocityY",1e4,!0),this.speedX=new h(e,"speedX",0,!0),this.speedY=new h(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new h(e,"moveToX",0,!0),this.moveToY=new h(e,"moveToY",0,!0),this.bounce=new h(e,"bounce",0,!0),this.scaleX=new h(e,"scaleX",1),this.scaleY=new h(e,"scaleY",1),this.tint=new h(e,"tint",16777215),this.alpha=new h(e,"alpha",1),this.lifespan=new h(e,"lifespan",1e3,!0),this.angle=new h(e,"angle",{min:0,max:360},!0),this.rotate=new h(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new h(e,"quantity",1,!0),this.delay=new h(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=r.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],d(t,i)&&(this[i]=c(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],d(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,d(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(u(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),d(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),d(t,"callbackScope")){var r=c(t,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return d(t,"emitZone")&&this.setEmitZone(t.emitZone),d(t,"deathZone")&&this.setDeathZone(t.deathZone),d(t,"bounds")&&this.setBounds(t.bounds),d(t,"followOffset")&&this.followOffset.setFromObject(c(t,"followOffset",0)),d(t,"frame")&&this.setFrame(t.frame),d(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,r){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return l(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=v(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var r=typeof t;if(Array.isArray(t)||"string"===r||"number"===r)this.manager.setEmitterFrames(t,this);else if("object"===r){var n=t;(t=c(n,"frames",null))&&this.manager.setEmitterFrames(t,this);var s=c(n,"cycle",!1);this.randomFrame=!s,this.frameQuantity=c(n,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,r){if("object"==typeof t){var n=t;t=n.x,e=n.y,i=d(n,"w")?n.w:n.width,r=d(n,"h")?n.h:n.height}return this.bounds?this.bounds.setTo(t,e,i,r):this.bounds=new g(t,e,i,r),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=c(t,"type","random"),i=c(t,"source",null);switch(e){case"random":this.emitZone=new p(i);break;case"edge":var r=c(t,"quantity",1),n=c(t,"stepRate",0),s=c(t,"yoyo",!1),o=c(t,"seamless",!0);this.emitZone=new a(i,r,n,s,o)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=c(t,"type","onEnter"),i=c(t,"source",null);if(i&&"function"==typeof i.contains){var r="onEnter"===e;this.deathZone=new o(i,r)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,r=i.length,n=0;n<r;++n)t.call(e,i[n],this);return this},forEachDead:function(t,e){for(var i=this.dead,r=i.length,n=0;n<r;++n)t.call(e,i[n],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return y(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var r=this.dead,n=this.follow?this.follow.x+this.followOffset.x:e,s=this.follow?this.follow.y+this.followOffset.y:i,o=0;o<t;o++){var a=r.pop();if(a||(a=new this.particleClass(this)),a.fire(n,s),this.particleBringToTop?this.alive.push(a):this.alive.unshift(a),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,a,this),this.atLimit())break}return a}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),n=this.alive,s=this.dead,o=0,a=[],h=n.length;for(o=0;o<h;o++){var c=n[o];c.update(e,i,r)&&a.push({index:o,particle:c})}if((h=a.length)>0){var l=this.deathCallback,u=this.deathCallbackScope;for(o=h-1;o>=0;o--){var d=a[o];n.splice(d.index,1),s.push(d.particle),l&&l.call(u,d.particle),d.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=b},function(t,e,i){var r=new(i(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=r},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=r,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=r},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}},function(t,e,i){var r=i(0),n=i(3),s=new r({initialize:function(t){this.source=t,this._tempVec=new n},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=s},function(t,e,i){var r=i(0),n=i(11),s=i(73),o=new r({Extends:s,Mixins:[n.PathFollower],initialize:function(t,e,i,r,n,o){s.call(this,t,i,r,n,o),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=o},function(t,e){t.exports=function(t,e,i){var r=t.canvas,n=t.context,s=t.style,o=[],a=0,h=i.length;s.maxLines>0&&s.maxLines<i.length&&(h=s.maxLines),s.syncFont(r,n);for(var c=0;c<h;c++){var l=s.strokeThickness;l+=n.measureText(i[c]).width,s.wordWrap&&(l-=n.measureText(" ").width),o[c]=Math.ceil(l),a=Math.max(a,o[c])}var u=e.fontSize+s.strokeThickness,d=u*h,f=t.lineSpacing;return h>1&&(d+=f*(h-1)),{width:a,height:d,lines:h,lineWidths:o,lineSpacing:f,lineHeight:u}}},function(t,e,i){var r=i(0),n=i(13),s=i(6),o=i(460),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new r({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=s(e,"metrics",!1);this.metrics=i?{ascent:s(i,"ascent",0),descent:s(i,"descent",0),fontSize:s(i,"fontSize",0)}:o(this)},setStyle:function(t,e,i){for(var r in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),a){var o=i?a[r][1]:this[r];this[r]="wordWrapCallback"===r||"wordWrapCallbackScope"===r?s(t,a[r][0],o):n(t,a[r][0],o)}var h=s(t,"font",null);null!==h&&this.setFont(h,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=s(t,"fill",null);return null!==c&&(this.color=c),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i=t,r="",n="";if("string"!=typeof t)i=s(t,"fontFamily","Courier"),r=s(t,"fontSize","16px"),n=s(t,"fontStyle","");else{var o=t.split(" "),a=0;n=o.length>2?o[a++]:"",r=o[a++]||"16px",i=o[a++]||"Courier"}return i===this.fontFamily&&r===this.fontSize&&n===this.fontStyle||(this.fontFamily=i,this.fontSize=r,this.fontStyle=n,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,r,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=s,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in a)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=h},function(t,e,i){var r=i(31);t.exports=function(t){var e=r.create(this),i=e.getContext("2d");t.syncFont(e,i);var n=i.measureText(t.testString);if("actualBoundingBoxAscent"in n){var s=n.actualBoundingBoxAscent,o=n.actualBoundingBoxDescent;return r.remove(e),{ascent:s,descent:o,fontSize:s+o}}var a=Math.ceil(n.width*t.baselineX),h=a,c=2*h;h=h*t.baselineY|0,e.width=a,e.height=c,i.fillStyle="#f00",i.fillRect(0,0,a,c),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,h);var l={ascent:0,descent:0,fontSize:0},u=i.getImageData(0,0,a,c);if(!u)return l.ascent=h,l.descent=h+6,l.fontSize=l.ascent+l.descent,r.remove(e),l;var d,f,p=u.data,g=p.length,y=4*a,m=0,v=!1;for(d=0;d<h;d++){for(f=0;f<y;f+=4)if(255!==p[m+f]){v=!0;break}if(v)break;m+=y}for(l.ascent=h-d,m=g-y,v=!1,d=c;d>h;d--){for(f=0;f<y;f+=4)if(255!==p[m+f]){v=!0;break}if(v)break;m-=y}return l.descent=d-h,l.fontSize=l.ascent+l.descent,r.remove(e),l}},function(t,e,i){var r=i(1097),n=i(0),s=i(36),o=i(59),a=i(65),h=i(14),c=i(34),l=new n({Extends:c,Mixins:[r],initialize:function(t,e,i,r,n,s,o,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=0),void 0===s&&(s=360),void 0===o&&(o=!1),c.call(this,t,"Arc",new a(0,0,r)),this._startAngle=n,this._endAngle=s,this._anticlockwise=o,this._iterations=.01,this.setPosition(e,i);var u=2*this.geom.radius;this.setSize(u,u),void 0!==h&&this.setFillStyle(h,l),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,r=s(this._startAngle),n=s(this._endAngle),a=i,c=i;n-=r,this._anticlockwise?n<-h.PI2?n=-h.PI2:n>0&&(n=-h.PI2+n%h.PI2):n>h.PI2?n=h.PI2:n<0&&(n=h.PI2+n%h.PI2);for(var l,u=[a+Math.cos(r)*i,c+Math.sin(r)*i];e<1;)l=n*e+r,u.push(a+Math.cos(l)*i,c+Math.sin(l)*i),e+=t;return l=n+r,u.push(a+Math.cos(l)*i,c+Math.sin(l)*i),u.push(a+Math.cos(r)*i,c+Math.sin(r)*i),this.pathIndexes=o(u),this.pathData=u,this}});t.exports=l},function(t,e,i){var r=i(0),n=i(1100),s=i(59),o=i(10),a=i(34),h=new r({Extends:a,Mixins:[n],initialize:function(t,e,i,r,n,s){void 0===e&&(e=0),void 0===i&&(i=0),a.call(this,t,"Curve",r),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(e,i),void 0!==n&&this.setFillStyle(n,s),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],r=this.geom.getPoints(e),n=0;n<r.length;n++)i.push(r[n].x,r[n].y);return i.push(r[0].x,r[0].y),this.pathIndexes=s(i),this.pathData=i,this}});t.exports=h},function(t,e,i){var r=i(0),n=i(59),s=i(1103),o=i(111),a=i(34),h=new r({Extends:a,Mixins:[s],initialize:function(t,e,i,r,n,s,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=128),a.call(this,t,"Ellipse",new o(r/2,n/2,r,n)),this._smoothness=64,this.setPosition(e,i),this.width=r,this.height=n,void 0!==s&&this.setFillStyle(s,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=h},function(t,e,i){var r=i(0),n=i(34),s=i(1106),o=new r({Extends:n,Mixins:[s],initialize:function(t,e,i,r,s,o,a,h,c,l,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===s&&(s=128),void 0===o&&(o=32),void 0===a&&(a=32),n.call(this,t,"Grid",null),this.cellWidth=o,this.cellHeight=a,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(r,s),this.setFillStyle(h,c),void 0!==l&&this.setOutlineStyle(l,u),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=o},function(t,e,i){var r=i(1109),n=i(0),s=i(34),o=new n({Extends:s,Mixins:[r],initialize:function(t,e,i,r,n,o,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=48),void 0===n&&(n=32),void 0===o&&(o=15658734),void 0===a&&(a=10066329),void 0===h&&(h=13421772),s.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=o,this.fillLeft=a,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(r,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=o},function(t,e,i){var r=i(0),n=i(1112),s=i(34),o=new r({Extends:s,Mixins:[n],initialize:function(t,e,i,r,n,o,a,h,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=48),void 0===n&&(n=32),void 0===o&&(o=!1),void 0===a&&(a=15658734),void 0===h&&(h=10066329),void 0===c&&(c=13421772),s.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=o,this.isFilled=!0,this.setPosition(e,i),this.setSize(r,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=o},function(t,e,i){var r=i(0),n=i(34),s=i(47),o=i(1115),a=new r({Extends:n,Mixins:[o],initialize:function(t,e,i,r,o,a,h,c,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===h&&(h=0),n.call(this,t,"Line",new s(r,o,a,h));var u=Math.max(1,this.geom.right-this.geom.left),d=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(u,d),void 0!==c&&this.setStrokeStyle(1,c,l),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,r){return this.geom.setTo(t,e,i,r),this}});t.exports=a},function(t,e,i){var r=i(1118),n=i(0),s=i(59),o=i(469),a=i(227),h=i(34),c=i(472),l=new n({Extends:h,Mixins:[r],initialize:function(t,e,i,r,n,s){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Polygon",new a(r));var c=o(this.geom);this.setPosition(e,i),this.setSize(c.width,c.height),void 0!==n&&this.setFillStyle(n,s),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)c(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=l},function(t,e,i){var r=i(10);t.exports=function(t,e){void 0===e&&(e=new r);for(var i,n=1/0,s=1/0,o=-n,a=-s,h=0;h<t.points.length;h++)i=t.points[h],n=Math.min(n,i.x),s=Math.min(s,i.y),o=Math.max(o,i.x),a=Math.max(a,i.y);return e.x=n,e.y=s,e.width=o-n,e.height=a-s,e}},function(t,e,i){var r=i(67),n=i(47),s=i(471);t.exports=function(t,e,i,o){void 0===o&&(o=[]);var a=t.points,h=s(t);!e&&i>0&&(e=h/i);for(var c=0;c<e;c++)for(var l=h*(c/e),u=0,d=0;d<a.length;d++){var f=a[d],p=a[(d+1)%a.length],g=new n(f.x,f.y,p.x,p.y),y=r(g);if(!(l<u||l>u+y)){var m=g.getPoint((l-u)/y);o.push(m);break}u+=y}return o}},function(t,e,i){var r=i(67),n=i(47);t.exports=function(t){for(var e=t.points,i=0,s=0;s<e.length;s++){var o=e[s],a=e[(s+1)%e.length],h=new n(o.x,o.y,a.x,a.y);i+=r(h)}return i}},function(t,e){var i=function(t,e){return t[0]=e[0],t[1]=e[1],t};t.exports=function(t){var e,r=[],n=t.points;for(e=0;e<n.length;e++)r.push([n[e].x,n[e].y]);var s=[];for(r.length>0&&s.push(i([0,0],r[0])),e=0;e<r.length-1;e++){var o=r[e],a=r[e+1],h=o[0],c=o[1],l=a[0],u=a[1];s.push([.85*h+.15*l,.85*c+.15*u]),s.push([.15*h+.85*l,.15*c+.85*u])}return r.length>1&&s.push(i([0,0],r[r.length-1])),t.setTo(s)}},function(t,e,i){var r=i(0),n=i(10),s=i(34),o=i(1121),a=new r({Extends:s,Mixins:[o],initialize:function(t,e,i,r,o,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===o&&(o=128),s.call(this,t,"Rectangle",new n(0,0,r,o)),this.setPosition(e,i),this.setSize(r,o),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=a},function(t,e,i){var r=i(1124),n=i(0),s=i(59),o=i(34),a=new n({Extends:o,Mixins:[r],initialize:function(t,e,i,r,n,s,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=5),void 0===n&&(n=32),void 0===s&&(s=64),o.call(this,t,"Star",null),this._points=r,this._innerRadius=n,this._outerRadius=s,this.setPosition(e,i),this.setSize(2*s,2*s),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,r=this._outerRadius,n=Math.PI/2*3,o=Math.PI/e,a=r,h=r;t.push(a,h+-r);for(var c=0;c<e;c++)t.push(a+Math.cos(n)*r,h+Math.sin(n)*r),n+=o,t.push(a+Math.cos(n)*i,h+Math.sin(n)*i),n+=o;return t.push(a,h+-r),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=a},function(t,e,i){var r=i(0),n=i(34),s=i(82),o=i(1127),a=new r({Extends:n,Mixins:[o],initialize:function(t,e,i,r,o,a,h,c,l,u,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===a&&(a=64),void 0===h&&(h=0),void 0===c&&(c=128),void 0===l&&(l=128),n.call(this,t,"Triangle",new s(r,o,a,h,c,l));var f=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(f,p),void 0!==u&&this.setFillStyle(u,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,r,n,s){return this.geom.setTo(t,e,i,r,n,s),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=a},function(t,e,i){var r=i(4),n=i(67);t.exports=function(t,e,i){void 0===i&&(i=new r);var s=t.getLineA(),o=t.getLineB(),a=t.getLineC();if(e<=0||e>=1)return i.x=s.x1,i.y=s.y1,i;var h=n(s),c=n(o),l=n(a),u=(h+c+l)*e,d=0;return u<h?(d=u/h,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d):u>h+c?(d=(u-=h+c)/l,i.x=a.x1+(a.x2-a.x1)*d,i.y=a.y1+(a.y2-a.y1)*d):(d=(u-=h)/c,i.x=o.x1+(o.x2-o.x1)*d,i.y=o.y1+(o.y2-o.y1)*d),i}},function(t,e,i){var r=i(67),n=i(4);t.exports=function(t,e,i,s){void 0===s&&(s=[]);var o=t.getLineA(),a=t.getLineB(),h=t.getLineC(),c=r(o),l=r(a),u=r(h),d=c+l+u;!e&&i>0&&(e=d/i);for(var f=0;f<e;f++){var p=d*(f/e),g=0,y=new n;p<c?(g=p/c,y.x=o.x1+(o.x2-o.x1)*g,y.y=o.y1+(o.y2-o.y1)*g):p>c+l?(g=(p-=c+l)/u,y.x=h.x1+(h.x2-h.x1)*g,y.y=h.y1+(h.y2-h.y1)*g):(g=(p-=c)/l,y.x=a.x1+(a.x2-a.x1)*g,y.y=a.y1+(a.y2-a.y1)*g),s.push(y)}return s}},function(t,e){t.exports=function(t,e,i){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=i,!0;if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,s=t,o=0;o<r.length;o++){if(!n.hasOwnProperty(r[o]))return!1;s=n,n=n[r[o]]}return s[r[r.length-1]]=i,!0}return!1}},function(t,e,i){var r=i(116),n=i(117);t.exports=function(t,e,i,s,o,a,h){if(void 0===s&&(s=!1),void 0===a&&(a=16777215),void 0===h&&(h=1),t.length===e.length){var c,l,u,d,f,p,g,y,m,v,b,w={faces:[],vertices:[]},_=s?3:2,x=Array.isArray(a),E=Array.isArray(h);if(Array.isArray(i)&&i.length>0)for(c=0;c<i.length;c++){var S=i[c],T=2*i[c],A=i[c]*_;l=t[A],u=t[A+1],d=s?t[A+2]:0,f=e[T],p=e[T+1],g=x?a[S]:a,y=E?h[S]:h,m=0,v=0,b=0,o&&(m=o[A],v=o[A+1],b=s?o[A+2]:0),w.vertices.push(new n(l,u,d,f,p,g,y,m,v,b))}else{var C=0,k=0;for(c=0;c<t.length;c+=_)l=t[c],u=t[c+1],d=s?t[c+2]:0,f=e[C],p=e[C+1],g=x?a[k]:a,y=E?h[k]:h,m=0,v=0,b=0,o&&(m=o[c],v=o[c+1],b=s?o[c+2]:0),w.vertices.push(new n(l,u,d,f,p,g,y,m,v,b)),C+=2,k++}for(c=0;c<w.vertices.length;c+=3){var R=w.vertices[c],P=w.vertices[c+1],I=w.vertices[c+2];w.faces.push(new r(R,P,I))}return w}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,e,i){var r=i(116),n=i(69),s=i(39),o=i(117),a=new s,h=new s,c=new n;t.exports=function(t,e,i,n,s,l,u,d,f,p){void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=!0);var g={faces:[],verts:[]},y=t.materials;a.set(n,s,l),h.set(u,d,f),c.fromRotationXYTranslation(h,a,p);for(var m=0;m<t.models.length;m++)for(var v=t.models[m],b=v.vertices,w=v.textureCoords,_=v.faces,x=0;x<_.length;x++){var E=_[x],S=E.vertices[0],T=E.vertices[1],A=E.vertices[2],C=b[S.vertexIndex],k=b[T.vertexIndex],R=b[A.vertexIndex],P=S.textureCoordsIndex,I=T.textureCoordsIndex,O=A.textureCoordsIndex,M=-1===P?{u:0,v:1}:w[P],D=-1===I?{u:0,v:0}:w[I],B=-1===O?{u:1,v:1}:w[O],L=16777215;""!==E.material&&y[E.material]&&(L=y[E.material]);var N=new o(C.x*i,C.y*i,C.z*i,M.u,M.v,L).transformMat4(c),U=new o(k.x*i,k.y*i,k.z*i,D.u,D.v,L).transformMat4(c),F=new o(R.x*i,R.y*i,R.z*i,B.u,B.v,L).transformMat4(c);g.verts.push(N,U,F),g.faces.push(new r(N,U,F))}return e&&(e.faces=e.faces.concat(g.faces),e.vertices=e.vertices.concat(g.verts)),g}},function(t,e,i){var r=i(65),n=i(0),s=i(11),o=i(200),a=i(12),h=new n({Extends:r,Mixins:[s.ScrollFactor,s.Visible],initialize:function(t,e,i,n,s,a,h){r.call(this,t,e,i),this.color=new o(n,s,a),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=a.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});h.RENDER_MASK=15,t.exports=h},function(t,e,i){var r=i(151),n=i(0),s=i(50),o=i(481),a=i(150),h=i(200),c=i(74),l=i(79),u=i(12),d=new n({initialize:function(){this.lights=[],this.ambientColor=new h(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,i,r,n,s){return this.systems.displayList.add(new a(this.scene,t,e,i,r,n,s))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,i=t.worldView,n=[],o=0;o<e.length;o++){var a=e[o];a.willRender(t)&&r(a,i)&&n.push({light:a,distance:s(a.x,a.y,i.centerX,i.centerY)})}return n.length>this.maxLights&&(l(n,this.sortByDistance),n=n.slice(0,this.maxLights)),this.visibleLights=n.length,n},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=u.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=128),void 0===r&&(r=16777215),void 0===n&&(n=1);var s=u.getFloatsFromUintRGB(r),a=new o(t,e,i,s[0],s[1],s[2],n);return this.lights.push(a),a},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&c(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=d},function(t,e,i){var r=i(56),n=i(17),s={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(t,e,i){var r=i(39);t.exports=function(t,e,i){var n=t.x1,s=t.y1,o=t.x2,a=t.y2,h=e.x1,c=e.y1,l=o-n,u=a-s,d=e.x2-h,f=e.y2-c;if(0===l||0==f*l-d*u)return!1;var p=(l*(c-s)+u*(n-h))/(d*u-f*l),g=(h+d*p-n)/l;return g<0||p<0||p>1?null:(void 0===i&&(i=new r),i.set(n+l*g,s+u*g,g))}},function(t,e,i){var r=i(39),n=i(485),s=new(i(47)),o=new r;t.exports=function(t,e,i){void 0===i&&(i=new r);var a=!1;i.set(),o.set();for(var h=e[0],c=1;c<e.length;c++){var l=e[c];s.setTo(h.x,h.y,l.x,l.y),h=l,n(t,s,o)&&(!a||o.z<i.z)&&(i.copy(o),a=!0)}return a?i:null}},function(t,e,i){var r=i(39),n=i(140),s=i(486),o=new r;t.exports=function(t,e,i){void 0===i&&(i=new n),Array.isArray(e)||(e=[e]);var r=!1;i.set(),o.set();for(var a=0;a<e.length;a++)s(t,e[a].points,o)&&(!r||o.z<i.z)&&(i.set(o.x,o.y,o.z,a),r=!0);return r?i:null}},function(t,e){t.exports=function(t,e){var i=t.x1,r=t.y1,n=t.x2,s=t.y2,o=e.x,a=e.y,h=e.right,c=e.bottom,l=0;if(i>=o&&i<=h&&r>=a&&r<=c||n>=o&&n<=h&&s>=a&&s<=c)return!0;if(i<o&&n>=o){if((l=r+(s-r)*(o-i)/(n-i))>a&&l<=c)return!0}else if(i>h&&n<=h&&(l=r+(s-r)*(h-i)/(n-i))>=a&&l<=c)return!0;if(r<a&&s>=a){if((l=i+(n-i)*(a-r)/(s-r))>=o&&l<=h)return!0}else if(r>c&&s<=c&&(l=i+(n-i)*(c-r)/(s-r))>=o&&l<=h)return!0;return!1}},function(t,e,i){var r=i(96),n=i(57),s=i(235),o=i(490);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),a=e.getLineB(),h=e.getLineC();if(n(t,i.x1,i.y1)||n(t,i.x2,i.y2))return!0;if(n(t,a.x1,a.y1)||n(t,a.x2,a.y2))return!0;if(n(t,h.x1,h.y1)||n(t,h.x2,h.y2))return!0;var c=t.getLineA(),l=t.getLineB(),u=t.getLineC(),d=t.getLineD();if(r(i,c)||r(i,l)||r(i,u)||r(i,d))return!0;if(r(a,c)||r(a,l)||r(a,u)||r(a,d))return!0;if(r(h,c)||r(h,l)||r(h,u)||r(h,d))return!0;var f=o(t);return s(e,f,!0).length>0}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,i){var r=i(233),n=i(115);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!n(t,e.x,e.y)&&!r(t.getLineA(),e)&&!r(t.getLineB(),e)&&!r(t.getLineC(),e))}},function(t,e,i){var r=i(4),n=i(493),s=i(96);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e))for(var o=t.getLineA(),a=t.getLineB(),h=t.getLineC(),c=[new r,new r,new r],l=[s(o,e,c[0]),s(a,e,c[1]),s(h,e,c[2])],u=0;u<3;u++)l[u]&&i.push(c[u]);return i}},function(t,e,i){var r=i(96);t.exports=function(t,e){return!!(t.contains(e.x1,e.y1)||t.contains(e.x2,e.y2)||r(t.getLineA(),e)||r(t.getLineB(),e)||r(t.getLineC(),e))}},function(t,e,i){var r=i(235),n=i(495),s=i(96);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),o=t.getLineB(),a=t.getLineC(),h=e.getLineA(),c=e.getLineB(),l=e.getLineC();if(s(i,h)||s(i,c)||s(i,l))return!0;if(s(o,h)||s(o,c)||s(o,l))return!0;if(s(a,h)||s(a,c)||s(a,l))return!0;var u=n(t),d=r(e,u,!0);return d.length>0||(u=n(e),(d=r(t,u,!0)).length>0)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=1);var r=e.x1,n=e.y1,s=e.x2,o=e.y2,a=t.x,h=t.y,c=(s-r)*(s-r)+(o-n)*(o-n);if(0===c)return!1;var l=((a-r)*(s-r)+(h-n)*(o-n))/c;if(l<0)return Math.sqrt((r-a)*(r-a)+(n-h)*(n-h))<=i;if(l>=0&&l<=1){var u=((n-h)*(s-r)-(r-a)*(o-n))/c;return Math.abs(u)*Math.sqrt(c)<=i}return Math.sqrt((s-a)*(s-a)+(o-h)*(o-h))<=i}},function(t,e,i){var r=i(14),n=i(68),s=i(97);t.exports=function(t){var e=s(t)-r.TAU;return n(e,-Math.PI,Math.PI)}},function(t,e){var i=!0,r="untitled",n="",s="";function o(t){return 0===t.models.length&&t.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),n="",t.models[t.models.length-1]}function a(t,e){var i=t.length>=2?t[1]:r;e.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),n=""}function h(t){2===t.length&&(n=t[1])}function c(t,e){var i=t.length,r=i>=2?parseFloat(t[1]):0,n=i>=3?parseFloat(t[2]):0,s=i>=4?parseFloat(t[3]):0;o(e).vertices.push({x:r,y:n,z:s})}function l(t,e){var r=t.length,n=r>=2?parseFloat(t[1]):0,s=r>=3?parseFloat(t[2]):0,a=r>=4?parseFloat(t[3]):0;isNaN(n)&&(n=0),isNaN(s)&&(s=0),isNaN(a)&&(a=0),i&&(s=1-s),o(e).textureCoords.push({u:n,v:s,w:a})}function u(t,e){var i=t.length,r=i>=2?parseFloat(t[1]):0,n=i>=3?parseFloat(t[2]):0,s=i>=4?parseFloat(t[3]):0;o(e).vertexNormals.push({x:r,y:n,z:s})}function d(t,e){var i=t.length-1;if(!(i<3)){for(var r={group:n,material:s,vertices:[]},a=0;a<i;a++){var h=t[a+1].split("/"),c=h.length;if(!(c<1||c>3)){var l=0,u=0,d=0;l=parseInt(h[0],10),c>1&&""!==h[1]&&(u=parseInt(h[1],10)),c>2&&(d=parseInt(h[2],10)),0!==l&&(l<0&&(l=o(e).vertices.length+1+l),u-=1,l-=1,d-=1,r.vertices.push({textureCoordsIndex:u,vertexIndex:l,vertexNormalIndex:d}))}}o(e).faces.push(r)}}function f(t,e){t.length>=2&&e.materialLibraries.push(t[1])}function p(t){t.length>=2&&(s=t[1])}t.exports=function(t,e){void 0===e&&(e=!0),i=e;var r,o,g={materials:{},materialLibraries:[],models:[]};n="",s="";for(var y=t.split("\n"),m=0;m<y.length;m++){var v=(r=y[m],o=void 0,o=r.indexOf("#"),o>-1?r.substring(0,o):r).replace(/\s\s+/g," ").trim().split(" ");switch(v[0].toLowerCase()){case"o":a(v,g);break;case"g":h(v);break;case"v":c(v,g);break;case"vt":l(v,g);break;case"vn":u(v,g);break;case"f":d(v,g);break;case"mtllib":f(v,g);break;case"usemtl":p(v)}}return g}},function(t,e,i){var r=i(103);t.exports=function(t){for(var e={},i=t.split("\n"),n="",s=0;s<i.length;s++){var o=i[s].trim();if(0!==o.indexOf("#")&&""!==o){var a=o.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":n=a[1];break;case"kd":var h=Math.floor(255*a[1]),c=a.length>=2?Math.floor(255*a[2]):h,l=a.length>=3?Math.floor(255*a[3]):h;e[n]=r(h,c,l)}}}return e}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,i){var r=i(10);r.Area=i(1267),r.Ceil=i(1268),r.CeilAll=i(1269),r.CenterOn=i(190),r.Clone=i(1270),r.Contains=i(57),r.ContainsPoint=i(1271),r.ContainsRect=i(503),r.CopyFrom=i(1272),r.Decompose=i(490),r.Equals=i(1273),r.FitInside=i(1274),r.FitOutside=i(1275),r.Floor=i(1276),r.FloorAll=i(1277),r.FromPoints=i(199),r.FromXY=i(1278),r.GetAspectRatio=i(237),r.GetCenter=i(1279),r.GetPoint=i(171),r.GetPoints=i(306),r.GetSize=i(1280),r.Inflate=i(1281),r.Intersection=i(1282),r.MarchingAnts=i(316),r.MergePoints=i(1283),r.MergeRect=i(1284),r.MergeXY=i(1285),r.Offset=i(1286),r.OffsetPoint=i(1287),r.Overlaps=i(1288),r.Perimeter=i(130),r.PerimeterPoint=i(1289),r.Random=i(174),r.RandomOutside=i(1290),r.SameDimensions=i(1291),r.Scale=i(1292),r.Union=i(441),t.exports=r},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t.x3+=e,t.y3+=i,t}},function(t,e,i){var r=i(4);function n(t,e,i,r){var n=t-i,s=e-r,o=n*n+s*s;return Math.sqrt(o)}t.exports=function(t,e){void 0===e&&(e=new r);var i=t.x1,s=t.y1,o=t.x2,a=t.y2,h=t.x3,c=t.y3,l=n(h,c,o,a),u=n(i,s,h,c),d=n(o,a,i,s),f=l+u+d;return e.x=(i*l+o*u+h*d)/f,e.y=(s*l+a*u+c*d)/f,e}},function(t,e){t.exports=function(t,e){return function(i,r,n,s){var o=t.getPixelAlpha(r,n,s.texture.key,s.frame.name);return o&&o>=e}}},function(t,e){t.exports=function(t,e,i){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,i){var r=new(i(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=r},function(t,e,i){var r=i(0),n=i(239),s=new r({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,i=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(n.BUTTON_DOWN,e,this,t),this.pad.emit(n.GAMEPAD_BUTTON_DOWN,i,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(n.BUTTON_UP,e,this,t),this.pad.emit(n.GAMEPAD_BUTTON_UP,i,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=s},function(t,e,i){var r=i(509),n=i(510),s=i(0),o=i(9),a=i(3),h=new s({Extends:o,initialize:function(t,e){o.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var i=[],s=0;s<e.buttons.length;s++)i.push(new n(this,s));this.buttons=i;var h=[];for(s=0;s<e.axes.length;s++)h.push(new r(this,s));this.axes=h,this.vibration=e.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:c,this._LCRight=i[15]?i[15]:c,this._LCTop=i[12]?i[12]:c,this._LCBottom=i[13]?i[13]:c,this._RCLeft=i[2]?i[2]:c,this._RCRight=i[1]?i[1]:c,this._RCTop=i[3]?i[3]:c,this._RCBottom=i[0]?i[0]:c,this._FBLeftTop=i[4]?i[4]:c,this._FBLeftBottom=i[6]?i[6]:c,this._FBRightTop=i[5]?i[5]:c,this._FBRightBottom=i[7]?i[7]:c;var l={value:0};this._HAxisLeft=h[0]?h[0]:l,this._VAxisLeft=h[1]?h[1]:l,this._HAxisRight=h[2]?h[2]:l,this._VAxisRight=h[3]?h[3]:l,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var e,i=this.buttons,r=t.buttons,n=i.length;for(e=0;e<n;e++)i[e].update(r[e].value);var s=this.axes,o=t.axes;for(n=s.length,e=0;e<n;e++)s[e].update(o[e]);n>=2&&(this.leftStick.set(s[0].getValue(),s[1].getValue()),n>=4&&this.rightStick.set(s[2].getValue(),s[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=h},function(t,e,i){var r=i(0),n=i(9),s=i(154),o=new r({Extends:n,initialize:function(t,e){n.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=o},function(t,e,i){var r=i(0),n=i(154),s=i(2),o=i(514),a=i(516),h=new r({initialize:function(t,e,i){if(void 0===i&&(i={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var r=0;r<e.length;r++){var h=e[r];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(i,"resetOnWrongKey",!0),this.maxKeyDelay=s(i,"maxKeyDelay",0),this.resetOnMatch=s(i,"resetOnMatch",!1),this.deleteOnMatch=s(i,"deleteOnMatch",!1);var c=this;this.onKeyDown=function(t){!c.matched&&c.enabled&&o(t,c)&&(c.manager.emit(n.COMBO_MATCH,c,t),c.resetOnMatch?a(c):c.deleteOnMatch&&c.destroy())},this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=h},function(t,e,i){var r=i(515);t.exports=function(t,e){if(e.matched)return!0;var i=!1,n=!1;if(t.keyCode===e.current)if(e.index>0&&e.maxKeyDelay>0){var s=e.timeLastMatched+e.maxKeyDelay;t.timeStamp<=s&&(n=!0,i=r(t,e))}else n=!0,i=r(t,e);return!n&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),i&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),i}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,i){var r=i(240);t.exports=function(t,e){var i=r(e,t.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",t.src,i.async,i.user,i.password),n.responseType=t.xhrSettings.responseType,n.timeout=i.timeout,i.headers)for(var s in i.headers)n.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&n.setRequestHeader(i.header,i.headerValue),i.requestedWith&&n.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&n.overrideMimeType(i.overrideMimeType),i.withCredentials&&(n.withCredentials=!0),n.onload=t.onLoad.bind(t,n),n.onerror=t.onError.bind(t,n),n.onprogress=t.onProgress.bind(t),n.send(),n}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(519),c=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,n){if(c(e)){var o=e;e=a(o,"key"),r=a(o,"xhrSettings"),n=a(o,"context",n)}var h={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:r,config:{context:n}};s.call(this,t,h)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});l.create=function(t,e,i,r,n){var s=t.systems.game,o=s.config.audio,u=s.device.audio;c(e)&&(i=a(e,"url",[]),r=a(e,"config",{}));var d=l.getAudioURL(s,i);return d?u.webAudio&&!o.disableWebAudio?new l(t,e,d,n,s.sound.context):new h(t,e,d,r):null},l.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=a(e[i],"url",e[i]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return{url:r,type:""};var n=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(n=a(e[i],"type",n?n[1]:"").toLowerCase(),t.device.audio[n])return{url:r,type:n}}return null},o.register("audio",(function(t,e,i,r){var n,s=this.systems.game,o=s.config.audio,a=s.device.audio;if(o.noAudio||!a.webAudio&&!a.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(n=l.create(this,t[h]))&&this.addFile(n);else(n=l.create(this,t,e,i,r))&&this.addFile(n);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(95),s=i(23),o=i(2),a=i(155),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r){if(h(e)){var n=e;e=o(n,"key"),r=o(n,"config",r)}var a={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:r};s.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=a(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r){var n="js";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var c={type:"script",cache:!1,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){var r=i(522),n=i(157),s=i(0),o=i(62),a=i(524),h=i(525),c=new s({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,i,r,n){return this.world.addCollider(t,e,i,r,n)},overlap:function(t,e,i,r,n){return this.world.addOverlap(t,e,i,r,n)},existing:function(t,e){var i=e?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(t,i),t},staticImage:function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,o.STATIC_BODY),s},image:function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,o.DYNAMIC_BODY),s},staticSprite:function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,o.STATIC_BODY),s},sprite:function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,o.DYNAMIC_BODY),s},staticGroup:function(t,e){return this.sys.updateList.add(new h(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new a(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=c},function(t,e,i){var r=i(0),n=i(243),s=i(125),o=new r({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.body=null}});t.exports=o},function(t,e,i){var r=i(244),n=i(65),s=i(231),o=i(151);t.exports=function(t,e,i,a,h,c){var l=r(t,e-a,i-a,2*a,2*a,h,c);if(0===l.length)return l;for(var u=new n(e,i,a),d=new n,f=[],p=0;p<l.length;p++){var g=l[p];g.isCircle?(d.setTo(g.center.x,g.center.y,g.halfWidth),s(u,d)&&f.push(g)):o(u,g)&&f.push(g)}return f}},function(t,e,i){var r=i(157),n=i(0),s=i(62),o=i(2),a=i(113),h=i(7),c=new n({Extends:a,initialize:function(t,e,i,n){if(i||n)if(h(i))n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(i)&&h(i[0])){n=i[0];var c=this;i.forEach((function(t){t.internalCreateCallback=c.createCallbackHandler,t.internalRemoveCallback=c.removeCallbackHandler})),i=null}else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,n.classType=o(n,"classType",r),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(n,"collideWorldBounds",!1),setBoundsRectangle:o(n,"customBoundsRectangle",null),setAccelerationX:o(n,"accelerationX",0),setAccelerationY:o(n,"accelerationY",0),setAllowDrag:o(n,"allowDrag",!0),setAllowGravity:o(n,"allowGravity",!0),setAllowRotation:o(n,"allowRotation",!0),setBounceX:o(n,"bounceX",0),setBounceY:o(n,"bounceY",0),setDragX:o(n,"dragX",0),setDragY:o(n,"dragY",0),setEnable:o(n,"enable",!0),setGravityX:o(n,"gravityX",0),setGravityY:o(n,"gravityY",0),setFrictionX:o(n,"frictionX",0),setFrictionY:o(n,"frictionY",0),setMaxVelocityX:o(n,"maxVelocityX",1e4),setMaxVelocityY:o(n,"maxVelocityY",1e4),setVelocityX:o(n,"velocityX",0),setVelocityY:o(n,"velocityY",0),setAngularVelocity:o(n,"angularVelocity",0),setAngularAcceleration:o(n,"angularAcceleration",0),setAngularDrag:o(n,"angularDrag",0),setMass:o(n,"mass",1),setImmovable:o(n,"immovable",!1)},a.call(this,e,i,n),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.DYNAMIC_BODY);var e=t.body;for(var i in this.defaults)e[i](this.defaults[i])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,i){void 0===i&&(i=0);for(var r=this.getChildren(),n=0;n<r.length;n++)r[n].body.velocity.set(t+n*i,e+n*i);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.x=t+r*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.y=t+r*e;return this}});t.exports=c},function(t,e,i){var r=i(157),n=i(0),s=i(62),o=i(2),a=i(113),h=i(7),c=new n({Extends:a,initialize:function(t,e,i,n){i||n?h(i)?(n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler,n.createMultipleCallback=this.createMultipleCallbackHandler,n.classType=o(n,"classType",r)):Array.isArray(i)&&h(i[0])?(n=i,i=null,n.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=o(t,"classType",r)}))):n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=t,this.physicsType=s.STATIC_BODY,a.call(this,e,i,n),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=c},function(t,e,i){var r=i(350),n=i(527),s=i(18),o=i(0),a=i(528),h=i(62),c=i(50),l=i(9),u=i(245),d=i(124),f=i(354),p=i(355),g=i(246),y=i(247),m=i(529),v=i(6),b=i(14),w=i(211),_=i(530),x=i(10),E=i(531),S=i(532),T=i(537),A=i(538),C=i(149),k=i(539),R=i(248),P=i(25),I=i(3),O=i(68),M=new o({Extends:l,initialize:function(t,e){l.call(this),this.scene=t,this.bodies=new C,this.staticBodies=new C,this.pendingDestroy=new C,this.colliders=new w,this.gravity=new I(v(e,"gravity.x",0),v(e,"gravity.y",0)),this.bounds=new x(v(e,"x",0),v(e,"y",0),v(e,"width",t.sys.scale.width),v(e,"height",t.sys.scale.height)),this.checkCollision={up:v(e,"checkCollision.up",!0),down:v(e,"checkCollision.down",!0),left:v(e,"checkCollision.left",!0),right:v(e,"checkCollision.right",!0)},this.fps=v(e,"fps",60),this.fixedStep=v(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=v(e,"timeScale",1),this.OVERLAP_BIAS=v(e,"overlapBias",4),this.TILE_BIAS=v(e,"tileBias",16),this.forceX=v(e,"forceX",!1),this.isPaused=v(e,"isPaused",!1),this._total=0,this.drawDebug=v(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:v(e,"debugShowBody",!0),debugShowStaticBody:v(e,"debugShowStaticBody",!0),debugShowVelocity:v(e,"debugShowVelocity",!0),bodyDebugColor:v(e,"debugBodyColor",16711935),staticBodyDebugColor:v(e,"debugStaticBodyColor",255),velocityDebugColor:v(e,"debugVelocityColor",65280)},this.maxEntries=v(e,"maxEntries",16),this.useTree=v(e,"useTree",!0),this.tree=new E(this.maxEntries),this.staticTree=new E(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new P,this._tempMatrix2=new P,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=h.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];if(r.isParent)for(var n=r.getChildren(),s=0;s<n.length;s++){var o=n[s];o.isParent?this.enable(o,e):this.enableBody(o,e)}else this.enableBody(r,e)}},enableBody:function(t,e){return void 0===e&&(e=h.DYNAMIC_BODY),t.body||(e===h.DYNAMIC_BODY?t.body=new n(this,t):e===h.STATIC_BODY&&(t.body=new k(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===h.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===h.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.isParent)for(var r=i.getChildren(),n=0;n<r.length;n++){var s=r[n];s.isParent?this.disable(s):this.disableBody(s.body)}else this.disableBody(i.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===h.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,i,r,n,s,o,a){return this.bounds.setTo(t,e,i,r),void 0!==n&&this.setBoundsCollision(n,s,o,a),this},setBoundsCollision:function(t,e,i,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=i,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(u.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(u.RESUME),this},addCollider:function(t,e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i);var s=new a(this,!1,t,e,i,r,n);return this.colliders.add(s),s},addOverlap:function(t,e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i);var s=new a(this,!0,t,e,i,r,n);return this.colliders.add(s),s},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var i,r,n=this._frameTime,s=this._frameTimeMS*this.timeScale;this._elapsed+=e;var o=this.bodies.entries,a=this._elapsed>=s;for(this.fixedStep||(n=.001*e,a=!0,this._elapsed=0),i=0;i<o.length;i++)(r=o[i]).enable&&r.preUpdate(a,n);if(a){this._elapsed-=s,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(o));var h=this.colliders.update();for(i=0;i<h.length;i++){var c=h[i];c.active&&c.update()}this.emit(u.WORLD_STEP,n)}for(;this._elapsed>=s;)this._elapsed-=s,this.step(n)}},step:function(t){var e,i,r=this.bodies.entries,n=r.length;for(e=0;e<n;e++)(i=r[e]).enable&&i.update(t);this.useTree&&(this.tree.clear(),this.tree.load(r));var s=this.colliders.update();for(e=0;e<s.length;e++){var o=s[e];o.active&&o.update()}this.emit(u.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,e,i=this.bodies.entries,r=i.length,n=this.bodies,s=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<r;t++)(e=i[t]).enable&&e.postUpdate();if(this.drawDebug){var o=this.debugGraphic;for(o.clear(),t=0;t<r;t++)(e=i[t]).willDrawDebug()&&e.drawDebug(o);for(r=(i=s.entries).length,t=0;t<r;t++)(e=i[t]).willDrawDebug()&&e.drawDebug(o)}var a=this.pendingDestroy;if(a.size>0){var c=this.tree,l=this.staticTree;for(r=(i=a.entries).length,t=0;t<r;t++)(e=i[t]).physicsType===h.DYNAMIC_BODY?(c.remove(e),n.delete(e)):e.physicsType===h.STATIC_BODY&&(l.remove(e),s.delete(e)),e.world=void 0,e.gameObject=void 0;a.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var i=t.angularVelocity,r=t.angularAcceleration,n=t.angularDrag,o=t.maxAngular;r?i+=r*e:t.allowDrag&&n&&(f(i-(n*=e),0,.1)?i-=n:p(i+n,0,.1)?i+=n:i=0);var a=(i=s(i,-o,o))-t.angularVelocity;t.angularVelocity+=a,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var i=t.velocity.x,r=t.acceleration.x,n=t.drag.x,o=t.maxVelocity.x,a=t.velocity.y,h=t.acceleration.y,c=t.drag.y,l=t.maxVelocity.y,u=t.speed,g=t.maxSpeed,y=t.allowDrag,m=t.useDamping;t.allowGravity&&(i+=(this.gravity.x+t.gravity.x)*e,a+=(this.gravity.y+t.gravity.y)*e),r?i+=r*e:y&&n&&(m?(i*=n=Math.pow(n,e),u=Math.sqrt(i*i+a*a),d(u,0,.001)&&(i=0)):f(i-(n*=e),0,.01)?i-=n:p(i+n,0,.01)?i+=n:i=0),h?a+=h*e:y&&c&&(m?(a*=c=Math.pow(c,e),u=Math.sqrt(i*i+a*a),d(u,0,.001)&&(a=0)):f(a-(c*=e),0,.01)?a-=c:p(a+c,0,.01)?a+=c:a=0),i=s(i,-o,o),a=s(a,-l,l),t.velocity.set(i,a),g>-1&&u>g&&(t.velocity.normalize().scale(g),u=g),t.speed=u},separate:function(t,e,i,r,n,s){if(!s&&!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(i&&!1===i.call(r,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,n);if(t.isCircle!==e.isCircle){var o=t.isCircle?e:t,a=t.isCircle?t:e,h={x:o.x,y:o.y,right:o.right,bottom:o.bottom},c=a.center;if((c.y<h.y||c.y>h.bottom)&&(c.x<h.x||c.x>h.right))return this.separateCircle(t,e,n)}var l=!1,d=!1;n?(l=T(t,e,n,this.OVERLAP_BIAS),d=A(t,e,n,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(l=T(t,e,n,this.OVERLAP_BIAS),this.intersects(t,e)&&(d=A(t,e,n,this.OVERLAP_BIAS))):(d=A(t,e,n,this.OVERLAP_BIAS),this.intersects(t,e)&&(l=T(t,e,n,this.OVERLAP_BIAS)));var f=l||d;return f&&(n?(t.onOverlap||e.onOverlap)&&this.emit(u.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(u.COLLIDE,t.gameObject,e.gameObject,t,e)),f},separateCircle:function(t,e,i,n){g(t,e,!1,n),y(t,e,!1,n);var s=0;if(t.isCircle!==e.isCircle){var o={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},a={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth};a.y<o.y?a.x<o.x?s=c(a.x,a.y,o.x,o.y)-a.radius:a.x>o.right&&(s=c(a.x,a.y,o.right,o.y)-a.radius):a.y>o.bottom&&(a.x<o.x?s=c(a.x,a.y,o.x,o.bottom)-a.radius:a.x>o.right&&(s=c(a.x,a.y,o.right,o.bottom)-a.radius)),s*=-1}else s=t.halfWidth+e.halfWidth-c(t.center.x,t.center.y,e.center.x,e.center.y);if(t.overlapR=s,e.overlapR=s,i||0===s||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==s&&(t.onOverlap||e.onOverlap)&&this.emit(u.OVERLAP,t.gameObject,e.gameObject,t,e),0!==s;var h=t.center.x-e.center.x,l=t.center.y-e.center.y,d=Math.sqrt(Math.pow(h,2)+Math.pow(l,2)),f=(e.center.x-t.center.x)/d||0,p=(e.center.y-t.center.y)/d||0,m=2*(t.velocity.x*f+t.velocity.y*p-e.velocity.x*f-e.velocity.y*p)/(t.mass+e.mass);(t.immovable||e.immovable)&&(m*=2),t.immovable||(t.velocity.x=t.velocity.x-m/t.mass*f,t.velocity.y=t.velocity.y-m/t.mass*p),e.immovable||(e.velocity.x=e.velocity.x+m/e.mass*f,e.velocity.y=e.velocity.y+m/e.mass*p),t.immovable||e.immovable||(s/=2);var v=r(t.center,e.center),w=(s+b.EPSILON)*Math.cos(v),_=(s+b.EPSILON)*Math.sin(v);return t.immovable||(t.x-=w,t.y-=_,t.updateCenter()),e.immovable||(e.x+=w,e.y+=_,e.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,(t.onCollide||e.onCollide)&&this.emit(u.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?c(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var i=s(t.center.x,e.left,e.right),r=s(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-r)*(t.center.y-r)<=t.halfWidth*t.halfWidth},overlap:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.collideObjects(t,e,i,r,n,!0)},collide:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.collideObjects(t,e,i,r,n,!1)},collideObjects:function(t,e,i,r,n,s){var o,a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var h=Array.isArray(t),c=Array.isArray(e);if(this._total=0,h||c)if(!h&&c)for(o=0;o<e.length;o++)this.collideHandler(t,e[o],i,r,n,s);else if(h&&!c)if(e)for(o=0;o<t.length;o++)this.collideHandler(t[o],e,i,r,n,s);else for(o=0;o<t.length;o++){var l=t[o];for(a=o+1;a<t.length;a++)o!==a&&this.collideHandler(l,t[a],i,r,n,s)}else for(o=0;o<t.length;o++)for(a=0;a<e.length;a++)this.collideHandler(t[o],e[a],i,r,n,s);else this.collideHandler(t,e,i,r,n,s);return this._total>0},collideHandler:function(t,e,i,r,n,s){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,i,r,n,s);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,i,r,n,s);if(e.isParent)return this.collideSpriteVsGroup(t,e,i,r,n,s);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,i,r,n,s)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,i,r,n,s);if(e.isParent)return this.collideGroupVsGroup(t,e,i,r,n,s);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,i,r,n,s)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,i,r,n,s);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,i,r,n,s)}},collideSpriteVsSprite:function(t,e,i,r,n,s){return!(!t.body||!e.body||(this.separate(t.body,e.body,r,n,s)&&(i&&i.call(n,t,e),this._total++),0))},collideSpriteVsGroup:function(t,e,i,r,n,s){var o,a,c,l=t.body;if(0!==e.length&&l&&l.enable&&!l.checkCollision.none)if(this.useTree||e.physicsType===h.STATIC_BODY){var u=this.treeMinMax;u.minX=l.left,u.minY=l.top,u.maxX=l.right,u.maxY=l.bottom;var d=e.physicsType===h.DYNAMIC_BODY?this.tree.search(u):this.staticTree.search(u);for(a=d.length,o=0;o<a;o++)l!==(c=d[o])&&c.enable&&!c.checkCollision.none&&e.contains(c.gameObject)&&this.separate(l,c,r,n,s,!0)&&(i&&i.call(n,l.gameObject,c.gameObject),this._total++)}else{var f=e.getChildren(),p=e.children.entries.indexOf(t);for(a=f.length,o=0;o<a;o++)(c=f[o].body)&&o!==p&&c.enable&&this.separate(l,c,r,n,s)&&(i&&i.call(n,l.gameObject,c.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,i,r,n,s){var o=t.getChildren();if(0===o.length)return!1;for(var a=!1,h=0;h<o.length;h++)o[h].body&&this.collideSpriteVsTilemapLayer(o[h],e,i,r,n,s)&&(a=!0);return a},collideTiles:function(t,e,i,r,n){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,r,n,!1,!1)},overlapTiles:function(t,e,i,r,n){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,r,n,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,i,r,n,s){var o=t.body;if(!o.enable||o.checkCollision.none)return!1;var a=o.position.x,h=o.position.y,c=o.width,l=o.height,u=e.layer;if(u.tileWidth>u.baseTileWidth){var d=(u.tileWidth-u.baseTileWidth)*e.scaleX;a-=d,c+=d}u.tileHeight>u.baseTileHeight&&(l+=(u.tileHeight-u.baseTileHeight)*e.scaleY);var f=m(a,h,c,l,null,e.scene.cameras.main,e.layer);return 0!==f.length&&this.collideSpriteVsTilesHandler(t,f,i,r,n,s,!0)},collideSpriteVsTilesHandler:function(t,e,i,r,n,s,o){for(var a,h,c=t.body,l={left:0,right:0,top:0,bottom:0},d=!1,f=0;f<e.length;f++){var p=(h=(a=e[f]).tilemapLayer).tileToWorldXY(a.x,a.y);l.left=p.x,l.top=p.y,a.baseHeight!==a.height&&(l.top-=(a.height-a.baseHeight)*h.scaleY),l.right=l.left+a.width*h.scaleX,l.bottom=l.top+a.height*h.scaleY,R(l,c)&&(!r||r.call(n,t,a))&&_(a,t)&&(s||S(f,c,a,l,h,this.TILE_BIAS,o))&&(this._total++,d=!0,i&&i.call(n,t,a),s&&c.onOverlap?this.emit(u.TILE_OVERLAP,t,a,c):c.onCollide&&this.emit(u.TILE_COLLIDE,t,a,c))}return d},collideGroupVsGroup:function(t,e,i,r,n,s){if(0!==t.length&&0!==e.length)for(var o=t.getChildren(),a=0;a<o.length;a++)this.collideSpriteVsGroup(o[a],e,i,r,n,s)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var i=0;i<t.length;i++)this.wrapObject(t[i],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=O(t.x,this.bounds.left-e,this.bounds.right+e),t.y=O(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=M},function(t,e,i){var r=i(0),n=i(62),s=i(245),o=i(196),a=i(10),h=i(57),c=i(3),l=new r({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,r=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=i,this.height=r,this.sourceWidth=i,this.sourceHeight=r,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(r/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new c,this.newVelocity=new c,this.deltaMax=new c,this.acceleration=new c,this.allowDrag=!0,this.drag=new c,this.allowGravity=!0,this.gravity=new c,this.bounce=new c,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new c(1e4,1e4),this.maxSpeed=-1,this.friction=new c(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new a},updateBounds:function(){var t=this.gameObject,e=this.transform;if(t.parentContainer){var i=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);e.x=i.tx,e.y=i.ty,e.rotation=o(i.rotation),e.scaleX=i.scaleX,e.scaleY=i.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY}else e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY;var r=!1;if(this.syncBounds){var n=t.getBounds(this._bounds);this.width=n.width,this.height=n.height,r=!0}else{var s=Math.abs(e.scaleX),a=Math.abs(e.scaleY);this._sx===s&&this._sy===a||(this.width=this.sourceWidth*s,this.height=this.sourceHeight*a,this._sx=s,this._sy=a,r=!0)}r&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var e=this.wasTouching,i=this.touching,r=this.blocked;t?(e.none=!0,e.up=!1,e.down=!1,e.left=!1,e.right=!1):(e.none=i.none,e.up=i.up,e.down=i.down,e.left=i.left,e.right=i.right),i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1,r.none=!0,r.up=!1,r.down=!1,r.left=!1,r.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(e)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var e=this.velocity.x,i=this.velocity.y;this.newVelocity.set(e*t,i*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(i,e),this.speed=Math.sqrt(e*e+i*i),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,e=this.position.y-this.prevFrame.y;if(this.moves){var i=this.deltaMax.x,r=this.deltaMax.y;0!==i&&0!==t&&(t<0&&t<-i?t=-i:t>0&&t>i&&(t=i)),0!==r&&0!==e&&(e<0&&e<-r?e=-r:e>0&&e>r&&(e=r)),this.gameObject.x+=t,this.gameObject.y+=e}t<0?this.facing=n.FACING_LEFT:t>0&&(this.facing=n.FACING_RIGHT),e<0?this.facing=n.FACING_UP:e>0&&(this.facing=n.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=e},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.customBoundsRectangle,i=this.world.checkCollision,r=this.worldBounce?-this.worldBounce.x:-this.bounce.x,n=this.worldBounce?-this.worldBounce.y:-this.bounce.y,s=!1;return t.x<e.x&&i.left?(t.x=e.x,this.velocity.x*=r,this.blocked.left=!0,s=!0):this.right>e.right&&i.right&&(t.x=e.right-this.width,this.velocity.x*=r,this.blocked.right=!0,s=!0),t.y<e.y&&i.up?(t.y=e.y,this.velocity.y*=n,this.blocked.up=!0,s=!0):this.bottom>e.bottom&&i.down&&(t.y=e.bottom-this.height,this.velocity.y*=n,this.blocked.down=!0,s=!0),s&&(this.blocked.none=!1,this.updateCenter()),s},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setSize:function(t,e,i){void 0===i&&(i=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&r.getCenter){var n=(r.width-t)/2,s=(r.height-e)/2;this.offset.set(n,s)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var i=this.gameObject;i.setPosition(t,e),i.getTopLeft?i.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=i.angle,this.preRotation=i.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:h(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(i,r,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(i,r,i+this.velocity.x/2,r+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,i,r){void 0===t&&(t=!0),this.collideWorldBounds=t;var n=void 0!==e,s=void 0!==i;return(n||s)&&(this.worldBounce||(this.worldBounce=new c),n&&(this.worldBounce.x=e),s&&(this.worldBounce.y=i)),void 0!==r&&(this.onWorldBounds=r),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=t,i=this.velocity.y;return this.speed=Math.sqrt(e*e+i*i),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x,i=t;return this.speed=Math.sqrt(e*e+i*i),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,e,i,r){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e);var n=this.blocked;i&&(n.left=!0),r&&(n.right=!0)},processY:function(t,e,i,r){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e);var n=this.blocked;i&&(n.up=!0),r&&(n.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=l},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n,s,o){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=i,this.object2=r,this.collideCallback=n,this.processCallback=s,this.callbackContext=o},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=r},function(t,e,i){var r=i(26),n=i(3),s=new n,o=new n;t.exports=function(t,e,i,n,a,h,c){var l=c.tilemapLayer.tilemap._convert.WorldToTileXY;l(t,e,!0,s,h,c);var u=s.x,d=s.y;l(t+i,e+n,!1,o,h,c);var f=Math.ceil(o.x),p=Math.ceil(o.y);return r(u,d,f-u,p-d,a,c)}},function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},function(t,e,i){var r=i(436);function n(t){if(!(this instanceof n))return new n(t,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function s(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,r,n){n||(n=g(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],h(n,t.leaf?r(s):s);return n}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,i,n,s){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(o=e+Math.ceil((i-e)/n/2)*n,r(t,o,e,i,s),a.push(e,o,o,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!p(t,e))return i;for(var n,s,o,a,h=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],p(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):f(t,a)?this._all(o,i):h.push(o));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!p(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],p(t,o=e.leaf?i(s):s)){if(e.leaf||f(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,o,a=this.data,h=this.toBBox(t),c=[],l=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],i=l.pop(),o=!0),a.leaf&&-1!==(n=s(t,a.children,e)))return a.children.splice(n,1),c.push(a),this._condense(c),this;o||a.leaf||!f(a,h)?r?(i++,a=r.children[i],o=!1):a=null:(c.push(a),l.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,a=this._maxEntries;if(s<=a)return o(n=g(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(n=g([])).leaf=!1,n.height=r;var h,c,l,u,d=Math.ceil(s/a),f=d*Math.ceil(Math.sqrt(a));for(y(t,e,i,f,this.compareMinX),h=e;h<=i;h+=f)for(y(t,h,l=Math.min(h+f-1,i),d,this.compareMinY),c=h;c<=l;c+=d)u=Math.min(c+d-1,l),n.children.push(this._build(t,c,u,r-1));return o(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,h,c,l,d,f,p;r.push(e),!e.leaf&&r.length-1!==i;){for(l=d=1/0,n=0,s=e.children.length;n<s;n++)h=u(o=e.children[n]),f=t,p=o,(c=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-h)<d?(d=c,l=h<l?h:l,a=o):c===d&&h<l&&(l=h,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),h(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),a=g(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,h,c,l,d,f,p,g,y,m,v;for(c=l=1/0,r=e;r<=i-e;r++)f=n=a(t,0,r,this.toBBox),p=s=a(t,r,i,this.toBBox),void 0,void 0,void 0,void 0,g=Math.max(f.minX,p.minX),y=Math.max(f.minY,p.minY),m=Math.min(f.maxX,p.maxX),v=Math.min(f.maxY,p.maxY),o=Math.max(0,m-g)*Math.max(0,v-y),h=u(n)+u(s),o<c?(c=o,d=r,l=h<l?h:l):o===c&&h<l&&(l=h,d=r);return d},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:c,n=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,c=a(t,0,e,o),l=a(t,i-e,i,o),u=d(c)+d(l);for(n=e;n<i-e;n++)s=t.children[n],h(c,t.leaf?o(s):s),u+=d(c);for(n=i-e-1;n>=e;n--)s=t.children[n],h(l,t.leaf?o(s):s),u+=d(l);return u},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)h(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():o(t[i],this.toBBox)},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},t.exports=n},function(t,e,i){var r=i(533),n=i(535),s=i(248);t.exports=function(t,e,i,o,a,h,c){var l=o.left,u=o.top,d=o.right,f=o.bottom,p=i.faceLeft||i.faceRight,g=i.faceTop||i.faceBottom;if(c||(p=!0,g=!0),!p&&!g)return!1;var y=0,m=0,v=0,b=1;if(e.deltaAbsX()>e.deltaAbsY()?v=-1:e.deltaAbsX()<e.deltaAbsY()&&(b=-1),0!==e.deltaX()&&0!==e.deltaY()&&p&&g&&(v=Math.min(Math.abs(e.position.x-d),Math.abs(e.right-l)),b=Math.min(Math.abs(e.position.y-f),Math.abs(e.bottom-u))),v<b){if(p&&0!==(y=r(e,i,l,d,h,c))&&!s(o,e))return!0;g&&(m=n(e,i,u,f,h,c))}else{if(g&&0!==(m=n(e,i,u,f,h,c))&&!s(o,e))return!0;p&&(y=r(e,i,l,d,h,c))}return 0!==y||0!==m}},function(t,e,i){var r=i(534);t.exports=function(t,e,i,n,s,o){var a=0,h=e.faceLeft,c=e.faceRight,l=e.collideLeft,u=e.collideRight;return o||(h=!0,c=!0,l=!0,u=!0),t.deltaX()<0&&u&&t.checkCollision.left?c&&t.x<n&&(a=t.x-n)<-s&&(a=0):t.deltaX()>0&&l&&t.checkCollision.right&&h&&t.right>i&&(a=t.right-i)>s&&(a=0),0!==a&&(t.customSeparateX?t.overlapX=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):e>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,e,i){var r=i(536);t.exports=function(t,e,i,n,s,o){var a=0,h=e.faceTop,c=e.faceBottom,l=e.collideUp,u=e.collideDown;return o||(h=!0,c=!0,l=!0,u=!0),t.deltaY()<0&&u&&t.checkCollision.up?c&&t.y<n&&(a=t.y-n)<-s&&(a=0):t.deltaY()>0&&l&&t.checkCollision.down&&h&&t.bottom>i&&(a=t.bottom-i)>s&&(a=0),0!==a&&(t.customSeparateY?t.overlapY=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):e>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,e,i){var r=i(246),n=i(1389);t.exports=function(t,e,i,s){var o=r(t,e,i,s),a=t.immovable,h=e.immovable;if(i||0===o||a&&h||t.customSeparateX||e.customSeparateX)return 0!==o||t.embedded&&e.embedded;var c=n.Set(t,e,o);return a||h?(a?n.RunImmovableBody1(c):h&&n.RunImmovableBody2(c),!0):c>0||n.Check()}},function(t,e,i){var r=i(247),n=i(1390);t.exports=function(t,e,i,s){var o=r(t,e,i,s),a=t.immovable,h=e.immovable;if(i||0===o||a&&h||t.customSeparateY||e.customSeparateY)return 0!==o||t.embedded&&e.embedded;var c=n.Set(t,e,o);return a||h?(a?n.RunImmovableBody1(c):h&&n.RunImmovableBody2(c),!0):c>0||n.Check()}},function(t,e,i){var r=i(66),n=i(0),s=i(62),o=i(57),a=i(3),h=new n({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,r=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(e.x-i*e.originX,e.y-r*e.originY),this.width=i,this.height=r,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,i){void 0===i&&(i=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),i&&r.getCenter){var n=r.displayWidth/2,s=r.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,s-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var i=this.gameObject;void 0===t&&(t=i.x),void 0===e&&(e=i.y),this.world.staticTree.remove(this),i.setPosition(t,e),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?r(this,t,e):o(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(i,r,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=h},function(t,e,i){var r=new(i(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=r},function(t,e,i){var r=new(i(3));t.exports=function(t,e,i,n){var s=i.tilemapLayer,o=s.cullPaddingX,a=s.cullPaddingY,h=s.tilemap.tileToWorldXY(t,e,r,n,s);return h.x>n.worldView.x+s.scaleX*i.tileWidth*(-o-.5)&&h.x<n.worldView.right+s.scaleX*i.tileWidth*(o-.5)&&h.y>n.worldView.y+s.scaleY*i.tileHeight*(-a-1)&&h.y<n.worldView.bottom+s.scaleY*i.tileHeight*(a-.5)}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a){for(var h=r(i,n,s,o,null,a),c=0;c<h.length;c++)h[c]&&h[c].index===t&&(h[c].index=e)}},function(t,e,i){var r=i(10),n=i(139),s=i(76),o=new r;t.exports=function(t,e){var i=t.tilemapLayer.tilemap,r=t.tilemapLayer,a=Math.floor(i.tileWidth*r.scaleX),h=Math.floor(i.tileHeight*r.scaleY),c=s(e.worldView.x-r.x,a,0,!0)-r.cullPaddingX,l=n(e.worldView.right-r.x,a,0,!0)+r.cullPaddingX,u=s(e.worldView.y-r.y,h,0,!0)-r.cullPaddingY,d=n(e.worldView.bottom-r.y,h,0,!0)+r.cullPaddingY;return o.setTo(c,u,l-c,d-u)}},function(t,e,i){var r=i(543),n=i(159);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var o=t.tilemapLayer,a=r(t,e);return(o.skipCull||1!==o.scrollFactorX||1!==o.scrollFactorY)&&(a.left=0,a.right=t.width,a.top=0,a.bottom=t.height),n(t,a,s,i),i}},function(t,e,i){var r=i(546),n=i(159);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var o=t.tilemapLayer;if(!o.skipCull&&1===o.scrollFactorX&&1===o.scrollFactorY){var a=r(t,e);n(t,a,s,i)}return i}},function(t,e,i){var r=i(139),n=i(76);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,s=t.tilemapLayer,o=Math.floor(i.tileWidth*s.scaleX),a=Math.floor(i.tileHeight*s.scaleY),h=t.hexSideLength,c=(a-h)/2+h;return{left:n(e.worldView.x-s.x,o,0,!0)-s.cullPaddingX,right:r(e.worldView.right-s.x,o,0,!0)+s.cullPaddingX,top:n(e.worldView.y-s.y,c,0,!0)-s.cullPaddingY,bottom:r(e.worldView.bottom-s.y,c,0,!0)+s.cullPaddingY}}},function(t,e,i){var r=i(541);t.exports=function(t,e,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var s,o,a,h=t.tilemapLayer,c=t.data,l=t.width,u=t.height,d=l,f=u;if(!h.skipCull)if(0===n){for(o=0;o<f;o++)for(s=0;c[o]&&s<d;s++)if(r(s,o,t,e)){if(!(a=c[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(1===n){for(o=0;o<f;o++)for(s=d;c[o]&&s>=0;s--)if(r(s,o,t,e)){if(!(a=c[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(2===n){for(o=f;o>=0;o--)for(s=0;c[o]&&s<d;s++)if(r(s,o,t,e)){if(!(a=c[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(3===n)for(o=f;o>=0;o--)for(s=d;c[o]&&s>=0;s--)if(r(s,o,t,e)){if(!(a=c[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}return h.tilesDrawn=i.length,h.tilesTotal=l*u,i}},function(t,e,i){var r=i(549),n=i(159);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var o=t.tilemapLayer;if(!o.skipCull&&1===o.scrollFactorX&&1===o.scrollFactorY){var a=r(t,e);n(t,a,s,i)}return i}},function(t,e,i){var r=i(139),n=i(76);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,s=t.tilemapLayer,o=Math.floor(i.tileWidth*s.scaleX),a=Math.floor(i.tileHeight*s.scaleY);return{left:n(e.worldView.x-s.x,o,0,!0)-s.cullPaddingX,right:r(e.worldView.right-s.x,o,0,!0)+s.cullPaddingX,top:n(e.worldView.y-s.y,a/2,0,!0)-s.cullPaddingY,bottom:r(e.worldView.bottom-s.y,a/2,0,!0)+s.cullPaddingY}}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){i||(i=new r);var o=s.baseTileWidth,a=s.baseTileHeight,h=s.tilemapLayer,c=0,l=0;h&&(n||(n=h.scene.cameras.main),c=h.x+n.scrollX*(1-h.scrollFactorX),o*=h.scaleX,l=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var u=s.hexSideLength,d=c+t*o+e%2*(o/2),f=l+e*((a-u)/2+u);return i.set(d,f)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){i||(i=new r);var o=s.baseTileWidth,a=s.baseTileHeight,h=s.tilemapLayer,c=0,l=0;h&&(n||(n=h.scene.cameras.main),c=h.x+n.scrollX*(1-h.scrollFactorX),o*=h.scaleX,l=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var u=c+o/2*(t-e),d=l+(t+e)*(a/2);return i.set(u,d)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){i||(i=new r);var o=s.baseTileWidth,a=s.baseTileHeight,h=s.tilemapLayer,c=0,l=0;h&&(n||(n=h.scene.cameras.main),c=h.x+n.scrollX*(1-h.scrollFactorX),o*=h.scaleX,l=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var u=c+t*o+e%2*(o/2),d=l+e*(a/2);return i.set(u,d)}},function(t,e,i){var r=i(253),n=i(254),s=i(3);t.exports=function(t,e,i,o,a){return i||(i=new s(0,0)),i.x=r(t,o,a),i.y=n(e,o,a),i}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;n&&(void 0===e&&(e=n.scene.cameras.main),s=n.y+e.scrollY*(1-n.scrollFactorY),r*=n.scaleY);var o=n.tilemap.hexSideLength;return s+t*((r-o)/2+o)}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;return n&&(void 0===e&&(e=n.scene.cameras.main),s=n.y+e.scrollY*(1-n.scrollFactorY),r*=n.scaleY),s+t*(r/2)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o){n||(n=new r);var a=o.baseTileWidth,h=o.baseTileHeight,c=o.tilemapLayer;c&&(s||(s=c.scene.cameras.main),e-=c.y+s.scrollY*(1-c.scrollFactorY),h*=c.scaleY,t-=c.x+s.scrollX*(1-c.scrollFactorX),a*=c.scaleX);var l=o.hexSideLength,u=(h-l)/2+l,d=i?Math.floor(e/u):e/u,f=i?Math.floor((t-d%2*.5*a)/a):(t-d%2*.5*a)/a;return n.set(f,d)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o){n||(n=new r);var a=o.baseTileWidth,h=o.baseTileHeight,c=o.tilemapLayer;c&&(s||(s=c.scene.cameras.main),e-=c.y+s.scrollY*(1-c.scrollFactorY),h*=c.scaleY,t-=c.x+s.scrollX*(1-c.scrollFactorX),a*=c.scaleX);var l=i?Math.floor((t/(a/2)+e/(h/2))/2):(t/(a/2)+e/(h/2))/2,u=i?Math.floor((e/(h/2)-t/(a/2))/2):(e/(h/2)-t/(a/2))/2;return n.set(l,u)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o){n||(n=new r);var a=o.baseTileWidth,h=o.baseTileHeight,c=o.tilemapLayer;c&&(s||(s=c.scene.cameras.main),e-=c.y+s.scrollY*(1-c.scrollFactorY),h*=c.scaleY,t-=c.x+s.scrollX*(1-c.scrollFactorX),a*=c.scaleX);var l=i?Math.floor(e/(h/2)):e/(h/2),u=i?Math.floor((t+l%2*.5*a)/a):(t+l%2*.5*a)/a;return n.set(u,l)}},function(t,e,i){var r=i(255),n=i(256),s=i(3);t.exports=function(t,e,i,o,a,h){return void 0===i&&(i=!0),o||(o=new s(0,0)),o.x=r(t,i,a,h),o.y=n(e,i,a,h),o}},function(t,e){t.exports=function(t,e,i,r){var n=r.baseTileHeight,s=r.tilemapLayer;s&&(i||(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY);var o=r.hexSideLength,a=(n-o)/2+o;return e?Math.floor(t/a):t/a}},function(t,e){t.exports=function(t,e,i,r){var n=r.baseTileHeight,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY),e?Math.floor(t/(n/2)):t/(n/2)}},function(t,e,i){var r=i(119);t.exports=function(t,e,i){if(r(t,e,i)){var n=i.data[e][t];return null!==n&&n.index>-1}return!1}},function(t,e,i){var r=i(85),n=i(119),s=i(252);t.exports=function(t,e,i,o,a){if(void 0===i&&(i=!0),void 0===o&&(o=!0),!n(t,e,a))return null;var h=a.data[e][t];return h?(a.data[e][t]=i?null:new r(a,-1,t,e,a.tileWidth,a.tileHeight),o&&h&&h.collides&&s(t,e,a),h):null}},function(t,e,i){var r=i(40),n=i(259),s=i(565),o=i(566),a=i(577);t.exports=function(t,e,i,h,c,l){var u;switch(e){case r.ARRAY_2D:u=n(t,i,h,c,l);break;case r.CSV:u=s(t,i,h,c,l);break;case r.TILED_JSON:u=o(t,i,l);break;case r.WELTMEISTER:u=a(t,i,l);break;default:console.warn("Unrecognized tilemap data format: "+e),u=null}return u}},function(t,e,i){var r=i(40),n=i(259);t.exports=function(t,e,i,s,o){var a=e.trim().split("\n").map((function(t){return t.split(",")})),h=n(t,a,i,s,o);return h.format=r.CSV,h}},function(t,e,i){var r=i(567),n=i(568),s=i(29),o=i(40),a=i(258),h=i(121),c=i(569),l=i(570),u=i(573),d=i(575);t.exports=function(t,e,i){var f=new h({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:a(e.orientation),format:o.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite});f.orientation===s.HEXAGONAL&&(f.hexSideLength=e.hexsidelength),f.layers=u(e,i),f.images=c(e);var p=d(e);return f.tilesets=p.tilesets,f.imageCollections=p.imageCollections,f.objects=l(e),f.tiles=n(f),r(f),f}},function(t,e,i){var r=i(17);t.exports=function(t){for(var e,i,n,s,o,a=0;a<t.layers.length;a++){e=t.layers[a],s=null;for(var h=0;h<e.data.length;h++){o=e.data[h];for(var c=0;c<o.length;c++)null===(i=o[c])||i.index<0||(n=t.tiles[i.index][2],s=t.tilesets[n],i.width=s.tileWidth,i.height=s.tileHeight,s.tileProperties&&s.tileProperties[i.index-s.firstgid]&&(i.properties=r(i.properties,s.tileProperties[i.index-s.firstgid])))}}}},function(t,e,i){var r=i(122);t.exports=function(t){var e,i,n=[];for(e=0;e<t.imageCollections.length;e++)for(var s=t.imageCollections[e],o=s.images,a=0;a<o.length;a++){var h=o[a];(i=new r(h.image,h.gid,s.imageWidth,s.imageHeight,0,0)).updateTileData(s.imageWidth,s.imageHeight),t.tilesets.push(i)}for(e=0;e<t.tilesets.length;e++)for(var c=(i=t.tilesets[e]).tileMargin,l=i.tileMargin,u=0,d=0,f=0,p=i.firstgid;p<i.firstgid+i.total&&(n[p]=[c,l,e],c+=i.tileWidth+i.tileSpacing,++u!==i.total)&&(++d!==i.columns||(c=i.tileMargin,l+=i.tileHeight+i.tileSpacing,d=0,++f!==i.rows));p++);return n}},function(t,e,i){var r=i(2),n=i(161);t.exports=function(t){for(var e=[],i=[],s=n(t);s.i<s.layers.length||i.length>0;)if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop()}else{var o=s.layers[s.i];if(s.i++,"imagelayer"===o.type){var a=r(o,"offsetx",0)+r(o,"startx",0),h=r(o,"offsety",0)+r(o,"starty",0);e.push({name:s.name+o.name,image:o.image,x:s.x+a+o.x,y:s.y+h+o.y,alpha:s.opacity*o.opacity,visible:s.visible&&o.visible,properties:r(o,"properties",{})})}else if("group"===o.type){var c=n(t,o,s);i.push(s),s=c}}return e}},function(t,e,i){var r=i(2),n=i(260),s=i(572),o=i(161);t.exports=function(t){for(var e=[],i=[],a=o(t);a.i<a.layers.length||i.length>0;)if(a.i>=a.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=i.pop()}else{var h=a.layers[a.i];if(a.i++,h.opacity*=a.opacity,h.visible=a.visible&&h.visible,"objectgroup"===h.type){h.name=a.name+h.name;for(var c=a.x+r(h,"startx",0)+r(h,"offsetx",0),l=a.y+r(h,"starty",0)+r(h,"offsety",0),u=[],d=0;d<h.objects.length;d++){var f=n(h.objects[d],c,l);u.push(f)}var p=new s(h);p.objects=u,e.push(p)}else if("group"===h.type){var g=o(t,h,a);i.push(a),a=g}}return e}},function(t,e,i){var r=i(126);t.exports=function(t,e){for(var i={},n=0;n<e.length;n++){var s=e[n];r(t,s)&&(i[s]=t[s])}return i}},function(t,e,i){var r=i(0),n=i(2),s=new r({initialize:function(t){void 0===t&&(t={}),this.name=n(t,"name","object layer"),this.opacity=n(t,"opacity",1),this.properties=n(t,"properties",{}),this.propertyTypes=n(t,"propertytypes",{}),this.type=n(t,"type","objectgroup"),this.visible=n(t,"visible",!0),this.objects=n(t,"objects",[])}});t.exports=s},function(t,e,i){var r=i(574),n=i(29),s=i(161),o=i(258),a=i(2),h=i(120),c=i(261),l=i(85);t.exports=function(t,e){for(var i=a(t,"infinite",!1),u=[],d=[],f=s(t);f.i<f.layers.length||d.length>0;)if(f.i>=f.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=d.pop()}else{var p=f.layers[f.i];if(f.i++,"tilelayer"===p.type)if(p.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+p.name+"'");else{if(p.encoding&&"base64"===p.encoding){if(p.chunks)for(var g=0;g<p.chunks.length;g++)p.chunks[g].data=r(p.chunks[g].data);p.data&&(p.data=r(p.data)),delete p.encoding}var y,m,v,b,w=[],_=0;if(i){var x=a(p,"startx",0)+p.x,E=a(p,"starty",0)+p.y;(y=new h({name:f.name+p.name,x:f.x+a(p,"offsetx",0)+x*t.tilewidth,y:f.y+a(p,"offsety",0)+E*t.tileheight,width:p.width,height:p.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:a(p,"properties",[]),orientation:o(t.orientation)})).orientation===n.HEXAGONAL&&(y.hexSideLength=t.hexsidelength);for(var S=0;S<p.height;S++){w.push([null]);for(var T=0;T<p.width;T++)w[S][T]=null}for(S=0,L=p.chunks.length;S<L;S++)for(var A=p.chunks[S],C=A.x-x,k=A.y-E,R=0,P=0,I=A.data.length;P<I;P++){var O=_+C,M=R+k;(m=c(A.data[P])).gid>0?((v=new l(y,m.gid,O,M,t.tilewidth,t.tileheight)).rotation=m.rotation,v.flipX=m.flipped,w[M][O]=v):(b=e?null:new l(y,-1,O,M,t.tilewidth,t.tileheight),w[M][O]=b),++_===A.width&&(R++,_=0)}}else{(y=new h({name:f.name+p.name,x:f.x+a(p,"offsetx",0)+p.x,y:f.y+a(p,"offsety",0)+p.y,width:p.width,height:p.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:a(p,"properties",[]),orientation:o(t.orientation)})).orientation===n.HEXAGONAL&&(y.hexSideLength=t.hexsidelength);for(var D=[],B=0,L=p.data.length;B<L;B++)(m=c(p.data[B])).gid>0?((v=new l(y,m.gid,_,w.length,t.tilewidth,t.tileheight)).rotation=m.rotation,v.flipX=m.flipped,D.push(v)):(b=e?null:new l(y,-1,_,w.length,t.tilewidth,t.tileheight),D.push(b)),++_===p.width&&(w.push(D),_=0,D=[])}y.data=w,u.push(y)}else if("group"===p.type){var N=s(t,p,f);d.push(f),f=N}}return u}},function(t,e){t.exports=function(t){for(var e=window.atob(t),i=e.length,r=new Array(i/4),n=0;n<i;n+=4)r[n/4]=(e.charCodeAt(n)|e.charCodeAt(n+1)<<8|e.charCodeAt(n+2)<<16|e.charCodeAt(n+3)<<24)>>>0;return r}},function(t,e,i){var r=i(122),n=i(576),s=i(260),o=i(1453);t.exports=function(t){for(var e,i=[],a=[],h=null,c=0;c<t.tilesets.length;c++){var l=t.tilesets[c];if(l.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(l.image){var u=new r(l.name,l.firstgid,l.tilewidth,l.tileheight,l.margin,l.spacing);if(t.version>1){var d=void 0,f=void 0;if(Array.isArray(l.tiles)){d=d||{},f=f||{};for(var p=0;p<l.tiles.length;p++){var g=l.tiles[p];if(g.properties){var y={};g.properties.forEach((function(t){y[t.name]=t.value})),f[g.id]=y}if(g.objectgroup&&((d[g.id]||(d[g.id]={})).objectgroup=g.objectgroup,g.objectgroup.objects)){var m=g.objectgroup.objects.map((function(t){return s(t)}));d[g.id].objectgroup.objects=m}g.animation&&((d[g.id]||(d[g.id]={})).animation=g.animation),g.type&&((d[g.id]||(d[g.id]={})).type=g.type)}}Array.isArray(l.wangsets)&&(d=d||{},f=f||{},o(l.wangsets,d)),d&&(u.tileData=d,u.tileProperties=f)}else if(l.tileproperties&&(u.tileProperties=l.tileproperties),l.tiles)for(e in u.tileData=l.tiles,u.tileData){var v=u.tileData[e].objectgroup;if(v&&v.objects){var b=v.objects.map((function(t){return s(t)}));u.tileData[e].objectgroup.objects=b}}u.updateTileData(l.imagewidth,l.imageheight),i.push(u)}else{var w=new n(l.name,l.firstgid,l.tilewidth,l.tileheight,l.margin,l.spacing,l.properties),_=0;for(p=0;p<l.tiles.length;p++){var x=(g=l.tiles[p]).image,E=parseInt(g.id,10),S=l.firstgid+E;w.addImage(S,x),_=Math.max(E,_)}w.maxId=_,a.push(w)}h&&(h.lastgid=l.firstgid-1),h=l}return{tilesets:i,imageCollections:a}}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n,s,o){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===s&&(s=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|i,this.imageHeight=0|r,this.imageMargin=0|n,this.imageSpacing=0|s,this.properties=o||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=r},function(t,e,i){var r=i(40),n=i(121),s=i(578),o=i(579);t.exports=function(t,e,i){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var a=0,h=0,c=0;c<e.layer.length;c++)e.layer[c].width>a&&(a=e.layer[c].width),e.layer[c].height>h&&(h=e.layer[c].height);var l=new n({width:a,height:h,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:r.WELTMEISTER});return l.layers=s(e,i),l.tilesets=o(e),l}},function(t,e,i){var r=i(120),n=i(85);t.exports=function(t,e){for(var i=[],s=0;s<t.layer.length;s++){for(var o=t.layer[s],a=new r({name:o.name,width:o.width,height:o.height,tileWidth:o.tilesize,tileHeight:o.tilesize,visible:1===o.visible}),h=[],c=[],l=0;l<o.data.length;l++){for(var u=0;u<o.data[l].length;u++){var d,f=o.data[l][u]-1;d=f>-1?new n(a,f,u,l,o.tilesize,o.tilesize):e?null:new n(a,-1,u,l,o.tilesize,o.tilesize),h.push(d)}c.push(h),h=[]}a.data=c,i.push(a)}return i}},function(t,e,i){var r=i(122);t.exports=function(t){for(var e=[],i=[],n=0;n<t.layer.length;n++){var s=t.layer[n],o=s.tilesetName;""!==o&&-1===i.indexOf(o)&&(i.push(o),e.push(new r(o,0,s.tilesize,s.tilesize,0,0)))}return e}},function(t,e,i){var r=i(0),n=i(36),s=i(40),o=i(2),a=i(120),h=i(29),c=i(362),l=i(74),u=i(73),d=i(85),f=i(251),p=i(581),g=i(122),y=new r({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0,this.hexSideLength=e.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(i),WorldToTileX:f.GetWorldToTileXFunction(i),WorldToTileY:f.GetWorldToTileYFunction(i),TileToWorldXY:f.GetTileToWorldXYFunction(i),TileToWorldX:f.GetTileToWorldXFunction(i),TileToWorldY:f.GetTileToWorldYFunction(i)}},createBlankDynamicLayer:function(t,e,i,r,n,s,o,a){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,e,i,r,n,s,o,a)},createDynamicLayer:function(t,e,i,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,e,i,r)},createStaticLayer:function(t,e,i,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,e,i,r)},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),e.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,e,i,r,n,o,a){if(void 0===t)return null;if(null==e&&(e=t),!this.scene.sys.textures.exists(e))return console.warn("Invalid Tileset Image: "+e),null;var h=this.scene.sys.textures.get(e),c=this.getTilesetIndex(t);if(null===c&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var l=this.tilesets[c];return l?(l.setTileSize(i,r),l.setSpacing(n,o),l.setImage(h),l):(void 0===i&&(i=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),(l=new g(t,a,i,r,n,o)).setImage(h),this.tilesets.push(l),l)},copy:function(t,e,i,r,n,s,o,a){return null!==(a=this.getLayer(a))?(f.Copy(t,e,i,r,n,s,o,a),this):null},createBlankLayer:function(t,e,i,r,n,s,o,h){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.width),void 0===s&&(s=this.height),void 0===o&&(o=this.tileWidth),void 0===h&&(h=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var c,l=new a({name:t,tileWidth:o,tileHeight:h,width:n,height:s,orientation:this.orientation}),u=0;u<s;u++){c=[];for(var f=0;f<n;f++)c.push(new d(l,-1,f,u,o,h,this.tileWidth,this.tileHeight));l.data.push(c)}this.layers.push(l),this.currentLayerIndex=this.layers.length-1;var g=new p(this.scene,this,this.currentLayerIndex,e,i,r);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createLayer:function(t,e,i,r){var n=this.getLayerIndex(t);if(null===n)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var s=this.layers[n];if(s.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=n,void 0===i&&(i=s.x),void 0===r&&(r=s.y);var o=new p(this.scene,this,n,e,i,r);return o.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(o),o},createFromObjects:function(t,e){var i=[],r=this.getObjectLayer(t);if(!r)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),i;Array.isArray(e)||(e=[e]);for(var s=r.objects,a=0;a<e.length;a++){for(var h,l=e[a],d=o(l,"id",null),f=o(l,"gid",null),p=o(l,"name",null),g=[],y=0;y<s.length;y++)h=s[y],(null===d&&null===f&&null===p||null!==d&&h.id===d||null!==f&&h.gid===f||null!==p&&h.name===p)&&g.push(h);for(var m=o(l,"classType",u),v=o(l,"scene",this.scene),b=o(l,"container",null),w=o(l,"key",null),_=o(l,"frame",null),x=0;x<g.length;x++){h=g[x];var E=new m(v);E.setName(h.name),E.setPosition(h.x,h.y),E.setTexture(w,_),h.width&&(E.displayWidth=h.width),h.height&&(E.displayHeight=h.height);var S={x:E.originX*h.width,y:(E.originY-1)*h.height};if(h.rotation){var T=n(h.rotation);c(S,T),E.rotation=T}if(E.x+=S.x,E.y+=S.y,void 0===h.flippedHorizontal&&void 0===h.flippedVertical||E.setFlip(h.flippedHorizontal,h.flippedVertical),h.visible||(E.visible=!1),Array.isArray(h.properties))h.properties.forEach((function(t){var e=t.name;void 0!==E[e]?E[e]=t.value:E.setData(e,t.value)}));else for(var A in h.properties)void 0!==E[A]?E[A]=h.properties[A]:E.setData(A,h.properties[A]);b?b.add(E):v.add.existing(E),i.push(E)}}return i},createFromTiles:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:f.CreateFromTiles(t,e,i,r,n,s)},fill:function(t,e,i,r,n,s,o){return void 0===s&&(s=!0),null===(o=this.getLayer(o))?null:(f.Fill(t,e,i,r,n,s,o),this)},filterObjects:function(t,e,i){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.filter(e,i)},filterTiles:function(t,e,i,r,n,s,o,a){return null===(a=this.getLayer(a))?null:f.FilterTiles(t,e,i,r,n,s,o,a)},findByIndex:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.FindByIndex(t,e,i,r)},findObject:function(t,e,i){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.find(e,i)||null},findTile:function(t,e,i,r,n,s,o,a){return null===(a=this.getLayer(a))?null:f.FindTile(t,e,i,r,n,s,o,a)},forEachTile:function(t,e,i,r,n,s,o,a){return null===(a=this.getLayer(a))?null:(f.ForEachTile(t,e,i,r,n,s,o,a),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof p?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.GetTileAt(t,e,i,r)},getTileAtWorldXY:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:f.GetTileAtWorldXY(t,e,i,r,n)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:f.GetTilesWithin(t,e,i,r,n,s)},getTilesWithinShape:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.GetTilesWithinShape(t,e,i,r)},getTilesWithinWorldXY:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:f.GetTilesWithinWorldXY(t,e,i,r,n,s,o)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,i){return null===(i=this.getLayer(i))?null:f.HasTileAt(t,e,i)},hasTileAtWorldXY:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.HasTileAtWorldXY(t,e,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,i,r,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.PutTileAt(t,e,i,r,n)},putTileAtWorldXY:function(t,e,i,r,n,s){return void 0===r&&(r=!0),null===(s=this.getLayer(s))?null:f.PutTileAtWorldXY(t,e,i,r,n,s)},putTilesAt:function(t,e,i,r,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:(f.PutTilesAt(t,e,i,r,n),this)},randomize:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:(f.Randomize(t,e,i,r,n,s),this)},calculateFacesAt:function(t,e,i){return null===(i=this.getLayer(i))?null:(f.CalculateFacesAt(t,e,i),this)},calculateFacesWithin:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:(f.CalculateFacesWithin(t,e,i,r,n),this)},removeLayer:function(t){var e=this.getLayerIndex(t);if(null!==e){l(this.layers,e);for(var i=e;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===e&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).destroy(),l(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!0);var r=[];Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var s=t[n];r.push(this.removeTileAt(s.x,s.y,!0,i,s.tilemapLayer)),e>-1&&this.putTileAt(e,s.x,s.y,i,s.tilemapLayer)}return r},removeTileAt:function(t,e,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.RemoveTileAt(t,e,i,r,n)},removeTileAtWorldXY:function(t,e,i,r,n,s){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(s=this.getLayer(s))?null:f.RemoveTileAtWorldXY(t,e,i,r,n,s)},renderDebug:function(t,e,i){return null===(i=this.getLayer(i))?null:(this.orientation===h.ORTHOGONAL&&f.RenderDebug(t,e,i),this)},renderDebugFull:function(t,e){for(var i=this.layers,r=0;r<i.length;r++)f.RenderDebug(t,e,i[r]);return this},replaceByIndex:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:(f.ReplaceByIndex(t,e,i,r,n,s,o),this)},setCollision:function(t,e,i,r,n){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(f.SetCollision(t,e,i,r,n),this)},setCollisionBetween:function(t,e,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:(f.SetCollisionBetween(t,e,i,r,n),this)},setCollisionByProperty:function(t,e,i,r){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByProperty(t,e,i,r),this)},setCollisionByExclusion:function(t,e,i,r){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByExclusion(t,e,i,r),this)},setCollisionFromCollisionGroup:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),null===(i=this.getLayer(i))?null:(f.SetCollisionFromCollisionGroup(t,e,i),this)},setTileIndexCallback:function(t,e,i,r){return null===(r=this.getLayer(r))?null:(f.SetTileIndexCallback(t,e,i,r),this)},setTileLocationCallback:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:(f.SetTileLocationCallback(t,e,i,r,n,s,o),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=t,this.layers[i].baseTileHeight=e;for(var r=this.layers[i].data,n=this.layers[i].width,s=this.layers[i].height,o=0;o<s;o++)for(var a=0;a<n;a++){var h=r[o][a];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=t,i.tileHeight=e;for(var r=i.data,n=i.width,s=i.height,o=0;o<s;o++)for(var a=0;a<n;a++){var h=r[o][a];null!==h&&h.setSize(t,e)}return this},shuffle:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:(f.Shuffle(t,e,i,r,n),this)},swapByIndex:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:(f.SwapByIndex(t,e,i,r,n,s,o),this)},tileToWorldX:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(t,e,i)},tileToWorldY:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(t,e,i)},tileToWorldXY:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldXY(t,e,i,r,n)},weightedRandomize:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:(f.WeightedRandomize(e,i,r,n,t,s),this)},worldToTileX:function(t,e,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(t,e,i,r)},worldToTileY:function(t,e,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(t,e,i,r)},worldToTileXY:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:this._convert.WorldToTileXY(t,e,i,r,n,s)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=y},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(251),a=i(1456),h=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,a],initialize:function(t,e,i,r,n,a){s.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=i,this.layer=e.layers[i],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(n,a),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(t){var e=[],i=[],r=this.tilemap;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var s=t[n];if("string"==typeof s&&(s=r.getTileset(s)),s){i.push(s);for(var o=s.firstgid,a=0;a<s.total;a++)e[o+a]=s}}this.gidMap=e,this.tileset=i},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return o.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,i,r){return o.CalculateFacesWithin(t,e,i,r,this.layer),this},createFromTiles:function(t,e,i,r,n){return o.CreateFromTiles(t,e,i,r,n,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,i,r,n,s,a){return o.Copy(t,e,i,r,n,s,a,this.layer),this},fill:function(t,e,i,r,n,s){return o.Fill(t,e,i,r,n,s,this.layer),this},filterTiles:function(t,e,i,r,n,s,a){return o.FilterTiles(t,e,i,r,n,s,a,this.layer)},findByIndex:function(t,e,i){return o.FindByIndex(t,e,i,this.layer)},findTile:function(t,e,i,r,n,s,a){return o.FindTile(t,e,i,r,n,s,a,this.layer)},forEachTile:function(t,e,i,r,n,s,a){return o.ForEachTile(t,e,i,r,n,s,a,this.layer),this},getTileAt:function(t,e,i){return o.GetTileAt(t,e,i,this.layer)},getTileAtWorldXY:function(t,e,i,r){return o.GetTileAtWorldXY(t,e,i,r,this.layer)},getTilesWithin:function(t,e,i,r,n){return o.GetTilesWithin(t,e,i,r,n,this.layer)},getTilesWithinShape:function(t,e,i){return o.GetTilesWithinShape(t,e,i,this.layer)},getTilesWithinWorldXY:function(t,e,i,r,n,s){return o.GetTilesWithinWorldXY(t,e,i,r,n,s,this.layer)},hasTileAt:function(t,e){return o.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,i){return o.HasTileAtWorldXY(t,e,i,this.layer)},putTileAt:function(t,e,i,r){return o.PutTileAt(t,e,i,r,this.layer)},putTileAtWorldXY:function(t,e,i,r,n){return o.PutTileAtWorldXY(t,e,i,r,n,this.layer)},putTilesAt:function(t,e,i,r){return o.PutTilesAt(t,e,i,r,this.layer),this},randomize:function(t,e,i,r,n){return o.Randomize(t,e,i,r,n,this.layer),this},removeTileAt:function(t,e,i,r){return o.RemoveTileAt(t,e,i,r,this.layer)},removeTileAtWorldXY:function(t,e,i,r,n){return o.RemoveTileAtWorldXY(t,e,i,r,n,this.layer)},renderDebug:function(t,e){return o.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,i,r,n,s){return o.ReplaceByIndex(t,e,i,r,n,s,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,i,r){return o.SetCollision(t,e,i,this.layer,r),this},setCollisionBetween:function(t,e,i,r){return o.SetCollisionBetween(t,e,i,r,this.layer),this},setCollisionByProperty:function(t,e,i){return o.SetCollisionByProperty(t,e,i,this.layer),this},setCollisionByExclusion:function(t,e,i){return o.SetCollisionByExclusion(t,e,i,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return o.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,i){return o.SetTileIndexCallback(t,e,i,this.layer),this},setTileLocationCallback:function(t,e,i,r,n,s){return o.SetTileLocationCallback(t,e,i,r,n,s,this.layer),this},shuffle:function(t,e,i,r){return o.Shuffle(t,e,i,r,this.layer),this},swapByIndex:function(t,e,i,r,n,s){return o.SwapByIndex(t,e,i,r,n,s,this.layer),this},tileToWorldX:function(t,e){return this.tilemap.tileToWorldX(t,e,this)},tileToWorldY:function(t,e){return this.tilemap.tileToWorldY(t,e,this)},tileToWorldXY:function(t,e,i,r){return this.tilemap.tileToWorldXY(t,e,i,r,this)},weightedRandomize:function(t,e,i,r,n){return o.WeightedRandomize(e,i,r,n,t,this.layer),this},worldToTileX:function(t,e,i){return this.tilemap.worldToTileX(t,e,i,this)},worldToTileY:function(t,e,i){return this.tilemap.worldToTileY(t,e,i,this)},worldToTileXY:function(t,e,i,r,n){return this.tilemap.worldToTileXY(t,e,i,r,n,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});t.exports=h},function(t,e,i){var r=i(0),n=i(2),s=new r({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=n(t,"delay",0),this.repeat=n(t,"repeat",0),this.loop=n(t,"loop",!1),this.callback=n(t,"callback",void 0),this.callbackScope=n(t,"callbackScope",this.callback),this.args=n(t,"args",[]),this.timeScale=n(t,"timeScale",1),this.startAt=n(t,"startAt",0),this.paused=n(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=s},function(t,e,i){var r=i(1465);t.exports=function(t){var e,i=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&i.push({key:e,value:t.props[e]});else for(e in t)-1===r.indexOf(e)&&"_"!==e.substr(0,1)&&i.push({key:e,value:t[e]});return i}},function(t,e,i){var r=i(6);t.exports=function(t){var e=r(t,"tweens",null);return null===e?[]:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,i){var r=i(265),n=i(13),s=i(99),o=i(80),a=i(162),h=i(6),c=i(264),l=i(266),u=i(268);t.exports=function(t,e,i){void 0===i&&(i=r);var d=h(e,"from",0),f=h(e,"to",1),p=[{value:d}],g=a(e,"delay",i.delay),y=a(e,"duration",i.duration),m=h(e,"easeParams",i.easeParams),v=o(h(e,"ease",i.ease),m),b=a(e,"hold",i.hold),w=a(e,"repeat",i.repeat),_=a(e,"repeatDelay",i.repeatDelay),x=s(e,"yoyo",i.yoyo),E=[],S=c("value",f),T=u(p[0],0,"value",S.getEnd,S.getStart,S.getActive,v,g,y,x,b,w,_,!1,!1);T.start=d,T.current=d,T.to=f,E.push(T);var A=new l(t,E,p);A.offset=n(e,"offset",null),A.completeDelay=n(e,"completeDelay",0),A.loop=Math.round(n(e,"loop",0)),A.loopDelay=Math.round(n(e,"loopDelay",0)),A.paused=s(e,"paused",!1),A.useFrames=s(e,"useFrames",!1);for(var C=h(e,"callbackScope",A),k=[A,null],R=l.TYPES,P=0;P<R.length;P++){var I=R[P],O=h(e,I,!1);if(O){var M=h(e,I+"Scope",C),D=h(e,I+"Params",[]);A.setCallback(I,O,k.concat(D),M)}}return A}},function(t,e,i){var r=i(80),n=i(6),s=i(14);t.exports=function(t,e){var i;void 0===e&&(e={});var o=n(e,"start",0),a=n(e,"ease",null),h=n(e,"grid",null),c=n(e,"from",0),l="first"===c,u="center"===c,d="last"===c,f="number"==typeof c,p=Array.isArray(t),g=p?parseFloat(t[0]):parseFloat(t),y=p?parseFloat(t[1]):0,m=Math.max(g,y);if(p&&(o+=g),h){var v=h[0],b=h[1],w=0,_=0,x=0,E=0,S=[];d?(w=v-1,_=b-1):f?(w=c%v,_=Math.floor(c/v)):u&&(w=(v-1)/2,_=(b-1)/2);for(var T=s.MIN_SAFE_INTEGER,A=0;A<b;A++){S[A]=[];for(var C=0;C<v;C++){x=w-C,E=_-A;var k=Math.sqrt(x*x+E*E);k>T&&(T=k),S[A][C]=k}}}var R=a?r(a):null;return i=h?function(t,e,i,r){var n,s=0,a=r%v,h=Math.floor(r/v);if(a>=0&&a<v&&h>=0&&h<b&&(s=S[h][a]),p){var c=y-g;n=R?s/T*c*R(s/T):s/T*c}else n=R?s*g*R(s/T):s*g;return n+o}:function(t,e,i,r,n){var s,a,h;return n--,l?s=r:u?s=Math.abs(n/2-r):d?s=n-r:f&&(s=Math.abs(c-r)),p?(h=u?(y-g)/n*(2*s):(y-g)/n*s,a=R?h*R(s/n):h):a=R?n*m*R(s/n):s*g,a+o},i}},function(t,e,i){var r=i(77),n=i(265),s=i(13),o=i(99),a=i(80),h=i(162),c=i(263),l=i(584),u=i(6),d=i(588),f=i(163);t.exports=function(t,e){var i=new d(t);i.completeDelay=s(e,"completeDelay",0),i.loop=Math.round(s(e,"loop",0)),i.loopDelay=Math.round(s(e,"loopDelay",0)),i.paused=o(e,"paused",!1),i.useFrames=o(e,"useFrames",!1);var p=u(e,"callbackScope",i),g=[i],y=u(e,"onStart",!1);if(y){var m=u(e,"onStartScope",p),v=u(e,"onStartParams",[]);i.setCallback("onStart",y,g.concat(v),m)}var b=u(e,"onUpdate",!1);if(b){var w=u(e,"onUpdateScope",p),_=u(e,"onUpdateParams",[]);i.setCallback("onUpdate",b,g.concat(_),w)}var x=u(e,"onLoop",!1);if(x){var E=u(e,"onLoopScope",p),S=u(e,"onLoopParams",[]);i.setCallback("onLoop",x,g.concat(S),E)}var T=u(e,"onYoyo",!1);if(T){var A=u(e,"onYoyoScope",p),C=u(e,"onYoyoParams",[]);i.setCallback("onYoyo",T,g.concat(null,C),A)}var k=u(e,"onComplete",!1);if(k){var R=u(e,"onCompleteScope",p),P=u(e,"onCompleteParams",[]);i.setCallback("onComplete",k,g.concat(P),R)}var I=l(e);if(0===I.length)return i.paused=!0,i;var O=r(n);O.targets=c(e);var M=s(e,"totalDuration",0);O.duration=M>0?Math.floor(M/I.length):h(e,"duration",O.duration),O.delay=h(e,"delay",O.delay),O.easeParams=u(e,"easeParams",O.easeParams),O.ease=a(u(e,"ease",O.ease),O.easeParams),O.hold=h(e,"hold",O.hold),O.repeat=h(e,"repeat",O.repeat),O.repeatDelay=h(e,"repeatDelay",O.repeatDelay),O.yoyo=o(e,"yoyo",O.yoyo),O.flipX=o(e,"flipX",O.flipX),O.flipY=o(e,"flipY",O.flipY);for(var D=0;D<I.length;D++)i.queue(f(i,I[D],O));return i}},function(t,e,i){var r=i(0),n=i(9),s=i(267),o=i(163),a=i(100),h=new r({Extends:n,initialize:function(t){n.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,e){this.emit(t,this),e&&e.func.apply(e.scope,e.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(t){return this.queue(o(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var i=t[0],r=parseFloat(t.substr(2)),n=e;switch(i){case"+":n+=r;break;case"-":n-=r}return Math.max(0,n)},calcDuration:function(){for(var t=0,e=0,i=0,r=0;r<this.totalData;r++){var n=this.data[r];n.init(),this.hasOffset(n)?this.isOffsetAbsolute(n.offset)?(n.calculatedOffset=n.offset,0===n.offset&&(i=0)):this.isOffsetRelative(n.offset)&&(n.calculatedOffset=this.getRelativeOffset(n.offset,t)):n.calculatedOffset=i,t=n.totalDuration+n.calculatedOffset,e+=n.totalDuration,i+=n.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=a.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++)this.data[e].play(t)},setCallback:function(t,e,i,r){return-1!==h.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:r,params:i}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==a.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,e){if(this.state!==a.PAUSED){switch(this.useFrames&&(e=1*this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var i=this.totalData,r=0;r<this.totalData;r++)this.data[r].update(t,e)&&i--;this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case a.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});h.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=h},function(t,e,i){var r=i(86),n=i(41),s=i(32),o=i(2),a=i(64),h={parseBody:function(t,e,i,r){void 0===r&&(r={});for(var a=o(i,"fixtures",[]),h=[],c=0;c<a.length;c++)for(var l=this.parseFixture(a[c]),u=0;u<l.length;u++)h.push(l[u]);var d=s.clone(i,!0);s.extend(d,r,!0),delete d.fixtures,delete d.type;var f=n.create(d);return n.setParts(f,h),n.setPosition(f,{x:t,y:e}),f},parseFixture:function(t){var e,i=s.extend({},!1,t);if(delete i.circle,delete i.vertices,t.circle){var n=o(t.circle,"x"),a=o(t.circle,"y"),h=o(t.circle,"radius");e=[r.circle(n,a,h,i)]}else t.vertices&&(e=this.parseVertices(t.vertices,i));return e},parseVertices:function(t,e){void 0===e&&(e={});for(var i=[],o=0;o<t.length;o++)a.clockwiseSort(t[o]),i.push(n.create(s.extend({position:a.centre(t[o]),vertices:t[o]},e)));return r.flagCoincidentParts(i)}};t.exports=h},function(t,e,i){var r=i(86),n=i(41),s={parseBody:function(t,e,i,s){var o;void 0===s&&(s={});var a=i.vertices;if(1===a.length)s.vertices=a[0],o=n.create(s),r.flagCoincidentParts(o.parts);else{for(var h=[],c=0;c<a.length;c++){var l=n.create({vertices:a[c]});h.push(l)}r.flagCoincidentParts(h),s.parts=h,o=n.create(s)}return o.label=i.label,n.setPosition(o,{x:t,y:e}),o}};t.exports=s},function(t,e,i){var r={};t.exports=r;var n=i(118),s=i(128),o=i(32),a=i(41),h=i(86);r.stack=function(t,e,i,r,s,o,h){for(var c,l=n.create({label:"Stack"}),u=t,d=e,f=0,p=0;p<r;p++){for(var g=0,y=0;y<i;y++){var m=h(u,d,y,p,c,f);if(m){var v=m.bounds.max.y-m.bounds.min.y,b=m.bounds.max.x-m.bounds.min.x;v>g&&(g=v),a.translate(m,{x:.5*b,y:.5*v}),u=m.bounds.max.x+s,n.addBody(l,m),c=m,f+=1}else u+=s}d+=g+o,u=t}return l},r.chain=function(t,e,i,r,a,h){for(var c=t.bodies,l=1;l<c.length;l++){var u=c[l-1],d=c[l],f=u.bounds.max.y-u.bounds.min.y,p=u.bounds.max.x-u.bounds.min.x,g=d.bounds.max.y-d.bounds.min.y,y={bodyA:u,pointA:{x:p*e,y:f*i},bodyB:d,pointB:{x:(d.bounds.max.x-d.bounds.min.x)*r,y:g*a}},m=o.extend(y,h);n.addConstraint(t,s.create(m))}return t.label+=" Chain",t},r.mesh=function(t,e,i,r,a){var h,c,l,u,d,f=t.bodies;for(h=0;h<i;h++){for(c=1;c<e;c++)l=f[c-1+h*e],u=f[c+h*e],n.addConstraint(t,s.create(o.extend({bodyA:l,bodyB:u},a)));if(h>0)for(c=0;c<e;c++)l=f[c+(h-1)*e],u=f[c+h*e],n.addConstraint(t,s.create(o.extend({bodyA:l,bodyB:u},a))),r&&c>0&&(d=f[c-1+(h-1)*e],n.addConstraint(t,s.create(o.extend({bodyA:d,bodyB:u},a)))),r&&c<e-1&&(d=f[c+1+(h-1)*e],n.addConstraint(t,s.create(o.extend({bodyA:d,bodyB:u},a))))}return t.label+=" Mesh",t},r.pyramid=function(t,e,i,n,s,o,h){return r.stack(t,e,i,n,s,o,(function(e,r,o,c,l,u){var d=Math.min(n,Math.ceil(i/2)),f=l?l.bounds.max.x-l.bounds.min.x:0;if(!(c>d||o<(c=d-c)||o>i-1-c))return 1===u&&a.translate(l,{x:(o+(i%2==1?1:-1))*f,y:0}),h(t+(l?o*f:0)+o*s,r,o,c,l,u)}))},r.newtonsCradle=function(t,e,i,r,o){for(var a=n.create({label:"Newtons Cradle"}),c=0;c<i;c++){var l=h.circle(t+c*(1.9*r),e+o,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),u=s.create({pointA:{x:t+c*(1.9*r),y:e},bodyB:l});n.addBody(a,l),n.addConstraint(a,u)}return a},r.car=function(t,e,i,r,o){var c=a.nextGroup(!0),l=.5*-i+20,u=.5*i-20,d=n.create({label:"Car"}),f=h.rectangle(t,e,i,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),p=h.circle(t+l,e+0,o,{collisionFilter:{group:c},friction:.8}),g=h.circle(t+u,e+0,o,{collisionFilter:{group:c},friction:.8}),y=s.create({bodyB:f,pointB:{x:l,y:0},bodyA:p,stiffness:1,length:0}),m=s.create({bodyB:f,pointB:{x:u,y:0},bodyA:g,stiffness:1,length:0});return n.addBody(d,f),n.addBody(d,p),n.addBody(d,g),n.addConstraint(d,y),n.addConstraint(d,m),d},r.softBody=function(t,e,i,n,s,a,c,l,u,d){u=o.extend({inertia:1/0},u),d=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var f=r.stack(t,e,i,n,s,a,(function(t,e){return h.circle(t,e,l,u)}));return r.mesh(f,i,n,c,d),f.label="Soft Body",f}},function(t,e,i){var r={};t.exports=r,i(84);var n=i(32);r.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,o,a,h,c,l,u,d,f,p,g=[],y=0,m=0,v=0;e=e||15;var b=function(t,e,i){var r=i%2==1&&i>1;if(!d||t!=d.x||e!=d.y){d&&r?(f=d.x,p=d.y):(f=0,p=0);var n={x:f+t,y:p+e};!r&&d||(d=n),g.push(n),m=f+t,v=p+e}},w=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":m=t.x,v=t.y;break;case"H":m=t.x;break;case"V":v=t.y}b(m,v,t.pathSegType)}};for(r._svgPathToAbsolute(t),o=t.getTotalLength(),c=[],i=0;i<t.pathSegList.numberOfItems;i+=1)c.push(t.pathSegList.getItem(i));for(l=c.concat();y<o;){if((h=c[t.getPathSegAtLength(y)])!=u){for(;l.length&&l[0]!=h;)w(l.shift());u=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(y),b(a.x,a.y,0)}y+=e}for(i=0,s=l.length;i<s;++i)w(l[i]);return g},r._svgPathToAbsolute=function(t){for(var e,i,r,n,s,o,a=t.pathSegList,h=0,c=0,l=a.numberOfItems,u=0;u<l;++u){var d=a.getItem(u),f=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in d&&(h=d.x),"y"in d&&(c=d.y);else switch("x1"in d&&(r=h+d.x1),"x2"in d&&(s=h+d.x2),"y1"in d&&(n=c+d.y1),"y2"in d&&(o=c+d.y2),"x"in d&&(h+=d.x),"y"in d&&(c+=d.y),f){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(h,c),u);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(h,c),u);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(h),u);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(c),u);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(h,c,r,n,s,o),u);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(h,c,s,o),u);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(h,c,r,n),u);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(h,c),u);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(h,c,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),u);break;case"z":case"Z":h=e,c=i}"M"!=f&&"m"!=f||(e=h,i=c)}}},function(t,e,i){var r=i(86),n=i(41),s=i(0),o=i(249),a=i(9),h=i(2),c=i(126),l=i(64),u=new s({Extends:a,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(t,e,i){a.call(this),this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var r=h(i,"body",null),n=h(i,"addToWorld",!0);if(r)this.setBody(r,n);else{var s=e.getCollisionGroup();h(s,"objects",[]).length>0?this.setFromTileCollision(i):this.setFromTileRectangle(i)}},setFromTileRectangle:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),i=e.x+e.width/2,n=e.y+e.height/2,s=r.rectangle(i,n,e.width,e.height,t);return this.setBody(s,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,i=this.tile.tilemapLayer.scaleY,s=this.tile.getLeft(),o=this.tile.getTop(),a=this.tile.getCollisionGroup(),u=h(a,"objects",[]),d=[],f=0;f<u.length;f++){var p=u[f],g=s+p.x*e,y=o+p.y*i,m=p.width*e,v=p.height*i,b=null;if(p.rectangle)b=r.rectangle(g+m/2,y+v/2,m,v,t);else if(p.ellipse)b=r.circle(g+m/2,y+v/2,m/2,t);else if(p.polygon||p.polyline){var w=(p.polygon?p.polygon:p.polyline).map((function(t){return{x:t.x*e,y:t.y*i}})),_=l.create(w),x=l.centre(_);g+=x.x,y+=x.y,b=r.fromVertices(g,y,_,t)}b&&d.push(b)}return 1===d.length?this.setBody(d[0],t.addToWorld):d.length>1&&(t.parts=d,this.setBody(n.create(t),t.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=u},function(t,e,i){var r=i(1399);r.Body=i(41),r.Composite=i(118),r.World=i(596),r.Detector=i(273),r.Grid=i(597),r.Pairs=i(598),r.Pair=i(250),r.Query=i(1400),r.Resolver=i(599),r.SAT=i(274),r.Constraint=i(128),r.Common=i(32),r.Engine=i(1401),r.Events=i(166),r.Sleeping=i(165),r.Plugin=i(595),r.Bodies=i(86),r.Composites=i(591),r.Axes=i(271),r.Bounds=i(84),r.Svg=i(592),r.Vector=i(83),r.Vertices=i(64),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,t.exports=r},function(t,e,i){var r={};t.exports=r;var n=i(32);r._registry={},r.register=function(t){if(r.isPlugin(t)||n.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry){var e=r._registry[t.name],i=r.versionParse(t.version).number,s=r.versionParse(e.version).number;i>s?(n.warn("Plugin.register:",r.toString(e),"was upgraded to",r.toString(t)),r._registry[t.name]=t):i<s?n.warn("Plugin.register:",r.toString(e),"can not be downgraded to",r.toString(t)):t!==e&&n.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")}else r._registry[t.name]=t;return t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,e){return t.used.indexOf(e)>-1},r.isFor=function(t,e){var i=t.for&&r.dependencyParse(t.for);return!t.for||e.name===i.name&&r.versionSatisfies(e.version,i.range)},r.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var i=r.dependencies(t),s=n.topologicalSort(i),o=[],a=0;a<s.length;a+=1)if(s[a]!==t.name){var h=r.resolve(s[a]);h?r.isUsed(t,h.name)||(r.isFor(h,t)||(n.warn("Plugin.use:",r.toString(h),"is for",h.for,"but installed on",r.toString(t)+"."),h._warned=!0),h.install?h.install(t):(n.warn("Plugin.use:",r.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(o.push(" "+r.toString(h)),delete h._warned):o.push(" "+r.toString(h)),t.used.push(h.name)):o.push(" "+s[a])}o.length>0&&!h.silent&&n.info(o.join("  "))}else n.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(t,e){var i=r.dependencyParse(t),s=i.name;if(!(s in(e=e||{}))){t=r.resolve(t)||t,e[s]=n.map(t.uses||[],(function(e){r.isPlugin(e)&&r.register(e);var s=r.dependencyParse(e),o=r.resolve(e);return o&&!r.versionSatisfies(o.version,s.range)?(n.warn("Plugin.dependencies:",r.toString(o),"does not satisfy",r.toString(s),"used by",r.toString(i)+"."),o._warned=!0,t._warned=!0):o||(n.warn("Plugin.dependencies:",r.toString(e),"used by",r.toString(i),"could not be resolved."),t._warned=!0),s.name}));for(var o=0;o<e[s].length;o+=1)r.dependencies(e[s][o],e);return e}},r.dependencyParse=function(t){return n.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||n.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||n.warn("Plugin.versionParse:",t,"is not a valid version or range.");var e=t.split("-");t=e[0];var i=isNaN(Number(t[0])),r=i?t.substr(1):t,s=n.map(r.split("."),(function(t){return Number(t)}));return{isRange:i,version:r,range:t,operator:i?t[0]:"",parts:s,prerelease:e[1],number:1e8*s[0]+1e4*s[1]+s[2]}},r.versionSatisfies=function(t,e){e=e||"*";var i=r.versionParse(e),n=i.parts,s=r.versionParse(t),o=s.parts;if(i.isRange){if("*"===i.operator||"*"===t)return!0;if("~"===i.operator)return o[0]===n[0]&&o[1]===n[1]&&o[2]>=n[2];if("^"===i.operator)return n[0]>0?o[0]===n[0]&&s.number>=i.number:n[1]>0?o[1]===n[1]&&o[2]>=n[2]:o[2]===n[2]}return t===e||"*"===t}},function(t,e,i){var r={};t.exports=r;var n=i(118),s=(i(128),i(32));r.create=function(t){var e=n.create();return s.extend(e,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}},t)}},function(t,e,i){var r={};t.exports=r;var n=i(250),s=i(273),o=i(32);r.create=function(t){var e={controller:r,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(e,t)},r.update=function(t,e,i,n){var s,o,a,h,c,l=i.world,u=t.buckets,d=!1,f=i.metrics;for(f.broadphaseTests=0,s=0;s<e.length;s++){var p=e[s];if((!p.isSleeping||n)&&!(p.bounds.max.x<l.bounds.min.x||p.bounds.min.x>l.bounds.max.x||p.bounds.max.y<l.bounds.min.y||p.bounds.min.y>l.bounds.max.y)){var g=r._getRegion(t,p);if(!p.region||g.id!==p.region.id||n){f.broadphaseTests+=1,p.region&&!n||(p.region=g);var y=r._regionUnion(g,p.region);for(o=y.startCol;o<=y.endCol;o++)for(a=y.startRow;a<=y.endRow;a++){h=u[c=r._getBucketId(o,a)];var m=o>=g.startCol&&o<=g.endCol&&a>=g.startRow&&a<=g.endRow,v=o>=p.region.startCol&&o<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!m&&v&&v&&h&&r._bucketRemoveBody(t,h,p),(p.region===g||m&&!v||n)&&(h||(h=r._createBucket(u,c)),r._bucketAddBody(t,h,p))}p.region=g,d=!0}}}d&&(t.pairsList=r._createActivePairsList(t))},r.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},r._regionUnion=function(t,e){var i=Math.min(t.startCol,e.startCol),n=Math.max(t.endCol,e.endCol),s=Math.min(t.startRow,e.startRow),o=Math.max(t.endRow,e.endRow);return r._createRegion(i,n,s,o)},r._getRegion=function(t,e){var i=e.bounds,n=Math.floor(i.min.x/t.bucketWidth),s=Math.floor(i.max.x/t.bucketWidth),o=Math.floor(i.min.y/t.bucketHeight),a=Math.floor(i.max.y/t.bucketHeight);return r._createRegion(n,s,o,a)},r._createRegion=function(t,e,i,r){return{id:t+","+e+","+i+","+r,startCol:t,endCol:e,startRow:i,endRow:r}},r._getBucketId=function(t,e){return"C"+t+"R"+e},r._createBucket=function(t,e){return t[e]=[]},r._bucketAddBody=function(t,e,i){for(var r=0;r<e.length;r++){var s=e[r];if(!(i.id===s.id||i.isStatic&&s.isStatic)){var o=n.id(i,s),a=t.pairs[o];a?a[2]+=1:t.pairs[o]=[i,s,1]}}e.push(i)},r._bucketRemoveBody=function(t,e,i){e.splice(e.indexOf(i),1);for(var r=0;r<e.length;r++){var s=e[r],o=n.id(i,s),a=t.pairs[o];a&&(a[2]-=1)}},r._createActivePairsList=function(t){var e,i,r=[];e=o.keys(t.pairs);for(var n=0;n<e.length;n++)(i=t.pairs[e[n]])[2]>0?r.push(i):delete t.pairs[e[n]];return r}},function(t,e,i){var r={};t.exports=r;var n=i(250),s=i(32);r._pairMaxIdleLife=1e3,r.create=function(t){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},r.update=function(t,e,i){var r,s,o,a,h=t.list,c=t.table,l=t.collisionStart,u=t.collisionEnd,d=t.collisionActive;for(l.length=0,u.length=0,d.length=0,a=0;a<h.length;a++)h[a].confirmedActive=!1;for(a=0;a<e.length;a++)(r=e[a]).collided&&((o=c[s=n.id(r.bodyA,r.bodyB)])?(o.isActive?d.push(o):l.push(o),n.update(o,r,i),o.confirmedActive=!0):(o=n.create(r,i),c[s]=o,l.push(o),h.push(o)));for(a=0;a<h.length;a++)(o=h[a]).isActive&&!o.confirmedActive&&(n.setActive(o,!1,i),u.push(o))},r.removeOld=function(t,e){var i,n,s,o,a=t.list,h=t.table,c=[];for(o=0;o<a.length;o++)(n=(i=a[o]).collision).bodyA.isSleeping||n.bodyB.isSleeping?i.timeUpdated=e:e-i.timeUpdated>r._pairMaxIdleLife&&c.push(o);for(o=0;o<c.length;o++)delete h[(i=a[s=c[o]-o]).id],a.splice(s,1)},r.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83),o=i(32),a=i(84);r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(t){var e,i,r;for(e=0;e<t.length;e++)(i=t[e]).isActive&&(r=i.activeContacts.length,i.collision.parentA.totalContacts+=r,i.collision.parentB.totalContacts+=r)},r.solvePosition=function(t,e,i){var n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b,w=i*r._positionDampen;for(n=0;n<e.length;n++){var _=e[n];_.previousPositionImpulse.x=_.positionImpulse.x,_.previousPositionImpulse.y=_.positionImpulse.y}for(n=0;n<t.length;n++)(a=t[n]).isActive&&!a.isSensor&&(c=(h=a.collision).parentA,l=h.parentB,u=h.normal,p=c.previousPositionImpulse,g=l.previousPositionImpulse,f=h.penetration,m=g.x-p.x+f.x,v=g.y-p.y+f.y,d=(s=u.x)*m+(o=u.y)*v,a.separation=d,b=(d-a.slop)*w,(c.isStatic||l.isStatic)&&(b*=2),c.isStatic||c.isSleeping||(y=b/c.totalContacts,c.positionImpulse.x+=s*y,c.positionImpulse.y+=o*y),l.isStatic||l.isSleeping||(y=b/l.totalContacts,l.positionImpulse.x-=s*y,l.positionImpulse.y-=o*y))},r.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var o=0;o<i.parts.length;o++){var h=i.parts[o];n.translate(h.vertices,i.positionImpulse),a.update(h.bounds,h.vertices,i.velocity),h.position.x+=i.positionImpulse.x,h.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,s.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=r._positionWarming,i.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(t){var e,i,r,n,o,a,h,c,l,u,d,f,p,g,y=s._temp[0],m=s._temp[1];for(e=0;e<t.length;e++)if((r=t[e]).isActive&&!r.isSensor)for(n=r.activeContacts,a=(o=r.collision).parentA,h=o.parentB,c=o.normal,l=o.tangent,i=0;i<n.length;i++)d=(u=n[i]).vertex,f=u.normalImpulse,p=u.tangentImpulse,0===f&&0===p||(y.x=c.x*f+l.x*p,y.y=c.y*f+l.y*p,a.isStatic||a.isSleeping||(g=s.sub(d,a.position,m),a.positionPrev.x+=y.x*a.inverseMass,a.positionPrev.y+=y.y*a.inverseMass,a.anglePrev+=s.cross(g,y)*a.inverseInertia),h.isStatic||h.isSleeping||(g=s.sub(d,h.position,m),h.positionPrev.x-=y.x*h.inverseMass,h.positionPrev.y-=y.y*h.inverseMass,h.anglePrev-=s.cross(g,y)*h.inverseInertia))},r.solveVelocity=function(t,e){for(var i=e*e,n=s._temp[0],a=s._temp[1],h=s._temp[2],c=s._temp[3],l=s._temp[4],u=s._temp[5],d=0;d<t.length;d++){var f=t[d];if(f.isActive&&!f.isSensor){var p=f.collision,g=p.parentA,y=p.parentB,m=p.normal,v=p.tangent,b=f.activeContacts,w=1/b.length;g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,y.velocity.x=y.position.x-y.positionPrev.x,y.velocity.y=y.position.y-y.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,y.angularVelocity=y.angle-y.anglePrev;for(var _=0;_<b.length;_++){var x=b[_],E=x.vertex,S=s.sub(E,g.position,a),T=s.sub(E,y.position,h),A=s.add(g.velocity,s.mult(s.perp(S),g.angularVelocity),c),C=s.add(y.velocity,s.mult(s.perp(T),y.angularVelocity),l),k=s.sub(A,C,u),R=s.dot(m,k),P=s.dot(v,k),I=Math.abs(P),O=o.sign(P),M=(1+f.restitution)*R,D=o.clamp(f.separation+R,0,1)*r._frictionNormalMultiplier,B=P,L=1/0;I>f.friction*f.frictionStatic*D*i&&(L=I,B=o.clamp(f.friction*O*i,-L,L));var N=s.cross(S,m),U=s.cross(T,m),F=w/(g.inverseMass+y.inverseMass+g.inverseInertia*N*N+y.inverseInertia*U*U);if(M*=F,B*=F,R<0&&R*R>r._restingThresh*i)x.normalImpulse=0;else{var z=x.normalImpulse;x.normalImpulse=Math.min(x.normalImpulse+M,0),M=x.normalImpulse-z}if(P*P>r._restingThreshTangent*i)x.tangentImpulse=0;else{var j=x.tangentImpulse;x.tangentImpulse=o.clamp(x.tangentImpulse+B,-L,L),B=x.tangentImpulse-j}n.x=m.x*M+v.x*B,n.y=m.y*M+v.y*B,g.isStatic||g.isSleeping||(g.positionPrev.x+=n.x*g.inverseMass,g.positionPrev.y+=n.y*g.inverseMass,g.anglePrev+=s.cross(S,n)*g.inverseInertia),y.isStatic||y.isSleeping||(y.positionPrev.x-=n.x*y.inverseMass,y.positionPrev.y-=n.y*y.inverseMass,y.anglePrev-=s.cross(T,n)*y.inverseInertia)}}}}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var r=i(276);t.exports=function(t,e,i,n){for(var s=t[0],o=1;o<t.length;o++){var a=t[o];r(a,s,e,i,n),s=a}return t}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"angle",e,i,n,s)}},function(t,e){t.exports=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r];e.call(i,n)}return t}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var r=i;r<t.length;r++){var n=t[r],s=!0;for(var o in e)n[o]!==e[o]&&(s=!1);if(s)return n}return null}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var r=i;r<t.length;r++){var n=t[r],s=!0;for(var o in e)n[o]!==e[o]&&(s=!1);if(s)return n}return null}},function(t,e,i){var r=i(289),n=i(123),s=i(2),o=i(1),a=new(i(129))({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1);t.exports=function(t,e){void 0===e&&(e={});var i=e.hasOwnProperty("width"),o=e.hasOwnProperty("height"),h=s(e,"width",-1),c=s(e,"height",-1),l=s(e,"cellWidth",1),u=s(e,"cellHeight",l),d=s(e,"position",n.TOP_LEFT),f=s(e,"x",0),p=s(e,"y",0),g=0,y=0,m=h*l,v=c*u;a.setPosition(f,p),a.setSize(l,u);for(var b=0;b<t.length;b++)if(r(t[b],a,d),i&&-1===h)a.x+=l;else if(o&&-1===c)a.y+=u;else if(o&&!i){if(y+=u,a.y+=u,y===v&&(y=0,g+=l,a.y=p,a.x+=l,g===m))break}else if(g+=l,a.x+=l,g===m&&(g=0,y+=u,a.x=f,a.y+=u,y===v))break;return t}},function(t,e,i){var r=i(18),n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,n){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=r(t,0,1),this._alphaTR=r(e,0,1),this._alphaBL=r(i,0,1),this._alphaBR=r(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=r(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=r(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=r(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=r(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=n},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,r,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,i){var r=i(10),n=i(308),s=i(3),o={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&n(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,n,s,o,a,h,c;if(void 0===t&&(t=new r),this.parentContainer){var l=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),l.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),l.transformPoint(t.x,t.y,t),n=t.x,s=t.y,this.getBottomLeft(t),l.transformPoint(t.x,t.y,t),o=t.x,a=t.y,this.getBottomRight(t),l.transformPoint(t.x,t.y,t),h=t.x,c=t.y}else this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),n=t.x,s=t.y,this.getBottomLeft(t),o=t.x,a=t.y,this.getBottomRight(t),h=t.x,c=t.y;return t.x=Math.min(e,n,o,h),t.y=Math.min(i,s,a,c),t.width=Math.max(e,n,o,h)-t.x,t.height=Math.max(i,s,a,c)-t.y,t}};t.exports=o},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="render"},function(t,e){t.exports="resize"},function(t,e){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,e,i){var r=i(36),n=i(99),s=i(6),o=i(100),a=i(3),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof t&&(t={duration:t}),t.from=s(t,"from",0),t.to=s(t,"to",1);var h=n(t,"positionOnPath",!1);this.rotateToPath=n(t,"rotateToPath",!1),this.pathRotationOffset=s(t,"rotationOffset",0);var c=s(t,"startAt",e);if(c&&(t.onStart=function(t){var e=t.data[0];e.progress=c,e.elapsed=e.duration*c;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var l=this.path.getPoint(.1);this.rotation=Math.atan2(l.y-this.y,l.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],i=this.pathDelta,n=this.pathVector;if(i.copy(n).negate(),e.state===o.COMPLETE)return this.path.getPoint(1,n),i.add(n),n.add(this.pathOffset),void this.setPosition(n.x,n.y);if(e.state!==o.PLAYING_FORWARD&&e.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),n),i.add(n),n.add(this.pathOffset);var s=this.x,a=this.y;this.setPosition(n.x,n.y);var h=this.x-s,c=this.y-a;if(0===h&&0===c)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(c,h)+r(this.pathRotationOffset))}}};t.exports=h},function(t,e){var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=i},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,r,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,i,r){return void 0===t&&(t=16777215),void 0===e&&(e=t,i=t,r=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=i,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(t,e,i,r){return this.setTint(t,e,i,r),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="prerender"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"alpha",e,i,n,s)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"x",e,i,n,s)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"x",e,n,o,a),r(t,"y",i,s,o,a)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"y",e,i,n,s)}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=6.28);for(var n=i,s=(r-i)/t.length,o=0;o<t.length;o++)t[o].x=e.x+e.radius*Math.cos(n),t[o].y=e.y+e.radius*Math.sin(n),n+=s;return t}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=6.28);for(var n=i,s=(r-i)/t.length,o=e.width/2,a=e.height/2,h=0;h<t.length;h++)t[h].x=e.x+o*Math.cos(n),t[h].y=e.y+a*Math.sin(n),n+=s;return t}},function(t,e,i){var r=i(172);t.exports=function(t,e){for(var i=r(e,t.length),n=0;n<t.length;n++){var s=t[n],o=i[n];s.x=o.x,s.y=o.y}return t}},function(t,e,i){var r=i(316),n=i(178),s=i(179);t.exports=function(t,e,i){void 0===i&&(i=0);var o=r(e,!1,t.length);i>0?n(o,i):i<0&&s(o,Math.abs(i));for(var a=0;a<t.length;a++)t[a].x=o[a].x,t[a].y=o[a].y;return t}},function(t,e,i){var r=i(317);t.exports=function(t,e,i){var n=r({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},i),s=r({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},i),o=r({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},i);n.pop(),s.pop(),o.pop();for(var a=(n=n.concat(s,o)).length/t.length,h=0,c=0;c<t.length;c++){var l=t[c],u=n[Math.floor(h)];l.x=u.x,l.y=u.y,h+=a}return t}},function(t,e){t.exports=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r];n.anims&&n.anims.play(e,i)}return t}},function(t,e,i){var r=i(170);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(180);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(173);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(174);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(181);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"rotation",e,i,n,s)}},function(t,e,i){var r=i(182),n=i(50);t.exports=function(t,e,i){for(var s=e.x,o=e.y,a=0;a<t.length;a++){var h=t[a];r(h,s,o,i,Math.max(1,n(h.x,h.y,s,o)))}return t}},function(t,e,i){var r=i(182);t.exports=function(t,e,i,n){var s=e.x,o=e.y;if(0===n)return t;for(var a=0;a<t.length;a++)r(t[a],s,o,i,n);return t}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"scaleX",e,i,n,s)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"scaleX",e,n,o,a),r(t,"scaleY",i,s,o,a)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"scaleY",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"alpha",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n){return r(t,"blendMode",e,0,i,n)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"depth",e,i,n,s)}},function(t,e){t.exports=function(t,e,i){for(var r=0;r<t.length;r++)t[r].setInteractive(e,i);return t}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"originX",e,n,o,a),r(t,"originY",i,s,o,a),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"rotation",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"scaleX",e,n,o,a),r(t,"scaleY",i,s,o,a)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scaleX",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scaleY",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"scrollFactorX",e,n,o,a),r(t,"scrollFactorY",i,s,o,a)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scrollFactorX",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scrollFactorY",e,i,n,s)}},function(t,e){t.exports=function(t,e,i,r,n){for(var s=0;s<t.length;s++)t[s].setTint(e,i,r,n);return t}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n){return r(t,"visible",e,0,i,n)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"x",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"x",e,n,o,a),r(t,"y",i,s,o,a)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"y",e,i,n,s)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){var o,a,h,c,l,u;if(void 0===n&&(n=0),void 0===s&&(s=new r),t.length>1)if(0===n){var d=t.length-1;for(o=t[d].x,a=t[d].y,h=d-1;h>=0;h--)c=(u=t[h]).x,l=u.y,u.x=o,u.y=a,o=c,a=l;t[d].x=e,t[d].y=i}else{for(o=t[0].x,a=t[0].y,h=1;h<t.length;h++)c=(u=t[h]).x,l=u.y,u.x=o,u.y=a,o=c,a=l;t[0].x=e,t[0].y=i}else o=t[0].x,a=t[0].y,t[0].x=e,t[0].y=i;return s.x=o,s.y=a,s}},function(t,e,i){var r=i(131);t.exports=function(t){return r(t)}},function(t,e,i){var r=i(183);t.exports=function(t,e,i,n,s){void 0===s&&(s=!1);var o,a=Math.abs(n-i)/t.length;if(s)for(o=0;o<t.length;o++)t[o][e]+=r(o*a,i,n);else for(o=0;o<t.length;o++)t[o][e]=r(o*a,i,n);return t}},function(t,e,i){var r=i(184);t.exports=function(t,e,i,n,s){void 0===s&&(s=!1);var o,a=Math.abs(n-i)/t.length;if(s)for(o=0;o<t.length;o++)t[o][e]+=r(o*a,i,n);else for(o=0;o<t.length;o++)t[o][e]=r(o*a,i,n);return t}},function(t,e){t.exports=function(t,e,i,r,n){void 0===n&&(n=!1);var s,o=Math.abs(r-i)/t.length;if(n)for(s=0;s<t.length;s++)t[s][e]+=s*o+i;else for(s=0;s<t.length;s++)t[s][e]=s*o+i;return t}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},function(t,e,i){var r=i(68);t.exports=function(t,e,i){void 0===i&&(i=0);for(var n=0;n<t.length;n++){var s=t[n];s.x=r(s.x,e.left-i,e.right+i),s.y=r(s.y,e.top-i,e.bottom+i)}return t}},function(t,e,i){t.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(t,e){t.exports="add"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationstop"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e,i){t.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,i){t.exports={Controls:i(739),Scene2D:i(742)}},function(t,e,i){t.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(t,e,i){var r=i(0),n=i(6),s=new r({initialize:function(t){this.camera=n(t,"camera",null),this.left=n(t,"left",null),this.right=n(t,"right",null),this.up=n(t,"up",null),this.down=n(t,"down",null),this.zoomIn=n(t,"zoomIn",null),this.zoomOut=n(t,"zoomOut",null),this.zoomSpeed=n(t,"zoomSpeed",.01),this.minZoom=n(t,"minZoom",.001),this.maxZoom=n(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=n(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=n(t,"speed.x",0),this.speedY=n(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=s},function(t,e,i){var r=i(0),n=i(6),s=new r({initialize:function(t){this.camera=n(t,"camera",null),this.left=n(t,"left",null),this.right=n(t,"right",null),this.up=n(t,"up",null),this.down=n(t,"down",null),this.zoomIn=n(t,"zoomIn",null),this.zoomOut=n(t,"zoomOut",null),this.zoomSpeed=n(t,"zoomSpeed",.01),this.minZoom=n(t,"minZoom",.001),this.maxZoom=n(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=n(t,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=n(t,"acceleration.x",0),this.accelY=n(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=n(t,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=n(t,"drag.x",0),this.dragY=n(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=n(t,"maxSpeed",null);"number"==typeof r?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=n(t,"maxSpeed.x",0),this.maxSpeedY=n(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=s},function(t,e,i){t.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="followupdate"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerarotatecomplete"},function(t,e){t.exports="camerarotatestart"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,o,a,h){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),!o&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=i,this.green=r,this.blue=n,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h;var c=t?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(c,this.camera,this,e,i,r,n),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,r=this.red/255,n=this.green/255,s=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(s,n,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,o,a){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===i&&(i=255),void 0===r&&(r=255),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=i,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=a,this.camera.emit(s.FLASH_START,this.camera,this,t,e,i,r)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var i=this.camera,r=this.red/255,n=this.green/255,s=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(s,n,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var r=i(18),n=i(0),s=i(134),o=i(37),a=i(3),h=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,a,h){void 0===i&&(i=1e3),void 0===r&&(r=s.Linear),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene);var c=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(c.scrollX,c.scrollY),this.destination.set(t,e),c.getScroll(t,e,this.current),"string"==typeof r&&s.hasOwnProperty(r)?this.ease=s[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.camera.emit(o.PAN_START,this.camera,this,i,t,e)),c},update:function(t,e){if(this.isRunning){this._elapsed+=e;var i=r(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);n.getScroll(this.destination.x,this.destination.y,this.current);var o=this.source.x+(this.current.x-this.source.x)*s,a=this.source.y+(this.current.y-this.source.y)*s;n.setScroll(o,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,o,a)}else n.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,n.scrollX,n.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var i=1.525*e;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var r=i/4;return e<1?e=1:r=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var r=i/4;return e<1?e=1:r=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/i)+1}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var r=i/4;return e<1?e=1:r=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=i(3),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===n&&(n=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=n,this.camera.emit(s.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){if(this.isRunning)if(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,n=this.camera.width,s=this.camera.height,o=this.camera.zoom;this._offsetX=(Math.random()*i.x*n*2-i.x*n)*o,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*o,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=a},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=i(134),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,i,r,n,a,h){void 0===i&&(i=1e3),void 0===r&&(r=o.Linear),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var c=t;t<0?(c=-1*t,this.clockwise=!1):this.clockwise=!0;var l=360*Math.PI/180;c-=Math.floor(c/l)*l;var u=this.camera;if(!n&&this.isRunning)return u;if(this.isRunning=!0,this.duration=i,this.progress=0,this.source=u.rotation,this.destination=c,"string"==typeof r&&o.hasOwnProperty(r)?this.ease=o[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.shortestPath){var d,f;(d=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+l)-this.source)<(f=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+l)-this.destination)?this.clockwise=!0:d>f&&(this.clockwise=!1)}return this.camera.emit(s.ROTATE_START,this.camera,this,i,c),u},update:function(t,e){if(this.isRunning){this._elapsed+=e;var i=r(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=n.rotation;var o,a=360*Math.PI/180,h=this.destination,c=this.current;!1===this.clockwise&&(h=this.current,c=this.destination),o=h>=c?Math.abs(h-c):Math.abs(h+a)-c;var l;l=this.clockwise?n.rotation+o*s:n.rotation-o*s,n.rotation=l,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,l)}else n.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=a},function(t,e,i){var r=i(18),n=i(0),s=i(134),o=i(37),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,a){void 0===e&&(e=1e3),void 0===i&&(i=s.Linear),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===a&&(a=this.camera.scene);var h=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=h.zoom,this.destination=t,"string"==typeof i&&s.hasOwnProperty(i)?this.ease=s[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(o.ZOOM_START,this.camera,this,e,t)),h},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var r=i(326),n=i(0),s=i(2),o=i(24),a=i(57),h=i(104),c=i(20),l=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(c.UPDATE,this.update,this),e.once(c.SHUTDOWN,this.shutdown,this)},add:function(t,e,i,n,s,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),void 0===s&&(s=!1),void 0===o&&(o="");var a=new r(t,e,i,n);return a.setName(o),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),s&&(this.main=a),a},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,i=0;i<32;i++){for(var r=!1,n=0;n<t.length;n++){var s=t[n];s&&s.id===e&&(r=!0)}if(!r)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,i=this.cameras,r=0;r<i.length;r++){var n=i[r];(!t||t&&n.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<t.length;r++){var n=t[r],o=s(n,"x",0),a=s(n,"y",0),h=s(n,"width",e),c=s(n,"height",i),l=this.add(o,a,h,c);l.name=s(n,"name",""),l.zoom=s(n,"zoom",1),l.rotation=s(n,"rotation",0),l.scrollX=s(n,"scrollX",0),l.scrollY=s(n,"scrollY",0),l.roundPixels=s(n,"roundPixels",!1),l.visible=s(n,"visible",!0);var u=s(n,"backgroundColor",!1);u&&l.setBackgroundColor(u);var d=s(n,"bounds",null);if(d){var f=s(d,"x",0),p=s(d,"y",0),g=s(d,"width",e),y=s(d,"height",i);l.setBounds(f,p,g,y)}}return this},getCamera:function(t){for(var e=this.cameras,i=0;i<e.length;i++)if(e[i].name===t)return e[i];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,i=t.x,r=t.y,n=[],s=0;s<e.length;s++){var o=e[s];o.visible&&o.inputEnabled&&a(o,i,r)&&n.unshift(o)}return n},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0,r=this.cameras,n=0;n<t.length;n++){var s=r.indexOf(t[n]);-1!==s&&(e?r[s].destroy():r[s].renderList=[],r.splice(s,1),i++)}return!this.main&&r[0]&&(this.main=r[0]),i},render:function(t,e){for(var i=this.scene,r=this.cameras,n=0;n<this.cameras.length;n++){var s=r[n];if(s.visible&&s.alpha>0){s.preRender();var o=this.getVisibleChildren(e.getChildren(),s);t.render(i,o,s)}}},getVisibleChildren:function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r];n.willRender(e)&&i.push(n)}return i},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(t,e)},onResize:function(t,e,i,r,n){for(var s=0;s<this.cameras.length;s++){var o=this.cameras[s];0===o._x&&0===o._y&&o._width===r&&o._height===n&&o.setSize(e.width,e.height)}},resize:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(c.UPDATE,this.update,this),e.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",l,"cameras"),t.exports=l},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e,i){t.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(t,e){var i,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var h,c=[],l=!1,u=-1;function d(){l&&h&&(l=!1,h.length?c=h.concat(c):u=-1,c.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(h=c,c=[];++u<e;)h&&h[u].run();u=-1,e=c.length}h=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new p(t,e)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){var r=i(136),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),n)},function(t,e,i){var r=i(136),n={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(n.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(n.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(n.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(n.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(n.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(n.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)n.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(10===i&&s>=11||i>10)&&(n.dolby=!0)}}catch(t){}return n}()},function(t,e){var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch(t){}return i}()},function(t,e){var i={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return i;var t,e="Fullscreen",r="FullScreen",n=["request"+e,"request"+r,"webkitRequest"+e,"webkitRequest"+r,"msRequest"+e,"msRequest"+r,"mozRequest"+r,"mozRequest"+e];for(t=0;t<n.length;t++)if(document.documentElement[n[t]]){i.available=!0,i.request=n[t];break}var s=["cancel"+r,"exit"+e,"webkitCancel"+r,"webkitExit"+e,"msCancel"+r,"msExit"+e,"mozCancel"+r,"mozExit"+e];if(i.available)for(t=0;t<s.length;t++)if(document[s[t]]){i.cancel=s[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}()},function(t,e,i){t.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,i,r){return Math.atan2(i-t,r-e)}},function(t,e,i){var r=i(14);t.exports=function(t){return t>Math.PI&&(t-=r.PI2),Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)}},function(t,e,i){var r=i(137);t.exports=function(){return r(-Math.PI,Math.PI)}},function(t,e,i){var r=i(137);t.exports=function(){return r(-180,180)}},function(t,e,i){var r=i(351);t.exports=function(t){return r(t+Math.PI)}},function(t,e,i){var r=i(14);t.exports=function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=r.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=r.PI2:e-=r.PI2),e>t?t+=i:e<t&&(t-=i))),t}},function(t,e){t.exports=function(t,e){var i=e-t;return 0===i?0:i-360*Math.floor((i- -180)/360)}},function(t,e,i){t.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}},function(t,e){t.exports=function(t,e,i,r){return Math.max(Math.abs(t-i),Math.abs(e-r))}},function(t,e){t.exports=function(t,e,i,r,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(i-t,n)+Math.pow(r-e,n))}},function(t,e){t.exports=function(t,e,i,r){return Math.abs(t-i)+Math.abs(e-r)}},function(t,e,i){t.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(t,e,i){t.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e,i){t.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(t,e,i){var r=i(356);t.exports=function(t,e){for(var i=0,n=t.length-1,s=0;s<=n;s++)i+=Math.pow(1-e,n-s)*Math.pow(e,s)*t[s]*r(n,s);return i}},function(t,e,i){var r=i(194);t.exports=function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n);return t[0]===t[i]?(e<0&&(s=Math.floor(n=i*(1+e))),r(n-s,t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i])):e<0?t[0]-(r(-n,t[0],t[0],t[1],t[1])-t[0]):e>1?t[i]-(r(n-i,t[i],t[i],t[i-1],t[i-1])-t[i]):r(n-s,t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2])}},function(t,e,i){var r=i(135);t.exports=function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n);return e<0?r(t[0],t[1],n):e>1?r(t[i],t[i-1],i-n):r(t[s],t[s+1>i?i:s+1],n-s)}},function(t,e,i){var r=i(183);t.exports=function(t,e,i){return e+(i-e)*r(t,0,1)}},function(t,e,i){t.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(t,e){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,e,i){t.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(t,e){t.exports=function(t,e,i,r){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),r?(i+t)/e:i+t)}},function(t,e,i){var r=new(i(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var r=0;r<t.length;r++)e=.02519603282416938*(i+=t.charCodeAt(r)),e-=i=e>>>0,i=(e*=i)>>>0,i+=4294967296*(e-=i);return this.n=i,2.3283064365386963e-10*(i>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(this.frac()*(e+1)),r=t[i];t[i]=t[e],t[e]=r}return t}});t.exports=r},function(t,e){t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var r=Math.pow(i,-e);return Math.ceil(t*r)/r}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e,i){var r=i(18),n=i(0),s=i(69),o=i(1),a=new s,h=new n({initialize:function t(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=t.DefaultOrder),this._x=e,this._y=i,this._z=r,this._order=n,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,i,r){return void 0===r&&(r=this._order),this._x=t,this._y=e,this._z=i,this._order=r,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,i){return void 0===e&&(e=this._order),void 0===i&&(i=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,i)},setFromRotationMatrix:function(t,e,i){void 0===e&&(e=this._order),void 0===i&&(i=!1);var n=t.val,s=n[0],o=n[4],a=n[8],h=n[1],c=n[5],l=n[9],u=n[2],d=n[6],f=n[10],p=0,g=0,y=0,m=.99999;switch(e){case"XYZ":g=Math.asin(r(a,-1,1)),Math.abs(a)<m?(p=Math.atan2(-l,f),y=Math.atan2(-o,s)):p=Math.atan2(d,c);break;case"YXZ":p=Math.asin(-r(l,-1,1)),Math.abs(l)<m?(g=Math.atan2(a,f),y=Math.atan2(h,c)):g=Math.atan2(-u,s);break;case"ZXY":p=Math.asin(r(d,-1,1)),Math.abs(d)<m?(g=Math.atan2(-u,f),y=Math.atan2(-o,c)):y=Math.atan2(h,s);break;case"ZYX":g=Math.asin(-r(u,-1,1)),Math.abs(u)<m?(p=Math.atan2(d,f),y=Math.atan2(h,s)):y=Math.atan2(-o,c);break;case"YZX":y=Math.asin(r(h,-1,1)),Math.abs(h)<m?(p=Math.atan2(-l,c),g=Math.atan2(-u,s)):g=Math.atan2(a,f);break;case"XZY":y=Math.asin(-r(o,-1,1)),Math.abs(o)<m?(p=Math.atan2(d,c),g=Math.atan2(a,s)):p=Math.atan2(-l,f)}return this._x=p,this._y=g,this._z=y,this._order=e,i&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var r=Math.pow(i,-e);return Math.floor(t*r)/r}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,i){return Math.min(t+e,i)}},function(t,e){t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var i=Math.floor(e/2);return e%2==0?(t[i]+t[i-1])/2:t[i]}},function(t,e){t.exports=function(t,e,i){return Math.max(t-e,i)}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=e+1);var n=(t-e)/(i-e);return n>1?void 0!==r?(n=(r-t)/(r-i))<0&&(n=0):n=1:n<0&&(n=0),n}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*e;return t.x=Math.cos(i)*n,t.y=Math.sin(i)*n,t.z=r*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e,i,r,n){return t.x=e+n*Math.cos(r),t.y=i+n*Math.sin(r),t}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var r=Math.pow(i,-e);return Math.round(t*r)/r}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=1),void 0===i&&(i=1),void 0===r&&(r=1),r*=Math.PI/t;for(var n=[],s=[],o=0;o<t;o++)e+=(i-=e*r)*r,n[o]=i,s[o]=e;return{sin:s,cos:n,length:t}}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n){void 0===n&&(n=new r);var s=0,o=0;return t>0&&t<=e*i&&(s=t>e-1?t-(o=Math.floor(t/e))*e:t),n.set(s,o)}},function(t,e){t.exports=function(t,e,i){return Math.abs(t-e)<=i}},function(t,e,i){var r=i(39),n=i(69),s=i(365),o=new n,a=new s,h=new r;t.exports=function(t,e,i){return a.setAxisAngle(e,i),o.fromRotationTranslation(a,h.set(0,0,0)),t.transformMat4(o)}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports="pipelineafterflush"},function(t,e){t.exports="pipelinebeforeflush"},function(t,e){t.exports="pipelinebind"},function(t,e){t.exports="pipelineboot"},function(t,e){t.exports="pipelinedestroy"},function(t,e){t.exports="pipelinerebind"},function(t,e){t.exports="pipelineresize"},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,e,i){t.exports={GenerateTexture:i(388),Palettes:i(889)}},function(t,e,i){t.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(t,e){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,e){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,e,i){t.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(t,e,i){var r=i(0),n=i(390),s=i(391),o=i(5),a=i(392),h=i(393),c=i(394),l=i(10),u=i(395),d=i(3),f=i(14),p=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new a(e,t)),this},cubicBezierTo:function(t,e,i,r,s,o){var a,h,c,l=this.getEndPoint();return t instanceof d?(a=t,h=e,c=i):(a=new d(i,r),h=new d(s,o),c=new d(t,e)),this.add(new n(l,a,h,c))},quadraticBezierTo:function(t,e,i,r){var n,s,o=this.getEndPoint();return t instanceof d?(n=t,s=e):(n=new d(i,r),s=new d(t,e)),this.add(new c(o,n,s))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var r=this.curves[i];r.active&&r.draw(t,e)}return t},ellipseTo:function(t,e,i,r,n,o){var a=new s(0,0,t,e,i,r,n,o),h=this.getEndPoint(this._tmpVec2A),c=a.getStartPoint(this._tmpVec2B);return h.subtract(c),a.x=h.x,a.y=h.y,this.add(a)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var i=t.curves[e];switch(i.type){case"LineCurve":this.add(a.fromJSON(i));break;case"EllipseCurve":this.add(s.fromJSON(i));break;case"SplineCurve":this.add(u.fromJSON(i));break;case"CubicBezierCurve":this.add(n.fromJSON(i));break;case"QuadraticBezierCurve":this.add(c.fromJSON(i))}}return this},getBounds:function(t,e){void 0===t&&(t=new l),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new l,r=f.MIN_SAFE_INTEGER,n=f.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var o=this.curves[s];o.active&&(o.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),r=Math.max(r,i.right),n=Math.max(n,i.bottom))}return t.right=r,t.bottom=n,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new d),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var s=r[n]-i,o=this.curves[n],a=o.getLength(),h=0===a?0:1-s/a;return o.getPointAt(h,e)}n++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],r=0;r<this.curves.length;r++){var n=this.curves[r];if(n.active)for(var s=n.getResolution(t),o=n.getPoints(s),a=0;a<o.length;a++){var h=o[a];e&&e.equals(h)||(i.push(h),e=h)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new d),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var s=r[n]-i,o=this.curves[n],a=o.getLength(),h=0===a?0:1-s/a;return o.getTangentAt(h,e)}n++}return null},lineTo:function(t,e){t instanceof d?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new a([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new u(t))},moveTo:function(t,e){return t instanceof d?this.add(new h(t.x,t.y)):this.add(new h(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",(function(t,e){return new p(t,e)})),t.exports=p},function(t,e,i){t.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(t,e,i){var r=i(0),n=i(101),s=i(24),o=i(20),a=new r({Extends:n,initialize:function(t){n.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){n.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",a,"data"),t.exports=a},function(t,e,i){t.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(t,e,i){var r=i(123),n=i(17),s={In:i(900),To:i(901)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(t,e,i){t.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(t,e,i){t.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(t,e,i){var r=i(42),n=i(43),s=i(44),o=i(45);t.exports=function(t,e){void 0===e&&(e={});var i=n(t),a=o(t);return e.x=i,e.y=a,e.width=s(t)-i,e.height=r(t)-a,e}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,i){t.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(i){t.style[i+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e,i){var r=i(103);t.exports=function(t){void 0===t&&(t=1024);var e,i=[],n=255,s=255,o=0,a=0;for(e=0;e<=n;e++)i.push({r:s,g:e,b:a,color:r(s,e,a)});for(o=255,e=n;e>=0;e--)i.push({r:e,g:o,b:a,color:r(e,o,a)});for(s=0,e=0;e<=n;e++,o--)i.push({r:s,g:o,b:e,color:r(s,o,e)});for(o=0,a=255,e=0;e<=n;e++,a--,s++)i.push({r:s,g:o,b:a,color:r(s,o,a)});if(1024===t)return i;var h=[],c=0,l=1024/t;for(e=0;e<t;e++)h.push(i[Math.floor(c)]),c+=l;return h}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(e.a=t>>>24),e}},function(t,e,i){var r=i(38),n=i(399);t.exports=function(t,e,i){var s=i,o=i,a=i;if(0!==e){var h=i<.5?i*(1+e):i+e-i*e,c=2*i-h;s=n(c,h,t+1/3),o=n(c,h,t),a=n(c,h,t-1/3)}return(new r).setGLTo(s,o,a,1)}},function(t,e,i){var r=i(188);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],n=0;n<=359;n++)i.push(r(n/359,t,e));return i}},function(t,e,i){var r=i(135),n=function(t,e,i,n,s,o,a,h){void 0===a&&(a=100),void 0===h&&(h=0);var c=h/a;return{r:r(t,n,c),g:r(e,s,c),b:r(i,o,c)}};t.exports={RGBWithRGB:n,ColorWithRGB:function(t,e,i,r,s,o){return void 0===s&&(s=100),void 0===o&&(o=0),n(t.r,t.g,t.b,e,i,r,s,o)},ColorWithColor:function(t,e,i,r){return void 0===i&&(i=100),void 0===r&&(r=0),n(t.r,t.g,t.b,e.r,e.g,e.b,i,r)}}},function(t,e,i){var r=i(195),n=i(38);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new n(r(t,e),r(t,e),r(t,e))}},function(t,e,i){var r=i(398);t.exports=function(t,e,i,n,s){return void 0===n&&(n=255),void 0===s&&(s="#"),"#"===s?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7):"0x"+r(n)+r(t)+r(e)+r(i)}},function(t,e,i){t.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(t,e,i){var r={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};t.exports=r},function(t,e,i){t.exports={EventEmitter:i(919)}},function(t,e,i){var r=i(0),n=i(9),s=i(24),o=new r({Extends:n,initialize:function(){n.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",o,"events"),t.exports=o},function(t,e,i){var r=i(142),n=i(321),s=i(325),o=i(31),a=i(0),h=i(346),c=i(921),l=i(366),u=i(101),d=i(384),f=i(347),p=i(400),g=i(9),y=i(22),m=i(409),v=i(24),b=i(414),w=i(415),_=i(417),x=i(106),E=i(422),S=i(385),T=i(387),A=i(426),C=new a({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new n(this),this.textures=new E(this),this.cache=new s(this),this.registry=new u(this),this.input=new m(this,this.config),this.scene=new _(this,this.config.sceneConfig),this.device=f,this.scale=new w(this,this.config),this.sound=null,this.sound=A.create(this),this.loop=new S(this,this.config.fps),this.plugins=new b(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){v.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),l(this),c(this),d(this),r(this.canvas,this.config.parent),this.textures.once(x.READY,this.texturesReady,this),this.events.emit(y.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),T(this);var t=this.events;t.on(y.HIDDEN,this.onHidden,this),t.on(y.VISIBLE,this.onVisible,this),t.on(y.BLUR,this.onBlur,this),t.on(y.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(y.PRE_STEP,t,e),i.emit(y.STEP,t,e),this.scene.update(t,e),i.emit(y.POST_STEP,t,e);var r=this.renderer;r.preRender(),i.emit(y.PRE_RENDER,r,t,e),this.scene.render(r),r.postRender(),i.emit(y.POST_RENDER,r,t,e)},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(y.PRE_STEP,t,e),i.emit(y.STEP,t,e),this.scene.update(t,e),i.emit(y.POST_STEP,t,e),i.emit(y.PRE_RENDER),i.emit(y.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=C},function(t,e,i){var r=i(142);t.exports=function(t){var e=t.config;if(e.parent&&e.domCreateContainer){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+e.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=i,r(i,e.parent)}}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,i){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,e){t.exports=function(t,e,i){if(i.getElementsByTagName("TextureAtlas")){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);for(var n,s=i.getElementsByTagName("SubTexture"),o=0;o<s.length;o++){var a=s[o].attributes,h=a.name.value,c=parseInt(a.x.value,10),l=parseInt(a.y.value,10),u=parseInt(a.width.value,10),d=parseInt(a.height.value,10);if(n=t.add(h,e,c,l,u,d),a.frameX){var f=Math.abs(parseInt(a.frameX.value,10)),p=Math.abs(parseInt(a.frameY.value,10)),g=parseInt(a.frameWidth.value,10),y=parseInt(a.frameHeight.value,10);n.setTrim(u,d,f,p,g,y)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e,i){var r=i(77);t.exports=function(t,e,i){if(i.frames||i.textures){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);for(var s,o=Array.isArray(i.textures)?i.textures[e].frames:i.frames,a=0;a<o.length;a++){var h=o[a];s=t.add(h.filename,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var c=h.anchor||h.pivot;c&&(s.customPivot=!0,s.pivotX=c.x,s.pivotY=c.y),s.customData=r(h)}for(var l in i)"frames"!==l&&(Array.isArray(i[l])?t.customData[l]=i[l].slice(0):t.customData[l]=i[l]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,e,i){var r=i(77);t.exports=function(t,e,i){if(i.frames){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);var s,o=i.frames;for(var a in o)if(o.hasOwnProperty(a)){var h=o[a];s=t.add(a,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var c=h.anchor||h.pivot;c&&(s.customPivot=!0,s.pivotX=c.x,s.pivotY=c.y),s.customData=r(h)}for(var l in i)"frames"!==l&&(Array.isArray(i[l])?t.customData[l]=i[l].slice(0):t.customData[l]=i[l]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,e,i){var r=i(2);t.exports=function(t,e,i,n,s,o,a){var h=r(a,"frameWidth",null),c=r(a,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var l=t.source[e];t.add("__BASE",e,0,0,l.width,l.height);var u=r(a,"startFrame",0),d=r(a,"endFrame",-1),f=r(a,"margin",0),p=r(a,"spacing",0),g=Math.floor((s-f+p)/(h+p))*Math.floor((o-f+p)/(c+p));0===g&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(u>g||u<-g)&&(u=0),u<0&&(u=g+u),-1!==d&&(g=u+(d+1));for(var y=f,m=f,v=0,b=0,w=0;w<g;w++){v=0,b=0;var _=y+h,x=m+c;_>s&&(v=_-s),x>o&&(b=x-o),t.add(w,e,i+y,n+m,h-v,c-b),(y+=h+p)+h>s&&(y=f,m+=c+p)}return t}},function(t,e,i){var r=i(2);t.exports=function(t,e,i){var n=r(i,"frameWidth",null),s=r(i,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o=t.source[0];t.add("__BASE",0,0,0,o.width,o.height);var a,h=r(i,"startFrame",0),c=r(i,"endFrame",-1),l=r(i,"margin",0),u=r(i,"spacing",0),d=e.cutX,f=e.cutY,p=e.cutWidth,g=e.cutHeight,y=e.realWidth,m=e.realHeight,v=Math.floor((y-l+u)/(n+u)),b=Math.floor((m-l+u)/(s+u)),w=v*b,_=e.x,x=n-_,E=n-(y-p-_),S=e.y,T=s-S,A=s-(m-g-S);(h>w||h<-w)&&(h=0),h<0&&(h=w+h),-1!==c&&(w=h+(c+1));for(var C=l,k=l,R=0,P=e.sourceIndex,I=0;I<b;I++){for(var O=0===I,M=I===b-1,D=0;D<v;D++){var B=0===D,L=D===v-1;if(a=t.add(R,P,d+C,f+k,n,s),B||O||L||M){var N=B?_:0,U=O?S:0,F=0,z=0;B&&(F+=n-x),L&&(F+=n-E),O&&(z+=s-T),M&&(z+=s-A);var j=n-F,V=s-z;a.cutWidth=j,a.cutHeight=V,a.setTrim(n,s,N,U,j,V)}C+=u,C+=B?x:L?E:n,R++}C=l,k+=u,k+=O?T:M?A:s}return t}},function(t,e){var i=0,r=function(t,e,r,n){var s=i-n.y-n.height;t.add(r,e,n.x,s,n.width,n.height)};t.exports=function(t,e,n){var s=t.source[e];t.add("__BASE",e,0,0,s.width,s.height),i=s.height;for(var o=n.split("\n"),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",c="",l={x:0,y:0,width:0,height:0},u=0;u<o.length;u++){var d=o[u].match(a);if(d){var f="- "===d[1],p=d[2],g=d[3];if(f&&(c!==h&&(r(t,e,c,l),h=c),l={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":l[p]=parseInt(g,10)}else c=g}}return c!==h&&r(t,e,c,l),t}},function(t,e){t.exports="complete"},function(t,e){t.exports="decoded"},function(t,e){t.exports="decodedall"},function(t,e){t.exports="destroy"},function(t,e){t.exports="detune"},function(t,e){t.exports="detune"},function(t,e){t.exports="mute"},function(t,e){t.exports="rate"},function(t,e){t.exports="volume"},function(t,e){t.exports="loop"},function(t,e){t.exports="looped"},function(t,e){t.exports="mute"},function(t,e){t.exports="pan"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="pause"},function(t,e){t.exports="play"},function(t,e){t.exports="rate"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="resume"},function(t,e){t.exports="seek"},function(t,e){t.exports="stopall"},function(t,e){t.exports="stop"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="volume"},function(t,e,i){var r={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};r.Shader=i(229),r.Mesh=i(230),r.PointLight=i(150),r.Factories.Shader=i(1184),r.Factories.Mesh=i(1185),r.Factories.PointLight=i(1186),r.Creators.Shader=i(1187),r.Creators.Mesh=i(1188),r.Creators.PointLight=i(1189),r.Light=i(481),r.LightsManager=i(482),r.LightsPlugin=i(1190),t.exports=r},function(t,e,i){var r=i(0),n=i(110),s=i(24),o=i(75),a=i(20),h=i(79),c=new r({Extends:n,initialize:function(t){n.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(o.ADDED_TO_SCENE,t,this.scene),this.events.emit(a.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(o.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",c,"displayList"),t.exports=c},function(t,e,i){t.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(t,e,i){var r=i(186),n=i(209);t.exports=function(t){var e="";if(!n(t))return e;for(var i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++){var o=t[i][s].toString();e+="undefined"!==o?r(o,2):"?",s<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var a=0;a<t[i].length;a++)e+="---",a<t[i].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,i){var r=i(147);t.exports=function(t){return r(t,180)}},function(t,e,i){var r=i(147);t.exports=function(t){return r(t,90)}},function(t,e,i){var r=i(147);t.exports=function(t){return r(t,-90)}},function(t,e,i){var r=i(178),n=i(179);t.exports=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0!==i&&(i<0?r(t,Math.abs(i)):n(t,i)),0!==e)for(var s=0;s<t.length;s++){var o=t[s];e<0?r(o,Math.abs(e)):n(o,e)}return t}},function(t,e){t.exports=function(t,e,i,r,n){if(void 0===n&&(n=t),i>0){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),r&&r.call(n,e),e):null;for(var o=e.length-1;o>=0;)-1!==t.indexOf(e[o])&&e.splice(o,1),o--;if(0===(o=e.length))return null;i>0&&o>s&&(e.splice(s),o=s);for(var a=0;a<o;a++){var h=e[a];t.push(h),r&&r.call(n,h)}return e}},function(t,e){t.exports=function(t,e,i,r,n,s){if(void 0===i&&(i=0),void 0===s&&(s=t),r>0){var o=r-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),n&&n.call(s,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;r>0&&a>o&&(e.splice(o),a=o);for(var h=a-1;h>=0;h--){var c=e[h];t.splice(i,0,c),n&&n.call(s,c)}return e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var o=0;if(r(t,n,s))for(var a=n;a<s;a++)t[a][e]===i&&o++;return o}},function(t,e){t.exports=function(t,e,i){var r,n=[null];for(r=3;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<t.length;r++)n[0]=t[r],e.apply(i,n);return t}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),r(t,n,s)){var o,a=[null];for(o=5;o<arguments.length;o++)a.push(arguments[o]);for(o=n;o<s;o++)a[0]=t[o],e.apply(i,a)}return t}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);if(i>0){var r=t[i-1],n=t.indexOf(r);t[i]=r,t[n]=e}return t}},function(t,e){t.exports=function(t,e,i){var r=t.indexOf(e);if(-1===r||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return r!==i&&(t.splice(r,1),t.splice(i,0,e)),e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);if(-1!==i&&i<t.length-1){var r=t[i+1],n=t.indexOf(r);t[i]=r,t[n]=e}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var r=t.indexOf(e),n=t.indexOf(i);if(r<0||n<0)throw new Error("Supplied items must be elements of the same array");return r>n||(t.splice(r,1),n===t.length-1?t.push(e):t.splice(n,0,e)),t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var r=t.indexOf(e),n=t.indexOf(i);if(r<0||n<0)throw new Error("Supplied items must be elements of the same array");return r<n||(t.splice(r,1),0===n?t.unshift(e):t.splice(n,0,e)),t}},function(t,e,i){var r=i(363);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=1),null===e&&(e=t,t=0);for(var n=[],s=Math.max(r((e-t)/(i||1)),0),o=0;o<s;o++)n.push(t),t+=i;return n}},function(t,e,i){var r=i(74);t.exports=function(t,e,i,n){if(void 0===n&&(n=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var s=r(t,e);return i&&i.call(n,s),s}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===s&&(s=t),r(t,e,i)){var o=i-e,a=t.splice(e,o);if(n)for(var h=0;h<a.length;h++){var c=a[h];n.call(s,c)}return a}return[]}},function(t,e,i){var r=i(74);t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var n=e+Math.floor(Math.random()*i);return r(t,n)}},function(t,e){t.exports=function(t,e,i){var r=t.indexOf(e),n=t.indexOf(i);return-1!==r&&-1===n&&(t[r]=i,!0)}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i>0&&(t.splice(i,1),t.unshift(e)),e}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),r(t,n,s))for(var o=n;o<s;o++){var a=t[o];a.hasOwnProperty(e)&&(a[e]=i)}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var r=t.indexOf(e),n=t.indexOf(i);if(r<0||n<0)throw new Error("Supplied items must be elements of the same array");return t[r]=i,t[n]=e,t}},function(t,e,i){var r=i(0),n=i(211),s=i(24),o=i(20),a=new r({Extends:n,initialize:function(t){n.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.update,this),t.on(o.UPDATE,this.sceneUpdate,this),t.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,r=i.length,n=0;n<r;n++){var s=i[n];s.active&&s.preUpdate.call(s,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(o.PRE_UPDATE,this.update,this),e.off(o.UPDATE,this.sceneUpdate,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",a,"updateList"),t.exports=a},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e){t.exports=function(t,e,i,r){if(void 0===i&&(i=!1),void 0===r)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var n,s,o,a=t.text,h=a.length,c=t.maxWidth,l=t.wordWrapCharCode,u=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,p=0,g=t.fontData.chars,y=t.fontData.lineHeight,m=t.letterSpacing,v=0,b=0,w=0,_=null,x=t._align,E=0,S=0,T=t.fontSize/t.fontData.size,A=T*t.scaleX,C=T*t.scaleY,k=null,R=0,P=[],I=Number.MAX_VALUE,O=0,M=0,D=0,B=[],L=[],N=null;if(c>0){for(n=0;n<h;n++)if(10!==(w=a.charCodeAt(n))){if(_=g[w]){if(null!==k)var U=_.kerning[R];w===l?null!==N&&(B.push({word:N.word,i:N.i,x:N.x*A,y:N.y*C,w:N.w*A,h:N.h*C,cr:!1}),N=null):(null===N&&(N={word:"",i:n,x:v,y:b,w:0,h:y,cr:!1}),N.word=N.word.concat(a[n]),N.w+=_.xOffset+_.xAdvance+(void 0!==U?U:0)),v+=_.xAdvance+m,k=_,R=w}}else null!==N&&(B.push({word:N.word,i:N.i,x:N.x*A,y:N.y*C,w:N.w*A,h:N.h*C,cr:!0}),N=null),v=0,b+=y,k=null;var F;null!==N&&B.push({word:N.word,i:N.i,x:N.x*A,y:N.y*C,w:N.w*A,h:N.h*C,cr:!1}),v=0,b=0,k=null,R=0;var z=0,j=[];for(n=0;n<B.length;n++){var V=B[n],G=V.x,H=V.x+V.w;F&&(z=G-(G-(F.x+F.w)+F.w),F=null),G-z>c||H-z>c?(j.push(V.i-1),V.cr?(j.push(V.i+V.word.length),z=0,F=null):F=V):V.cr&&(j.push(V.i+V.word.length),z=0,F=null)}for(n=j.length-1;n>=0;n--)s=a,o=j[n],"\n",a=s.substr(0,o)+"\n"+s.substr(o+1);r.wrappedText=a,h=a.length,B=[],N=null}var Y=0;for(n=0;n<h;n++)if(10!==(w=a.charCodeAt(n))){if(_=g[w]){if(E=v,S=b,null!==k){var K=_.kerning[R];E+=void 0!==K?K:0}u>E&&(u=E),d>S&&(d=S);var W=E+_.xAdvance,X=S+y;f<W&&(f=W),p<X&&(p=X);var q=_.xOffset+_.xAdvance+(void 0!==K?K:0);w===l?null!==N&&(B.push({word:N.word,i:N.i,x:N.x*A,y:N.y*C,w:N.w*A,h:N.h*C}),N=null):(null===N&&(N={word:"",i:Y,x:v,y:b,w:0,h:y}),N.word=N.word.concat(a[n]),N.w+=q),L.push({i:Y,char:a[n],code:w,x:(_.xOffset+v)*T,y:(_.yOffset+b)*T,w:_.width*T,h:_.height*T,t:b*T,r:W*T,b:y*T,line:M,glyph:_}),v+=_.xAdvance+m,k=_,R=w,D=W*T,Y++}}else null!==N&&(B.push({word:N.word,i:N.i,x:N.x*A,y:N.y*C,w:N.w*A,h:N.h*C}),N=null),v=0,b+=y,k=null,P[M]=D,D>O&&(O=D),D<I&&(I=D),M++,D=0;if(null!==N&&B.push({word:N.word,i:N.i,x:N.x*A,y:N.y*C,w:N.w*A,h:N.h*C}),P[M]=D,D>O&&(O=D),D<I&&(I=D),x>0)for(var $=0;$<L.length;$++){var J=L[$];if(1===x){var Z=(O-P[J.line])/2;J.x+=Z,J.r+=Z}else if(2===x){var Q=O-P[J.line];J.x+=Q,J.r+=Q}}var tt=r.local,et=r.global,it=r.lines;return tt.x=u*T,tt.y=d*T,tt.width=f*T,tt.height=p*T,et.x=t.x-t._displayOriginX+u*A,et.y=t.y-t._displayOriginY+d*C,et.width=f*A,et.height=p*C,it.shortest=I,it.longest=O,it.lengths=P,e&&(tt.x=Math.ceil(tt.x),tt.y=Math.ceil(tt.y),tt.width=Math.ceil(tt.width),tt.height=Math.ceil(tt.height),et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),it.shortest=Math.ceil(I),it.longest=Math.ceil(O)),i&&(t._displayOriginX=t.originX*tt.width,t._displayOriginY=t.originY*tt.height,et.x=t.x-t._displayOriginX*t.scaleX,et.y=t.y-t._displayOriginY*t.scaleY,e&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y))),r.words=B,r.characters=L,r.lines.height=y,r.scale=T,r.scaleX=t.scaleX,r.scaleY=t.scaleY,r}},function(t,e,i){var r=i(212);t.exports=function(t,e,i,n,s,o,a){var h=t.sys.textures.get(i),c=h.get(n),l=t.sys.cache.xml.get(s);if(c&&l){var u=r(l,c,o,a,h);return t.sys.cache.bitmapFont.add(e,{data:u,texture:i,frame:n,fromAtlas:!0}),!0}return!1}},function(t,e,i){var r=i(1),n=i(1);r=i(1046),n=i(1048),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(1047),n=i(19),s=i(12);t.exports=function(t,e,i,o){if(0!==e._text.length){i.addToRenderList(e);var a,h,c,l=t.pipelines.set(e.pipeline,e),u=n(e,i,o).calc,d=i.roundPixels,f=i.alpha,p=e.charColors,g=e.tintFill,y=s.getTintAppendFloatAlpha,m=y(e.tintTopLeft,f*e._alphaTL),v=y(e.tintTopRight,f*e._alphaTR),b=y(e.tintBottomLeft,f*e._alphaBL),w=y(e.tintBottomRight,f*e._alphaBR),_=e.frame.glTexture,x=l.setGameObject(e),E=e.getTextBounds(!1).characters,S=e.dropShadowX,T=e.dropShadowY,A=0!==S||0!==T;if(t.pipelines.preBatch(e),A){var C=e.dropShadowColor,k=e.dropShadowAlpha,R=y(C,f*k*e._alphaTL),P=y(C,f*k*e._alphaTR),I=y(C,f*k*e._alphaBL),O=y(C,f*k*e._alphaBR);for(a=0;a<E.length;a++)c=(h=E[a]).glyph,32!==h.code&&0!==c.width&&0!==c.height&&r(l,e,h,c,S,T,u,d,R,P,I,O,1,_,x)}for(a=0;a<E.length;a++)if(c=(h=E[a]).glyph,32!==h.code&&0!==c.width&&0!==c.height)if(p[h.i]){var M=p[h.i],D=M.tintEffect,B=y(M.tintTL,f*e._alphaTL),L=y(M.tintTR,f*e._alphaTR),N=y(M.tintBL,f*e._alphaBL),U=y(M.tintBR,f*e._alphaBR);r(l,e,h,c,0,0,u,d,B,L,N,U,D,_,x)}else r(l,e,h,c,0,0,u,d,m,v,b,w,g,_,x);t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r,n,s,o,a,h,c,l,u,d,f,p){var g=i.x-e.displayOriginX+n,y=i.y-e.displayOriginY+s,m=g+i.w,v=y+i.h,b=o.getXRound(g,y,a),w=o.getYRound(g,y,a),_=o.getXRound(g,v,a),x=o.getYRound(g,v,a),E=o.getXRound(m,v,a),S=o.getYRound(m,v,a),T=o.getXRound(m,y,a),A=o.getYRound(m,y,a);t.batchQuad(e,b,w,_,x,E,S,T,A,r.u0,r.v0,r.u1,r.v1,h,c,l,u,d,f,p)}},function(t,e,i){var r=i(30);t.exports=function(t,e,i,n){var s=e._text,o=s.length,a=t.currentContext;if(0!==o&&r(t,a,e,i,n)){i.addToRenderList(e);var h=e.fromAtlas?e.frame:e.texture.frames.__BASE,c=e.fontData.chars,l=e.fontData.lineHeight,u=e._letterSpacing,d=0,f=0,p=0,g=null,y=0,m=0,v=0,b=0,w=0,_=0,x=null,E=0,S=h.source.image,T=h.cutX,A=h.cutY,C=e._fontSize/e.fontData.size,k=e._align,R=0,P=0,I=e.getTextBounds(!1);e.maxWidth>0&&(o=(s=I.wrappedText).length);var O=e._bounds.lines;1===k?P=(O.longest-O.lengths[0])/2:2===k&&(P=O.longest-O.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);for(var M=i.roundPixels,D=0;D<o;D++)if(10!==(p=s.charCodeAt(D))){if(g=c[p]){if(y=T+g.x,m=A+g.y,v=g.width,b=g.height,w=g.xOffset+d,_=g.yOffset+f,null!==x){var B=g.kerning[E];w+=void 0!==B?B:0}w*=C,_*=C,w+=P,d+=g.xAdvance+u,x=g,E=p,0!==v&&0!==b&&32!==p&&(M&&(w=Math.round(w),_=Math.round(_)),a.save(),a.translate(w,_),a.scale(C,C),a.drawImage(S,y,m,v,b,0,0,v,b),a.restore())}}else R++,1===k?P=(O.longest-O.lengths[R])/2:2===k&&(P=O.longest-O.lengths[R]),d=0,f+=l,x=null;a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1050),n=i(1051),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(25),n=i(12),s=new r;t.exports=function(t,e,i,r){var o=e.getRenderList();if(0!==o.length){var a=i.alpha*e.alpha;if(0!==a){i.addToRenderList(e);var h=t.pipelines.set(this.pipeline,e),c=i.scrollX*e.scrollFactorX,l=i.scrollY*e.scrollFactorY,u=s.copyFrom(i.matrix);r&&(u.multiplyWithOffset(r,-c,-l),c=0,l=0);var d=e.x-c,f=e.y-l,p=-1,g=i.roundPixels;t.pipelines.preBatch(e);for(var y=0;y<o.length;y++){var m=o[y],v=m.frame,b=m.alpha*a;if(0!==b){var w=v.width,_=v.height,x=d+m.x+v.x,E=f+m.y+v.y;m.flipX&&(w*=-1,x+=v.width),m.flipY&&(_*=-1,E+=v.height);var S=x+w,T=E+_,A=u.getX(x,E),C=u.getY(x,E),k=u.getX(S,T),R=u.getY(S,T),P=n.getTintAppendFloatAlpha(m.tint,b);if(v.sourceIndex!==p){var I=h.setGameObject(e,v);p=v.sourceIndex}g&&(A=Math.round(A),C=Math.round(C),k=Math.round(k),R=Math.round(R)),h.batchQuad(e,A,C,A,R,k,R,k,C,v.u0,v.v0,v.u1,v.v1,P,P,P,P,!1,v.glTexture,I)&&(p=-1)}}t.pipelines.postBatch(e)}}}},function(t,e){t.exports=function(t,e,i,r){var n=e.getRenderList();if(0!==n.length){var s=t.currentContext,o=i.alpha*e.alpha;if(0!==o){i.addToRenderList(e),s.globalCompositeOperation=t.blendModes[e.blendMode],s.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var a=e.x-i.scrollX*e.scrollFactorX,h=e.y-i.scrollY*e.scrollFactorY;s.save(),r&&r.copyToContext(s);for(var c=i.roundPixels,l=0;l<n.length;l++){var u=n[l],d=u.flipX||u.flipY,f=u.frame,p=f.canvasData,g=f.x,y=f.y,m=1,v=1,b=u.alpha*o;0!==b&&(s.globalAlpha=b,d?(u.flipX&&(m=-1,g-=p.width),u.flipY&&(v=-1,y-=p.height),s.save(),s.translate(u.x+a,u.y+h),s.scale(m,v),s.drawImage(f.source.image,p.x,p.y,p.width,p.height,g,y,p.width,p.height),s.restore()):(c&&(g=Math.round(g),y=Math.round(y)),s.drawImage(f.source.image,p.x,p.y,p.width,p.height,g+u.x+a,y+u.y+h,p.width,p.height)))}s.restore()}}}},function(t,e,i){var r=i(1),n=i(1);r=i(1053),n=i(1054),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e);var n=e.list,s=n.length;if(0!==s){var o=e.localTransform;r?(o.loadIdentity(),o.multiply(r),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var h=e.alpha,c=e.scrollFactorX,l=e.scrollFactorY,u=0;u<s;u++){var d=n[u];if(d.willRender(i)){var f,p,g,y;if(void 0!==d.alphaTopLeft)f=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,y=d.alphaBottomRight;else{var m=d.alpha;f=m,p=m,g=m,y=m}var v=d.scrollFactorX,b=d.scrollFactorY;a||d.blendMode===t.currentBlendMode||t.setBlendMode(d.blendMode);var w=d.mask;w&&w.preRenderWebGL(t,d,i);var _=d.type;_!==t.currentType&&(t.newType=!0,t.currentType=_),t.nextTypeMatch=u<s-1&&n[u+1].type===t.currentType,d.setScrollFactor(v*c,b*l),d.setAlpha(f*h,p*h,g*h,y*h),d.renderWebGL(t,d,i,o),d.setAlpha(f,p,g,y),d.setScrollFactor(v,b),w&&w.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e);var n=e.list;if(0!==n.length){var s=e.localTransform;r?(s.loadIdentity(),s.multiply(r),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var o=-1!==e.blendMode;o||t.setBlendMode(0);var a=e._alpha,h=e.scrollFactorX,c=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var l=0;l<n.length;l++){var u=n[l];if(u.willRender(i)){var d=u.alpha,f=u.scrollFactorX,p=u.scrollFactorY;o||u.blendMode===t.currentBlendMode||t.setBlendMode(u.blendMode),u.setScrollFactor(f*h,p*c),u.setAlpha(d*a),u.renderCanvas(t,u,i,s),u.setAlpha(d),u.setScrollFactor(f,p)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){var r=i(1),n=i(1);r=i(443),n=i(443),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,e,i){var r=i(1),n=i(1);r=i(1058),n=i(1059),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(25),s=i(12),o=new n;t.exports=function(t,e,i,n){var a=e.text,h=a.length;if(0!==h){i.addToRenderList(e);var c=t.pipelines.set(e.pipeline,e),l=r(e,i,n),u=l.sprite,d=l.calc,f=o,p=e.cropWidth>0||e.cropHeight>0;p&&(c.flush(),t.pushScissor(d.tx,d.ty,e.cropWidth*d.scaleX,e.cropHeight*d.scaleY));var g,y,m=e.frame.glTexture,v=e.tintFill,b=s.getTintAppendFloatAlpha(e.tintTopLeft,i.alpha*e._alphaTL),w=s.getTintAppendFloatAlpha(e.tintTopRight,i.alpha*e._alphaTR),_=s.getTintAppendFloatAlpha(e.tintBottomLeft,i.alpha*e._alphaBL),x=s.getTintAppendFloatAlpha(e.tintBottomRight,i.alpha*e._alphaBR),E=c.setGameObject(e),S=0,T=0,A=0,C=0,k=e.letterSpacing,R=0,P=0,I=e.scrollX,O=e.scrollY,M=e.fontData,D=M.chars,B=M.lineHeight,L=e.fontSize/M.size,N=0,U=e._align,F=0,z=0,j=e.getTextBounds(!1);e.maxWidth>0&&(h=(a=j.wrappedText).length);var V=e._bounds.lines;1===U?z=(V.longest-V.lengths[0])/2:2===U&&(z=V.longest-V.lengths[0]);var G=i.roundPixels,H=e.displayCallback,Y=e.callbackData;t.pipelines.preBatch(e);for(var K=0;K<h;K++)if(10!==(A=a.charCodeAt(K))){if(g=D[A]){R=g.width,P=g.height;var W=g.xOffset+S-I,X=g.yOffset+T-O;if(null!==y){var q=g.kerning[C];W+=void 0!==q?q:0}if(S+=g.xAdvance+k,y=g,C=A,0!==R&&0!==P&&32!==A){if(L=e.fontSize/e.fontData.size,N=0,H){Y.color=0,Y.tint.topLeft=b,Y.tint.topRight=w,Y.tint.bottomLeft=_,Y.tint.bottomRight=x,Y.index=K,Y.charCode=A,Y.x=W,Y.y=X,Y.scale=L,Y.rotation=N,Y.data=g.data;var $=H(Y);W=$.x,X=$.y,L=$.scale,N=$.rotation,$.color?(b=$.color,w=$.color,_=$.color,x=$.color):(b=$.tint.topLeft,w=$.tint.topRight,_=$.tint.bottomLeft,x=$.tint.bottomRight),b=s.getTintAppendFloatAlpha(b,i.alpha*e._alphaTL),w=s.getTintAppendFloatAlpha(w,i.alpha*e._alphaTR),_=s.getTintAppendFloatAlpha(_,i.alpha*e._alphaBL),x=s.getTintAppendFloatAlpha(x,i.alpha*e._alphaBR)}W*=L,X*=L,W-=e.displayOriginX,X-=e.displayOriginY,W+=z,f.applyITRS(W,X,N,L,L),d.multiply(f,u);var J=g.u0,Z=g.v0,Q=g.u1,tt=g.v1,et=R,it=P,rt=u.e,nt=u.f,st=it*u.c+u.e,ot=it*u.d+u.f,at=et*u.a+it*u.c+u.e,ht=et*u.b+it*u.d+u.f,ct=et*u.a+u.e,lt=et*u.b+u.f;G&&(rt=Math.round(rt),nt=Math.round(nt),st=Math.round(st),ot=Math.round(ot),at=Math.round(at),ht=Math.round(ht),ct=Math.round(ct),lt=Math.round(lt)),c.batchQuad(e,rt,nt,st,ot,at,ht,ct,lt,J,Z,Q,tt,b,w,_,x,v,m,E)}}}else F++,1===U?z=(V.longest-V.lengths[F])/2:2===U&&(z=V.longest-V.lengths[F]),S=0,T+=B,y=null;p&&(c.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(30);t.exports=function(t,e,i,n){var s=e._text,o=s.length,a=t.currentContext;if(0!==o&&r(t,a,e,i,n)){i.addToRenderList(e);var h=e.fromAtlas?e.frame:e.texture.frames.__BASE,c=e.displayCallback,l=e.callbackData,u=e.fontData.chars,d=e.fontData.lineHeight,f=e._letterSpacing,p=0,g=0,y=0,m=null,v=0,b=0,w=0,_=0,x=0,E=0,S=null,T=0,A=e.frame.source.image,C=h.cutX,k=h.cutY,R=0,P=0,I=e._fontSize/e.fontData.size,O=e._align,M=0,D=0;e.getTextBounds(!1);var B=e._bounds.lines;1===O?D=(B.longest-B.lengths[0])/2:2===O&&(D=B.longest-B.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);var L=i.roundPixels;e.cropWidth>0&&e.cropHeight>0&&(a.beginPath(),a.rect(0,0,e.cropWidth,e.cropHeight),a.clip());for(var N=0;N<o;N++)if(P=I,R=0,10!==(y=s.charCodeAt(N))){if(m=u[y]){if(v=C+m.x,b=k+m.y,w=m.width,_=m.height,x=m.xOffset+p-e.scrollX,E=m.yOffset+g-e.scrollY,null!==S){var U=m.kerning[T];x+=void 0!==U?U:0}if(c){l.index=N,l.charCode=y,l.x=x,l.y=E,l.scale=P,l.rotation=R,l.data=m.data;var F=c(l);x=F.x,E=F.y,P=F.scale,R=F.rotation}x*=P,E*=P,x+=D,p+=m.xAdvance+f,S=m,T=y,0!==w&&0!==_&&32!==y&&(L&&(x=Math.round(x),E=Math.round(E)),a.save(),a.translate(x,E),a.rotate(R),a.scale(P,P),a.drawImage(A,v,b,w,_,0,0,w,_),a.restore())}}else M++,1===O?D=(B.longest-B.lengths[M])/2:2===O&&(D=B.longest-B.lengths[M]),p=0,g+=d,S=null;a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1061),n=i(1062),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){t.pipelines.clear();var s=r(e,i,n).calc;e.render.call(e,t,i,s),t.pipelines.rebind()}},function(t,e){},function(t,e,i){var r=i(1),n=i(1);r=i(1064),i(448),n=i(448),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(217),n=i(19),s=i(25),o=i(12),a=function(t,e,i){this.x=t,this.y=e,this.width=i},h=function(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new a(t,e,i)},c=[],l=new s;t.exports=function(t,e,i,s){if(0!==e.commandBuffer.length){i.addToRenderList(e);var u=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var d=n(e,i,s).calc,f=l.loadIdentity(),p=e.commandBuffer,g=i.alpha*e.alpha,y=1,m=u.fillTint,v=u.strokeTint,b=0,w=0,_=0,x=2*Math.PI,E=[],S=0,T=!0,A=null,C=o.getTintAppendFloatAlpha,k=0;k<p.length;k++)switch(p[k]){case r.BEGIN_PATH:E.length=0,A=null,T=!0;break;case r.CLOSE_PATH:T=!1,A&&A.points.length&&A.points.push(A.points[0]);break;case r.FILL_PATH:for(S=0;S<E.length;S++)u.batchFillPath(E[S].points,f,d);break;case r.STROKE_PATH:for(S=0;S<E.length;S++)u.batchStrokePath(E[S].points,y,T,f,d);break;case r.LINE_STYLE:y=p[++k];var R=C(p[++k],p[++k]*g);v.TL=R,v.TR=R,v.BL=R,v.BR=R;break;case r.FILL_STYLE:var P=C(p[++k],p[++k]*g);m.TL=P,m.TR=P,m.BL=P,m.BR=P;break;case r.GRADIENT_FILL_STYLE:var I=p[++k]*g,O=p[++k]*g,M=p[++k]*g,D=p[++k]*g;m.TL=C(p[++k],I),m.TR=C(p[++k],O),m.BL=C(p[++k],M),m.BR=C(p[++k],D);break;case r.GRADIENT_LINE_STYLE:y=p[++k];var B=p[++k]*g;v.TL=C(p[++k],B),v.TR=C(p[++k],B),v.BL=C(p[++k],B),v.BR=C(p[++k],B);break;case r.ARC:var L=0,N=p[++k],U=p[++k],F=p[++k],z=p[++k],j=p[++k],V=p[++k],G=p[++k];for(j-=z,V?j<-x?j=-x:j>0&&(j=j%x-x):j>x?j=x:j<0&&(j=x+j%x),null===A&&(A=new h(N+Math.cos(z)*F,U+Math.sin(z)*F,y),E.push(A),L+=.01);L<1+G;)_=j*L+z,b=N+Math.cos(_)*F,w=U+Math.sin(_)*F,A.points.push(new a(b,w,y)),L+=.01;_=j+z,b=N+Math.cos(_)*F,w=U+Math.sin(_)*F,A.points.push(new a(b,w,y));break;case r.FILL_RECT:u.batchFillRect(p[++k],p[++k],p[++k],p[++k],f,d);break;case r.FILL_TRIANGLE:u.batchFillTriangle(p[++k],p[++k],p[++k],p[++k],p[++k],p[++k],f,d);break;case r.STROKE_TRIANGLE:u.batchStrokeTriangle(p[++k],p[++k],p[++k],p[++k],p[++k],p[++k],y,f,d);break;case r.LINE_TO:null!==A?A.points.push(new a(p[++k],p[++k],y)):(A=new h(p[++k],p[++k],y),E.push(A));break;case r.MOVE_TO:A=new h(p[++k],p[++k],y),E.push(A);break;case r.SAVE:c.push(f.copyToArray());break;case r.RESTORE:f.copyFromArray(c.pop());break;case r.TRANSLATE:N=p[++k],U=p[++k],f.translate(N,U);break;case r.SCALE:N=p[++k],U=p[++k],f.scale(N,U);break;case r.ROTATE:f.rotate(p[++k])}t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(1),n=i(1);r=i(1066),n=i(1067),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),e.pipeline.batchSprite(e,i,r)}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1),n=i(1);r=i(1069),n=i(1070),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),this.pipeline.batchSprite(e,i,r)}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1),n=i(1);r=i(1072),n=i(1073),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i){var r=e.list,n=r.length;if(0!==n){e.depthSort(),t.pipelines.preBatch(e);var s=-1!==e.blendMode;s||t.setBlendMode(0);for(var o=e.alpha,a=0;a<n;a++){var h=r[a];if(h.willRender(i)){var c,l,u,d;if(void 0!==h.alphaTopLeft)c=h.alphaTopLeft,l=h.alphaTopRight,u=h.alphaBottomLeft,d=h.alphaBottomRight;else{var f=h.alpha;c=f,l=f,u=f,d=f}s||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode);var p=h.mask;p&&p.preRenderWebGL(t,h,i);var g=h.type;g!==t.currentType&&(t.newType=!0,t.currentType=g),t.nextTypeMatch=a<n-1&&r[a+1].type===t.currentType,h.setAlpha(c*o,l*o,u*o,d*o),h.renderWebGL(t,h,i),h.setAlpha(c,l,u,d),p&&p.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i){var r=e.list;if(0!==r.length){e.depthSort();var n=-1!==e.blendMode;n||t.setBlendMode(0);var s=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var o=0;o<r.length;o++){var a=r[o];if(a.willRender(i)){var h=a.alpha;n||a.blendMode===t.currentBlendMode||t.setBlendMode(a.blendMode),a.setAlpha(h*s),a.renderCanvas(t,a,i),a.setAlpha(h)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){t.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(t,e,i){var r=i(1),n=i(1);r=i(1076),n=i(1077),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(25),n=i(12),s=new r,o=new r,a=new r,h=new r;t.exports=function(t,e,i,r){var c=e.emitters.list,l=c.length;if(0!==l){var u=t.pipelines.set(e.pipeline),d=s,f=o,p=a,g=h;r?(g.loadIdentity(),g.multiply(r),g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(e.scaleX,e.scaleY)):g.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var y=i.roundPixels,m=e.defaultFrame.glTexture,v=n.getTintAppendFloatAlpha,b=u.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var w=0;w<l;w++){var _=c[w],x=_.alive,E=x.length;if(_.visible&&0!==E){i.addToRenderList(_);var S=_.scrollFactorX,T=_.scrollFactorY;t.setBlendMode(_.blendMode),_.mask&&(_.mask.preRenderWebGL(t,_,i),t.pipelines.set(e.pipeline));for(var A=0;A<E;A++){var C=x[A],k=C.alpha*i.alpha;if(!(k<=0)){p.applyITRS(C.x,C.y,C.rotation,C.scaleX,C.scaleY),d.copyFrom(i.matrix),d.multiplyWithOffset(g,-i.scrollX*S,-i.scrollY*T),p.e=C.x,p.f=C.y,d.multiply(p,f);var R=C.frame,P=-R.halfWidth,I=-R.halfHeight,O=P+R.width,M=I+R.height,D=f.getXRound(P,I,y),B=f.getYRound(P,I,y),L=f.getXRound(P,M,y),N=f.getYRound(P,M,y),U=f.getXRound(O,M,y),F=f.getYRound(O,M,y),z=f.getXRound(O,I,y),j=f.getYRound(O,I,y),V=v(C.tint,k);u.batchQuad(_,D,B,L,N,U,F,z,j,R.u0,R.v0,R.u1,R.v1,V,V,V,V,0,m,b)}}_.mask&&_.mask.postRenderWebGL(t,i)}}t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(25),n=new r,s=new r,o=new r,a=new r;t.exports=function(t,e,i,r){var h=e.emitters.list,c=h.length;if(0!==c){var l=n.copyFrom(i.matrix),u=s,d=o,f=a;r?(f.loadIdentity(),f.multiply(r),f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(e.scaleX,e.scaleY)):f.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var p=t.currentContext,g=i.roundPixels,y=0;y<c;y++){var m=h[y],v=m.alive,b=v.length;if(m.visible&&0!==b){i.addToRenderList(m);var w=m.scrollFactorX,_=m.scrollFactorY;p.save(),p.globalCompositeOperation=t.blendModes[m.blendMode];for(var x=0;x<b;x++){var E=v[x],S=E.alpha*i.alpha;if(!(S<=0)){d.applyITRS(E.x,E.y,E.rotation,E.scaleX,E.scaleY),l.copyFrom(i.matrix),l.multiplyWithOffset(f,-i.scrollX*w,-i.scrollY*_),d.e=E.x,d.f=E.y,l.multiply(d,u);var T=E.frame,A=T.canvasData,C=-T.halfWidth,k=-T.halfHeight;p.globalAlpha=S,p.save(),u.setToContext(p),g&&(C=Math.round(C),k=Math.round(k)),p.imageSmoothingEnabled=!(!t.antialias||T.source.scaleMode),p.drawImage(T.source.image,A.x,A.y,A.width,A.height,C,k,A.width,A.height),p.restore()}}p.restore()}}}}},function(t,e,i){t.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(t,e,i){var r=i(1),n=i(1);r=i(1080),n=i(1081),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n){i.addToRenderList(e);var s=i.alpha,o=e.renderTarget,a=o.width,h=o.height,c=r.getTintAppendFloatAlpha,l=t.pipelines.set(e.pipeline),u=l.setTexture2D(o.texture);t.pipelines.preBatch(e),l.batchTexture(e,o.texture,a,h,e.x,e.y,a,h,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,h,c(e.tintTopLeft,s*e._alphaTL),c(e.tintTopRight,s*e._alphaTR),c(e.tintBottomLeft,s*e._alphaBL),c(e.tintBottomRight,s*e._alphaBR),e.tintFill,0,0,i,n,!0,u),t.resetTextures(),t.pipelines.postBatch(e)}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1083),n=i(17),s={Parse:i(1084)};s=n(!1,s,r),t.exports=s},function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,e,i){var r=i(6);t.exports=function(t,e){var i=e.width,n=e.height,s=Math.floor(i/2),o=Math.floor(n/2),a=r(e,"chars","");if(""!==a){var h=r(e,"image",""),c=t.sys.textures.getFrame(h),l=c.cutX,u=c.cutY,d=c.source.width,f=c.source.height,p=r(e,"offset.x",0),g=r(e,"offset.y",0),y=r(e,"spacing.x",0),m=r(e,"spacing.y",0),v=r(e,"lineSpacing",0),b=r(e,"charsPerRow",null);null===b&&(b=d/i)>a.length&&(b=a.length);for(var w=p,_=g,x={retroFont:!0,font:h,size:i,lineHeight:n+v,chars:{}},E=0,S=0;S<a.length;S++){var T=a.charCodeAt(S),A=(l+w)/d,C=(u+_)/f,k=(l+w+i)/d,R=(u+_+n)/f;x.chars[T]={x:w,y:_,width:i,height:n,centerX:s,centerY:o,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:A,v0:C,u1:k,v1:R},++E===b?(E=0,w=p,_+=n+m):w+=i+y}return{data:x,frame:null,texture:h}}}},function(t,e,i){var r=i(1),n=i(1);r=i(1086),n=i(1087),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline,e),a=r(e,i,s).calc,h=e.vertices,c=e.uv,l=e.colors,u=e.alphas,d=e.alpha,f=n.getTintAppendFloatAlpha,p=i.roundPixels,g=h.length,y=Math.floor(.5*g);o.flush(),t.pipelines.preBatch(e);var m=o.setGameObject(e),v=o.vertexViewF32,b=o.vertexViewU32,w=o.vertexCount*o.currentShader.vertexComponentCount-1,_=0,x=e.tintFill;e.dirty&&e.updateVertices();for(var E=e.debugCallback,S=[],T=0;T<g;T+=2){var A=h[T+0],C=h[T+1],k=A*a.a+C*a.c+a.e,R=A*a.b+C*a.d+a.f;p&&(k=Math.round(k),R=Math.round(R)),v[++w]=k,v[++w]=R,v[++w]=c[T+0],v[++w]=c[T+1],v[++w]=m,v[++w]=x,b[++w]=f(l[_],i.alpha*(u[_]*d)),_++,E&&(S[T+0]=k,S[T+1]=R)}E&&E.call(e,e,g,S),o.vertexCount+=y,t.pipelines.postBatch(e)}},function(t,e){t.exports=function(){}},function(t,e,i){var r=i(1),n=i(1);r=i(1089),n=i(1090),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var s=e.frame,o=s.width,a=s.height,h=r.getTintAppendFloatAlpha,c=t.pipelines.set(e.pipeline,e),l=c.setTexture2D(s.glTexture,e);t.pipelines.preBatch(e),c.batchTexture(e,s.glTexture,o,a,e.x,e.y,o/e.style.resolution,a/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,a,h(e.tintTopLeft,i.alpha*e._alphaTL),h(e.tintTopRight,i.alpha*e._alphaTR),h(e.tintBottomLeft,i.alpha*e._alphaBL),h(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,n,!1,l),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},function(t,e,i){var r=i(1),n=i(1);r=i(1092),n=i(1093),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n){e.updateCanvas();var s=e.width,o=e.height;if(0!==s&&0!==o){i.addToRenderList(e),t.pipelines.preBatch(e);var a=r.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),c=h.setTexture2D(e.fillPattern,e);h.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,s,o,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*s,e.originY*o,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,n,!1,c),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1),n=i(1);r=i(1095),n=i(1096),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){e.videoTexture&&(i.addToRenderList(e),e.pipeline.batchSprite(e,i,r))}},function(t,e){t.exports=function(t,e,i,r){e.videoTexture&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},function(t,e,i){var r=i(1),n=i(1);r=i(1098),n=i(1099),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(114),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=r(e,i,o),c=a.calcMatrix.copyFrom(h.calc),l=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(a,c,e,d,l,u),e.isStroked&&s(a,e,d,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(36),n=i(48),s=i(60),o=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(o(t,h,e,i,a)){var c=e.radius;h.beginPath(),h.arc(c-e.originX*(2*c),c-e.originY*(2*c),c,r(e._startAngle),r(e._endAngle),e.anticlockwise),e.closePath&&h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(s(h,e),h.stroke()),h.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1101),n=i(1102),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),c=a.calcMatrix.copyFrom(h.calc),l=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,d,l,u),e.isStroked&&s(a,e,d,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX+e._curveBounds.x,c=e._displayOriginY+e._curveBounds.y,l=e.pathData,u=l.length-1,d=l[0]-h,f=l[1]-c;a.beginPath(),a.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=l[p]-h,y=l[p+1]-c;a.lineTo(g,y)}e.closePath&&a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1104),n=i(1105),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),c=a.calcMatrix.copyFrom(h.calc),l=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,d,l,u),e.isStroked&&s(a,e,d,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,c=e._displayOriginY,l=e.pathData,u=l.length-1,d=l[0]-h,f=l[1]-c;a.beginPath(),a.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=l[p]-h,y=l[p+1]-c;a.lineTo(g,y)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1107),n=i(1108),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),a=r(e,i,s);o.calcMatrix.copyFrom(a.calc).translate(-e._displayOriginX,-e._displayOriginY);var h,c,l=i.alpha*e.alpha,u=e.width,d=e.height,f=e.cellWidth,p=e.cellHeight,g=Math.ceil(u/f),y=Math.ceil(d/p),m=f,v=p,b=f-(g*f-u),w=p-(y*p-d),_=e.showCells,x=e.showAltCells,E=e.showOutline,S=0,T=0,A=0,C=0,k=0;if(E&&(m--,v--,b===f&&b--,w===p&&w--),t.pipelines.preBatch(e),_&&e.fillAlpha>0)for(h=o.fillTint,c=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*l),h.TL=c,h.TR=c,h.BL=c,h.BR=c,T=0;T<y;T++)for(x&&(A=T%2),S=0;S<g;S++)x&&A?A=0:(A++,C=S<g-1?m:b,k=T<y-1?v:w,o.batchFillRect(S*f,T*p,C,k));if(x&&e.altFillAlpha>0)for(h=o.fillTint,c=n.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*l),h.TL=c,h.TR=c,h.BL=c,h.BR=c,T=0;T<y;T++)for(x&&(A=T%2),S=0;S<g;S++)!x||A?(A=0,C=S<g-1?m:b,k=T<y-1?v:w,o.batchFillRect(S*f,T*p,C,k)):A=1;if(E&&e.outlineFillAlpha>0){var R=o.strokeTint,P=n.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*l);for(R.TL=P,R.TR=P,R.BL=P,R.BR=P,S=1;S<g;S++){var I=S*f;o.batchLine(I,0,I,d,1,1,1,0,!1)}for(T=1;T<y;T++){var O=T*p;o.batchLine(0,O,u,O,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=-e._displayOriginX,c=-e._displayOriginY,l=i.alpha*e.alpha,u=e.width,d=e.height,f=e.cellWidth,p=e.cellHeight,g=Math.ceil(u/f),y=Math.ceil(d/p),m=f,v=p,b=f-(g*f-u),w=p-(y*p-d),_=e.showCells,x=e.showAltCells,E=e.showOutline,S=0,T=0,A=0,C=0,k=0;if(E&&(m--,v--,b===f&&b--,w===p&&w--),_&&e.fillAlpha>0)for(r(a,e),T=0;T<y;T++)for(x&&(A=T%2),S=0;S<g;S++)x&&A?A=0:(A++,C=S<g-1?m:b,k=T<y-1?v:w,a.fillRect(h+S*f,c+T*p,C,k));if(x&&e.altFillAlpha>0)for(r(a,e,e.altFillColor,e.altFillAlpha*l),T=0;T<y;T++)for(x&&(A=T%2),S=0;S<g;S++)!x||A?(A=0,C=S<g-1?m:b,k=T<y-1?v:w,a.fillRect(h+S*f,c+T*p,C,k)):A=1;if(E&&e.outlineFillAlpha>0){for(n(a,e,e.outlineFillColor,e.outlineFillAlpha*l),S=1;S<g;S++){var R=S*f;a.beginPath(),a.moveTo(R+h,c),a.lineTo(R+h,d+c),a.stroke()}for(T=1;T<y;T++){var P=T*p;a.beginPath(),a.moveTo(h,P+c),a.lineTo(h+u,P+c),a.stroke()}}a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1110),n=i(1111),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o,a,h,c,l,u,d,f,p,g=t.pipelines.set(e.pipeline),y=r(e,i,s),m=g.calcMatrix.copyFrom(y.calc),v=e.width,b=e.height,w=v/2,_=v/e.projection,x=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(o=n.getTintAppendFloatAlpha(e.fillTop,x),a=m.getX(-w,-b),h=m.getY(-w,-b),c=m.getX(0,-_-b),l=m.getY(0,-_-b),u=m.getX(w,-b),d=m.getY(w,-b),f=m.getX(0,_-b),p=m.getY(0,_-b),g.batchQuad(e,a,h,c,l,u,d,f,p,0,0,1,1,o,o,o,o,2)),e.showLeft&&(o=n.getTintAppendFloatAlpha(e.fillLeft,x),a=m.getX(-w,0),h=m.getY(-w,0),c=m.getX(0,_),l=m.getY(0,_),u=m.getX(0,_-b),d=m.getY(0,_-b),f=m.getX(-w,-b),p=m.getY(-w,-b),g.batchQuad(e,a,h,c,l,u,d,f,p,0,0,1,1,o,o,o,o,2)),e.showRight&&(o=n.getTintAppendFloatAlpha(e.fillRight,x),a=m.getX(w,0),h=m.getY(w,0),c=m.getX(0,_),l=m.getY(0,_),u=m.getX(0,_-b),d=m.getY(0,_-b),f=m.getX(w,-b),p=m.getY(w,-b),g.batchQuad(e,a,h,c,l,u,d,f,p,0,0,1,1,o,o,o,o,2)),t.pipelines.postBatch(e))}},function(t,e,i){var r=i(48),n=i(30);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.currentContext;if(n(t,o,e,i,s)&&e.isFilled){var a=e.width,h=e.height,c=a/2,l=a/e.projection;e.showTop&&(r(o,e,e.fillTop),o.beginPath(),o.moveTo(-c,-h),o.lineTo(0,-l-h),o.lineTo(c,-h),o.lineTo(c,-1),o.lineTo(0,l-1),o.lineTo(-c,-1),o.lineTo(-c,-h),o.fill()),e.showLeft&&(r(o,e,e.fillLeft),o.beginPath(),o.moveTo(-c,0),o.lineTo(0,l),o.lineTo(0,l-h),o.lineTo(-c,-h),o.lineTo(-c,0),o.fill()),e.showRight&&(r(o,e,e.fillRight),o.beginPath(),o.moveTo(c,0),o.lineTo(0,l),o.lineTo(0,l-h),o.lineTo(c,-h),o.lineTo(c,0),o.fill()),o.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1113),n=i(1114),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),a=r(e,i,s),h=o.calcMatrix.copyFrom(a.calc),c=e.width,l=e.height,u=c/2,d=c/e.projection,f=e.isReversed,p=i.alpha*e.alpha;if(e.isFilled){var g,y,m,v,b,w,_;if(t.pipelines.preBatch(e),e.showTop&&f){g=n.getTintAppendFloatAlpha(e.fillTop,p),y=h.getX(-u,-l),m=h.getY(-u,-l),v=h.getX(0,-d-l),b=h.getY(0,-d-l),w=h.getX(u,-l),_=h.getY(u,-l);var x=h.getX(0,d-l),E=h.getY(0,d-l);o.batchQuad(e,y,m,v,b,w,_,x,E,0,0,1,1,g,g,g,g,2)}e.showLeft&&(g=n.getTintAppendFloatAlpha(e.fillLeft,p),f?(y=h.getX(-u,-l),m=h.getY(-u,-l),v=h.getX(0,d),b=h.getY(0,d),w=h.getX(0,d-l),_=h.getY(0,d-l)):(y=h.getX(-u,0),m=h.getY(-u,0),v=h.getX(0,d),b=h.getY(0,d),w=h.getX(0,d-l),_=h.getY(0,d-l)),o.batchTri(e,y,m,v,b,w,_,0,0,1,1,g,g,g,2)),e.showRight&&(g=n.getTintAppendFloatAlpha(e.fillRight,p),f?(y=h.getX(u,-l),m=h.getY(u,-l),v=h.getX(0,d),b=h.getY(0,d),w=h.getX(0,d-l),_=h.getY(0,d-l)):(y=h.getX(u,0),m=h.getY(u,0),v=h.getX(0,d),b=h.getY(0,d),w=h.getX(0,d-l),_=h.getY(0,d-l)),o.batchTri(e,y,m,v,b,w,_,0,0,1,1,g,g,g,2)),t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(48),n=i(30);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.currentContext;if(n(t,o,e,i,s)&&e.isFilled){var a=e.width,h=e.height,c=a/2,l=a/e.projection,u=e.isReversed;e.showTop&&u&&(r(o,e,e.fillTop),o.beginPath(),o.moveTo(-c,-h),o.lineTo(0,-l-h),o.lineTo(c,-h),o.lineTo(0,l-h),o.fill()),e.showLeft&&(r(o,e,e.fillLeft),o.beginPath(),u?(o.moveTo(-c,-h),o.lineTo(0,l),o.lineTo(0,l-h)):(o.moveTo(-c,0),o.lineTo(0,l),o.lineTo(0,l-h)),o.fill()),e.showRight&&(r(o,e,e.fillRight),o.beginPath(),u?(o.moveTo(c,-h),o.lineTo(0,l),o.lineTo(0,l-h)):(o.moveTo(c,0),o.lineTo(0,l),o.lineTo(0,l-h)),o.fill()),o.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1116),n=i(1117),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),a=r(e,i,s);o.calcMatrix.copyFrom(a.calc);var h=e._displayOriginX,c=e._displayOriginY,l=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isStroked){var u=o.strokeTint,d=n.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*l);u.TL=d,u.TR=d,u.BL=d,u.BR=d;var f=e._startWidth,p=e._endWidth;o.batchLine(e.geom.x1-h,e.geom.y1-c,e.geom.x2-h,e.geom.y2-c,f,p,1,0,!1,a.sprite,a.camera)}t.pipelines.postBatch(e)}},function(t,e,i){var r=i(60),n=i(30);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.currentContext;if(n(t,o,e,i,s)){var a=e._displayOriginX,h=e._displayOriginY;e.isStroked&&(r(o,e),o.beginPath(),o.moveTo(e.geom.x1-a,e.geom.y1-h),o.lineTo(e.geom.x2-a,e.geom.y2-h),o.stroke()),o.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1119),n=i(1120),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),c=a.calcMatrix.copyFrom(h.calc),l=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,d,l,u),e.isStroked&&s(a,e,d,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,c=e._displayOriginY,l=e.pathData,u=l.length-1,d=l[0]-h,f=l[1]-c;a.beginPath(),a.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=l[p]-h,y=l[p+1]-c;a.lineTo(g,y)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1122),n=i(1123),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(81),s=i(12);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=r(e,i,o);a.calcMatrix.copyFrom(h.calc);var c=e._displayOriginX,l=e._displayOriginY,u=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var d=a.fillTint,f=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*u);d.TL=f,d.TR=f,d.BL=f,d.BR=f,a.batchFillRect(-c,-l,e.width,e.height)}e.isStroked&&n(a,e,u,c,l),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,c=e._displayOriginY;e.isFilled&&(r(a,e),a.fillRect(-h,-c,e.width,e.height)),e.isStroked&&(n(a,e),a.beginPath(),a.rect(-h,-c,e.width,e.height),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1125),n=i(1126),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),c=a.calcMatrix.copyFrom(h.calc),l=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,d,l,u),e.isStroked&&s(a,e,d,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,c=e._displayOriginY,l=e.pathData,u=l.length-1,d=l[0]-h,f=l[1]-c;a.beginPath(),a.moveTo(d,f),e.closePath||(u-=2);for(var p=2;p<u;p+=2){var g=l[p]-h,y=l[p+1]-c;a.lineTo(g,y)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1128),n=i(1129),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(81),s=i(12);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=r(e,i,o);a.calcMatrix.copyFrom(h.calc);var c=e._displayOriginX,l=e._displayOriginY,u=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var d=a.fillTint,f=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*u);d.TL=f,d.TR=f,d.BL=f,d.BR=f;var p=e.geom.x1-c,g=e.geom.y1-l,y=e.geom.x2-c,m=e.geom.y2-l,v=e.geom.x3-c,b=e.geom.y3-l;a.batchFillTriangle(p,g,y,m,v,b,h.sprite,h.camera)}e.isStroked&&n(a,e,u,c,l),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,c=e._displayOriginY,l=e.geom.x1-h,u=e.geom.y1-c,d=e.geom.x2-h,f=e.geom.y2-c,p=e.geom.x3-h,g=e.geom.y3-c;a.beginPath(),a.moveTo(l,u),a.lineTo(d,f),a.lineTo(p,g),a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(213);i(5).register("blitter",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(214);i(5).register("container",(function(t,e,i){return this.displayList.add(new r(this.scene,t,e,i))}))},function(t,e,i){var r=i(442);i(5).register("dom",(function(t,e,i,n,s){var o=new r(this.scene,t,e,i,n,s);return this.displayList.add(o),o}))},function(t,e,i){var r=i(215);i(5).register("dynamicBitmapText",(function(t,e,i,n,s){return this.displayList.add(new r(this.scene,t,e,i,n,s))}))},function(t,e,i){var r=i(444);i(5).register("extern",(function(){var t=new r(this.scene);return this.displayList.add(t),t}))},function(t,e,i){var r=i(216);i(5).register("graphics",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,e,i){var r=i(113);i(5).register("group",(function(t,e){return this.updateList.add(new r(this.scene,t,e))}))},function(t,e,i){var r=i(125);i(5).register("image",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(219);i(5).register("layer",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,e,i){var r=i(5),n=i(220);r.register("particles",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},function(t,e,i){var r=i(5),n=i(457);r.register("follower",(function(t,e,i,r,s){var o=new n(this.scene,t,e,i,r,s);return this.displayList.add(o),this.updateList.add(o),o}))},function(t,e,i){var r=i(5),n=i(221);r.register("renderTexture",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var r=i(223);i(5).register("rope",(function(t,e,i,n,s,o,a,h){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a,h))}))},function(t,e,i){var r=i(5),n=i(73);r.register("sprite",(function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.displayList.add(s),s}))},function(t,e,i){var r=i(148);i(5).register("bitmapText",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var r=i(224);i(5).register("text",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(225);i(5).register("tileSprite",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var r=i(129);i(5).register("zone",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(226);i(5).register("video",(function(t,e,i){return this.displayList.add(new r(this.scene,t,e,i))}))},function(t,e,i){var r=i(461),n=i(5);n.register("arc",(function(t,e,i,n,s,o,a,h){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a,h))})),n.register("circle",(function(t,e,i,n,s){return this.displayList.add(new r(this.scene,t,e,i,0,360,!1,n,s))}))},function(t,e,i){var r=i(5),n=i(462);r.register("curve",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,r,s))}))},function(t,e,i){var r=i(463);i(5).register("ellipse",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var r=i(5),n=i(464);r.register("grid",(function(t,e,i,r,s,o,a,h,c,l){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h,c,l))}))},function(t,e,i){var r=i(5),n=i(465);r.register("isobox",(function(t,e,i,r,s,o,a){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a))}))},function(t,e,i){var r=i(5),n=i(466);r.register("isotriangle",(function(t,e,i,r,s,o,a,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h))}))},function(t,e,i){var r=i(5),n=i(467);r.register("line",(function(t,e,i,r,s,o,a,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h))}))},function(t,e,i){var r=i(5),n=i(468);r.register("polygon",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,r,s))}))},function(t,e,i){var r=i(5),n=i(473);r.register("rectangle",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var r=i(474);i(5).register("star",(function(t,e,i,n,s,o,a){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a))}))},function(t,e,i){var r=i(5),n=i(475);r.register("triangle",(function(t,e,i,r,s,o,a,h,c,l){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h,c,l))}))},function(t,e,i){var r=i(213),n=i(28),s=i(16),o=i(13);s.register("blitter",(function(t,e){void 0===t&&(t={});var i=o(t,"key",null),s=o(t,"frame",null),a=new r(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),n(this.scene,a,t),a}))},function(t,e,i){var r=i(28),n=i(214),s=i(16),o=i(13);s.register("container",(function(t,e){void 0===t&&(t={});var i=o(t,"x",0),s=o(t,"y",0),a=o(t,"children",null),h=new n(this.scene,i,s,a);return void 0!==e&&(t.add=e),r(this.scene,h,t),h}))},function(t,e,i){var r=i(215),n=i(28),s=i(16),o=i(13);s.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var i=o(t,"font",""),s=o(t,"text",""),a=o(t,"size",!1),h=new r(this.scene,0,0,i,s,a);return void 0!==e&&(t.add=e),n(this.scene,h,t),h}))},function(t,e,i){var r=i(16),n=i(216);r.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new n(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},function(t,e,i){var r=i(16),n=i(113);r.register("group",(function(t){return new n(this.scene,null,t)}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(125);n.register("image",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),a=new o(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),r(this.scene,a,t),a}))},function(t,e,i){var r=i(28),n=i(219),s=i(16),o=i(13);s.register("layer",(function(t,e){void 0===t&&(t={});var i=o(t,"children",null),s=new n(this.scene,i);return void 0!==e&&(t.add=e),r(this.scene,s,t),s}))},function(t,e,i){var r=i(16),n=i(13),s=i(2),o=i(220);r.register("particles",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=n(t,"frame",null),a=s(t,"emitters",null),h=new o(this.scene,i,r,a);return void 0!==e&&(t.add=e),s(t,"add",!1)?this.displayList.add(h):this.updateList.add(h),h}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(221);n.register("renderTexture",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),n=s(t,"y",0),a=s(t,"width",32),h=s(t,"height",32),c=s(t,"key",void 0),l=s(t,"frame",void 0),u=new o(this.scene,i,n,a,h,c,l);return void 0!==e&&(t.add=e),r(this.scene,u,t),u}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(6),a=i(223);n.register("rope",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),h=s(t,"horizontal",!0),c=o(t,"points",void 0),l=o(t,"colors",void 0),u=o(t,"alphas",void 0),d=new a(this.scene,0,0,i,n,c,h,l,u);return void 0!==e&&(t.add=e),r(this.scene,d,t),t.add||this.updateList.add(d),d}))},function(t,e,i){var r=i(28),n=i(439),s=i(16),o=i(13),a=i(73);s.register("sprite",(function(t,e){void 0===t&&(t={});var i=o(t,"key",null),s=o(t,"frame",null),h=new a(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),r(this.scene,h,t),n(h,t),h}))},function(t,e,i){var r=i(148),n=i(28),s=i(16),o=i(13),a=i(6);s.register("bitmapText",(function(t,e){void 0===t&&(t={});var i=a(t,"font",""),s=o(t,"text",""),h=o(t,"size",!1),c=a(t,"align",0),l=new r(this.scene,0,0,i,s,h,c);return void 0!==e&&(t.add=e),n(this.scene,l,t),l}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(224);n.register("text",(function(t,e){void 0===t&&(t={});var i=s(t,"text",""),n=s(t,"style",null),a=s(t,"padding",null);null!==a&&(n.padding=a);var h=new o(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),r(this.scene,h,t),h.autoRound=s(t,"autoRound",!0),h.resolution=s(t,"resolution",1),h}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(225);n.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),n=s(t,"y",0),a=s(t,"width",512),h=s(t,"height",512),c=s(t,"key",""),l=s(t,"frame",""),u=new o(this.scene,i,n,a,h,c,l);return void 0!==e&&(t.add=e),r(this.scene,u,t),u}))},function(t,e,i){var r=i(16),n=i(13),s=i(129);r.register("zone",(function(t){var e=n(t,"x",0),i=n(t,"y",0),r=n(t,"width",1),o=n(t,"height",r);return new s(this.scene,e,i,r,o)}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(226);n.register("video",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=new o(this.scene,0,0,i);return void 0!==e&&(t.add=e),r(this.scene,n,t),t.add||this.updateList.add(n),n}))},function(t,e,i){var r=i(1),n=i(1);r=i(1177),n=i(1178),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){if(e.shader){if(i.addToRenderList(e),t.pipelines.clear(),e.renderToTexture)e.load(),e.flush();else{var s=r(e,i,n).calc;t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(s.matrix),e.flush()}t.pipelines.rebind()}}},function(t,e){t.exports=function(){}},function(t,e,i){var r=i(1),n=i(1);r=i(1180),n=i(1181),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){var s=e.faces,o=s.length;if(0!==o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),h=r(e,i,n).calc,c=a.setGameObject(e),l=a.vertexViewF32,u=a.vertexViewU32,d=a.vertexCount*a.currentShader.vertexComponentCount-1,f=e.tintFill,p=[],g=e.debugCallback,y=h.a,m=h.b,v=h.c,b=h.d,w=h.e,_=h.f,x=e.viewPosition.z,E=e.hideCCW,S=i.roundPixels,T=i.alpha*e.alpha,A=0;t.pipelines.preBatch(e);for(var C=0;C<o;C++){var k=s[C];k.isInView(i,E,x,T,y,m,v,b,w,_,S)&&(a.shouldFlush(3)&&(a.flush(),d=0),d=k.load(l,u,d,c,f),A++,a.vertexCount+=3,g&&p.push(k))}e.totalFrame+=A,g&&g.call(e,e,p),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(){}},function(t,e,i){var r=i(1),n=i(1);r=i(1183),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=r(e,i,n).calc,a=e.width,h=e.height,c=-e._radius,l=-e._radius,u=c+a,d=l+h,f=o.getX(0,0),p=o.getY(0,0),g=o.getX(c,l),y=o.getY(c,l),m=o.getX(c,d),v=o.getY(c,d),b=o.getX(u,d),w=o.getY(u,d),_=o.getX(u,l),x=o.getY(u,l);t.pipelines.preBatch(e),s.batchPointLight(e,i,g,y,m,v,b,w,_,x,f,p),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(229);i(5).register("shader",(function(t,e,i,n,s,o,a){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a))}))},function(t,e,i){var r=i(230);i(5).register("mesh",(function(t,e,i,n,s,o,a,h,c,l,u){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a,h,c,l,u))}))},function(t,e,i){var r=i(5),n=i(150);r.register("pointlight",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(229);n.register("shader",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"x",0),a=s(t,"y",0),h=s(t,"width",128),c=s(t,"height",128),l=new o(this.scene,i,n,a,h,c);return void 0!==e&&(t.add=e),r(this.scene,l,t),l}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(6),a=i(230);n.register("mesh",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),h=o(t,"vertices",[]),c=o(t,"uvs",[]),l=o(t,"indicies",[]),u=o(t,"containsZ",!1),d=o(t,"normals",[]),f=o(t,"colors",16777215),p=o(t,"alphas",1),g=new a(this.scene,0,0,i,n,h,c,l,u,d,f,p);return void 0!==e&&(t.add=e),r(this.scene,g,t),g}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(150);n.register("pointlight",(function(t,e){void 0===t&&(t={});var i=s(t,"color",16777215),n=s(t,"radius",128),a=s(t,"intensity",1),h=s(t,"attenuation",.1),c=new o(this.scene,0,0,i,n,a,h);return void 0!==e&&(t.add=e),r(this.scene,c,t),c}))},function(t,e,i){var r=i(0),n=i(482),s=i(24),o=i(20),a=new r({Extends:n,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(o.BOOT,this.boot,this),n.call(this)},boot:function(){var t=this.systems.events;t.on(o.SHUTDOWN,this.shutdown,this),t.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",a,"lights"),t.exports=a},function(t,e,i){var r=i(65);r.Area=i(1192),r.Circumference=i(302),r.CircumferencePoint=i(169),r.Clone=i(1193),r.Contains=i(66),r.ContainsPoint=i(1194),r.ContainsRect=i(1195),r.CopyFrom=i(1196),r.Equals=i(1197),r.GetBounds=i(1198),r.GetPoint=i(300),r.GetPoints=i(301),r.Offset=i(1199),r.OffsetPoint=i(1200),r.Random=i(170),t.exports=r},function(t,e){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,e,i){var r=i(65);t.exports=function(t){return new r(t.x,t.y,t.radius)}},function(t,e,i){var r=i(66);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,i){var r=i(66);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,i){var r=i(10);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var r=i(111);r.Area=i(1202),r.Circumference=i(447),r.CircumferencePoint=i(218),r.Clone=i(1203),r.Contains=i(112),r.ContainsPoint=i(1204),r.ContainsRect=i(1205),r.CopyFrom=i(1206),r.Equals=i(1207),r.GetBounds=i(1208),r.GetPoint=i(445),r.GetPoints=i(446),r.Offset=i(1209),r.OffsetPoint=i(1210),r.Random=i(180),t.exports=r},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,i){var r=i(111);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,i){var r=i(112);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,i){var r=i(112);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var r=i(10);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var r=i(4),n=i(231);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s,o,a,h,c=t.x,l=t.y,u=t.radius,d=e.x,f=e.y,p=e.radius;if(l===f)0==(a=(o=-2*f)*o-4*(s=1)*(d*d+(h=(p*p-u*u-d*d+c*c)/(2*(c-d)))*h-2*d*h+f*f-p*p))?i.push(new r(h,-o/(2*s))):a>0&&(i.push(new r(h,(-o+Math.sqrt(a))/(2*s))),i.push(new r(h,(-o-Math.sqrt(a))/(2*s))));else{var g=(c-d)/(l-f),y=(p*p-u*u-d*d+c*c-f*f+l*l)/(2*(l-f));0==(a=(o=2*l*g-2*y*g-2*c)*o-4*(s=g*g+1)*(c*c+l*l+y*y-u*u-2*l*y))?(h=-o/(2*s),i.push(new r(h,y-h*g))):a>0&&(h=(-o+Math.sqrt(a))/(2*s),i.push(new r(h,y-h*g)),h=(-o-Math.sqrt(a))/(2*s),i.push(new r(h,y-h*g)))}}return i}},function(t,e,i){var r=i(232),n=i(151);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC(),h=e.getLineD();r(s,t,i),r(o,t,i),r(a,t,i),r(h,t,i)}return i}},function(t,e,i){var r=i(140),n=i(487),s=new(i(47));function o(t,e,i,o,a){var h=Math.cos(t),c=Math.sin(t);s.setTo(e,i,e+h,i+c);var l=n(s,o);l&&a.push(new r(l.x,l.y,t,l.w))}function a(t,e){return t.z-e.z}t.exports=function(t,e,i){Array.isArray(i)||(i=[i]);for(var r=[],n=[],s=0;s<i.length;s++)for(var h=i[s].points,c=0;c<h.length;c++){var l=Math.atan2(h[c].y-e,h[c].x-t);-1===n.indexOf(l)&&(o(l,t,e,i,r),o(l-1e-5,t,e,i,r),o(l+1e-5,t,e,i,r),n.push(l))}return r.sort(a)}},function(t,e,i){var r=i(10),n=i(152);t.exports=function(t,e,i){return void 0===i&&(i=new r),n(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i}},function(t,e,i){var r=i(234),n=i(152);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=t.getLineA(),o=t.getLineB(),a=t.getLineC(),h=t.getLineD();r(s,e,i),r(o,e,i),r(a,e,i),r(h,e,i)}return i}},function(t,e,i){var r=i(489),n=i(234);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC();n(s,t,i),n(o,t,i),n(a,t,i)}return i}},function(t,e,i){var r=i(232),n=i(491);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=t.getLineA(),o=t.getLineB(),a=t.getLineC();r(s,e,i),r(o,e,i),r(a,e,i)}return i}},function(t,e,i){var r=i(494),n=i(492);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC();n(t,s,i),n(t,o,i),n(t,a,i)}return i}},function(t,e,i){var r=i(496);t.exports=function(t,e){if(!r(t,e))return!1;var i=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),s=Math.min(e.y1,e.y2),o=Math.max(e.y1,e.y2);return t.x>=i&&t.x<=n&&t.y>=s&&t.y<=o}},function(t,e){t.exports=function(t,e,i,r,n,s){return void 0===s&&(s=0),!(e>t.right+s||i<t.left-s||r>t.bottom+s||n<t.top-s)}},function(t,e,i){var r=i(47);r.Angle=i(97),r.BresenhamPoints=i(317),r.CenterOn=i(1222),r.Clone=i(1223),r.CopyFrom=i(1224),r.Equals=i(1225),r.Extend=i(1226),r.GetEasedPoints=i(1227),r.GetMidPoint=i(1228),r.GetNearestPoint=i(1229),r.GetNormal=i(1230),r.GetPoint=i(307),r.GetPoints=i(172),r.GetShortestDistance=i(1231),r.Height=i(1232),r.Length=i(67),r.NormalAngle=i(497),r.NormalX=i(1233),r.NormalY=i(1234),r.Offset=i(1235),r.PerpSlope=i(1236),r.Random=i(173),r.ReflectAngle=i(1237),r.Rotate=i(1238),r.RotateAroundPoint=i(1239),r.RotateAroundXY=i(236),r.SetToAngle=i(1240),r.Slope=i(1241),r.Width=i(1242),t.exports=r},function(t,e){t.exports=function(t,e,i){var r=e-(t.x1+t.x2)/2,n=i-(t.y1+t.y2)/2;return t.x1+=r,t.y1+=n,t.x2+=r,t.y2+=n,t}},function(t,e,i){var r=i(47);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,i){var r=i(67);t.exports=function(t,e,i){void 0===i&&(i=e);var n=r(t),s=t.x2-t.x1,o=t.y2-t.y1;return e&&(t.x1=t.x1-s/n*e,t.y1=t.y1-o/n*e),i&&(t.x2=t.x2+s/n*i,t.y2=t.y2+o/n*i),t}},function(t,e,i){var r=i(352),n=i(80),s=i(4);t.exports=function(t,e,i,o,a){void 0===o&&(o=0),void 0===a&&(a=[]);var h,c,l=[],u=t.x1,d=t.y1,f=t.x2-u,p=t.y2-d,g=n(e,a),y=i-1;for(h=0;h<y;h++)c=g(h/y),l.push(new s(u+f*c,d+p*c));if(c=g(1),l.push(new s(u+f*c,d+p*c)),o>0){var m=l[0],v=[m];for(h=1;h<l.length-1;h++){var b=l[h];r(m,b)>=o&&(v.push(b),m=b)}var w=l[l.length-1];return r(m,w)<o&&v.pop(),v.push(w),v}return l}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.x1,s=t.y1,o=t.x2,a=t.y2,h=(o-n)*(o-n)+(a-s)*(a-s);if(0===h)return i;var c=((e.x-n)*(o-n)+(e.y-s)*(a-s))/h;return i.x=n+c*(o-n),i.y=s+c*(a-s),i}},function(t,e,i){var r=i(14),n=i(97),s=i(4);t.exports=function(t,e){void 0===e&&(e=new s);var i=n(t)-r.TAU;return e.x=Math.cos(i),e.y=Math.sin(i),e}},function(t,e){t.exports=function(t,e){var i=t.x1,r=t.y1,n=t.x2,s=t.y2,o=(n-i)*(n-i)+(s-r)*(s-r);if(0===o)return!1;var a=((r-e.y)*(n-i)-(i-e.x)*(s-r))/o;return Math.abs(a)*Math.sqrt(o)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,i){var r=i(14),n=i(97);t.exports=function(t){return Math.cos(n(t)-r.TAU)}},function(t,e,i){var r=i(14),n=i(97);t.exports=function(t){return Math.sin(n(t)-r.TAU)}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,i){var r=i(97),n=i(497);t.exports=function(t,e){return 2*n(e)-Math.PI-r(t)}},function(t,e,i){var r=i(236);t.exports=function(t,e){var i=(t.x1+t.x2)/2,n=(t.y1+t.y2)/2;return r(t,i,n,e)}},function(t,e,i){var r=i(236);t.exports=function(t,e,i){return r(t,e.x,e.y,i)}},function(t,e){t.exports=function(t,e,i,r,n){return t.x1=e,t.y1=i,t.x2=e+Math.cos(r)*n,t.y2=i+Math.sin(r)*n,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,i){var r={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};t.exports=r},function(t,e,i){var r=i(116),n=i(2),s=i(69),o=i(39),a=i(117),h=new o,c=new o,l=new s;t.exports=function(t){var e=n(t,"mesh"),i=n(t,"texture",null),s=n(t,"frame"),o=n(t,"width",1),u=n(t,"height",o),d=n(t,"widthSegments",1),f=n(t,"heightSegments",d),p=n(t,"x",0),g=n(t,"y",0),y=n(t,"z",0),m=n(t,"rotateX",0),v=n(t,"rotateY",0),b=n(t,"rotateZ",0),w=n(t,"zIsUp",!0),_=n(t,"isOrtho",!!e&&e.dirtyCache[11]),x=n(t,"colors",[16777215]),E=n(t,"alphas",[1]),S=n(t,"tile",!1),T=n(t,"flipY",!1),A=n(t,"width",null),C={faces:[],verts:[]};if(h.set(p,g,y),c.set(m,v,b),l.fromRotationXYTranslation(c,h,w),!i&&e)i=e.texture;else{if(!e||"string"!=typeof i)return C;i=e.scene.sys.textures.get(i)}var k=i.get(s);!A&&_&&i&&e&&(o=k.width/e.height,u=k.height/e.height);var R,P,I=o/2,O=u/2,M=Math.floor(d),D=Math.floor(f),B=M+1,L=D+1,N=o/M,U=u/D,F=[],z=[],j=0,V=1,G=0,H=1;k&&(j=k.u0,V=k.u1,T?(G=k.v1,H=k.v0):(G=k.v0,H=k.v1));var Y=V-j,K=H-G;for(P=0;P<L;P++){var W=P*U-O;for(R=0;R<B;R++){var X=R*N-I;z.push(X,-W);var q=j+Y*(R/M),$=G+K*(P/D);F.push(q,$)}}Array.isArray(x)||(x=[x]),Array.isArray(E)||(E=[E]);var J=0,Z=0;for(P=0;P<D;P++)for(R=0;R<M;R++){var Q=2*(R+B*P),tt=2*(R+B*(P+1)),et=2*(R+1+B*(P+1)),it=2*(R+1+B*P),rt=x[Z],nt=E[J],st=new a(z[Q],z[Q+1],0,F[Q],F[Q+1],rt,nt).transformMat4(l),ot=new a(z[tt],z[tt+1],0,F[tt],F[tt+1],rt,nt).transformMat4(l),at=new a(z[it],z[it+1],0,F[it],F[it+1],rt,nt).transformMat4(l),ht=new a(z[tt],z[tt+1],0,F[tt],F[tt+1],rt,nt).transformMat4(l),ct=new a(z[et],z[et+1],0,F[et],F[et+1],rt,nt).transformMat4(l),lt=new a(z[it],z[it+1],0,F[it],F[it+1],rt,nt).transformMat4(l);S&&(st.setUVs(j,H),ot.setUVs(j,G),at.setUVs(V,H),ht.setUVs(j,G),ct.setUVs(V,G),lt.setUVs(V,H)),++Z===x.length&&(Z=0),++J===E.length&&(J=0),C.verts.push(st,ot,at,ht,ct,lt),C.faces.push(new r(st,ot,at),new r(ht,ct,lt))}return e&&(e.faces=e.faces.concat(C.faces),e.vertices=e.vertices.concat(C.verts)),C}},function(t,e){t.exports=function(t,e,i,r){var n,s;if(void 0===i&&void 0===r){var o=t.getInCenter();n=o.x,s=o.y}var a=Math.cos(e),h=Math.sin(e),c=t.vertex1,l=t.vertex2,u=t.vertex3,d=c.x-n,f=c.y-s;c.set(d*a-f*h+n,d*h+f*a+s),d=l.x-n,f=l.y-s,l.set(d*a-f*h+n,d*h+f*a+s),d=u.x-n,f=u.y-s,u.set(d*a-f*h+n,d*h+f*a+s)}},function(t,e,i){var r=i(4);r.Ceil=i(1247),r.Clone=i(1248),r.CopyFrom=i(1249),r.Equals=i(1250),r.Floor=i(1251),r.GetCentroid=i(1252),r.GetMagnitude=i(500),r.GetMagnitudeSq=i(501),r.GetRectangleFromPoints=i(1253),r.Interpolate=i(1254),r.Invert=i(1255),r.Negative=i(1256),r.Project=i(1257),r.ProjectUnit=i(1258),r.SetMagnitude=i(1259),t.exports=r},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,i){var r=i(4);t.exports=function(t){return new r(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,i){var r=i(4);t.exports=function(t,e){if(void 0===e&&(e=new r),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var i=t.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(1===i)e.x=t[0].x,e.y=t[0].y;else{for(var n=0;n<i;n++)e.x+=t[n].x,e.y+=t[n].y;e.x/=i,e.y/=i}return e}},function(t,e,i){var r=i(10);t.exports=function(t,e){void 0===e&&(e=new r);for(var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=0;a<t.length;a++){var h=t[a];h.x>i&&(i=h.x),h.x<n&&(n=h.x),h.y>s&&(s=h.y),h.y<o&&(o=h.y)}return e.x=n,e.y=o,e.width=i-n,e.height=s-o,e}},function(t,e,i){var r=i(4);t.exports=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=new r),n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.setTo(-t.x,-t.y)}},function(t,e,i){var r=i(4),n=i(501);t.exports=function(t,e,i){void 0===i&&(i=new r);var s=(t.x*e.x+t.y*e.y)/n(e);return 0!==s&&(i.x=s*e.x,i.y=s*e.y),i}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.x*e.x+t.y*e.y;return 0!==n&&(i.x=n*e.x,i.y=n*e.y),i}},function(t,e,i){var r=i(500);t.exports=function(t,e){if(0!==t.x||0!==t.y){var i=r(t);t.x/=i,t.y/=i}return t.x*=e,t.y*=e,t}},function(t,e,i){var r=i(227);r.Clone=i(1261),r.Contains=i(228),r.ContainsPoint=i(1262),r.Earcut=i(59),r.GetAABB=i(469),r.GetNumberArray=i(1263),r.GetPoints=i(470),r.Perimeter=i(471),r.Reverse=i(1264),r.Simplify=i(1265),r.Smooth=i(472),r.Translate=i(1266),t.exports=r},function(t,e,i){var r=i(227);t.exports=function(t){return new r(t.points)}},function(t,e,i){var r=i(228);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.points.length;i++)e.push(t.points[i].x),e.push(t.points[i].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){function i(t,e,i){var r=e.x,n=e.y,s=i.x-r,o=i.y-n;if(0!==s||0!==o){var a=((t.x-r)*s+(t.y-n)*o)/(s*s+o*o);a>1?(r=i.x,n=i.y):a>0&&(r+=s*a,n+=o*a)}return(s=t.x-r)*s+(o=t.y-n)*o}function r(t,e,n,s,o){for(var a,h=s,c=e+1;c<n;c++){var l=i(t[c],t[e],t[n]);l>h&&(a=c,h=l)}h>s&&(a-e>1&&r(t,e,a,s,o),o.push(t[a]),n-a>1&&r(t,a,n,s,o))}function n(t,e){var i=t.length-1,n=[t[0]];return r(t,0,i,e,n),n.push(t[i]),n}t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var r=t.points;if(r.length>2){var s=e*e;i||(r=function(t,e){for(var i,r,n,s,o,a=t[0],h=[a],c=1,l=t.length;c<l;c++)n=a,void 0,void 0,(s=(r=i=t[c]).x-n.x)*s+(o=r.y-n.y)*o>e&&(h.push(i),a=i);return a!==i&&h.push(i),h}(r,s)),t.setTo(n(r,s))}return t}},function(t,e){t.exports=function(t,e,i){for(var r=t.points,n=0;n<r.length;n++)r[n].x+=e,r[n].y+=i;return t}},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,i){var r=i(10);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,i){var r=i(57);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var r=i(237);t.exports=function(t,e){var i=r(t);return i<r(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,i){var r=i(237);t.exports=function(t,e){var i=r(t);return i>r(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,i){var r=i(10);t.exports=function(t,e,i,n,s){return void 0===s&&(s=new r),s.setTo(Math.min(t,i),Math.min(e,n),Math.abs(t-i),Math.abs(e-n))}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.width,e.y=t.height,e}},function(t,e,i){var r=i(190);t.exports=function(t,e,i){var n=t.centerX,s=t.centerY;return t.setSize(t.width+2*e,t.height+2*i),r(t,n,s)}},function(t,e,i){var r=i(10),n=i(152);t.exports=function(t,e,i){return void 0===i&&(i=new r),n(t,e)?(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y):i.setEmpty(),i}},function(t,e){t.exports=function(t,e){for(var i=t.x,r=t.right,n=t.y,s=t.bottom,o=0;o<e.length;o++)i=Math.min(i,e[o].x),r=Math.max(r,e[o].x),n=Math.min(n,e[o].y),s=Math.max(s,e[o].y);return t.x=i,t.y=n,t.width=r-i,t.height=s-n,t}},function(t,e){t.exports=function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.right,e.right);t.x=i,t.width=r-i;var n=Math.min(t.y,e.y),s=Math.max(t.bottom,e.bottom);return t.y=n,t.height=s-n,t}},function(t,e){t.exports=function(t,e,i){var r=Math.min(t.x,e),n=Math.max(t.right,e);t.x=r,t.width=n-r;var s=Math.min(t.y,i),o=Math.max(t.bottom,i);return t.y=s,t.height=o-s,t}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,i){var r=i(4),n=i(36);t.exports=function(t,e,i){void 0===i&&(i=new r),e=n(e);var s=Math.sin(e),o=Math.cos(e),a=o>0?t.width/2:t.width/-2,h=s>0?t.height/2:t.height/-2;return Math.abs(a*s)<Math.abs(h*o)?h=a*s/o:a=h*o/s,i.x=a+t.centerX,i.y=h+t.centerY,i}},function(t,e,i){var r=i(195),n=i(503),s=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new s),n(t,e))switch(r(0,3)){case 0:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.y+Math.random()*(e.top-t.y);break;case 1:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:i.x=t.x+Math.random()*(e.x-t.x),i.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:i.x=e.right+Math.random()*(t.right-e.right),i.y=t.y+Math.random()*(e.bottom-t.y)}return i}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t}},function(t,e,i){var r=i(82);r.Area=i(1294),r.BuildEquilateral=i(1295),r.BuildFromPolygon=i(1296),r.BuildRight=i(1297),r.CenterOn=i(1298),r.Centroid=i(504),r.CircumCenter=i(1299),r.CircumCircle=i(1300),r.Clone=i(1301),r.Contains=i(115),r.ContainsArray=i(235),r.ContainsPoint=i(1302),r.CopyFrom=i(1303),r.Decompose=i(495),r.Equals=i(1304),r.GetPoint=i(476),r.GetPoints=i(477),r.InCenter=i(506),r.Perimeter=i(1305),r.Offset=i(505),r.Random=i(181),r.Rotate=i(1306),r.RotateAroundPoint=i(1307),r.RotateAroundXY=i(238),t.exports=r},function(t,e){t.exports=function(t){var e=t.x1,i=t.y1,r=t.x2,n=t.y2,s=t.x3,o=t.y3;return Math.abs(((s-e)*(n-i)-(r-e)*(o-i))/2)}},function(t,e,i){var r=i(82);t.exports=function(t,e,i){var n=i*(Math.sqrt(3)/2);return new r(t,e,t+i/2,e+n,t-i/2,e+n)}},function(t,e,i){var r=i(59),n=i(82);t.exports=function(t,e,i,s,o){void 0===e&&(e=null),void 0===i&&(i=1),void 0===s&&(s=1),void 0===o&&(o=[]);for(var a,h,c,l,u,d,f,p,g,y=r(t,e),m=0;m<y.length;m+=3)a=y[m],h=y[m+1],c=y[m+2],l=t[2*a]*i,u=t[2*a+1]*s,d=t[2*h]*i,f=t[2*h+1]*s,p=t[2*c]*i,g=t[2*c+1]*s,o.push(new n(l,u,d,f,p,g));return o}},function(t,e,i){var r=i(82);t.exports=function(t,e,i,n){return void 0===n&&(n=i),new r(t,e,t,e-n,t+i,e)}},function(t,e,i){var r=i(504),n=i(505);t.exports=function(t,e,i,s){void 0===s&&(s=r);var o=s(t),a=e-o.x,h=i-o.y;return n(t,a,h)}},function(t,e,i){var r=i(3);function n(t,e,i,r){return t*r-e*i}t.exports=function(t,e){void 0===e&&(e=new r);var i=t.x3,s=t.y3,o=t.x1-i,a=t.y1-s,h=t.x2-i,c=t.y2-s,l=2*n(o,a,h,c),u=n(a,o*o+a*a,c,h*h+c*c),d=n(o,o*o+a*a,h,h*h+c*c);return e.x=i-u/l,e.y=s+d/l,e}},function(t,e,i){var r=i(65);t.exports=function(t,e){void 0===e&&(e=new r);var i,n,s=t.x1,o=t.y1,a=t.x2,h=t.y2,c=t.x3,l=t.y3,u=a-s,d=h-o,f=c-s,p=l-o,g=u*(s+a)+d*(o+h),y=f*(s+c)+p*(o+l),m=2*(u*(l-h)-d*(c-a));if(Math.abs(m)<1e-6){var v=Math.min(s,a,c),b=Math.min(o,h,l);i=.5*(Math.max(s,a,c)-v),n=.5*(Math.max(o,h,l)-b),e.x=v+i,e.y=b+n,e.radius=Math.sqrt(i*i+n*n)}else e.x=(p*g-d*y)/m,e.y=(u*y-f*g)/m,i=e.x-s,n=e.y-o,e.radius=Math.sqrt(i*i+n*n);return e}},function(t,e,i){var r=i(82);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,i){var r=i(115);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,i){var r=i(67);t.exports=function(t){var e=t.getLineA(),i=t.getLineB(),n=t.getLineC();return r(e)+r(i)+r(n)}},function(t,e,i){var r=i(238),n=i(506);t.exports=function(t,e){var i=n(t);return r(t,i.x,i.y,e)}},function(t,e,i){var r=i(238);t.exports=function(t,e,i){return r(t,e.x,e.y,i)}},function(t,e,i){var r=i(203),n=i(17),s={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,i){var r=i(0),n=i(9),s=i(239),o=i(511),a=i(6),h=i(153),c=i(51),l=new r({Extends:n,initialize:function(t){n.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(c.BOOT,this.boot,this),t.pluginEvents.on(c.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,i=t.config;this.enabled=a(e,"gamepad",i.inputGamepad)&&t.device.input.gamepads,this.target=a(e,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,e=this.target,i=function(e){!e.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(e))};this.onGamepadHandler=i,e.addEventListener("gamepadconnected",i,!1),e.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(c.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(c.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,i=0;i<t.length;i++){var r=t[i];if(r){var n=r.id,s=r.index,a=e[s];if(a)a.id!==n?(a.destroy(),e[s]=new o(this,r)):a.update(r);else{var h=new o(this,r);e[s]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},getPad:function(t){for(var e=this.gamepads,i=0;i<e.length;i++)if(e[i]&&e[i].index===t)return e[i]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),i=0;i<t;i++){var r=e[i],n=this.getPad(r.gamepad.index);"gamepadconnected"===r.type?this.emit(s.CONNECTED,n,r):"gamepaddisconnected"===r.type&&this.emit(s.DISCONNECTED,n,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",l,"gamepad","gamepad","inputGamepad"),t.exports=l},function(t,e,i){t.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,i){var r=i(65),n=i(66),s=i(0),o=i(203),a=i(508),h=i(507),c=i(50),l=i(111),u=i(112),d=i(51),f=i(9),p=i(2),g=i(56),y=i(153),m=i(7),v=i(24),b=i(10),w=i(57),_=i(20),x=i(82),E=i(115),S=new s({Extends:f,initialize:function(t){f.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,y.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(_.BOOT,this.boot,this),t.sys.events.on(_.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(_.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var t=this.systems.events;t.on(_.TRANSITION_START,this.transitionIn,this),t.on(_.TRANSITION_OUT,this.transitionOut,this),t.on(_.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(_.PRE_UPDATE,this.preUpdate,this),t.once(_.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(t){this.isActive()&&this.emit(d.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(d.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,r=e.length;if(0!==i||0!==r){for(var n=this._list,s=0;s<i;s++){var o=t[s],a=n.indexOf(o);a>-1&&(n.splice(a,1),this.clear(o,!0))}t.length=0,this._pendingRemoval.length=0,this._list=n.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,r=this.manager,n=r.pointers,s=r.pointersTotal;for(i=0;i<s;i++)n[i].updateMotion();if(0===this._list.length)return!1;var o=this.pollRate;if(-1===o)return!1;if(o>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var a=!1;for(i=0;i<s;i++){var h=0,c=n[i];this._tempZones=[],this._temp=this.hitTestPointer(c),this.sortGameObjects(this._temp,c),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(c),2===this.getDragState(c)&&this.processDragThresholdEvent(c,t),h>0&&(a=!0)}return a},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,r=!1,n=0;n<i;n++){var s=0,a=e[n];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case o.MOUSE_DOWN:s+=this.processDragDownEvent(a),s+=this.processDownEvents(a),s+=this.processOverOutEvents(a);break;case o.MOUSE_UP:s+=this.processDragUpEvent(a),s+=this.processUpEvents(a),s+=this.processOverOutEvents(a);break;case o.TOUCH_START:s+=this.processDragDownEvent(a),s+=this.processDownEvents(a),s+=this.processOverEvents(a);break;case o.TOUCH_END:case o.TOUCH_CANCEL:s+=this.processDragUpEvent(a),s+=this.processUpEvents(a),s+=this.processOutEvents(a);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:s+=this.processDragMoveEvent(a),s+=this.processMoveEvents(a),s+=this.processOverOutEvents(a);break;case o.MOUSE_WHEEL:s+=this.processWheelEvent(a)}s>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(t,e){void 0===e&&(e=!1);var i=t.input;if(i){e||this.queueForRemoval(t),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,t.input=null;var r=this._draggable.indexOf(t);return r>-1&&this._draggable.splice(r,1),(r=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(r,1),(r=this._over[0].indexOf(t))>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(i)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,r){return void 0===r&&(r=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&r&&!t.input.dropZone&&(t.input.dropZone=r),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var r=e[i],n=this.manager.hitTest(t,this._list,r),s=0;s<n.length;s++){var o=n[s];o.input.dropZone&&this._tempZones.push(o)}if(n.length>0)return t.camera=r,n}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=!1,o=0;o<i.length;o++){var a=i[o];if(a.input){if(e++,a.emit(d.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,n),r.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,t,a,n),r.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,t,i):this.emit(d.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,r=this.dragTimeThreshold,n=this.dragDistanceThreshold;if((n>0&&c(t.x,t.y,t.downX,t.downY)>=n||r>0&&e>=t.downTime+r)&&(i=!0),i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var r=e[i],n=r.input;n.dragState=2,n.dragStartX=r.x,n.dragStartY=r.y,n.dragStartXGlobal=t.worldX,n.dragStartYGlobal=t.worldY,n.dragX=n.dragStartXGlobal-n.dragStartX,n.dragY=n.dragStartYGlobal-n.dragStartY,r.emit(d.GAMEOBJECT_DRAG_START,t,n.dragX,n.dragY),this.emit(d.DRAG_START,t,r)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],r=0;r<e.length;r++){var n=e[r];n.input.draggable&&0===n.input.dragState&&i.push(n)}return 0===i.length?(this.setDragState(t,0),0):(i.length>1&&(this.sortGameObjects(i,t),this.topOnly&&i.splice(1)),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],r=0;r<i.length;r++){var n,s,o=i[r],a=o.input,h=a.target;if(h){var c=e.indexOf(h);0===c?(o.emit(d.GAMEOBJECT_DRAG_OVER,t,h),this.emit(d.DRAG_OVER,t,o,h)):c>0?(o.emit(d.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(d.DRAG_LEAVE,t,o,h),a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h)):(o.emit(d.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(d.DRAG_LEAVE,t,o,h),e[0]?(a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h)):a.target=null)}else!h&&e[0]&&(a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h));if(o.parentContainer){var l=t.worldX-a.dragStartXGlobal,u=t.worldY-a.dragStartYGlobal,f=o.getParentRotation(),p=l*Math.cos(f)+u*Math.sin(f),g=u*Math.cos(f)-l*Math.sin(f);p*=1/o.parentContainer.scaleX,g*=1/o.parentContainer.scaleY,n=p+a.dragStartX,s=g+a.dragStartY}else n=t.worldX-a.dragX,s=t.worldY-a.dragY;o.emit(d.GAMEOBJECT_DRAG,t,n,s),this.emit(d.DRAG,t,o,n,s)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var r=e[i],n=r.input;if(n&&2===n.dragState){n.dragState=0,n.dragX=n.localX-r.displayOriginX,n.dragY=n.localY-r.displayOriginY;var s=!1,o=n.target;o&&(r.emit(d.GAMEOBJECT_DROP,t,o),this.emit(d.DROP,t,r,o),n.target=null,s=!0),r.input&&(r.emit(d.GAMEOBJECT_DRAG_END,t,n.dragX,n.dragY,s),this.emit(d.DRAG_END,t,r,s))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=!1,o=0;o<i.length;o++){var a=i[o];if(a.input){if(e++,a.emit(d.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,n),r.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,t,a,n),r.cancelled||!a.input){s=!0;break}if(this.topOnly)break}}return s||this.emit(d.POINTER_MOVE,t,i),e},processWheelEvent:function(t){var e=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=!1,o=t.deltaX,a=t.deltaY,h=t.deltaZ,c=0;c<i.length;c++){var l=i[c];if(l.input){if(e++,l.emit(d.GAMEOBJECT_POINTER_WHEEL,t,o,a,h,n),r.cancelled||!l.input){s=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,t,l,o,a,h,n),r.cancelled||!l.input){s=!0;break}}}return s||this.emit(d.POINTER_WHEEL,t,i,o,a,h),e},processOverEvents:function(t){var e=this._temp,i=0,r=e.length,n=[];if(r>0){var s=this.manager,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,c=0;c<r;c++){var l=e[c];if(l.input){if(n.push(l),s.setCursor(l.input),l.emit(d.GAMEOBJECT_POINTER_OVER,t,l.input.localX,l.input.localY,a),i++,o.cancelled||!l.input){h=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,l,a),o.cancelled||!l.input){h=!0;break}}}h||this.emit(d.POINTER_OVER,t,n)}return this._over[t.id]=n,i},processOutEvents:function(t){var e=this._over[t.id],i=0,r=e.length;if(r>0){var n=this.manager,s=this._eventData,o=this._eventContainer;s.cancelled=!1;var a=!1;this.sortGameObjects(e,t);for(var h=0;h<r;h++){var c=e[h];if((c=e[h]).input){if(n.resetCursor(c.input),c.emit(d.GAMEOBJECT_POINTER_OUT,t,o),i++,s.cancelled||!c.input){a=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,c,o),s.cancelled||!c.input){a=!0;break}a||this.emit(d.POINTER_OUT,t,e)}}this._over[t.id]=[]}return i},processOverOutEvents:function(t){var e,i,r=this._temp,n=[],s=[],o=[],a=this._over[t.id],h=this._drag[t.id],c=this.manager;for(e=0;e<a.length;e++)i=a[e],-1===r.indexOf(i)&&-1===h.indexOf(i)?n.push(i):o.push(i);for(e=0;e<r.length;e++)i=r[e],-1===a.indexOf(i)&&s.push(i);var l=n.length,u=0,f=this._eventData,p=this._eventContainer;f.cancelled=!1;var g=!1;if(l>0){for(this.sortGameObjects(n,t),e=0;e<l;e++)if((i=n[e]).input){if(c.resetCursor(i.input),i.emit(d.GAMEOBJECT_POINTER_OUT,t,p),u++,f.cancelled||!i.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,i,p),f.cancelled||!i.input){g=!0;break}}g||this.emit(d.POINTER_OUT,t,n)}if(l=s.length,f.cancelled=!1,g=!1,l>0){for(this.sortGameObjects(s,t),e=0;e<l;e++)if((i=s[e]).input){if(c.setCursor(i.input),i.emit(d.GAMEOBJECT_POINTER_OVER,t,i.input.localX,i.input.localY,p),u++,f.cancelled||!i.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,i,p),f.cancelled||!i.input){g=!0;break}}g||this.emit(d.POINTER_OVER,t,s)}return a=o.concat(s),this._over[t.id]=this.sortGameObjects(a,t),u},processUpEvents:function(t){var e=this._temp,i=this._eventData,r=this._eventContainer;i.cancelled=!1;for(var n=!1,s=0;s<e.length;s++){var o=e[s];if(o.input){if(o.emit(d.GAMEOBJECT_POINTER_UP,t,o.input.localX,o.input.localY,r),i.cancelled||!o.input){n=!0;break}if(this.emit(d.GAMEOBJECT_UP,t,o,r),i.cancelled||!o.input){n=!0;break}}}return!n&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,t,e):this.emit(d.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];r.input.draggable=e;var n=this._draggable.indexOf(r);e&&-1===n?this._draggable.push(r):!e&&n>-1&&this._draggable.splice(n,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return h(e,t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var r=!1,n=!1,s=!1,o=!1,h=!1,c=!0;if(m(e)){var l=e;e=p(l,"hitArea",null),i=p(l,"hitAreaCallback",null),r=p(l,"draggable",!1),n=p(l,"dropZone",!1),s=p(l,"cursor",!1),o=p(l,"useHandCursor",!1),h=p(l,"pixelPerfect",!1);var u=p(l,"alphaTolerance",1);h&&(e={},i=this.makePixelPerfect(u)),e&&i||(this.setHitAreaFromTexture(t),c=!1)}else"function"!=typeof e||i||(i=e,e={});for(var d=0;d<t.length;d++){var f=t[d];if(h&&"Container"===f.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var g=f.input?f.input:a(f,e,i);g.customHitArea=c,g.dropZone=n,g.cursor=o?"pointer":s,f.input=g,r&&this.setDraggable(f),this.queueForInsertion(f)}}return this},setHitAreaCircle:function(t,e,i,s,o){void 0===o&&(o=n);var a=new r(e,i,s);return this.setHitArea(t,a,o)},setHitAreaEllipse:function(t,e,i,r,n,s){void 0===s&&(s=u);var o=new l(e,i,r,n);return this.setHitArea(t,o,s)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=w),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],n=r.frame,s=0,o=0;r.width?(s=r.width,o=r.height):n&&(s=n.realWidth,o=n.realHeight),"Container"!==r.type||0!==s&&0!==o?0!==s&&0!==o&&(r.input=a(r,new b(0,0,s,o),e),this.queueForInsertion(r)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,i,r,n,s){void 0===s&&(s=w);var o=new b(e,i,r,n);return this.setHitArea(t,o,s)},setHitAreaTriangle:function(t,e,i,r,n,s,o,a){void 0===a&&(a=E);var h=new x(e,i,r,n,s,o);return this.setHitArea(t,h,a)},enableDebug:function(t,e){void 0===e&&(e=65280);var i=t.input;if(!i||!i.hitArea)return this;var r=i.hitArea,n=r.type,s=i.hitAreaDebug,o=this.systems.add,a=this.systems.updateList;s&&(a.remove(s),s.destroy(),s=null);var h=0,c=0;switch(n){case g.CIRCLE:s=o.arc(0,0,r.radius),h=r.x-r.radius,c=r.y-r.radius;break;case g.ELLIPSE:s=o.ellipse(0,0,r.width,r.height),h=r.x-r.width/2,c=r.y-r.height/2;break;case g.LINE:s=o.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case g.POLYGON:s=o.polygon(0,0,r.points);break;case g.RECTANGLE:s=o.rectangle(0,0,r.width,r.height),h=r.x,c=r.y;break;case g.TRIANGLE:s=o.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)}return s&&(s.isFilled=!1,s.preUpdate=function(){s.setStrokeStyle(1/t.scale,e),s.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var i=t.x,r=t.y,n=t.rotation,o=t.scaleX,a=t.scaleY;if(t.parentContainer){var l=t.getWorldTransformMatrix();i=l.tx,r=l.ty,n=l.rotation,o=l.scaleX,a=l.scaleY}s.setRotation(n),s.setScale(o,a),s.setPosition(i+h,r+c),s.setScrollFactor(t.scrollFactorX,t.scrollFactorY),s.setDepth(t.depth)},a.add(s),i.hitAreaDebug=s),this},removeDebug:function(t){var e=t.input;if(e&&e.hitAreaDebug){var i=e.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),e.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){if(t.length<2)return t;var i=e.camera.renderList;return t.sort((function(t,e){return i.indexOf(e)-i.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),r=e.getIndexList(),n=Math.min(i.length,r.length),s=0;s<n;s++){var o=i[s],a=r[s];if(o!==a)return a-o}return r.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager;e.canvas.style.cursor=e.defaultCursor;var i=this.systems.events;i.off(_.TRANSITION_START,this.transitionIn,this),i.off(_.TRANSITION_OUT,this.transitionOut,this),i.off(_.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(_.PRE_UPDATE,this.preUpdate,this),e.events.off(d.GAME_OUT,this.onGameOut,this),e.events.off(d.GAME_OVER,this.onGameOver,this),i.off(_.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(_.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});v.register("InputPlugin",S,"input"),t.exports=S},function(t,e,i){t.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,i){var r=i(0),n=i(9),s=i(154),o=i(22),a=i(6),h=i(51),c=i(153),l=i(512),u=i(143),d=i(513),f=i(1331),p=i(20),g=i(76),y=new r({Extends:n,initialize:function(t){n.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(h.BOOT,this.boot,this),t.pluginEvents.on(h.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=a(t,"keyboard",!0);var e=a(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:u.UP,down:u.DOWN,left:u.LEFT,right:u.RIGHT,space:u.SPACE,shift:u.SHIFT})},addKeys:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var r={};if("string"==typeof t){t=t.split(",");for(var n=0;n<t.length;n++){var s=t[n].trim();s&&(r[s]=this.addKey(s,e,i))}}else for(var o in t)r[o]=this.addKey(t[o],e,i);return r},addKey:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var r=this.keys;if(t instanceof l){var n=r.indexOf(t);return n>-1?r[n]=t:r[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(i),t}return"string"==typeof t&&(t=u[t.toUpperCase()]),r[t]||(r[t]=new l(this,t),e&&this.addCapture(t),r[t].setEmitOnRepeat(i)),r[t]},removeKey:function(t,e){void 0===e&&(e=!1);var i,r=this.keys;if(t instanceof l){var n=r.indexOf(t);n>-1&&(i=this.keys[n],this.keys[n]=void 0)}else"string"==typeof t&&(t=u[t.toUpperCase()]);return r[t]&&(i=r[t],r[t]=void 0),i&&(i.plugin=null,e&&i.destroy()),this},removeAllKeys:function(t){for(var e=this.keys,i=0;i<e.length;i++){var r=e[i];r&&(e[i]=void 0,t&&r.destroy())}return this},createCombo:function(t,e){return new d(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var i=g(this.time-t.timeDown,e);if(i>t._tick)return t._tick=i,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var i=this.keys,r=0;r<e;r++){var n=t[r],o=n.keyCode,a=i[o],h=!1;void 0===n.cancelled&&(n.cancelled=0,n.stopImmediatePropagation=function(){n.cancelled=1},n.stopPropagation=function(){n.cancelled=-1}),-1!==n.cancelled&&(o===this.prevCode&&n.timeStamp===this.prevTime&&n.type===this.prevType||(this.prevCode=o,this.prevTime=n.timeStamp,this.prevType=n.type,"keydown"===n.type?(a&&(h=a.isDown,a.onDown(n)),n.cancelled||a&&h||(f[o]&&this.emit(s.KEY_DOWN+f[o],n),n.cancelled||this.emit(s.ANY_KEY_DOWN,n))):(a&&a.onUp(n),n.cancelled||(f[o]&&this.emit(s.KEY_UP+f[o],n),n.cancelled||this.emit(s.ANY_KEY_UP,n))),1===n.cancelled&&(n.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});c.register("KeyboardPlugin",y,"keyboard","keyboard","inputKeyboard"),t.exports=y},function(t,e,i){var r=i(143),n={};for(var s in r)n[r[s]]=s;t.exports=n},function(t,e){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,e){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeDown;return t.isDown&&i<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeUp;return t.isUp&&i<e}},function(t,e,i){t.exports={MouseManager:i(411)}},function(t,e,i){t.exports={TouchManager:i(413)}},function(t,e,i){var r=i(21),n=i(17),s={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(t,e,i){var r=i(0),n=i(8),s=i(61),o=i(95),a=new r({Extends:s,initialize:function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});n.register("animation",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,r,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(61),c=i(49),l=new r({Extends:c,initialize:function(t,e,i,r,n,l){var u,d;if(a(e)){var f=e;e=s(f,"key"),u=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new h(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","json"),xhrSettings:s(f,"atlasXhrSettings")})}else u=new o(t,e,i,n),d=new h(t,e,r,l);u.linkFile?c.call(this,t,"atlasjson",e,[u,d,u.linkFile]):c.call(this,t,"atlasjson",e,[u,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0}}});n.register("aseprite",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new l(this,t[o]),this.addFile(s.files);else s=new l(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(61),c=i(49),l=new r({Extends:c,initialize:function(t,e,i,r,n,l){var u,d;if(a(e)){var f=e;e=s(f,"key"),u=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new h(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","json"),xhrSettings:s(f,"atlasXhrSettings")})}else u=new o(t,e,i,n),d=new h(t,e,r,l);u.linkFile?c.call(this,t,"atlasjson",e,[u,d,u.linkFile]):c.call(this,t,"atlasjson",e,[u,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});n.register("atlas",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new l(this,t[o]),this.addFile(s.files);else s=new l(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(49),c=i(241),l=new r({Extends:h,initialize:function(t,e,i,r,n,l){var u,d;if(a(e)){var f=e;e=s(f,"key"),u=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new c(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","xml"),xhrSettings:s(f,"atlasXhrSettings")})}else u=new o(t,e,i,n),d=new c(t,e,r,l);u.linkFile?h.call(this,t,"atlasxml",e,[u,d,u.linkFile]):h.call(this,t,"atlasxml",e,[u,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});n.register("atlasXML",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new l(this,t[o]),this.addFile(s.files);else s=new l(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=l},function(t,e,i){var r=i(518),n=i(0),s=i(8),o=i(2),a=i(7),h=i(61),c=i(49),l=new n({Extends:c,initialize:function(t,e,i,n,s,l,u){if(a(e)){var d=e;e=o(d,"key"),i=o(d,"jsonURL"),n=o(d,"audioURL"),s=o(d,"audioConfig"),l=o(d,"audioXhrSettings"),u=o(d,"jsonXhrSettings")}var f;if(n){var p=r.create(t,e,n,s,l);p&&(f=new h(t,e,i,u),c.call(this,t,"audiosprite",e,[p,f]),this.config.resourceLoad=!1)}else f=new h(t,e,i,u),c.call(this,t,"audiosprite",e,[f]),this.config.resourceLoad=!0,this.config.audioConfig=s,this.config.audioXhrSettings=l},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,i=o(this.config,"audioConfig"),n=o(this.config,"audioXhrSettings"),s=r.create(this.loader,t.key,e,i,n);s&&(this.addToMultiFile(s),this.loader.addFile(s))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});s.register("audioSprite",(function(t,e,i,r,n,s){var o,a=this.systems.game,h=a.config.audio,c=a.device.audio;if(h&&h.noAudio||!c.webAudio&&!c.audioData)return this;if(Array.isArray(t))for(var u=0;u<t.length;u++)(o=new l(this,t[u])).files&&this.addFile(o.files);else(o=new l(this,t,e,i,r,n,s)).files&&this.addFile(o.files);return this}))},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r,n){var o="bin";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),r=a(c,"xhrSettings"),o=a(c,"extension",o),n=a(c,"dataType",n)}var l={type:"binary",cache:t.cacheManager.binary,extension:o,responseType:"arraybuffer",key:e,url:i,xhrSettings:r,config:{dataType:n}};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,r,i));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(49),c=i(212),l=i(241),u=new r({Extends:h,initialize:function(t,e,i,r,n,c){var u,d;if(a(e)){var f=e;e=s(f,"key"),u=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new l(t,{key:e,url:s(f,"fontDataURL"),extension:s(f,"fontDataExtension","xml"),xhrSettings:s(f,"fontDataXhrSettings")})}else u=new o(t,e,i,n),d=new l(t,e,r,c);u.linkFile?h.call(this,t,"bitmapfont",e,[u,d,u.linkFile]):h.call(this,t,"bitmapfont",e,[u,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.pendingDestroy();var i=t.cache.get(t.key),r=c(e.data,t.cache.getFrame(t.key),0,0,i);this.loader.cacheManager.bitmapFont.add(t.key,{data:r,texture:t.key,frame:null}),this.complete=!0}}});n.register("bitmapFont",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r){var n="css";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var c={type:"script",cache:!1,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=i(396),l=new r({Extends:s,initialize:function(t,e,i,r,n){var o="glsl";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),r=a(c,"shaderType","fragment"),n=a(c,"xhrSettings"),o=a(c,"extension",o)}else void 0===r&&(r="fragment");var l={type:"glsl",cache:t.cacheManager.shader,extension:o,responseType:"text",key:e,url:i,config:{shaderType:r},xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i=this.getShaderName(e.header),r=this.getShaderType(e.header),n=this.getShaderUniforms(e.header),s=e.shader;if(this.cache.has(i)){var o=this.cache.get(i);"fragment"===r?o.fragmentSrc=s:o.vertexSrc=s,o.uniforms||(o.uniforms=n)}else"fragment"===r?this.cache.add(i,new c(i,s,"",n)):this.cache.add(i,new c(i,"",s,n));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var r=t[i].trim();if("uniform."===r.substring(0,8)){var n=r.indexOf(":");if(n){var s=r.substring(8,n);try{e[s]=JSON.parse(r.substring(n+1))}catch(t){console.warn("Invalid uniform JSON: "+s)}}}}return e},extractBlock:function(t,e){for(var i=-1,r=-1,n=-1,s=!1,o=!1,a=[],h=[],c=e;c<t.length;c++){var l=t[c].trim();if("---"===l)if(-1===i)i=c,s=!0;else{if(!s){o=!1;break}r=c,s=!1,o=!0}else s?a.push(l):o&&(h.push(l),n=c)}return s||-1===r?null:{header:a,shader:h.join("\n"),offset:n}}});o.register("glsl",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i,r));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r){var n="html";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var c={type:"text",cache:t.cacheManager.html,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r,n,o){void 0===r&&(r=512),void 0===n&&(n=512);var c="html";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),o=a(l,"xhrSettings"),c=a(l,"extension",c),r=a(l,"width",r),n=a(l,"height",n)}var u={type:"html",cache:t.textureManager,extension:c,responseType:"text",key:e,url:i,xhrSettings:o,config:{width:r,height:n}};s.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[];i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var r=[i.join("\n")],o=this;try{var a=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(t){return o.state=n.FILE_ERRORED,void o.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(o.data),o.onProcessError()},s.createObjectURL(this.data,a,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});o.register("htmlTexture",(function(t,e,i,r,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new c(this,t[s]));else this.addFile(new c(this,t,e,i,r,n));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(61),c=i(49),l=new r({Extends:c,initialize:function(t,e,i,r,n,o,l){if(a(e)){var u=e;e=s(u,"key"),i=s(u,"url",!1)?s(u,"url"):s(u,"atlasURL"),o=s(u,"xhrSettings"),r=s(u,"path"),n=s(u,"baseURL"),l=s(u,"textureXhrSettings")}var d=new h(t,e,i,o);c.call(this,t,"multiatlas",e,[d]),this.config.path=r,this.config.baseURL=n,this.config.textureXhrSettings=l},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,i=this.config,r=this.loader,n=r.baseURL,a=r.path,h=r.prefix,c=s(i,"baseURL",this.baseURL),l=s(i,"path",this.path),u=s(i,"prefix",this.prefix),d=s(i,"textureXhrSettings");r.setBaseURL(c),r.setPath(l),r.setPrefix(u);for(var f=0;f<e.length;f++){var p=e[f].image,g="MA"+this.multiKeyIndex+"_"+p,y=new o(r,g,p,d);if(this.addToMultiFile(y),r.addFile(y),e[f].normalMap){var m=new o(r,g,e[f].normalMap,d);m.type="normalMap",y.setLink(m),this.addToMultiFile(m),r.addFile(m)}}r.setBaseURL(n),r.setPath(a),r.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],r=[],n=1;n<this.files.length;n++){var s=this.files[n];if("normalMap"!==s.type)for(var o=s.key.indexOf("_"),a=s.key.substr(o+1),h=s.data,c=0;c<t.data.textures.length;c++){var l=t.data.textures[c];if(l.image===a){i.push(h),e.push(l),s.linkFile&&r.push(s.linkFile.data);break}}}for(0===r.length&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,r),this.complete=!0,n=0;n<this.files.length;n++)this.files[n].pendingDestroy()}}});n.register("multiatlas",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new l(this,t[o]),this.addFile(s.files);else s=new l(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(7),a=i(49),h=i(520),c=new r({Extends:a,initialize:function(t,e,i,r){var n="js",c=[];if(o(e)){var l=e;e=s(l,"key"),i=s(l,"url"),r=s(l,"xhrSettings"),n=s(l,"extension",n)}Array.isArray(i)||(i=[i]);for(var u=0;u<i.length;u++){var d=new h(t,{key:e+"_"+u.toString(),url:i[u],extension:n,xhrSettings:r});d.onProcess=function(){this.onProcessComplete()},c.push(d)}a.call(this,t,"scripts",e,c)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});n.register("scripts",(function(t,e,i){var r;if(Array.isArray(t))for(var n=0;n<t.length;n++)r=new c(this,t[n]),this.addFile(r.files);else r=new c(this,t,e,i),this.addFile(r.files);return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(7),a=i(49),h=i(498),c=i(499),l=i(242),u=new r({Extends:a,initialize:function(t,e,i,r,n,h){var c,u,d=t.cacheManager.obj;if(o(e)){var f=e;e=s(f,"key"),c=new l(t,{key:e,type:"obj",cache:d,url:s(f,"url"),extension:s(f,"extension","obj"),xhrSettings:s(f,"xhrSettings"),config:{flipUV:s(f,"flipUV",n)}}),(r=s(f,"matURL"))&&(u=new l(t,{key:e,type:"mat",cache:d,url:r,extension:s(f,"matExtension","mat"),xhrSettings:s(f,"xhrSettings")}))}else c=new l(t,{key:e,url:i,type:"obj",cache:d,extension:"obj",xhrSettings:h,config:{flipUV:n}}),r&&(u=new l(t,{key:e,url:r,type:"mat",cache:d,extension:"mat",xhrSettings:h}));a.call(this,t,"obj",e,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=h(t.data,t.config.flipUV);e&&(i.materials=c(e.data)),t.cache.add(t.key,i),this.complete=!0}}});n.register("obj",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(21),s=i(8),o=i(61),a=new r({Extends:o,initialize:function(t,e,i,r,n){o.call(this,t,e,i,r,n),this.type="packfile"},onProcess:function(){this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,r,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r,o,c){var l="js";if(h(e)){var u=e;e=a(u,"key"),i=a(u,"url"),c=a(u,"xhrSettings"),l=a(u,"extension",l),r=a(u,"start"),o=a(u,"mapping")}var d={type:"plugin",cache:!1,extension:l,responseType:"text",key:e,url:i,xhrSettings:c,config:{start:r,mapping:o}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=a(e,"start",!1),r=a(e,"mapping",null);if(this.state===n.FILE_POPULATED)t.install(this.key,this.data,i,r);else{this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=t.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=s,this.loader.scene[r]=s)}this.onProcessComplete()}});o.register("plugin",(function(t,e,i,r,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new c(this,t[s]));else this.addFile(new c(this,t,e,i,r,n));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r){var n="js";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var c={type:"text",extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});o.register("sceneFile",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,i));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r,o,c){var l="js";if(h(e)){var u=e;e=a(u,"key"),i=a(u,"url"),c=a(u,"xhrSettings"),l=a(u,"extension",l),r=a(u,"systemKey"),o=a(u,"sceneKey")}var d={type:"scenePlugin",cache:!1,extension:l,responseType:"text",key:e,url:i,xhrSettings:c,config:{systemKey:r,sceneKey:o}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,r=a(e,"systemKey",i),s=a(e,"sceneKey",i);this.state===n.FILE_POPULATED?t.installScenePlugin(r,this.data,s,this.loader.scene,!0):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(r,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",(function(t,e,i,r,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new c(this,t[s]));else this.addFile(new c(this,t,e,i,r,n));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(8),s=i(71),o=new r({Extends:s,initialize:function(t,e,i,r,n){s.call(this,t,e,i,n,r),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});n.register("spritesheet",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new o(this,t[n]));else this.addFile(new o(this,t,e,i,r));return this})),t.exports=o},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=new r({Extends:s,initialize:function(t,e,i,r,n){var o="svg";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),r=a(c,"svgConfig",{}),n=a(c,"xhrSettings"),o=a(c,"extension",o)}var l={type:"svg",cache:t.textureManager,extension:o,responseType:"text",key:e,url:i,xhrSettings:n,config:{width:a(r,"width"),height:a(r,"height"),scale:a(r,"scale")}};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,r=this.config.height,o=this.config.scale;t:if(i&&r||o){var a=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],h=a.hasAttribute("viewBox"),c=parseFloat(a.getAttribute("width")),l=parseFloat(a.getAttribute("height"));if(!h&&c&&l)a.setAttribute("viewBox","0  0 "+c+" "+l);else if(h&&!c&&!l){var u=a.getAttribute("viewBox").split(/\s+|,/);c=u[2],l=u[3]}if(o){if(!c||!l)break t;i=c*o,r=l*o}a.setAttribute("width",i.toString()+"px"),a.setAttribute("height",r.toString()+"px"),e=[(new XMLSerializer).serializeToString(a)]}try{var d=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||s.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,s.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},s.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});o.register("svg",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,i,r));return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),c=i(40),l=new r({Extends:s,initialize:function(t,e,i,r){var n="csv";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var l={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,l),this.tilemapFormat=c.CSV},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});o.register("tilemapCSV",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(61),o=i(40),a=new r({Extends:s,initialize:function(t,e,i,r){s.call(this,t,e,i,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});n.register("tilemapImpact",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(8),s=i(61),o=i(40),a=new r({Extends:s,initialize:function(t,e,i,r){s.call(this,t,e,i,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});n.register("tilemapTiledJSON",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(49),c=i(242),l=new r({Extends:h,initialize:function(t,e,i,r,n,l){var u,d;if(a(e)){var f=e;e=s(f,"key"),u=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new c(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","txt"),xhrSettings:s(f,"atlasXhrSettings")})}else u=new o(t,e,i,n),d=new c(t,e,r,l);u.linkFile?h.call(this,t,"unityatlas",e,[u,d,u.linkFile]):h.call(this,t,"unityatlas",e,[u,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});n.register("unityAtlas",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new l(this,t[o]),this.addFile(s.files);else s=new l(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(155),h=i(2),c=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,n,o,a){void 0===r&&(r="loadeddata"),void 0===n&&(n=!1),void 0===o&&(o=!1),"loadeddata"!==r&&"canplay"!==r&&"canplaythrough"!==r&&(r="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:i.type,responseType:"blob",key:e,url:i.url,xhrSettings:a,config:{loadEvent:r,asBlob:n,noAudio:o}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,t,h)},onProcess:function(){if(this.state=n.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var e=this;this.data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(e.data),e.onProcessError()},s.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)s.prototype.load.call(this);else{this.percentComplete=0;var e=this.createVideoElement();e.addEventListener(t,this.onLoadCallback,!0),e.addEventListener("error",this.onErrorCallback,!0),e.src=a(this,this.loader.baseURL),e.load()}}});l.create=function(t,e,i,r,n,s,o){var a=t.systems.game;c(e)&&(i=h(e,"url",[]),r=h(e,"loadEvent","loadeddata"),n=h(e,"asBlob",!1),s=h(e,"noAudio",!1),o=h(e,"xhrSettings"),e=h(e,"key"));var u=l.getVideoURL(a,i);if(u)return new l(t,e,u,r,n,s,o)},l.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r,n=h(e[i],"url",e[i]);if(0===n.indexOf("blob:"))return{url:n,type:""};if(r=0===n.indexOf("data:")?n.split(",")[0].match(/\/(.*?);/):n.match(/\.([a-zA-Z0-9]+)($|\?)/),r=h(e[i],"type",r?r[1]:"").toLowerCase(),t.device.video[r])return{url:n,type:r}}return null},o.register("video",(function(t,e,i,r,n,s){var o;if(Array.isArray(t))for(var a=0;a<t.length;a++)(o=l.create(this,t[a]))&&this.addFile(o);else(o=l.create(this,t,e,i,r,n,s))&&this.addFile(o);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(149),o=i(9),a=i(95),h=i(8),c=i(2),l=i(24),u=i(20),d=i(156),f=new r({Extends:o,initialize:function(t){o.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(c(i,"baseURL",e.loaderBaseURL)),this.setPath(c(i,"path",e.loaderPath)),this.setPrefix(c(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=c(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=d(c(i,"responseType",e.loaderResponseType),c(i,"async",e.loaderAsync),c(i,"user",e.loaderUser),c(i,"password",e.loaderPassword),c(i,"timeout",e.loaderTimeout),c(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=c(i,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=n.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(a.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),!e&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),this.queue.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var i=0,r=this.baseURL,n=this.path,s=this.prefix;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=t[o],h=c(a,"baseURL",r),l=c(a,"path",n),u=c(a,"prefix",s),d=c(a,"files",null),f=c(a,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(h),this.setPath(l),this.setPrefix(u);for(var p=0;p<d.length;p++){var g=d[p],y=g.hasOwnProperty("type")?g.type:f;this[y]&&(this[y](g),i++)}}}return this.setBaseURL(r),this.setPath(n),this.setPrefix(s),i>0},isLoading:function(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=n.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(u.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===n.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===n.FILE_POPULATED||t.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===n.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===n.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=n.LOADER_COMPLETE,this.systems.events.off(u.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");var r=new Blob([t],{type:i}),n=URL.createObjectURL(r),s=document.createElement("a");return s.download=e,s.textContent="Download "+e,s.href=n,s.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(c(e,"baseURL",t.loaderBaseURL)),this.setPath(c(e,"path",t.loaderPath)),this.setPrefix(c(e,"prefix",t.loaderPrefix)),this.state=n.LOADER_IDLE},shutdown:function(){this.reset(),this.state=n.LOADER_SHUTDOWN,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=n.LOADER_DESTROYED,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",f,"load"),t.exports=f},function(t,e,i){var r=i(62),n=i(17),s={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(0),n=i(36),s=i(50),o=i(353),a=i(521),h=i(2),c=i(127),l=i(523),u=i(244),d=i(24),f=i(20),p=i(3),g=i(526),y=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new a(this.world));var t=this.systems.events;h(this.config,"customUpdate",!1)||t.on(f.UPDATE,this.world.update,this.world),t.on(f.POST_UPDATE,this.world.postUpdate,this.world),t.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return c(h(e,"arcade",{}),h(t,"arcade",{}))},overlap:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.world.collideObjects(t,e,i,r,n,!0)},collide:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.world.collideObjects(t,e,i,r,n,!1)},collideTiles:function(t,e,i,r,n){return this.world.collideTiles(t,e,i,r,n)},overlapTiles:function(t,e,i,r,n){return this.world.overlapTiles(t,e,i,r,n)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,i,r,n,s){void 0===r&&(r=60);var o=Math.atan2(i-t.y,e-t.x);return t.body.acceleration.setToPolar(o,r),void 0!==n&&void 0!==s&&t.body.maxVelocity.set(n,s),o},accelerateToObject:function(t,e,i,r,n){return this.accelerateTo(t,e.x,e.y,i,r,n)},closest:function(t,e){e||(e=this.world.bodies.entries);for(var i=Number.MAX_VALUE,r=null,n=t.x,s=t.y,a=e.length,h=0;h<a;h++){var c=e[h],l=c.body||c;if(t!==c&&t!==l&&t!==l.gameObject&&t!==l.center){var u=o(n,s,l.center.x,l.center.y);u<i&&(r=c,i=u)}}return r},furthest:function(t,e){e||(e=this.world.bodies.entries);for(var i=-1,r=null,n=t.x,s=t.y,a=e.length,h=0;h<a;h++){var c=e[h],l=c.body||c;if(t!==c&&t!==l&&t!==l.gameObject&&t!==l.center){var u=o(n,s,l.center.x,l.center.y);u>i&&(r=c,i=u)}}return r},moveTo:function(t,e,i,r,n){void 0===r&&(r=60),void 0===n&&(n=0);var o=Math.atan2(i-t.y,e-t.x);return n>0&&(r=s(t.x,t.y,e,i)/(n/1e3)),t.body.velocity.setToPolar(o,r),o},moveToObject:function(t,e,i,r){return this.moveTo(t,e.x,e.y,i,r)},velocityFromAngle:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(n(t),e)},velocityFromRotation:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(t,e)},overlapRect:function(t,e,i,r,n,s){return u(this.world,t,e,i,r,n,s)},overlapCirc:function(t,e,i,r,n){return l(this.world,t,e,i,r,n)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(f.UPDATE,this.world.update,this.world),t.off(f.POST_UPDATE,this.world.postUpdate,this.world),t.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",y,"arcadePhysics"),t.exports=y},function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,i){return this.body.setCollideWorldBounds(t,e,i),this}}},function(t,e){t.exports={setDebug:function(t,e,i){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=i,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,e){t.exports={enableBody:function(t,e,i,r,n){return t&&this.body.reset(e,i),r&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,e){t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,e){t.exports={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}}},function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,i){return this.body.setSize(t,e,i),this},setBodySize:function(t,e,i){return this.body.setSize(t,e,i),this},setCircle:function(t,e,i){return this.body.setCircle(t,e,i),this}}},function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},function(t,e){t.exports="collide"},function(t,e){t.exports="overlap"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="tilecollide"},function(t,e){t.exports="tileoverlap"},function(t,e){t.exports="worldbounds"},function(t,e){t.exports="worldstep"},function(t,e){var i,r,n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b=function(){return u&&y&&r.blocked.right?(i.processX(-v,h,!1,!0),1):l&&m&&r.blocked.left?(i.processX(v,h,!0),1):p&&m&&i.blocked.right?(r.processX(-v,c,!1,!0),2):f&&y&&i.blocked.left?(r.processX(v,c,!0),2):0},w=function(t){if(n&&s)v*=.5,0===t||3===t?(i.processX(v,o),r.processX(-v,a)):(i.processX(-v,o),r.processX(v,a));else if(n&&!s)0===t||3===t?i.processX(v,h,!0):i.processX(-v,h,!1,!0);else if(!n&&s)0===t||3===t?r.processX(-v,c,!1,!0):r.processX(v,c,!0);else{var e=.5*v;0===t?g?(i.processX(v,0,!0),r.processX(0,null,!1,!0)):p?(i.processX(e,0,!0),r.processX(-e,0,!1,!0)):(i.processX(e,r.velocity.x,!0),r.processX(-e,null,!1,!0)):1===t?d?(i.processX(0,null,!1,!0),r.processX(v,0,!0)):u?(i.processX(-e,0,!1,!0),r.processX(e,0,!0)):(i.processX(-e,null,!1,!0),r.processX(e,i.velocity.x,!0)):2===t?g?(i.processX(-v,0,!1,!0),r.processX(0,null,!0)):f?(i.processX(-e,0,!1,!0),r.processX(e,0,!0)):(i.processX(-e,r.velocity.x,!1,!0),r.processX(e,null,!0)):3===t&&(d?(i.processX(0,null,!0),r.processX(-v,0,!1,!0)):l?(i.processX(e,0,!0),r.processX(-e,0,!1,!0)):(i.processX(e,r.velocity.y,!0),r.processX(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:b,Check:function(){var t=i.velocity.x,e=r.velocity.x,n=Math.sqrt(e*e*r.mass/i.mass)*(e>0?1:-1),s=Math.sqrt(t*t*i.mass/r.mass)*(t>0?1:-1),h=.5*(n+s);return s-=h,o=h+(n-=h)*i.bounce.x,a=h+s*r.bounce.x,l&&m?w(0):f&&y?w(1):u&&y?w(2):!(!p||!m)&&w(3)},Set:function(t,e,o){r=e;var a=(i=t).velocity.x,w=r.velocity.x;return n=i.pushable,l=i._dx<0,u=i._dx>0,d=0===i._dx,y=Math.abs(i.right-r.x)<=Math.abs(r.right-i.x),h=w-a*i.bounce.x,s=r.pushable,f=r._dx<0,p=r._dx>0,g=0===r._dx,m=!y,c=a-w*r.bounce.x,v=Math.abs(o),b()},Run:w,RunImmovableBody1:function(t){1===t?r.velocity.x=0:y?r.processX(v,c,!0):r.processX(-v,c,!1,!0),i.moves&&(r.y+=(i.y-i.prev.y)*i.friction.y,r._dy=r.y-r.prev.y)},RunImmovableBody2:function(t){2===t?i.velocity.x=0:m?i.processX(v,h,!0):i.processX(-v,h,!1,!0),r.moves&&(i.y+=(r.y-r.prev.y)*r.friction.y,i._dy=i.y-i.prev.y)}}},function(t,e){var i,r,n,s,o,a,h,c,l,u,d,f,p,g,y,m,v,b=function(){return u&&y&&r.blocked.down?(i.processY(-v,h,!1,!0),1):l&&m&&r.blocked.up?(i.processY(v,h,!0),1):p&&m&&i.blocked.down?(r.processY(-v,c,!1,!0),2):f&&y&&i.blocked.up?(r.processY(v,c,!0),2):0},w=function(t){if(n&&s)v*=.5,0===t||3===t?(i.processY(v,o),r.processY(-v,a)):(i.processY(-v,o),r.processY(v,a));else if(n&&!s)0===t||3===t?i.processY(v,h,!0):i.processY(-v,h,!1,!0);else if(!n&&s)0===t||3===t?r.processY(-v,c,!1,!0):r.processY(v,c,!0);else{var e=.5*v;0===t?g?(i.processY(v,0,!0),r.processY(0,null,!1,!0)):p?(i.processY(e,0,!0),r.processY(-e,0,!1,!0)):(i.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)):1===t?d?(i.processY(0,null,!1,!0),r.processY(v,0,!0)):u?(i.processY(-e,0,!1,!0),r.processY(e,0,!0)):(i.processY(-e,null,!1,!0),r.processY(e,i.velocity.y,!0)):2===t?g?(i.processY(-v,0,!1,!0),r.processY(0,null,!0)):f?(i.processY(-e,0,!1,!0),r.processY(e,0,!0)):(i.processY(-e,r.velocity.y,!1,!0),r.processY(e,null,!0)):3===t&&(d?(i.processY(0,null,!0),r.processY(-v,0,!1,!0)):l?(i.processY(e,0,!0),r.processY(-e,0,!1,!0)):(i.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:b,Check:function(){var t=i.velocity.y,e=r.velocity.y,n=Math.sqrt(e*e*r.mass/i.mass)*(e>0?1:-1),s=Math.sqrt(t*t*i.mass/r.mass)*(t>0?1:-1),h=.5*(n+s);return s-=h,o=h+(n-=h)*i.bounce.y,a=h+s*r.bounce.y,l&&m?w(0):f&&y?w(1):u&&y?w(2):!(!p||!m)&&w(3)},Set:function(t,e,o){r=e;var a=(i=t).velocity.y,w=r.velocity.y;return n=i.pushable,l=i._dy<0,u=i._dy>0,d=0===i._dy,y=Math.abs(i.bottom-r.y)<=Math.abs(r.bottom-i.y),h=w-a*i.bounce.y,s=r.pushable,f=r._dy<0,p=r._dy>0,g=0===r._dy,m=!y,c=a-w*r.bounce.y,v=Math.abs(o),b()},Run:w,RunImmovableBody1:function(t){1===t?r.velocity.y=0:y?r.processY(v,c,!0):r.processY(-v,c,!1,!0),i.moves&&(r.x+=(i.x-i.prev.x)*i.friction.x,r._dx=r.x-r.prev.x)},RunImmovableBody2:function(t){2===t?i.velocity.y=0:m?i.processY(v,h,!0):i.processY(-v,h,!1,!0),r.moves&&(i.x+=(r.x-r.prev.x)*r.friction.x,i._dx=i.x-i.prev.x)}}},function(t,e,i){var r={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};t.exports=r},function(t,e,i){var r=i(0),n=i(3),s=new r({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var e=this.boundsCenter,i=this.centerDiff,r=t.bounds.max.x-t.bounds.min.x,n=t.bounds.max.y-t.bounds.min.y,s=r*t.centerOfMass.x,o=n*t.centerOfMass.y;return e.set(r/2,n/2),i.set(s-e.x,o-e.y),!0},getTopLeft:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+r.x+s.x,i+r.y+s.y)}return!1},getTopCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+s.x,i+r.y+s.y)}return!1},getTopRight:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e-(r.x-s.x),i+r.y+s.y)}return!1},getLeftCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+r.x+s.x,i+s.y)}return!1},getCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.centerDiff;return new n(e+r.x,i+r.y)}return!1},getRightCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e-(r.x-s.x),i+s.y)}return!1},getBottomLeft:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+r.x+s.x,i-(r.y-s.y))}return!1},getBottomCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+s.x,i-(r.y-s.y))}return!1},getBottomRight:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e-(r.x-s.x),i-(r.y-s.y))}return!1}});t.exports=s},function(t,e){function i(t,e,i){i=i||0;var r,n,s,o,a,h,c,l=[0,0];return r=t[1][1]-t[0][1],n=t[0][0]-t[1][0],s=r*t[0][0]+n*t[0][1],o=e[1][1]-e[0][1],a=e[0][0]-e[1][0],h=o*e[0][0]+a*e[0][1],S(c=r*a-o*n,0,i)||(l[0]=(a*s-n*h)/c,l[1]=(r*h-o*s)/c),l}function r(t,e,i,r){var n=e[0]-t[0],s=e[1]-t[1],o=r[0]-i[0],a=r[1]-i[1];if(o*s-a*n==0)return!1;var h=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(o*s-a*n),c=(o*(t[1]-i[1])+a*(i[0]-t[0]))/(a*n-o*s);return h>=0&&h<=1&&c>=0&&c<=1}function n(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function s(t,e,i){return n(t,e,i)>0}function o(t,e,i){return n(t,e,i)>=0}function a(t,e,i){return n(t,e,i)<0}function h(t,e,i){return n(t,e,i)<=0}t.exports={decomp:function(t){var e=_(t);return e.length>0?x(t,e):[t]},quickDecomp:function t(e,i,r,n,c,l,u){l=l||100,u=u||0,c=c||25,i=void 0!==i?i:[],r=r||[],n=n||[];var y=[0,0],m=[0,0],v=[0,0],w=0,_=0,x=0,S=0,T=0,A=0,C=0,k=[],R=[],P=e,I=e;if(I.length<3)return i;if(++u>l)return console.warn("quickDecomp: max level ("+l+") reached."),i;for(var O=0;O<e.length;++O)if(g(P,O)){r.push(P[O]),w=_=Number.MAX_VALUE;for(var M=0;M<e.length;++M)s(f(P,O-1),f(P,O),f(P,M))&&h(f(P,O-1),f(P,O),f(P,M-1))&&(v=E(f(P,O-1),f(P,O),f(P,M),f(P,M-1)),a(f(P,O+1),f(P,O),v)&&(x=d(P[O],v))<_&&(_=x,m=v,A=M)),s(f(P,O+1),f(P,O),f(P,M+1))&&h(f(P,O+1),f(P,O),f(P,M))&&(v=E(f(P,O+1),f(P,O),f(P,M),f(P,M+1)),s(f(P,O-1),f(P,O),v)&&(x=d(P[O],v))<w&&(w=x,y=v,T=M));if(A===(T+1)%e.length)v[0]=(m[0]+y[0])/2,v[1]=(m[1]+y[1])/2,n.push(v),O<T?(p(k,P,O,T+1),k.push(v),R.push(v),0!==A&&p(R,P,A,P.length),p(R,P,0,O+1)):(0!==O&&p(k,P,O,P.length),p(k,P,0,T+1),k.push(v),R.push(v),p(R,P,A,O+1));else{if(A>T&&(T+=e.length),S=Number.MAX_VALUE,T<A)return i;for(M=A;M<=T;++M)o(f(P,O-1),f(P,O),f(P,M))&&h(f(P,O+1),f(P,O),f(P,M))&&(x=d(f(P,O),f(P,M)))<S&&b(P,O,M)&&(S=x,C=M%e.length);O<C?(p(k,P,O,C+1),0!==C&&p(R,P,C,I.length),p(R,P,0,O+1)):(0!==O&&p(k,P,O,I.length),p(k,P,0,C+1),p(R,P,C,O+1))}return k.length<R.length?(t(k,i,r,n,c,l,u),t(R,i,r,n,c,l,u)):(t(R,i,r,n,c,l,u),t(k,i,r,n,c,l,u)),i}return i.push(e),i},isSimple:function(t){var e,i=t;for(e=0;e<i.length-1;e++)for(var n=0;n<e-1;n++)if(r(i[e],i[e+1],i[n],i[n+1]))return!1;for(e=1;e<i.length-2;e++)if(r(i[0],i[i.length-1],i[e],i[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var i=0,r=t.length-1;t.length>3&&r>=0;--r)u(f(t,r-1),f(t,r),f(t,r+1),e)&&(t.splice(r%t.length,1),i++);return i},removeDuplicatePoints:function(t,e){for(var i=t.length-1;i>=1;--i)for(var r=t[i],n=i-1;n>=0;--n)T(r,t[n],e)&&t.splice(i,1)},makeCCW:function(t){for(var e=0,i=t,r=1;r<t.length;++r)(i[r][1]<i[e][1]||i[r][1]===i[e][1]&&i[r][0]>i[e][0])&&(e=r);return!s(f(t,e-1),f(t,e),f(t,e+1))&&(function(t){for(var e=[],i=t.length,r=0;r!==i;r++)e.push(t.pop());for(r=0;r!==i;r++)t[r]=e[r]}(t),!0)}};var c=[],l=[];function u(t,e,i,r){if(r){var s=c,o=l;s[0]=e[0]-t[0],s[1]=e[1]-t[1],o[0]=i[0]-e[0],o[1]=i[1]-e[1];var a=s[0]*o[0]+s[1]*o[1],h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),u=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(h*u))<r}return 0===n(t,e,i)}function d(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function f(t,e){var i=t.length;return t[e<0?e%i+i:e%i]}function p(t,e,i,r){for(var n=i;n<r;n++)t.push(e[n])}function g(t,e){return a(f(t,e-1),f(t,e),f(t,e+1))}var y=[],m=[];function v(t,e,r){var n,s,a=y,c=m;if(o(f(t,e+1),f(t,e),f(t,r))&&h(f(t,e-1),f(t,e),f(t,r)))return!1;s=d(f(t,e),f(t,r));for(var l=0;l!==t.length;++l)if((l+1)%t.length!==e&&l!==e&&o(f(t,e),f(t,r),f(t,l+1))&&h(f(t,e),f(t,r),f(t,l))&&(a[0]=f(t,e),a[1]=f(t,r),c[0]=f(t,l),c[1]=f(t,l+1),n=i(a,c),d(f(t,e),n)<s))return!1;return!0}function b(t,e,i){for(var n=0;n!==t.length;++n)if(n!==e&&n!==i&&(n+1)%t.length!==e&&(n+1)%t.length!==i&&r(f(t,e),f(t,i),f(t,n),f(t,n+1)))return!1;return!0}function w(t,e,i,r){var n=r||[];if(function(t){t.length=0}(n),e<i)for(var s=e;s<=i;s++)n.push(t[s]);else{for(s=0;s<=i;s++)n.push(t[s]);for(s=e;s<t.length;s++)n.push(t[s])}return n}function _(t){for(var e=[],i=[],r=[],n=[],s=Number.MAX_VALUE,o=0;o<t.length;++o)if(g(t,o))for(var a=0;a<t.length;++a)if(v(t,o,a)){i=_(w(t,o,a,n)),r=_(w(t,a,o,n));for(var h=0;h<r.length;h++)i.push(r[h]);i.length<s&&(e=i,s=i.length,e.push([f(t,o),f(t,a)]))}return e}function x(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var i=[t],r=0;r<e.length;r++)for(var n=e[r],s=0;s<i.length;s++){var o=x(i[s],n);if(o){i.splice(s,1),i.push(o[0],o[1]);break}}return i}return n=e,r=t.indexOf(n[0]),s=t.indexOf(n[1]),-1!==r&&-1!==s&&[w(t,r,s),w(t,s,r)]}function E(t,e,i,r,n){n=n||0;var s=e[1]-t[1],o=t[0]-e[0],a=s*t[0]+o*t[1],h=r[1]-i[1],c=i[0]-r[0],l=h*i[0]+c*i[1],u=s*c-h*o;return S(u,0,n)?[0,0]:[(c*a-o*l)/u,(s*l-h*a)/u]}function S(t,e,i){return i=i||0,Math.abs(t-e)<=i}function T(t,e,i){return S(t[0],e[0],i)&&S(t[1],e[1],i)}},function(t,e,i){var r=i(86),n=i(0),s=i(591),o=i(128),a=i(592),h=i(1395),c=i(1396),l=i(1397),u=i(593),d=i(589),f=i(590),p=i(1398),g=i(64),y=new n({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,i,n,s){var o=r.rectangle(t,e,i,n,s);return this.world.add(o),o},trapezoid:function(t,e,i,n,s,o){var a=r.trapezoid(t,e,i,n,s,o);return this.world.add(a),a},circle:function(t,e,i,n,s){var o=r.circle(t,e,i,n,s);return this.world.add(o),o},polygon:function(t,e,i,n,s){var o=r.polygon(t,e,i,n,s);return this.world.add(o),o},fromVertices:function(t,e,i,n,s,o,a){"string"==typeof i&&(i=g.fromPath(i));var h=r.fromVertices(t,e,i,n,s,o,a);return this.world.add(h),h},fromPhysicsEditor:function(t,e,i,r,n){void 0===n&&(n=!0);var s=d.parseBody(t,e,i,r);return n&&!this.world.has(s)&&this.world.add(s),s},fromSVG:function(t,e,i,n,s,o){void 0===n&&(n=1),void 0===s&&(s={}),void 0===o&&(o=!0);for(var h=i.getElementsByTagName("path"),c=[],l=0;l<h.length;l++){var u=a.pathToVertices(h[l],30);1!==n&&g.scale(u,n,n),c.push(u)}var d=r.fromVertices(t,e,c,s);return o&&this.world.add(d),d},fromJSON:function(t,e,i,r,n){void 0===r&&(r={}),void 0===n&&(n=!0);var s=f.parseBody(t,e,i,r);return s&&n&&this.world.add(s),s},imageStack:function(t,e,i,r,n,o,a,h,l){void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l={});var u=this.world,d=this.sys.displayList;l.addToWorld=!1;var f=s.stack(i,r,n,o,a,h,(function(i,r){var n=new c(u,i,r,t,e,l);return d.add(n),n.body}));return u.add(f),f},stack:function(t,e,i,r,n,o,a){var h=s.stack(t,e,i,r,n,o,a);return this.world.add(h),h},pyramid:function(t,e,i,r,n,o,a){var h=s.pyramid(t,e,i,r,n,o,a);return this.world.add(h),h},chain:function(t,e,i,r,n,o){return s.chain(t,e,i,r,n,o)},mesh:function(t,e,i,r,n){return s.mesh(t,e,i,r,n)},newtonsCradle:function(t,e,i,r,n){var o=s.newtonsCradle(t,e,i,r,n);return this.world.add(o),o},car:function(t,e,i,r,n){var o=s.car(t,e,i,r,n);return this.world.add(o),o},softBody:function(t,e,i,r,n,o,a,h,c,l){var u=s.softBody(t,e,i,r,n,o,a,h,c,l);return this.world.add(u),u},joint:function(t,e,i,r,n){return this.constraint(t,e,i,r,n)},spring:function(t,e,i,r,n){return this.constraint(t,e,i,r,n)},constraint:function(t,e,i,r,n){void 0===r&&(r=1),void 0===n&&(n={}),n.bodyA="body"===t.type?t:t.body,n.bodyB="body"===e.type?e:e.body,isNaN(i)||(n.length=i),n.stiffness=r;var s=o.create(n);return this.world.add(s),s},worldConstraint:function(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r={}),r.bodyB="body"===t.type?t:t.body,isNaN(e)||(r.length=e),r.stiffness=i;var n=o.create(r);return this.world.add(n),n},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var e=new p(this.scene,this.world,t);return this.world.add(e.constraint),e},image:function(t,e,i,r,n){var s=new c(this.world,t,e,i,r,n);return this.sys.displayList.add(s),s},tileBody:function(t,e){return new u(this.world,t,e)},sprite:function(t,e,i,r,n){var s=new l(this.world,t,e,i,r,n);return this.sys.displayList.add(s),this.sys.updateList.add(s),s},gameObject:function(t,e,i){return h(this.world,t,e,i)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=y},function(t,e,i){var r=i(249),n=i(2),s=i(3);t.exports=function(t,e,i,o){void 0===i&&(i={}),void 0===o&&(o=!0);var a=e.x,h=e.y;if(e.body={temp:!0,position:{x:a,y:h}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach((function(t){for(var i in t)(r=t[i]).get&&"function"==typeof r.get||r.set&&"function"==typeof r.set?Object.defineProperty(e,i,{get:t[i].get,set:t[i].set}):Object.defineProperty(e,i,{value:t[i]});var r})),e.world=t,e._tempVec2=new s(a,h),i.hasOwnProperty("type")&&"body"===i.type)e.setExistingBody(i,o);else{var c=n(i,"shape",null);c||(c="rectangle"),i.addToWorld=o,e.setBody(c,i)}return e}},function(t,e,i){var r=i(0),n=i(249),s=i(15),o=i(2),a=i(125),h=i(167),c=i(3),l=new r({Extends:a,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,h],initialize:function(t,e,i,r,n,a){s.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,n),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(e,i);var h=o(a,"shape",null);h?this.setBody(h,a):this.setRectangle(this.width,this.height,a),this.setPosition(e,i),this.initPipeline()}});t.exports=l},function(t,e,i){var r=i(164),n=i(0),s=i(249),o=i(15),a=i(2),h=i(167),c=i(73),l=i(3),u=new n({Extends:c,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,h],initialize:function(t,e,i,n,s,h){o.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,s),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new l(e,i);var c=a(h,"shape",null);c?this.setBody(c,h):this.setRectangle(this.width,this.height,h),this.setPosition(e,i),this.initPipeline()}});t.exports=u},function(t,e,i){var r=i(84),n=i(0),s=i(118),o=i(128),a=i(273),h=i(272),c=i(51),l=i(127),u=i(165),d=i(3),f=i(64),p=new n({initialize:function(t,e,i){void 0===i&&(i={}),this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=o.create(l(i,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(h.BEFORE_UPDATE,this.update,this),t.sys.input.on(c.POINTER_DOWN,this.onDown,this),t.sys.input.on(c.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var e=this.position,i=this.constraint;this.camera.getWorldPoint(t.x,t.y,e);for(var n=s.allBodies(this.world.localWorld),o=0;o<n.length;o++){var c=n[o];if(!c.ignorePointer&&r.contains(c.bounds,e)&&a.canCollide(c.collisionFilter,i.collisionFilter)&&this.hitTestBody(c,e))return this.world.emit(h.DRAG_START,c,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var i=this.constraint,r=t.parts.length,n=r>1?1:0;n<r;n++){var s=t.parts[n];if(f.contains(s.vertices,e))return i.pointA=e,i.pointB={x:e.x-t.position.x,y:e.y-t.position.y},i.bodyB=t,i.angleB=t.angle,u.set(t,!1),this.part=s,this.body=t,!0}return!1},update:function(){var t=this.pointer,e=this.body;if(this.active&&t)if(t.isDown||!e){if(t.isDown){if(!e&&!this.getBody(t))return;e=this.body;var i=this.position,r=this.constraint;this.camera.getWorldPoint(t.x,t.y,i),r.pointA.x=i.x,r.pointA.y=i.y,u.set(e,!1),this.world.emit(h.DRAG,e,this)}}else this.stopDrag();else e&&this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;e.bodyB=null,e.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(h.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(h.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(c.POINTER_UP,this.onUp,this)}});t.exports=p},function(t,e,i){var r={};t.exports=r;var n=i(595),s=i(32);r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){n.use(r,Array.prototype.slice.call(arguments))},r.before=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathBefore(r,t,e)},r.after=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathAfter(r,t,e)}},function(t,e,i){var r={};t.exports=r;var n=i(83),s=i(274),o=i(84),a=i(86),h=i(64);r.collides=function(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[r];if(t!==n&&o.overlaps(n.bounds,t.bounds))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var h=n.parts[a];if(o.overlaps(h.bounds,t.bounds)){var c=s.collides(h,t);if(c.collided){i.push(c);break}}}}return i},r.ray=function(t,e,i,s){s=s||1e-100;for(var o=n.angle(e,i),h=n.magnitude(n.sub(e,i)),c=.5*(i.x+e.x),l=.5*(i.y+e.y),u=a.rectangle(c,l,h,s,{angle:o}),d=r.collides(u,t),f=0;f<d.length;f+=1){var p=d[f];p.body=p.bodyB=p.bodyA}return d},r.region=function(t,e,i){for(var r=[],n=0;n<t.length;n++){var s=t[n],a=o.overlaps(s.bounds,e);(a&&!i||!a&&i)&&r.push(s)}return r},r.point=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r];if(o.contains(n.bounds,e))for(var s=1===n.parts.length?0:1;s<n.parts.length;s++){var a=n.parts[s];if(o.contains(a.bounds,e)&&h.contains(a.vertices,e)){i.push(n);break}}}return i}},function(t,e,i){var r={};t.exports=r;var n=i(596),s=i(165),o=i(599),a=i(598),h=i(1523),c=i(597),l=i(166),u=i(118),d=i(128),f=i(32),p=i(41);r.create=function(t,e){e=(e=f.isElement(t)?e:t)||{},((t=f.isElement(t)?t:null)||e.render)&&f.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},r=f.extend(i,e);return r.world=e.world||n.create(r.world),r.pairs=a.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r.metrics=h.create(r.metrics),r},r.update=function(t,e,i){e=e||1e3/60,i=i||1;var n,c=t.world,f=t.timing,p=t.broadphase,g=[];f.timestamp+=e*f.timeScale;var y={timestamp:f.timestamp};l.trigger(t,"beforeUpdate",y);var m=u.allBodies(c),v=u.allConstraints(c);for(h.reset(t.metrics),t.enableSleeping&&s.update(m,f.timeScale),r._bodiesApplyGravity(m,c.gravity),r._bodiesUpdate(m,e,f.timeScale,i,c.bounds),d.preSolveAll(m),n=0;n<t.constraintIterations;n++)d.solveAll(v,f.timeScale);d.postSolveAll(m),p.controller?(c.isModified&&p.controller.clear(p),p.controller.update(p,m,t,c.isModified),g=p.pairsList):g=m,c.isModified&&u.setModified(c,!1,!1,!0);var b=p.detector(g,t),w=t.pairs,_=f.timestamp;for(a.update(w,b,_),a.removeOld(w,_),t.enableSleeping&&s.afterCollisions(w.list,f.timeScale),w.collisionStart.length>0&&l.trigger(t,"collisionStart",{pairs:w.collisionStart}),o.preSolvePosition(w.list),n=0;n<t.positionIterations;n++)o.solvePosition(w.list,m,f.timeScale);for(o.postSolvePosition(m),d.preSolveAll(m),n=0;n<t.constraintIterations;n++)d.solveAll(v,f.timeScale);for(d.postSolveAll(m),o.preSolveVelocity(w.list),n=0;n<t.velocityIterations;n++)o.solveVelocity(w.list,f.timeScale);return w.collisionActive.length>0&&l.trigger(t,"collisionActive",{pairs:w.collisionActive}),w.collisionEnd.length>0&&l.trigger(t,"collisionEnd",{pairs:w.collisionEnd}),h.update(t.metrics,t),r._bodiesClearForces(m),l.trigger(t,"afterUpdate",y),t},r.merge=function(t,e){if(f.extend(t,e),e.world){t.world=e.world,r.clear(t);for(var i=u.allBodies(t.world),n=0;n<i.length;n++){var o=i[n];s.set(o,!1),o.id=f.nextId()}}},r.clear=function(t){var e=t.world;a.clear(t.pairs);var i=t.broadphase;if(i.controller){var r=u.allBodies(e);i.controller.clear(i),i.controller.update(i,r,t,!0)}},r._bodiesClearForces=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.force.x=0,i.force.y=0,i.torque=0}},r._bodiesApplyGravity=function(t,e){var i=void 0!==e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==i)for(var r=0;r<t.length;r++){var n=t[r];n.ignoreGravity||n.isStatic||n.isSleeping||(n.force.x+=n.mass*e.x*i*n.gravityScale.x,n.force.y+=n.mass*e.y*i*n.gravityScale.y)}},r._bodiesUpdate=function(t,e,i,r,n){for(var s=0;s<t.length;s++){var o=t[s];o.isStatic||o.isSleeping||p.update(o,e,i,r)}}},function(t,e,i){var r=i(86),n=i(41),s=i(0),o=i(32),a=i(118),h=i(1401),c=i(9),l=i(272),u=i(2),d=i(6),f=i(41),p=i(166),g=i(593),y=i(596),m=i(83),v=new s({Extends:c,initialize:function(t,e){c.call(this),this.scene=t,this.engine=h.create(e),this.localWorld=this.engine.world;var i=d(e,"gravity",null);i?this.setGravity(i.x,i.y,i.scale):!1===i&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=d(e,"enabled",!0),this.correction=d(e,"correction",1),this.getDelta=d(e,"getDelta",this.update60Hz);var r=u(e,"runner",{}),n=u(r,"fps",!1),s=u(r,"fps",60),o=u(r,"delta",1e3/s),a=u(r,"deltaMin",1e3/s),l=u(r,"deltaMax",1e3/(.5*s));n||(s=1e3/o),this.runner={fps:s,correction:u(r,"correction",1),deltaSampleSize:u(r,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:u(r,"isFixed",!1),delta:o,deltaMin:a,deltaMax:l},this.autoUpdate=d(e,"autoUpdate",!0);var f=d(e,"debug",!1);if(this.drawDebug="object"==typeof f||f,this.debugGraphic,this.debugConfig={showAxes:u(f,"showAxes",!1),showAngleIndicator:u(f,"showAngleIndicator",!1),angleColor:u(f,"angleColor",15208787),showBroadphase:u(f,"showBroadphase",!1),broadphaseColor:u(f,"broadphaseColor",16757760),showBounds:u(f,"showBounds",!1),boundsColor:u(f,"boundsColor",16777215),showVelocity:u(f,"showVelocity",!1),velocityColor:u(f,"velocityColor",44783),showCollisions:u(f,"showCollisions",!1),collisionColor:u(f,"collisionColor",16094476),showSeparations:u(f,"showSeparations",!1),separationColor:u(f,"separationColor",16753920),showBody:u(f,"showBody",!0),showStaticBody:u(f,"showStaticBody",!0),showInternalEdges:u(f,"showInternalEdges",!1),renderFill:u(f,"renderFill",!1),renderLine:u(f,"renderLine",!0),fillColor:u(f,"fillColor",1075465),fillOpacity:u(f,"fillOpacity",1),lineColor:u(f,"lineColor",2678297),lineOpacity:u(f,"lineOpacity",1),lineThickness:u(f,"lineThickness",1),staticFillColor:u(f,"staticFillColor",857979),staticLineColor:u(f,"staticLineColor",1255396),showSleeping:u(f,"showSleeping",!1),staticBodySleepOpacity:u(f,"staticBodySleepOpacity",.7),sleepFillColor:u(f,"sleepFillColor",4605510),sleepLineColor:u(f,"sleepLineColor",10066585),showSensors:u(f,"showSensors",!0),sensorFillColor:u(f,"sensorFillColor",857979),sensorLineColor:u(f,"sensorLineColor",1255396),showPositions:u(f,"showPositions",!0),positionSize:u(f,"positionSize",4),positionColor:u(f,"positionColor",14697178),showJoint:u(f,"showJoint",!0),jointColor:u(f,"jointColor",14737474),jointLineOpacity:u(f,"jointLineOpacity",1),jointLineThickness:u(f,"jointLineThickness",2),pinSize:u(f,"pinSize",4),pinColor:u(f,"pinColor",4382944),springColor:u(f,"springColor",14697184),anchorColor:u(f,"anchorColor",15724527),anchorSize:u(f,"anchorSize",4),showConvexHulls:u(f,"showConvexHulls",!1),hullColor:u(f,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),u(e,"setBounds",!1)){var p=e.setBounds;if("boolean"==typeof p)this.setBounds();else{var g=u(p,"x",0),y=u(p,"y",0),m=u(p,"width",t.sys.scale.width),v=u(p,"height",t.sys.scale.height),b=u(p,"thickness",64),w=u(p,"left",!0),_=u(p,"right",!0),x=u(p,"top",!0),E=u(p,"bottom",!0);this.setBounds(g,y,m,v,b,w,_,x,E)}}},setCompositeRenderStyle:function(t){var e,i,r,n=t.bodies,s=t.constraints,o=t.composites;for(e=0;e<n.length;e++)r=(i=n[e]).render,this.setBodyRenderStyle(i,r.lineColor,r.lineOpacity,r.lineThickness,r.fillColor,r.fillOpacity);for(e=0;e<s.length;e++)r=(i=s[e]).render,this.setConstraintRenderStyle(i,r.lineColor,r.lineOpacity,r.lineThickness,r.pinSize,r.anchorColor,r.anchorSize);for(e=0;e<o.length;e++)i=o[e],this.setCompositeRenderStyle(i);return this},setBodyRenderStyle:function(t,e,i,r,n,s){var o=t.render,a=this.debugConfig;return o?(null==e&&(e=t.isStatic?a.staticLineColor:a.lineColor),null==i&&(i=a.lineOpacity),null==r&&(r=a.lineThickness),null==n&&(n=t.isStatic?a.staticFillColor:a.fillColor),null==s&&(s=a.fillOpacity),!1!==e&&(o.lineColor=e),!1!==i&&(o.lineOpacity=i),!1!==r&&(o.lineThickness=r),!1!==n&&(o.fillColor=n),!1!==s&&(o.fillOpacity=s),this):this},setConstraintRenderStyle:function(t,e,i,r,n,s,o){var a=t.render,h=this.debugConfig;if(!a)return this;if(null==e){var c=a.type;"line"===c?e=h.jointColor:"pin"===c?e=h.pinColor:"spring"===c&&(e=h.springColor)}return null==i&&(i=h.jointLineOpacity),null==r&&(r=h.jointLineThickness),null==n&&(n=h.pinSize),null==s&&(s=h.anchorColor),null==o&&(o=h.anchorSize),!1!==e&&(a.lineColor=e),!1!==i&&(a.lineOpacity=i),!1!==r&&(a.lineThickness=r),!1!==n&&(a.pinSize=n),!1!==s&&(a.anchorColor=s),!1!==o&&(a.anchorSize=o),this},setEventsProxy:function(){var t=this,e=this.engine,i=this.localWorld;this.drawDebug&&(p.on(i,"compositeModified",(function(e){t.setCompositeRenderStyle(e)})),p.on(i,"beforeAdd",(function(e){for(var i=[].concat(e.object),r=0;r<i.length;r++){var n=i[r],s=n.render;"body"===n.type?t.setBodyRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.fillColor,s.fillOpacity):"composite"===n.type?t.setCompositeRenderStyle(n):"constraint"===n.type&&t.setConstraintRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.pinSize,s.anchorColor,s.anchorSize)}}))),p.on(i,"beforeAdd",(function(e){t.emit(l.BEFORE_ADD,e)})),p.on(i,"afterAdd",(function(e){t.emit(l.AFTER_ADD,e)})),p.on(i,"beforeRemove",(function(e){t.emit(l.BEFORE_REMOVE,e)})),p.on(i,"afterRemove",(function(e){t.emit(l.AFTER_REMOVE,e)})),p.on(e,"beforeUpdate",(function(e){t.emit(l.BEFORE_UPDATE,e)})),p.on(e,"afterUpdate",(function(e){t.emit(l.AFTER_UPDATE,e)})),p.on(e,"collisionStart",(function(e){var i,r,n=e.pairs;n.length>0&&(i=n[0].bodyA,r=n[0].bodyB),t.emit(l.COLLISION_START,e,i,r)})),p.on(e,"collisionActive",(function(e){var i,r,n=e.pairs;n.length>0&&(i=n[0].bodyA,r=n[0].bodyB),t.emit(l.COLLISION_ACTIVE,e,i,r)})),p.on(e,"collisionEnd",(function(e){var i,r,n=e.pairs;n.length>0&&(i=n[0].bodyA,r=n[0].bodyB),t.emit(l.COLLISION_END,e,i,r)}))},setBounds:function(t,e,i,r,n,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===n&&(n=64),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),this.updateWall(s,"left",t-n,e-n,n,r+2*n),this.updateWall(o,"right",t+i,e-n,n,r+2*n),this.updateWall(a,"top",t,e-n,i,n),this.updateWall(h,"bottom",t,e+r,i,n),this},updateWall:function(t,e,i,r,n,s){var o=this.walls[e];t?(o&&y.remove(this.localWorld,o),i+=n/2,r+=s/2,this.walls[e]=this.create(i,r,n,s,{isStatic:!0,friction:0,frictionStatic:0})):(o&&y.remove(this.localWorld,o),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,void 0!==i&&(this.localWorld.gravity.scale=i),this},create:function(t,e,i,n,s){var o=r.rectangle(t,e,i,n,s);return y.add(this.localWorld,o),o},add:function(t){return y.add(this.localWorld,t),this},remove:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],n=r.body?r.body:r;a.remove(this.localWorld,n,e)}return this},removeConstraint:function(t,e){return a.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var i=t.layer,r=t.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});return this.convertTiles(r,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var i=0;i<t.length;i++)new g(this,t[i],e);return this},nextGroup:function(t){return f.nextGroup(t)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(l.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(l.RESUME),this},update:function(t,e){if(this.enabled&&this.autoUpdate){var i=this.engine,r=this.runner,n=i.timing,s=this.correction;r.isFixed?e=this.getDelta(t,e):(e=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(e),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),s=(e=(e=(e=Math.min.apply(null,r.deltaHistory))<r.deltaMin?r.deltaMin:e)>r.deltaMax?r.deltaMax:e)/r.delta,r.delta=e),0!==r.timeScalePrev&&(s*=n.timeScale/r.timeScalePrev),0===n.timeScale&&(s=0),r.timeScalePrev=n.timeScale,r.correction=s,r.frameCounter+=1,t-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),h.update(i,e,s)}},step:function(t,e){h.update(this.engine,t,e)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var e=t.hasOwnProperty("body")?t.body:t;return null!==a.get(this.localWorld,e.id,e.type)},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,e=this.engine,i=this.debugGraphic,r=a.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&e.broadphase.controller&&this.renderGrid(e.broadphase,i,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(r,i,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(r),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(r,i,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(r,i,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(e.pairs.list,i,t.separationColor),t.showCollisions&&this.renderCollisions(e.pairs.list,i,t.collisionColor)}},renderGrid:function(t,e,i,r){e.lineStyle(1,i,r);for(var n=o.keys(t.buckets),s=0;s<n.length;s++){var a=n[s];if(!(t.buckets[a].length<2)){var h=a.split(/C|R/);e.strokeRect(parseInt(h[1],10)*t.bucketWidth,parseInt(h[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,e,i){e.lineStyle(1,i,1);for(var r=0;r<t.length;r++){var n=t[r];if(n.isActive){var s=n.collision,o=s.bodyA,a=s.bodyB,h=o.position,c=a.position,l=s.penetration,u=o.isStatic||a.isStatic?1:4;a.isStatic&&(u=0),e.lineBetween(c.x,c.y,c.x-l.x*u,c.y-l.y*u),u=o.isStatic||a.isStatic?1:4,o.isStatic&&(u=0),e.lineBetween(h.x,h.y,h.x-l.x*u,h.y-l.y*u)}}return this},renderCollisions:function(t,e,i){var r,n;for(e.lineStyle(1,i,.5),e.fillStyle(i,1),r=0;r<t.length;r++)if((n=t[r]).isActive)for(var s=0;s<n.activeContacts.length;s++){var o=n.activeContacts[s].vertex;e.fillRect(o.x-2,o.y-2,5,5)}for(r=0;r<t.length;r++)if((n=t[r]).isActive){var a=n.collision,h=n.activeContacts;if(h.length>0){var c=h[0].vertex.x,l=h[0].vertex.y;2===h.length&&(c=(h[0].vertex.x+h[1].vertex.x)/2,l=(h[0].vertex.y+h[1].vertex.y)/2),a.bodyB===a.supports[0].body||a.bodyA.isStatic?e.lineBetween(c-8*a.normal.x,l-8*a.normal.y,c,l):e.lineBetween(c+8*a.normal.x,l+8*a.normal.y,c,l)}}return this},renderBodyBounds:function(t,e,i,r){e.lineStyle(1,i,r);for(var n=0;n<t.length;n++){var s=t[n];if(s.render.visible){var o=s.bounds;if(o)e.strokeRect(o.min.x,o.min.y,o.max.x-o.min.x,o.max.y-o.min.y);else for(var a=s.parts,h=a.length>1?1:0;h<a.length;h++){var c=a[h];e.strokeRect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}}return this},renderBodyAxes:function(t,e,i,r,n){e.lineStyle(1,r,n);for(var s=0;s<t.length;s++){var o,a,h,c=t[s],l=c.parts;if(c.render.visible)if(i)for(a=l.length>1?1:0;a<l.length;a++)for(o=l[a],h=0;h<o.axes.length;h++){var u=o.axes[h];e.lineBetween(o.position.x,o.position.y,o.position.x+20*u.x,o.position.y+20*u.y)}else for(a=l.length>1?1:0;a<l.length;a++)for(o=l[a],h=0;h<o.axes.length;h++)e.lineBetween(o.position.x,o.position.y,(o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,e,i,r,n){e.lineStyle(n,i,r);for(var s=0;s<t.length;s++){var o=t[s];o.render.visible&&e.lineBetween(o.position.x,o.position.y,o.position.x+2*(o.position.x-o.positionPrev.x),o.position.y+2*(o.position.y-o.positionPrev.y))}return this},renderBodies:function(t){for(var e=this.debugGraphic,i=this.debugConfig,r=i.showBody,n=i.showStaticBody,s=i.showSleeping,o=i.showInternalEdges,a=i.showConvexHulls,h=i.renderFill,c=i.renderLine,l=i.staticBodySleepOpacity,u=i.sleepFillColor,d=i.sleepLineColor,f=i.hullColor,p=0;p<t.length;p++){var g=t[p];if(g.render.visible&&(n||!g.isStatic)&&(r||g.isStatic)){var y=g.render.lineColor,m=g.render.lineOpacity,v=g.render.lineThickness,b=g.render.fillColor,w=g.render.fillOpacity;s&&g.isSleeping&&(g.isStatic?(m*=l,w*=l):(y=d,b=u)),h||(b=null),c||(y=null),this.renderBody(g,e,o,y,m,v,b,w);var _=g.parts.length;a&&_>1&&this.renderConvexHull(g,e,f,v)}}},renderBody:function(t,e,i,r,n,s,o,a){void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=1),void 0===o&&(o=null),void 0===a&&(a=null);for(var h=this.debugConfig,c=h.sensorFillColor,l=h.sensorLineColor,u=t.parts,d=u.length,f=d>1?1:0;f<d;f++){var p=u[f],g=p.render,y=g.opacity;if(g.visible&&0!==y&&(!p.isSensor||h.showSensors)){var m=p.circleRadius;if(e.beginPath(),p.isSensor?(null!==o&&e.fillStyle(c,a*y),null!==r&&e.lineStyle(s,l,n*y)):(null!==o&&e.fillStyle(o,a*y),null!==r&&e.lineStyle(s,r,n*y)),m)e.arc(p.position.x,p.position.y,m,0,2*Math.PI);else{var v=p.vertices,b=v.length;e.moveTo(v[0].x,v[0].y);for(var w=1;w<b;w++){var _=v[w];if(!v[w-1].isInternal||i?e.lineTo(_.x,_.y):e.moveTo(_.x,_.y),w<b&&_.isInternal&&!i){var x=(w+1)%b;e.moveTo(v[x].x,v[x].y)}}e.closePath()}null!==o&&e.fillPath(),null!==r&&e.strokePath()}}if(h.showPositions&&!t.isStatic){var E=t.position.x,S=t.position.y,T=Math.ceil(h.positionSize/2);e.fillStyle(h.positionColor,1),e.fillRect(E-T,S-T,h.positionSize,h.positionSize)}return this},renderConvexHull:function(t,e,i,r){if(void 0===r&&(r=1),t.parts.length>1){var n=t.vertices;e.lineStyle(r,i),e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var s=1;s<n.length;s++)e.lineTo(n[s].x,n[s].y);e.lineTo(n[0].x,n[0].y),e.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,e=a.allConstraints(this.localWorld),i=0;i<e.length;i++){var r=e[i].render,n=r.lineColor,s=r.lineOpacity,o=r.lineThickness,h=r.pinSize,c=r.anchorColor,l=r.anchorSize;this.renderConstraint(e[i],t,n,s,o,h,c,l)}},renderConstraint:function(t,e,i,r,n,s,a,h){var c=t.render;if(!c.visible||!t.pointA||!t.pointB)return this;e.lineStyle(n,i,r);var l,u,d=t.bodyA,f=t.bodyB;if(l=d?m.add(d.position,t.pointA):t.pointA,"pin"===c.type)e.strokeCircle(l.x,l.y,s);else{if(u=f?m.add(f.position,t.pointB):t.pointB,e.beginPath(),e.moveTo(l.x,l.y),"spring"===c.type)for(var p,g=m.sub(u,l),y=m.perp(m.normalise(g)),v=Math.ceil(o.clamp(t.length/5,12,20)),b=1;b<v;b+=1)p=b%2==0?1:-1,e.lineTo(l.x+g.x*(b/v)+y.x*p*4,l.y+g.y*(b/v)+y.y*p*4);e.lineTo(u.x,u.y)}return e.strokePath(),c.anchors&&h>0&&(e.fillStyle(a),e.fillCircle(l.x,l.y,h),e.fillCircle(u.x,u.y,h)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),h.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=v},function(t,e,i){t.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(t,e,i){var r=i(540),n=i(0),s=i(20),o=new n({Extends:r,initialize:function(t,e,i){r.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=i,t.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,e,i){t.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(t,e,i){t.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(t,e,i){t.exports={Canvas:i(369),WebGL:i(383)}},function(t,e,i){var r=i(107),n=i(17),s={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(92),n=i(17),s={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(0),n=i(198),s=i(2),o=i(1411),a=i(382),h=i(58),c=new r({Extends:h,initialize:function(t){t.renderTarget=s(t,"renderTarget",1),t.fragShader=s(t,"fragShader",o),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new n,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){h.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,e,i,r,n){this.manager.copyFrame(t,e,i,r,n)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,i){this.manager.drawFrame(t,e,i,this.colorMatrix)},blendFrames:function(t,e,i,r,n){this.manager.blendFrames(t,e,i,r,n)},blendFramesAdditive:function(t,e,i,r,n){this.manager.blendFramesAdditive(t,e,i,r,n)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,i,r,n,s){this.manager.blitFrame(t,e,i,r,n,s)},copyFrameRect:function(t,e,i,r,n,s,o,a){this.manager.copyFrameRect(t,e,i,r,n,s,o,a)},bindAndDraw:function(t,e,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=!0);var s=this.gl,o=this.renderer;this.bind(n),this.set1i("uMainSampler",0),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0),i&&(r?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT))):(o.popFramebuffer(!1,!1,!1),o.currentFramebuffer||s.viewport(0,0,o.width,o.height)),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),e?(s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null)):o.resetTextures()}});t.exports=c},function(t,e){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,e,i){var r=i(17),n=i(201),s={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};s=r(!1,s,n.CENTER),s=r(!1,s,n.ORIENTATION),s=r(!1,s,n.SCALE_MODE),s=r(!1,s,n.ZOOM),t.exports=s},function(t,e,i){var r=i(144),n=i(17),s={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(18),n=i(0),s=i(20),o=i(2),a=i(24),h=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=o(t,"target",!1),i=this.manager.getScene(e);if(!e||!this.checkValidTransition(i))return!1;var r=o(t,"duration",1e3);this._elapsed=0,this._target=i,this._duration=r,this._willSleep=o(t,"sleep",!1),this._willRemove=o(t,"remove",!1);var n=o(t,"onUpdate",null);n&&(this._onUpdate=n,this._onUpdateScope=o(t,"onUpdateScope",this.scene));var a=o(t,"allowInput",!1);this.settings.transitionAllowInput=a;var h=i.sys.settings;return h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=r,h.transitionAllowInput=a,o(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):o(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),i.sys.isSleeping()?i.sys.wake(o(t,"data")):this.manager.start(e,o(t,"data")),this.systems.events.emit(s.TRANSITION_OUT,i,r),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),t.events.emit(s.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,i,r){return this.manager.add(t,e,i,r)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,i){void 0===e&&(e=this.key);var r=this.manager.getScene(e);return r&&r.sys.setActive(t,i),this},setVisible:function(t,e){void 0===e&&(e=this.key);var i=this.manager.getScene(e);return i&&i.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(s.SHUTDOWN,this.shutdown,this),t.off(s.POST_UPDATE,this.step,this),t.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",h,"scenePlugin"),t.exports=h},function(t,e,i){t.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(t,e,i){var r=i(17),n=i(1417),s={CanvasTexture:i(423),Events:i(106),FilterMode:n,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};s=r(!1,s,n),t.exports=s},function(t,e){t.exports={LINEAR:0,NEAREST:1}},function(t,e,i){var r=i(17),n=i(1419),s={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};s=r(!1,s,n.ORIENTATION),t.exports=s},function(t,e,i){var r={ORIENTATION:i(29)};t.exports=r},function(t,e,i){var r=i(26),n=i(63);t.exports=function(t,e,i,s,o,a,h,c){void 0===h&&(h=!0),t<0&&(t=0),e<0&&(e=0);for(var l=r(t,e,i,s,null,c),u=o-t,d=a-e,f=0;f<l.length;f++){var p=l[f].x+u,g=l[f].y+d;p>=0&&p<c.width&&g>=0&&g<c.height&&c.data[g][p]&&c.data[g][p].copy(l[f])}h&&n(o-1,a-1,i+2,s+2,c)}},function(t,e,i){var r=i(26),n=i(542);t.exports=function(t,e,i,s,o,a){i||(i={}),Array.isArray(t)||(t=[t]);var h=a.tilemapLayer;s||(s=h.scene),o||(o=s.cameras.main);var c,l=r(0,0,a.width,a.height,null,a),u=[];for(c=0;c<l.length;c++){var d=l[c];if(-1!==t.indexOf(d.index)){var f=h.tileToWorldXY(d.x,d.y,void 0,o,a);i.x=f.x,i.y=f.y,u.push(s.make.sprite(i))}}if("number"==typeof e)for(c=0;c<t.length;c++)n(t[c],e,0,0,a.width,a.height,a);else if(Array.isArray(e))for(c=0;c<t.length;c++)n(t[c],e[c],0,0,a.width,a.height,a);return u}},function(t,e,i){var r=i(26),n=i(63),s=i(72);t.exports=function(t,e,i,o,a,h,c){for(var l=-1!==c.collideIndexes.indexOf(t),u=r(e,i,o,a,null,c),d=0;d<u.length;d++)u[d].index=t,s(u[d],l);h&&n(e-1,i-1,o+2,a+2,c)}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a,h){return r(i,n,s,o,a,h).filter(t,e)}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=!1);var n,s,o,a=0;if(i){for(s=r.height-1;s>=0;s--)for(n=r.width-1;n>=0;n--)if((o=r.data[s][n])&&o.index===t){if(a===e)return o;a+=1}}else for(s=0;s<r.height;s++)for(n=0;n<r.width;n++)if((o=r.data[s][n])&&o.index===t){if(a===e)return o;a+=1}return null}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a,h){return r(i,n,s,o,a,h).find(t,e)||null}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a,h){r(i,n,s,o,a,h).forEach(t,e)}},function(t,e,i){var r=i(29),n=i(544),s=i(545),o=i(547),a=i(1),h=i(548);t.exports=function(t){return t===r.ORTHOGONAL?n:t===r.HEXAGONAL?s:t===r.STAGGERED?h:t===r.ISOMETRIC?o:a}},function(t,e,i){var r=i(158),n=new(i(3));t.exports=function(t,e,i,s,o){return o.tilemapLayer.worldToTileXY(t,e,!0,n,s),r(n.x,n.y,i,o)}},function(t,e,i){var r=i(483),n=i(26),s=i(484),o=i(1),a=i(3),h=function(t,e){return s.RectangleToTriangle(e,t)},c=new a,l=new a,u=new a;t.exports=function(t,e,i,a){if(void 0===t)return[];var d=o;t instanceof r.Circle?d=s.CircleToRectangle:t instanceof r.Rectangle?d=s.RectangleToRectangle:t instanceof r.Triangle?d=h:t instanceof r.Line&&(d=s.LineToRectangle),a.tilemapLayer.worldToTileXY(t.left,t.top,!0,l,i);var f=l.x,p=l.y;a.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,u,i);var g=Math.ceil(u.x),y=Math.ceil(u.y),m=Math.max(g-f,1),v=Math.max(y-p,1),b=n(f,p,m,v,e,a),w=a.tileWidth,_=a.tileHeight;a.tilemapLayer&&(w*=a.tilemapLayer.scaleX,_*=a.tilemapLayer.scaleY);for(var x=[],E=new r.Rectangle(0,0,w,_),S=0;S<b.length;S++){var T=b[S];a.tilemapLayer.tileToWorldXY(T.x,T.y,c,i),E.x=c.x,E.y=c.y,d(t,E)&&x.push(T)}return x}},function(t,e,i){var r=i(29),n=i(1),s=i(253);t.exports=function(t){return t===r.ORTHOGONAL?s:n}},function(t,e,i){var r=i(29),n=i(550),s=i(551),o=i(1),a=i(552),h=i(553);t.exports=function(t){return t===r.ORTHOGONAL?h:t===r.ISOMETRIC?s:t===r.HEXAGONAL?n:t===r.STAGGERED?a:o}},function(t,e,i){var r=i(29),n=i(554),s=i(1),o=i(555),a=i(254);t.exports=function(t){return t===r.ORTHOGONAL?a:t===r.HEXAGONAL?n:t===r.STAGGERED?o:s}},function(t,e,i){var r=i(29),n=i(1),s=i(255);t.exports=function(t){return t===r.ORTHOGONAL?s:n}},function(t,e,i){var r=i(29),n=i(556),s=i(557),o=i(1),a=i(558),h=i(559);t.exports=function(t){return t===r.ORTHOGONAL?h:t===r.ISOMETRIC?s:t===r.HEXAGONAL?n:t===r.STAGGERED?a:o}},function(t,e,i){var r=i(29),n=i(560),s=i(1),o=i(561),a=i(256);t.exports=function(t){return t===r.ORTHOGONAL?a:t===r.HEXAGONAL?n:t===r.STAGGERED?o:s}},function(t,e,i){var r=i(562),n=new(i(3));t.exports=function(t,e,i,s){s.tilemapLayer.worldToTileXY(t,e,!0,n,i);var o=n.x,a=n.y;return r(o,a,s)}},function(t,e,i){var r=i(257),n=new(i(3));t.exports=function(t,e,i,s,o,a){return a.tilemapLayer.worldToTileXY(e,i,!0,n,o,a),r(t,n.x,n.y,s,a)}},function(t,e,i){var r=i(63),n=i(257);t.exports=function(t,e,i,s,o){if(void 0===s&&(s=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var a=t.length,h=t[0].length,c=0;c<a;c++)for(var l=0;l<h;l++){var u=t[c][l];n(u,e+l,i+c,!1,o)}s&&r(e-1,i-1,h+2,a+2,o)}},function(t,e,i){var r=i(26),n=i(210);t.exports=function(t,e,i,s,o,a){var h,c=r(t,e,i,s,{},a);if(!o)for(o=[],h=0;h<c.length;h++)-1===o.indexOf(c[h].index)&&o.push(c[h].index);for(h=0;h<c.length;h++)c[h].index=n(o)}},function(t,e,i){var r=i(563),n=new(i(3));t.exports=function(t,e,i,s,o,a){return a.tilemapLayer.worldToTileXY(t,e,!0,n,o,a),r(n.x,n.y,i,s,a)}},function(t,e,i){var r=i(26),n=i(397),s=new n(105,210,231,150),o=new n(243,134,48,200),a=new n(40,39,37,150);t.exports=function(t,e,i){void 0===e&&(e={});var n=void 0!==e.tileColor?e.tileColor:s,h=void 0!==e.collidingTileColor?e.collidingTileColor:o,c=void 0!==e.faceColor?e.faceColor:a,l=r(0,0,i.width,i.height,null,i);t.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),t.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var u=0;u<l.length;u++){var d=l[u],f=d.width,p=d.height,g=d.pixelX,y=d.pixelY,m=d.collides?h:n;null!==m&&(t.fillStyle(m.color,m.alpha/255),t.fillRect(g,y,f,p)),g+=1,y+=1,f-=2,p-=2,null!==c&&(t.lineStyle(1,c.color,c.alpha/255),d.faceTop&&t.lineBetween(g,y,g+f,y),d.faceRight&&t.lineBetween(g+f,y,g+f,y+p),d.faceBottom&&t.lineBetween(g,y+p,g+f,y+p),d.faceLeft&&t.lineBetween(g,y,g,y+p))}}},function(t,e,i){var r=i(72),n=i(63),s=i(160);t.exports=function(t,e,i,o,a){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===a&&(a=!0),Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++)s(t[h],e,o);if(a)for(var c=0;c<o.height;c++)for(var l=0;l<o.width;l++){var u=o.data[c][l];u&&-1!==t.indexOf(u.index)&&r(u,e)}i&&n(0,0,o.width,o.height,o)}},function(t,e,i){var r=i(72),n=i(63),s=i(160);t.exports=function(t,e,i,o,a,h){if(void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===h&&(h=!0),!(t>e)){for(var c=t;c<=e;c++)s(c,i,a);if(h)for(var l=0;l<a.height;l++)for(var u=0;u<a.width;u++){var d=a.data[l][u];d&&d.index>=t&&d.index<=e&&r(d,i)}o&&n(0,0,a.width,a.height,a)}}},function(t,e,i){var r=i(72),n=i(63),s=i(160);t.exports=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var a=0;a<o.height;a++)for(var h=0;h<o.width;h++){var c=o.data[a][h];c&&-1===t.indexOf(c.index)&&(r(c,e),s(c.index,e,o))}i&&n(0,0,o.width,o.height,o)}},function(t,e,i){var r=i(72),n=i(63),s=i(126);t.exports=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!0);for(var a=0;a<o.height;a++)for(var h=0;h<o.width;h++){var c=o.data[a][h];if(c)for(var l in t)if(s(c.properties,l)){var u=t[l];Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++)c.properties[l]===u[d]&&r(c,e)}}i&&n(0,0,o.width,o.height,o)}},function(t,e,i){var r=i(72),n=i(63);t.exports=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var s=0;s<i.height;s++)for(var o=0;o<i.width;o++){var a=i.data[s][o];if(a){var h=a.getCollisionGroup();h&&h.objects&&h.objects.length>0&&r(a,t)}}e&&n(0,0,i.width,i.height,i)}},function(t,e){t.exports=function(t,e,i,r){if("number"==typeof t)r.callbacks[t]=null!==e?{callback:e,callbackContext:i}:void 0;else for(var n=0,s=t.length;n<s;n++)r.callbacks[t[n]]=null!==e?{callback:e,callbackContext:i}:void 0}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a){for(var h=r(t,e,i,n,null,a),c=0;c<h.length;c++)h[c].setCollisionCallback(s,o)}},function(t,e,i){var r=i(26),n=i(131);t.exports=function(t,e,i,s,o){var a=r(t,e,i,s,null,o),h=a.map((function(t){return t.index}));n(h);for(var c=0;c<a.length;c++)a[c].index=h[c]}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a){for(var h=r(i,n,s,o,null,a),c=0;c<h.length;c++)h[c]&&(h[c].index===t?h[c].index=e:h[c].index===e&&(h[c].index=t))}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o){if(s){var a,h=r(t,e,i,n,null,o),c=0;for(a=0;a<s.length;a++)c+=s[a].weight;if(!(c<=0))for(a=0;a<h.length;a++){for(var l=Math.random()*c,u=0,d=-1,f=0;f<s.length;f++)if(l<=(u+=s[f].weight)){var p=s[f].index;d=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}h[a].index=d}}}},function(t,e,i){t.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(t,e){t.exports=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=i;if(r.name&&""!==r.name&&(n=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var s,o,a,h={},c={};if(Array.isArray(r.edgecolors))for(s=0;s<r.edgecolors.length;s++)a=1+s,""!==(o=r.edgecolors[s]).name&&(h[a]=o.name);if(Array.isArray(r.cornercolors))for(s=0;s<r.cornercolors.length;s++)a=1+s,""!==(o=r.cornercolors[s]).name&&(c[a]=o.name);if(Array.isArray(r.colors))for(s=0;s<r.colors.length;s++)a=1+s,""!==(o=r.colors[s]).name&&(h[a]=c[a]=o.name);for(var l=[h,c,h,c,h,c,h,c],u=0;u<r.wangtiles.length;u++){var d=r.wangtiles[u],f=e[d.tileid]||(e[d.tileid]={});f=f.wangid||(f.wangid={});for(var p=[],g=0;g<Math.min(l.length,d.wangid.length);g++)if(0!==(o=d.wangid[g])){var y=l[g][o];void 0===y?p.push(o):p.push(y)}else p.push(void 0);f[n]=p}}}}},function(t,e,i){t.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(t,e,i){t.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(t,e,i){var r=i(1),n=i(1);r=i(1457),n=i(1458),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i){var n=e.cull(i),s=n.length,o=i.alpha*e.alpha;if(!(0===s||o<=0)){var a=e.gidMap,h=t.pipelines.set(e.pipeline,e),c=r.getTintAppendFloatAlpha,l=e.scrollFactorX,u=e.scrollFactorY,d=e.x,f=e.y,p=e.scaleX,g=e.scaleY;t.pipelines.preBatch(e);for(var y=0;y<s;y++){var m=n[y],v=a[m.index];if(v){var b=v.getTileTextureCoordinates(m.index);if(null!==b){var w=v.glTexture,_=h.setTexture2D(w,e),x=v.tileWidth,E=v.tileHeight,S=b.x,T=b.y,A=.5*v.tileWidth,C=.5*v.tileHeight,k=c(m.tint,o*m.alpha);h.batchTexture(e,w,w.width,w.height,d+(A+m.pixelX)*p,f+(C+m.pixelY)*g,m.width,m.height,p,g,m.rotation,m.flipX,m.flipY,l,u,A,C,S,T,x,E,k,k,k,k,!1,0,0,i,null,!0,_)}}}t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(25),n=new r,s=new r,o=new r;t.exports=function(t,e,i,r){var a=e.cull(i),h=a.length,c=i.alpha*e.alpha;if(!(0===h||c<=0)){var l=n,u=s,d=o;u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),l.copyFrom(i.matrix);var f=t.currentContext,p=e.gidMap;f.save(),r?(l.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y,l.multiply(u,d),d.copyToContext(f)):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY,u.copyToContext(f)),(!t.antialias||e.scaleX>1||e.scaleY>1)&&(f.imageSmoothingEnabled=!1);for(var g=0;g<h;g++){var y=a[g],m=p[y.index];if(m){var v=m.image.getSourceImage(),b=m.getTileTextureCoordinates(y.index);if(null!==b){var w=m.tileWidth,_=m.tileHeight,x=.5*w,E=.5*_;f.save(),f.translate(y.pixelX+x,y.pixelY+E),0!==y.rotation&&f.rotate(y.rotation),(y.flipX||y.flipY)&&f.scale(y.flipX?-1:1,y.flipY?-1:1),f.globalAlpha=c*y.alpha,f.drawImage(v,b.x,b.y,w,_,-x,-E,w,_),f.restore()}}}f.restore()}}},function(t,e,i){var r=i(16),n=i(262);r.register("tilemap",(function(t){var e=void 0!==t?t:{};return n(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)}))},function(t,e,i){var r=i(5),n=i(262);r.register("tilemap",(function(t,e,i,r,s,o,a){return null===t&&(t=void 0),null===e&&(e=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===s&&(s=void 0),n(this.scene,t,e,i,r,s,o,a)}))},function(t,e,i){t.exports={Clock:i(1462),TimerEvent:i(582)}},function(t,e,i){var r=i(0),n=i(24),s=i(20),o=i(582),a=i(93),h=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(s.PRE_UPDATE,this.preUpdate,this),t.on(s.UPDATE,this.update,this),t.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof o?(e=t,this.removeEvent(e),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new o(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,i,r){return this.addEvent({delay:t,callback:e,args:i,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];a(this._pendingRemoval,i),a(this._pendingInsertion,i),a(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var i,r;for(i=0;i<t;i++){r=this._pendingRemoval[i];var n=this._active.indexOf(r);n>-1&&this._active.splice(n,1),r.destroy()}for(i=0;i<e;i++)r=this._pendingInsertion[i],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(!r.paused&&(r.elapsed+=e*r.timeScale,r.elapsed>=r.delay)){var n=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=n,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(s.PRE_UPDATE,this.preUpdate,this),e.off(s.UPDATE,this.update,this),e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});n.register("Clock",h,"time"),t.exports=h},function(t,e,i){var r=i(100),n=i(17),s={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="active"},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="repeat"},function(t,e){t.exports="start"},function(t,e){t.exports="stop"},function(t,e){t.exports="update"},function(t,e){t.exports="yoyo"},function(t,e,i){var r=i(93),n=i(0),s=i(585),o=i(24),a=i(20),h=i(586),c=i(587),l=i(100),u=i(163),d=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.preUpdate,this),t.on(a.UPDATE,this.update,this),t.once(a.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return c(this,t)},timeline:function(t){var e=c(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return u(this,t)},add:function(t){var e=u(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=s(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return h(t,e)},preUpdate:function(){if(0!==this._toProcess){var t,e,i=this._destroy,r=this._active,n=this._pending;for(t=0;t<i.length;t++){e=i[t];var s=r.indexOf(e);-1===s?(s=n.indexOf(e))>-1&&(e.state=l.REMOVED,n.splice(s,1)):(e.state=l.REMOVED,r.splice(s,1))}for(i.length=0,i=this._add,t=0;t<i.length;t++)(e=i[t]).state===l.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));i.length=0,this._toProcess=0}},update:function(t,e){var i,r=this._active;e*=this.timeScale;for(var n=0;n<r.length;n++)(i=r[n]).update(t,e)&&(this._destroy.push(i),this._toProcess++)},remove:function(t){return r(this._add,t),r(this._pending,t),r(this._active,t),r(this._destroy,t),t.state=l.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=l.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[0]=this.list[n],t.apply(e,i)},getAllTweens:function(){for(var t=this._active,e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,e){void 0===e&&(e=!1);var i,r,n,s=this._active,o=[];for(Array.isArray(t)||(t=[t]),r=0;r<s.length;r++)for(i=s[r],n=0;n<t.length;n++)i.hasTarget(t[n])&&o.push(i);if(e)for(s=this._pending,r=0;r<s.length;r++)for(i=s[r],n=0;n<t.length;n++)i.hasTarget(t[n])&&o.push(i);return o},isTweening:function(t){for(var e,i=this._active,r=0;r<i.length;r++)if((e=i[r]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(a.PRE_UPDATE,this.preUpdate,this),t.off(a.UPDATE,this.update,this),t.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",d,"tweens"),t.exports=d},function(t,e,i){t.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(t,e,i){t.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(t,e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var r=new Uint8Array(t),n=r.length,s=e?"data:"+e+";base64,":"",o=0;o<n;o+=3)s+=i[r[o]>>2],s+=i[(3&r[o])<<4|r[o+1]>>4],s+=i[(15&r[o+1])<<2|r[o+2]>>6],s+=i[63&r[o+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s}},function(t,e,i){t.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(t,e,i){var r=i(6),n=i(18);t.exports=function(t,e,i,s,o){void 0===o&&(o=i);var a=r(t,e,o);return n(a,i,s)}},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0}},function(t,e,i){var r=i(77);t.exports=function(t,e){var i=r(t);for(var n in e)i.hasOwnProperty(n)&&(i[n]=e[n]);return i}},function(t,e,i){t.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,i){return e[Number(i)-1]}))}},function(t,e){t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e,i){t.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(t,e,i){t.exports={Arcade:i(1366),Matter:i(1494)}},function(t,e,i){t.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(t,e){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(t,e){var i={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)e|=t[i];else e=t;return this.body.collisionFilter.mask=e,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i].hasOwnProperty("body")?t[i].body:t[i];this.body.setOnCollideWith(r,e)}return this}};t.exports=i},function(t,e,i){var r=i(41),n={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return r.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=n},function(t,e){t.exports={setFriction:function(t,e,i){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==i&&(this.body.frictionStatic=i),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}}},function(t,e){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(t,e,i){var r=i(41),n=i(3),s={setMass:function(t){return r.setMass(this.body,t),this},setDensity:function(t){return r.setDensity(this.body,t),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=s},function(t,e){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(t,e,i){var r=i(86),n=i(41),s=i(124),o=i(2),a=i(589),h=i(590),c=i(64),l={setRectangle:function(t,e,i){return this.setBody({type:"rectangle",width:t,height:e},i)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,i){return this.setBody({type:"polygon",sides:e,radius:t},i)},setTrapezoid:function(t,e,i,r){return this.setBody({type:"trapezoid",width:t,height:e,slope:i},r)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var i=0;i<t.parts.length;i++)t.parts[i].gameObject=this;var r=this;if(t.destroy=function(){r.world.remove(r.body,!0),r.body.gameObject=null},e&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var n=t.render.sprite.xOffset,o=t.render.sprite.yOffset,a=t.centerOfMass.x,h=t.centerOfMass.y;if(s(a,.5)&&s(h,.5))this.setOrigin(n+.5,o+.5);else{var c=t.centerOffset.x,l=t.centerOffset.y;this.setOrigin(n+c/this.displayWidth,o+l/this.displayHeight)}}return this},setBody:function(t,e){if(!t)return this;var i;"string"==typeof t&&(t={type:t});var s=o(t,"type","rectangle"),l=o(t,"x",this._tempVec2.x),u=o(t,"y",this._tempVec2.y),d=o(t,"width",this.width),f=o(t,"height",this.height);switch(s){case"rectangle":i=r.rectangle(l,u,d,f,e);break;case"circle":var p=o(t,"radius",Math.max(d,f)/2),g=o(t,"maxSides",25);i=r.circle(l,u,p,e,g);break;case"trapezoid":var y=o(t,"slope",.5);i=r.trapezoid(l,u,d,f,y,e);break;case"polygon":var m=o(t,"sides",5),v=o(t,"radius",Math.max(d,f)/2);i=r.polygon(l,u,m,v,e);break;case"fromVertices":case"fromVerts":var b=o(t,"verts",null);if(b)if("string"==typeof b&&(b=c.fromPath(b)),this.body&&!this.body.hasOwnProperty("temp"))n.setVertices(this.body,b),i=this.body;else{var w=o(t,"flagInternal",!1),_=o(t,"removeCollinear",.01),x=o(t,"minimumArea",10);i=r.fromVertices(l,u,b,e,w,_,x)}break;case"fromPhysicsEditor":i=a.parseBody(l,u,t,e);break;case"fromPhysicsTracer":i=h.parseBody(l,u,t,e)}return i&&this.setExistingBody(i,t.addToWorld),this}};t.exports=l},function(t,e,i){var r=i(272),n=i(165),s=i(166),o={setToSleep:function(){return n.set(this.body,!0),this},setAwake:function(){return n.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){if(t){var e=this.world;s.on(this.body,"sleepStart",(function(t){e.emit(r.SLEEP_START,t,this)}))}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var e=this.world;s.on(this.body,"sleepEnd",(function(t){e.emit(r.SLEEP_END,t,this)}))}else s.off(this.body,"sleepEnd");return this}};t.exports=o},function(t,e){t.exports="afteradd"},function(t,e){t.exports="afterremove"},function(t,e){t.exports="afterupdate"},function(t,e){t.exports="beforeadd"},function(t,e){t.exports="beforeremove"},function(t,e){t.exports="beforeupdate"},function(t,e){t.exports="collisionactive"},function(t,e){t.exports="collisionend"},function(t,e){t.exports="collisionstart"},function(t,e){t.exports="dragend"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="sleepend"},function(t,e){t.exports="sleepstart"},function(t,e,i){var r=i(41),n={setStatic:function(t){return r.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=n},function(t,e,i){var r=i(41),n=i(14),s=i(269),o=i(270),a={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),r.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,i),r.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,i),r.scale(this.body,this._scaleX,t)}},angle:{get:function(){return o(this.body.angle*n.RAD_TO_DEG)},set:function(t){this.rotation=o(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=s(t),r.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),r.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=s(t),r.setAngle(this.body,t),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,r.setAngle(this.body,this.rotation),this},setScale:function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=t);var n=1/this._scaleX,s=1/this._scaleY;return this._scaleX=t,this._scaleY=e,r.scale(this.body,n,s,i),r.scale(this.body,t,e,i),this}};t.exports=a},function(t,e,i){var r=i(41),n={setAngularVelocity:function(t){return r.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),r.setVelocity(this.body,this._tempVec2),this}};t.exports=n},function(t,e,i){var r={};t.exports=r;var n=i(118),s=i(32);r.create=function(t){return s.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},r.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},r.update=function(t,e){if(t.extended){var i=e.world,r=n.allBodies(i);t.collisions=t.narrowDetections,t.pairs=e.pairs.list.length,t.bodies=r.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(r.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,e,i){var r=i(123),n=i(271),s=i(86),o=i(41),a=i(1392),h=i(84),c=i(0),l=i(118),u=i(591),d=i(128),f=i(273),p=i(50),g=i(1394),y=i(2),m=i(6),v=i(597),b=i(1525),w=i(1526),_=i(1399),x=i(1527),E=i(127),S=i(250),T=i(598),A=i(595),C=i(24),k=i(1400),R=i(599),P=i(274),I=i(20),O=i(592),M=i(83),D=i(64),B=i(1402),L=new c({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=l,this.detector=f,this.grid=v,this.pair=S,this.pairs=T,this.query=k,this.resolver=R,this.sat=P,this.constraint=d,this.bodies=s,this.composites=u,this.axes=n,this.bounds=h,this.svg=O,this.vector=M,this.vertices=D,this.verts=D,this._tempVec2=M.create(),m(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),m(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),m(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),R._restingThresh=m(this.config,"restingThresh",4),R._restingThreshTangent=m(this.config,"restingThreshTangent",6),R._positionDampen=m(this.config,"positionDampen",.9),R._positionWarming=m(this.config,"positionWarming",.8),R._frictionNormalMultiplier=m(this.config,"frictionNormalMultiplier",5),t.sys.events.once(I.BOOT,this.boot,this),t.sys.events.on(I.START,this.start,this)},boot:function(){this.world=new B(this.scene,this.config),this.add=new g(this.world),this.bodyBounds=new a,this.systems.events.once(I.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new B(this.scene,this.config),this.add=new g(this.world));var t=this.systems.events;t.on(I.UPDATE,this.world.update,this.world),t.on(I.POST_UPDATE,this.world.postUpdate,this.world),t.once(I.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return E(y(e,"matter",{}),y(t,"matter",{}))},enableAttractorPlugin:function(){return A.register(b),A.use(_,b),this},enableWrapPlugin:function(){return A.register(x),A.use(_,x),this},enableCollisionEventsPlugin:function(){return A.register(w),A.use(_,w),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,i){t=this.getMatterBodies(t);var r=M.create(e,i);return k.point(t,r).length>0},intersectPoint:function(t,e,i){i=this.getMatterBodies(i);var r=M.create(t,e),n=[];return k.point(i,r).forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n},intersectRect:function(t,e,i,r,n,s){void 0===n&&(n=!1),s=this.getMatterBodies(s);var o={min:{x:t,y:e},max:{x:t+i,y:e+r}},a=[];return k.region(s,o,n).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRay:function(t,e,i,r,n,s){void 0===n&&(n=1),s=this.getMatterBodies(s);for(var o=[],a=k.ray(s,M.create(t,e),M.create(i,r),n),h=0;h<a.length;h++)o.push(a[h].body);return o},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var i=[],r=k.collides(t,e),n=0;n<r.length;n++){var s=r[n];s.bodyA===t?i.push(s.bodyB):i.push(s.bodyA)}return i},overlap:function(t,e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var s=!1,o=0;o<t.length;o++)for(var a=t[o],h=k.collides(a,e),c=0;c<h.length;c++){var l=h[c],u=l.bodyA.id===a.id?l.bodyB:l.bodyA;if(!r||r.call(n,a,u,l))if(s=!0,i)i.call(n,a,u,l);else if(!r)return!0}return s},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=e})),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=e})),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var i=0;if(Array.isArray(e))for(var r=0;r<e.length;r++)i|=e[r];else i=e;return t.forEach((function(t){t.collisionFilter.mask=i})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var r=t[i].hasOwnProperty("body")?t[i].body:t[i];e.push(r)}return e},setVelocity:function(t,e,i){t=this.getMatterBodies(t);var r=this._tempVec2;return r.x=e,r.y=i,t.forEach((function(t){o.setVelocity(t,r)})),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.x=e,t.forEach((function(t){i.y=t.velocity.y,o.setVelocity(t,i)})),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.y=e,t.forEach((function(t){i.x=t.velocity.x,o.setVelocity(t,i)})),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){o.setAngularVelocity(t,e)})),this},applyForce:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach((function(t){i.x=t.position.x,i.y=t.position.y,o.applyForce(t,i,e)})),this},applyForceFromPosition:function(t,e,i,r){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){void 0===r&&(r=t.angle),n.x=i*Math.cos(r),n.y=i*Math.sin(r),o.applyForce(t,e,n)})),this},applyForceFromAngle:function(t,e,i){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach((function(t){void 0===i&&(i=t.angle),r.x=e*Math.cos(i),r.y=e*Math.sin(i),o.applyForce(t,{x:t.position.x,y:t.position.y},r)})),this},getConstraintLength:function(t){var e=t.pointA.x,i=t.pointA.y,r=t.pointB.x,n=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,i+=t.bodyA.position.y),t.bodyB&&(r+=t.bodyB.position.x,n+=t.bodyB.position.y),p(e,i,r,n)},alignBody:function(t,e,i,n){var s;switch(t=t.hasOwnProperty("body")?t.body:t,n){case r.TOP_LEFT:case r.LEFT_TOP:s=this.bodyBounds.getTopLeft(t,e,i);break;case r.TOP_CENTER:s=this.bodyBounds.getTopCenter(t,e,i);break;case r.TOP_RIGHT:case r.RIGHT_TOP:s=this.bodyBounds.getTopRight(t,e,i);break;case r.LEFT_CENTER:s=this.bodyBounds.getLeftCenter(t,e,i);break;case r.CENTER:s=this.bodyBounds.getCenter(t,e,i);break;case r.RIGHT_CENTER:s=this.bodyBounds.getRightCenter(t,e,i);break;case r.LEFT_BOTTOM:case r.BOTTOM_LEFT:s=this.bodyBounds.getBottomLeft(t,e,i);break;case r.BOTTOM_CENTER:s=this.bodyBounds.getBottomCenter(t,e,i);break;case r.BOTTOM_RIGHT:case r.RIGHT_BOTTOM:s=this.bodyBounds.getBottomRight(t,e,i)}return s&&o.setPosition(t,s),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(I.UPDATE,this.world.update,this.world),t.off(I.POST_UPDATE,this.world.postUpdate,this.world)),t.off(I.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(I.START,this.start,this),this.scene=null,this.systems=null}});C.register("MatterPhysics",L,"matterPhysics"),t.exports=L},function(t,e,i){var r=i(594),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",(function(){n.Body.init(this)})),t.before("Engine.update",(function(t){n.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=r.Composite.allBodies(t.world),i=0;i<e.length;i++){var n=e[i],s=n.plugin.attractors;if(s&&s.length>0)for(var o=0;o<e.length;o++){var a=e[o];if(i!==o)for(var h=0;h<s.length;h++){var c=s[h],l=c;r.Common.isFunction(c)&&(l=c(n,a)),l&&r.Body.applyForce(a,a.position,l)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var i=r.Vector.sub(e.position,t.position),s=r.Vector.magnitudeSquared(i)||1e-4,o=r.Vector.normalise(i),a=-n.Attractors.gravityConstant*(t.mass*e.mass/s),h=r.Vector.mult(o,a);r.Body.applyForce(t,t.position,r.Vector.neg(h)),r.Body.applyForce(e,e.position,h)}}};t.exports=n},function(t,e){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(e){e.pairs.map((function(e){var i=e.bodyA,r=e.bodyB;i.gameObject&&i.gameObject.emit("collide",i,r,e),r.gameObject&&r.gameObject.emit("collide",r,i,e),t.Events.trigger(i,"onCollide",{pair:e}),t.Events.trigger(r,"onCollide",{pair:e}),i.onCollideCallback&&i.onCollideCallback(e),r.onCollideCallback&&r.onCollideCallback(e),i.onCollideWith[r.id]&&i.onCollideWith[r.id](r,e),r.onCollideWith[i.id]&&r.onCollideWith[i.id](i,e)}))})),t.Events.on(this,"collisionActive",(function(e){e.pairs.map((function(e){var i=e.bodyA,r=e.bodyB;i.gameObject&&i.gameObject.emit("collideActive",i,r,e),r.gameObject&&r.gameObject.emit("collideActive",r,i,e),t.Events.trigger(i,"onCollideActive",{pair:e}),t.Events.trigger(r,"onCollideActive",{pair:e}),i.onCollideActiveCallback&&i.onCollideActiveCallback(e),r.onCollideActiveCallback&&r.onCollideActiveCallback(e)}))})),t.Events.on(this,"collisionEnd",(function(e){e.pairs.map((function(e){var i=e.bodyA,r=e.bodyB;i.gameObject&&i.gameObject.emit("collideEnd",i,r,e),r.gameObject&&r.gameObject.emit("collideEnd",r,i,e),t.Events.trigger(i,"onCollideEnd",{pair:e}),t.Events.trigger(r,"onCollideEnd",{pair:e}),i.onCollideEndCallback&&i.onCollideEndCallback(e),r.onCollideEndCallback&&r.onCollideEndCallback(e)}))}))}))}}},function(t,e,i){var r=i(594),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.update",(function(){n.Engine.update(this)}))},Engine:{update:function(t){for(var e=t.world,i=r.Composite.allBodies(e),s=r.Composite.allComposites(e),o=0;o<i.length;o+=1){var a=i[o];a.plugin.wrap&&n.Body.wrap(a,a.plugin.wrap)}for(o=0;o<s.length;o+=1){var h=s[o];h.plugin.wrap&&n.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(t,e){var i=null,r=null;if(void 0!==e.min.x&&void 0!==e.max.x&&(t.min.x>e.max.x?i=e.min.x-t.max.x:t.max.x<e.min.x&&(i=e.max.x-t.min.x)),void 0!==e.min.y&&void 0!==e.max.y&&(t.min.y>e.max.y?r=e.min.y-t.max.y:t.max.y<e.min.y&&(r=e.max.y-t.min.y)),null!==i||null!==r)return{x:i||0,y:r||0}}},Body:{wrap:function(t,e){var i=n.Bounds.wrap(t.bounds,e);return i&&r.Body.translate(t,i),i}},Composite:{bounds:function(t){for(var e=r.Composite.allBodies(t),i=[],n=0;n<e.length;n+=1){var s=e[n];i.push(s.bounds.min,s.bounds.max)}return r.Bounds.create(i)},wrap:function(t,e){var i=n.Bounds.wrap(n.Composite.bounds(t),e);return i&&r.Composite.translate(t,i),i}}};t.exports=n},function(t,e,i){(function(e){var r=i(33),n=i(17),s={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};s.Sound=i(1492),s=n(!1,s,r),t.exports=s,e.Phaser=s}).call(this,i(600))}])},t.exports=e()},83537:(t,e,i)=>{"use strict";i.d(e,{Z:()=>hE});class r{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){r.prototype[t]=e}}const n=r;var s=function(t,e,i){return"__BASE"===i?`${t},${e}`:`${i}_${t},${e}`};var o=function(t){var e,i,r;if("object"!=typeof t||null===t)return t;for(r in e=Array.isArray(t)?[]:{},t)i=t[r],e[r]=o(i);return e};const a=o,h=Phaser.Utils.Objects.IsPlainObject,c=Phaser.Utils.Objects.GetValue;var l=function(t){return"string"==typeof t&&(t=u[t]),t};const u={scale:0,repeat:1},d=function(t,e){return 0===t||t===this.columns.count-1||0===e||e===this.rows.count-1},f=function(){},p={_drawImage:f,_drawTileSprite:f,setGetFrameNameCallback:function(t){return void 0===t&&(t=s),this.getFrameNameCallback=t,this},setTexture:function(t,e,i,r){Array.isArray(e)&&(r=i,i=e,e=void 0),void 0===e&&(e="__BASE"),i=a(i),r=a(r),this.textureKey=t,this.baseFrameName=e,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=r,this.rows.count=r?r.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var n=this.scene.sys.textures.get(t);if(!n)return this.clear(),this;if(!i||!r)return this.clear(),this;for(var s=n.frames[e],o=s.width,h=0,c=0,l=i.length;c<l;c++)void 0===i[c]?h++:"number"==typeof i[c]?o-=i[c]:o-=i[c].width;var u=o/h,d=s.height,f=0;for(c=0,l=r.length;c<l;c++)void 0===r[c]?f++:"number"==typeof r[c]?d-=r[c]:d-=r[c].width;for(var p,g,y,m,v,b=d/f,w=0,_=0,x=0,E=r.length;x<E;x++){void 0===r[x]&&(r[x]=b),"number"==typeof r[x]&&(r[x]={height:r[x],stretch:x%2}),y=(p=r[x]).height,this.rows.stretch+=0|p.stretch,this.rows.minHeight+=p.stretch>0?0:y,w=0,c=0;for(var S=i.length;c<S;c++){if(void 0===i[c]&&(i[c]=u),"number"==typeof i[c]&&(i[c]={width:i[c],stretch:c%2}),m=(g=i[c]).width,0===x&&(this.columns.stretch+=0|g.stretch,this.columns.minWidth+=g.stretch>0?0:m),m>=1&&y>=1){var T=typeof(v=this.getFrameNameCallback(c,x,e));"string"!==T&&"number"!==T||n.add(v,0,w+s.cutX,_+s.cutY,m,y)}w+=m}_+=y}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),void 0===this.textureKey)return this;var t=this.scene.sys.textures.get(this.textureKey);if(!t)return this;var e,i,r,n,s,o,a,h=this.columns.minWidth*this.maxFixedPartScaleX,c=this.rows.minHeight*this.maxFixedPartScaleY,l=this.width-h,u=this.height-c,d=l>=0?this.maxFixedPartScaleX:this.width/h,f=u>=0?this.maxFixedPartScaleY:this.height/c;if(this.preserveRatio){var p=Math.min(d,f);if(d>p){var g=(d-p)*h;l>=0?l+=g:l=g,d=p}if(f>p){var y=(f-p)*c;u>=0?u+=y:u=y,f=p}}this.columns.scale=d,this.rows.scale=f,e=l>0&&this.columns.stretch>0?l/this.columns.stretch:0,i=u>0&&this.rows.stretch>0?u/this.rows.stretch:0;for(var m=0,v=0,b=0,w=this.rows.count;b<w;b++){a=0===(s=this.rows.data[b]).stretch?s.height*f:i*s.stretch,m=0;for(var _=0,x=this.columns.count;_<x;_++)o=0===(n=this.columns.data[_]).stretch?n.width*d:e*n.stretch,r=this.getFrameNameCallback(_,b,this.baseFrameName),t.has(r)&&o>0&&a>0&&(0==(0===s.stretch&&0===n.stretch||0===this.getStretchMode(_,b)?0:1)?this._drawImage(this.textureKey,r,m,v,o,a):this._drawTileSprite(this.textureKey,r,m,v,o,a)),m+=o;v+=a}},setStretchMode:function(t){return h(t)?(this.stretchMode.edge=l(c(t,"edge",0)),this.stretchMode.internal=l(c(t,"internal",0))):(t=l(t),this.stretchMode.edge=t,this.stretchMode.internal=t),this},getStretchMode:function(t,e){return d.call(this,t,e)?this.stretchMode.edge:this.stretchMode.internal},setPreserveRatio:function(t){return null==t&&(t=!0),this.preserveRatio=t,this},setMaxFixedPartScale:function(t,e){return void 0===e&&(e=t),this.maxFixedPartScaleX=t,this.maxFixedPartScaleY=e,this}},g=Phaser.Utils.Objects.IsPlainObject,y=Phaser.Utils.Objects.GetValue,m=function(t,e){class i extends t{constructor(t,i,r,n,s,o,a,h,c,l){g(i)?(i=y(l=i,"x",0),r=y(l,"y",0),n=y(l,"width",1),s=y(l,"height",1),o=y(l,"key",void 0),a=y(l,"baseFrame",void 0),h=y(l,"columns",void 0),c=y(l,"rows",void 0)):g(n)?(n=y(l=n,"width",1),s=y(l,"height",1),o=y(l,"key",void 0),a=y(l,"baseFrame",void 0),h=y(l,"columns",void 0),c=y(l,"rows",void 0)):g(o)?(o=y(l=o,"key",void 0),a=y(l,"baseFrame",void 0),h=y(l,"columns",void 0),c=y(l,"rows",void 0)):g(a)?(a=y(l=a,"baseFrame",void 0),h=y(l,"columns",void 0),c=y(l,"rows",void 0)):Array.isArray(a)?(l=c,c=h,h=a,a=y(l,"baseFrame",void 0)):g(h)&&(h=y(l=h,"columns",void 0),c=y(l,"rows",void 0)),super(t),this.type=e,this.setPosition(i,r).setSize(n,s).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(y(l,"getFrameNameCallback",void 0)),this.setStretchMode(y(l,"stretchMode",0)),this.setPreserveRatio(y(l,"preserveRatio",!0));var u=y(l,"maxFixedPartScale",1),d=y(l,"maxFixedPartScaleX",u),f=y(l,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(d,f),this.setTexture(o,a,h,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(t,e){return this.width===t&&this.height===e||(super.resize(t,e),this.updateTexture()),this}}return Object.assign(i.prototype,p),i},v=function(t,e,i){return void 0===i&&(i="image"),t[e]||(t[e]=t.scene.make[i]({add:!1,origin:{x:0,y:0}}),t.once("destroy",(function(){t[e]&&(t[e].destroy(),t[e]=void 0)}))),t[e]},b={_drawImage:function(t,e,i,r,n,s){var o=v(this,"_image","image").setTexture(t,e).setDisplaySize(n,s);this.draw(o,i,r)},_drawTileSprite:function(t,e,i,r,n,s){var o=v(this,"_tileSprite","tileSprite").setTexture(t,e).setSize(n,s);this.draw(o,i,r)}},w=Phaser.GameObjects.RenderTexture;class _ extends(m(w,"rexNinePatch")){}Object.assign(_.prototype,b);const x=_;var E=function(t){return null==t||""===t||0===t.length};const S=function(t,e,i){if("object"==typeof t){if(E(e)){if(null==i)return;"object"==typeof i&&(t=i)}else{"string"==typeof e&&(e=e.split("."));var r=e.pop(),n=function(t,e,i){var r=t;if(E(e));else{var n;"string"==typeof e&&(e=e.split("."));for(var s=0,o=e.length;s<o;s++){var a;null!=r[n=e[s]]&&"object"==typeof r[n]||(a={},r[n]=a),r=r[n]}}return r}(t,e);n[r]=i}return t}};n.register("ninePatch",(function(t,e,i,r,n,s,o,a){var h=new x(this.scene,t,e,i,r,n,s,o,a);return this.scene.add.existing(h),h})),S(window,"RexPlugins.UI.NinePatch",x);const T=Phaser.GameObjects.GetCalcMatrix,A=Phaser.Renderer.Canvas.SetTransform,C={renderWebGL:function(t,e,i,r){var n=e.getRenderList();if(0!==n.length){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=e.frame.glTexture,a=s.setGameObject(e),h=i.roundPixels,c=T(e,i,r),l=s.calcMatrix.copyFrom(c.calc),u=e._displayOriginX,d=e._displayOriginY,f=i.alpha*e.alpha;t.pipelines.preBatch(e);for(var p=0,g=n.length;p<g;p++)n[p].webglRender(s,l,f,u,d,o,a,h);t.pipelines.postBatch(e)}},renderCanvas:function(t,e,i,r){var n=t.currentContext,s=e.getRenderList();if(0!==s.length&&A(t,n,e,i,r)){i.addToRenderList(e);var o=i.roundPixels,a=-e._displayOriginX,h=-e._displayOriginY;n.translate(a,h);for(var c=0,l=s.length;c<l;c++)s[c].canvasRender(n,a,h,o);n.restore()}}},k=function(t,e){return this.texture=this.scene.sys.textures.get(t),this.frame=this.texture.get(e),this},R=function(t,e){if(this.width===t&&this.height===e)return this;this.width=t,this.height=e,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this},P=Phaser.Utils.Array.Remove,I=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},O={setTint(t){return this.tint=t,this.tintFill=!1,this},setTintFill(t){return this.tint=t,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var M={setTexture:k,resize:R,setSize:R,addChild:function(t){return this.lastAppendedChildren.length=0,Array.isArray(t)?(this.children.add(t),this.lastAppendedChildren.push(...t)):(this.children.add(t),this.lastAppendedChildren.push(t)),this},removeChild:function(t){return this.poolManager&&this.poolManager.free(t),P(this.children.list,t),this.lastAppendedChildren.length=0,this.dirty=!0,this},removeChildren:I,clear:I,getLastAppendedChildren:function(){return this.lastAppendedChildren},getChildren:function(){return this.children.list}};Object.assign(M,O);const D=M,B=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},L=Phaser.Utils.Objects.GetValue;var N={};const U=Phaser.GameObjects.GameObject,F=Phaser.Utils.Objects.IsPlainObject,z=Phaser.Utils.Objects.GetValue,j=Phaser.Structs.List,V=Phaser.Utils.Array.StableSort;class G extends U{constructor(t,e,i,r,n,s){F(e)&&(e=z(s=e,"x",0),i=z(s,"y",0),r=z(s,"texture"),n=z(s,"frame")),void 0===e&&(e=0),void 0===i&&(i=0),super(t,"rexBlitter"),this.children=new j,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var o=z(s,"reuseBob",!0);this.poolManager=o?new class{constructor(t){this.pools=L(t,"pools",N)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new B),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,i=t.length;e<i;e++)this.free(t[e]);return this}allocate(t){return this.pools&&this.pools.hasOwnProperty(t)?this.pools[t].pop():null}}(s):void 0,this.setTexture(r,n).setPosition(e,i).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,e=this.children.list,i=0,r=e.length;i<r;i++){var n=e[i];H(n)&&(this.renderList.push(n),t||(t=0!==n.depth))}t&&V(this.renderList,Y),this.displayListDirty=!1}return this.renderList}}var H=function(t){return t.active&&t.visible&&t.alpha>0},Y=function(t,e){return t._depth-e._depth};const K=Phaser.GameObjects.Components;Phaser.Class.mixin(G,[K.Alpha,K.BlendMode,K.ComputedSize,K.Depth,K.GetBounds,K.Mask,K.Origin,K.Pipeline,K.ScrollFactor,K.Transform,K.Visible,C,D]);const W=G,X="image",q=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,s=i,o=0;o<r.length;o++){if(!n.hasOwnProperty(r[o])){s=i;break}s=n[r[o]],n=n[r[o]]}return s}return i}return i},$=function(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e];return t},J={enableData(){return void 0===this.data&&(this.data={}),this},getData(t,e){return this.enableData(),void 0===t?this.data:q(this.data,t,e)},setData(t,e){if(this.enableData(),1===arguments.length){var i=t;for(t in i)this.data[t]=i[t]}else this.data[t]=e;return this},incData(t,e,i){return void 0===i&&(i=0),this.enableData(),this.setData(t,this.getData(t,i)+e),this},mulData(t,e,i){return void 0===i&&(i=0),this.enableData(),this.setData(t,this.getData(t,i)*e),this},clearData(){return this.data&&$(this.data),this}};class Z{constructor(t,e){this.type=e,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return void 0===t&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(Z.prototype,J);const Q=Z,tt=Phaser.Math.DegToRad,et=Phaser.Math.RadToDeg,it=Phaser.Utils.Objects.GetValue,rt=class extends Q{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return void 0===t&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setRotation(t){return this.rotation=t,this}get angle(){return et(this.rotation)}set angle(t){this.rotation=tt(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,e){return void 0===e&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,e){return void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,e){return void 0===e&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,e){return void 0===e&&(e=!1),this.displayWidth=t,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,e){return void 0===e&&(e=!1),this.displayHeight=t,e&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,e){return void 0===e&&(e=t),this.setOriginX(t).setOriginY(e),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return void 0===t&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=it(t,"width",void 0),i=it(t,"height",void 0),r=it(t,"scale",void 0),n=it(t,"scaleX",r),s=it(t,"scaleY",r);void 0!==e?void 0===i&&void 0===s?this.setWidth(e,!0):this.setWidth(e):void 0!==n?this.setScaleX(n):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),void 0!==i?void 0===e&&void 0===n?this.setHeight(i,!0):this.setHeight(i):void 0!==s?this.setScaleY(s):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var o=it(t,"origin",void 0);return void 0!==o?this.setOrigin(o):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,e,i,r,n,s,o,a){}canvasRender(t,e,i,r){}},nt=Phaser.GameObjects.Components.TransformMatrix,st=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var ot=new nt;const at=Phaser.Utils.Objects.IsPlainObject;class ht extends rt{constructor(t,e){super(t,X),this.setFrame(e)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!at(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return void 0===t&&(t=!0),this.flipX=t,this}setFlipY(t){return void 0===t&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return void 0===this._tint?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return void 0===this._tintFill?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var ct={webglRender:function(t,e,i,r,n,s,o,a){var h=this._width,c=this._height,l=h*this.originX,u=c*this.originY,d=this.x-r,f=this.y-n,p=1,g=1;this.flipX&&(d+=h-2*l,p=-1),this.flipY&&(f+=c-2*u,g=-1),ot.applyITRS(d,f,this.rotation,this.scaleX*p,this.scaleY*g),e.multiply(ot,ot);var y=-l,m=-u,v=y+h,b=m+c,w=ot.getXRound(y,m,a),_=ot.getXRound(y,b,a),x=ot.getXRound(v,b,a),E=ot.getXRound(v,m,a),S=ot.getYRound(y,m,a),T=ot.getYRound(y,b,a),A=ot.getYRound(v,b,a),C=ot.getYRound(v,m,a),k=this.frame.u0,R=this.frame.v0,P=this.frame.u1,I=this.frame.v1,O=st(this.tint,this.alpha*i);t.batchQuad(this.parent,w,S,_,T,x,A,E,C,k,R,P,I,O,O,O,O,this.tintFill,s,o)},canvasRender:function(t,e,i,r){t.save();var n=this._width,s=this._height,o=n*this.originX,a=s*this.originY,h=this.x-o,c=this.y-a,l=1,u=1;this.flipX&&(h+=n,l=-1),this.flipY&&(c+=s,u=-1),r&&(h=Math.round(h),c=Math.round(c)),t.translate(h,c),t.rotate(this.rotation),t.scale(this.scaleX*l,this.scaleY*u);var d=this.frame;t.drawImage(d.source.image,d.cutX,d.cutY,n,s,0,0,n,s),t.restore()}};Object.assign(ht.prototype,ct);const lt=ht,ut=function(t,e){"string"==typeof e&&(e={frame:e});var i=t.poolManager?t.poolManager.allocate(X):null;return null===i?i=new lt(t):i.setParent(t).setActive(),i.modifyPorperties(e),t.addChild(i),i},dt={_drawImage:function(t,e,i,r,n,s){ut(this,{frame:e,x:i,y:r,width:n,height:s})},_drawTileSprite:function(t,e,i,r,n,s){var o=this.texture.get(e),a=o.width,h=o.height,c=Math.floor(n/a),l=Math.floor(s/h);i+=(n-c*a)/2,r+=(s-l*h)/2;for(var u=0;u<c;u++)for(var d=0;d<l;d++)ut(this,{frame:e,x:i+u*a,y:r+d*h})}};class ft extends(m(W,"rexNinePatch2")){setTexture(t,e,i,r){return k.call(this,t,"__BASE"),this.columns?(super.setTexture(t,e,i,r),this):this}}Object.assign(ft.prototype,dt);const pt=ft;n.register("ninePatch2",(function(t,e,i,r,n,s,o,a){var h=new pt(this.scene,t,e,i,r,n,s,o,a);return this.scene.add.existing(h),h})),S(window,"RexPlugins.UI.NinePatch2",pt);const gt=Phaser.Utils.Objects.GetValue;var yt=function(t,e,i){return void 0===t?{x:e,y:i}:"number"==typeof t?{x:t,y:t}:t},mt=function(t,e){"number"==typeof e?(t.x=e,t.y=e):(t.x=gt(e,"x",0),t.y=gt(e,"y",0))};const vt=class{constructor(t,e,i,r,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,r,n)}setTo(t,e,i,r,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(i,r),this}setPosition(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,i;"number"==typeof t?(e=t,i=t):(e=gt(t,"x",0),i=gt(t,"y",0));var r=this.cornerRadius;r.tl=yt(gt(t,"tl",void 0),e,i),r.tr=yt(gt(t,"tr",void 0),e,i),r.bl=yt(gt(t,"bl",void 0),e,i),r.br=yt(gt(t,"br",void 0),e,i)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){mt(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){mt(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){mt(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){mt(this.cornerRadius.br,t)}},bt=function(t,e,i){var r=i.length;if(r>=2){var n=i[r-2],s=i[r-1];if(t===n&&e===s)return i}return i.push(t,e),i},wt=Phaser.Math.DegToRad,_t=function(t,e,i,r,n,s,o,a,h){o&&s>n?s-=360:!o&&s<n&&(s+=360);var c=wt(s-n)/a;n=wt(n);for(var l=0;l<=a;l++){var u=n+c*l,d=t+i*Math.cos(u),f=e+r*Math.sin(u);bt(d,f,h)}return h};var xt=Phaser.Renderer.WebGL.Utils;const Et=function(t,e,i,r,n,s){for(var o=xt.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),a=i.pathData,h=i.pathIndexes,c=0;c<h.length;c+=3){var l=2*h[c],u=2*h[c+1],d=2*h[c+2],f=a[l+0]-n,p=a[l+1]-s,g=a[u+0]-n,y=a[u+1]-s,m=a[d+0]-n,v=a[d+1]-s,b=e.getX(f,p),w=e.getY(f,p),_=e.getX(g,y),x=e.getY(g,y),E=e.getX(m,v),S=e.getY(m,v);t.batchTri(i,b,w,_,x,E,S,0,0,1,1,o,o,o,2)}};var St=Phaser.Renderer.WebGL.Utils;const Tt=function(t,e,i,r,n){var s=t.strokeTint,o=St.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);s.TL=o,s.TR=o,s.BL=o,s.BR=o;var a=e.pathData,h=a.length-1,c=e.lineWidth,l=c/2,u=a[0]-r,d=a[1]-n;e.closePath||(h-=2);for(var f=2;f<h;f+=2){var p=a[f]-r,g=a[f+1]-n;t.batchLine(u,d,p,g,l,l,c,f-2,!!e.closePath&&f===h-1),u=p,d=g}},At=Phaser.GameObjects.GetCalcMatrix,Ct=function(t,e,i,r){var n=i||e.fillColor,s=r||e.fillAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.fillStyle="rgba("+o+","+a+","+h+","+s+")"},kt=function(t,e,i,r){var n=i||e.strokeColor,s=r||e.strokeAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.strokeStyle="rgba("+o+","+a+","+h+","+s+")",t.lineWidth=e.lineWidth},Rt=Phaser.Renderer.Canvas.SetTransform,Pt={renderWebGL:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),s=At(e,i,r),o=n.calcMatrix.copyFrom(s.calc),a=e._displayOriginX,h=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&Et(n,o,e,c,a,h),e.isStroked&&Tt(n,e,c,a,h),t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.currentContext;if(Rt(t,n,e,i,r)){var s=e._displayOriginX,o=e._displayOriginY,a=e.pathData,h=a.length-1,c=a[0]-s,l=a[1]-o;n.beginPath(),n.moveTo(c,l),e.closePath||(h-=2);for(var u=2;u<h;u+=2){var d=a[u]-s,f=a[u+1]-o;n.lineTo(d,f)}n.closePath(),e.isFilled&&(Ct(n,e),n.fill()),e.isStroked&&(kt(n,e),n.stroke()),n.restore()}}},It=Phaser.GameObjects.Shape,Ot=Phaser.Utils.Objects.GetValue,Mt=Phaser.Geom.Polygon.Earcut;class Dt extends It{constructor(t,e,i,r,n,s,o,a){void 0===e&&(e=0),void 0===i&&(i=0);var h=new vt;super(t,"rexRoundRectangleShape",h);var c=Ot(s,"radius",s);h.setTo(0,0,r,n,c);var l=Ot(s,"iteration",void 0);this.setIteration(l),this.setPosition(e,i),void 0!==o&&this.setFillStyle(o,a),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var i,r=t.cornerRadius,n=this.iteration+1;if(i=r.br,Bt(i)){var s=t.width-i.x,o=t.height-i.y;_t(s,o,i.x,i.y,0,90,!1,n,e)}else bt(t.width,t.height,e);return i=r.bl,Bt(i)?(s=i.x,o=t.height-i.y,_t(s,o,i.x,i.y,90,180,!1,n,e)):bt(0,t.height,e),i=r.tl,Bt(i)?(s=i.x,o=i.y,_t(s,o,i.x,i.y,180,270,!1,n,e)):bt(0,0,e),i=r.tr,Bt(i)?(s=t.width-i.x,o=i.y,_t(s,o,i.x,i.y,270,360,!1,n,e)):bt(t.width,0,e),e.push(e[0],e[1]),this.pathIndexes=Mt(e),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.updateDisplayOrigin(),this.dirty=!0;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setRadiusTL(t){return void 0===t&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return void 0===t&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return void 0===t&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return void 0===t&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var Bt=function(t){return 0!==t.x&&0!==t.y};Object.assign(Dt.prototype,Pt);const Lt=Dt;n.register("roundRectangle",(function(t,e,i,r,n,s,o){var a=new Lt(this.scene,t,e,i,r,n,s,o);return this.scene.add.existing(a),a})),S(window,"RexPlugins.UI.RoundRectangle",Lt);const Nt=Phaser.Renderer.WebGL.Utils,Ut={renderWebGL:function(t,e,i,r){if(e.dirty&&(e.updateTexture(),e.dirty=!1),0!==e.width&&0!==e.height){i.addToRenderList(e);var n=e.frame,s=n.width,o=n.height,a=Nt.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),c=h.setTexture2D(n.glTexture,e);t.pipelines.preBatch(e),h.batchTexture(e,n.glTexture,s,o,e.x,e.y,s/e.resolution,o/e.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,r,!1,c),t.pipelines.postBatch(e)}},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateTexture(),e.dirty=!1),0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},Ft=Phaser.Display.Color,zt={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(t){return this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(t,e){var i=this,r=new Image;return r.onload=function(){i.width!==r.width||i.height!==r.height?i.resize(r.width,r.height):i.clear(),i.context.drawImage(r,0,0),i.updateTexture(),e&&e(),r.onload=null,r.src="",r.remove()},r.src=t,this},loadFromURLPromise(t){var e=this;return new Promise((function(i,r){e.loadFromURL(t,i)}))},getDataURL(t,e){return this.canvas.toDataURL(t,e)},getPixel(t,e,i){void 0===i&&(i=new Ft);var r=this.context.getImageData(t,e,1,1);return i.setTo(r.data[0],r.data[1],r.data[2],r.data[3]),i},setPixel(t,e,i,r,n,s){if("number"!=typeof i){var o=i;i=o.red,r=o.green,n=o.blue,s=o.alpha}void 0===s&&(s=0!==i||0!==r||0!==n?255:0);var a=this.context.createImageData(1,1);return a.data[0]=i,a.data[1]=r,a.data[2]=n,a.data[3]=s,this.context.putImageData(a,t,e),this.dirty=!0,this}},jt=function(t,e,i,r,n,s,o){var a,h=t.sys.textures,c=t.renderer;void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=e.width),void 0===o&&(o=e.height);var l=(a=h.exists(i)?h.get(i):h.createCanvas(i,s,o)).getSourceImage();l.width!==s&&(l.width=s),l.height!==o&&(l.height=o);var u=l.getContext("2d");u.clearRect(0,0,s,o),u.drawImage(e,r,n,s,o),c.gl&&a&&c.canvasToTexture(l,a.source[0].glTexture,!0,0)},Vt={updateTexture(t,e){t&&(e?t.call(e,this.canvas,this.context):t(this.canvas,this.context)),this.canvas.width===this.frame.width&&this.canvas.height===this.frame.height||this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},generateTexture(t,e,i,r,n){var s=this.canvas;return void 0===r?r=s.width:r*=this.resolution,void 0===n?n=s.height:n*=this.resolution,jt(this.scene,s,t,e,i,r,n),this},loadTexture(t,e){var i=this.scene.sys.textures.getFrame(t,e);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.context.drawImage(i.source.image,i.cutX,i.cutY,i.cutWidth,i.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}},Gt=Phaser.Display.Canvas.CanvasPool,Ht=Phaser.GameObjects.GameObject;class Yt extends Ht{constructor(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=r,this._height=n,r=Math.max(Math.ceil(r*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=Gt.create(this,r,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,i),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Gt.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,e){return this._width===t&&this._height===e||(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const Kt=Phaser.GameObjects.Components;Phaser.Class.mixin(Yt,[Kt.Alpha,Kt.BlendMode,Kt.Crop,Kt.Depth,Kt.Flip,Kt.GetBounds,Kt.Mask,Kt.Origin,Kt.Pipeline,Kt.ScrollFactor,Kt.Tint,Kt.Transform,Kt.Visible,Ut,zt,Vt]);const Wt=Yt,Xt=Phaser.Utils.String.Pad,qt=function(t,e,i){if(null==t)return t;switch(typeof t){case"string":default:return t;case"number":return`#${Xt(Math.floor(t).toString(16),6,"0",1)}`;case"function":return t(e,i);case"object":return t.hasOwnProperty("r")?t.hasOwnProperty("a")?`rgba(${t.r},${t.g},${t.b},${t.a})`:`rgb(${t.r},${t.g},${t.b})`:t.hasOwnProperty("h")?t.hasOwnProperty("a")?`hsla(${t.h},${t.s},${t.l},${t.a})`:`hsl(${t.h},${t.s},${t.l})`:t}},$t=Phaser.Math.DegToRad,Jt=$t(0),Zt=$t(90),Qt=$t(180),te=$t(270);var ee=function(t,e,i,r,n,s,o,a){if(null==a)t.ellipse(e,i,r,n,0,s,o);else for(var h,c,l,u=(o-s)/(a+=1),d=0;d<=a;d++)l=s+u*d,h=e+r*Math.cos(l),c=i+n*Math.sin(l),t.lineTo(h,c)};const ie=function(t,e,i,r,n,s,o){var a,h,c,l,u,d=new vt(e,i,r,n,s),f=d.minWidth,p=d.minHeight,g=r>=f?1:r/f,y=n>=p?1:n/p,m=d.cornerRadius;t.save(),t.beginPath(),t.translate(e,i),l=r-(h=(a=m.br).x*g),u=n-(c=a.y*y),t.moveTo(r,u),h>0&&c>0?ee(t,l,u,h,c,Jt,Zt,o):(t.lineTo(r,n),t.lineTo(l,n)),l=h=(a=m.bl).x*g,u=n-(c=a.y*y),t.lineTo(h,n),h>0&&c>0?ee(t,l,u,h,c,Zt,Qt,o):(t.lineTo(0,n),t.lineTo(0,u)),l=h=(a=m.tl).x*g,u=c=a.y*y,t.lineTo(0,u),h>0&&c>0?ee(t,l,u,h,c,Qt,te,o):(t.lineTo(0,0),t.lineTo(l,0)),l=r-(h=(a=m.tr).x*g),u=c=a.y*y,t.lineTo(l,0),h>0&&c>0?ee(t,l,u,h,c,te,Jt,o):(t.lineTo(r,0),t.lineTo(r,u)),t.closePath(),t.restore()},re=function(t,e,i,r,n,s,o,a){if(null!=e||null!=i){var h=t.canvas.width,c=t.canvas.height;null==i&&(r=0);var l=r/2;h-=r,c-=r,function(t,e,i,r,n,s,o,a,h,c,l,u,d){var f;ie(e,i,r,n,s,o,d),null!=a&&(null!=l&&((f=u?e.createLinearGradient(0,0,n,0):e.createLinearGradient(0,0,0,s)).addColorStop(0,a),f.addColorStop(1,l),a=f),e.fillStyle=a,e.fill()),null!=h&&c>0&&(e.strokeStyle=h,e.lineWidth=c,e.stroke())}(t.canvas,t.context,l,l,h,c,n,e,i,r,s,o,a)}},ne=function(){re(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)},se=Phaser.Utils.Objects.GetValue,oe=class extends Wt{constructor(t,e,i,r,n,s,o,a,h,c,l){super(t,e,i,r,n),this.type="rexRoundRectangleCanvas";var u=se(s,"radius",s),d=se(s,"iteration",void 0);this.setRadius(u),this.setIteration(d),this.setFillStyle(o,c,l),this.setStrokeStyle(a,h)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=qt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=qt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,e,i){return void 0===i&&(i=!0),this.fillStyle=t,this.fillColor2=e,this.isHorizontalGradient=i,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=qt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,e){return this.strokeStyle=t,this.lineWidth=e,this}updateTexture(){return this.clear(),ne.call(this),super.updateTexture(),this}};n.register("roundRectangleCanvas",(function(t,e,i,r,n,s,o,a,h,c){var l=new oe(this.scene,t,e,i,r,n,s,o,a,h,c);return this.scene.add.existing(l),l})),S(window,"RexPlugins.UI.RoundRectangleCanvas",oe);var ae=Phaser.Renderer.WebGL.Utils;const he={renderWebGL:function(t,e,i,r){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var n=e.frame,s=n.width,o=n.height,a=ae.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),c=h.setTexture2D(n.glTexture,e);t.pipelines.preBatch(e),h.batchTexture(e,n.glTexture,s,o,e.x,e.y,s/e.style.resolution,o/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,r,!1,c),t.pipelines.postBatch(e)}},renderCanvas:function(t,e,i,r){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},ce=Phaser.Display.Canvas.CanvasPool,le=function(t){var e=ce.create(this),i=e.getContext("2d");t.syncFont(e,i);var r=i.measureText(t.testString);if("actualBoundingBoxAscent"in r){var n=r.actualBoundingBoxAscent,s=r.actualBoundingBoxDescent,o={ascent:n,descent:s,fontSize:n+s};return ce.remove(e),o}var a=Math.ceil(r.width*t.baselineX),h=a,c=2*h;if(h=h*t.baselineY|0,e.width=a,e.height=c,i.fillStyle="#f00",i.fillRect(0,0,a,c),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,h),o={ascent:0,descent:0,fontSize:0},!i.getImageData(0,0,a,c))return o.ascent=h,o.descent=h+6,o.fontSize=o.ascent+o.descent,ce.remove(e),o;var l,u,d=i.getImageData(0,0,a,c).data,f=d.length,p=4*a,g=0,y=!1;for(l=0;l<h;l++){for(u=0;u<p;u+=4)if(255!==d[g+u]){y=!0;break}if(y)break;g+=p}for(o.ascent=h-l,g=f-p,y=!1,l=c;l>h;l--){for(u=0;u<p;u+=4)if(255!==d[g+u]){y=!0;break}if(y)break;g-=p}return o.descent=l-h,o.fontSize=o.ascent+o.descent,ce.remove(e),o},ue=0,de=1,fe=2,pe=0,ge=1,ye=2,me=/(?:\r\n|\r|\n)/,ve=Phaser.Utils.Objects.GetAdvancedValue,be=Phaser.Utils.Objects.GetValue;var we={backgroundColor:["backgroundColor",null,qt],backgroundColor2:["backgroundColor2",null,qt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,qt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",qt],stroke:["stroke","#fff",qt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",qt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",qt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};const _e={none:pe,word:ge,char:ye,character:ye},xe=class{constructor(t,e){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0);var i=be(e,"metrics",!1);this.metrics=i?{ascent:be(i,"ascent",0),descent:be(i,"descent",0),fontSize:be(i,"fontSize",0)}:le(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==pe&&0===this.wrapWidth}setStyle(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("wrap")){var r=t.wrap;if(r.hasOwnProperty("mode")){var n=r.mode;"string"==typeof n&&(r.mode=_e[n])}else r.hasOwnProperty("width")&&(r.mode=1)}for(var s in t&&t.rtl&&i&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),we){var o=we[s],a=o[0],h=i?o[1]:this[s],c=o[2];if("wrapCallback"===s||"wrapCallbackScope"===s)this[s]=be(t,a,h);else{var l=ve(t,a,h);c&&(l=c(l)),this[s]=l}}var u=be(t,"font",null);this._font=null===u?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:u;var d=be(t,"fill",null);null!==d&&(this.color=qt(d));var f=be(t,"images",void 0);return f&&this.parent.addImage(f),e?this.update(!0):this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=le(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=be(t,"fontFamily","Courier"),this.fontSize=be(t,"fontSize","16px"),this.fontStyle=be(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,i){return void 0===i&&(i=!0),this.backgroundColor=qt(t,this.canvas,this.context),this.backgroundColor2=qt(e,this.canvas,this.context),this.backgroundHorizontalGradient=i,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=qt(t,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=qt(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=qt(t,this.canvas,this.context),this.update(!1)}setStroke(t,e){return void 0===t?this.strokeThickness=0:(void 0===e&&(e=this.strokeThickness),this.stroke=qt(t,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,i,r,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=qt(i,this.canvas,this.context),this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=s,this.update(!1)}setShadowOffset(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return void 0===t&&(t="#000"),this.shadowColor=qt(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,i){return void 0===t&&(t="#000"),void 0===e&&(e=0),void 0===i&&(i=0),this.underlineColor=qt(t,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=i,this.update(!1)}setUnderlineColor(t){return void 0===t&&(t="#000"),this.underlineColor=qt(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return void 0===t&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return void 0===t&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return"string"==typeof t&&(t=_e[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return void 0===t&&(t="left"),void 0===e&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return void 0===t&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return void 0===t&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,"string"==typeof e?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=be(e,"fontFamily",this.fontFamily),this.fontSize=be(e,"fontSize",this.fontSize),this.fontStyle=be(e,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var e in we)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},Ee=Phaser.Display.Canvas.CanvasPool,Se={draw(t,e,i,r){var n=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var o=this.defaultStyle;this.clear(),re(this,o.backgroundColor,o.backgroundStrokeColor,o.backgroundStrokeLineWidth,o.backgroundCornerRadius,o.backgroundColor2,o.backgroundHorizontalGradient,o.backgroundCornerIteration),t+=this.startXOffset,e+=this.startYOffset;var a,h,c,l,u,d,f=o.halign,p=o.valign,g=o.lineHeight,y=n.lines,m=y.length,v=o.maxLines;v>0&&m>v?(h=v,c="center"===p?Math.floor((m-h)/2):"bottom"===p?m-h:0):(h=m,c=0),l=c+h;var b=this.rtl,w=b?this.parent.width:void 0;d="center"===p?Math.max((r-h*g)/2,0):"bottom"===p?Math.max(r-h*g-2,0):0,d+=e;for(var _=c;_<l;_++)if(0!==(a=n.getLineWidth(_))){for(var x=y[_],E=x.length,S=f,T=0;T<E;T++){var A=x[T].prop.align;if(void 0!==A){S=A;break}}for(u="center"===S?(i-a)/2:"right"===S?b?0:i-a:b?i-a:0,u+=t,T=0;T<E;T++)this.drawPen(x[T],u,d,w)}s.restore()},drawPen(t,e,i,r){e+=t.x,i+=t.y+(t.prop.y||0),void 0!==r&&(e=r-e);var n=this.canvas,s=this.context;s.save();var o=this.parser.propToContextStyle(this.defaultStyle,t.prop);o.buildFont(),o.syncFont(n,s),o.syncStyle(n,s),o.underlineThickness>0&&t.width>0&&this.drawUnderline(e,i,t.width,o),t.isTextPen&&this.drawText(e,i,t.text,o),t.isImagePen&&this.drawImage(e,i,t.prop.img,o),s.restore(),t.hasAreaMarker&&t.width>0&&this.hitAreaManager.add(t.prop.area,e,i-this.startYOffset,t.width,this.defaultStyle.lineHeight)},clear(){var t=this.canvas;this.context.clearRect(0,0,t.width,t.height)},drawUnderline(t,e,i,r){e+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(t=Math.round(t),e=Math.round(e));var n=this.context,s=n.lineCap;n.lineCap="butt",n.strokeStyle=r.underlineColor,n.lineWidth=r.underlineThickness,n.beginPath(),n.moveTo(t,e),n.lineTo(t+i,e),n.stroke(),n.lineCap=s},drawText(t,e,i,r){this.autoRound&&(t=Math.round(t),e=Math.round(e));var n=this.context;r.stroke&&"none"!==r.stroke&&r.strokeThickness>0&&(r.syncShadow(n,r.shadowStroke),n.strokeText(i,t,e)),r.color&&"none"!==r.color&&(r.syncShadow(n,r.shadowFill),n.fillText(i,t,e))},drawImage(t,e,i,r){e-=this.startYOffset,this.parent.imageManager.draw(i,this.context,t,e,this.autoRound)}},Te=Phaser.Utils.Objects.GetValue,Ae=ue,Ce=de,ke=function(t,e){var i=Array.isArray(t);if(void 0===e?e=i?[]:{}:$(e),i){e.length=t.length;for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}else for(var s in t)e[s]=t[s];return e},Re=Phaser.Utils.Objects.GetFastValue,Pe=ue,Ie=fe;var Oe=new B,Me=new B;class De{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=Re(t,"pensPool",Oe),this.LinesPool=Re(t,"linesPool",Me),this.tagToText=Re(t,"tagToText",f),this.tagToTextScope=Re(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,i,r,n,s){var o=this.PensPool.pop();return null==o&&(o=new class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Te(t,"text",""),this.x=Te(t,"x",0),this.y=Te(t,"y",0),this.width=Te(t,"width",0);var e=Te(t,"prop",null);null===e&&(e={}),this.prop=e,this.newLineMode=Te(t,"newLineMode",0),this.startIndex=Te(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Ce&&(t+="\n"),t}get wrapText(){var t=this.text;return this.newLineMode!==Ae&&(t+="\n"),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Ce&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return""!==this.text}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}),Be.text=t,Be.x=e,Be.y=i,Be.width=r,Be.prop=n,Be.newLineMode=s,o.resetFromJSON(Be),this.addPen(o),this}addImagePen(t,e,i,r){return this.addTextPen("",t,e,i,r,Pe),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,i=t?t.y:0,r=t?ke(t.prop):null;return this.addTextPen("",e,i,0,r,Ie),this}addPen(t){var e=this.lastPen;t.startIndex=null==e?0:e.endIndex,this.pens.push(t);var i=this.lastLine;null==i&&(i=this.LinesPool.pop()||[],this.lines.push(i)),i.push(t),t.newLineMode!==Pe&&(i=this.LinesPool.pop()||[],this.lines.push(i)),this.maxLinesWidth=void 0}clone(t){null==t&&(t=new De),t.clear();for(var e=0,i=this.lines.length;e<i;e++)for(var r=this.lines[e],n=0,s=r.length;n<s;n++){var o=r[n];t.addPen(o.text,o.x,o.y,o.width,ke(o.prop),o.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,i,r=!1;for(e=t;e>=0&&!(r=null!=(i=this.lines[e])&&i.length>0);e--);return r?i[i.length-1].endIndex:0}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var i=e[e.length-1];return null==i?0:i.lastX}getMaxLineWidth(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var t,e=0,i=0,r=this.lines.length;i<r;i++)(t=this.getLineWidth(i))>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,i=this.lines.length;e<i;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,i=0,r=e.length;i<r;i++)t+=e[i].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,i=0,r=this.pens.length;i<r;i++)t+=e[i].rawTextLength;return t}getSliceTagText(t,e,i){if(void 0===t&&(t=0),void 0===e){var r=this.lastPen;if(null==r)return"";e=r.endIndex}void 0===i&&(i=!1);for(var n,s,o,a,h,c,l="",u=0,d=this.pens.length;u<d&&((a=(n=this.pens[u]).endIndex)<=t||(n=this.pens[u],s=i?n.wrapText:n.plainText,h=n.prop,(o=n.startIndex)>=t&&a<=e||(s=s.substring(t-o,e-o)),this.tagToTextScope?l+=this.tagToText.call(this.tagToTextScope,s,h,c):l+=this.tagToText(s,h,c),c=h,!(a>=e)));u++);return l}get length(){return this.lines.length}set length(t){this.clear()}}var Be={};const Le=De,Ne=Phaser.Geom.Rectangle;var Ue=new B;var Fe=function(t,e,i,r){var n=this.hitAreaManager.getFirst(e,i);null!==n&&Ve.call(this,"areadown",n.key,t,e,i)},ze=function(t,e,i,r){var n=this.hitAreaManager.getFirst(e,i);null!==n&&Ve.call(this,"areaup",n.key,t,e,i)},je=function(t,e,i,r){if(null===e)return null!==this.lastHitAreaKey&&Ve.call(this,"areaout",this.lastHitAreaKey,t),void(this.lastHitAreaKey=null);var n=this.hitAreaManager.getFirst(e,i),s=n?n.key:null;this.lastHitAreaKey!==s&&(null!==this.lastHitAreaKey&&Ve.call(this,"areaout",this.lastHitAreaKey,t),null!==s&&Ve.call(this,"areaover",s,t,e,i),this.lastHitAreaKey=s)},Ve=function(t,e,i,r,n){this.parent.emit(`${t}-${e}`,i,r,n),this.parent.emit(t,e,i,r,n)};var Ge=new B,He=function(t){t&&Ge.push(t)},Ye=function(t,e,i){var r=Ge.pop();return null===r&&(r={}),r.text=t,r.width=e,r.newLineMode=i,r};const Ke=ue,We=de,Xe=fe,qe=pe,$e=ge,Je=ye,Ze=me;var Qe=function(t,e,i,r,n){r<=0&&(i=qe);var s=[];if(!t||!t.length)return s;for(var o,a,h,c=i===qe,l=i===$e,u=t.split(Ze),d=0,f=u.length;d<f;d++)if(o=u[d],h=d===f-1?Ke:We,c){var p=e(o);s.push(Ye(o,p,h))}else{var g,y,m,v,b;if(a=0===d?r-n:r,o.length<=100&&(p=e(o))<=a){s.push(Ye(o,p,h));continue}l?(y=""===(g=o.split(" "))[g.length-1])&&(g.length-=1):g=o;for(var w,_="",x=0,E=l?e(" "):void 0,S=0,T=g.length;S<T;S++)if(v=e(m=g[S]),b=S===T-1,!l||b&&!y||(m+=" ",v+=E),l&&v>r){""!==_?s.push(Ye(_,x,Xe)):0===S&&n>0&&s.push(Ye("",0,Xe)),s.push(...Qe(m,e,Je,r,0));var A=s.pop();_=A.text,x=A.width,He(A)," "===_&&(_="",x=0)}else(w=x+v)>a?(s.push(Ye(_,x,Xe)),_=m,x=v,a=r):(_+=m,x=w),b&&s.push(Ye(_,x,h))}return s};const ti=Qe,ei=Phaser.Utils.Objects.GetValue,ii=pe,ri=ue;class ni{constructor(t){this.parent=t.parent,this.context=ei(t,"context",null),this.canvas=this.context.canvas,this.parser=ei(t,"parser",null),this.defaultStyle=ei(t,"style",null),this.autoRound=!0,this.pensPool=ei(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return Ue.pushMultiple(this.hitAreas),this}add(t,e,i,r,n){var s=Ue.pop();return null===s?s=new Ne(e,i,r,n):s.setTo(e,i,r,n),s.key=t,this.hitAreas.push(s),this}getFirst(t,e){for(var i=0,r=this.hitAreas.length;i<r;i++){var n=this.hitAreas[i];if(n.contains(t,e))return n}return null}drawBounds(t,e,i){void 0===e&&(e=16777215),i&&t.save().scaleCanvas(i.scaleX,i.scaleY).rotateCanvas(i.rotation).translateCanvas(i.x,i.y);for(var r=0,n=this.hitAreas.length;r<n;r++){var s=this.hitAreas[r];t.lineStyle(1,e).strokeRect(s.x,s.y,s.width,s.height)}return i&&t.restore(),this}},this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(t){return e.measureText(t).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,e,i,r,n){if(void 0===n&&(n=this.penManager),n.clear(),""===t)return n;var s=this.parent.style;if(s.isWrapFitMode){var o=this.parent.padding;i=s.fixedWidth-o.left-o.right}for(var a,h,c,l,u,d,f=this.canvas,p=this.context,g=function(t){return p.measureText(t).width},y=0,m=0,v=s.wrapCallback,b=s.wrapCallbackScope,w=!0,_=this.parser.splitText(t),x=0,E=_.length;x<E;x++)if(a=(l=this.parser.tagTextToProp(_[x],h)).plainText,(h=l.prop).img){var S=this.imageManager.getOuterWidth(h.img);i>0&&e!==ii&&i<y+S&&(n.addNewLinePen(),m+=r,y=0),n.addImagePen(y,m,S,ke(h)),y+=S}else if(""!==a){if(p.save(),(c=this.parser.propToContextStyle(this.defaultStyle,h)).buildFont(),c.syncFont(f,p),c.syncStyle(f,p),v){"string"==typeof(u=v.call(b,a,g,i,y))&&(u=u.split("\n"));for(var T=0,A=u.length;T<A;T++)"string"==typeof(C=u[T])?u[T]=Ye(C,g(C),T<A-1?2:0):w=!1}else u=ti(a,g,e,i,y);var C;for(T=0,A=u.length;T<A;T++)C=u[T],n.addTextPen(C.text,y,m,C.width,ke(h),C.newLineMode),C.newLineMode!==ri?(y=0,m+=r):y+=C.width;w&&(d=u)&&Ge.pushMultiple(d),u=null,p.restore()}for(x=0,E=this.lines.length;x<E;x++){var k=this.lines[x],R=k[k.length-1];R&&(R.width+=this.parser.getStrokeThinkness(this.defaultStyle,R.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Le({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,i){var r;if(null==t)r=this.penManager.plainText;else{var n=this.parser.splitText(t,1);r="";for(var s=0,o=n.length;s<o;s++)r+=n[s]}return null==e&&null==i||(null==e&&(e=0),null==i&&(i=r.length),r=r.substring(e,i)),r}getPenManager(t,e){if(void 0===t)return this.copyPenManager(e,this.penManager);void 0===e&&(e=this.newPenManager());var i=this.defaultStyle;return this.updatePenManager(t,i.wrapMode,i.wrapWidth,i.lineHeight,e),e}getText(t,e,i,r){if(null==t)return this.penManager.getSliceTagText(e,i,r);var n=this.tmpPenManager,s=this.defaultStyle;return this.updatePenManager(t,s.wrapMode,s.wrapWidth,s.lineHeight,n),n.getSliceTagText(e,i,r)}copyPenManager(t,e){return void 0===e&&(e=this.penManager),e.copy(t)}getTextWidth(t){return void 0===t&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return void 0===t&&(t=this.penManager),t.lastPen}}var si={setInteractive:function(){this.parent.on("pointerdown",Fe,this).on("pointerup",ze,this).on("pointermove",je,this).on("pointerover",je,this).on("pointerout",(function(t,e){je.call(this,t,null,null,e)}),this)}};Object.assign(ni.prototype,Se,si);const oi=ni,ai=Phaser.Utils.Objects.GetValue,hi=function(t,e){void 0===e&&(e={key:t}),e.hasOwnProperty("key")||(e.key=t);var i=e.key,r=e.frame,n=e.width,s=e.height;if(void 0===n||void 0===s){var o=this.textureManager.getFrame(i,r),a=o?o.cutWidth:0,h=o?o.cutHeight:0;void 0===n&&void 0===s?(n=a,s=h):void 0===n?n=a*(s/h):void 0===s&&(s=h*(n/a))}this.images[t]={key:i,frame:r,width:n,height:s,y:ai(e,"y",0),left:ai(e,"left",0),right:ai(e,"right",0)}};class ci{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if("string"==typeof t)hi.call(this,t,e);else if(Array.isArray(t))for(var i=0,r=(n=t).length;i<r;i++)hi.call(this,n[i]);else{var n=t;for(var t in n)hi.call(this,t,n[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var li={draw:function(t,e,i,r,n){var s=this.get(t);i+=s.left,r+=s.y,n&&(i=Math.round(i),r=Math.round(r));var o=this.textureManager.getFrame(s.key,s.frame);e.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,i,r,s.width,s.height)}};Object.assign(ci.prototype,li);const ui=ci,di=Phaser.Utils.Objects.IsPlainObject,fi=Phaser.DOM.AddToDOM,pi=Phaser.Display.Canvas.CanvasPool,gi=Phaser.GameObjects.GameObject,yi=Phaser.Utils.Objects.GetValue,mi=Phaser.DOM.RemoveFromDOM,vi=me;var bi={};class wi extends gi{constructor(t,e,i,r,n,s,o){if(di(e)){var a=e;e=yi(a,"x",0),i=yi(a,"y",0),r=yi(a,"text",""),n=yi(a,"style","")}if(void 0===e&&(e=0),void 0===i&&(i=0),super(t,s),this.renderer=t.sys.game.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=pi.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var h=n.align;delete n.align,n.halign=h}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new xe(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),bi.hasOwnProperty(s)||(bi[s]=new B),this.canvasText=new oi({parent:this,context:this.context,parser:o,style:this.style,pensPool:bi[s]}),this.parser=o,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(r),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&mi(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),pi.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",fi(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return(t=null==t?"":Array.isArray(t)?t.join("\n"):t.toString())===this._text||(this._text=t,this.updateText()),this}appendText(t){return null==t||(Array.isArray(t)&&(t=t.join("\n")),this.setText(this.text+t.toString())),this}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,i){return this.style.setBackgroundColor(t,e,i)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,i,r,n,s){return this.style.setShadow(t,e,i,r,n,s)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setXOffset(t){return this.style.setXOffset(t)}setPadding(t,e,i,r){if("object"==typeof t){var n=t,s=yi(n,"x",null);null!==s?(t=s,i=s):(t=yi(n,"left",0),i=yi(n,"right",t));var o=yi(n,"y",null);null!==o?(e=o,r=o):(e=yi(n,"top",0),r=yi(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===r&&(r=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=r,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){void 0===t&&(t=!0);var e=this.canvasText,i=this.style;t&&e.updatePenManager(this._text,i.wrapMode,i.wrapWidth,i.lineHeight);var r,n,s=this.padding,o=Math.ceil(e.linesWidth);0===i.fixedWidth?(this.width=o+s.left+s.right,r=o):(this.width=i.fixedWidth,(r=this.width-s.left-s.right)<o&&(r=o)),0===i.fixedHeight?(this.height=e.linesHeight+s.top+s.bottom,n=e.linesHeight):(this.height=i.fixedHeight,(n=this.height-s.top-s.bottom)<e.linesHeight&&(n=e.linesHeight));var a=this.width,h=this.height;this.updateDisplayOrigin();var c=i.resolution;a*=c,h*=c,a=Math.max(Math.ceil(a),1),h=Math.max(Math.ceil(h),1);var l=this.canvas,u=this.context;l.width!==a||l.height!==h?(l.width=a,l.height=h,this.frame.setSize(a,h)):u.clearRect(0,0,a,h),u.save(),u.scale(c,c);var d=this.style.rtl?s.right:s.left,f=s.top;e.draw(d,f,r,n),u.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}toJSON(){var t=_i.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}setInteractive(t,e,i){var r=!!this.input;return gi.prototype.setInteractive.call(this,t,e,i),r||this.canvasText.setInteractive(),this}getWrappedText(t,e,i){return(t=this.canvasText.getText(t,e,i,!0)).split(vi)}getPlainText(t,e,i){return this.canvasText.getPlainText(t,e,i)}getText(t,e,i,r){return void 0===r&&(r=!1),this.canvasText.getText(t,e,i,r)}getSubString(t,e,i){return this.getText(t,e,i)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,e){return this.canvasText.getPenManager(t,e)}setSize(t,e){return this.setFixedSize(t,e)}resize(t,e){return this.setFixedSize(t,e)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new ui(this.scene)),this._imageManager}addImage(t,e){return this.imageManager.add(t,e),this}drawAreaBounds(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}measureTextMargins(t,e){return function(t,e,i){void 0===i&&(i={});var r=Ee.create(this),n=r.getContext("2d");t.syncFont(r,n);var s=n.measureText(e),o=Math.ceil(s.width*t.baselineX),a=o,h=2*a;if(a=a*t.baselineY|0,r.width=o,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,o,h),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,a),i.left=0,0===o||0===h||!n.getImageData(0,0,o,h))return Ee.remove(r),i;for(var c=n.getImageData(0,0,o,h).data,l=!1,u=0;u<o;u++){for(var d=0;d<h;d++)if(255!==c[4*(d*o+u)]){i.left=u,l=!0;break}if(l)break}return Ee.remove(r),i}(this.style,t,e)}generateTexture(t,e,i,r,n){var s=this.canvas;return void 0===r?r=s.width:r*=this.resolution,void 0===n?n=s.height:n*=this.resolution,jt(this.scene,s,t,e,i,r,n),this}}const _i=Phaser.GameObjects.Components;Phaser.Class.mixin(wi,[_i.Alpha,_i.BlendMode,_i.ComputedSize,_i.Crop,_i.Depth,_i.Flip,_i.GetBounds,_i.Mask,_i.Origin,_i.Pipeline,_i.ScrollFactor,_i.Tint,_i.Transform,_i.Visible,he]);const xi=wi;var Ei=function(t,e){return void 0===e?`\\[${t}\\]`:`\\[${t}=(${e})\\]`},Si=function(t){return`\\[/${t}\\]`};const Ti="[-.0-9]+",Ai="[a-z]+|#[0-9abcdef]+",Ci="[^\\]]+",ki=Ei("esc"),Ri=Si("esc"),Pi=Ei("raw"),Ii=Si("raw"),Oi=Ei("b"),Mi=Si("b"),Di=Ei("i"),Bi=Si("i"),Li="size",Ni=Ei(Li,Ti),Ui=Si(Li),Fi="color",zi=Ei(Fi,Ai),ji=Si(Fi),Vi=Ei("u"),Gi=Ei("u",Ai),Hi=Si("u"),Yi="shadow",Ki=Ei(Yi),Wi=Si(Yi),Xi="stroke",qi=Ei(Xi),$i=Ei(Xi,Ai),Ji=Si(Xi),Zi=Ei("y",Ti),Qi=Si("y"),tr=Ei("img",Ci),er=Si("img"),ir="area",rr=Ei(ir,Ci),nr=Si(ir),sr="align",or=Ei(sr,Ci),ar=Si(sr),hr=new RegExp(ki,"i"),cr=new RegExp(Ri,"i"),lr=new RegExp(Pi,"i"),ur=new RegExp(Ii,"i"),dr=new RegExp(Oi,"i"),fr=new RegExp(Mi,"i"),pr=new RegExp(Di,"i"),gr=new RegExp(Bi,"i"),yr=new RegExp(Ni,"i"),mr=new RegExp(Ui,"i"),vr=new RegExp(zi,"i"),br=new RegExp(ji,"i"),wr=new RegExp(Vi,"i"),_r=new RegExp(Gi,"i"),xr=new RegExp(Hi,"i"),Er=new RegExp(Ki,"i"),Sr=new RegExp(Wi,"i"),Tr=new RegExp(qi,"i"),Ar=new RegExp($i,"i"),Cr=new RegExp(Ji,"i"),kr=new RegExp(Zi,"i"),Rr=new RegExp(Qi,"i"),Pr=new RegExp(tr,"i"),Ir=new RegExp(er,"i"),Or=new RegExp(rr,"i"),Mr=new RegExp(nr,"i"),Dr=new RegExp(or,"i"),Br=new RegExp(ar,"i"),Lr=new RegExp([Pi,Ii,ki,Ri,Oi,Mi,Di,Bi,Ni,Ui,zi,ji,Vi,Gi,Hi,Ki,Wi,qi,$i,Ji,Zi,Qi,tr,er,rr,nr,or,ar].join("|"),"ig"),Nr=!1,Ur=!0;var Fr={plainText:null,prevProp:null},zr=function(t,e,i,r){return e===Ur?t[i]=r:t.hasOwnProperty(i)&&delete t[i],t};var jr=new xe;var Vr={};class Gr{getStrokeThinkness(t,e){return e.hasOwnProperty("stroke")?t.strokeThickness:0}}var Hr={splitText:function(t,e){for(var i=[],r=0,n=!1,s=!1;;){var o=Lr.exec(t);if(!o)break;var a=o[0];if(s){if(!cr.test(a))continue;s=!1}else if(n){if(!ur.test(a))continue;n=!1}else hr.test(a)?s=!0:lr.test(a)&&(n=!0);var h=Lr.lastIndex-a.length;if(r<h){var c=t.substring(r,h);i.push(c)}void 0===e&&i.push(a),r=Lr.lastIndex}var l=t.length;return r<l&&i.push(t.substring(r,l)),i},tagTextToProp:function(t,e){null==e&&(e={});var i="";if(e.img&&zr(e,Nr,"img"),e.esc)cr.test(t)?zr(e,Nr,"esc"):i=t;else if(e.raw)ur.test(t)?zr(e,Nr,"raw"):i=t;else if(hr.test(t))zr(e,Ur,"esc",!0);else if(cr.test(t))zr(e,Nr,"esc");else if(lr.test(t))zr(e,Ur,"raw",!0);else if(ur.test(t))zr(e,Nr,"raw");else if(dr.test(t))zr(e,Ur,"b",!0);else if(fr.test(t))zr(e,Nr,"b");else if(pr.test(t))zr(e,Ur,"i",!0);else if(gr.test(t))zr(e,Nr,"i");else if(yr.test(t)){var r=t.match(yr);zr(e,Ur,"size",`${r[1]}px`)}else mr.test(t)?zr(e,Nr,"size"):vr.test(t)?(r=t.match(vr),zr(e,Ur,"color",r[1])):br.test(t)?zr(e,Nr,"color"):wr.test(t)?zr(e,Ur,"u",!0):_r.test(t)?(r=t.match(_r),zr(e,Ur,"u",r[1])):xr.test(t)?zr(e,Nr,"u"):Er.test(t)?zr(e,Ur,"shadow",!0):Sr.test(t)?zr(e,Nr,"shadow"):Tr.test(t)?zr(e,Ur,"stroke",!0):Ar.test(t)?(r=t.match(Ar),zr(e,Ur,"stroke",r[1])):Cr.test(t)?zr(e,Nr,"stroke"):kr.test(t)?(r=t.match(kr),zr(e,Ur,"y",parseFloat(r[1]))):Rr.test(t)?zr(e,Nr,"y"):Pr.test(t)?(r=t.match(Pr),zr(e,Ur,"img",r[1])):Ir.test(t)?zr(e,Nr,"img"):Or.test(t)?(r=t.match(Or),zr(e,Ur,"area",r[1])):Mr.test(t)?zr(e,Nr,"area"):Dr.test(t)?(r=t.match(Dr),zr(e,Ur,"align",r[1])):Br.test(t)?zr(e,Nr,"align"):i=t;var n=Fr;return n.plainText=i,n.prop=e,n},propToContextStyle:function(t,e){var i,r,n=jr;if(e.hasOwnProperty("img"))n.image=e.img;else{if(n.image=null,e.hasOwnProperty("family")?n.fontFamily=e.family:n.fontFamily=t.fontFamily,e.hasOwnProperty("size")){var s=e.size;"number"==typeof s&&(s=`${s}px`),n.fontSize=s}else n.fontSize=t.fontSize;n.fontStyle=(i=e.b,r=e.i,i&&r?"bold italic":i?"bold":r?"italic":""),e.hasOwnProperty("color")?n.color=e.color:n.color=t.color,e.hasOwnProperty("stroke")?!0===e.stroke?(n.stroke=t.stroke,n.strokeThickness=t.strokeThickness):(n.stroke=e.stroke,n.strokeThickness=t.strokeThickness):(n.stroke=t.stroke,n.strokeThickness=0)}return e.hasOwnProperty("shadow")?!0===e.shadow?(n.shadowColor=t.shadowColor,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor=e.shadow,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor="#000",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowStroke=!1,n.shadowFill=!1),e.hasOwnProperty("u")?!0===e.u?(n.underlineColor=t.underlineColor,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset):(n.underlineColor=e.u,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset):(n.underlineColor="#000",n.underlineThickness=0,n.underlineOffset=0),n},propToTagText:function(t,e,i){null==i&&(i=Vr);var r=[];for(var n in i)e.hasOwnProperty(n)||r.push(`[/${n}]`);for(var n in e){var s=e[n];if(i[n]!==s)switch(n){case"size":r.push(`[size=${s.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${n}=${s}]`);break;case"u":!0===s?r.push("[u]"):r.push(`[u=${s}]`);break;default:r.push(`[${n}]`)}}return r.push(t),r.join("")}};Object.assign(Gr.prototype,Hr);const Yr=Gr,Kr=class extends xi{constructor(t,e,i,r,n){super(t,e,i,r,n,"rexBBCodeText",new Yr(n))}};n.register("BBCodeText",(function(t,e,i,r){var n=new Kr(this.scene,t,e,i,r);return this.scene.add.existing(n),n})),S(window,"RexPlugins.UI.BBCodeText",Kr);var Wr={plainText:null,prevProp:null},Xr=new xe,qr=function(t){return 0===(t=t.replace(en,"")).length},$r=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Jr=/<\s*class=/i,Zr=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Qr=/<\s*style=/i,tn=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,en=/^\s+|\s+$/;const rn=Phaser.Utils.Objects.GetValue,nn=class extends xi{constructor(t,e,i,r,n){var s=rn(n,"tags",void 0);super(t,e,i,r,n,"rexTagText",new class{constructor(t){void 0===t&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}getTag(t){return this.tags[t]}splitText(t,e){for(var i=[],r=0;;){var n=$r.exec(t);if(!n)break;var s=n[0],o=$r.lastIndex-s.length;if(r<o&&i.push(t.substring(r,o)),void 0===e)i.push(s);else if(1===e)if(Jr.test(s)){var a=s.match(Zr);i.push(a[2])}else Qr.test(s)&&(a=s.match(tn),i.push(a[2]));r=$r.lastIndex}var h=t.length;return r<h&&i.push(t.substring(r,h)),i}tagTextToProp(t,e){var i,r;if(Jr.test(t)){if(null!=(o=t.match(Zr))){var n=o[1],s=this.tags;(r=s.hasOwnProperty(n)?s[n]:{})._class=n,i=o[2]}}else if(Qr.test(t)){var o;if(null!=(o=t.match(tn))){var a=o[1];(r=function(t){for(var e,i,r,n={},s=0,o=(t=t.split(";")).length;s<o;s++)if(i=(e=t[s].split(":"))[0],r=e[1],!qr(i)&&!qr(r)){switch(i){case"stroke":var a=r.split(" ");r={},(c=a.length)>=1&&(r.color=a[0]),c>=2&&(r.thinkness=parseInt(a[1].replace("px","")));break;case"shadow":var h=r.split(" ");r={},(c=h.length)>=1&&(r.color=h[0]),c>=2&&(r.offsetX=parseInt(h[1].replace("px",""))),c>=3&&(r.offsetY=parseInt(h[2].replace("px",""))),c>=4&&(r.blur=parseInt(h[3].replace("px","")));break;case"u":case"underline":var c,l=r.split(" ");r={},(c=l.length)>=1&&(r.color=l[0]),c>=2&&(r.thinkness=parseInt(l[1].replace("px",""))),c>=3&&(r.offset=parseInt(l[2].replace("px","")));break;case"y":r=parseFloat(r)}n[i]=r}return n}(a))._style=a,i=o[2]}}null==i&&(i=t),null==r&&(r={});var h=Wr;return h.plainText=i,h.prop=r,h}propToContextStyle(t,e){var i=Xr;if(e.hasOwnProperty("img"))i.image=e.img;else{if(i.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var r=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];i.fontFamily=r}else i.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var n=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];"number"==typeof n&&(n=`${n}px`),i.fontSize=n}else i.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var s=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];i.fontStyle=s}else i.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var o=e.hasOwnProperty("color")?e.color:e["font-color"];i.color=o}else i.color=t.color;if(e.hasOwnProperty("stroke")){var a=e.stroke;i.stroke=a.hasOwnProperty("color")?a.color:t.stroke,i.strokeThickness=a.hasOwnProperty("thinkness")?a.thinkness:t.strokeThickness}else i.stroke=t.stroke,i.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var h=e.shadow;i.shadowColor=h.hasOwnProperty("color")?h.color:t.shadowColor,i.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:t.shadowOffsetX,i.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:t.shadowOffsetY,i.shadowBlur=h.hasOwnProperty("blur")?h.blur:t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0}else i.shadowColor=t.shadowColor,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=t.shadowStroke,i.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var c=e.hasOwnProperty("u")?e.u:e.underline;i.underlineColor=c.hasOwnProperty("color")?c.color:t.underlineColor,i.underlineThickness=c.hasOwnProperty("thinkness")?c.thinkness:t.underlineThickness,i.underlineOffset=c.hasOwnProperty("offset")?c.offset:t.underlineOffset}else i.underlineColor=t.underlineColor,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset;return i}getStrokeThinkness(t,e){var i;if(e.hasOwnProperty("stroke")){var r=e.stroke;i=r.hasOwnProperty("thinkness")?r.thinkness:t.strokeThickness}else i=t.strokeThickness;return i}propToTagText(t,e,i){return e.hasOwnProperty("_class")?""===t&&this.isTextTag(e._class)?"":`<class='${e._class}'>${t}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return!!e&&null==e.img}}(s))}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}};n.register("tagText",(function(t,e,i,r){var n=new nn(this.scene,t,e,i,r);return this.scene.add.existing(n),n})),S(window,"RexPlugins.UI.TagText",nn);const sn=Phaser.Utils.Objects.GetValue,on=function(t,e,i){var r,n;for(var s in void 0===i&&(i={}),t)r=t[s],void 0!==(n=sn(e,s,r[1]))&&(i[r[0]]=n);return i};var an=function(t){t.stopPropagation()};const hn=Phaser.GameObjects.DOMElement,cn=Phaser.Utils.Objects.IsPlainObject,ln=Phaser.Utils.Objects.GetValue;class un extends hn{constructor(t,e,i,r,n,s){var o;cn(e)?(e=ln(s=e,"x",0),i=ln(s,"y",0),r=ln(s,"width",0),n=ln(s,"height",0)):cn(r)&&(r=ln(s=r,"width",0),n=ln(s,"height",0)),void 0===s&&(s={});var a=ln(s,"type","text");"textarea"===a?(o=document.createElement("textarea")).style.resize="none":(o=document.createElement("input")).type=a,on(fn,s,o);var h=ln(s,"style",void 0);h=on(pn,s,h);var c=o.style;for(var l in s)l in fn||l in pn||l in c&&(h[l]=s[l]);h["box-sizing"]="border-box",super(t,e,i,o,h),this.type="rexInputText",this.resize(r,n),function(t,e,i){for(let r in i)e.addEventListener(r,(function(e){t.emit(i[r],t,e)}))}(this,o,gn),function(t){t.addEventListener("touchstart",an,!1),t.addEventListener("touchmove",an,!1),t.addEventListener("touchend",an,!1),t.addEventListener("mousedown",an,!1),t.addEventListener("mouseup",an,!1),t.addEventListener("mousemove",an,!1)}(o),ln(s,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",(function(){this._isFocused=!0}),this).on("blur",(function(){this._isFocused=!1}),this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return void 0===t?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return void 0===t&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return void 0===t&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var dn={resize:function(t,e){if(this.scene.sys.scale.autoRound&&(t=Math.floor(t),e=Math.floor(e)),this.width===t&&this.height===e)return this;var i=this.node.style;return i.width=`${t}px`,i.height=`${e}px`,this.updateSize(),this}};Object.assign(un.prototype,dn);const fn={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},pn={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},gn={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"},yn=un;var mn=function(t,e){for(var i=t.scene,r=i.input.cameras.getCamerasBelowPointer(e),n=i.input.manager,s=[t],o=0,a=r.length;o<a;o++)if(n.hitTest(e,s,r[o]).length>0)return!0;return!1};const vn=function(t,e,i,r){if(e)return!(i&&!i(t,e)||!mn(t,e)||r&&!r(t,e));for(var n=t.scene.input.manager,s=n.pointersTotal,o=n.pointers,a=0;a<s;a++)if(e=o[a],(!i||i(t,e))&&mn(t,e)&&(!r||r(t,e)))return!0;return!1},bn=Phaser.Utils.Objects.GetValue,wn=Phaser.Math.Wrap,_n=class extends yn{constructor(t,e){super(t.scene,e);var i=this.node.style;i.position="absolute",i.opacity=0,i.pointerEvents="none",i.zIndex=0,i.transform="scale(0)",this.setCursor(bn(e,"cursor","|")),this.setCursorFlashDuration(bn(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(bn(e,"enterClose",!0)),this.onOpenCallback=bn(e,"onOpen",void 0),this.onCloseCallback=bn(e,"onClose",void 0),this.onUpdateCallback=bn(e,"onUpdate",void 0),this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",(function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)}),this).on("blur",(function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)}),this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){vn(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(t,this.textObject,this);e&&(t=e)}if(this.isFocused&&this.hasCursor){var i=this.cursorPosition;t=t.substring(0,i)+this.cursor+t.substring(i)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&""!==t,t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;t=this.cursorFlashTimer<this.cursorFlashDuration/2?this._cursor:" ";var e=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=wn(e,0,this.cursorFlashDuration),t}setEnterClose(t){return void 0===t&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}};n.register("hiddenEdit",(function(t,e){return new _n(t,e)})),S(window,"RexPlugins.UI.HiddenEdit",_n);const xn=Phaser.GameObjects.Zone,En=Phaser.Utils.Array.Add,Sn=Phaser.Utils.Array.Remove;class Tn extends xn{constructor(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=1),super(t,e,i,r,n),this.children=[]}destroy(t){if(this.scene){if(t)for(var e,i=this.children.length-1;i>=0;i--)(e=this.children[i]).parentContainer||e.displayList||e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return-1!==this.children.indexOf(t)}add(t){var e=this;return En(this.children,t,0,(function(t){t.once("destroy",e.onChildDestroy,e)}),this),this}remove(t,e){var i=this;return Sn(this.children,t,(function(t){t.off("destroy",i.onChildDestroy,i),e&&t.destroy()})),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e,i=0,r=this.children.length;i<r;i++)(e=this.children[i]).off("destroy",this.onChildDestroy,this),t&&e.destroy();return this.children.length=0,this}}const An=Phaser.GameObjects.Components;Phaser.Class.mixin(Tn,[An.Alpha,An.Flip]);const Cn=Tn;var kn=function(t,e){var i;if(void 0===e)t.hasOwnProperty("rexContainer")&&(i=t.rexContainer.parent);else for(i=kn(t);i&&i.name!==e;)i=kn(i);return i},Rn=function(t){for(var e=kn(t);e;)t=e,e=kn(e);return t};const Pn=Phaser.Math.DegToRad,In=Phaser.Math.RadToDeg,On=function(t){if(!t.hasOwnProperty("rexContainer")){var e={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(e,"angle",{get:function(){return In(this.rotation)},set:function(t){this.rotation=Pn(t)}}),Object.defineProperty(e,"displayWidth",{get:function(){return t.width*this.scaleX},set:function(e){this.scaleX=e/t.width}}),Object.defineProperty(e,"displayHeight",{get:function(){return t.height*this.scaleY},set:function(e){this.scaleY=e/t.height}}),t.rexContainer=e}return t.rexContainer},Mn={setParent(t,e){void 0===e&&(e=this);var i=On(t);return e?(i.parent=e,i.self=t):(i.parent=null,i.self=null),this},getParent(t,e){return"string"==typeof t&&(e=t,t=void 0),void 0===t&&(t=this),kn(t,e)},getTopmostParent(t){return void 0===t&&(t=this),Rn(t)}},Dn=Phaser.Utils.Objects.GetValue,Bn=Cn.prototype.add;var Ln=function(t,e){this.setParent(t);var i=On(t);return Un(i,e),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),Bn.call(this,t),this},Nn=function(t,e){this.setParent(t);var i=On(t);return Un(i,e),i.x=t.x,i.y=t.y,i.rotation=t.rotation,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.alpha=t.alpha,i.visible=t.visible,i.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),Bn.call(this,t),this},Un=function(t,e){t.syncPosition=Dn(e,"syncPosition",!0),t.syncRotation=Dn(e,"syncRotation",!0),t.syncScale=Dn(e,"syncScale",!0),t.syncAlpha=Dn(e,"syncAlpha",!0)};const Fn={add(t){return Array.isArray(t)?this.addMultiple(t):Ln.call(this,t),this},pin(t,e){return Array.isArray(t)?this.addMultiple(t,e):Ln.call(this,t,e),this},addMultiple(t){for(var e=0,i=t.length;e<i;e++)Ln.call(this,t[e]);return this},addLocal(t){return Array.isArray(t)?this.addMultiple(t):Nn.call(this,t),this},pinLocal(t,e){return Array.isArray(t)?this.addMultiple(t,e):Nn.call(this,t,e),this},addLocalMultiple(t){for(var e=0,i=t.length;e<i;e++)Nn.call(this,t[e]);return this}},zn=Cn.prototype.remove,jn=Cn.prototype.clear,Vn={remove(t,e){return kn(t)!==this||(this.setParent(t,null),zn.call(this,t,e)),this},clear(t){for(var e=0,i=this.children.length;e<i;e++)this.setParent(this.children[e],null);return jn.call(this,t),this}},Gn={getLocalState:t=>On(t),resetChildState(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState(t){for(var e=0,i=t.length;e<i;e++)this.resetChildState(t[e]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Hn=Phaser.Math.RotateAround,Yn={worldToLocal(t){return t.x-=this.x,t.y-=this.y,Hn(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t},localToWorld(t){return t.x*=this.scaleX,t.y*=this.scaleY,Hn(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},Kn=function(t,e){return t===e?1:t/e},Wn={updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var e=On(t),i=e.parent;return e.syncPosition&&(t.x=e.x,t.y=e.y,i.localToWorld(t)),e.syncRotation&&(t.rotation=e.rotation+i.rotation),e.syncScale&&(t.scaleX=e.scaleX*i.scaleX,t.scaleY=e.scaleY*i.scaleY),t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(t){var e=On(t),i=e.parent;return e.x=t.x,e.y=t.y,i.worldToLocal(e),e.scaleX=Kn(t.scaleX,i.scaleX),e.scaleY=Kn(t.scaleY,i.scaleY),e.rotation=t.rotation-i.rotation,this},setChildPosition(t,e,i){return t.x=e,t.y=i,this.resetChildPositionState(t),this},setChildLocalPosition(t,e,i){var r=On(t);return r.x=e,r.y=i,this.updateChildPosition(t),this},resetLocalPositionState(){var t=On(this).parent;return t&&t.resetChildPositionState(this),this}},Xn={updateChildRotation(t){var e=On(t),i=e.parent;return e.syncRotation&&(t.rotation=i.rotation+e.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(t){var e=On(t),i=e.parent;return e.rotation=t.rotation-i.rotation,this},setChildRotation(t,e){return t.rotation=e,this.resetChildRotationState(t),this},setChildAngle(t,e){return t.angle=e,this.resetChildRotationState(t),this},setChildLocalRotation(t,e){return On(t).rotation=e,this.updateChildRotation(t),this},resetLocalRotationState(){var t=On(this).parent;return t&&t.resetChildRotationState(this),this}},qn={updateChildScale(t){var e=On(t),i=e.parent;return e.syncScale&&(t.scaleX=i.scaleX*e.scaleX,t.scaleY=i.scaleY*e.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(t){var e=On(t),i=e.parent;return e.scaleX=Kn(t.scaleX,i.scaleX),e.scaleY=Kn(t.scaleY,i.scaleY),this},setChildScale(t,e,i){return void 0===i&&(i=e),t.scaleX=e,t.scaleY=i,this.resetChildScaleState(t),this},setChildLocalScale(t,e,i){void 0===i&&(i=e);var r=On(t);return r.scaleX=e,r.scaleY=i,this.updateChildScale(t),this},setChildDisplaySize(t,e,i){return t.setDisplaySize(e,i),this.resetChildScaleState(t),this},resetLocalScaleState(){var t=On(this).parent;return t&&t.resetChildScaleState(this),this}},$n={updateChildVisible(t){var e=On(t),i=e.parent,r=!e.hasOwnProperty("maskVisible")||e.maskVisible;return t.visible=i.visible&&e.visible&&r,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(t){var e=On(t);return e.hasOwnProperty("maskVisible")&&delete e.maskVisible,e.visible=t.visible,this},setChildVisible(t,e){return this.setChildLocalVisible(t,e),this},setChildLocalVisible(t,e){return void 0===e&&(e=!0),On(t).visible=e,this.updateChildVisible(t),this},setChildMaskVisible(t,e){return void 0===e&&(e=!0),On(t).maskVisible=e,this.updateChildVisible(t),this},resetLocalVisibleState(){var t=On(this).parent;return t&&t.resetChildVisibleState(this),this}},Jn={updateChildAlpha(t){var e=On(t),i=e.parent;return e.syncAlpha&&(t.alpha=i.alpha*e.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(t){var e=On(t),i=e.parent;return e.alpha=Kn(t.alpha,i.alpha),this},setChildAlpha(t,e){return t.alpha=e,this.resetChildAlphaState(t),this},setChildLocalAlpha(t,e){return On(t).alpha=e,this.updateChildAlpha(t),this},resetLocalAlphaState(){var t=On(this).parent;return t&&t.resetChildAlphaState(this),this}},Zn={updateChildActive(t){var e=On(t),i=e.parent;return t.active=i.active&&e.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(t){return On(t).active=t.active,this},setChildActive(t,e){return t.active=e,this.resetChildActiveState(t),this},setChildLocalActive(t,e){return void 0===e&&(e=!0),On(t).active=e,this.updateChildActive(t),this},resetLocalActiveState(){var t=On(this).parent;return t&&t.resetChildActiveState(this),this}},Qn={updateChildScrollFactor(t){var e=On(t).parent;return t.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},ts={updateChildMask(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(t){return this.mask=t,this},clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},es=function(t,e){if(0===t.length)return t;void 0===e&&(e=!1);var i=t[0].scene.sys.displayList;return i.depthSort(),e?t.sort((function(t,e){return i.getIndex(e)-i.getIndex(t)})):t.sort((function(t,e){return i.getIndex(t)-i.getIndex(e)})),t},is={setDepth(t,e){if(this.depth=t,!e&&this.children)for(var i=this.getAllChildren(),r=0,n=i.length;r<n;r++)i[r].depth=t;return this},swapDepth(t){var e=this.depth,i=t.depth;return this.setDepth(i),t.setDepth(e),this},incDepth(t){if(this.depth+=t,this.children)for(var e=this.getAllChildren(),i=0,r=e.length;i<r;i++)e[i].depth+=t;return this},moveDepthBelow(t){var e=t.scene.children,i=this.getAllChildren([this]);es(i);for(var r=0,n=i.length;r<n;r++){var s=i[r];if(e.exists(s)){e.moveBelow(t,s);break}}return this},moveDepthAbove(t){var e=t.scene.children,i=this.getAllChildren([this]);es(i,!0);for(var r=0,n=i.length;r<n;r++){var s=i[r];if(e.exists(s)){e.moveAbove(t,s);break}}return this}};var rs=function(t,e){if(!e(t)&&t.isRexContainerLite)for(var i=t.children,r=0,n=i.length;r<n;r++)rs(i[r],e)},ns=function(t,e){for(var i=[t];i.length>0;){var r=i.shift();!e(r)&&r.isRexContainerLite&&i.push(...r.children)}};const ss=Phaser.Utils.Array,os={getChildren(t){if(t)for(var e=0,i=this.children.length;e<i;e++)t.push(this.children[e]);else t=this.children;return t},getAllChildren(t){void 0===t&&(t=[]);var e=this;return ns(e,(function(i){i!==e&&t.push(i)})),t},getAllVisibleChildren(t){void 0===t&&(t=[]);var e=this;return ns(e,(function(i){if(i!==e)return!i.visible||void t.push(i)})),t},bfs(t,e){return void 0===e&&(e=this),ns(e,t),this},dfs(t,e){return void 0===e&&(e=this),rs(e,t),this},contains(t){var e=kn(t);return!!e&&(e===this||this.contains(e))},getByName(t,e){if(e){for(var i,r,n=[this];n.length;)for(var s=0,o=(i=n.shift()).children.length;s<o;s++){if((r=i.children[s]).name===t)return r;r.isRexContainerLite&&n.push(r)}return null}return ss.GetFirst(this.children,"name",t)},getRandom(t,e){return ss.GetRandom(this.children,t,e)},getFirst(t,e,i,r){return ss.GetFirstElement(this.children,t,e,i,r)},getAll(t,e,i,r){return ss.GetAll(this.children,t,e,i,r)},count(t,e,i,r){return ss.CountAllMatching(this.children,t,e,i,r)},swap(t,e){return ss.Swap(this.children,t,e),this},setAll(t,e,i,r){return ss.SetAll(this.children,t,e,i,r),this}},as=function(t){return"[object Array]"===Object.prototype.toString.call(t)},hs={tweenChild(t){var e=t.targets;as(e)||(e=[e]);for(var i,r,n=[],s=0,o=e.length;s<o;s++)(r=e[s]).hasOwnProperty("rexContainer")&&(i=r.scene,n.push(r.rexContainer));if(i){t.targets=n;var a=i.tweens.add(t);return a.on("update",(function(t,e,r){if(r.parent){var n=r.parent,s=r.self;switch(e){case"x":case"y":n.updateChildPosition(s);break;case"angle":case"rotation":n.updateChildRotation(s);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":n.updateChildScale(s);break;case"alpha":n.updateChildAlpha(s)}}else i.tweens.remove(t)})),a}},tween(t){var e=this.scene;return t.targets||(t.targets=this),e.tweens.add(t)}};var cs=function(t){var e=this.getAllChildren([this]);return es(e),t.add(e),this};const ls={addToLayer:cs,addToContainer:cs},us=Phaser.Math.RotateAround;var ds={changeOrigin:function(t,e){this.syncChildrenEnable=!1,function(t,e,i){void 0===i&&(i=e);var r={x:(e-t.originX)*t.displayWidth,y:(i-t.originY)*t.displayHeight};us(r,0,0,t.rotation),t.originX=e,t.originY=i,t.x=t.x+r.x,t.y=t.y+r.y}(this,t,e),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),r=0,n=i.length;r<n;r++)this.resetChildPositionState(i[r]);return this}};Object.assign(ds,Mn,Fn,Vn,Gn,Yn,Wn,Xn,qn,$n,Jn,Zn,Qn,ts,is,os,hs,ls);const fs=ds;class ps extends Cn{constructor(t,e,i,r,n,s){super(t,e,i,r,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,s&&this.add(s)}destroy(t){this.scene&&(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return kn(t)}}Object.assign(ps.prototype,fs);const gs=ps,ys=gs;n.register("container",(function(t,e,i,r,n){var s=new ys(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.Container",ys);const ms=Wt;n.register("canvas",(function(t,e,i,r){var n=new ms(this.scene,t,e,i,r);return this.scene.add.existing(n),n})),S(window,"RexPlugins.UI.Canvas",ms);const vs=Phaser.Utils.Objects.GetValue,bs={circle:0,ellipse:1,roundRectangle:2},ws=class extends Wt{constructor(t,e,i,r,n,s){super(t,e,i),this.type="rexCircleMaskImage",this.setTexture(r,n,s)}setTexture(t,e,i){var r,n;if("object"==typeof e&&(i=e,e=void 0),"string"==typeof i?(r=i,n=void 0):(r=vs(i,"maskType",0),n=vs(i,"backgroundColor",void 0)),void 0===r?r=0:"string"==typeof r&&(r=bs[r]),this._textureKey=t,this._frameName=e,null===r)return this.loadTexture(t,e),this.dirty=!0,this;var s=null!=n;s||this.loadTexture(t,e);var o=this.canvas,a=this.context,h=o.width,c=o.height;if(a.save(),a.globalCompositeOperation=s?"source-over":"destination-in",a.beginPath(),2===r){var l=vs(i,"radius",0),u=vs(i,"iteration",void 0);ie(a,0,0,h,c,l,u)}else{var d=Math.floor(h/2),f=Math.floor(c/2);0===r?a.arc(d,f,Math.min(d,f),0,2*Math.PI):a.ellipse(d,f,d,f,0,0,2*Math.PI)}return s&&(a.fillStyle=n),a.fill(),a.restore(),s&&(a.save(),a.globalCompositeOperation="destination-atop",this.loadTexture(t,e),a.restore()),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}};n.register("circleMaskImage",(function(t,e,i,r,n){var s=new ws(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.CircleMaskImage",ws);class _s{constructor(t,e){this.setParent(t),this.type=e,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return void 0===t&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}}Object.assign(_s.prototype,J);const xs=_s,Es=Phaser.Math.DegToRad,Ss=Phaser.Math.RadToDeg,Ts=Phaser.Utils.Objects.GetValue,As=class extends xs{constructor(t,e){super(t,e),this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return void 0===t&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return Ss(this._rotation)}set angle(t){this.rotation=Es(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return void 0===e&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return void 0===e&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Ts(t,"width",void 0),i=Ts(t,"height",void 0),r=Ts(t,"scaleX",void 0),n=Ts(t,"scaleY",void 0);return void 0!==e?void 0===i&&void 0===n?this.setWidth(e,!0):this.setWidth(e):void 0!==r&&this.setScaleX(r),void 0!==i?void 0===e&&void 0===r?this.setHeight(i,!0):this.setHeight(i):void 0!==n&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var t=this.context;t.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,i=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),i=Math.round(i)),t.translate(e,i),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),t.restore()}},Cs=Phaser.Utils.Objects.GetValue,ks=class extends As{constructor(t,e){super(t,"background"),this.setColor(Cs(e,"color",null),Cs(e,"color2",null),Cs(e,"horizontalGradient",!0)),this.setStroke(Cs(e,"stroke",null),Cs(e,"strokeThickness",2)),this.setCornerRadius(Cs(e,"cornerRadius",0),Cs(e,"cornerIteration",null))}set color(t){t=qt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=qt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,i){return void 0===i&&(i=!0),this.color=t,this.color2=e,this.horizontalGradient=i,this}set stroke(t){t=qt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}drawContent(){re(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}},Rs=Phaser.Utils.Objects.GetValue,Ps=class extends As{constructor(t,e){super(t,"background"),this.setColor(Rs(e,"color",null),Rs(e,"color2",null),Rs(e,"horizontalGradient",!0)),this.setStroke(Rs(e,"stroke",null),Rs(e,"strokeThickness",2))}set color(t){t=qt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=qt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,i){return void 0===i&&(i=!0),this.color=t,this.color2=e,this.horizontalGradient=i,this}set stroke(t){t=qt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}drawContent(){var t,e,i=this.parent.padding,r=i.left,n=i.top,s=this.parent.width-i.left-i.right,o=this.parent.height-i.top-i.bottom,a=this.context;null!=this.color&&(null!=this.color2?((e=this.horizontalGradient?a.createLinearGradient(0,0,s,0):a.createLinearGradient(0,0,0,o)).addColorStop(0,this.color),e.addColorStop(1,this.color2),t=e):t=this.color,a.fillStyle=t,a.fillRect(r,n,s,o));null!=this.stroke&&this.strokeThickness>0&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.strokeRect(r,n,s,o))}},Is=function(t,e,i){return e.hasOwnProperty(t)?e[t]:i[t]},Os=Phaser.Utils.Objects.GetValue;class Ms{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,align:this.align}}set(t){return this.setBold(Os(t,"bold",!1)),this.setItalic(Os(t,"italic",!1)),this.setFontSize(Os(t,"fontSize","16px")),this.setFontFamily(Os(t,"fontFamily","Courier")),this.setColor(Os(t,"color","#fff")),this.setStrokeStyle(Os(t,"stroke",null),Os(t,"strokeThickness",0)),this.setShadow(Os(t,"shadowColor",null),Os(t,"shadowOffsetX",0),Os(t,"shadowOffsetY",0),Os(t,"shadowBlur",0)),this.setOffset(Os(t,"offsetX",0),Os(t,"offsetY",0)),this.setAlign(Os(t,"align",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Is("stroke",t,this),Is("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Is("shadowOffsetX",t,this),Is("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("align")&&this.setAlign(t.align),this}clone(){return new Ms(this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return void 0===t&&(t=!0),this.bold=t,this}setItalic(t){return void 0===t&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return"number"==typeof t&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=qt(t),this}get hasFill(){return null!=this.color}setStrokeStyle(t,e){return this.stroke=qt(t),void 0!==e&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return null!=this.stroke&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=qt(t),this}setShadowOffset(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return void 0===t&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,i,r){return this.setShadowColor(t).setShadowOffset(e,i).setShadowBlur(r),this}setOffsetX(t){return void 0===t&&(t=0),this.offsetX=t,this}setOffsetY(t){return void 0===t&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,i=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=i?this.stroke:"#000",t.lineWidth=i?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){null!=t.shadowColor?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}}const Ds=Ms,Bs=Phaser.Utils.Objects.GetValue;var Ls=function(t,e){return void 0===e?t:t[e]},Ns=function(t,e,i){var r=typeof e;"string"===r?t[e]=i:"number"===r?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Bs(e,"left",0),t.right=Bs(e,"right",0),t.top=Bs(e,"top",0),t.bottom=Bs(e,"bottom",0))};const Us="text",Fs="image",zs="command";var js=function(t){var e=t.type;return e===Us||e===Fs},Vs=function(t){return t.type===Us&&"\n"===t.text};const Gs=class extends As{constructor(t,e,i){super(t,Us),this.style=new Ds(i),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if("\n"===this.text||""===this.text)this.textWidth=0,this.textHeight=0;else{var t,e,i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width,i.hasOwnProperty("actualBoundingBoxAscent")?(t=i.actualBoundingBoxAscent,e=i.actualBoundingBoxDescent):(t=0,e=0),this.textHeight=t+e}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,e=t.hasFill,i=t.hasStroke;if(e||i){var r=this.context;t.syncFont(r).syncStyle(r),i&&(t.syncShadow(r),r.strokeText(this.text,0,0)),e&&(t.syncShadow(r),r.fillText(this.text,0,0))}}draw(){if(!this.visible||""===this.text||"\n"===this.text)return this;super.draw()}},Hs=function(t,e){e&&this.textStyle.modify(e);for(var i=[],r=0,n=t.length;r<n;r++){var s=t.charAt(r),o=this.poolManager.allocate(Us);null===o?o=new Gs(this,s,this.textStyle):o.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),i.push(o)}return this.addChild(i),this},Ys=class extends As{constructor(t,e,i){super(t,Fs),this.setTexture(e,i)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return void 0===e&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,e=this.frameObj,i=this.frameWidth,r=this.frameHeight;t.drawImage(e.source.image,e.cutX,e.cutY,i,r,0,0,i,r)}draw(){if(!this.visible)return this;super.draw()}},Ks=function(t,e,i){var r=this.poolManager.allocate(Fs);return null===r?r=new Ys(this,t,e):r.setParent(this).setActive().setTexture(t,e),r.modifyPorperties(i),this.addChild(r),this},Ws=class extends xs{constructor(t,e,i,r,n){super(t,zs),this.setName(e).setParameter(r).setCallback(i,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){return this.scope?this.callback.call(this.scope,this.param,this.name):this.callback(this.param,this.name)}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},Xs=function(t,e,i,r){var n=this.poolManager.allocate(zs);return null===n?n=new Ws(this,t,e,i,r):n.setParent(this).setActive().setName(t).setCallback(e,r).setParameter(i),this.addChild(n),this},qs=function(t,e,i,r){void 0===r&&(r={word:[],width:0}),r.word.length=0;for(var n=t.length,s=e,o=r.word,a=0;s<n;){var h=t[s];if(h.type!==Us||" "===h.text||"\n"===h.text){s===e&&(o.push(h),a+=h.outerWidth);break}if(o.push(h),a+=h.outerWidth,s++,i)break}return r.width=a,r},$s=function(t,e,i){if(0!==e||0!==i)for(var r=0,n=t.length;r<n;r++){var s=t[r];js(s)&&(s.x+=e,s.y+=i)}},Js=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];if(void 0!==r.align)return r.align}},Zs=Phaser.Utils.Objects.GetValue,Qs=function(t){var e,i=Zs(t,"start",0),r=Zs(t,"padding.top",0),n=Zs(t,"padding.bottom",0),s=Zs(t,"lineHeight",void 0);if(void 0===s)e=Zs(t,"maxLines",0),s=this.fixedHeight>0?(o=this.fixedHeight-this.padding.top-this.padding.bottom-r-n)/e:0;else if(this.fixedHeight>0){if(void 0===(e=Zs(t,"maxLines",void 0))){var o=this.fixedHeight-this.padding.top-this.padding.bottom-r-n;e=Math.floor(o/s)}}else e=Zs(t,"maxLines",0);var a=0===e,h=Zs(t,"wrapWidth",void 0);void 0===h&&(h=this.fixedWidth>0?this.fixedWidth-this.padding.left-this.padding.right:1/0);for(var c=Zs(t,"letterSpacing",0),l=Zs(t,"hAlign",0),u=Zs(t,"vAlign",0),d=Zs(t,"charWrap",!1),f={start:i,isLastPage:!1,padding:{top:r,bottom:n},lineHeight:s,maxLines:e,wrapWidth:h,letterSpacing:c,hAlign:l,vAlign:u,charWrap:d,children:[],lines:[],maxLineWidth:0,linesHeight:0},p=this.children,g=0,y=p.length;g<y;g++)p[g].setActive(!1);h+=c;for(var m,v=this.padding.left,b=v,w=this.padding.top+s+r,_=h,x=i,E=p.length,S=f.children,T=f.lines,A=[],C=0,k=0;x<E;){var R=p[x];if(js(R)){var P=(m=qs(p,x,d,m)).word,I=P.length,O=m.width+I*c;x+=I;var M=Vs(P[0]);if(_<O||M){if(M&&((D=P[0]).setActive().setPosition(b,w),S.push(D),A.push(D)),b=v,w+=s,_=h,T.push({children:A,width:C}),k=Math.max(k,C),C=0,A=[],!a&&T.length===e)break;if(M)continue}for(_-=O,C+=O,g=0,y=P.length;g<y;g++){var D;(D=P[g]).setActive().setPosition(b,w),S.push(D),A.push(D),b+=D.outerWidth+c}}else x++,R.setActive(),S.push(R),A.push(R)}A.length>0&&(T.push({children:A,width:C}),k=Math.max(k,C)),f.start+=S.length,f.isLastPage=f.start===E,f.maxLineWidth=k,f.linesHeight=T.length*s+r+n;var B=this.fixedWidth>0?this.fixedWidth:f.maxLineWidth+this.padding.left+this.padding.right,L=this.fixedHeight>0?this.fixedHeight:f.linesHeight+this.padding.top+this.padding.bottom;return function(t,e,i){var r,n,s=t.hAlign,o=t.vAlign,a=t.linesHeight;switch(o){case 1:case"center":n=(i-a)/2;break;case 2:case"bottom":n=i-a;break;default:n=0}for(var h=t.lines,c=0,l=h.length;c<l;c++){var u=h[c],d=u.width,f=u.children,p=Js(f);switch(void 0===p&&(p=s),p){case 1:case"center":r=(e-d)/2;break;case 2:case"right":r=e-d;break;default:r=0}$s(f,r,n)}}(f,B-this.padding.left-this.padding.right,o=L-this.padding.top-this.padding.bottom-r-n),this.setSize(B,L),f},to=Phaser.Utils.Objects.Merge,eo=Phaser.Utils.Objects.GetValue,io=function(t){var e,i=eo(t,"start",0),r=eo(t,"padding.top",0),n=eo(t,"padding.bottom",0),s=eo(t,"padding.left",0),o=eo(t,"padding.right",0),a=eo(t,"lineWidth",void 0);if(void 0===a)e=eo(t,"maxLines",0),a=this.fixedWidth>0?(h=this.fixedWidth-this.padding.left-this.padding.right-s-o)/e:0;else if(this.fixedWidth>0){if(void 0===(e=eo(t,"maxLines",void 0))){var h=this.fixedWidth-this.padding.left-this.padding.right;e=Math.floor(h/a)}}else e=eo(t,"maxLines",0);var c=0===e,l=eo(t,"fixedChildHeight",void 0);if(void 0===l){var u=eo(t,"charPerLine",void 0);if(void 0!==u){var d=this.fixedHeight-this.padding.top-this.padding.bottom-r-n;l=Math.floor(d/u)}}var f=eo(t,"wrapHeight",void 0);void 0===f&&(f=this.fixedHeight>0?this.fixedHeight-this.padding.top-this.padding.bottom:1/0);for(var p=eo(t,"letterSpacing",0),g=eo(t,"rtl",!0),y={start:i,isLastPage:!1,padding:{top:r,bottom:n,left:s,right:o},lineWidth:a,maxLines:e,fixedChildHeight:l,wrapHeight:f,letterSpacing:p,hAlign:eo(t,"hAlign",g?2:0),vAlign:eo(t,"vAlign",0),rtl:g,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,v=0,b=m.length;v<b;v++)m[v].setActive(!1);f+=p;for(var w=this.padding.left+s,_=this.padding.top+r,x=w,E=_,S=f,T=i,A=m.length,C=y.children,k=y.lines,R=[],P=0,I=0;T<A;){var O=m[T];if(T++,js(O)){var M=(void 0!==l?l:O.height)+p,D=Vs(O);if(S<M||D){if(D&&(O.setActive().setPosition(x,E).setOrigin(.5),C.push(O),R.push(O)),x=w,E=_,S=f,k.push({children:R,height:P}),I=Math.max(I,P),P=0,R=[],!c&&k.length===e)break;if(D)continue}S-=M,P+=M,O.setActive().setPosition(x,E).setOrigin(.5),C.push(O),R.push(O),E+=M}else O.setActive(),C.push(O),R.push(O)}R.length>0&&(k.push({children:R,height:P}),I=Math.max(I,P)),y.start+=C.length,y.isLastPage=y.start===A,y.maxLineHeight=I,y.linesWidth=k.length*a+s+o;var B=this.fixedWidth>0?this.fixedWidth:y.linesWidth+this.padding.left+this.padding.right,L=this.fixedHeight>0?this.fixedHeight:y.maxLineHeight+this.padding.top+this.padding.bottom;return function(t,e,i){var r,n,s=t.hAlign,o=t.vAlign,a=t.rtl,h=t.lines,c=t.lineWidth,l=t.linesWidth;switch(s){case 1:case"center":r=(e-l)/2;break;case 2:case"right":r=e-l;break;default:r=0}a&&(r+=c);for(var u=0,d=h.length;u<d;u++){var f=h[a?d-u-1:u],p=f.children,g=f.height,y=GetChildrenAlign(p);switch(void 0===y&&(y=o),y){case 1:case"center":n=(i-g)/2;break;case 2:case"bottom":n=i-g;break;default:n=0}$s(p,r,n),r+=c}}(y,h=B-this.padding.left-this.padding.right-s-o,d=L-this.padding.top-this.padding.bottom-r-n),this.setSize(B,L),y},ro=Phaser.Utils.Objects.Merge,no=Phaser.Utils.Array.GetAll,so={setFixedSize:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>0&&e>0&&this.fixedWidth===t&&this.fixedHeight===e||(this.dirty=!0),this.fixedWidth=t,this.fixedHeight=e,this},setPadding:function(t,e){var i=this.padding,r=i.left,n=i.right,s=i.top,o=i.bottom;return Ns(i,t,e),this.dirty=this.dirty||r!=i.left||n!=i.right||s!=i.top||o!=i.bottom,this},getPadding:function(t){return Ls(this.padding,t)},modifyTextStyle:function(t){return this.textStyle.modify(t),this},resetTextStyle:function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},removeChild:function(t){return this.poolManager.free(t),RemoveItem(this.children.list,t),this.lastAppendedChildren.length=0,this.dirty=!0,this},removeChildren:function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},clearContent:function(){return this.setText(),this},addChild:function(t){return this.lastAppendedChildren.length=0,Array.isArray(t)?(this.children.push(...t),this.lastAppendedChildren.push(...t)):(this.children.push(t),this.lastAppendedChildren.push(t)),this},setText:function(t,e){return void 0===t&&(t=""),this.removeChildren(),Hs.call(this,t,e),this.dirty=!0,this},appendText:Hs,appendImage:Ks,appendCommand:Xs,setWrapConfig:function(t){return void 0===t&&(t={}),this.wrapConfig=t,this},runWordWrap:function(t){return void 0===t&&(t={}),Qs.call(this,to(t,this.wrapConfig))},runVerticalWrap:function(t){return void 0===t&&(t={}),io.call(this,ro(t,this.wrapConfig))},drawContent:function(){this.clear();var t,e=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(e,i),this.background.active&&this.background.draw();for(var r=0,n=this.children.length;r<n;r++)(t=this.children[r]).active&&t.visible&&t.draw();this.innerBounds.active&&this.innerBounds.draw()},getChildren:function(){return this.children},getLastAppendedChildren:function(){return this.lastAppendedChildren},getActiveChildren:function(){return no(this.children,"active",!0)}},oo=Phaser.Utils.Objects.GetFastValue;var ao={};const ho=Phaser.Utils.Objects.IsPlainObject,co=Phaser.Utils.Objects.GetValue;class lo extends Wt{constructor(t,e,i,r,n,s){ho(e)?(e=co(s=e,"x",0),i=co(s,"y",0),r=co(s,"width",0),n=co(s,"height",0)):ho(r)&&(r=co(s=r,"width",0),n=co(s,"height",0)),super(t,e,i,0===r?1:r,0===n?1:n),this.type="rexDynamicText",this.autoRound=!0,this.padding={};var o=co(s,"style",void 0);this.defaultTextStyle=new Ds(o),this.textStyle=this.defaultTextStyle.clone(),this.background=new ks(this,co(s,"background",void 0)),this.innerBounds=new Ps(this,co(s,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new class{constructor(t){this.pools=oo(t,"pools",ao)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new B),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,i=t.length;e<i;e++)this.free(t[e]);return this}allocate(t){return this.pools&&this.pools.hasOwnProperty(t)?this.pools[t].pop():null}}(s),this.setFixedSize(r,n),this.setPadding(co(s,"padding",0)),this.setWrapConfig(co(s,"wrap",void 0));var a=co(s,"text",void 0);a&&this.setText(a)}updateTexture(){return this.drawContent(),super.updateTexture(),this}}Object.assign(lo.prototype,so);const uo=lo,fo=uo;n.register("dynamicText",(function(t,e,i,r,n){var s=new fo(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.DynamicText",fo);const po={setEventEmitter(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var go=/[|\\{}()[\]^$+*?.]/g,yo=/-/g;const mo=function(t){return t.replace(go,"\\$&").replace(yo,"\\x2d")};var vo=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;const bo=function(t){return"string"!=typeof t||(""===t?t=null:vo.test(t)?t=parseFloat(t):"false"===t?t=!1:"true"===t&&(t=!0)),t},wo=function(t){return t};class _o{constructor(t){this.setEventEmitter(q(t,"eventEmitter",void 0)),this.setTagExpression(q(t,"regex.tag","[a-z0-9-_.]+")),this.setValueExpression(q(t,"regex.value","[ #a-z-_.0-9,|&]+")),this.setValueConverter(q(t,"valueConvert",!0));var e=q(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return!0===t?t=bo:t||(t=wo),this.valueConverter=t,this}setDelimiters(t,e){void 0===e&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=mo(t),e=mo(e);var i=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,r=`${t}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(i,"i"),this.reTagOff=RegExp(r,"i"),this.reSplit=RegExp(`${i}|${r}`,"gi"),this}setSource(t){return this.source=t,this}resetIndex(t){return void 0===t&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var t=this.source,e=t.length;for(0===this.reSplit.lastIndex&&this.onStart();!this.isPaused;){var i=this.reSplit.exec(t);if(!i)return this.progressIndex<e&&this.onContent(t.substring(this.progressIndex,e)),void this.onComplete();var r=i[0],n=this.reSplit.lastIndex-r.length;this.progressIndex<n&&this.onContent(t.substring(this.progressIndex,n)),this.reTagOff.test(r)?this.onTagEnd(r):this.onTagStart(r),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(t){this.emit("content",t),this.lastContent=t}onTagStart(t){var e=t.match(this.reTagOn),i=e[1],r=function(t,e){if(null==t)return[];for(var i=t.split(","),r=0,n=i.length;r<n;r++)i[r]=e(i[r]);return i}(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${i}`,...r),this.skipEventFlag||this.emit("+",i,...r),this.lastTagStart=i}onTagEnd(t){var e=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(_o.prototype,po);const xo=_o,Eo=Phaser.Utils.Objects.GetValue,So=Phaser.Utils.Objects.GetValue,To=Phaser.Utils.Objects.GetValue,Ao=Phaser.Utils.Objects.GetValue,Co=Phaser.Utils.Objects.GetValue,ko=Phaser.Utils.Objects.GetValue,Ro=Phaser.Utils.Objects.GetValue,Po=Phaser.Utils.Objects.GetValue,Io=Phaser.Utils.Objects.GetValue,Oo=Phaser.Utils.Objects.GetValue;var Mo=function(t){this.typeWriter.setSpeed(t)},Do=function(t,e){Xs.call(t,"speed",Mo,e,t)};const Bo=Phaser.Utils.Objects.GetValue;var Lo=function(t){if(!this.skipSoundEffect){var e=t[0],i=t[1];this.soundManager.playSoundEffect(e),i&&this.soundManager.fadeInSoundEffect(i)}};const No=Phaser.Utils.Objects.GetValue;var Uo=function(t){this.soundManager.fadeInSoundEffect(t)};const Fo=Phaser.Utils.Objects.GetValue;var zo=function(t){this.soundManager.fadeOutSoundEffect(...t)};const jo=Phaser.Utils.Objects.GetValue;var Vo=function(t){this.soundManager.setSoundEffectVolume(t)};const Go=Phaser.Utils.Objects.GetValue;var Ho=function(t){var e=t[0],i=t[1];this.soundManager.playBackgroundMusic(e),i&&this.soundManager.fadeInBackgroundMusic(i)},Yo=function(){this.soundManager.stopBackgroundMusic()};const Ko=Phaser.Utils.Objects.GetValue;var Wo=function(t){this.soundManager.fadeInBackgroundMusic(t)};const Xo=Phaser.Utils.Objects.GetValue;var qo=function(t){this.soundManager.fadeOutBackgroundMusic(...t)};const $o=Phaser.Utils.Objects.GetValue;var Jo=function(t){this.soundManager.crossFadeBackgroundMusic(...t)};const Zo=Phaser.Utils.Objects.GetValue;var Qo=function(){this.soundManager.pauseBackgroundMusic()},ta=function(){this.soundManager.resumeBackgroundMusic()};const ea=Phaser.Utils.Objects.GetValue;var ia=function(t){this.camera.fadeIn(...t)};const ra=Phaser.Utils.Objects.GetValue;var na=function(t){this.camera.fadeOut(...t)};const sa=Phaser.Utils.Objects.GetValue;var oa=function(t){this.camera.shake(...t)};const aa=Phaser.Utils.Objects.GetValue;var ha=function(t){this.camera.flash(...t)};const ca=Phaser.Utils.Objects.GetValue;var la=function(t){this.camera.setZoom(t)},ua=function(t){this.camera.zoomTo(...t)};const da=Phaser.Utils.Objects.GetValue,fa=Phaser.Math.DegToRad;var pa=function(t){this.camera.setRotation(t)},ga=function(t){var e=t[0],i=t[1],r=t[2];this.camera.rotateTo(e,!1,i,r)};const ya=Phaser.Utils.Objects.GetValue;var ma=function(t){this.camera.setScroll(...t)},va=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=this.camera,o=s.scrollX,a=s.scrollY;s.setScroll(e,i),e+=s.centerX,i+=s.centerY,s.setScroll(o,a),s.pan(e,i,r,n)};const ba=Phaser.Utils.Objects.GetValue;var wa=function(t){this.typeWriter.wait(t)},_a=function(t,e){Xs.call(t,"wait",wa,e,t)};const xa=Phaser.Utils.Objects.GetValue;var Ea=function(t,e){return 2===t.length&&t[0]===e},Sa=function(t){this.spriteManager.add(...t)},Ta=function(t){this.spriteManager.remove(t)};const Aa=Phaser.Utils.Objects.GetValue;var Ca=function(){this.spriteManager.removeAll()};const ka=Phaser.Utils.Objects.GetValue;var Ra=function(t){this.spriteManager.setTexture(...t)};const Pa=Phaser.Utils.Objects.GetValue;var Ia=function(t,e){return 3===t.length&&t[0]===e&&"play"===t[2]},Oa=function(t){var e=t[0],i=t[1],r=i.shift();this.spriteManager.playAnimation(e,r),i.length>0&&this.spriteManager.chainAnimation(e,i)},Ma=function(t){this.spriteManager.stopAnimation(t)};const Da=Phaser.Utils.Objects.GetValue;var Ba=function(t,e){return 3===t.length&&t[0]===e&&"chain"===t[2]},La=function(t){this.spriteManager.chainAnimation(...t)};const Na=Phaser.Utils.Objects.GetValue;var Ua=function(t){this.spriteManager.pauseAnimation(t)};const Fa=Phaser.Utils.Objects.GetValue;var za=function(t){this.spriteManager.setProperty(...t)};const ja=Phaser.Utils.Objects.GetValue;var Va={to:!0,yoyo:!0},Ga=function(t){this.spriteManager.easeProperty(...t)};var Ha=function(t,e){var i=`tag.${e}`;null==t?this.emit(i):this.emit(i,...t)},Ya=function(t,e,i){Xs.call(t,e,Ha,i,t)};const Ka=Phaser.Utils.Objects.GetValue,Wa=[function(t,e,i){var r,n=Eo(i,"tags.color","color");e.on("start",(function(){r=t.textStyle.color})).on(`+${n}`,(function(i){t.textStyle.setColor(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setColor(r),e.skipEvent()})).on("complete",(function(){t.textStyle.setColor(r)}))},function(t,e,i){var r,n=So(i,"tags.stroke","stroke");e.on("start",(function(){r=t.textStyle.stroke,t.textStyle.setStrokeStyle(null)})).on(`+${n}`,(function(i){void 0===i&&(i=r),t.textStyle.setStrokeStyle(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setStrokeStyle(null),e.skipEvent()})).on("complete",(function(){t.textStyle.setStrokeStyle(r)}))},function(t,e,i){var r=To(i,"tags.b","b");e.on("start",(function(){t.textStyle.setBold(!1)})).on(`+${r}`,(function(){t.textStyle.setBold(!0),e.skipEvent()})).on(`-${r}`,(function(){t.textStyle.setBold(!1),e.skipEvent()}))},function(t,e,i){var r=Ao(i,"tags.i","i");e.on("start",(function(){t.textStyle.setItalic(!1)})).on(`+${r}`,(function(){t.textStyle.setItalic(!0),e.skipEvent()})).on(`-${r}`,(function(){t.textStyle.setItalic(!1),e.skipEvent()}))},function(t,e,i){var r,n=Co(i,"tags.size","size");e.on("start",(function(){r=t.textStyle.fontSize})).on(`+${n}`,(function(i){t.textStyle.setFontSize(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setFontSize(r),e.skipEvent()})).on("complete",(function(){t.textStyle.setFontSize(r)}))},function(t,e,i){var r,n=ko(i,"tags.y","y");e.on("start",(function(){r=t.textStyle.offsetY,t.textStyle.setOffsetY(0)})).on(`+${n}`,(function(i){void 0===i&&(i=r),t.textStyle.setOffsetY(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setOffsetY(0),e.skipEvent()})).on("complete",(function(){t.textStyle.setOffsetY(0)}))},function(t,e,i){var r,n=Ro(i,"tags.shadow","shadow");e.on("start",(function(){r=t.textStyle.shadowColor,t.textStyle.setShadowColor(null)})).on(`+${n}`,(function(i){void 0===i&&(i=r),t.textStyle.setShadowColor(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setShadowColor(null),e.skipEvent()})).on("complete",(function(){t.textStyle.setShadowColor(r)}))},function(t,e,i){var r=Po(i,"tags.align","align");e.on(`+${r}`,(function(i){t.textStyle.setAlign(i),e.skipEvent()})).on(`-${r}`,(function(){t.textStyle.setAlign(),e.skipEvent()})).on("complete",(function(){t.textStyle.setAlign()}))},function(t,e,i){var r=Io(i,"tags.img","img");e.on(`+${r}`,(function(i){var r=t.imageManager.get(i);Ks.call(t,r.key,r.frame,{width:r.width,hieght:r.height,leftSpace:r.left,rightSpace:r.right}),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r,n=Oo(i,"tags.speed","speed");e.on("start",(function(){r=t.typeWriter.speed})).on(`+${n}`,(function(i){Do(t,i),e.skipEvent()})).on(`-${n}`,(function(){Do(t,r),e.skipEvent()})).on("complete",(function(){t.typeWriter.speed=r}))},function(t,e,i){var r=Bo(i,"tags.se","se");e.on(`+${r}`,(function(i,r){Xs.call(t,"se",Lo,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=No(i,"tags.se.fadein","se.fadein");e.on(`+${r}`,(function(i){Xs.call(t,"se.fadein",Uo,i,t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=Fo(i,"tags.se.fadeout","se.fadeout");e.on(`+${r}`,(function(i,r){Xs.call(t,"se.fadeout",zo,[i,r="stop"===r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=jo(i,"tags.se.volume","se.volume");e.on(`+${r}`,(function(i){Xs.call(t,"se.volume",Vo,i,t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=Go(i,"tags.bgm","bgm");e.on(`+${r}`,(function(i,r){Xs.call(t,"bgm",Ho,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){Xs.call(t,"bgm.stop",Yo,void 0,t),e.skipEvent()}))},function(t,e,i){var r=Ko(i,"tags.bgm.fadein","bgm.fadein");e.on(`+${r}`,(function(i){Xs.call(t,"bgm.fadein",Wo,i,t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=Xo(i,"tags.bgm.fadeout","bgm.fadeout");e.on(`+${r}`,(function(i,r){Xs.call(t,"bgm.fadeout",qo,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=$o(i,"tags.bgm.cross","bgm.cross");e.on(`+${r}`,(function(i,r){Xs.call(t,"bgm.cross",Jo,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=Zo(i,"tags.bgm.pause","bgm.pause");e.on(`+${r}`,(function(){Xs.call(t,"bgm.pause",Qo,void 0,t),e.skipEvent()})).on(`-${r}`,(function(){Xs.call(t,"bgm.resume",ta,void 0,t),e.skipEvent()}))},function(t,e,i){var r=ea(i,"tags.camera.fadein","camera.fadein");e.on(`+${r}`,(function(i,r,n,s){Xs.call(t,"camera.fadein",ia,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=ra(i,"tags.camera.fadeout","camera.fadeout");e.on(`+${r}`,(function(i,r,n,s){Xs.call(t,"camera.fadeout",na,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=sa(i,"tags.camera.shake","camera.shake");e.on(`+${r}`,(function(i,r){Xs.call(t,"camera.shake",oa,[i,r],t),e.skipEvent()}))},function(t,e,i){var r=aa(i,"tags.camera.flash","camera.flash");e.on(`+${r}`,(function(i,r,n,s){Xs.call(t,"camera.flash",ha,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=ca(i,"tags.camera.zoom","camera.zoom");e.on(`+${r}`,(function(i){Xs.call(t,"camera.zoom",la,i,t),e.skipEvent()})).on(`+${r}.to`,(function(i,r,n){Xs.call(t,"camera.zoom.to",ua,[i,r,n],t),e.skipEvent()}))},function(t,e,i){var r=da(i,"tags.camera.rotate","camera.rotate");e.on(`+${r}`,(function(i){i=fa(i),Xs.call(t,"camera.rotate",pa,i,t),e.skipEvent()})).on(`+${r}.to`,(function(i,r,n){i=fa(i),Xs.call(t,"camera.rotate.to",ga,[i,r,n],t),e.skipEvent()}))},function(t,e,i){var r=ya(i,"tags.camera.scroll","camera.scroll");e.on(`+${r}`,(function(i,r){Xs.call(t,"camera.scroll",ma,[i,r],t),e.skipEvent()})).on(`+${r}.to`,(function(i,r,n,s){Xs.call(t,"camera.scroll.to",va,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=ba(i,"tags.wait","wait"),n=ba(i,"tags.click","click");e.on(`+${r}`,(function(i){_a(t,i),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()})).on(`+${n}`,(function(){_a(t,"click"),e.skipEvent()})).on(`-${n}`,(function(){e.skipEvent()}))},function(t,e,i){var r=xa(i,"sprite","sprite");r&&e.on("+",(function(i,...n){if(!e.skipEventFlag){var s=i.split(".");if(Ea(s,r)){var o=s[1];Xs.call(t,"sprite.add",Sa,[o,...n],t),e.skipEvent()}}})).on("-",(function(i){if(!e.skipEventFlag){var n=i.split(".");if(Ea(n,r)){var s=n[1];Xs.call(t,"sprite.remove",Ta,s,t),e.skipEvent()}}}))},function(t,e,i){var r=Aa(i,"sprite","sprite");r&&e.on("-",(function(i){e.skipEventFlag||i===r&&(Xs.call(t,"sprite.removeall",Ca,void 0,t),e.skipEvent())}))},function(t,e,i){var r=ka(i,"sprite","sprite");r&&e.on("+",(function(i,n,s){if(!e.skipEventFlag){var o=i.split(".");if(function(t,e){return 3===t.length&&t[0]===e&&"texture"===t[2]}(o,r)){var a=o[1];Xs.call(t,"sprite.texture",Ra,[a,n,s],t),e.skipEvent()}}}))},function(t,e,i){var r=Pa(i,"sprite","sprite");r&&e.on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");if(Ia(s,r)){n=s[1];var o=Array.prototype.slice.call(arguments,1);Xs.call(t,"sprite.play",Oa,[n,o],t),e.skipEvent()}}})).on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");(function(t,e){return 3===t.length&&t[0]===e&&"stop"===t[2]})(s,r)&&(n=s[1],Xs.call(t,"sprite.stop",Ma,n,t),e.skipEvent())}})).on("-",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");Ia(s,r)&&(n=s[1],Xs.call(t,"sprite.stop",Ma,n,t),e.skipEvent())}}))},function(t,e,i){var r=Da(i,"sprite","sprite");r&&e.on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");if(Ba(s,r)){n=s[1];var o=Array.prototype.slice.call(arguments,1);Xs.call(t,"sprite.chain",La,[n,o],t),e.skipEvent()}}}))},function(t,e,i){var r=Na(i,"sprite","sprite");r&&e.on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");(function(t,e){return 3===t.length&&t[0]===e&&"pause"===t[2]})(s,r)&&(n=s[1],Xs.call(t,"sprite.pause",Ua,n,t),e.skipEvent())}}))},function(t,e,i){var r=Fa(i,"sprite","sprite");r&&e.on("+",(function(i,n){if(!e.skipEventFlag){var s,o,a=i.split(".");(function(t,e){return 3===t.length&&t[0]===e})(a,r)&&(s=a[1],o=a[2],Xs.call(t,"sprite.set",za,[s,o,n],t),e.skipEvent())}}))},function(t,e,i){var r=ja(i,"sprite","sprite");r&&e.on("+",(function(i,n,s,o){if(!e.skipEventFlag){var a,h,c,l=i.split(".");(function(t,e){return 4===t.length&&t[0]===e&&Va[t[3]]})(l,r)&&(a=l[1],h=l[2],c="yoyo"===l[3],Xs.call(t,"sprite.ease",Ga,[a,h,n,s,o,c],t),e.skipEvent())}}))},function(t,e,i){e.on("start",(function(){t.emit("parser.start",e)})).on("+",(function(i,...r){if(!e.skipEventFlag){var n=`+${i}`;t.emit(`parser.${n}`,e,...r),Ya(t,n,r)}})).on("-",(function(i){if(!e.skipEventFlag){var r=`-${i}`;t.emit(`parser.${r}`,e),Ya(t,r)}})).on("complete",(function(){t.emit("parser.complete",e)}))},function(t,e,i){var r=Ka(i,"tags.r","r");e.on(`+${r}`,(function(){Hs.call(t,"\n"),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){e.on("content",(function(e){Hs.call(t,e)}))}],Xa=Phaser.Utils.Objects.GetValue,qa=class extends xo{constructor(t,e){void 0===e&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),function(t,e,i){for(var r=0,n=Wa.length;r<n;r++)Wa[r](t,e,i)}(t,this,e),this.setCommentLineStartSymbol(Xa(e,"comment","//"))}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}start(t){return super.start(function(t,e){for(var i=t.commentLineStart,r=e.split("\n"),n=0,s=r.length;n<s;n++){var o=r[n];""===o||(0===o.trim().length||i&&o.startsWith(i))&&(r[n]="")}return r.join("")}(this,t)),this}};var $a=function(t,e){return new Promise((function(i,r){t.once(e,(function(){i()}))}))},Ja=function(t){return $a(t,"complete")};const Za="anim";var Qa=function(t){void 0===t&&(t=0);var e=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",(function(){this.isPageTyping=!1,this.emit("complete")}),this):(this.isPageTyping=!1,this.emit("complete"));break}if(js(i)){var r=this.animationConfig;if(r.duration>0){var n=this.timeline.addTimer({name:Za,target:i,duration:r.duration,yoyo:r.yoyo,onStart:r.onStart,onProgress:r.onProgress,onComplete:r.onComplete});this.skipTypingAnimation&&n.seek(1)}else r.onStart&&r.onStart(i,0);this.textPlayer.emit("typing",i),e+=this.speed+t,t=0;var s=this.index===this.children.length;if(e>0&&!s){this.typingTimer=this.timeline.addTimer({name:"delay",target:this,duration:e,onComplete:function(t,e,i){t.typingTimer=void 0,Qa.call(t,i.remainder)}});break}}else i.type===zs&&i.exec()}this.inTypingProcessLoop=!1};const th=Qa,eh="_remove.wait",ih="_remove.play",rh=[eh,ih],nh=function(t,e,i,r,n){return function(){t.emit(eh,n),e.apply(r,i)}},sh=function(t,e,i,r,n){var s=nh(t,i,r,n,"custom"),o=e?`wait.${e}`:"wait";t.emit(o,s)},oh=function(t,e,i,r,n){var s,o=nh(t,i,r,n,"time");t.once(eh,(function(){s&&(s.remove(),s=void 0)})),s=function(t,e,i,r,n){return t.typeWriter.timeline.delayCall(e,i,r,n)}(t,e,o),t.emit("wait.time",e)},ah=function(t,e,i,r){var n=nh(t,e,i,r,"click"),s=t.clickEE;t.once(eh,(function(){s.off("pointerdown",n,t)})),s.once("pointerdown",n,t),t.emit("wait.click")},hh=function(t,e,i,r,n){var s=nh(t,i,r,n,"music");e&&(t.once(eh,(function(){e.off("complete",s,t)})),e.once("complete",s,t)),t.emit("wait.music",e),e||s()};var ch=function(t){switch(t){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},lh=function(t,e,i,r,n){var s,o,a=nh(t,i,r,n,`camera.${e}`),h=t.camera;switch(e){case"camera.fadein":s=h.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":s=h.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":s=h.flashEffect,o="cameraflashcomplete";break;case"camera.shake":s=h.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":s=h.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":s=h.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":s=h.panEffect,o="camerapancomplete"}s.isRunning?(t.once(eh,(function(e){h.off(o,a,t)})),h.once(o,a,t),t.emit("wait.camera",e)):(t.emit("wait.camera",e),a())};const uh=function(t,e,i,r,n){var s=nh(t,i,r,n,"keydown"),o=`keydown-${e.toUpperCase()}`,a=t.scene.input.keyboard;t.once(eh,(function(){a.off(o,s,t)})),a.once(o,s,t),t.emit("wait.keydown",e)};var dh=function(t){var e=t.split(".");return"sprite"===e[0]&&e.length<=3},fh=function(t,e,i,r,n){var s=nh(t,i,r,n),o=e.split("."),a=t.spriteManager;switch(o.length){case 1:a.isEmpty?(t.emit("wait.sprite"),s()):(t.once(eh,(function(e){a.off("empty",s,t)})),a.once("empty",s,t),t.emit("wait.sprite"));break;case 2:var h=o[1];if(a.has(h)){var c=t.spriteManager.get(h).sprite;t.once(eh,(function(){c.off("destroy",s,t)})),c.once("destroy",s,t),t.emit("wait.sprite",h)}else t.emit("wait.sprite",h),s();break;case 3:h=o[1];var l=o[2],u=t.spriteManager.getTweenTask(h,l);u?(t.once(eh,(function(){u.off("complete",s,t)})),u.once("complete",s,t),t.emit("wait.sprite",h,l)):(t.emit("wait.sprite",h,l),s())}};const ph=Phaser.Input.Keyboard.KeyCodes,gh=function(t,e,i,r,n){for(var s=0,o=(e="string"==typeof e&&e.length>1&&-1!==e.indexOf("|")?e.split("|"):[e]).length;s<o;s++){var a=e[s];if(null==a||"wait"===a)sh(t,void 0,i,r,n);else if("number"!=typeof a&&isNaN(a))if("click"===a)ah(t,i,r,n);else if("se"===a){var h=t.soundManager.getLastSoundEffect();hh(t,h,i,r,n)}else"bgm"===a?(h=t.soundManager.getBackgroundMusic(),hh(t,h,i,r,n)):ph.hasOwnProperty(a.toUpperCase())?uh(t,a,i,r,n):ch(a)?lh(t,a,i,r,n):dh(a)?fh(t,a,i,r,n):sh(t,a,i,r,n);else oh(t,parseFloat(a),i,r,n)}},yh={start:function(t){return this.children=t,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(t),this.typing(),Ja(this)},typing:th,pause:function(){return this.timeline.pause(),this},resume:function(){return this.timeline.resume(),this},pauseTyping:function(){return this.isTypingPaused||(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0)),this},resumeTyping:function(t){return this.isTypingPaused?(void 0===t&&(t=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=t):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(t)),this):this},wait:function(t){return this.ignoreWait||(this.pauseTyping(),gh(this.textPlayer,t,this.resumeTyping,[],this)),this},setTimeScale:function(t){return this.timeline.setTimeScale(t),this},setIgnoreWait:function(t){return void 0===t&&(t=!0),this.ignoreWait=t,this},setSkipTypingAnimation:function(t){if(void 0===t&&(t=!0),this.skipTypingAnimation=t,t)for(var e=this.timeline.getTimers(Za),i=0,r=e.length;i<r;i++)e[i].seek(1);return this},setSkipSoundEffect:function(t){if(void 0===t&&(t=!0),this.skipSoundEffect=t,t){var e=this.textPlayer._soundManager;e&&e.fadeOutAllSoundEffects(100,!0)}return this},skipCurrentTypingDelay:function(){return this.typingTimer&&this.typingTimer.seek(1),this}},mh=Phaser.Scene,vh=function(t){return t instanceof mh},bh=function(t){return null==t||"object"!=typeof t?null:vh(t)?t:t.scene&&vh(t.scene)?t.scene:t.parent&&t.parent.scene&&vh(t.parent.scene)?t.parent.scene:void 0},wh=Phaser.Utils.Objects.GetValue;class _h{constructor(t,e){this.parent=t,this.scene=bh(t),this.isShutdown=!1,this.setEventEmitter(wh(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(_h.prototype,po);const xh=_h,Eh=Phaser.Utils.Objects.GetValue,Sh={no:0,lazy:1,always:2},Th=class extends xh{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Eh(e,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){"string"==typeof t&&(t=Sh[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}},Ah=Phaser.Utils.Objects.GetValue,Ch=class extends Th{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Ah(t,"isRunning",!1),this.timeScale=Ah(t,"timeScale",1),this.now=Ah(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return void 0===t&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}},kh=class extends Ch{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,e){return this.isRunning&&0!==this.timeScale?(this.tick(e),this):this}},Rh=Phaser.Math.Clamp,Ph=Phaser.Utils.Objects.GetValue,Ih=new class extends B{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,i=t.length;e<i;e++)this.free(t[e]);return this}},Oh=class extends kh{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=Ph(e,"pool",Ih)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new class{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,i,r){return this.target=t,this.onStart=e,this.onProgress=i,this.onComplete=r,this}setDuration(t,e){return void 0===e&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t,e,i=1-this.remainder/this.duration;return i=Rh(i,0,1),this.yoyo&&(void 0===e&&(e=.5),(t=i)<=e?t/=e:t=1-(t-e)/(1-e),i=t),i}setProgress(t){t=Rh(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var i=this.remainder<=0;return i&&this.runCallback(this.onComplete),i}}(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,i,r){return this.addTimer({duration:t,onComplete:function(t,n,s){void 0===i&&(i=[]),i.push(s),e.apply(r,i)}})}getTimers(t){for(var e=[],i=[this.addedTimers,this.timers],r=0,n=i.length;r<n;r++)for(var s=i[r],o=0,a=s.length;o<a;o++){var h=s[o];h.name===t&&e.push(h)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var i=[],r=0,n=this.timers.length;r<n;r++){var s=this.timers[r];s.update(this.now,this.delta)?this.timerPool.free(s):i.push(s)}this.timers=i,0===this.timers.length&&0===this.addedTimers.length&&this.complete()}},Mh=Phaser.Utils.Objects.GetValue;class Dh{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.timeline=new Oh(t),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Mh(e,"onTypingStart",Lh)),this.setSpeed(Mh(e,"speed",250)),this.setAnimationConfig(Mh(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(t){return this.speed=t,this}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return void 0===t?t={}:!1===t&&(t={duration:0}),t.hasOwnProperty("duration")||(t.duration=1e3),t.hasOwnProperty("onStart")||(t.onStart=Bh),this.animationConfig=t,this}getNextChild(){var t=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),t}}var Bh=function(t){t.setVisible&&t.setVisible()},Lh=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];r.setVisible&&r.setVisible(!1)}};Object.assign(Dh.prototype,po,yh);const Nh=Dh,Uh=class extends Th{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}},Fh=Phaser.Utils.Objects.GetValue,zh=Phaser.Math.Clamp,jh=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Fh(t,"state",0),this.timeScale=Fh(t,"timeScale",1),this.delay=Fh(t,"delay",0),this.repeat=Fh(t,"repeat",0),this.repeatCounter=Fh(t,"repeatCounter",0),this.duration=Fh(t,"duration",0),this.nowTime=Fh(t,"nowTime",0),this.justRestart=Fh(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return void 0===t&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?2:1,this.repeatCounter=0,this}stop(){return this.state=0,this}update(t,e){0!==this.state&&-1!==this.state&&0!==e&&0!==this.timeScale&&(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?2:1,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=-1)))}get t(){var t;switch(this.state){case 0:case 1:t=0;break;case 2:t=this.nowTime/this.duration;break;case-1:t=1}return zh(t,0,1)}set t(t){(t=zh(t,-1,1))<0?(this.state=1,this.nowTime=-this.delay*t):(this.state=2,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return 0===this.state}get isDelay(){return 1===this.state}get isCountDown(){return 2===this.state}get isRunning(){return 1===this.state||2===this.state}get isDone(){return-1===this.state}get isOddIteration(){return 1==(1&this.repeatCounter)}get isEvenIteration(){return 0==(1&this.repeatCounter)}},Vh=class extends Uh{constructor(t,e){super(t,e),this.timer=new jh}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}},Gh=Phaser.Utils.Objects.GetValue,Hh=Phaser.Utils.Objects.GetAdvancedValue,Yh=Phaser.Tweens.Builders.GetEaseFunction,Kh=class extends Vh{resetFromJSON(t){return this.timer.resetFromJSON(Gh(t,"timer")),this.setEnable(Gh(t,"enable",!0)),this.setTarget(Gh(t,"target",this.parent)),this.setDelay(Hh(t,"delay",0)),this.setDuration(Hh(t,"duration",1e3)),this.setEase(Gh(t,"ease","Linear")),this.setRepeat(Gh(t,"repeat",0)),this}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setTarget(t){return void 0===t&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=Yh(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return void 0===t&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var i=this.target,r=this.timer;return r.update(t,e),r.isDelay||this.updateGameObject(i,r),this.emit("update",i,this),r.isDone&&this.complete(),this}updateGameObject(t,e){}},Wh=Phaser.Utils.Objects.GetValue,Xh=Phaser.Utils.Objects.GetAdvancedValue,qh=Phaser.Math.Linear,$h={stop:1,destroy:2},Jh=class extends Kh{constructor(t,e,i){e.scene=t,e.active=!0,super(e,i),this.volume={},this.resetFromJSON(i)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Wh(t,"mode",0)),this.setEnable(Wh(t,"enable",!0)),this.setVolumeRange(Xh(t,"volume.start",this.parent.volume),Xh(t,"volume.end",0)),this}setMode(t){return"string"==typeof t&&(t=$h[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning||(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start()),this}updateGameObject(t,e){t.volume=qh(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy()}return this}},Zh=function(t,e,i,r,n){void 0===r&&(r=1),void 0===n&&(n=0);var s,o={mode:0,volume:{start:n,end:r},duration:i};return"string"==typeof e&&(e=t.sys.sound.add(e)),e.hasOwnProperty("_fade")?(s=e._fade).stop().resetFromJSON(o):(s=new Jh(t,e,o),e._fade=s),s.start(),e.isPlaying||e.setVolume(n).play(),e},Qh=function(t,e,i,r){void 0===r&&(r=!0);var n,s={mode:r?2:1,volume:{start:e.volume,end:0},duration:i};return e.hasOwnProperty("_fade")?(n=e._fade).stop().resetFromJSON(s):(n=new Jh(t,e,s),e._fade=n),n.start(),e.isPlaying||e.play(),e},tc=Phaser.Utils.Objects.GetValue,ec=Phaser.Utils.Array.Remove,ic=class{constructor(t,e){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(tc(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(tc(e,"bgm.fade",500));var i=tc(e,"bgm.initial",void 0);i&&this.setCurrentBackgroundMusic(i)}destroy(t){if(this.soundEffects.length&&!t)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var e=this.scene.sys.sound.add(t);return this.soundEffects.push(e),e.once("complete",(function(){e.destroy(),this.scene&&ec(this.soundEffects,e)}),this).once("destroy",(function(){this.scene&&ec(this.soundEffects,e)}),this).play(),this}setSoundEffectVolume(t){var e=this.getLastSoundEffect();return e&&e.setVolume(t),this}fadeInSoundEffect(t){var e=this.getLastSoundEffect();return e&&Zh(this.scene,e,t),this}fadeOutSoundEffect(t,e){var i=this.getLastSoundEffect();return i&&Qh(this.scene,i,t,e),this}fadeOutAllSoundEffects(t,e){for(var i=this.soundEffects.length-1;i>=0;i--)Qh(this.scene,this.soundEffects[i],t,e);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",(function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0}),this).once("destroy",(function(){this.backgroundMusic=void 0}),this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t||(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime)),this}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&Zh(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,e){return this.backgroundMusic&&Qh(this.scene,this.backgroundMusic,t,e),this}crossFadeBackgroundMusic(t,e){var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(t).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=i,this}},rc=Phaser.Utils.Objects.GetValue,nc=Phaser.Utils.Array.Remove;class sc{constructor(t,e){this.scene=t,this.setEventEmitter(rc(e,"eventEmitter",void 0)),this.setCreateCallback(rc(e,"createCallback","sprite")),this.setSpriteFadeTime(rc(e,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(t){this.clear(!t),this.createCallback=void 0,this.scene=void 0}setCreateCallback(t){return this.createCallback="sprite"===t?function(t,e,i){return t.add.sprite(0,0,e,i)}:"image"===t?function(t,e,i){return t.add.image(0,0,e,i)}:t,this}setSpriteFadeTime(t){return this.fadeTime=t,this}has(t){return this.sprites.hasOwnProperty(t)}get(t){return this.sprites[t]}getTweenTask(t,e){if(this.has(t)){var i=this.get(t).tweens;if(i.hasOwnProperty(e))return i[e]}return null}get isEmpty(){return function(t){for(var e in t)return!1;return!0}(this.sprites)&&0===this.removedSprites.length}clear(t){for(var e in void 0===t&&(t=!0),this.sprites)t&&this.sprites[e].destroy(),delete this.sprites[e];return this.removedSprites.length=0,this}add(t,e,i){var r;if(this.remove(t),3===arguments.length)r=this.createCallback(this.scene,e,i);else{var n=Array.prototype.slice.call(arguments,1);r=this.createCallback(this.scene,...n)}this.fadeTime>0&&function(t,e){t.hasOwnProperty("tintR")||(void 0===e&&(e=16777215),Object.defineProperty(t,"tint",{get:function(){return t._tintRGB},set:function(e){e=16777215&Math.floor(e),t.setTint(e),t._tintRGB!==e&&(t._tintRGB=e,t._tintR=e>>16&255,t._tintG=e>>8&255,t._tintB=255&e)}}),Object.defineProperty(t,"tintR",{get:function(){return t._tintR},set:function(e){e=255&Math.floor(e),t._tintR!==e&&(t._tintR=e,t._tintRGB=(255&e)<<16|65535&t._tintRGB,t.tint=t._tintRGB)}}),Object.defineProperty(t,"tintG",{get:function(){return t._tintG},set:function(e){e=255&Math.floor(e),t._tintG!==e&&(t._tintG=e,t._tintRGB=(255&e)<<8|16711935&t._tintRGB,t.tint=t._tintRGB)}}),Object.defineProperty(t,"tintB",{get:function(){return t._tintB},set:function(e){e=255&Math.floor(e),t._tintB!==e&&(t._tintB=e,t._tintRGB=255&e|16776960&t._tintRGB,t.tint=t._tintRGB)}}),Object.defineProperty(t,"tintGray",{get:function(){return Math.floor((t._tintR+t._tintG+t._tintB)/3)},set:function(e){e=255&Math.floor(e),t._tintR===e&&t._tintG===e&&t._tintB===e||(t._tintR=e,t._tintG=e,t._tintB=e,t._tintRGB=(t._tintRGB,(255&e)<<16|(255&e)<<8|255&e),t.tint=t._tintRGB)}}),t.tint=e)}(r),r.once("destroy",(function(){nc(this.removedSprites,r),this.isEmpty&&this.emit("empty")}),this);var s=new class{constructor(t,e,i){this.spriteManager=t,this.sprite=e.setName(i),this.tweens={},this.name=i}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var t=this.tweens;for(var e in t)t[e].remove(),delete t[e];return this}setProperty(t,e){return this.sprite[t]=e,this}easeProperty(t,e,i,r,n,s){var o=this.tweens;o.hasOwnProperty(t)&&o[t].remove();var a={targets:this.sprite,duration:i,ease:r,yoyo:n,onComplete:function(){o[t].remove(),delete o[t],s&&s()},onCompleteScope:this};return a[t]=e,o[t]=this.scene.tweens.add(a),this}setTexture(t,e){return this.sprite.setTexture(t,e),this}playAnimation(t){return this.sprite.play(t),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(t){return this.sprite.chain(t),this}pauseAnimation(){return this.sprite.anims.pause(),this}}(this,r,t);return this.sprites[t]=s,this.fadeTime>0&&s.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(t,e,i){return this.has(t)?(this.get(t).setProperty(e,i),this):this}easeProperty(t,e,i,r,n,s,o){return this.has(t)?(void 0===r&&(r=1e3),void 0===n&&(n="Linear"),this.get(t).easeProperty(e,i,r,n,s,o),this):this}remove(t){if(!this.has(t))return this;var e=this.get(t);return delete this.sprites[t],this.removedSprites.push(e.sprite),this.fadeTime>0?e.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,(function(){e.destroy()})):e.destroy(),this}removeAll(){for(var t in this.sprites)this.remove(t);return this}setTexture(t,e,i){return this.has(t)?(this.get(t).setTexture(e,i),this):this}playAnimation(t,e){return this.has(t)||this.add(t),this.get(t).playAnimation(e),this}stopAnimation(t){return this.has(t)?(this.get(t).stopAnimation(),this):this}chainAnimation(t,e){return this.has(t)?(this.get(t).chainAnimation(e),this):this}pauseAnimation(t){return this.has(t)?(this.get(t).pauseAnimation(),this):this}}Object.assign(sc.prototype,po);const oc=sc,ac=Phaser.Utils.Objects.GetValue;var hc=function(){if(!this.isPlaying||this.isPageTyping)return this;var t=ac(this.wrapConfig,"callback",this.runWordWrap);"string"==typeof t&&(t=this[t]);var e=t.call(this,this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var i=function(){this.emit(ih),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(hc,[],this))};this.once(ih,(function(){this.typeWriter.off("complete",i,this)})),this.typeWriter.once("complete",i,this).start(e.children)};const cc={setClickTarget:function(t){return vh(t)?this.clickEE=t.input:this.clickEE=t.setInteractive(),this},setTargetCamera:function(t){return this.camera=t,this},setNextPageInput:function(t){var e=this;this.nextPageInput=t?"function"==typeof t?function(i,r,n){var s=nh(e,i,r,n);t.call(e,s)}:function(i,r,n){gh(e,t,i,r,n)}:null},addImage:function(t,e){return this.imageManager.add(t,e),this},play:function(t){return this.isPlaying||(this.removeChildren(),this.parser.start(t),this.isPlaying=!0,this.once("complete",(function(){this.isPlaying=!1}),this),this.lastWrapResult=void 0,this.typingNextPage()),this},playPromise:function(t){var e=Ja(this);return this.play(t),e},typingNextPage:hc,pause:function(){return this.typeWriter.pause(),this},resume:function(){return this.typeWriter.resume(),this},setTimeScale:function(t){return this.typeWriter.setTimeScale(t),this},setIgnoreWait:function(t){return this.typeWriter.setIgnoreWait(t),this},showPage:function(){if(!this.isPlaying||!this.isPageTyping)return this;var t=this.typeWriter.speed,e=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,r=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",(function(){this.typeWriter.setSpeed(t).setIgnoreWait(e).setSkipTypingAnimation(i).setSkipSoundEffect(r)}),this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this}},lc=Phaser.Utils.Objects.IsPlainObject,uc=Phaser.Utils.Objects.GetValue;class dc extends uo{constructor(t,e,i,r,n,s){lc(e)?s=e:lc(r)&&(s=r),void 0===s&&(s={});var o=s.text;delete s.text,super(t,e,i,r,n,s),this.type="rexTextPlayer",this.parser=new qa(this,uc(s,"parser",void 0)),this.typeWriter=new Nh(this,uc(s,"typing",void 0)),this._imageManager=void 0;var a=uc(s,"images",void 0);a&&this.addImage(a),this._soundManager=void 0;var h=uc(s,"sounds",void 0);h&&(this._soundManager=new ic(this.scene,h)),this.setTargetCamera(uc(s,"camera",this.scene.sys.cameras.main)),this._spriteManager=void 0;var c=uc(s,"sprites",void 0);c&&(this._spriteManager=new oc(this.scene,c)),this.setClickTarget(uc(s,"clickTarget",this)),this.setNextPageInput(uc(s,"nextPageInput",null)),this.isPlaying=!1,o&&this.play(o)}get imageManager(){return void 0===this._imageManager&&(this._imageManager=new ui(this.scene)),this._imageManager}get soundManager(){return void 0===this._soundManager&&(this._soundManager=new ic(this.scene)),this._soundManager}get spriteManager(){return void 0===this._spriteManager&&(this._spriteManager=new oc(this.scene)),this._spriteManager}destroy(t){this.scene&&(function(t){for(var e=0,i=rh.length;e<i;e++)t.emit(rh[e])}(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(t),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(t),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}}Object.assign(dc.prototype,cc);const fc=dc;n.register("textPlayer",(function(t,e,i,r,n){var s=new fc(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.TextPlayer",fc);const pc=function(t,e,i,r,n,s,o,a,h,c,l,u){void 0===c&&(c=0),void 0===l&&(l=2*Math.PI),void 0===u&&(u=!1),e.beginPath(),e.ellipse(i,r,n,s,0,c,l,u),null!=o&&(e.fillStyle=o,e.fill()),null!=a&&(e.strokeStyle=a,e.lineWidth=h,e.stroke())},gc=function(){var t,e,i,r,n=this.radius,s=this.thickness*this.radius,o=this.radius-s/2,a=this.radius-s,h=(this.canvas,this.context);(this.trackColor&&s>0&&(h.save(),pc(0,h,n,n,o,o,void 0,this.trackColor,s),h.restore()),this.barColor&&o>0)&&(1===this.value?(e=!1,i=0,r=2*Math.PI):(e=this.anticlockwise,i=this.startAngle,r=2*Math.PI*(e?1-this.value:this.value)+i),h.save(),pc(0,h,n,n,o,o,void 0,this.barColor,s,i,r,e),h.restore());this.centerColor&&a>0&&(this.centerColor2?((t=this.context.createRadialGradient(n,n,0,n,n,a)).addColorStop(0,this.centerColor),t.addColorStop(1,this.centerColor2)):t=this.centerColor,h.save(),pc(0,h,n,n,a,a,t),h.restore()),this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(h.save(),function(t,e,i,r,n,s,o,a,h,c,l){void 0===h&&null!=a&&(h=2),void 0===c&&(c="start"),void 0===l&&(l="alphabetic"),e.font=s,e.textAlign=c,e.textBaseline=l,e.fillStyle=o,e.strokeStyle=a,e.lineWidth=h,e.lineCap="round",e.lineJoin="round",null!=a&&"none"!==a&&h>0&&e.strokeText(n,i,r),null!=o&&"none"!==o&&e.fillText(n,i,r)}(0,h,n,n,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),h.restore())},yc=Phaser.Utils.Objects.GetValue,mc=Phaser.Math.Linear,vc=class extends Kh{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=yc(t,"key","value");var i=e[this.propertyKey];return this.fromValue=yc(t,"from",i),this.toValue=yc(t,"to",i),this.setEase(yc(t,"ease",this.ease)),this.setDuration(yc(t,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var i=e.t;i=this.easeFn(i),t[this.propertyKey]=mc(this.fromValue,this.toValue,i)}},bc=Phaser.Math.Percent,wc={setEaseValuePropName:function(t){return this.easeValuePropName=t,this},setEaseValueDuration:function(t){return this.easeValueDuration=t,this},setEaseValueFunction:function(t){return this.easeFunction=t,this},stopEaseValue:function(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo:function(t,e,i){return null==t||(void 0!==e&&(t=bc(t,e,i)),void 0===this.easeValueTask&&(this.easeValueTask=new vc(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:t,duration:this.easeValueDuration,ease:this.easeFunction})),this}},_c=Phaser.Utils.Objects.GetValue,xc=Phaser.Utils.Objects.IsPlainObject,Ec=Phaser.Math.Clamp,Sc=Phaser.Math.Linear,Tc=Phaser.Math.Percent,Ac=Phaser.Math.DegToRad(270);class Cc extends Wt{constructor(t,e,i,r,n,s,o){xc(e)&&(e=_c(o=e,"x",0),i=_c(o,"y",0),r=_c(o,"radius",1),n=_c(o,"barColor",void 0),s=_c(o,"value",0));var a=2*r;super(t,e,i,a,a),this.type="rexCircularProgressCanvas",this.eventEmitter=_c(o,"eventEmitter",this),this.setRadius(r),this.setTrackColor(_c(o,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(_c(o,"centerColor",void 0)),this.setThickness(_c(o,"thickness",.2)),this.setStartAngle(_c(o,"startAngle",Ac)),this.setAnticlockwise(_c(o,"anticlockwise",!1)),this.setTextColor(_c(o,"textColor",void 0)),this.setTextStrokeColor(_c(o,"textStrokeColor",void 0),_c(o,"textStrokeThickness",void 0));var h=_c(o,"textFont",void 0);h?this.setTextFont(h):this.setTextFont(_c(o,"textSize","16px"),_c(o,"textFamily","Courier"),_c(o,"textStyle","")),this.setTextFormatCallback(_c(o,"textFormatCallback",void 0),_c(o,"textFormatCallbackScope",void 0));var c=_c(o,"valuechangeCallback",null);if(null!==c){var l=_c(o,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",c,l)}this.setEaseValuePropName("value").setEaseValueDuration(_c(o,"easeValue.duration",0)).setEaseValueFunction(_c(o,"easeValue.ease","Linear")),this.setValue(s)}resize(t,e){return(t=Math.floor(Math.min(t,e)))===this.width||(super.resize(t,t),this.setRadius(t/2)),this}get value(){return this._value}set value(t){t=Ec(t,0,1);var e=this._value,i=e!=t;this.dirty=this.dirty||i,this._value=t,i&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,i){return null==t||(void 0!==e&&(t=Tc(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=Tc(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Sc(t,e,i)),i}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=2*t;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=qt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=qt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return void 0===t&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Ec(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=qt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=qt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=qt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=qt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return void 0===e&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,i){var r;return r=void 0===e?t:i+" "+t+" "+e,this.textFont=r,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),gc.call(this),super.updateTexture(),this}getFormatText(t){return void 0===t&&(t=this.value),this.textFormatCallbackScope?this.textFormatCallback(t):this.textFormatCallback.call(this.textFormatCallbackScope,t)}}Object.assign(Cc.prototype,wc);const kc=Cc;n.register("circularProgressCanvas",(function(t,e,i,r,n,s){var o=new kc(this.scene,t,e,i,r,n,s);return this.scene.add.existing(o),o})),S(window,"RexPlugins.UI.CircularProgressCanvas",kc);const Rc=Phaser.GameObjects.GetCalcMatrix,Pc=Phaser.Renderer.Canvas.SetTransform,Ic={renderWebGL:function(t,e,i,r){e.updateData(),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),s=Rc(e,i,r),o=n.calcMatrix.copyFrom(s.calc),a=e._displayOriginX,h=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e);for(var l=e.geom,u=0,d=l.length;u<d;u++)l[u].webglRender(n,o,c,a,h);t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,r){e.updateData(),i.addToRenderList(e);var n=t.currentContext;if(Pc(t,n,e,i,r)){for(var s=e._displayOriginX,o=e._displayOriginY,a=e.geom,h=0,c=a.length;h<c;h++)a[h].canvasRender(n,s,o);n.restore()}}},Oc=Phaser.GameObjects.Shape,Mc=Phaser.Utils.Array.Remove;class Dc extends Oc{constructor(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=r),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,i),this.setSize(r,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return void 0===t&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,e){return void 0===e&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this._fillColor=t,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==i,this._lineWidth=t,this._strokeColor=e,this._strokeAlpha=i,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,i=t.length;e<i;e++){var r=t[e];r.dirty&&r.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,$(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],Mc(this.geom,e)),this}}Object.assign(Dc.prototype,Ic);const Bc=Dc;class Lc{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,e,i,r,n){}canvasRender(t,e,i){}updateData(){this.dirty=!1}}Object.assign(Lc.prototype,{fillStyle:function(t,e){return void 0===t?this.isFilled=!1:(void 0===e&&(e=1),this.isFilled=!0,this.fillColor=t,this.fillAlpha=e),this},lineStyle:function(t,e,i){return void 0===t||void 0===e?this.isStroked=!1:(void 0===i&&(i=1),this.isStroked=!0,this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i),this}},J);const Nc=Lc,Uc=Phaser.Geom.Polygon.Earcut,Fc=class extends Nc{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Uc(this.pathData),super.updateData(),this}webglRender(t,e,i,r,n){this.isFilled&&Et(t,e,this,i,r,n),this.isStroked&&Tt(t,this,i,r,n)}canvasRender(t,e,i){var r=this.pathData,n=r.length-1,s=r[0]-e,o=r[1]-i;t.beginPath(),t.moveTo(s,o),this.closePath||(n-=2);for(var a=2;a<n;a+=2){var h=r[a]-e,c=r[a+1]-i;t.lineTo(h,c)}this.closePath&&t.closePath(),this.isFilled&&(Ct(t,this),t.fill()),this.isStroked&&(kt(t,this),t.stroke())}},zc=Phaser.Math.DegToRad,jc=class extends Fc{constructor(t,e,i,r,n,s,o,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=360),void 0===o&&(o=!1),void 0===a&&(a=!1),super(),this.setCenterPosition(t,e),this.setRadius(i,r),this.setAngle(n,s,o),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return void 0===e&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,i){return void 0===i&&(i=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=i,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return void 0===t&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),_t(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,i){t.beginPath();var r=this.x-e,n=this.y-i,s=zc(this.startAngle),o=zc(this.endAngle);this.pie&&(t.moveTo(r,n),t.lineTo(r+Math.cos(s)*this.radiusX,n+Math.sin(s)*this.radiusY)),t.ellipse(r,n,this.radiusX,this.radiusY,0,s,o,this.anticlockwise),this.pie&&t.lineTo(r,n),this.isFilled&&(Ct(t,this),t.fill()),this.isStroked&&(kt(t,this),t.stroke())}},Vc=class extends jc{constructor(t,e,i){super(t,e,i,i,0,360)}},Gc=Phaser.Math.Interpolation.QuadraticBezier,Hc=function(t,e,i,r,n,s){for(var o=s.length,a=s[o-2],h=s[o-1],c=1,l=n-1;c<=l;c++){var u=c/l;s.push(Gc(u,a,t,i),Gc(u,h,e,r))}return s},Yc=Phaser.Math.RotateAround,Kc=Phaser.Geom.Polygon,Wc=Phaser.Math.DegToRad,Xc=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,qc=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,$c=Phaser.Utils.Objects.GetValue,Jc=Phaser.Utils.Objects.IsPlainObject,Zc=Phaser.Math.Clamp,Qc=Phaser.Math.Linear,tl=Phaser.Math.Percent,el=Phaser.Math.DegToRad(270),il=Phaser.Math.RadToDeg;class rl extends Bc{constructor(t,e,i,r,n,s,o){Jc(e)&&(e=$c(o=e,"x",0),i=$c(o,"y",0),r=$c(o,"radius",1),n=$c(o,"barColor",void 0),s=$c(o,"value",0));var a=2*r;super(t,e,i,a,a),this.type="rexCircularProgress",this.eventEmitter=$c(o,"eventEmitter",this),this.addShape((new Vc).setName("track")).addShape((new jc).setName("bar")).addShape((new Vc).setName("center")),this.setRadius(r),this.setTrackColor($c(o,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor($c(o,"centerColor",void 0)),this.setThickness($c(o,"thickness",.2)),this.setStartAngle($c(o,"startAngle",el)),this.setAnticlockwise($c(o,"anticlockwise",!1));var h=$c(o,"valuechangeCallback",null);if(null!==h){var c=$c(o,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,c)}this.setEaseValuePropName("value").setEaseValueDuration($c(o,"easeValue.duration",0)).setEaseValueFunction($c(o,"easeValue.ease","Linear")),this.setValue(s)}resize(t,e){return(t=Math.floor(Math.min(t,e)))===this.width||(super.resize(t,t),this.setRadius(t/2)),this}get value(){return this._value}set value(t){t=Zc(t,0,1);var e=this._value,i=e!=t;this.dirty=this.dirty||i,this._value=t,i&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,i){return null==t||(void 0!==e&&(t=tl(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=tl(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Qc(t,e,i)),i}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=2*t;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return void 0===t&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Zc(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,e=this.thickness*this.radius,i=this.radius-e/2,r=this.radius-e,n=this.getShape("track");null!=this.trackColor&&e>0?n.setCenterPosition(t,t).setRadius(i).lineStyle(e,this.trackColor):n.reset();var s,o,a,h=this.getShape("bar");null!=this.barColor&&i>0?(1===this.value?(s=!1,o=0,a=361):(s=this.anticlockwise,o=il(this.startAngle),a=360*(s?1-this.value:this.value)+o),h.setCenterPosition(t,t).setRadius(i).setAngle(o,a,s).lineStyle(e,this.barColor)):h.reset();var c=this.getShape("center");this.centerColor&&r>0?c.setCenterPosition(t,t).setRadius(r).fillStyle(this.centerColor):c.reset()}}Object.assign(rl.prototype,wc);const nl=rl;n.register("circularProgress",(function(t,e,i,r,n,s){var o=new nl(this.scene,t,e,i,r,n,s);return this.scene.add.existing(o),o})),S(window,"RexPlugins.UI.CircularProgress",nl);const sl=function(t){return t.hasOwnProperty("rexSizer")||(t.rexSizer={}),t.rexSizer},ol=Phaser.Geom.Rectangle;Phaser.Scale.Center;var al=new ol;const hl=function(t,e){void 0===e?e=new ol:!0===e&&(e=al);var i,r,n=t.sys.scale,s=n.baseSize,o=n.parentSize,a=n.canvasBounds,h=n.displayScale,c=a.x>=0?0:-a.x*h.x,l=a.y>=0?0:-a.y*h.y;return i=o.width>=a.width?s.width:s.width-(a.width-o.width)*h.x,r=o.height>=a.height?s.height:s.height-(a.height-o.height)*h.y,e.setTo(c,l,i,r),e},cl=Phaser.Display.Align,ll={center:cl.CENTER,left:cl.LEFT_CENTER,right:cl.RIGHT_CENTER,top:cl.TOP_CENTER,bottom:cl.BOTTOM_CENTER,"left-top":cl.TOP_LEFT,"left-center":cl.LEFT_CENTER,"left-bottom":cl.BOTTOM_LEFT,"center-top":cl.TOP_CENTER,"center-center":cl.CENTER,"center-bottom":cl.BOTTOM_CENTER,"right-top":cl.TOP_RIGHT,"right-center":cl.RIGHT_CENTER,"right-bottom":cl.BOTTOM_RIGHT};var ul=new Phaser.GameObjects.Zone({sys:{queueDepthSort:f,events:{once:f}}},0,0,1,1);ul.setOrigin(0);const dl=ul,fl=0,pl=1,gl=2,yl=4,ml=6,vl=8,bl=10,wl=12;var _l=function(t){return void 0!==t.displayWidth?t.displayWidth:t.width},xl=function(t){return void 0!==t.displayHeight?t.displayHeight:t.height};const El=function(t){var e=xl(t);return t.y+e-e*t.originY},Sl=function(t){var e=_l(t);return t.x-e*t.originX+.5*e},Tl=function(t,e){var i=xl(t);return t.y=e-i+i*t.originY,t},Al=function(t,e){var i=_l(t),r=i*t.originX;return t.x=e+r-.5*i,t},Cl=function(t){var e=_l(t);return t.x-e*t.originX},kl=function(t,e){var i=_l(t);return t.x=e+i*t.originX,t},Rl=function(t){var e=_l(t);return t.x+e-e*t.originX},Pl=function(t,e){var i=_l(t);return t.x=e-i+i*t.originX,t},Il=function(t,e){var i=xl(t),r=i*t.originY;return t.y=e+r-.5*i,t},Ol=function(t){var e=xl(t);return t.y-e*t.originY+.5*e},Ml=function(t){var e=xl(t);return t.y-e*t.originY},Dl=function(t,e){var i=xl(t);return t.y=e+i*t.originY,t};var Bl=[];Bl[11]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Al(t,Sl(e)+i),Tl(t,El(e)+r),t},Bl[bl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),kl(t,Cl(e)-i),Tl(t,El(e)+r),t},Bl[wl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Pl(t,Rl(e)+i),Tl(t,El(e)+r),t},Bl[ml]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),function(t,e,i){Al(t,e),Il(t,i)}(t,Sl(e)+i,Ol(e)+r),t},Bl[yl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),kl(t,Cl(e)-i),Il(t,Ol(e)+r),t},Bl[vl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Pl(t,Rl(e)+i),Il(t,Ol(e)+r),t},Bl[pl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Al(t,Sl(e)+i),Dl(t,Ml(e)-r),t},Bl[fl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),kl(t,Cl(e)-i),Dl(t,Ml(e)-r),t},Bl[gl]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Pl(t,Rl(e)+i),Dl(t,Ml(e)-r),t};const Ll=function(t,e,i,r,n){return Bl[i](t,e,r,n)},Nl=function(t,e,i,r,n,s){dl.setPosition(e,i).setSize(r,n),Ll(t,dl,s)},Ul=Phaser.Geom.Rectangle,Fl=Phaser.Geom.Vector2,zl=Phaser.Math.RotateAround;var jl=function(t,e){if(void 0===e?e=new Ul:!0===e&&(void 0===Vl&&(Vl=new Ul),e=Vl),t.getBounds)return t.getBounds(e);var i,r,n,s,o,a,h,c;if(t.parentContainer){var l=t.parentContainer.getBoundsTransformMatrix();Gl(t,e),l.transformPoint(e.x,e.y,e),i=e.x,r=e.y,Hl(t,e),l.transformPoint(e.x,e.y,e),n=e.x,s=e.y,Yl(t,e),l.transformPoint(e.x,e.y,e),o=e.x,a=e.y,Kl(t,e),l.transformPoint(e.x,e.y,e),h=e.x,c=e.y}else Gl(t,e),i=e.x,r=e.y,Hl(t,e),n=e.x,s=e.y,Yl(t,e),o=e.x,a=e.y,Kl(t,e),h=e.x,c=e.y;return e.x=Math.min(i,n,o,h),e.y=Math.min(r,s,a,c),e.width=Math.max(i,n,o,h)-e.x,e.height=Math.max(r,s,a,c)-e.y,e},Vl=void 0,Gl=function(t,e,i){return void 0===e?e=new Fl:!0===e&&(void 0===Wl&&(Wl=new Fl),e=Wl),t.getTopLeft?t.getTopLeft(e):(e.x=t.x-_l(t)*t.originX,e.y=t.y-xl(t)*t.originY,Xl(t,e,i))},Hl=function(t,e,i){return void 0===e?e=new Fl:!0===e&&(void 0===Wl&&(Wl=new Fl),e=Wl),t.getTopRight?t.getTopRight(e):(e.x=t.x-_l(t)*t.originX+_l(t),e.y=t.y-xl(t)*t.originY,Xl(t,e,i))},Yl=function(t,e,i){return void 0===e?e=new Fl:!0===e&&(void 0===Wl&&(Wl=new Fl),e=Wl),t.getBottomLeft?t.getBottomLeft(e):(e.x=t.x-_l(t)*t.originX,e.y=t.y-xl(t)*t.originY+xl(t),Xl(t,e,i))},Kl=function(t,e,i){return void 0===e?e=new Fl:!0===e&&(void 0===Wl&&(Wl=new Fl),e=Wl),t.getBottomRight?t.getBottomRight(e):(e.x=t.x-_l(t)*t.originX+_l(t),e.y=t.y-xl(t)*t.originY+xl(t),Xl(t,e,i))},Wl=void 0,Xl=function(t,e,i){return void 0===i&&(i=!1),0!==t.rotation&&zl(e,t.x,t.y,t.rotation),i&&t.parentContainer&&t.parentContainer.getBoundsTransformMatrix().transformPoint(e.x,e.y,e),e};const ql=Phaser.Utils.Objects.GetValue,$l=Phaser.GameObjects.Group;var Jl=function(t,e,i){return t.add.text(0,0,"")},Zl=void 0;const Ql=Phaser.Utils.Objects.GetValue,tu=function(t,e){return void 0===e&&(e={}),"number"==typeof t?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=Ql(t,"left",0),e.right=Ql(t,"right",0),e.top=Ql(t,"top",0),e.bottom=Ql(t,"bottom",0)),e},eu=ys.prototype.add,iu=function(t){return eu.call(this,t),this.sizerEventsEnable&&(t.emit("sizer.add",t,this),this.emit("add",t,this)),this},ru={addBackground(t,e,i){return void 0===this.backgroundChildren&&(this.backgroundChildren=[]),"string"==typeof e&&(i=e,e=void 0),void 0===e&&(e=0),iu.call(this,t),this.backgroundChildren.push(t),this.getSizerConfig(t).padding=tu(e),void 0!==i&&this.addChildrenMap(i,t),this},isBackground(t){return void 0!==this.backgroundChildren&&-1!==this.backgroundChildren.indexOf(t)}},nu={removeFromParentSizer(){var t=this.getParentSizer();return t&&t.remove(this),this}},su=function(t,e){return void 0===this.childrenMap&&(this.childrenMap={}),this.childrenMap[t]=e,this},ou=/(\S+)\[(\d+)\]/i,au={getInnerPadding(t){return Ls(this.space,t)},setInnerPadding(t,e){return Ns(this.space,t,e),this},getOuterPadding(t){return Ls(this.getSizerConfig(this).padding,t)},setOuterPadding(t,e){return Ns(this.getSizerConfig(this).padding,t,e),this},getChildOuterPadding(t,e){return"string"==typeof t&&(t=this.getElement(t)),Ls(this.getSizerConfig(t).padding,e)},setChildOuterPadding(t,e,i){return"string"==typeof t&&(t=this.getElement(t)),Ns(this.getSizerConfig(t).padding,e,i),this}},hu=function(t){return void 0===t&&(t=Math.max(this.childrenWidth,this.minWidth)),t},cu=function(t){var e=Math.max(this.childrenHeight,this.minHeight);return void 0===t&&(t=e),t},lu={getShownChildren(t){void 0===t&&(t=[]);for(var e,i=this.children,r=0,n=i.length;r<n;r++)(e=i[r]).rexSizer&&e.rexSizer.hidden||t.push(e);return t},getAllShownChildren(t){void 0===t&&(t=[]);for(var e,i=this.children,r=0,n=i.length;r<n;r++)(e=i[r]).rexSizer&&e.rexSizer.hidden||(t.push(e),e.hasOwnProperty("isRexContainerLite")&&t.push(...e.getAllShownChildren()));return t}},uu=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var t,e=this.getChildrenSizers(),i=0,r=e.length;i<r;i++)(t=e[i]).ignoreLayout||t.preLayout()},du=function(t){var e,i;for(var r in this.sizerChildren)!(e=this.sizerChildren[r])||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap||(i=this.getExpandedChildWidth(e,t),e.isRexSizer&&(i=e.resolveWidth(i)),e.runWidthWrap(i));return this},fu=class extends xh{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){var e,i,r,n,s,o,a,h;void 0===t&&(t={}),void 0!==t.x?(e=null,i=t.x):void 0!==t.left?(e=0,i=t.left):void 0!==t.right?(e=1,i=t.right):void 0!==t.centerX&&(e=.5,i=t.centerX),void 0!==t.y?(r=null,n=t.y):void 0!==t.top?(r=0,n=t.top):void 0!==t.bottom?(r=1,n=t.bottom):void 0!==t.centerY&&(r=.5,n=t.centerY),void 0!==i&&(i=i.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),s=parseFloat(i[0])/100,o=""===i[1]?0:parseFloat(i[1])),void 0!==n&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(n[0])/100,h=""===n[1]?0:parseFloat(n[1]));var c,l,u=t.width;void 0!==u&&(u=u.split("%"),c=parseFloat(u[0])/100,l=""===u[1]?0:parseFloat(u[1]));var d,f,p=t.height;void 0!==p&&(p=p.split("%"),d=parseFloat(p[0])/100,f=""===p[1]?0:parseFloat(p[1])),this.setAlign(e,r),this.setPercentage(s,a),this.setOffset(o,h),this.setSizePercentage(c,d),this.setSizePadding(l,f);var g=t.onResizeCallback,y=t.onResizeCallbackScope;void 0!==g&&this.setResizeCallback(g,y);var m=t.onUpdateViewportCallback,v=t.onUpdateViewportCallbackScope;return void 0!==m&&this.setUpdateViewportCallback(m,v),this}boot(){this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()}shutdown(t){this.isShutdown||(this.scene.sys.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,i=this.anchorWidth,r=this.anchorHeight;if((void 0!==i||void 0!==r)&&t){var n=this.parent;void 0===i&&(i=n.width),void 0===r&&(r=n.height),e?t.call(e,i,r,n,this):t(i,r,n,this)}}updatePosition(){var t=this.parent;return null===this.alignX?t.x=this.anchorX:void 0!==this.alignX&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),null===this.alignY?t.y=this.anchorY:void 0!==this.alignY&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(void 0!==this.percentageWidth)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(void 0!==this.percentageHeight)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=hl(this.scene,!this.viewport||this.viewport);var t=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;t&&(e?t.call(e,this.viewport,this.parent,this):t(this.viewport,this.parent,this))}},pu=Phaser.Utils.Objects.GetValue,gu=Phaser.Utils.Objects.GetAdvancedValue,yu=Phaser.Math.Linear,mu={stop:0,destroy:1,yoyo:2},vu=class extends Kh{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(pu(t,"mode",0)),this.setScaleRange(gu(t,"start",void 0),gu(t,"end",0)),this}setMode(t){return"string"==typeof t&&(t=mu[t]),this.mode=t,this}setScaleRange(t,e){return"number"==typeof t?(this.startX=t,this.startY=t):(this.startX=gu(t,"x",this.parent.scaleX),this.startY=gu(t,"y",this.parent.scaleY)),"number"==typeof e?(this.endX=e,this.endY=e):(this.endX=gu(e,"x",void 0),this.endY=gu(e,"y",void 0)),this.hasScaleX=void 0!==this.startX&&void 0!==this.endX,this.hasScaleY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(t,e){var i=e.t;e.isOddIteration&&(i=1-i),i=this.easeFn(i),this.hasScaleX&&(t.scaleX=yu(this.startX,this.endX,i)),this.hasScaleY&&(t.scaleY=yu(this.startY,this.endY,i))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},bu=function(t,e,i,r,n){var s,o;switch(i){case 0:case"x":s={x:0},o={x:t.scaleX};break;case 1:case"y":s={y:0},o={y:t.scaleY};break;default:s=0,o=t.scale}var a={mode:0,start:s,end:o,duration:e,ease:void 0===r?"Cubic":r};return void 0===n?n=new vu(t,a):n.resetFromJSON(a),n.restart(),n},wu=function(t,e,i,r,n,s){n instanceof vu&&(s=n,n=void 0),void 0===n&&(n=!0);var o={};switch(o.mode=n?1:0,i){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0}return o.duration=e,o.ease=void 0===r?"Linear":r,void 0===s?s=new vu(t,o):s.resetFromJSON(o),s.restart(),s},_u=Phaser.Utils.Objects.IsPlainObject;var xu=function(t,e){e.completeEventName=void 0,e.on("complete",(function(){e.completeEventName&&(t.emit(e.completeEventName,t),e.completeEventName=void 0)})),e.on("update",(function(){var e=t.getParentSizer();e&&e.resetChildPositionState(t)}))};const Eu={popUp(t,e,i){if(_u(t)){var r=t;t=r.duration,e=r.orientation,i=r.ease}var n=void 0===this._scale;return this._scale=bu(this,t,e,i,this._scale),n&&xu(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(t,e,i){return this.popUp(t,e,i),Ja(this._scale)},scaleDownDestroy(t,e,i,r){if(_u(t)){var n=t;t=n.duration,e=n.orientation,i=n.ease,r=n.destroy}var s=void 0===this._scale;return this._scale=wu(this,t,e,i,r,this._scale),s&&xu(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(t,e,i,r){return this.scaleDownDestroy(t,e,i,r),Ja(this._scale)},scaleDown(t,e,i){return this.scaleDownDestroy(t,e,i,!1),this},scaleDownPromise(t,e,i){return this.scaleDown(t,e,i),Ja(this._scale)}},Su=Phaser.Utils.Objects.GetValue,Tu=Phaser.Utils.Objects.GetAdvancedValue,Au=Phaser.Math.Linear,Cu={stop:0,destroy:1,yoyo:2},ku=class extends Kh{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Su(t,"mode",0)),this.setAlphaRange(Tu(t,"start",this.parent.alpha),Tu(t,"end",0)),this}setMode(t){return"string"==typeof t&&(t=Cu[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){return this.timer.isRunning||(this.parent.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start()),this}updateGameObject(t,e){var i=e.t;e.isOddIteration&&(i=1-i),t.alpha=Au(this.alphaStart,this.alphaEnd,i)}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},Ru=Phaser.Utils.Objects.IsPlainObject,Pu=function(t,e,i,r){var n,s;Ru(i)?(n=i.start,s=i.end):s=i,void 0===n&&(n=0),void 0===s&&(s=1);var o={mode:0,start:n,end:s,duration:e};return void 0===r?r=new ku(t,o):r.resetFromJSON(o),r.restart(),r},Iu=function(t,e,i,r){i instanceof ku&&(r=i,i=void 0),void 0===i&&(i=!0);var n={mode:i?1:0,end:0,duration:e};return void 0===r?r=new ku(t,n):r.resetFromJSON(n),r.restart(),r},Ou=Phaser.Utils.Objects.IsPlainObject;var Mu=function(t,e){e.completeEventName=void 0,e.on("complete",(function(){e.completeEventName&&(t.emit(e.completeEventName,t),e.completeEventName=void 0)})),e.on("update",(function(){var e=t.getParentSizer();e&&e.resetChildAlphaState(t)}))};const Du={fadeIn(t,e){if(Ou(t)){var i=t;t=i.duration,e=i.alpha}var r=void 0===this._fade;return this._fade=Pu(this,t,e,this._fade),r&&Mu(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(t,e){return this.fadeIn(t,e),Ja(this._fade)},fadeOutDestroy(t,e){if(Ou(t)){var i=t;t=i.duration,e=i.destroy}var r=void 0===this._fade;return this._fade=Iu(this,t,e,this._fade),r&&Mu(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(t,e){return this.fadeOutDestroy(t,e),Ja(this._fade)},fadeOut(t){return this.fadeOutDestroy(t,!1),this},fadeOutPromise(t){return this.fadeOut(t),Ja(this._fade)}},Bu=Phaser.Utils.Objects.GetValue,Lu=Phaser.Utils.Objects.GetAdvancedValue,Nu=Phaser.Math.Linear,Uu={stop:0,destroy:1,yoyo:2},Fu=class extends Kh{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(Bu(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=Lu(t,"x",void 0),i=Lu(t,"y",void 0);this.setTargetPosition(e,i)}else this.setTargetPosition(t);return this}setMode(t){return"string"==typeof t&&(t=Uu[t]),this.mode=t,this}setTargetPosition(t,e){if("number"==typeof t||"number"==typeof e)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var i=t;this.startX=Lu(i,"startX",void 0),this.startY=Lu(i,"startY",void 0),this.endX=Lu(i,"endX",void 0),this.endY=Lu(i,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(t,e){var i=e.t;e.isOddIteration&&(i=1-i),i=this.easeFn(i),this.hasMoveX&&(t.x=Nu(this.startX,this.endX,i)),this.hasMoveY&&(t.y=Nu(this.startY,this.endY,i))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},zu=function(t,e){if("number"==typeof t)return t;var i=t[0],r=parseFloat(t.substr(2));switch(i){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":return e/r}},ju=function(t,e,i,r,n,s,o){s instanceof Fu&&(o=s,s=void 0),void 0===s&&(s=!1);var a={};return a.mode=s?1:0,void 0!==i&&(a.startX=t.x,a.endX=zu(i,t.x)),void 0!==r&&(a.startY=t.y,a.endY=zu(r,t.y)),a.duration=e,a.ease=void 0===n?"Linear":n,void 0===o?o=new Fu(t,a):o.resetFromJSON(a),o.restart(),o},Vu=function(t,e,i,r,n,s,o){s instanceof Fu&&(o=s,s=void 0),void 0===s&&(s=!1);var a={};return a.mode=s?1:0,void 0!==i&&(a.startX=zu(i,t.x),a.endX=t.x),void 0!==r&&(a.startY=zu(r,t.y),a.endY=t.y),a.duration=e,a.ease=void 0===n?"Linear":n,void 0===o?o=new Fu(t,a):o.resetFromJSON(a),o.restart(),o},Gu=Phaser.Utils.Objects.IsPlainObject,Hu=Phaser.Math.Distance.Between;var Yu=function(t,e){e.completeEventName=void 0,e.on("complete",(function(){e.completeEventName&&(t.emit(e.completeEventName,t),e.completeEventName=void 0)})),e.on("update",(function(){var e=t.getParentSizer();e&&e.resetChildPositionState(t)}))};const Ku={moveFrom(t,e,i,r,n){if(Gu(t)){var s=t;e=s.x,i=s.y,t=s.hasOwnProperty("speed")?1e3*Hu(e,i,this.x,this.y)/s.speed:s.duration,r=s.ease}var o=void 0===this._easeMove;return this._easeMove=Vu(this,t,e,i,r,n,this._easeMove),o&&Yu(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(t,e,i,r,n){return this.moveFrom(t,e,i,r,n),Ja(this._easeMove)},moveFromDestroy(t,e,i,r){return this.moveFrom(t,e,i,r,!0),this},moveFromDestroyPromise(t,e,i,r){return this.moveFromDestroy(t,e,i,r),Ja(this._easeMove)},moveTo(t,e,i,r,n){if(Gu(t)){var s=t;e=s.x,i=s.y,t=s.hasOwnProperty("speed")?1e3*Hu(e,i,this.x,this.y)/s.speed:s.duration,r=s.ease}var o=void 0===this._easeMove;return this._easeMove=ju(this,t,e,i,r,n,this._easeMove),o&&Yu(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(t,e,i,r,n){return this.moveTo(t,e,i,r,n),Ja(this._easeMove)},moveToDestroy(t,e,i,r){return this.moveTo(t,e,i,r,!0),this},moveToDestroyPromise(t,e,i,r){return this.moveToDestroy(t,e,i,r,!0),Ja(this._easeMove)}},Wu=Phaser.Utils.Objects.GetValue,Xu={effect:0,behavior:1},qu={constant:0,decay:1},$u=class extends Th{constructor(t,e){super(t,e),this.timer=new jh,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Wu(t,"timer")),this.setEnable(Wu(t,"enable",!0)),this.setMode(Wu(t,"mode",1)),this.isRunning=Wu(t,"isRunning",!1),this.setMagnitudeMode(Wu(t,"magnitudeMode",1)),this.setDuration(Wu(t,"duration",500)),this.setMagnitude(Wu(t,"magnitude",10)),this.ox=Wu(t,"ox",void 0),this.oy=Wu(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),0===this.mode?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(0===this.mode?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setMode(t){return"string"==typeof t&&(t=Xu[t]),this.mode=t,this}setMagnitudeMode(t){return"string"==typeof t&&(t=qu[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,e){if("number"!=typeof t){var i=t;e=Wu(i,"magnitude",void 0),t=Wu(i,"duration",void 0)}return void 0!==e&&this.setMagnitude(e),void 0!==t&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,e){return this.start(t,e),this}update(t,e){if(!this.isRunning||!this.enable)return this;var i=this.parent;if(!i.active)return this;if(this.timer.update(t,e),this.timer.isDone)this.backToOrigin(),this.complete();else{void 0===this.ox&&(this.ox=i.x,this.oy=i.y);var r=this.magnitude;1===this.magnitudeMode&&(r*=1-this.timer.t);var n=Math.random()*Math.PI*2,s=Math.cos(n)*r,o=Math.sin(n)*r;i.setPosition(this.ox+s,this.oy+o)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(void 0===this.ox)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y||(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0),this}},Ju=Phaser.Utils.Objects.IsPlainObject,Zu={shake(t,e,i){if(Ju(t)){var r=t;t=r.duration,e=r.magnitude,i=r.magnitudeMode}return void 0===this._shake&&(this._shake=new $u(this,{mode:0,magnitudeMode:1}),function(t,e){e.on("complete",(function(){t.emit("shake.complete",t)}))}(this,this._shake)),void 0!==t&&this._shake.setDuration(t),void 0!==e&&this._shake.setMagnitude(e),void 0!==i&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(t,e){return this.shake(t,e),Ja(this._shake)}},Qu=Phaser.Utils.Objects.IsPlainObject,td=class extends xh{constructor(t,e){super(t,e),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var e=this.easeTasks[t];return void 0===e&&(e=new vc(this.parent),this.easeTasks[t]=e,e.setTarget(this.parent.data.values).on("complete",(function(){this.complete(t)}),this)),e}easeTo(t,e,i,r){if(Qu(t)){var n=t;t=n.key,e=n.value,i=n.duration,r=n.ease;var s=n.speed;void 0===i&&void 0!==s&&(i=Math.abs(e-this.parent.data.values[t])/s*1e3)}return void 0===i&&(i=1e3),void 0===r&&(r="Linear"),this.getEaseTask(t).restart({key:t,to:e,duration:i,ease:r}),this}easeFrom(t,e,i,r){if(Qu(t)){var n=t;t=n.key,e=n.value,i=n.duration,r=n.ease;var s=n.speed;void 0===i&&void 0!==s&&(i=Math.abs(e-this.parent.data.values[t])/s*1e3)}return void 0===i&&(i=1e3),void 0===r&&(r="Linear"),this.getEaseTask(t).restart({key:t,from:e,duration:i,ease:r}),this}stopEase(t,e){void 0===e&&(e=!0);var i=this.easeTasks[t];return i&&i.stop(e),this}stopAll(t){for(var e in void 0===t&&(t=!0),this.easeTasks)this.stopEase(e,t);return this}},ed={easeDataTo(t,e,i,r){return this._easeData||(this._easeData=new td(this),function(t,e){e.on("complete",(function(e){t.emit(`easedata.${e}.complete`,t),t.emit("easedata.complete",e,t)}))}(this,this._easeData)),this._easeData.easeTo(t,e,i,r),this},easeDataToPromise(t,e,i,r){return this.easeDataTo(t,e,i,r),$a(this._easeData,`complete-${t}`)},stopEaseData(t,e){return this._easeData?(this._easeData.stopEase(t,e),this):this},stopAllEaseData(t){return this._easeData?(this._easeData.stopAll(t),this):this}};var id=function(t){sd(t,!1)},rd=function(t){sd(t,!0)},nd=function(t){return!!t&&!sl(t).hidden},sd=function(t,e){if(t){sl(t).hidden=e;var i=t.rexContainer.parent;i?i.setChildVisible(t,!e):this.setVisible(!e)}};const od={show(t){return void 0===t&&(t=this),id(t),this},hide(t){return void 0===t&&(t=this),rd(t),this},isShow(t){return void 0===t&&(t=this),nd(t)}},ad=function(t,e,i,r,n){return!(!t||!t.getBounds||r&&!r(t,e,i)||!jl(t,!0).contains(e,i)||n&&!n(t,e,i))},hd=function(t,e,i,r){if(e)return ad(t,e.x,e.y,i,r);for(var n=t.scene.input.manager,s=n.pointersTotal,o=n.pointers,a=0;a<s;a++)if(e=o[a],ad(t,e.x,e.y,i,r))return!0;return!1},cd=function(t){return t&&"function"==typeof t};var ld=function(t){return!(t.rexSizer&&t.rexSizer.hidden)};const ud=function(t,e,i,r,n){return ad(t,e,i,function(t){return t?function(e,i,r){return!!ld(e)&&(t(e,i,r),!0)}:ld}(r),n)},dd={getParentSizer(t,e){return this.getParent(t,e)},getTopmostSizer(t){return this.getTopmostParent(t)}},fd=function(t,e,i){!t||void 0===e&&void 0===i||(t.resize?(void 0===e&&(e=t.width),void 0===i&&(i=t.height),t.resize(e,i)):(void 0!==e&&(t.displayWidth=e),void 0!==i&&(t.displayHeight=i)))};var pd={};const gd=function(t){var e,i;this.sizerEventsEnable&&(e=t,void 0===(i=this.getChildPrevState(t))?i={}:!0===i&&(i=pd),i.x=e.x,i.y=e.y,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.width=e.width,i.height=e.height,i.displayWidth=e.displayWidth,i.displayHeight=e.displayHeight,this.layoutedChildren.push(t))},yd=function(t,e,i,r,n,s,o,a){Nl(t,e,i,r,n,s),void 0!==o&&(t.x+=o),void 0!==a&&(t.y+=a),this.resetChildPositionState(t),this.sizerEventsEnable&&t.emit("sizer.postlayout",t,this)},md=Phaser.Display.Align.CENTER,vd=Phaser.Utils.Objects.GetValue,bd={press:0,pointerdown:0,release:1,pointerup:1},wd=class extends xh{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(vd(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(vd(t,"enable",!0)),this.setMode(vd(t,"mode",1)),this.setClickInterval(vd(t,"clickInterval",100)),this.setDragThreshold(vd(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointeroutr",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return"string"==typeof t&&(t=bd[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,i,r){void 0===this.pointer&&(this.pointer=t,0===this.mode&&this.click(t.downTime,t,r))}onRelease(t,e,i,r){this.pointer===t&&(1===this.mode&&this.click(t.upTime,t,r),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,i,r){this.pointer===t&&void 0!==this.dragThreshold&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,i){if(!this.enable)return this;if(void 0===t)return this.emit("click",this,this.parent,e,i),this;this.pointer=void 0;var r=this.lastClickTime;return void 0!==r&&t-r<=this.clickInterval||(this.lastClickTime=t,this.emit("click",this,this.parent,e,i)),this}cancel(){return this.pointer=void 0,this}onOver(t,e,i,r){return this.enable?(this.emit("over",this,this.parent,t,r),this):this}onOut(t,e){return this.enable?(this.emit("out",this,this.parent,t,e),this):this}},_d=wd,xd={onClick(t,e,i){return t?(void 0===this._click&&(this._click=new _d(this,i)),this._click.on("click",t,e),this):this},offClick(t,e){return void 0===this._click||this._click.off("click",t,e),this},enableClick(t){return void 0===this._click||this._click.setEnable(t),this},disableClick(){return void 0===this._click||this._click.setEnable(!1),this}};class Ed{constructor(t){var e=q(t,"states",void 0);e&&this.addStates(e);var i=q(t,"extend",void 0);if(i)for(var r in i)this.hasOwnProperty(r)&&void 0!==this[r]||(this[r]=i[r]);var n=q(t,"eventEmitter",void 0),s=q(t,"EventEmitterClass",void 0);this.setEventEmitter(n,s),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(q(t,"enable",!0)),this.start(q(t,"start",void 0));var e=q(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var e="exit_"+this._prevState,i=this[e];i&&i.call(this),this.emit(e,this)}if(this._stateLock=!1,null!=this._state){var r="enter_"+this._state,n=this[r];n&&n.call(this),this.emit(r,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return null!=t&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(t="string"==typeof e?e:e.call(this)),this.goto(t),this}addState(t,e){"string"!=typeof t&&(t=(e=t).name);var i=e.next;i&&(this["next_"+t]=i);var r=e.exit;r&&(this["exit_"+t]=r);var n=e.enter;return n&&(this["enter_"+t]=n),this}addStates(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;e++)this.addState(t[e]);else for(var r in t)this.addState(r,t[r]);return this}runMethod(t,e,i,r,n,s){var o=this[t+"_"+this.state];if(o){var a=arguments.length;switch(a){case 1:return o.call(this);case 2:return o.call(this,e);case 3:return o.call(this,e,i);case 4:return o.call(this,e,i,r);case 5:return o.call(this,e,i,r,n);case 6:return o.call(this,e,i,r,n,s)}for(var h=new Array(a-1),c=1;c<a;c++)h[c-1]=arguments[c];return o.apply(this,h)}}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}}Object.assign(Ed.prototype,po);const Sd=Ed,Td=class extends Sd{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=void 0!==t,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}},Ad=Phaser.Utils.Objects.GetValue,Cd=class extends xh{constructor(t,e){super(t,e),this._enable=void 0,this.cooldown=new Td,this.parent.setInteractive(Ad(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.setEnable(Ad(t,"enable",!0)),this.setCooldown(Ad(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,e,i){this.enable&&t.isDown&&void 0===this.pointer&&(this.pointer=t,this.isInTouched=!0)}onPointOut(t){this.enable&&this.pointer===t&&(this.pointer=void 0,this.isInTouched=!1)}preupdate(t,e){this.cooldown.update(t,e),this.isInTouched&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}},kd={onTouching(t,e,i){return t?(void 0===this._inTouching&&(this._inTouching=new Cd(this,i)),this._inTouching.on("intouch",t,e),this):this},offTouching(t,e){return void 0===this._click||this._inTouching.off("intouch",t,e),this}},Rd=function(t,e,i){for(var r,n=0,s=t.length;n<s;n++)if(r=t[n],ud(r,e,i))return r.pointToChild(e,i);return null},Pd=function(t,e,i,r,n,s,o){var a;(a=void 0===n?r:Rd(i,r,n))&&t.emit(e,a,s,o)},Id=Phaser.Utils.Objects.GetValue,Od=function(t){var e=Id(t,"click",void 0);if(!1!==e){void 0===e&&(e={}),e.hasOwnProperty("threshold")||(e.threshold=10);var i=this._childrenInteractive;this._click=new wd(this,e),this._click.on("click",(function(t,e,r,n){Pd(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,r.worldX,r.worldY,r,n)}),this)}},Md=Phaser.Utils.Objects.GetValue;var Dd=function(t,e,i,r){var n=this._childrenInteractive,s=Rd(n.targetSizers,t.worldX,t.worldY),o=n.lastOverChild;s&&o&&s===o||(n.lastOverChild=s,Pd(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,o,void 0,t,r),Pd(n.eventEmitter,`${n.eventNamePrefix}over`,n.targetSizers,s,void 0,t,r))},Bd=function(t,e){var i=this._childrenInteractive,r=i.lastOverChild;i.lastOverChild=null,Pd(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,r,void 0,t,e)};const Ld=function(t){!1!==Md(t,"over",void 0)&&this.on("pointermove",Dd,this).on("pointerover",Dd,this).on("pointerout",Bd,this)},Nd=Phaser.Utils.Objects.GetValue,Ud=class extends Th{constructor(t,e){var i=bh(t);i===t&&(t=void 0),super(i,e),this.gameObject=t,t&&t.setInteractive(Nd(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Nd(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(Nd(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){this.enable&&void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=1,void 0===this.gameObject&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}onPointerUp(t){this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=0,this.onDragEnd())}onPointerMove(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=this.pointer===t;!i&&e||(i&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return 1===this.tracerState&&this.onDragEnd(),this.pointer=void 0,this.tracerState=0,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state="IDLE",this}},Fd=Sd,zd=Phaser.Utils.Objects.GetValue,jd=Phaser.Math.Distance.Between,Vd="IDLE",Gd="BEGIN",Hd="RECOGNIZED",Yd=Phaser.Utils.Objects.GetValue,Kd="IDLE",Wd="BEGIN",Xd="RECOGNIZED",qd=Phaser.Utils.Objects.GetValue,$d="IDLE",Jd="BEGIN",Zd="RECOGNIZED",Qd=Phaser.Math.Distance.Between,tf=Phaser.Math.Angle.Between,ef={getDt:function(){return this.scene.sys.game.loop.delta},getVelocity:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Qd(e.x,e.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.x-e.x)/(.001*this.getDt())},getVelocityY:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.y-e.y)/(.001*this.getDt())},getVelocityAngle:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return tf(e.x,e.y,t.x,t.y)}},rf={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var nf={};const sf=Phaser.Utils.Objects.GetValue,of=Phaser.Math.RadToDeg;class af extends Ud{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.validDrag=!1}},RECOGNIZED:{enter:function(){i.start(),i.updateDirectionStates(),i.emit("swipe",i,i.gameObject,i.lastPointer)},exit:function(){i.stop(),i.clearDirectionStates()}}},init:function(){this.state=hf},eventEmitter:!1};this.setRecongizedStateObject(new Fd(r)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(sf(t,"threshold",10)),this.setVelocityThreshold(sf(t,"velocityThreshold",1e3)),this.setDirectionMode(sf(t,"dir","8dir")),this}onDragStart(){this.state=cf}onDragEnd(){this.state=hf}onDrag(){this.state===cf&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=lf))}postUpdate(t,e){this.isRunning&&this.enable&&this.state===lf&&(this.state=hf)}get isSwiped(){return this.state===lf}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return"string"==typeof t&&(t=rf[t]),this.dirMode=t,this}updateDirectionStates(){return function(t,e,i){switch(void 0===i?i={}:!0===i&&(i=nf),i.left=!1,i.right=!1,i.up=!1,i.down=!1,t=(t+360)%360,e){case 0:t<180?i.down=!0:i.up=!0;break;case 1:t>90&&t<=270?i.left=!0:i.right=!0;break;case 2:t>45&&t<=135?i.down=!0:t>135&&t<=225?i.left=!0:t>225&&t<=315?i.up=!0:i.right=!0;break;case 3:t>22.5&&t<=67.5?(i.down=!0,i.right=!0):t>67.5&&t<=112.5?i.down=!0:t>112.5&&t<=157.5?(i.down=!0,i.left=!0):t>157.5&&t<=202.5?i.left=!0:t>202.5&&t<=247.5?(i.left=!0,i.up=!0):t>247.5&&t<=292.5?i.up=!0:t>292.5&&t<=337.5?(i.up=!0,i.right=!0):i.right=!0}}(of(this.getVelocityAngle()),this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(af.prototype,ef);const hf="IDLE",cf="BEGIN",lf="RECOGNIZED",uf=af,df=Phaser.Utils.Objects.GetValue,ff=Phaser.Utils.Array.SpliceOne,pf=Phaser.Math.Distance.Between,gf=Phaser.Math.Angle.Between;class yf{constructor(t,e){var i=t.input.manager.pointersTotal-1;i<2&&t.input.addPointer(2-i),this.scene=t,this.setEventEmitter(df(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(df(t,"enable",!0)),this.bounds=df(t,"bounds",void 0),this.tracerState=vf,this.pointers.length=0,$(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,$(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case vf:this.tracerState=bf,this.onDrag1Start();break;case bf:this.tracerState=wf,this.onDrag2Start()}}onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var e=this.pointers.indexOf(t);if(-1!==e)switch(delete this.movedState[t.id],ff(this.pointers,e),this.tracerState){case bf:this.tracerState=vf,this.onDrag1End();break;case wf:this.tracerState=bf,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=-1!==this.pointers.indexOf(t);if(!i&&e);else if(i&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case bf:this.onDrag1();break;case wf:this.onDrag2()}}}dragCancel(){return this.tracerState===wf&&this.onDrag2End(),this.pointers.length=0,$(this.movedState),this.tracerState=vf,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==wf)return 0;var t=this.pointers[0],e=this.pointers[1];return pf(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==wf)return 0;var t=this.pointers[0],e=this.pointers[1];return gf(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,i=t.prevPosition;mf.x=e.x-i.x,mf.y=e.y-i.y}else mf.x=0,mf.y=0;return mf}get centerX(){if(this.tracerState!==wf)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==wf)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==wf)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==wf)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=_f,this}}Object.assign(yf.prototype,po);var mf={};const vf=0,bf=1,wf=2,_f="IDLE",xf=yf,Ef=Phaser.Utils.Objects.GetValue,Sf="IDLE",Tf="BEGIN",Af="RECOGNIZED",Cf=Phaser.Math.RotateAround,kf=function(t,e,i,r){return Cf(t,e,i,r),t.rotation+=r,t};var Rf={};const Pf=Phaser.Utils.Objects.GetValue,If=Phaser.Math.Angle.WrapDegrees,Of=Phaser.Math.Angle.ShortestBetween,Mf=Phaser.Math.RadToDeg,Df=Phaser.Math.DegToRad;class Bf extends xf{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.prevAngle=void 0,i.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("rotatestart",i)},exit:function(){i.emit("rotateend",i)}}},init:function(){this.state=Nf},eventEmitter:!1};this.setRecongizedStateObject(new Fd(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Pf(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=If(Mf(this.angleBetween)),this.state=Uf,0===this.dragThreshold&&(this.state=Ff)}onDrag2End(){this.state=Nf}onDrag2(){switch(this.state){case Uf:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=If(Mf(this.angleBetween));this.angle=Of(this.prevAngle,t),this.prevAngle=t,this.state=Ff}break;case Ff:t=If(Mf(this.angleBetween)),this.angle=Of(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}get isRotated(){return this.state===Ff}get rotation(){return Df(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var Lf={spinObject:function(t,e){if(!this.isRotation)return this;void 0===e&&(e=this.pointers[0].camera);var i=this.movementCenterX,r=this.movementCenterY;e.getWorldPoint(this.centerX,this.centerY,Rf);var n=Rf.x,s=Rf.y,o=this.rotation;if(Array.isArray(t))for(var a=t,h=0,c=a.length;h<c;h++)(t=a[h]).x+=i,t.y+=r,kf(t,n,s,o);else t.x+=i,t.y+=r,kf(t,n,s,o);return this}};Object.assign(Bf.prototype,Lf);const Nf="IDLE",Uf="BEGIN",Ff="RECOGNIZED",zf=Bf,jf=class extends Ud{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.stop(),i.tapsCount=0,i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.start(),i.tapsCount=0,i.emit("tappingstart",i,i.gameObject,i.lastPointer)}},RECOGNIZED:{enter:function(){i.start(),i.emit("tap",i,i.gameObject,i.lastPointer),i.emit(`${i.tapsCount}tap`,i,i.gameObject,i.lastPointer)}}},init:function(){this.state=Vd},eventEmitter:!1};this.setRecongizedStateObject(new Fd(r))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(zd(t,"time",250)),this.setTapInterval(zd(t,"tapInterval",200)),this.setDragThreshold(zd(t,"threshold",9)),this.setTapOffset(zd(t,"tapOffset",10));var e=zd(t,"taps",void 0);return void 0!==e?this.setTaps(e):(this.setMaxTaps(zd(t,"maxTaps",void 0)),this.setMinTaps(zd(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Vd:this.state=Gd;break;case Gd:var t=this.lastPointer;jd(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=Hd,this.state=Gd);break;case Hd:this.state=Gd}}onDragEnd(){this.state===Gd&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=Hd))}onDrag(){this.state!==Vd&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Vd)}preUpdate(t,e){if(this.isRunning&&this.enable&&this.state===Gd){var i=this.lastPointer;i.isDown?t-i.downTime>this.holdTime&&(this.state=Vd):t-i.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=Hd:this.state=Vd)}}postUpdate(t,e){this.isRunning&&this.enable&&this.state===Hd&&(this.state=Vd)}get isTapped(){return this.state===Hd}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return void 0===e&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}},Vf=Phaser.Utils.Objects.GetValue,Gf=function(t){var e=Vf(t,"tap",void 0);if(!1!==e){var i=this._childrenInteractive;this._tap=new jf(this,e),this._tap.on("tap",(function(t,e,r){Pd(i.eventEmitter,`${i.eventNamePrefix}${t.tapsCount}tap`,i.targetSizers,t.worldX,t.worldY,r)}),this)}},Hf=class extends Ud{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.start()},exit:function(){i.stop()}},RECOGNIZED:{enter:function(){i.emit("pressstart",i,i.gameObject,i.lastPointer)},exit:function(){i.emit("pressend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=Kd},eventEmitter:!1};this.setRecongizedStateObject(new Fd(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Yd(t,"threshold",9)),this.setHoldTime(Yd(t,"time",251)),this}onDragStart(){this.state=Wd,0===this.holdTime&&(this.state=Xd)}onDragEnd(){this.state=Kd}onDrag(){this.state!==Kd&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Kd)}preUpdate(t,e){this.isRunning&&this.enable&&this.state===Wd&&t-this.pointer.downTime>=this.holdTime&&(this.state=Xd)}get isPressed(){return this.state===Xd}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}},Yf=Phaser.Utils.Objects.GetValue,Kf=function(t){var e=Yf(t,"press",void 0);if(!1!==e){var i=this._childrenInteractive;this._press=new Hf(this,e),this._press.on("pressstart",(function(t,e,r){Pd(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,t.worldX,t.worldY,r)}),this).on("pressend",(function(t,e,r){Pd(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,t.worldX,t.worldY,r)}),this)}},Wf=uf,Xf=Phaser.Utils.Objects.GetValue,qf=function(t){var e=Xf(t,"swipe",void 0);if(!1!==e){void 0===e&&(e={}),e.hasOwnProperty("dir")||(e.dir="4dir");var i=this._childrenInteractive;this._swipe=new Wf(this,e),this._swipe.on("swipe",(function(t,e,r){var n=t.left?"left":t.right?"right":t.up?"up":"down";Pd(i.eventEmitter,`${i.eventNamePrefix}swipe${n}`,i.targetSizers,t.worldX,t.worldY,r)}),this)}},$f=Phaser.Utils.Objects.GetValue,Jf=function(t,e){return t.setInteractive(),t._childrenInteractive={targetSizers:$f(e,"targets",[t]),eventEmitter:$f(e,"eventEmitter",t),eventNamePrefix:$f(e,"inputEventPrefix","child.")},Od.call(t,e),Ld.call(t,e),Gf.call(t,e),Kf.call(t,e),qf.call(t,e),t};var Zf={getSizerConfig:sl,getChildPrevState:function(t){var e=sl(t);return e.hasOwnProperty("prevState")||(e.prevState={}),e.prevState},pushIntoBounds:function(t){return void 0===t&&(t=hl(this.scene)),this.left=Math.max(this.left,t.left),this.right=Math.min(this.right,t.right),this.top=Math.max(this.top,t.top),this.bottom=Math.min(this.bottom,t.bottom),this},drawBounds:function(t,e){var i,r,n,s,o=t.scene;if("number"==typeof e)i=e;else{i=ql(e,"color",16777215);var a=ql(e,"name",!1);a&&(r=ql(a,"createTextCallback",Jl),n=ql(a,"createTextCallbackScope",void 0),"string"==typeof(s=ql(a,"align","left-top"))&&(s=ll[s]))}if(r&&!t.children){t.children=new $l(o),t.once("destroy",(function(t,e){t.children.destroy(!e),t.children=void 0}));var h=t.clear.bind(t);t.clear=function(){h(),t.children.clear(!1,!0)}}for(var c,l,u=this.getAllShownChildren([this]),d=0,f=u.length;d<f;d++)((c=u[d]).getBounds||void 0!==c.width&&void 0!==c.height)&&(Zl=jl(c,Zl),null!=i&&t.lineStyle(1,i).strokeRectShape(Zl),c.name&&r&&(l=n?r.call(n,o):r(o))&&(l.setText(c.name),t.children.add(l),Nl(l,Zl.x,Zl.y,Zl.width,Zl.height,s)));return this},resolveWidth:hu,resolveChildrenWidth:function(t){var e,i;for(var r in this.sizerChildren)(e=this.sizerChildren[r])&&e.isRexSizer&&!e.ignoreLayout&&(i=this.getExpandedChildWidth(e,t),i=e.resolveWidth(i),e.resolveChildrenWidth(i))},resolveHeight:cu,getChildWidth:function(t){return t.isRexSizer?Math.max(t.minWidth,t.childrenWidth):void 0!==t.minWidth?t.minWidth:_l(t)},getChildHeight:function(t){return t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):void 0!==t.minHeight?t.minHeight:xl(t)},getExpandedChildWidth:function(t,e){return e},getExpandedChildHeight:function(t,e){return e},getChildrenWidth:function(){return 0},getChildrenHeight:function(){return 0},addChildrenMap:su,addElement:su,getElement:function(t,e){if("string"==typeof t&&(t=t.split(".")),0!==t.length){var i=t.shift(),r=null;if("#"===i.charAt(0))i=i.substring(1),r=this.getByName(i,e);else if(-1===i.indexOf("["))this.childrenMap&&(r=this.childrenMap[i]);else{var n=i.match(ou);if(null!=n&&this.childrenMap){var s=this.childrenMap[n[1]];s&&(r=s[n[2]])}}return 0===t.length?r:r&&r.childrenMap?r.getElement(t):null}},getAllChildrenSizers:function(t){void 0===t&&(t=[]);for(var e=t.length,i=this.getChildrenSizers(t),r=t.length,n=e;n<r;n++)i[n].getAllChildrenSizers(t);return t},getChildrenSizers:function(t){return void 0===t&&(t=[]),t},preLayout:uu,layout:function(){return this.runLayout(),this},runLayout:function(t,e,i){if(this.ignoreLayout)return this;var r=!t;return r&&this.preLayout(),e=this.resolveWidth(e),r&&(this.resolveChildrenWidth(e),this.runWidthWrap(e)),i=this.resolveHeight(i),this.resize(e,i),this.sizerEventsEnable&&void 0===this.layoutedChildren&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},layoutChildren:function(){},runWidthWrap:du,layoutBackgrounds:function(){if(void 0!==this.backgroundChildren)for(var t,e,i,r,n,s,o,a=this.backgroundChildren,h=this.left,c=this.top,l=this.width,u=this.height,d=0,f=a.length;d<f;d++)(e=(t=a[d]).rexSizer).hidden||(i=e.padding,gd.call(this,t),r=h+i.left,n=c+i.top,s=l-i.left-i.right,o=u-i.top-i.bottom,fd(t,s,o),yd.call(this,t,r,n,s,o,md))},postLayout:function(t,e,i){return this._anchor&&this._anchor.updatePosition(),this},setAnchor:function(t){void 0===t&&(t={});var e=t.hasOwnProperty("width"),i=t.hasOwnProperty("height"),r=t.hasOwnProperty("onResizeCallback");return!e&&!i||r||(t.onResizeCallback=function(t,r,n){e&&n.setMinWidth(t),i&&n.setMinHeight(r),n.layout()}),void 0===this._anchor?this._anchor=new fu(this,t):this._anchor.resetFromJSON(t),this},isInTouching:function(t,e){return void 0===e&&(e=this),hd(e,t)},pointToChild:function(t,e,i,r,n){if(cd(i)||(n=i,i=void 0,r=void 0),void 0===n&&(n=this.sizerChildren?this.sizerChildren:this.children),as(n)){for(var s,o=0,a=n.length;o<a;o++)if(s=n[o],ud(s,t,e,i,r))return s}else for(var h in n)if(s=n[h],ud(s,t,e,i,r))return s;return null},setDraggable:function(t,e){var i=typeof t;return"string"===i?t=this.getElement(t):void 0!==t&&"object"==i||(e=t,t=this),void 0===e&&(e=!0),t.input&&t.input.hasOwnProperty("draggable")?t.input.draggable=e:e&&(t.setInteractive(),t.scene.input.setDraggable(t),t.on("drag",(function(e,i,r){var n=this.getTopmostSizer();n.x+=i-t.x,n.y+=r-t.y,n.emit("sizer.drag",e,i,r)}),this).on("dragstart",(function(t,e,i){this.getTopmostSizer().emit("sizer.dragstart",t,e,i)}),this).on("dragend",(function(t,e,i,r){this.getTopmostSizer().emit("sizer.dragend",t,e,i,r)}),this)),this},setChildrenInteractive:function(t){return Jf(this,t),this},broadcastEvent:function(){for(var t=this.getAllChildren([this]),e=0,i=t.length;e<i;e++){var r=t[e];r.emit.apply(r,arguments)}return this}};Object.assign(Zf,au,ru,nu,dd,Eu,Du,Ku,Zu,ed,xd,kd,od,lu);const Qf=Zf,tp=Phaser.Utils.Objects.GetValue;class ep extends ys{constructor(t,e,i,r,n,s){super(t,e,i,2,2),this.isRexSizer=!0,this.setMinSize(r,n),this.setName(tp(s,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var o=tp(s,"anchor",void 0);o&&this.setAnchor(o),this.setInnerPadding(tp(s,"space",0)),this.setDraggable(tp(s,"draggable",!1)),this.setSizerEventsEnable(tp(s,"sizerEvents",!1)),this.setDirty(!0)}destroy(t){if(this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),i=0,r=e.length;i<r;i++)e[i].sizerEventsEnable=!1;super.destroy(t),$(this.backgroundChildren),$(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return null==t&&(t=0),this.minWidth=t,this}setMinHeight(t){return null==t&&(t=0),this.minHeight=t,this}setDirty(t){return void 0===t&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return void 0===t&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-_l(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+_l(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+_l(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-xl(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+xl(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+xl(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(ep.prototype,Qf);const ip=ep,rp=function(t,e){t.width<t.childrenWidth&&console.warn(`Layout width error: Parent=${e.constructor.name}, Child=${t.constructor.name}`),t.height<t.childrenHeight&&console.warn(`Layout height error: Parent=${e.constructor.name}, Child=${t.constructor.name}`)},np=Phaser.Utils.Objects.IsPlainObject,sp=Phaser.Utils.Objects.GetValue,op=Phaser.Display.Align.CENTER,ap=Phaser.Utils.String.UUID,hp={add:function(t,e,i,r,n,s,o,a,h){iu.call(this,t),np(e)&&(e=sp(c=e,"key",void 0),i=sp(c,"align",op),a=sp(c,"offsetX",0),h=sp(c,"offsetY",0),r=sp(c,"padding",0),n=sp(c,"expand",!0),t.isRexSizer||(s=sp(c,"minWidth",t._minWidth),o=sp(c,"minHeight",t._minHeighted)));var c,l=void 0!==e;return l||(e=ap()),"string"==typeof i&&(i=ll[i]),void 0===i&&(i=op),void 0===a&&(a=0),void 0===h&&(h=0),void 0===r&&(r=0),void 0===n&&(n=!0),t.isRexSizer||(void 0===s&&(s=t._minWidth),void 0===o&&(o=t._minHeight)),(c=this.getSizerConfig(t)).align=i,c.alignOffsetX=a,c.alignOffsetY=h,c.padding=tu(r),np(n)?(c.expandWidth=sp(n,"width",!1),c.expandHeight=sp(n,"height",!1)):(c.expandWidth=n,c.expandHeight=n),t.isRexSizer||(c.expandWidth?t.minWidth=void 0===s?_l(t):s:t.minWidth=void 0,c.expandHeight?t.minHeight=void 0===o?xl(t):o:t.minHeight=void 0),this.sizerChildren.hasOwnProperty(e)&&this.sizerChildren[e].destroy(),this.sizerChildren[e]=t,l&&this.addChildrenMap(e,t),this}},cp=Phaser.Utils.Array.Remove,lp=ys.prototype.remove,up=function(t,e){return this.isBackground(t)&&cp(this.backgroundChildren,t),lp.call(this,t,e),!e&&this.sizerEventsEnable&&(t.emit("sizer.remove",t,this),this.emit("remove",t,this)),this},dp=ys.prototype.clear,fp=function(t){this.backgroundChildren&&(this.backgroundChildren.length=0);var e,i=!t&&this.sizerEventsEnable;if(i&&(e=this.getChildren([])),dp.call(this,t),i)for(var r,n=0,s=e.length;n<s;n++)(r=e[n]).emit("sizer.remove",r,this),this.emit("remove",r,this);return this},pp={remove(t,e){var i;if("string"==typeof t){if(i=t,!(t=this.sizerChildren[i]))return this}else{if(this.getParentSizer(t)!==this)return this;i=this.childToKey(t)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),up.call(this,t,e),this},removeAll(t){for(var e in this.sizerChildren)this.remove(e,t);return this},clear(t){for(var e in this.sizerChildren)delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e];return fp.call(this,t),this}};var gp={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var t,e,i,r=0,n=this.sizerChildren;for(var s in n)e=(t=n[s]).rexSizer.padding,i=this.getChildWidth(t)+e.left+e.right,r=Math.max(i,r);return r+this.space.left+this.space.right},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var t,e,i,r=0,n=this.sizerChildren;for(var s in n)i=(t=n[s]).isRexSizer?Math.max(t.minHeight,t.childrenHeight):void 0!==t.minHeight?t.minHeight:xl(t),i+=(e=t.rexSizer.padding).top+e.bottom,r=Math.max(i,r);return r+this.space.top+this.space.bottom},getExpandedChildWidth:function(t,e){var i;void 0===e&&(e=this.width);var r=t.rexSizer;if(r.expandWidth){var n=e-this.space.left-this.space.right,s=r.padding;i=n-s.left-s.right}return i},getExpandedChildHeight:function(t,e){var i;void 0===e&&(e=this.height);var r=t.rexSizer;if(r.expandHeight){var n=e-this.space.top-this.space.bottom,s=r.padding;i=n-s.top-s.bottom}return i},getChildrenSizers:function(t){void 0===t&&(t=[]);var e,i=this.sizerChildren;for(var r in i)(e=i[r]).isRexSizer&&t.push(e);return t},layoutChildren:function(){var t,e,i,r,n,s,o,a,h,c=this.innerLeft,l=this.innerTop,u=this.innerWidth,d=this.innerHeight,f=this.sizerChildren;for(var p in f)(t=f[p]).rexSizer.hidden||(i=(e=t.rexSizer).padding,gd.call(this,t),t.isRexSizer?(t.runLayout(this,this.getExpandedChildWidth(t),this.getExpandedChildHeight(t)),rp(t,this)):(a=void 0,h=void 0,e.expandWidth&&(a=u-i.left-i.right),e.expandHeight&&(h=d-i.top-i.bottom),fd(t,a,h)),r=c+i.left,s=u-i.left-i.right,n=l+i.top,o=d-i.top-i.bottom,yd.call(this,t,r,n,s,o,e.align,e.alignOffsetX,e.alignOffsetY))}};Object.assign(gp,hp,pp);const yp=gp,mp=function(t,e){if(Array.isArray(t))return t.indexOf(e);for(var i in t)if(t[i]===e)return i;return null},vp=Phaser.Utils.Objects.IsPlainObject,bp=Phaser.Utils.Objects.GetValue;class wp extends ip{constructor(t,e,i,r,n,s){vp(e)?(e=bp(s=e,"x",0),i=bp(s,"y",0),r=bp(s,"width",void 0),n=bp(s,"height",void 0)):vp(r)&&(r=bp(s=r,"width",void 0),n=bp(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if("string"!=typeof t)return mp(this.sizerChildren,t);var e=t;return this.sizerChildren.hasOwnPropery(e)?e:null}}Object.assign(wp.prototype,yp);const _p=wp;var xp=Phaser.Math.Distance.Between;const Ep=function(t,e,i){var r=t.width/2;return xp(r,r,e,i)<=r},Sp=Phaser.Math.Angle.Between,Tp=Phaser.Math.Angle.Normalize;var Ap=function(t,e,i){if(this.enable&&t.isDown){var r=this.sizerChildren.knob;if(Ep(r,e,i)){var n=r.width/2,s=r.startAngle,o=Sp(n,n,e,i),a=r.anticlockwise?s-o:o-s,h=Tp(a)/(2*Math.PI);this.stopEaseValue(),0===this.easeValueDuration||Math.abs(this.value-h)<.1?this.value=h:this.easeValueTo(h)}}};const Cp=function(){this.sizerChildren.knob.setInteractive().on("pointerdown",Ap,this).on("pointermove",Ap,this)},kp=Phaser.Math.Angle.Between,Rp=Phaser.Math.Angle.Wrap;var Pp=function(t,e,i){if(this.enable&&!this.panPointer){var r=this.sizerChildren.knob;Ep(r,e,i)&&Mp.call(this,t)}},Ip=function(t,e,i){if(this.enable&&t.isDown){var r=this.sizerChildren.knob;switch(this.panState){case Lp:Ep(r,e,i)&&Mp.call(this,t);break;case Np:Ep(r,e,i)?Bp.call(this):Dp.call(this)}}},Op=function(t,e,i){this.enable&&this.panPointer===t&&Dp.call(this)},Mp=function(t){this.panPointer=t,this.panState=Np},Dp=function(){this.panPointer=void 0,this.panState=Lp},Bp=function(){var t=this.panPointer.prevPosition,e=this.panPointer.position,i=this.sizerChildren.knob,r=kp(i.x,i.y,t.x,t.y),n=kp(i.x,i.y,e.x,e.y),s=i.anticlockwise?r-n:n-r,o=Rp(s)/(2*Math.PI);this.stopEaseValue(),this.value+=o};const Lp=0,Np=1,Up=function(){this.sizerChildren.knob.setInteractive().on("pointerdown",Pp,this).on("pointermove",Ip,this).on("pointerup",Op,this),this.panPointer=void 0,this.panState=Lp};var Fp=function(t){return void 0===t&&(t=this.value),this.textFormatCallbackScope?this.textFormatCallback(t):this.textFormatCallback.call(this.textFormatCallbackScope,t)};const zp={setTextFormatCallback:function(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this},getFormatText:Fp,updateText:function(){var t=this.sizerChildren.text;return t&&(t.setText(Fp.call(this)),t.layout&&t.layout()),this}},jp=Phaser.Utils.Objects.GetValue,Vp=Phaser.Math.Linear,Gp=Phaser.Math.Percent,Hp=Phaser.Math.Snap.To;class Yp extends _p{constructor(t,e){void 0===e&&(e={}),super(t,e),this.type="rexKnob",this.eventEmitter=jp(e,"eventEmitter",this);var i=jp(e,"background",void 0),r=jp(e,"text",void 0);i&&this.addBackground(i),r&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(jp(e,"textFormatCallback",void 0),jp(e,"textFormatCallbackScope",void 0)));var n=new nl(t,e);n.setDepth(jp(e,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),r&&(this.add(r,"text","center",0,!1),t.children.moveBelow(n,r)),this.addChildrenMap("background",i),this.addChildrenMap("knob",n),this.addChildrenMap("text",r);var s=jp(e,"valuechangeCallback",null);if(null!==s){var o=jp(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",s,o)}this.setEnable(jp(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(jp(e,"easeValue.duration",0)).setEaseValueFunction(jp(e,"easeValue.ease","Linear")),this.setGap(jp(e,"gap",void 0)),this.setValue(jp(e,"value",0),jp(e,"min",void 0),jp(e,"max",void 0));var a=jp(e,"input",0);switch("string"==typeof a&&(a=Kp[a]),a){case 0:Up.call(this);break;case 1:Cp.call(this)}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){void 0!==this.gap&&(t=Hp(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var i=this.value;e!==i&&(this.updateText(),this.eventEmitter.emit("valuechange",i,e,this.eventEmitter))}setValue(t,e,i){return null==t||(void 0!==e&&(t=Gp(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=Gp(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Vp(t,e,i)),i}}const Kp={pan:0,drag:0,click:1,none:-1};Object.assign(Yp.prototype,zp,wc);const Wp=Yp;n.register("knob",(function(t){var e=new Wp(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Knob",Wp);const Xp={arc:jc,circle:Vc,curve:class extends Fc{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,i=t.length;e<i;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}},ellipse:class extends jc{constructor(t,e,i,r){super(t,e,i,r,0,360)}},line:class extends Fc{constructor(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),super(),this.setP0(t,e),this.setP1(i,r)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},lines:class extends Fc{constructor(){super(),this.builder=new class{constructor(t){void 0===t&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}startAt(t,e){return function(t,e,i){i.length=0,i.push(t,e)}(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}lineTo(t,e,i){return void 0===i&&(i=!1),i&&(t+=this.lastPointX,e+=this.lastPointY),bt(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}verticalLineTo(t,e){return this.lineTo(t,this.lastPointY,e),this}horizontalLineTo(t,e){return this.lineTo(this.lastPointX,t,e),this}ellipticalArc(t,e,i,r,n,s,o){void 0===o&&(o=!1),_t(t,e,i,r,n,s,o,this.iterations,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this}arc(t,e,i,r,n,s){return this.ellipticalArc(t,e,i,i,r,n,s),this}quadraticBezierTo(t,e,i,r){return Hc(t,e,i,r,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=r,this.lastCX=t,this.lastCY=e,this}smoothQuadraticBezierTo(t,e){var i=2*this.lastPointX-this.lastCX,r=2*this.lastPointY-this.lastCY;return this.quadraticBezierTo(i,r,t,e),this}cubicBezierCurveTo(t,e,i,r,n,s){return Hc(t,e,i,r,n,s,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=s,this.lastCX=i,this.lastCY=r,this}smoothCubicBezierCurveTo(t,e,i,r){var n=2*this.lastPointX-this.lastCX,s=2*this.lastPointY-this.lastCY;return this.cubicBezierCurveTo(n,s,t,e,i,r),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,e,i){if(0===this.pathData.length)return this;!function(t,e,i,r){for(var n={x:0,y:0},s=0,o=r.length-1;s<o;s+=2)n.x=r[s],n.y=r[s+1],Yc(n,t,e,i),r[s]=n.x,r[s+1]=n.y}(t,e,i=Wc(i),this.pathData);var r=this.pathData.length;if(this.lastPointX=this.pathData[r-2],this.lastPointY=this.pathData[r-1],void 0!==this.lastCX){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,t,e,i),this.lastCX=n.x,this.lastCY=n.y}return this}offset(t,e){return function(t,e,i){for(var r=0,n=i.length-1;r<n;r+=2)i[r]+=t,i[r+1]+=e}(t,e,this.pathData),this}toPoints(){return function(t,e){void 0===e&&(e=[]);for(var i=0,r=t.length-1;i<r;i+=2)e.push({x:t[i],y:t[i+1]});return e}(this.pathData)}toPolygon(t){return function(t,e){return void 0===e&&(e=new Kc),e.setTo(t),e}(this.pathData,t)}draw(t,e,i){var r=this.toPoints();return e&&t.fillPoints(r,this.closePath,this.closePath),i&&t.strokePoints(r,this.closePath,this.closePath),this}}(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,i){return this.builder.lineTo(t,e,i),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,i,r,n,s,o){return this.builder.ellipticalArc(t,e,i,r,n,s,o),this.dirty=!0,this}arc(t,e,i,r,n,s){return this.builder.arc(t,e,i,r,n,s),this.dirty=!0,this}quadraticBezierTo(t,e,i,r){return this.builder.quadraticBezierTo(t,e,i,r),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,i,r,n,s){return this.builder.cubicBezierCurveTo(t,e,i,r,n,s),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,i,r){return this.builder.smoothCubicBezierCurveTo(t,e,i,r),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,i){return this.builder.rotateAround(t,e,i),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}},rectangle:class extends Nc{constructor(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=i),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(i,r)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,i=this.y,r=i+this.height;return this.pathData.push(t,i),this.pathData.push(e,i),this.pathData.push(e,r),this.pathData.push(t,r),this.pathData.push(t,i),super.updateData(),this}webglRender(t,e,i,r,n){if(this.isFilled){var s=t.fillTint,o=Xc(this.fillColor,this.fillAlpha*i);s.TL=o,s.TR=o,s.BL=o,s.BR=o,t.batchFillRect(-r+this.x,-n+this.y,this.width,this.height)}this.isStroked&&Tt(t,this,i,r,n)}canvasRender(t,e,i){this.isFilled&&(Ct(t,this),t.fillRect(-e,-i,this.width,this.height)),this.isStroked&&(kt(t,this),t.beginPath(),t.rect(-e,-i,this.width,this.height),t.stroke())}},triangle:class extends Nc{constructor(t,e,i,r,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(i,r),this.setP2(n,s)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,e,i,r,n){if(this.isFilled){var s=qc(this.fillColor,this.fillAlpha*i),o=this.x0-r,a=this.y0-n,h=this.x1-r,c=this.y1-n,l=this.x2-r,u=this.y2-n,d=e.getX(o,a),f=e.getY(o,a),p=e.getX(h,c),g=e.getY(h,c),y=e.getX(l,u),m=e.getY(l,u);t.batchTri(d,f,p,g,y,m,s,s,s)}this.isStroked&&Tt(t,this,i,r,n)}canvasRender(t,e,i){var r=this.x1-e,n=this.y1-i,s=this.x2-e,o=this.y2-i,a=this.x3-e,h=this.y3-i;t.beginPath(),t.moveTo(r,n),t.lineTo(s,o),t.lineTo(a,h),t.closePath(),this.isFilled&&(Ct(t,this),t.fill()),this.isStroked&&(kt(t,this),t.stroke())}}},qp=Phaser.Utils.Objects.GetValue,$p=Phaser.Utils.Objects.IsPlainObject,Jp=function(){for(var t=this.getShapes(),e=0,i=t.length;e<i;e++)t[e].lineStyle().fillStyle()},Zp={createShape(t,e){var i=new(0,Xp[t]);return e&&i.setName(e),i},buildShapes(t){var e=qp(t,"create",void 0);if($p(e)){var i=e;for(var r in i){var n=i[r];switch(typeof n){case"number":for(var s=0;s<n;s++)this.addShape(this.createShape(r));break;case"string":this.addShape(this.createShape(r,n));break;default:for(var o=n,a=(s=0,o.length);s<a;s++)this.addShape(this.createShape(r,o[s]))}}}else if(Array.isArray(e))for(s=0,a=(i=e).length;s<a;s++){var h=i[s];this.addShape(this.createShape(h.type,h.name))}else"function"==typeof e&&e.call(this);this.setUpdateShapesCallback(qp(t,"update"))},setUpdateShapesCallback(t){return void 0===t&&(t=Jp),this.dirty=this.dirty||this.updateCallback!==t,this.updateCallback=t,this},updateShapes(){this.updateCallback.call(this)}},Qp=Phaser.Utils.Objects.GetValue,tg=Phaser.Utils.Objects.IsPlainObject;class eg extends Bc{constructor(t,e,i,r,n,s){tg(e)&&(e=Qp(s=e,"x",0),i=Qp(s,"y",0),r=Qp(s,"width",2),n=Qp(s,"height",2)),super(t,e,i,r,n),this.type=Qp(s,"type","rexCustomShapes"),this.buildShapes(s)}}Object.assign(eg.prototype,Zp);const ig=eg,rg=ig;n.register("customShapes",(function(t,e,i,r,n){var s=new rg(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.CustomShapes",rg);const ng=Phaser.Utils.Objects.GetValue,sg=Phaser.Utils.Objects.IsPlainObject,og=Phaser.Math.Clamp,ag=Phaser.Math.Linear,hg=Phaser.Math.Percent;class cg extends ig{constructor(t,e,i,r,n,s){sg(e)&&(e=ng(s=e,"x",0),i=ng(s,"y",0),r=ng(s,"width",2),n=ng(s,"height",2)),void 0===s&&(s={}),s.type||(s.type="rexCustomProgress"),super(t,e,i,r,n,s),this.eventEmitter=ng(s,"eventEmitter",this);var o=ng(s,"valuechangeCallback",null);if(null!==o){var a=ng(s,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,a)}this.setEaseValuePropName("value").setEaseValueDuration(ng(s,"easeValue.duration",0)).setEaseValueFunction(ng(s,"easeValue.ease","Linear")),this.setValue(ng(s,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=og(t,0,1);var e=this._value,i=e!=t;this.dirty=this.dirty||i,this._value=t,i&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,i){return null==t||(void 0!==e&&(t=hg(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=hg(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=ag(t,e,i)),i}}Object.assign(cg.prototype,wc);const lg=cg;n.register("customProgress",(function(t,e,i,r,n){var s=new lg(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.CustomProgress",lg);const ug={setTransitionStartCallback(t,e){return this.onStartCallback=t,this.onStartCallbackScope=e,this},setTransitionProgressCallback(t,e){return this.onProgressCallback=t,this.onProgressCallbackScope=e,this},setTransitionCompleteCallback(t,e){return this.onCompleteCallback=t,this.onCompleteCallbackScope=e,this}},dg=Phaser.Utils.Objects.IsPlainObject,fg=Phaser.Utils.Objects.GetValue;var pg={out:0,in:1};const gg={setTransitionDirection(t){return"string"==typeof t&&(t=pg[t]),this.dir=t,this},setDuration(t){return this.duration=t,this},setEaseFunction(t){return this.easeFunction=t,this},setNextTexture(t,e){return this.nextImage.setTexture(t,e),this},transit(t,e){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),dg(t)){var i=t;t=fg(i,"key",void 0),e=fg(i,"frame",void 0),this.setDuration(fg(i,"duration",this.duration)).setEaseFunction(fg(i,"ease",this.easeFunction)).setTransitionDirection(fg(i,"dir",this.dir));var r=fg(i,"mask",void 0);r&&this.setMaskGameObject(r),this.setMaskEnable(!0===r);var n=fg(i,"onStart",void 0),s=fg(i,"onProgress",void 0),o=fg(i,"onComplete",void 0);void 0===n&&void 0===s&&void 0===o||this.setTransitionStartCallback(n,fg(i,"onStartScope",void 0)).setTransitionProgressCallback(s,fg(i,"onProgressScope",void 0)).setTransitionCompleteCallback(o,fg(i,"onCompleteScope",void 0))}return this.setNextTexture(t,e),this.start(),this},start(){return void 0===this.easeValueTask&&(this.easeValueTask=new vc(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},yg=function(t,e,i,r,n){if(this.clear().fillStyle(16777215),1===this.shape){var s=Math.min(t,e)/2;this.fillCircle(-t*(r-.5),-e*(n-.5),s+i)}else this.fillRect(-t*r-i,-e*n-i,t+2*i,e+2*i)},mg=Phaser.GameObjects.Graphics,vg={rectangle:0,circle:1},bg=class extends mg{constructor(t,e,i){void 0===e&&(e=0),"string"==typeof e&&(e=vg[e]),void 0===i&&(i=0),super(t.scene),this.parent=t,this.shape=e,this.padding=i,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var i=this.parent;return void 0===t&&(t=i.x),void 0===e&&(e=i.y),super.setPosition(t,e),this}resize(t,e,i){var r=this.parent;return void 0===t&&(t=r.width),void 0===e&&(e=r.height),void 0===i&&(i=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===i||(this.widthSave=t,this.heightSave=e,this.paddingSave=i,this.originXSave=r.originX,this.originYSave=r.originY,yg.call(this,t,e,i,r.originX,r.originY)),this}setOrigin(t,e){void 0===e&&(e=t);var i=this.parent;return void 0===t&&(t=i.originX),void 0===e&&(e=i.originY),this.originXSave===t&&this.originYSave===e||(this.originXSave=t,this.originYSave=e,yg.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e)),this}},wg={setMaskGameObject(t){if(!t)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(!0===t&&this.maskGameObject instanceof bg)return this;if(this.maskGameObject===t)return this;this.removeMaskGameObject()}return!0===t&&(t=new bg(this)),this.maskGameObject=t,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(t,e,i){return void 0===e&&(e=!0),this.childrenMask||this.setMaskGameObject(!0),e?(t.setMask(this.childrenMask),i&&this.childrenMask.setInvertAlpha()):t.clearMask(),this},setCurrentImageMaskEnable(t,e){return this.setImageMaskEnable(this.currentImage,t,e),this},setNextImageMaskEnable(t,e){return this.setImageMaskEnable(this.nextImage,t,e),this},setCellImagesMaskEnable(t,e){for(var i=this.getCellImages(),r=0,n=i.length;r<n;r++)this.setImageMaskEnable(i[r],t,e);return this},setMaskEnable(t,e){return this.setImageMaskEnable(this.backImage,t,e),this.setImageMaskEnable(this.frontImage,t,e),this.setCellImagesMaskEnable(t,e),this}},_g=Phaser.Utils.Objects.GetValue,xg=Phaser.GameObjects.Image,Eg=Phaser.Utils.Objects.IsPlainObject,Sg=Phaser.Math.RotateAround,Tg=function(t,e,i,r){Eg(e)&&(e=_g(r=e,"columns",1),i=_g(r,"rows",1));for(var n=_g(r,"ImageClass",xg),s=_g(r,"originX",.5),o=_g(r,"originY",.5),a=_g(r,"add",!0),h=_g(r,"align",a),c=_g(r,"objectPool",void 0),l=t.scene,u=t.texture.key,d=function(t,e,i,r,n,s){var o,a;null==i&&(i="__BASE"),cd(s)||(void 0===(a=s)&&(a=","),s="__BASE"===(o=i)?function(t,e){return`${t}${a}${e}`}:function(t,e){return`${o}_${t}${a}${e}`});for(var h,c=t.sys.textures.get(e),l=c.frames[i],u=l.width/r,d=l.height/n,f=0,p=0,g=0;g<n;g++){f=0;for(var y=0;y<r;y++)h=s(y,g),c.add(h,0,f+l.cutX,p+l.cutY,u,d),f+=u;p+=d}return{getFrameNameCallback:s,cellWidth:u,cellHeight:d,columns:r,rows:n}}(l,u,t.frame.name,e,i),f=d.getFrameNameCallback,p=t.scaleX,g=t.scaleY,y=t.rotation,m=t.getTopLeft(),v=m.x,b=m.y,w=[],_=d.cellWidth*p,x=d.cellHeight*g,E=0;E<i;E++)for(var S=0;S<e;S++){var T,A=f(S,E);T=c&&c.length>0?c.pop().setTexture(u,A):new n(l,0,0,u,A),a&&l.add.existing(T);var C=v+_*S+s*_,k=b+x*E+o*x;h&&(T.setOrigin(s,o).setPosition(C,k).setScale(p,g).setRotation(y),Sg(T,v,b,y)),w.push(T)}return w},Ag={gridCutImage(t,e,i,r){void 0===r&&(r={}),r.objectPool=this.imagesPool;for(var n,s=Tg(t,e,i,r),o=0,a=s.length;o<a;o++)(n=s[o]).setVisible(!0),this.add(n);return this.cellImages=s,this.setChildLocalVisible(t,!1),s},gridCutCurrentImage(t,e,i){return this.gridCutImage(this.currentImage,t,e,i)},gridCutNextImage(t,e,i){return this.gridCutImage(this.nextImage,t,e,i)},getCellImages(){return this.cellImages},freeCellImages(){if(0===this.cellImages.length)return this;for(var t,e,i=this.cellImages[0].texture,r=this.cellImages,n=0,s=r.length;n<s;n++)t=r[n],this.setChildLocalAlpha(t,1).setChildLocalScale(t,1).setChildLocalVisible(t,!1),t.clearMask(),e=t.frame.name,t.setTexture(),i.remove(e);return this.imagesPool.push(...r),r.length=0,this}};var Cg={};Object.assign(Cg,ug,gg,wg,Ag);const kg=Cg;var Rg=function(t,e,i,r){},Pg=function(t,e,i,r){t.setChildLocalAlpha(e,1-r).setChildLocalAlpha(i,r)},Ig=function(t,e,i,r){t.setChildLocalAlpha(e,1)};const Og=Phaser.Utils.Objects.IsPlainObject,Mg=Phaser.Utils.Objects.GetValue,Dg=Phaser.Math.Clamp;class Bg extends gs{constructor(t,e,i,r,n,s){Og(e)?(e=Mg(s=e,"x",0),i=Mg(s,"y",0),r=Mg(s,"key",void 0),n=Mg(s,"frame",void 0)):Og(n)&&(s=n,n=void 0);var o=Mg(s,"back",void 0),a=Mg(s,"front",void 0);o||(o=t.add.image(e,i,r,n)),a||(a=t.add.image(e,i,r,n)),super(t,e,i,Mg(s,"width",a.width),Mg(s,"height",a.height)),o.setVisible(!1),this.addMultiple([o,a]),this.type="rexTransitionImage",this.backImage=o,this.frontImage=a,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var h=Mg(s,"onStart",void 0),c=Mg(s,"onProgress",void 0),l=Mg(s,"onComplete",void 0),u=Mg(s,"dir",0);void 0===h&&void 0===c&&void 0===l&&(h=Rg,c=Pg,l=Ig,u=0),this.setTransitionStartCallback(h,Mg(s,"onStartScope",void 0)).setTransitionProgressCallback(c,Mg(s,"onProgressScope",void 0)).setTransitionCompleteCallback(l,Mg(s,"onCompleteScope",void 0)).setTransitionDirection(u).setDuration(Mg(s,"duration",1e3)).setEaseFunction(Mg(s,"ease","Linear"));var d=Mg(s,"mask",void 0);d&&this.setMaskGameObject(d),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){this.scene&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return 0===this.dir?this.frontImage:this.backImage}get nextImage(){return 0===this.dir?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(t){if(t=Dg(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,i=this.nextImage;if(0===t&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Lg(this.onStartCallback,this.onStartCallbackScope,this,e,i,t)),Lg(this.onProgressCallback,this.onProgressCallbackScope,this,e,i,t),1===t){Lg(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,i,t);var r=i.texture.key,n=i.frame.name;this.frontImage.setTexture(r,n),this.backImage.setTexture(r,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}1!==t||this.ignoreCompleteEvent||this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return!!this.easeValueTask&&this.easeValueTask.isRunning}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var Lg=function(t,e,i,r,n,s){t&&(e?t.call(e,i,r,n,s):t(i,r,n,s))};Object.assign(Bg.prototype,kg);const Ng=Bg;n.register("transitionImage",(function(t,e,i,r,n){var s=new Ng(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.TransitionImage",Ng);const Ug=Phaser.GameObjects.Rectangle,Fg=class extends Ug{constructor(t,e,i){super(t,0,0,2,2,e,1),this.setAlpha(i),this.setScrollFactor(0),this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(t){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,e=t.sys.scale.gameSize,i=t.sys.cameras.main,r=e.width,n=e.height,s=1/i.zoom,o=r/2,a=n/2,h=r*s,c=n*s;this.x===o&&this.y===a||this.setPosition(o,a),this.width===h&&this.height===c||this.setSize(h,c).setOrigin(.5)}},zg=Fg;n.register("fullWindowRectangle",(function(t,e){var i=new zg(this.scene,t,e);return this.scene.add.existing(i),i})),S(window,"RexPlugins.UI.FullWindowRectangle",zg);const jg=Phaser.Utils.Objects.GetValue;var Vg={default:0,fullWindow:1};const Gg=class extends xh{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(jg(t,"hitAreaMode",0)),this.setEnable(jg(t,"enable",!0)),this}boot(){this.parent.on("pointerdown",(function(t,e,i,r){r.stopPropagation()})).on("pointerup",(function(t,e,i,r){r.stopPropagation()})).on("pointermove",(function(t,e,i,r){r.stopPropagation()})).on("pointerover",(function(t,e,i,r){r.stopPropagation()})).on("pointerout",(function(t,e){e.stopPropagation()}))}setHitAreaMode(t){"string"==typeof t&&(t=Vg[t]);var e=this.parent;return e.input&&e.removeInteractive(),0===t?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return void 0===t&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}},Hg=Phaser.Utils.Objects.GetValue,Yg=class extends Fg{constructor(t,e){super(t,Hg(e,"color",0),Hg(e,"alpha",.8)),this.touchEventStop=new Gg(this,{hitAreaMode:1})}},Kg=Yg;n.register("cover",(function(t){var e=new Kg(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Cover",Kg);class Wg extends ms{constructor(t,e,i,r,n,s){super(t,e,i,r,n),this.type="rexChart",this.chart=void 0,void 0!==s&&this.setChart(s)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var i=this.chart;i.height=this.canvas.height,i.width=this.canvas.width,i.aspectRatio=i.height?i.width/i.height:null,i.update()}return this}}var Xg={setChart:function(t){return window.Chart?(this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,function(t,e){void 0===e&&(e={}),void 0===e.options&&(e.options={});var i=e.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var r=!1;void 0===i.animation?i.animation={}:!1===i.animation&&(r=!0,i.animation={});var n=i.animation;r&&(n.duration=0);var s=n.onProgress;n.onProgress=function(e){s&&s(e),t.needRedraw()};var o=n.onComplete;return n.onComplete=function(e){o&&o(e),t.needRedraw()},e}(this,t)),this):(console.error("Can not find chartjs! Load chartjs in preload stage.\nscene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');"),this)},getChartDataset:function(t){if(void 0!==this.chart){if("string"!=typeof t)return this.chart.data.datasets[t];for(var e,i=this.chart.data.datasets,r=0,n=i.length;r<n;r++)if((e=i[r]).label===t)return e}},getChartData:function(t,e){var i=this.getChartDataset(t);if(void 0!==i){if("string"==typeof e&&-1===(e=this.chart.data.labels.indexOf(e)))return;return i.data[e]}},setChartData:function(t,e,i){if(void 0===this.chart)return this;var r=this.getChartDataset(t);return"string"==typeof e&&-1===(e=this.chart.data.labels.indexOf(e))||(r.data[e]=i),this},updateChart:function(){if(void 0===this.chart)return this;this.chart.update()}};Object.assign(Wg.prototype,Xg);const qg=Wg;n.register("chart",(function(t,e,i,r,n){var s=new qg(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.Chart",qg);const $g=Phaser.GameObjects.Zone,Jg=class extends $g{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}},Zg=function(t,e){var i,r=this.sizerChildren;if(0===r.length)return-1;for(var n=-1,s=1/0,o=0,a=r.length;o<a;o++){var h=r[o];s>(i=0===this.orientation?Math.abs(h.left-t):Math.abs(h.top-e))&&(s=i,n=o)}return h=r[r.length-1],s>(i=0===this.orientation?Math.abs(h.right-t):Math.abs(h.bottom-e))&&(s=i,n=o+1),n},Qg=Phaser.Utils.Objects.IsPlainObject,ty=Phaser.Utils.Objects.GetValue,ey=Phaser.Display.Align.CENTER,iy={min:0,full:-1};var ry=function(t,e,i,r,n,s,o,a){iu.call(this,t);var h=typeof e;if(null===e)return this;if("number"===h);else if("string"===h)e=iy[e];else if(Qg(e)){var c;e=ty(c=e,"proportion",0),i=ty(c,"align",ey),r=ty(c,"padding",0),n=ty(c,"expand",!1),s=ty(c,"key",void 0),o=ty(c,"index",void 0),t.isRexSizer||(a=0===this.orientation?ty(c,"minWidth",void 0):ty(c,"minHeight",void 0))}return"string"==typeof i&&(i=ll[i]),void 0===e&&(e=0),void 0===i&&(i=ey),void 0===r&&(r=0),void 0===n&&(n=!1),t.isRexSizer||void 0!==a||(a=0===this.orientation?t._minWidth:t._minHeight),(c=this.getSizerConfig(t)).proportion=e,c.align=i,c.padding=tu(r),c.expand=n,void 0===o||o>=this.sizerChildren.length?this.sizerChildren.push(t):this.sizerChildren.splice(o,0,t),!t.isRexSizer&&e>0&&(0===this.orientation?(t.minWidth=void 0===a?_l(t):a,t.minHeight=void 0):(t.minWidth=void 0,t.minHeight=void 0===a?xl(t):a)),void 0!==s&&this.addChildrenMap(s,t),this};const ny={add:ry,addSpace(t){return this.insertSpace(void 0,t),this},insertSpace(t,e){return void 0===e&&(e=1),ry.call(this,new Jg(this.scene),{proportion:e,minWidth:0,minHeight:0,index:t}),this},insert(t,e,i,r,n,s,o,a){return Qg(i)&&(i.index=t),ry.call(this,e,i,r,n,s,o,t,a),this},insertAtPosition(t,e,i,r,n,s,o,a,h){var c=Zg.call(this,t,e);return-1===c&&(c=void 0),this.insert(c,i,r,n,s,o,a,h),this}},sy=Phaser.Utils.Array.Remove,oy={remove(t,e){return this.getParentSizer(t)!==this||(sy(this.sizerChildren,t),up.call(this,t,e)),this},removeAll(t){for(var e=this.sizerChildren.length-1;e>=0;e--)this.remove(this.sizerChildren[e],t);return this},clear(t){return this.sizerChildren.length=0,fp.call(this,t),this}};var ay={getChildrenWidth:function(t){if(this.rexSizer.hidden)return 0;void 0===t&&(t=!0);var e,i,r,n=0,s=this.sizerChildren;if(0===this.orientation)for(var o=0,a=s.length;o<a;o++)(e=s[o]).rexSizer.hidden||(r=0===e.rexSizer.proportion||t&&e.rexSizer.proportion>0?this.getChildWidth(e):0,r+=(i=e.rexSizer.padding).left+i.right,o>0&&(r+=this.space.item),n+=r);else for(o=0,a=s.length;o<a;o++)(e=s[o]).hasOwnProperty("rexSizer")&&(e.rexSizer.hidden||(i=e.rexSizer.padding,r=this.getChildWidth(e)+i.left+i.right,n=Math.max(r,n)));return n+this.space.left+this.space.right},getChildrenHeight:function(t){if(this.rexSizer.hidden)return 0;void 0===t&&(t=!0);var e,i,r,n=0,s=this.sizerChildren;if(0===this.orientation)for(var o=0,a=s.length;o<a;o++)(e=s[o]).rexSizer.hidden||(i=e.rexSizer.padding,r=this.getChildHeight(e)+i.top+i.bottom,n=Math.max(r,n));else for(o=0,a=s.length;o<a;o++)(e=s[o]).hasOwnProperty("rexSizer")&&(e.rexSizer.hidden||(i=e.rexSizer.padding,r=0===e.rexSizer.proportion||t&&e.rexSizer.proportion>0?this.getChildHeight(e):0,r+=i.top+i.bottom,o>0&&(r+=this.space.item),n+=r));return n+this.space.top+this.space.bottom},getExpandedChildWidth:function(t,e){var i;void 0===e&&(e=this.width);var r=t.rexSizer,n=r.padding;return 0===this.orientation?r.proportion>0&&this.proportionLength>0&&(i=r.proportion*this.proportionLength):r.expand&&(i=e-this.space.left-this.space.right-n.left-n.right),i},getExpandedChildHeight:function(t,e){var i;void 0===e&&(e=this.height);var r=t.rexSizer,n=r.padding;return 0===this.orientation?r.expand&&(i=e-this.space.top-this.space.bottom-n.top-n.bottom):r.proportion>0&&this.proportionLength>0&&(i=r.proportion*this.proportionLength),i},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,r=0,n=i.length;r<n;r++)(e=i[r]).isRexSizer&&t.push(e);return t},preLayout:function(){return this._childrenProportion=void 0,this.proportionLength=void 0,uu.call(this),this},layoutChildren:function(){for(var t,e,i,r,n,s,o,a,h,c=this.sizerChildren,l=this.innerLeft,u=this.innerTop,d=this.innerWidth,f=this.innerHeight,p=l,g=u,y=0,m=c.length;y<m;y++)(t=this.rtl?c[m-y-1]:c[y]).rexSizer.hidden||(i=(e=t.rexSizer).padding,gd.call(this,t),t.isRexSpace?(a=0,h=0):(a=this.getExpandedChildWidth(t),h=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,a,h),rp(t,this)):fd(t,a,h),void 0===a&&(a=_l(t)),void 0===h&&(h=xl(t)),0===this.orientation?(r=p+i.left,s=0===e.proportion||0===this.proportionLength?a:e.proportion*this.proportionLength,n=g+i.top,o=f-i.top-i.bottom):(r=p+i.left,s=d-i.left-i.right,n=g+i.top,o=0===e.proportion||0===this.proportionLength?h:e.proportion*this.proportionLength),yd.call(this,t,r,n,s,o,e.align),0===this.orientation?p+=s+i.left+i.right+this.space.item:g+=o+i.top+i.bottom+this.space.item)},resolveWidth:function(t){if(t=hu.call(this,t),void 0===this.proportionLength&&0===this.orientation){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},resolveHeight:function(t,e){if(e=cu.call(this,t,e),void 0===this.proportionLength&&1===this.orientation){var i=e-this.childrenHeight;i>0?(i=e-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return e}};Object.assign(ay,ny,oy);const hy=ay,cy=function(){for(var t,e,i=0,r=this.sizerChildren,n=0,s=r.length;n<s;n++)(t=r[n]).rexSizer.hidden||(e=t.rexSizer.proportion)>0&&(i+=e);return i};var ly={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1};const uy=function(t){return"string"==typeof t&&(t=ly[t]),t},dy=Phaser.Utils.Objects.IsPlainObject,fy=Phaser.Utils.Objects.GetValue;class py extends ip{constructor(t,e,i,r,n,s,o){dy(e)?(e=fy(o=e,"x",0),i=fy(o,"y",0),r=fy(o,"width",void 0),n=fy(o,"height",void 0),s=fy(o,"orientation",0)):dy(r)?(r=fy(o=r,"width",void 0),n=fy(o,"height",void 0),s=fy(o,"orientation",0)):dy(s)&&(s=fy(o=s,"orientation",0)),void 0===s&&(s=0),super(t,e,i,r,n,o),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(s),this.setItemSpacing(fy(o,"space.item",0)),this.setRTL(fy(o,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=uy(t),this}setItemSpacing(t){return this.space.item=t,this}setRTL(t){return void 0===t&&(t=!0),this.rtl=t,this}get childrenProportion(){return void 0===this._childrenProportion&&(this._childrenProportion=cy.call(this)),this._childrenProportion}}Object.assign(py.prototype,hy);const gy=py;n.register("sizer",(function(t,e,i,r,n,s){var o=new gy(this.scene,t,e,i,r,n,s);return this.scene.add.existing(o),o})),S(window,"RexPlugins.UI.Sizer",gy);var yy=function(t,e){return t+e};const my=function(){return Array.prototype.reduce.call(arguments,yy,0)},vy=Phaser.Utils.Objects.IsPlainObject,by=Phaser.Utils.Objects.GetValue,wy=Phaser.Display.Align.CENTER,_y={add:function(t,e,i,r,n,s,o){iu.call(this,t),vy(e)&&(e=by(a=e,"column",void 0),i=by(a,"row",void 0),r=by(a,"align",wy),n=by(a,"padding",0),s=by(a,"expand",!1),o=by(a,"key",void 0));var a,h=function(t,e,i,r,n){if("number"==typeof t||"number"==typeof e){if(void 0===t){for(var s=0;s<r;s++)if(!i[o=e*r+s])return o}else if(void 0===e){for(s=0;s<n;s++)if(!i[o=s*r+t])return o}else if(!i[o=e*r+t])return o}else if(!0===e){var o;for(s=0;s<r;s++)for(var a=0;a<n;a++)if(!i[o=a*r+s])return o}else{s=0;for(var h=i.length;s<h;s++)if(!i[s])return s}return null}(e,i,this.sizerChildren,this.columnCount,this.rowCount);return null===h||("string"==typeof r&&(r=ll[r]),void 0===r&&(r=wy),void 0===n&&(n=0),void 0===s&&(s=!0),(a=this.getSizerConfig(t)).align=r,a.padding=tu(n),a.expand=s,this.sizerChildren[h]=t,void 0!==o&&this.addChildrenMap(o,t)),this}},xy=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length-1);for(var n=i;n<=r;n++)t[n]=e;return t},Ey={remove(t,e){if(this.getParentSizer(t)!==this)return this;var i=this.sizerChildren.indexOf(t);return-1!==i&&(this.sizerChildren[i]=null),up.call(this,t,e),this},removeAt(t,e,i){var r=this.getChildAt(t,e);return r&&this.remove(r,i),this},removeAll(t){for(var e=this.sizerChildren.length-1;e>=0;e--){var i=this.sizerChildren[e];i&&this.remove(i,t)}return this},clear(t){return xy(this.sizerChildren,null),fp.call(this,t),this}},Sy=Phaser.Utils.Objects.GetValue;var Ty={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;for(var t,e,i,r,n=0,s=this.sizerChildren,o=0;o<this.columnCount;o++){if(t=0,0===this.columnProportions[o]){for(var a=0;a<this.rowCount;a++)(e=s[a*this.columnCount+o])&&(e.rexSizer.hidden||(i=e.rexSizer.padding,r=this.getChildWidth(e)+i.left+i.right,t=Math.max(t,r)));n+=t}this.columnWidth[o]=t}return n+my(this.space.left,...this.space.column,this.space.right)},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;for(var t,e,i,r,n=0,s=this.sizerChildren,o=0;o<this.rowCount;o++){if(t=0,0===this.rowProportions[o]){for(var a=0;a<this.columnCount;a++)(e=s[o*this.columnCount+a])&&(e.rexSizer.hidden||(r=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:xl(e),r+=(i=e.rexSizer.padding).top+i.bottom,t=Math.max(t,r)));n+=t}this.rowHeight[o]=t}return n+my(this.space.top,...this.space.row,this.space.bottom)},getExpandedChildWidth:function(t,e){var i,r=t.rexSizer;if(r.expand){var n=r.padding;i=e-n.left-n.right}return i},getExpandedChildHeight:function(t,e){var i,r=t.rexSizer;if(r.expand){var n=r.padding;i=e-n.top-n.bottom}return i},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,r=0,n=i.length;r<n;r++)(e=i[r])&&e.isRexSizer&&t.push(e);return t},preLayout:function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,uu.call(this),this},layoutChildren:function(){for(var t,e,i,r,n,s,o,a,h,c,l,u=this.innerLeft,d=u,f=this.innerTop,p=this.space.column,g=this.space.row,y=0;y<this.rowCount;y++){l=this.getRowHeight(y),d=u;for(var m=0;m<this.columnCount;m++)c=this.getColumnWidth(m),(t=this.getChildAt(m,y))&&!t.rexSizer.hidden?(gd.call(this,t),a=this.getExpandedChildWidth(t,c),h=this.getExpandedChildHeight(t,l),t.isRexSizer?(t.runLayout(this,a,h),rp(t,this)):fd(t,a,h),r=d+(i=(e=t.rexSizer).padding).left,s=c-i.left-i.right,n=f+i.top,o=l-i.top-i.bottom,yd.call(this,t,r,n,s,o,e.align),d+=c+p[m]):d+=c+p[m];f+=l+g[y]}},resolveWidth:function(t){if(t=hu.call(this,t),void 0===this.proportionWidthLength){var e=this.totalColumnProportions;if(e>0){var i=t-this.childrenWidth;i>=0&&(this.proportionWidthLength=i/e)}else this.proportionWidthLength=0}return t},resolveHeight:function(t,e){if(e=cu.call(this,t,e),void 0===this.proportionHeightLength){var i=this.totalRowProportions;if(i>0){var r=e-this.childrenHeight;r>=0&&(this.proportionHeightLength=r/i)}else this.proportionHeightLength=0}return e},resolveChildrenWidth:function(t){var e,i,r;for(var n in this.sizerChildren)(e=this.sizerChildren[n])&&e.isRexSizer&&!e.ignoreLayout&&(r=this.getColumnWidth(parseInt(n)%this.columnCount),i=this.getExpandedChildWidth(e,r),i=e.resolveWidth(i),e.resolveChildrenWidth(i))},runWidthWrap:function(t){var e,i,r;for(var n in this.sizerChildren)!(e=this.sizerChildren[n])||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap||(r=this.getColumnWidth(parseInt(n)%this.columnCount),i=this.getExpandedChildWidth(e,r),e.isRexSizer&&(i=e.resolveWidth(i)),e.runWidthWrap(i));return this},resetGrid:function(t,e,i,r,n){if(void 0===i&&(i=0),void 0===r&&(r=0),this.columnCount=t,this.rowCount=e,this.gridCount=t*e,void 0===this.sizerChildren?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=t*e,xy(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=t,"number"==typeof i)xy(this.columnProportions,i);else for(var s=0;s<t;s++)this.columnProportions[s]=i[s]||0;if(this.rowProportions=[],this.rowProportions.length=e,"number"==typeof r)xy(this.rowProportions,r);else for(s=0;s<e;s++)this.rowProportions[s]=r[s]||0;this.columnWidth=[],this.columnWidth.length=t,this.rowHeight=[],this.rowHeight.length=e,this.space.column=[],this.space.column.length=t-1;var o=Sy(n,"column",0);if("number"==typeof o)xy(this.space.column,o);else{s=0;for(var a=this.space.column.length;s<a;s++)this.space.column[s]=o[s]||0}this.space.row=[],this.space.row.length=e-1;var h=Sy(n,"row",0);if("number"==typeof h)xy(this.space.row,h);else for(s=0,a=this.space.row.length;s<a;s++)this.space.row[s]=h[s]||0;return this}};Object.assign(Ty,_y,Ey);const Ay=Ty,Cy=function(){for(var t,e=0,i=0;i<this.columnCount;i++)(t=this.columnProportions[i])>0&&(e+=t);return e},ky=function(){for(var t,e=0,i=0;i<this.rowCount;i++)(t=this.rowProportions[i])>0&&(e+=t);return e},Ry=Phaser.Utils.Objects.IsPlainObject,Py=Phaser.Utils.Objects.GetValue;class Iy extends ip{constructor(t,e,i,r,n,s,o,a,h,c){Ry(e)?(e=Py(c=e,"x",0),i=Py(c,"y",0),r=Py(c,"width",void 0),n=Py(c,"height",void 0),s=Py(c,"column",0),o=Py(c,"row",0),a=Py(c,"columnProportions",0),h=Py(c,"rowProportions",0)):Ry(r)?(r=Py(c=r,"width",void 0),n=Py(c,"height",void 0),s=Py(c,"column",0),o=Py(c,"row",0),a=Py(c,"columnProportions",0),h=Py(c,"rowProportions",0)):Ry(s)?(s=Py(c=s,"column",0),o=Py(c,"row",0),a=Py(c,"columnProportions",0),h=Py(c,"rowProportions",0)):Ry(a)&&(a=Py(c=a,"columnProportions",0),h=Py(c,"rowProportions",0)),super(t,e,i,r,n,c),this.type="rexGridSizer",this.resetGrid(s,o,a,h,Py(c,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var l=Py(c,"createCellContainerCallback");if(l){i=0;for(var u=this.rowCount;i<u;i++){e=0;for(var d=this.columnCount;e<d;e++){var f={column:e,row:i},p=l(t,e,i,f);p&&this.add(p,f)}}}}destroy(t){this.scene&&(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(t,e){return t>=this.columnProportions.length||(this.columnProportions[t]=e),this}setRowProportion(t,e){return t>=this.rowProportions.length||(this.rowProportions[t]=e),this}get totalColumnProportions(){return void 0===this._totalColumnProportions&&(this._totalColumnProportions=Cy.call(this)),this._totalColumnProportions}get totalRowProportions(){return void 0===this._totalRowProportions&&(this._totalRowProportions=ky.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var i=this.sizerChildren.indexOf(t);return-1===i?null:(void 0===e&&(e={}),e.x=i%this.columnCount,e.y=Math.floor(i/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t];return 0===e?this.columnWidth[t]:e*this.proportionWidthLength}getRowHeight(t){var e=this.rowProportions[t];return 0===e?this.rowHeight[t]:e*this.proportionHeightLength}}Object.assign(Iy.prototype,Ay);const Oy=Iy;n.register("gridSizer",(function(t,e,i,r,n,s,o,a,h){var c=new Oy(this.scene,t,e,i,r,n,s,o,a,h);return this.scene.add.existing(c),c})),S(window,"RexPlugins.UI.GridSizer",Oy);var My=function(t,e,i,r){return e/t<=i?e/(r-1):0};var Dy=function(t){var e=t.rexSizer.padding;return _l(t)+e.left+e.right},By=function(t){var e=t.rexSizer.padding;return xl(t)+e.top+e.bottom};const Ly=function(t,e){void 0===e?e={lines:[],width:0,height:0}:(e.lines.length=0,e.width=0,e.height=0);for(var i,r,n,s,o=this.sizerChildren,a=0,h=e.lines,c=void 0,l=0,u=o.length;l<u;l++){if("\n"===(i=o[l]))i=void 0,r=0,s=!0;else{if(i.rexSizer.hidden)continue;i.isRexSizer&&i.layout(),s=a<(r=Dy(i))||void 0===c}s&&(c&&(c.width=t-(a+this.space.item),e.width=Math.max(e.width,c.width),e.height+=c.height+this.space.line),c={children:[],height:0},h.push(c),a=t),a-=r+this.space.item,i&&(c.children.push(i),n=By(i),c.height=Math.max(c.height,n))}return c&&(c.width=t-(a+this.space.item),e.width=Math.max(e.width,c.width),e.height+=c.height),e},Ny=Phaser.Math.Distance.Between,Uy=function(t,e){var i=this.sizerChildren;if(0===i.length)return-1;for(var r=-1,n=1/0,s=0,o=i.length;s<o;s++){var a=i[s];if(!(Math.abs(a.centerY-e)>a.height/2)){n>(h=Ny(a.left,a.centerY,t,e))&&(n=h,r=s);var h,c=i[s+1];c&&c.y===a.y||n>(h=Ny(a.right,a.centerY,t,e))&&(n=h,r=s+1)}}return r},Fy=Phaser.Utils.Objects.IsPlainObject,zy=Phaser.Utils.Objects.GetValue,jy=Phaser.Display.Align.CENTER;var Vy=function(t,e,i,r){return"\n"===t?(this.addNewLine(),this):(iu.call(this,t),Fy(e)&&(e=zy(n=e,"padding",0),i=zy(n,"key",void 0),r=zy(n,"index",void 0)),void 0===e&&(e=0),(n=this.getSizerConfig(t)).align=jy,n.padding=tu(e),void 0===r||r>=this.sizerChildren.length?this.sizerChildren.push(t):this.sizerChildren.splice(r,0,t),void 0!==i&&this.addChildrenMap(i,t),this);var n};const Gy={add(t,e,i){if(as(t))for(var r=t,n=0,s=r.length;n<s;n++)Vy.call(this,r[n],e);else Vy.call(this,t,e,i);return this},addNewLine(){return this.sizerChildren.push("\n"),this},insert(t,e,i,r){return Vy.call(this,e,i,r,t),this},insertAtPosition(t,e,i,r,n){var s=Uy.call(this,t,e);return-1===s&&(s=void 0),this.insert(s,i,r,n),this}},Hy=Phaser.Utils.Array.Remove,Yy={remove(t,e){return this.getParentSizer(t)!==this||(Hy(this.sizerChildren,t),up.call(this,t,e)),this},removeAll(t){for(var e=this.sizerChildren.length-1;e>=0;e--)this.remove(this.sizerChildren[e],t);return this},clear(t){return this.sizerChildren.length=0,fp.call(this,t),this}};var Ky={getChildrenWidth:function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},getChildrenHeight:function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,r=0,n=i.length;r<n;r++)"\n"!==(e=i[r])&&e.isRexSizer&&t.push(e);return t},preLayout:function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,uu.call(this),this},layoutChildren:function(){for(var t,e,i,r,n,s,o,a,h,c,l=this.innerWidth,u=this.justifyPercentage,d=0,f=this.innerLeft,p=f,g=this.innerTop,y=this.widthWrapResult.lines,m=0,v=y.length;m<v;m++){switch(h=(a=y[m]).children,this.rtl&&h.reverse(),c=l-a.width,this.align){case 0:break;case 1:p+=c;break;case 2:p+=c/2;break;case 3:d=My(l,c,u,h.length);break;case 4:0===(d=My(l,c,u,h.length))&&(p+=c);break;case 5:0===(d=My(l,c,u,h.length))&&(p+=c/2)}for(var b=0,w=h.length;b<w;b++)(t=h[b]).rexSizer.hidden||(i=(e=t.rexSizer).padding,gd.call(this,t),r=p+i.left,b>0&&(r+=this.space.item),n=g+i.top,s=_l(t),o=xl(t),p=r+s+i.right+d,yd.call(this,t,r,n,s,o,e.align));p=f,g+=a.height+this.space.line}},runWidthWrap:function(t){var e=t-this.space.left-this.space.right;this.widthWrapResult=Ly.call(this,e,this.widthWrapResult),du.call(this,t)}};Object.assign(Ky,Gy,Yy);const Wy=Ky,Xy=function(t){void 0===t&&(t=this.sizerChildren);for(var e,i,r=0,n=0,s=t.length;n<s;n++)"\n"!==(e=t[n])&&(i=this.getChildWidth(e),r=Math.max(i,r));return r},qy=function(t){void 0===t&&(t=this.sizerChildren);for(var e,i,r=0,n=0,s=t.length;n<s;n++)"\n"!==(e=t[n])&&(i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:xl(e),r=Math.max(i,r));return r},$y=Phaser.Utils.Objects.IsPlainObject,Jy=Phaser.Utils.Objects.GetValue;class Zy extends ip{constructor(t,e,i,r,n,s){$y(e)?(e=Jy(s=e,"x",0),i=Jy(s,"y",0),r=Jy(s,"width",void 0),n=Jy(s,"height",void 0)):$y(r)&&(r=Jy(s=r,"width",void 0),n=Jy(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Jy(s,"orientation",0)),this.setItemSpacing(Jy(s,"space.item",0)),this.setLineSpacing(Jy(s,"space.line",0)),this.setAlign(Jy(s,"align",0)),this.setJustifyPercentage(Jy(s,"justifyPercentage",.25)),this.setRTL(Jy(s,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=uy(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setAlign(t){return"string"==typeof t&&(t=Qy[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return void 0===t&&(t=!0),this.rtl=t,this}get maxChildWidth(){return void 0===this._maxChildWidth&&(this._maxChildWidth=Xy.call(this)),this._maxChildWidth}get maxChildHeight(){return void 0===this._maxChildHeight&&(this._maxChildHeight=qy.call(this)),this._maxChildHeight}}const Qy={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Zy.prototype,Wy);const tm=Zy;n.register("fixWidthSizer",(function(t,e,i,r,n){var s=new tm(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.FixWidthSizer",tm),n.register("overlapSizer",(function(t,e,i,r,n){var s=new _p(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),S(window,"RexPlugins.UI.OverlapSizer",_p),n.register("space",(function(){return new Jg(this.scene)})),S(window,"RexPlugins.UI.Space",Jg);const em=function(t,e,i,r){var n=new bg(e,i,r);if(t&&!t.isRexSizer){var s=n.createGeometryMask();t.setMask(s),this.once("destroy",(function(){t.setMask(),s.destroy()}))}return this.pin(n),n},im=Phaser.Utils.Objects.GetValue,rm=class extends gy{constructor(t,e){super(t,e),this.type="rexLabel";var i=im(e,"background",void 0),r=im(e,"icon",void 0),n=im(e,"iconMask",void 0),s=im(e,"text",void 0),o=im(e,"action",void 0),a=im(e,"actionMask",void 0),h=im(e,"align",void 0),c=im(e,"space.icon",0),l=im(e,"space.text",0);if(i&&this.addBackground(i),"right"!==h&&"bottom"!==h&&"center"!==h||this.addSpace(),r&&(0===this.orientation?(s||o)&&(d={right:c}):(s||o)&&(d={bottom:c}),this.add(r,0,"center",d),n&&(n=em.call(this,r,r,1))),s){var u,d,f,p=im(e,"expandTextWidth",!1),g=im(e,"expandTextHeight",!1);0===this.orientation?(u=p?1:0,o&&(d={right:l}),f=g):(u=g?1:0,o&&(d={bottom:l}),f=p),this.add(s,u,"center",d,f)}o&&(this.add(o),a&&(a=em.call(this,o,o,1))),"center"===h&&this.addSpace(),this.addChildrenMap("background",i),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",s),this.addChildrenMap("action",o),this.addChildrenMap("actionMask",a)}get text(){var t=this.childrenMap.text;return void 0===t?"":t.text}set text(t){var e=this.childrenMap.text;void 0!==e&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,e){var i=this.childrenMap.icon;if(void 0!==i)return i.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(void 0!==t)return t.texture}get frame(){var t=this.childrenMap.icon;if(void 0!==t)return t.frame}runLayout(t,e,i){if(this.ignoreLayout)return this;super.runLayout(t,e,i);var r=this.childrenMap.iconMask;r&&(r.setPosition(),this.resetChildPositionState(r));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,e){super.resize(t,e);var i=this.childrenMap.iconMask;i&&i.resize();var r=this.childrenMap.actionMask;return r&&r.resize(),this}};n.register("label",(function(t){var e=new rm(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Label",rm);const nm=gy.prototype.add,sm=gy.prototype.addSpace;var om=function(t){var e=!t.isRexSpace,i=!e||this.buttonsExpand?1:0;if(0===this.sizerChildren.length)if(e){!this.buttonsExpand&&("right"===this.buttonsAlign||"center"===this.buttonsAlign||"bottom"===this.buttonsAlign)&&sm.call(this),nm.call(this,t,{proportion:i,expand:!0});var r=!this.buttonsExpand&&"center"===this.buttonsAlign;r&&sm.call(this),this.hasTailSpace=r}else nm.call(this,t,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;nm.call(this,t,{index:n,proportion:i,expand:!0})}else nm.call(this,t,{proportion:i,expand:!0});return e&&this.buttonGroup.add(t),this};const am={addButton(t){if(as(t))for(var e=t,i=0,r=e.length;i<r;i++)om.call(this,e[i]);else om.call(this,t);return this},addButtons(t){for(var e=0,i=t.length;e<i;e++)om.call(this,t[e]);return this}},hm=Phaser.Utils.Array.Remove,cm=gy.prototype.remove,lm=gy.prototype.clear;var um=function(t,e){if(this.getParentSizer(t)!==this)return this;var i=this.buttonGroup.buttons;return hm(i,t),cm.call(this,t,e),this};const dm={remove(t,e){if(as(t))for(var i=t,r=0,n=i.length;r<n;r++)um.call(this,i[r],e);else um.call(this,t,e);return this},clear(t){return this.buttonGroup.buttons.length=0,lm.call(this,t),this},removeButton(t,e){return(t=this.getButton(t))?(this.remove(t,e),this):this},clearButtons(t){for(var e=this.buttonGroup.buttons,i=e.length-1;i>=0;i--)um.call(this,e[i],t);return this}},fm={add(t){return this.buttons.push(t),t._buttonBehavior=new _d(t,this.clickConfig),t._buttonBehavior.on("click",(function(t,e,i,r){this.fireEvent("button.click",e,i,r)}),this).on("enable",(function(t,e){this.fireEvent("button.enable",e)}),this).on("disable",(function(t,e){this.fireEvent("button.disable",e)}),this),t.on("pointerover",(function(e,i,r,n){this.fireEvent("button.over",t,e,n)}),this).on("pointerout",(function(e,i){this.fireEvent("button.out",t,e,i)}),this),this},addMultiple(t){for(var e=0,i=t.length;e<i;e++)this.add(gameObject[e]);return this}},pm=Phaser.Utils.Objects.GetValue;var gm=function(t,e){void 0===e&&(e=!1);var i,r,n=pm(t,"dataManager",void 0);if(i=pm(t,"setValueCallback",void 0),r=pm(t,"setValueCallbackScope",void 0),void 0===i&&(i=pm(t,"setButtonStateCallback",void 0),r=pm(t,"setButtonStateCallbackScope",void 0)),void 0===n){var s=this.parent;s.setDataEnabled(),n=s.data}this.buttons.forEach((function(t){var s=t.name;i&&n.events.on(`changedata-${s}`,(function(e,n,s){r?i.call(r,t,n,s):i(t,n,s)})),n.set(s,void 0),n.set(s,e)})),this.dataManager=n};const ym={setType(t){var e=pm(t,"type",void 0);switch(this.buttonsType=e,e){case"radio":this.setRadioType(t);break;case"checkboxes":this.setCheckboxesType(t)}return this},setRadioType(t){gm.call(this,t);var e=void 0,i=this.parent,r=this.buttons,n=this.dataManager;return Object.defineProperty(i,"value",{get:function(){return e},set:function(t){t!==e&&(e=t,r.forEach((function(e){var i=e.name,r=n.get(i);i===t?r||n.set(i,!0):r&&n.set(i,!1)})))},enumerable:!0,configurable:!0}),i.on("button.click",(function(t){i.value=t.name})),this},setCheckboxesType(t){gm.call(this,t);var e=this.parent,i=this.dataManager;return e.on("button.click",(function(t){i.toggle(t.name)})),this},setSelectedButtonName(t){return this.parent.value=t,this},getSelectedButtonName(){return this.parent.value},setButtonState(t,e){return void 0===e&&(e=!0),this.dataManager.set(t,e),this},getButtonState(t){return this.dataManager.get(t)}};var mm=function(t,e){return t?t.hasOwnProperty("name")?t.name===e?t:null:GetElementByName(t,e):null};const vm={getButton(t){var e,i=this.buttons;switch(typeof t){case"number":e=i[t];break;case"string":e=function(t,e){if(!t)return null;if(as(t)){for(var i,r=0,n=t.length;r<n;r++)if(i=mm(t[r],e))return i}else for(var s in t)if(i=mm(t[s],e))return i}(i,t);break;default:e=t,-1===i.indexOf(e)&&(e=void 0)}return e},setButtonEnable(t,e){var i=this.buttons;if(void 0===t||"boolean"==typeof t){e=t;for(var r=0,n=i.length;r<n;r++)i[r]._buttonBehavior.setEnable(e)}else this.getButton(t)._buttonBehavior.setEnable(e);return this},toggleButtonEnable(t){var e=this.buttons;if(void 0===t||"boolean"==typeof t)for(var i=0,r=e.length;i<r;i++)e[i]._buttonBehavior.toggleEnable();else this.getButton(t)._buttonBehavior.toggleEnable();return this},getButtonEnable(t){return void 0===t&&(t=0),this.getButton(t)._buttonBehavior.enable},emitButtonClick(t){return(this.buttonGroup?this.buttonGroup:this).fireEvent("button.click",t),this},showButton(t){return id(this.getButton(t)),this},hideButton(t){return rd(this.getButton(t)),this},isButtonShown(t){return nd(this.getButton(t)),this},forEachButtton(t,e){for(var i=this.buttons,r=0,n=i.length;r<n;r++)e?t.call(e,i[r],r,i):t(i[r],r,i);return this}};class bm{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var wm={fireEvent:function(t,e,i,r){var n;if("number"==typeof e){if(n=e,!(e=this.buttons[n]))return}else if(-1===(n=this.buttons.indexOf(e)))return;this.eventEmitter!==this.parent&&this.parent.emit(t,e,n,i,r),void 0!==this.groupName?this.eventEmitter.emit(t,e,this.groupName,n,i,r):this.eventEmitter.emit(t,e,n,i,r)}};Object.assign(bm.prototype,fm,ym,vm,wm);const _m=bm,xm={setSelectedButtonName(t){return this.buttonGroup.setSelectedButtonName(t),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(t,e){return this.buttonGroup.setButtonState(t,e),this},getButtonState(t){return this.buttonGroup.getButtonState(t)}},Em=Phaser.Utils.Objects.GetValue;class Sm extends gy{constructor(t,e){void 0===e&&(e={});var i=e.space;"number"==typeof i&&(e.space={item:i}),super(t,e),this.type="rexButtons",this.buttonGroup=new _m({parent:this,eventEmitter:Em(e,"eventEmitter",this),groupName:Em(e,"groupName",void 0),clickConfig:Em(e,"click",void 0)});var r=Em(e,"background",void 0),n=Em(e,"buttons",void 0);this.buttonsExpand=Em(e,"expand",!1),this.buttonsAlign=Em(e,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.buttonGroup.setType(e),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Sm.prototype,am,dm,vm,xm);const Tm=Sm;n.register("buttons",(function(t){var e=new Tm(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Buttons",Tm);const Am=Oy.prototype.add,Cm={addButton(t,e,i){return Am.call(this,t,e,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(t),this},addButtons(t,e){for(var i=0,r=t;i<r;i++)this.addButton(t[i],void 0,e);return this}},km=Phaser.Utils.Array.Remove,Rm=Oy.prototype.remove,Pm=Oy.prototype.clear;var Im=function(t,e){if(!(t=this.getButton(t)))return this;var i=this.buttonGroup.buttons;return km(i,t),Rm.call(this,t,e),this};const Om={remove(t,e){if(as(t))for(var i=t,r=0,n=i.length;r<n;r++)Im.call(this,i[r],e);else Im.call(this,t,e);return this},clear(t){return this.buttonGroup.buttons.length=0,Pm.call(this,t),this},removeButton(t,e){return this.remove(t,e),this},clearButtons(t){for(var e=this.buttonGroup.buttons,i=e.length-1;i>=0;i--)Im.call(this,e[i],t);return this}},Mm=Phaser.Utils.Objects.GetValue;class Dm extends Oy{constructor(t,e){void 0===e&&(e={});var i=Mm(e,"row",0),r=Mm(e,"col",0),n=Mm(e,"createCellContainerCallback"),s=Mm(e,"buttons",void 0),o=Mm(e,"expand",!0),a=o?1:0;if(n&&(e.createCellContainerCallback=void 0),void 0!==s){i=Math.max(i,s.length);for(var h=0,c=s.length;h<c;h++)r=Math.max(r,s[h].length)}e.row=i,e.column=r,e.columnProportions=a,e.rowProportions=a,super(t,e),this.type="rexGridButtons",this.buttonGroup=new _m({parent:this,eventEmitter:Mm(e,"eventEmitter",this),groupName:Mm(e,"groupName",void 0),clickConfig:Mm(e,"click",void 0)});var l=Mm(e,"background",void 0);this.buttonsExpand=o;var u=Mm(e,"space",void 0);if("number"==typeof u&&(u={itemX:u,itemY:u}),l&&this.addBackground(l),s)for(var d,f=0,p=s.length;f<p;f++)for(var g=0,y=(d=s[f]).length;g<y;g++)(b=d[g])&&this.addButton(b,g,f);else if(n)for(var m=0;m<i;m++)for(var v=0;v<r;v++){var b;(b=n(t,v,m))&&this.addButton(b,v,m)}this.buttonGroup.setType(e),this.addChildrenMap("background",l),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Dm.prototype,Cm,Om,vm,xm);const Bm=Dm;n.register("gridButtons",(function(t){var e=new Bm(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.GridButtons",Bm);const Lm=tm.prototype.add;var Nm=function(t){return Lm.call(this,t),this.buttonGroup.add(t),this};const Um={addButton(t){if(as(t))for(var e=t,i=0,r=e.length;i<r;i++)Nm.call(this,e[i]);else Nm.call(this,t);return this},addButtons(t){if(as(t[0]))for(var e,i=t,r=0,n=i.length-1;r<=n;r++){for(var s=0,o=(e=i[r]).length;s<o;s++)Nm.call(this,e[s]);r>n&&Lm.addNewLine(this)}else for(s=0,o=t.length;s<o;s++)Nm.call(this,t[s]);return this}},Fm=Phaser.Utils.Array.Remove,zm=tm.prototype.remove,jm=tm.prototype.clear;var Vm=function(t,e){if(!(t=this.getButton(t)))return this;var i=this.buttonGroup.buttons;return Fm(i,t),zm.call(this,t,e),this};const Gm={remove(t,e){if(as(t))for(var i=t,r=0,n=i.length;r<n;r++)Vm.call(this,i[r],e);else Vm.call(this,t,e);return this},clear(t){return this.buttonGroup.buttons.length=0,jm.call(this,t),this},removeButton(t,e){return this.remove(t,e),this},clearButtons(t){for(var e=this.buttonGroup.buttons,i=e.length-1;i>=0;i--)Vm.call(this,e[i],t);return this}},Hm=Phaser.Utils.Objects.GetValue;class Ym extends tm{constructor(t,e){void 0===e&&(e={});var i=e.space;"number"==typeof i&&(e.space={item:i,line:i}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new _m({parent:this,eventEmitter:Hm(e,"eventEmitter",this),groupName:Hm(e,"groupName",void 0),clickConfig:Hm(e,"click",void 0)});var r=Hm(e,"background",void 0),n=Hm(e,"buttons",void 0);this.buttonsAlign=Hm(e,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.buttonGroup.setType(e),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ym.prototype,Um,Gm,vm,xm);const Km=Ym;n.register("fixWidthButtons",(function(t){var e=new Km(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.FixWidthButtons",Km);const Wm={getChoice(t){return this.childrenMap.choicesSizer.getButton(t)},getAction(t){return this.childrenMap.actionsSizer.getButton(t)},getToolbar(t){return this.childrenMap.toolbarSizer.getButton(t)},getLeftToolbar(t){return this.childrenMap.leftToolbarSizer.getButton(t)},setChoiceEnable(t,e){return this.childrenMap.choicesSizer.setButtonEnable(t,e),this},setActionEnable(t,e){return this.childrenMap.actionsSizer.setButtonEnable(t,e),this},setToolbarEnable(t,e){return this.childrenMap.toolbarSizer.setButtonEnable(t,e),this},setLeftToolbarEnable(t,e){return this.childrenMap.leftToolbarSizer.setButtonEnable(t,e),this},toggleChoiceEnable(t){return this.childrenMap.choicesSizer.toggleButtonEnable(t),this},toggleActionEnable(t){return this.childrenMap.actionsSizer.toggleButtonEnable(t),this},toggleToolbarEnable(t){return this.childrenMap.toolbarSizer.toggleButtonEnable(t),this},toggleLeftToolbarEnable(t){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(t),this},getChoiceEnable(t){return this.childrenMap.choicesSizer.getButtonEnable(t)},getActionEnable(t){return this.childrenMap.actionsSizer.getButtonEnable(t)},getToolbarEnable(t){return this.childrenMap.toolbarSizer.getButtonEnable(t)},getLeftToolbarEnable(t){return this.childrenMap.leftToolbarSizer.getButtonEnable(t)},emitChoiceClick(t){return this.childrenMap.choicesSizer.emitButtonClick(t),this},emitActionClick(t){return this.childrenMap.actionsSizer.emitButtonClick(t),this},emitToolbarClick(t){return this.childrenMap.toolbarSizer.emitButtonClick(t),this},emitLeftToolbarClick(t){return this.childrenMap.leftToolbarSizer.emitButtonClick(t),this},showChoice(t){return this.childrenMap.choicesSizer.showButton(t),this},showAction(t){return this.childrenMap.actionsSizer.showButton(t),this},showToolbar(t){return this.childrenMap.toolbarSizer.showButton(t),this},showLeftToolbar(t){return this.childrenMap.leftToolbarSizer.showButton(t),this},hideChoice(t){return this.childrenMap.choicesSizer.hideButton(t),this},hideAction(t){return this.childrenMap.actionsSizer.hideButton(t),this},hideToolbar(t){return this.childrenMap.toolbarSizer.hideButton(t),this},hideLeftToolbar(t){return this.childrenMap.leftToolbarSizer.hideButton(t),this},addChoice(t){return this.childrenMap.choicesSizer.addButton(t),this},addAction(t){return this.childrenMap.actionsSizer.addButton(t),this},addToolbar(t){return this.childrenMap.toolbarSizer.addButton(t),this},addLeftToolbar(t){return this.childrenMap.leftToolbarSizer.addButton(t),this},removeChoice(t,e){return this.childrenMap.choicesSizer.removeButton(t,e),this},removeAction(t,e){return this.childrenMap.actionsSizer.removeButton(t,e),this},removeToolbar(t,e){return this.childrenMap.toolbarSizer.removeButton(t,e),this},removeLeftToolbar(t,e){return this.childrenMap.leftToolbarSizer.removeButton(t,e),this},clearChoices(t){return this.childrenMap.choicesSizer.clearButtons(t),this},clearActions(t){return this.childrenMap.actionsSizer.clearButtons(t),this},clearToolbar(t){return this.childrenMap.toolbarSizer.clearButtons(t),this},clearLeftToolbar(t){return this.childrenMap.leftToolbarSizer.clearButtons(t),this},forEachChoice(t,e){return this.childrenMap.choicesSizer.forEachButtton(t,e),this},forEachAction(t,e){return this.childrenMap.actionsSizer.forEachButtton(t,e),this},forEachToolbar(t,e){return this.childrenMap.toolbarSizer.forEachButtton(t,e),this},forEachLeftToolbar(t,e){return this.childrenMap.leftToolbarSizer.forEachButtton(t,e),this}},Xm=Phaser.Utils.Objects.GetValue;class qm extends gy{constructor(t,e){void 0===e&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=Xm(e,"eventEmitter",this);var i,r,n,s,o=Xm(e,"background",void 0),a=Xm(e,"title",void 0),h=Xm(e,"toolbar",void 0),c=Xm(e,"toolbarBackground",void 0),l=Xm(e,"leftToolbar",void 0),u=Xm(e,"leftToolbarBackground",void 0),d=Xm(e,"content",void 0),f=Xm(e,"description",void 0),p=Xm(e,"choices",void 0),g=Xm(e,"choicesBackground",void 0),y=Xm(e,"actions",void 0),m=Xm(e,"actionsBackground",void 0),v=Xm(e,"click",void 0);if(o&&this.addBackground(o),h&&(n=new Tm(t,{groupName:"toolbar",background:c,buttons:h,orientation:0,space:{item:Xm(e,"space.toolbarItem",0)},click:v,eventEmitter:this.eventEmitter})),l&&(s=new Tm(t,{groupName:"leftToolbar",background:u,buttons:l,orientation:0,space:{item:Xm(e,"space.leftToolbarItem",0)},click:v,eventEmitter:this.eventEmitter})),a&&!h&&!l){var b=Xm(e,"align.title","center"),w=Xm(e,"space.title",0);(d||f||p||y)&&(E={bottom:w});var _=Xm(e,"expand.title",!0);this.add(a,{align:b,padding:E,expand:_})}if(!h||a||l||(w=Xm(e,"space.title",0),(d||f||p||y)&&(E={bottom:w}),_=Xm(e,"expand.toolbar",!0),this.add(n,{align:"right",padding:E,expand:_})),!l||a||h||(w=Xm(e,"space.title",0),(d||f||p||y)&&(E={bottom:w}),_=Xm(e,"expand.leftToolbar",!0),this.add(s,{align:"left",padding:E,expand:_})),a&&(h||l)){var x=new gy(t,{orientation:0});s&&x.add(s,{align:"right",expand:!1}),b=Xm(e,"align.title","left"),(_=Xm(e,"expand.title",!0))||"right"!==b&&"center"!==b||x.addSpace();var E={left:Xm(e,"space.titleLeft",0),right:Xm(e,"space.titleRight",0)},S=_?1:0;x.add(a,{proportion:S,align:"center",padding:E,expand:_}),_||"left"!==b&&"center"!==b||x.addSpace(),n&&x.add(n,{align:"right",expand:!1}),w=Xm(e,"space.title",0),(d||f||p||y)&&(E={bottom:w}),this.add(x,{align:"center",padding:E,expand:!0})}if(d){b=Xm(e,"align.content","center");var T=Xm(e,"space.content",0);E={left:Xm(e,"space.contentLeft",0),right:Xm(e,"space.contentRight",0),bottom:f||p||y?T:0},_=Xm(e,"expand.content",!0),this.add(d,{align:b,padding:E,expand:_})}if(f){b=Xm(e,"align.description","center");var A=Xm(e,"space.description",0);E={left:Xm(e,"space.descriptionLeft",0),right:Xm(e,"space.descriptionRight",0),bottom:p||y?A:0},_=Xm(e,"expand.description",!0),this.add(f,{align:b,padding:E,expand:_})}if(p){b=Xm(e,"align.choices","center"),i=new Tm(t,{groupName:"choices",background:g,buttons:p,orientation:1,space:{item:Xm(e,"space.choice",0)},click:v,eventEmitter:this.eventEmitter,type:Xm(e,"choicesType",void 0),setValueCallback:Xm(e,"choicesSetValueCallback",void 0),setValueCallbackScope:Xm(e,"choicesSetValueCallbackScope",void 0)});var C=Xm(e,"space.choices",0);E={left:Xm(e,"space.choicesLeft",0),right:Xm(e,"space.choicesRight",0),bottom:y?C:0},_=Xm(e,"expand.choices",!0),this.add(i,{align:b,padding:E,expand:_})}y&&(r=new Tm(t,{groupName:"actions",background:m,buttons:y,orientation:0,space:{item:Xm(e,"space.action",0)},expand:Xm(e,"expand.actions",!1),align:Xm(e,"align.actions","center"),click:v,eventEmitter:this.eventEmitter}),E={left:Xm(e,"space.actionsLeft",0),right:Xm(e,"space.actionsRight",0)},this.add(r,{align:"center",padding:E,expand:!0})),this.addChildrenMap("background",o),this.addChildrenMap("title",a),this.addChildrenMap("toolbar",h),this.addChildrenMap("leftToolbar",l),this.addChildrenMap("content",d),this.addChildrenMap("description",f),this.addChildrenMap("choices",p),this.addChildrenMap("actions",y),this.addChildrenMap("choicesSizer",i),this.addChildrenMap("actionsSizer",r),this.addChildrenMap("toolbarSizer",n),this.addChildrenMap("leftToolbarSizer",s)}}Object.assign(qm.prototype,Wm);const $m=qm;n.register("dialog",(function(t){var e=new $m(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Dialog",$m);const Jm=Phaser.Utils.Objects.GetValue,Zm=class extends gy{constructor(t,e){void 0===e&&(e={}),e.orientation=1,super(t,e),this.type="rexHolyGrail";var i=Jm(e,"background",void 0);i&&this.addBackground(i);var r=Jm(e,"header",void 0);if(r){var n=Jm(e,"proportion.header",0),s=Jm(e,"align.header","center");"number"==typeof(l=Jm(e,"space.header",void 0))&&(l={bottom:l});var o=Jm(e,"expand.header",!0);this.add(r,{proportion:n,align:s,padding:l,expand:o})}var a=new gy(t,{orientation:0});this.add(a,{proportion:1,align:"center",padding:0,expand:!0});var h=Jm(e,"leftSide",void 0);h&&(n=Jm(e,"proportion.leftSide",0),s=Jm(e,"align.leftSide","center"),"number"==typeof(l=Jm(e,"space.leftSide",void 0))&&(l={right:l}),o=Jm(e,"expand.leftSide",!0),a.add(h,{proportion:n,align:s,padding:l,expand:o}));var c=Jm(e,"content",void 0);if(c){n=Jm(e,"proportion.content",1),s=Jm(e,"align.content","center");var l=Jm(e,"space.content",void 0);o=Jm(e,"expand.content",!0),a.add(c,{proportion:n,align:s,padding:l,expand:o})}var u=Jm(e,"rightSide",void 0);u&&(n=Jm(e,"proportion.rightSide",0),s=Jm(e,"align.rightSide","center"),"number"==typeof(l=Jm(e,"space.rightSide",void 0))&&(l={left:l}),o=Jm(e,"expand.rightSide",!0),a.add(u,{proportion:n,align:s,padding:l,expand:o}));var d=Jm(e,"footer",void 0);d&&(n=Jm(e,"proportion.footer",0),s=Jm(e,"align.footer","center"),"number"==typeof(l=Jm(e,"space.footer",void 0))&&(l={top:l}),o=Jm(e,"expand.footer",!0),this.add(d,{proportion:n,align:s,padding:l,expand:o})),this.addChildrenMap("background",i),this.addChildrenMap("header",r),this.addChildrenMap("leftSide",h),this.addChildrenMap("content",c),this.addChildrenMap("rightSide",u),this.addChildrenMap("footer",d)}};n.register("holyGrail",(function(t){var e=new Zm(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.HolyGrail",Zm);const Qm={getButtonsSizer(t){return this.childrenMap[`${t}ButtonsSizer`]},getButton(t,e){var i=this.getButtonsSizer(t);return i?i.getButton(e):void 0},setButtonEnable(t,e,i){return this.getButtonsSizer(t).setButtonEnable(e,i),this},setLeftButtonEnable(t,e){return this.childrenMap.leftButtonsSizer.setButtonEnable(t,e),this},setRightButtonEnable(t,e){return this.childrenMap.rightButtonsSizer.setButtonEnable(t,e),this},setTopButtonEnable(t,e){return this.childrenMap.topButtonsSizer.setButtonEnable(t,e),this},setBottomButtonEnable(t,e){return this.childrenMap.bottomButtonsSizer.setButtonEnable(t,e),this},toggleButtonEnable(t,e){return this.getButtonsSizer(t).toggleButtonEnable(e),this},toggleLeftButtonEnable(t){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(t),this},toggleRightButtonEnable(t){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(t),this},toggleTopButtonEnable(t){return this.childrenMap.topButtonsSizer.toggleButtonEnable(t),this},toggleBottomButtonEnable(t){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(t),this},getButtonEnable(t,e){return this.getButtonsSizer(t).getButtonEnable(e)},getLeftButtonEnable(t){return this.childrenMap.leftButtonsSizer.getButtonEnable(t)},getRightButtonEnable(t){return this.childrenMap.rightButtonsSizer.getButtonEnable(t)},getTopButtonEnable(t){return this.childrenMap.topButtonsSizer.getButtonEnable(t)},getBottomButtonEnable(t){return this.childrenMap.bottomButtonsSizer.getButtonEnable(t)},emitButtonClick(t,e){var i=this.getButtonsSizer(t);return i?(i.emitButtonClick(e),this):this},emitLeftButtonClick(t){return this.childrenMap.leftButtonsSizer.emitButtonClick(t),this},emitRightButtonClick(t){return this.childrenMap.rightButtonsSizer.emitButtonClick(t),this},emitTopButtonClick(t){return this.childrenMap.topButtonsSizer.emitButtonClick(t),this},emitBottomButtonClick(t){return this.childrenMap.bottomButtonsSizer.emitButtonClick(t),this},getLeftButton(t){return this.childrenMap.leftButtonsSizer.getButton(t)},getRightButton(t){return this.childrenMap.rightButtonsSizer.getButton(t)},getTopButton(t){return this.childrenMap.topButtonsSizer.getButton(t)},getBottomButton(t){return this.childrenMap.bottomButtonsSizer.getButton(t)},showButton(t,e){return id(this.getButton(t,e)),this},showLeftButton(t){return id(this.getLeftButton(t)),this},showRightButton(t){return id(this.getRightButton(t)),this},showTopButton(t){return id(this.getTopButton(t)),this},showBottomButton(t){return id(this.getBottomButton(t)),this},hideButton(t,e){return rd(this.getButton(t,e)),this},hideLeftButton(t){return rd(this.getLeftButton(t)),this},hideRightButton(t){return rd(this.getRightButton(t)),this},hideTopButton(t){return rd(this.getTopButton(t)),this},hideBottomButton(t){return rd(this.getBottomButton(t)),this},addButton(t,e){return this.getButtonsSizer(t).addButton(e),this},addLeftButton(t){return this.addButton("left",t),this},addRightButton(t){return this.addButton("right",t),this},addTopButton(t){return this.addButton("top",t),this},removeButton(t,e,i){return this.getButtonsSizer(t).removeButton(e,i),this},removeLeftButton(t,e){return this.removeButton("left",t,e),this},removeRightButton(t,e){return this.removeButton("right",t,e),this},removeTopButton(t,e){return this.removeButton("top",t,e),this},removeBottomButton(t,e){return this.removeButton("bottom",t,e),this},clearButtons(t,e){return this.getButtonsSizer(t).clearButtons(e),this},clearLeftButtons(t){return this.clearButtons("left",t),this},clearRightButtons(t){return this.clearButtons("right",t),this},clearTopButtons(t){return this.clearButtons("top",t),this},clearBottomButtonss(t){return this.clearButtons("bottom",t),this},forEachButton(t,e,i){return this.getButtonsSizer(t).forEachButtton(e,i),this},forEachLeftButton(t,e){return this.childrenMap.leftButtonsSizer.forEachButtton(t,e),this},forEachRightButton(t,e){return this.childrenMap.rightButtonsSizer.forEachButtton(t,e),this},forEachTopButton(t,e){return this.childrenMap.topButtonsSizer.forEachButtton(t,e),this},forEachBottomButton(t,e){return this.childrenMap.bottomButtonsSizer.forEachButtton(t,e),this}},tv=Phaser.Utils.Objects.GetValue;class ev extends Oy{constructor(t,e){void 0===e&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=tv(e,"eventEmitter",this);var i,r,n,s,o=tv(e,"background",void 0),a=tv(e,"panel",void 0),h=tv(e,"leftButtons",void 0),c=tv(e,"leftButtonsBackground",void 0),l=tv(e,"rightButtons",void 0),u=tv(e,"rightButtonsBackground",void 0),d=tv(e,"topButtons",void 0),f=tv(e,"topButtonsBackground",void 0),p=tv(e,"bottomButtons",void 0),g=tv(e,"bottomButtonsBackground",void 0),y=tv(e,"click",void 0);if(o&&this.addBackground(o),a&&this.add(a,1,1,"center",0,!0),h){var m=tv(e,"space.leftButtonsOffset",0),v=tv(e,"space.leftButton",0);i=new Tm(t,{groupName:"left",background:c,buttons:h,orientation:1,space:{item:v},align:tv(e,"align.leftButtons",void 0),click:y,eventEmitter:this.eventEmitter});var b={top:m};this.add(i,0,1,"top",b,!1)}if(l){var w=tv(e,"space.rightButtonsOffset",0),_=tv(e,"space.rightButton",0);r=new Tm(t,{groupName:"right",background:u,buttons:l,orientation:1,space:{item:_},align:tv(e,"align.rightButtons",void 0),click:y,eventEmitter:this.eventEmitter}),b={top:w},this.add(r,2,1,"top",b,!1)}if(d){var x=tv(e,"space.topButtonsOffset",0),E=tv(e,"space.topButton",0);n=new Tm(t,{groupName:"top",background:f,buttons:d,orientation:0,space:{item:E},align:tv(e,"align.topButtons",void 0),click:y,eventEmitter:this.eventEmitter}),b={left:x},this.add(n,1,0,"left",b,!1)}if(p){var S=tv(e,"space.bottomButtonsOffset",0),T=tv(e,"space.bottomButton",0);s=new Tm(t,{groupName:"bottom",background:g,buttons:p,orientation:0,space:{item:T},align:tv(e,"align.bottomButtons",void 0),click:y,eventEmitter:this.eventEmitter}),b={left:S},this.add(s,1,2,"left",b,!1)}this.addChildrenMap("background",o),this.addChildrenMap("panel",a),this.addChildrenMap("leftButtons",h),this.addChildrenMap("rightButtons",l),this.addChildrenMap("topButtons",d),this.addChildrenMap("bottomButtons",p),this.addChildrenMap("leftButtonsSizer",i),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",n),this.addChildrenMap("bottomButtonsSizer",s)}}Object.assign(ev.prototype,Qm);const iv=ev;n.register("tabs",(function(t){var e=new iv(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Tabs",iv);const rv=Phaser.Math.Percent,nv=function(t,e,i){var r,n,s;return t.y===e.y?(r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),s=rv(i.x,r,n)):t.x===e.x&&(r=Math.min(t.y,e.y),n=Math.max(t.y,e.y),s=rv(i.y,r,n)),s};var sv={};const ov=function(t,e,i){this.enable&&(sv.x=e,sv.y=i,this.value=nv(this.getStartPoint(),this.getEndPoint(),sv))};var av={};const hv=function(t,e,i){if(this.enable&&t.isDown){av.x=t.worldX,av.y=t.worldY;var r=nv(this.getStartPoint(),this.getEndPoint(),av);this.stopEaseValue(),0===this.easeValueDuration||Math.abs(this.value-r)<.1?this.value=r:this.easeValueTo(r)}};var cv={};const lv=function(t,e){void 0===e&&(e=cv);var i=this.childrenMap.thumb,r=i.x,n=i.y;return Nl(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,t),e.x=i.x,e.y=i.y,i.x=r,i.y=n,e},uv=Phaser.Display.Align.LEFT_CENTER,dv=Phaser.Display.Align.TOP_CENTER;var fv={};const pv=Phaser.Display.Align.RIGHT_CENTER,gv=Phaser.Display.Align.BOTTOM_CENTER;var yv={};const mv=Phaser.Math.Linear;var vv={};const bv=Phaser.Display.Align.LEFT_CENTER,wv=Phaser.Display.Align.TOP_CENTER,_v=Phaser.Utils.Objects.GetValue,xv=Phaser.Math.Clamp,Ev=Phaser.Math.Linear,Sv=Phaser.Math.Percent,Tv=Phaser.Math.Snap.To;class Av extends gy{constructor(t,e){super(t,e),this.type="rexSlider",this.eventEmitter=_v(e,"eventEmitter",this);var i=_v(e,"background",void 0),r=_v(e,"track",void 0),n=_v(e,"indicator",void 0),s=_v(e,"thumb",void 0);i&&this.addBackground(i),r&&this.add(r,{proportion:1,expand:!0,minWidth:0,minHeight:0}),n&&this.pin(n),s&&this.pin(s);var o=_v(e,"input",0);switch("string"==typeof o&&(o=Cv[o]),o){case 0:s&&(s.setInteractive(),this.scene.input.setDraggable(s),s.on("drag",ov,this).on("dragstart",(function(t){this.eventEmitter.emit("inputstart",t)}),this).on("dragend",(function(t){this.eventEmitter.emit("inputend",t)}),this));break;case 1:this.setInteractive().on("pointerdown",hv,this).on("pointermove",hv,this).on("pointerdown",(function(t){this.eventEmitter.emit("inputstart",t)}),this).on("pointerup",(function(t){this.eventEmitter.emit("inputend",t)}),this).on("pointerover",(function(t){t.isDown&&this.eventEmitter.emit("inputstart",t)}),this).on("pointerout",(function(t){t.isDown&&this.eventEmitter.emit("inputend",t)}),this)}this.addChildrenMap("background",i),this.addChildrenMap("track",r),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",s);var a=_v(e,"valuechangeCallback",null);if(null!==a){var h=_v(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,h)}this.setEnable(_v(e,"enable",void 0)),this.setGap(_v(e,"gap",void 0)),this.setValue(_v(e,"value",0),_v(e,"min",void 0),_v(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(_v(e,"easeValue.duration",0)).setEaseValueFunction(_v(e,"easeValue.ease","Linear"))}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){void 0!==this.gap&&(t=Tv(t,this.gap));var e=this._value;this._value=xv(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(t,e,i){return null==t||(void 0!==e&&(t=Sv(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=Sv(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Ev(t,e,i)),i}runLayout(t,e,i){return this.ignoreLayout||(super.runLayout(t,e,i),this.updateThumb(),this.updateIndicator()),this}}const Cv={pan:0,drag:0,click:1,none:-1};var kv={getStartPoint:function(t){if(void 0===t&&(t=fv),this.childrenMap.thumb){var e=0===this.orientation?uv:dv;lv.call(this,e,t)}else 0===this.orientation?(t.x=this.innerLeft+1,t.y=this.centerY):(t.x=this.centerX,t.y=this.innerTop+1);return t},getEndPoint:function(t){if(void 0===t&&(t=yv),this.childrenMap.thumb){var e=0===this.orientation?pv:gv;lv.call(this,e,t)}else 0===this.orientation?(t.x=this.innerRight-1,t.y=this.centerY):(t.x=this.centerX,t.y=this.innerBottom-1);return t},updateThumb:function(t){var e=this.childrenMap.thumb;return void 0===e||(void 0===t&&(t=this.value),function(t,e,i,r){void 0===r&&(r=vv),r.x=mv(e.x,i.x,t),r.y=mv(e.y,i.y,t)}(t,this.getStartPoint(),this.getEndPoint(),e),this.resetChildPositionState(e)),this},updateIndicator:function(t){var e,i,r=this.childrenMap.indicator;if(void 0===r)return this;void 0===t&&(t=this.value);var n=this.childrenMap.thumb;if(n)if(0===this.orientation){var s=_l(n);e=n.x-s*n.originX+s-this.left}else{var o=xl(n);i=n.y-o*n.originY+o-this.top}else 0===this.orientation?e=this.width*t:i=this.height*t;fd(r,e,i);var a=0===this.orientation?bv:wv;Ll(r,this,a),this.resetChildPositionState(r)}};Object.assign(Av.prototype,kv,wc);const Rv=Av;n.register("slider",(function(t){var e=new Rv(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Slider",Rv);const Pv={v:0,vertical:0,h:1,horizontal:1},Iv=Phaser.Utils.Objects.GetValue,Ov=function(t,e){var i=Iv(t,"scrollMode",0);return"string"==typeof i&&(i=Pv[i]),i},Mv=Phaser.Utils.Objects.GetValue,Dv=class extends gy{constructor(t,e){super(t,e),this.type="rexScrollBar";var i,r,n=Mv(e,"background",void 0),s=Mv(e,"buttons",void 0),o=Mv(s,"top",Mv(s,"left",void 0)),a=Mv(s,"bottom",Mv(s,"right",void 0)),h=Mv(e,"slider",void 0);(n&&this.addBackground(n),o&&(this.add(o),new Cd(o).on("intouch",(function(){this.enable&&(this.value-=this.scrollStep)}),this)),h)&&(h.orientation=this.orientation,h.eventEmitter=this,h.value=null,r=0===this.orientation?void 0===Mv(h,"width",void 0)?1:0:void 0===Mv(h,"height",void 0)?1:0,i=new Rv(t,h),t.add.existing(i),this.add(i,{proportion:r}));a&&(this.add(a),new Cd(a).on("intouch",(function(){this.enable&&(this.value+=this.scrollStep)}),this));var c=[o,a];this.addChildrenMap("background",n),this.addChildrenMap("slider",i),this.addChildrenMap("buttons",c);var l=Mv(e,"valuechangeCallback",null);if(null!==l){var u=Mv(e,"valuechangeCallbackScope",void 0);this.on("valuechange",l,u)}this.setEnable(Mv(e,"enable",void 0)),this.setValue(Mv(e,"value",0)),this.setScrollStep(Mv(s,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,i),this}addValue(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,i),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,i),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}},Bv=class extends Dv{constructor(t,e){void 0===e&&(e={});var i=ke(e);(e={slider:i}).orientation=i.orientation,delete i.orientation,e.background=i.background,delete i.background,e.buttons=i.buttons,delete i.buttons,super(t,e);var r=this.childrenMap.slider;this.addChildrenMap("track",r.childrenMap.track),this.addChildrenMap("indicator",r.childrenMap.indicator),this.addChildrenMap("thumb",r.childrenMap.thumb)}},Lv=class extends Fd{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent;return e.dragState.isDown&&(t=0===e.dragThreshold?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t=this.parent,e=t.dragState;return e.isDown?e.pointer.getDistance()>=t.dragThreshold?"DRAG":"DRAGBEGIN":"IDLE"}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent;return e.dragState.isUp&&(t=e.outOfBounds?"BACK":e.slidingEnable?"SLIDE":"IDLE"),t}update_DRAG(t,e){var i=this.parent;i.dragState.justMoved&&i.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,e=this.parent;return e.dragState.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent;return e.dragState.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}},Nv=Phaser.Utils.Objects.GetValue,Uv=Phaser.Math.Distance.Between,Fv=class extends xh{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Nv(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Nv(t,"enable",!0)),this.holdThreshold=Nv(t,"holdThreshold",50),this.pointerOutReleaseEnable=Nv(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return void 0===t&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return this.scene.sys.game.loop.delta}get speed(){return this.x===this.preX&&this.y===this.preY?0:Uv(this.preX,this.preY,this.x,this.y)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(t,e,i){this.enable&&t.isDown&&void 0===this.pointer&&(this.pointer=t,this.localX=e,this.localY=i)}onPointOut(t){this.enable&&this.pointer===t&&(this.pointer=void 0)}onPointerMove(t,e,i){this.enable&&t.isDown&&this.pointer===t&&(this.localX=e,this.localY=i)}preupdate(t,e){if(this.enable){var i=this.pointer;this.justMoved=!1,i&&!this.isInTouched?(this.x=i.worldX,this.y=i.worldY,this.preX=i.worldX,this.preY=i.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",i,this.localX,this.localY)):i&&this.isInTouched?this.x===i.x&&this.y===i.y?void 0===this.holdStartTime?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=i.worldX,this.y=i.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",i,this.localX,this.localY)):!i&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",i))}}},zv=Phaser.Utils.Objects.GetValue,jv=Phaser.Utils.Objects.GetValue,Vv=Phaser.Math.Clamp,Gv={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Hv=class extends xh{constructor(t,e){super(t,e);var i=jv(e,"enable",!0);this._state=new Lv(this,{enable:i,eventEmitter:!1});var r={inputConfig:jv(e,"inputConfig",void 0),enable:i,pointerOutRelease:jv(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new Fv(t,r),this._enable=void 0,this._value=void 0,this._slowDown=new class{constructor(){this.value,this.dir,this.movement=new class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(zv(t,"value",0)),this.setSpeed(zv(t,"speed",0)),this.setAcceleration(zv(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return 0!==this.acceleration&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}}init(t,e,i,r,n){return this.value=t,this.end=n,this.dir=void 0!==n?t<n:e,this.movement.setSpeed(i).setAcceleration(-r),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),void 0===this.end?this.value+=e:0===e?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}};var n=jv(e,"valuechangeCallback",null);if(null!==n){var s=jv(e,"valuechangeCallbackScope",void 0);this.on("valuechange",n,s)}null!==(n=jv(e,"overmaxCallback",null))&&(s=jv(e,"overmaxCallbackScope",void 0),this.on("overmax",n,s)),null!==(n=jv(e,"overminCallback",null))&&(s=jv(e,"overminCallbackScope",void 0),this.on("overmin",n,s)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(jv(t,"orientation",0)),this.setDragThreshold(jv(t,"threshold",10)),this.setSlidingDeceleration(jv(t,"slidingDeceleration",5e3)),this.setBackDeceleration(jv(t,"backDeceleration",2e3));var e=jv(t,"bounds",void 0);return e?this.setBounds(e):this.setBounds(jv(t,"max",0),jv(t,"min",0)),this.setValue(jv(t,"value",this.maxValue||0)),this.setEnable(jv(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return"string"==typeof t&&(t=Gv[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,e){if(Array.isArray(t)){var i=t;t=i[0],e=i[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,i=this.overMax(t),r=this.overMin(t);i&&this.emit("overmax",t,e),r&&this.emit("overmin",t,e),this.backEnable||(i&&(t=this.maxValue),r&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return void 0===e&&(e=!1),e&&(t=Vv(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return null!=this.maxValue&&t>this.maxValue}overMin(t){return null!=this.minValue&&t<this.minValue}get backEnable(){return"number"==typeof this.backDeceleration}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return"number"==typeof this.slidingDeceleration}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return 0===this.orientationMode?this.dragState.dy:1===this.orientationMode?this.dragState.dx:0}get dragSpeed(){return 0===this.orientationMode?this.dragState.speedY:1===this.orientationMode?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(0===e)return this._slowDown.stop(),void this._state.next();var i=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),i)}sliding(t,e){e*=.001;var i=this._slowDown.update(e).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(e-t),r=this.backDeceleration,n=Math.sqrt(2*r*i);this._slowDown.init(t,void 0,n,r,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}},Yv=Phaser.Utils.Objects.GetValue,Kv=class extends xh{constructor(t,e){super(t,e),this.parent!==this.scene?this.focusMode=Yv(e,"focus",!1):this.focusMode=!1,this.setSpeed(Yv(e,"speed",.1)),this.setEnable(Yv(e,"enable",!0)),this.focusMode?(t=this.parent).setInteractive(Yv(e,"inputConfig",void 0)).on("wheel",(function(t,e,i,r,n){this.enable&&this.scroll(i)}),this):this.scene.input.on("wheel",this.onSceneScroll,this)}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,i,r,n,s){this.enable&&this.scroll(r)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}},Wv=Phaser.Utils.Objects.GetValue;var Xv={right:0,left:1,bottom:0,top:1};gy.prototype.runLayout;var qv=function(){var t=Math.min(this.childVisibleHeight/this.childHeight,1),e=this.childrenMap.slider,i=e.childrenMap.track,r=e.childrenMap.thumb,n=this.minThumbSize;if(0===this.scrollMode){var s=i.displayHeight*t;void 0!==n&&s<n&&(s=n),fd(r,void 0,s)}else{var o=i.displayWidth*t;void 0!==n&&o<n&&(o=n),fd(r,o,void 0)}$v.call(this)},$v=function(){var t=this.childrenMap.slider,e=t.minWidth,i=t.minHeight;t.minWidth=t.width,t.minHeight=t.height,t.layout(),t.minWidth=e,t.minHeight=i};const Jv=Phaser.Utils.Objects.GetValue,Zv=Phaser.Math.Clamp;class Qv extends gy{constructor(t,e){void 0===e&&(e={});var i=Ov(e);e.orientation=0===i?1:0,super(t,e),this.type=Jv(e,"type","rexScrollable");var r=Jv(e,"background",void 0),n=function(t,e){var i,r=t.scene,n=Ov(e),s=new gy(r,{orientation:n}),o=Wv(e,"child.gameObject",void 0),a=Wv(e,"slider",void 0),h=Wv(a,"position",0);"string"==typeof h&&(h=Xv[h]);var c,l,u=0===h,d=Wv(e,"scroller",!0),f=Wv(e,"mouseWheelScroller",!1);if(o){var p=Wv(e,"space.child",0),g={};if(t.childMargin={},"number"!=typeof p){var y=p;0===n?(g.left=Wv(y,"left",0),g.right=Wv(y,"right",0),t.childMargin.top=Wv(y,"top",0),t.childMargin.bottom=Wv(y,"bottom",0)):(g.top=Wv(y,"top",0),g.bottom=Wv(y,"bottom",0),t.childMargin.top=Wv(y,"left",0),t.childMargin.bottom=Wv(y,"right",0))}else a&&(g=0===n?u?{right:p}:{left:p}:u?{bottom:p}:{top:p}),t.childMargin.top=0,t.childMargin.bottom=0;a?(!0===a&&(a={}),a.orientation=0===s.orientation?1:0,i=new Bv(r,a),t.adaptThumbSizeMode=Wv(a,"adaptThumbSize",!1),t.minThumbSize=Wv(a,"minThumbSize",void 0)):(t.adaptThumbSizeMode=!1,t.minThumbSize=void 0),d&&(!0===d&&(d={}),d.orientation=n,c=new Hv(o,d)),f&&(l=new Kv(o,f)),i&&!u&&s.add(i,{proportion:0,align:"center",expand:!0});var m=Wv(e,"child.proportion",1),v=Wv(e,"child.expand",!0);s.add(o,{proportion:m,align:"center",padding:g,expand:v}),i&&u&&s.add(i,{proportion:0,align:"center",expand:!0})}return i&&i.on("valuechange",(function(e){t.t=e,t.emit("scroll",t)})),c&&c.on("valuechange",(function(e){t.childOY=e,t.emit("scroll",t)})),l&&l.on("scroll",(function(e){t.addChildOY(-e,!0)})),t.addChildrenMap("child",o),t.addChildrenMap("slider",i),t.addChildrenMap("scroller",c),t.addChildrenMap("mouseWheelScroller",l),s}(this,e),s=Jv(e,"header",void 0),o=Jv(e,"footer",void 0);if(r&&this.addBackground(r),s){var a=Jv(e,"align.header","center"),h=Jv(e,"space.header",0);l=0===i?{bottom:h}:{right:h};var c=Jv(e,"expand.header",!0);this.add(s,{proportion:0,align:a,padding:l,expand:c})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),o){a=Jv(e,"align.footer","center");var l,u=Jv(e,"space.footer",0);l=0===i?{top:u}:{left:u},c=Jv(e,"expand.footer",!0),this.add(o,{proportion:0,align:a,padding:l,expand:c})}this.addChildrenMap("background",r),this.addChildrenMap("header",s),this.addChildrenMap("footer",o),this.runLayoutFlag=!1}runLayout(t,e,i){return this.ignoreLayout||(super.runLayout(t,e,i),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0))),this}set t(t){var e=this.childMargin;if(0!==e.top||0!==e.bottom){var i=this.childrenMap.child,r=i.topChildOY-i.bottomChildOY;t=((r+e.top+e.bottom)*t-e.top)/r}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(0!==e.top||0!==e.bottom){var i=this.childrenMap.child,r=i.topChildOY-i.bottomChildOY,n=r+e.top+e.bottom;t=(r*t+e.top)/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return 0===this.orientation?1:0}setChildOY(t,e){return void 0===e&&(e=!1),e&&(t=Zv(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return void 0===e&&(e=!1),e&&(t=Zv(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return!!t&&t.enable}set sliderEnable(t){var e=this.childrenMap.slider;e&&e.setEnable(t)}setSliderEnable(t){return void 0===t&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return!!t&&t.enable}set scrollerEnable(t){var e=this.childrenMap.scroller;e&&e.setEnable(t)}setScrollerEnable(t){return void 0===t&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return!!t&&t.enable}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;e&&e.setEnable(t)}setMouseWheelScrollerEnable(t){return void 0===t&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){void 0===t&&(t=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=t,this}}var tb={resizeController:function(){var t=this.topChildOY,e=this.bottomChildOY,i=this.childrenMap.scroller,r=this.childrenMap.slider;return i&&i.setBounds(e,t),r&&r.setEnable(e!==t),this.updateController(),this.adaptThumbSizeMode&&qv.call(this),this},updateController:function(){var t=this.childrenMap.scroller,e=this.childrenMap.slider;t&&t.setValue(this.childOY),e&&e.setValue(this.t)}};Object.assign(Qv.prototype,tb);const eb=Qv;class ib{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){void 0===t&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){null==t&&(t=0);var e=this.parent;0===this._deltaHeight&&0!==t?e.nonZeroDeltaHeightCount++:0!==this._deltaHeight&&0===t&&e.nonZeroDeltaHeightCount--;var i=this._deltaHeight!==t;if(this._deltaHeight=t,i){e.resetTotalRowsHeight();var r=0===this.scrollMode?"cellheightchange":"cellwidthchange";this.parentContainer.emit(r,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return 0===this.scrollMode?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){1!==this.scrollMode&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return 0===this.scrollMode?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){0!==this.scrollMode&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(ib.prototype,J);const rb=ib,nb=Phaser.Utils.Objects.GetValue,sb=Phaser.Utils.Array.SpliceOne,ob=function(t){return t.hasOwnProperty("geometryMask")?t.geometryMask:t.bitmapMask},ab=Phaser.Geom.Intersects.RectangleToRectangle,hb=Phaser.Geom.Rectangle.Overlaps;var cb=function(t){for(;;){var e=t.rexContainer;if(e){if(e.visible){var i=e.parent;if(i){t=i;continue}return!0}return!1}return t.visible}},lb=function(t,e,i){t.setChildMaskVisible(e,!0),e.clearMask&&e.clearMask()},ub=function(t,e,i){t.setChildMaskVisible(e,!0),e.setMask&&e.setMask(i)},db=function(t,e,i){t.setChildMaskVisible(e,!1),e.clearMask&&e.clearMask()};const fb=Phaser.Utils.Objects.GetValue,pb={update:0,everyTick:1},gb={setupChildrenMask(t){return!1===t||(this.setMaskUpdateMode(fb(t,"updateMode",0)),this.enableChildrenMask(fb(t,"padding",0)),this.setMaskLayer(fb(t,"layer",void 0)),this.startMaskUpdate()),this},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(t){return"string"==typeof t&&(t=pb[t]),this.maskUpdateMode=t,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(t){var e=em.call(this,null,this,0,t);return this.childrenMask=e.createGeometryMask(),this},setMaskChildrenFlag(t){return void 0===t&&(t=!0),this.maskChildrenFlag=t,this},setMaskLayer(t){return this.maskLayer=t,this},maskChildren(){return this.childrenMask&&this.maskChildrenFlag&&0!==this.alpha&&this.visible?(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):function(t,e,i){if(e){void 0===i&&(i=t.getAllChildren());for(var r,n,s=t.getBounds(),o=ob(e),a=0,h=i.length;a<h;a++)if(!(r=i[a]).hasOwnProperty("isRexContainerLite")&&r!==o&&cb(r))if(r.getBounds)switch(n=r.getBounds(n),c=s,l=n,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,u=0,d=l.top,f=l.bottom,p=l.left,g=l.right,u+=c.contains(p,d)?1:0,u+=c.contains(p,f)?1:0,(u+=c.contains(g,d)?1:0)+(c.contains(g,f)?1:0)){case 4:lb(t,r);break;case 0:ab(s,n)||hb(s,n)?ub(t,r,e):db(t,r);break;default:ub(t,r,e)}else ub(t,r,e)}var c,l,u,d,f,p,g}(this,this.childrenMask,this.getAllChildren(),this.maskLayer),0===this.maskUpdateMode&&(this.maskChildrenFlag=!1),this):this},layoutChildrenMask(){if(!this.childrenMask)return this;var t=ob(this.childrenMask);return t.setPosition().resize(),this.resetChildPositionState(t),this}},yb=function(t){if(this.emit("cellinvisible",t),this.cellContainersPool){var e=t.popContainer();e&&this.cellContainersPool.killAndHide(e)}t.destroyContainer()},mb=function(){var t=this.preVisibleCells,e=this.visibleCells;t.iterate((function(t){e.contains(t)||yb.call(this,t)}),this)},vb=function(t){var e,i=null;(e=t.getContainer())?(i=e,t.popContainer()):this.cellContainersPool&&null!==(i=this.cellContainersPool.getFirstDead())&&i.setActive(!0).setVisible(!0),this.emit("cellvisible",t,i,this),this.cellContainersPool&&((e=t.getContainer())?null===i?this.cellContainersPool.add(e):i!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(i)):null!==i&&this.cellContainersPool.killAndHide(i))};var bb=function(t){var e=0===this.scrollMode?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,t-1)+e},wb=function(t){var e=0===this.scrollMode?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,t-1)+e};const _b=function(){if(0!==this.cellsCount){var t=this.table,e=t.heightToRowIndex(-this.tableOY);e<=0&&(e=0);var i=e,r=t.widthToColIndex(-this.tableOX);r<=0&&(r=0);for(var n=r,s=t.colRowToCellIndex(n,i),o=this.bottomBound,a=this.rightBound,h=t.cellsCount-1,c=t.colCount-1,l=bb.call(this,n),u=l,d=wb.call(this,i);d<o&&s<=h;){if(this.table.isValidCellIdx(s)){var f=t.getCell(s,!0);this.visibleCells.set(f),this.preVisibleCells.contains(f)||vb.call(this,f),0===this.scrollMode?f.setXY(u,d):f.setXY(d,u)}u<a&&n<c?(u+=t.getColWidth(n),n+=1):(u=l,d+=t.getRowHeight(i),n=r,i+=1),s=t.colRowToCellIndex(n,i)}}};var xb=function(){var t=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=t,this.visibleCells.clear()};var Eb=function(t,e){e-=this.y+this.topLeftY,t-=this.x+this.topLeftX;var i=this.tableOY-(0===this.scrollMode?e:t),r=this.tableOX-(0===this.scrollMode?t:e),n=this.table,s=n.heightToRowIndex(-i),o=n.widthToColIndex(-r),a=n.colRowToCellIndex(o,s);return null===a?null:this.isCellVisible(a)?a:null};const Sb=Phaser.Math.Clamp;var Tb={setTableOY:function(t){var e=this.table,i=this.topTableOY,r=this.bottomTableOY,n=t>this.topTableOY,s=t<this.bottomTableOY;return this.clampTableOXY&&(e.rowCount<e.heightToRowIndex(this.instHeight,!0)?t=0:n?t=i:s&&(t=r)),this._tableOY!==t&&(this._tableOY=t),n&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=n,s&&(this.execeedBottomState||this.emit("execeedbottom",this,t,r)),this.execeedBottomState=s,this},setTableOX:function(t){var e=this.table,i=this.leftTableOX,r=this.rightTableOX,n=t>this.leftTableOX,s=t<this.rightTableOX;return this.clampTableOXY&&(e.colCount<e.widthToColIndex(this.instWidth,!0)?t=0:n?t=i:s&&(t=r)),this._tableOX!==t&&(this._tableOX=t),n&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=n,s&&(this.execeedRightState||this.emit("execeedright",this,t,r)),this.execeedRightState=s,this},updateTable:function(t){return void 0===t&&(t=!1),t&&(xb.call(this),mb.call(this)),xb.call(this),_b.call(this),mb.call(this),this.setMaskChildrenFlag(),this},isCellVisible:function(t){var e=this.table.getCell(t,!1);return e&&this.visibleCells.contains(e)},pointToCellIndex:Eb,pointToCellContainer:function(t,e){var i=Eb.call(this,t,e);if(null!==i)return this.getCellContainer(i)},eachVisibleCell:function(t,e){return this.visibleCells.each(t,e),this},iterateVisibleCell:function(t,e){return this.visibleCells.iterate(t,e),this},eachCell:function(t,e){return this.table.cells.slice().forEach(t,e),this},iterateCell:function(t,e){return this.table.cells.forEach(t,e),this},setCellsCount:function(t){var e=this.cellsCount;return e===t||(e>t?this.removeCells(t,e-t):this.insertNewCells(e,t-e)),this},insertNewCells:function(t,e){return"object"==typeof t&&(t=t.index),void 0===e&&(e=1),e<=0||(t=Sb(t,0,this.cellsCount),this.table.insertNewCells(t,e)),this},removeCells:function(t,e){if("object"==typeof t&&(t=t.index),void 0===e&&(e=1),t<0&&(e+=t,t=0),e<=0)return this;if(t>this.cellsCount)return this;for(var i,r=t,n=t+e;r<n;r++)(i=this.getCell(r,!1))&&(this.visibleCells.contains(i)&&(yb.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(t,e),this},setColumnCount:function(t){return this.table.colCount===t||this.table.setColumnCount(t),this},setGridSize:function(t,e){return this.setCellsCount(t*e),this.table.setColumnCount(t),this},updateVisibleCell:function(t){var e=this.table.getCell(t,!1);return e&&e.container?(vb.call(this,e),this):this}};Object.assign(Tb,gb);const Ab=Tb,Cb=Phaser.GameObjects.Group,kb=Phaser.Structs.Set,Rb=Phaser.Utils.Objects.GetValue;class Pb extends gs{constructor(t,e,i,r,n,s){void 0===s&&(s={}),super(t,e,i,r,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new kb,this.preVisibleCells=new kb,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,Rb(s,"reuseCellContainer",!1)&&(this.cellContainersPool=new Cb(t));var o=Rb(s,"cellVisibleCallback",null);if(null!==o){var a=Rb(s,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,a)}if(null!==(o=Rb(s,"cellInvisibleCallback",null))&&(a=Rb(s,"cellInvisibleCallbackScope",void 0),this.on("cellinvisible",o,a)),this.setupChildrenMask(Rb(s,"mask",void 0)),this.setScrollMode(Rb(s,"scrollMode",0)),this.setClampMode(Rb(s,"clamplTableOXY",!0)),0===this.scrollMode){var h=Rb(s,"cellWidth",void 0);if(this.expandCellSize=void 0===h,void 0===h){var c=Rb(s,"columns",1);s.cellWidth=this.width/c}}else{h=Rb(s,"cellHeight",void 0);var l=Rb(s,"cellWidth",void 0);this.expandCellSize=void 0===h,s.cellWidth=h,s.cellHeight=l}this.table=new class{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new B,this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(nb(t,"cellHeight",30)),this.setDefaultCellWidth(nb(t,"cellWidth",30)),this.initCells(nb(t,"cellsCount",0)),this.setColumnCount(nb(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return 0===this.nonZeroDeltaHeightCount}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var i=0;i<t;i++)e[i]=null;return this}insertNewCells(t,e){var i=this.cells;if(t===i.length){var r=t+e;i.legth=r;for(var n=t;n<r;n++)i[n]=null}else{var s=[];for(s.length=e,n=0;n<e;n++)s[n]=null;this.cells.splice(t,0,...s)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var i=t+e,r=t;r<i;r++)this.freeCell(r);return i===this.cells.length?this.cells.length=t:(1===e?sb(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var i=t/this.defaultCellHeight;return e?Math.ceil(i):Math.floor(i)}var r,n=this.rowCount,s=t;for(i=0;;){if(r=i>=0&&i<n,!((s-=this.getRowHeight(i))>0&&r)){if(0===s)return i;if(e){var o=i;(r=(i+=1)>=0&&i<n)||(i=o)}return i}i+=1}}widthToColIndex(t,e){var i=t/this.defaultCellWidth;return e?Math.ceil(i):Math.floor(i)}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var i=0,r=t;r<=e;r++)i+=this.getRowHeight(r);return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var i,r=0,n=0;n<e;n++)r<(i=this.getCellHeight(this.colRowToCellIndex(n,t)))&&(r=i);return r}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var i=this.getCell(t,!1),r=i?i.deltaHeight:0;e=this.defaultCellHeight+r}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return null===this._totalRowsHeight&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(void 0===e&&(e=!0),null===this.cells[t]&&e){var i=this.newCell(t);this.cells[t]=i}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return null===e?e=new rb(this):e.setParent(this),e.index=t,e}buildCellIndex(t){void 0===t&&(t=0);for(var e,i=this.cells,r=t,n=i.length;r<n;r++)(e=i[r])&&(e.index=r);return this}getParentContainer(){return this.parent}freeCell(t){return"number"==typeof t&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}(this,s),this.updateTable()}destroy(t){this.scene&&(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return"string"==typeof t&&(t=Ib[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return void 0===t&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return 0===t?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e,i=this.table.getCell(t,!1);return i&&(e=i.getContainer()),e}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){return("number"==typeof t?this.table.getCell(t,!0):t).height=e,this}setCellWidth(t,e){return("number"==typeof t?this.table.getCell(t,!0):t).width=e,this}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth,e=this.instWidth;return t>e?t-e:0}get bottomLeftY(){return-this.displayHeight*this.originY+this.displayHeight}get topRightX(){return-this.displayWidth*this.originX+this.displayWidth}get topLeftX(){return-this.displayWidth*this.originX}get topLeftY(){return-this.displayHeight*this.originY}get bottomBound(){return 0===this.scrollMode?this.bottomLeftY:this.topRightX}get rightBound(){return 0===this.scrollMode?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e||(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren()),this}}Object.assign(Pb.prototype,Ab);const Ib={v:0,vertical:0,h:1,horizontal:1},Ob=Pb,Mb=function(t){t.on("cellvisible",(function(t,e,i){var r=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index],(e=n?r.call(n,t,e,i):r(t,e,i))&&(e.setOrigin&&e.setOrigin(0),e.isRexSizer&&e.layout()),t.item=void 0,t.setContainer(e)}),this)},Db=function(t,e,i,r,n,s,o){var a;if(null!=(a=void 0===n?r:i.pointToCellIndex(r,n))){var h=i.getCellContainer(a);h&&t.emit(e,h,a,s,o)}},Bb=function(t,e){t.on("pointerdown",(function(e,i,r,n){Db(this.eventEmitter,"cell.down",t,e.x,e.y,e,n)}),this).on("pointerup",(function(e,i,r,n){Db(this.eventEmitter,"cell.up",t,e.x,e.y,e,n)}),this)};var Lb=function(t,e,i,r){var n=this.childrenMap.child,s=n.pointToCellIndex(t.x,t.y);if(s!==n.input.lastOverCellIndex){var o=n.input.lastOverCellIndex;n.input.lastOverCellIndex=s,Db(this.eventEmitter,"cell.out",n,o,void 0,t,r),Db(this.eventEmitter,"cell.over",n,s,void 0,t,r)}},Nb=function(t,e){var i=this.childrenMap.child,r=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Db(this.eventEmitter,"cell.out",i,r,void 0,t,e)};const Ub=function(t,e){t.on("pointermove",Lb,this).on("pointerover",Lb,this).on("pointerout",Nb,this)},Fb=Phaser.Utils.Objects.GetValue,zb=function(t,e){var i=Fb(e,"click",void 0);!1!==i&&(void 0===i&&(i={}),i.threshold=10,t._click=new wd(t,i),t._click.on("click",(function(t,e,i,r){Db(this.eventEmitter,"cell.click",e,i.x,i.y,i,r)}),this))},jb=Phaser.Utils.Objects.GetValue,Vb=function(t,e){var i=jb(e,"tap",void 0);!1!==i&&(t._tap=new jf(t,i),t._tap.on("tap",(function(t,e,i){var r=`cell.${t.tapsCount}tap`;Db(this.eventEmitter,r,t.gameObject,t.x,t.y,i)}),this))},Gb=Phaser.Utils.Objects.GetValue,Hb=function(t,e){var i=Gb(e,"press",void 0);!1!==i&&(t._press=new Hf(t,i),t._press.on("pressstart",(function(e,i,r){Db(this.eventEmitter,"cell.pressstart",t,e.x,e.y,r)}),this).on("pressend",(function(e,i,r){Db(this.eventEmitter,"cell.pressend",t,e.x,e.y,r)}),this))},Yb=Phaser.Utils.Objects.GetValue,Kb=function(t,e){var i=Yb(e,"swipe",void 0);!1!==i&&(void 0===i&&(i={}),i.dir="4dir",t._swipe=new Wf(t,i),t._swipe.on("swipe",(function(e,i,r){var n=e.left?"left":e.right?"right":e.up?"up":"down";Db(this.eventEmitter,`cell.swipe${n}`,t,e.x,e.y,r)}),this))},Wb=function(t,e){t.setInteractive(),Bb.call(this,t,e),Ub.call(this,t,e),zb.call(this,t,e),Vb.call(this,t,e),Hb.call(this,t,e),Kb.call(this,t,e)},Xb=Phaser.Utils.Objects.GetValue;class qb extends eb{constructor(t,e){void 0===e&&(e={});var i=Ov(e),r=Xb(e,"table",void 0);void 0===r&&(r={}),r.scrollMode=i,r.clamplTableOXY=Xb(e,"clamplChildOY",!1);var n,s,o=Xb(r,"width",void 0),a=Xb(r,"height",void 0),h=new Ob(t,0,0,o,a,r);t.add.existing(h),0===i?(n=void 0===o?1:0,s=void 0===a):(n=void 0===a?1:0,s=void 0===o),function(t){Object.defineProperty(t,"childOY",{configurable:!0,get:function(){return t.tableOY},set:function(e){t.tableOY=e}}),Object.defineProperty(t,"topChildOY",{get:function(){return t.topTableOY}}),Object.defineProperty(t,"bottomChildOY",{get:function(){return t.bottomTableOY}}),Object.defineProperty(t,"childVisibleHeight",{get:function(){return t.instHeight}}),Object.defineProperty(t,"childHeight",{get:function(){return t.tableHeight}})}(h),e.type="rexGridTable",e.child={gameObject:h,proportion:n,expand:s};var c=Xb(e,"space",void 0);c&&(c.child=c.table),super(t,e),this.addChildrenMap("table",h),this.addChildrenMap("tableLayer",h.maskLayer),this.eventEmitter=Xb(e,"eventEmitter",this);var l=Xb(e,"createCellContainerCallback",f),u=Xb(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(l,u),Mb.call(this,h),this.resizeControllerFlag=!1;var d=0===i?"cellheightchange":"cellwidthchange";h.on(d,(function(){this.resizeControllerFlag=!0}),this),Xb(r,"interactive",!0)&&Wb.call(this,h,r),this.setItems(Xb(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){this.scene&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){return this.childrenMap.child.getCell(t)}getCellContainer(t){return this.childrenMap.child.getCellContainer(t)}updateVisibleCell(t){return this.childrenMap.child.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var $b={setItems:function(t){void 0===t?this.items.length=0:this.items=t;var e=this.childrenMap.child;return e.setCellsCount(this.items.length),e.updateTable(!0),this.resizeController(),this}};Object.assign(qb.prototype,$b);const Jb=qb;n.register("gridTable",(function(t){var e=new Jb(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.GridTable",Jb);const Zb=function(t,e){return t.sameOrientation?t.orientation=e.orientation:t.orientation=0===e.orientation?1:0,t},Qb={expandSubMenu:function(t,e){var i;this.collapseSubMenu(),i=this.root.toggleOrientation?0===this.orientation?1:0:this.orientation;var r=new this.constructor(this.scene,{items:e,orientation:i,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:t});return this.pin(r),this.childrenMap.subMenu=r,this.root.emit("expand",r,t,this),this},collapse:function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(Zb(this.root.easeOut,this)),this.collapseSubMenu(),this},collapseSubMenu:function(){if(void 0===this.childrenMap.subMenu)return this;var t=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(t),t.collapse(),this}},tw=Phaser.Utils.Objects.GetValue;class ew extends Tm{constructor(t,e){void 0===e&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var i=e._rootMenu,r=e._parentMenu,n=e._parentButton,s=tw(e,"items",void 0),o=tw(e,"createBackgroundCallback",void 0),a=tw(e,"createBackgroundCallbackScope",void 0);e.background=function(t,e,i,r){var n;return i&&(e.scene=t,n=r?i.call(r,e):i(e),e.scene=void 0),n}(t,s,o,a);var h=tw(e,"createButtonCallback",void 0),c=tw(e,"createButtonCallbackScope",void 0);e.buttons=function(t,e,i,r){var n,s,o=[];if(e&&i)for(var a=0,h=e.length;a<h;a++)(n=e[a]).scene=t,s=r?i.call(r,n,a,e):i(n,a,e),n.scene=void 0,o.push(s);return o}(t,s,h,c),super(t,e),this.type="rexMenu",this.items=s,this.root=void 0===i?this:i,this.parentMenu=r,this.parentButton=n;var l=this.root===this;if(l){var u=e.bounds;void 0===u&&(u=hl(t)),this.bounds=u,this.subMenuSide=[this.y<u.centerY?ow:sw,this.x<u.centerX?nw:rw],void 0!==(m=tw(e,"subMenuSide",void 0))&&("string"==typeof m&&(m=aw[m]),this.subMenuSide[this.orientation]=m),this.toggleOrientation=tw(e,"toggleOrientation",!1),this.expandEventName=tw(e,"expandEvent","button.click"),this.easeIn=iw(this,tw(e,"easeIn",0)),this.easeOut=iw(this,tw(e,"easeOut",0)),this.createBackgroundCallback=o,this.createBackgroundCallbackScope=a,this.createButtonCallback=h,this.createButtonCallbackScope=c,this._isPassedEvent=!1}var d,f=0,p=0;if(!this.root.easeIn.sameOrientation){var g=Zb(this.root.easeIn,this).orientation,y=r?r.orientation:this.orientation,m=this.root.subMenuSide[y];0===g&&m===rw&&(f=1),1===g&&m===sw&&(p=1)}if(this.setOrigin(f,p).layout(),!l)switch(this.setScale(this.root.scaleX,this.root.scaleY),m=this.root.subMenuSide[r.orientation]){case rw:this.alignTop(n.top).alignRight(n.left);break;case nw:this.alignTop(n.top).alignLeft(n.right);break;case sw:this.alignLeft(n.left).alignBottom(n.top);break;case ow:this.alignLeft(n.left).alignTop(n.bottom)}this.pushIntoBounds(this.root.bounds),(d=this).on(d.root.expandEventName,(function(t,e){if(!this._isPassedEvent){var i=this.items[e].children;i&&this.expandSubMenu(t,i)}}),d).on("button.click",(function(t,e,i,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,i,r),this.root._isPassedEvent=!1)}),d).on("button.over",(function(t,e,i,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,i,r),this.root._isPassedEvent=!1)}),d).on("button.out",(function(t,e,i,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,i,r),this.root._isPassedEvent=!1)}),d),this.popUp(Zb(this.root.easeIn,this)),this.once("popup.complete",(function(){this!==this.root&&this.root.emit("popup.complete",this)}),this)}isInTouching(t){return!!super.isInTouching(t)||!!this.childrenMap.subMenu&&this.childrenMap.subMenu.isInTouching(t)}}var iw=function(t,e){return"number"==typeof e&&(e={duration:e}),e.hasOwnProperty("orientation")&&void 0!==e.orientation?e.sameOrientation=uy(e.orientation)===t.orientation:e.sameOrientation=!0,e};const rw=2,nw=0,sw=3,ow=1,aw={up:sw,down:ow,left:rw,right:nw};Object.assign(ew.prototype,Qb);const hw=ew;n.register("menu",(function(t){var e=new hw(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Menu",hw);const cw=Phaser.GameObjects.Text,lw=function(t){return t instanceof cw},uw=Phaser.GameObjects.BitmapText,dw=function(t){return t instanceof uw},fw=function(t){return dw(t)?2:lw(t)?0:1},pw=function(t,e,i){switch(fw(t)){case 0:i=t.getWrappedText(e);break;case 1:i=t.getPenManager(e,i);break;case 2:i=t.maxWidth>0?t.setText(e).getTextBounds().wrappedText.split("\n"):e.split("\n")}return i};var gw=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const yw={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(t){var e=this.totalLinesCount;this.sections.push(gw(t)),t=this.sections.join("\n"),this.lines=pw(this.parent,t,this.lines);for(var i=this.totalLinesCount-e,r=Math.ceil(i/this.pageLinesCount),n=0;n<r;n++)this.pageStartIndexes.push(e+n*this.pageLinesCount);return this},setText(t,e){void 0===e&&(e=!0),e&&this.resetPageIdx(),this.clearText();for(var i=gw(t).split(this.pageBreak),r=0,n=i.length;r<n;r++)this.appendPage(i[r]);return this},appendText(t){var e=this.content+gw(t);return this.setText(e,!1),this}},mw=Phaser.Math.Clamp,vw={getPage(t){return void 0===t&&(t=this.pageIndex),this.setPageIndex(t).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(t){return t=mw(t,0,this.pageCount-1),this.pageIndex=t,this.startLineIndex=this.pageStartIndexes[t],this.endLineIndex=this.pageStartIndexes[t+1],this}},bw=function(t,e){switch(fw(t)){case 0:var i=(n=t.style).wordWrapWidth,r=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,t.setText(e),n.wordWrapWidth=i,n.wordWrapCallback=r;break;case 1:var n,s=(n=t.style).wrapMode;n.wrapMode=0,t.setText(e),n.wrapMode=s;break;case 2:var o=t._maxWidth;t._maxWidth=0,t.setText(e),t._maxWidth=o}},ww={showPage(t){return this.displayText(this.getPage(t)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(t){bw(this.parent,t)}};var _w={getLines:function(t,e){var i;switch(void 0===t&&(t=this.startLineIndex),void 0===e&&(e=t+this.pageLinesCount),this.textObjectType){case 0:case 2:i=this.lines.slice(t,e).join("\n");break;case 1:var r=this.lines.getLineStartIndex(t),n=this.lines.getLineEndIndex(e-1);i=this.lines.getSliceTagText(r,n,!0)}return i}};Object.assign(_w,yw,vw,ww);const xw=_w,Ew=Phaser.Utils.Objects.GetValue,Sw=Phaser.Math.Clamp;class Tw extends xh{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=fw(this.parent),this.pageStartIndexes=[],this.lines=pw(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(Ew(t,"maxLines",void 0)),this.setPageBreak(Ew(t,"pageBreak","\f\n")),this.setText(Ew(t,"text","")),this.setStartLineIndex(Ew(t,"start",0)),this.setPageIndex(Ew(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=Sw(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(void 0!==this.maxLines)return this.maxLines;var t;switch(this.textObjectType){case 0:case 1:var e=this.parent.style.maxLines;t=e>0?e:this.totalLinesCount;break;case 2:t=this.totalLinesCount}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Tw.prototype,xw);const Aw=Tw,Cw=Phaser.Utils.Objects.GetFastValue,kw=Phaser.Utils.Objects.GetValue;var Rw=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const Pw={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},Iw=class extends xh{constructor(t,e){super(t,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(t){this.setTextWrapEnable(kw(t,"wrap",!1)),this.setTypeMode(kw(t,"typeMode",0)),this.setTypeSpeed(kw(t,"speed",333)),this.setTextCallback=Cw(t,"setTextCallback",null),this.setTextCallbackScope=Cw(t,"setTextCallbackScope",null),this.setTypingContent(Cw(t,"text","")),this.typingIdx=Cw(t,"typingIdx",0),this.insertIdx=Cw(t,"insertIdx",null);var e=Cw(t,"elapsed",null);return null!==e&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return"string"==typeof t&&(t=Pw[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return void 0===t&&(t=!0),this.textWrapEnable=t,this}set text(t){var e=Rw(t);this.textWrapEnable&&(e=function(t,e){switch(fw(t)){case 0:t.style.syncFont(t.canvas,t.context),e=t.runWordWrap(e);break;case 1:e=t.getText(e,void 0,void 0,!0);break;case 2:e=t.setText(e).getTextBounds().wrappedText}return e}(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,i,r){return void 0!==t&&this.setTypingContent(t),void 0!==e&&(this.speed=e),void 0===i&&(i=0),this.typingIdx=i+1,0===this.speed?this.stop(!0):(this.setText(""),this.startTimer(r)),this}appendText(t){var e=this.text.concat(Rw(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){return this.getTimer()&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,i,r){var n;if(0===r){var s=0,o=e;this.insertIdx=o,n=this.getSubString(t,s,o)}else if(1===r)s=(o=i)-e,this.insertIdx=0,n=this.getSubString(t,s,o);else if(2===r){var a=i/2;o=(s=Math.floor(a-e/2))+e,this.insertIdx=e%2?e:0,n=this.getSubString(t,s,o)}else if(3===r){var h,c=Math.floor(e/2);c>0?(s=(o=i)-c,h=this.getSubString(t,s,o)):h="";var l,u=e-c;u>0?(o=(s=0)+u,this.insertIdx=o,l=this.getSubString(t,s,o)):(l="",this.insertIdx=0),n=l+h}return n}startTimer(t){var e;return this.timer&&this.freeTimer(),void 0===t?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(t=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?bw(this.parent,t):this.parent.setText(t)}getTextLength(t){var e=this.parent;return e.getPlainText?e.getPlainText(t).length:t.length}getSubString(t,e,i){var r=this.parent;return r.getSubString?r.getSubString(t,e,i):t.slice(e,i)}},Ow=Phaser.Utils.Objects.GetValue;var Mw=function(t){return t.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};const Dw=class extends rm{constructor(t,e){void 0===e&&(e={text:Mw(t)}),super(t,e),this.type="rexTextBox";var i=this.childrenMap.text;this.page=new Aw(i,Ow(e,"page",void 0)),this.typing=new Iw(i,Ow(e,"type",void 0)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=i.width,this.textHeight=i.height}start(t,e){return this.page.setText(t),void 0!==e&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypeSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;this.textWidth===t.width&&this.textHeight===t.height||(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}};n.register("textBox",(function(t){var e=new Dw(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.TextBox",Dw);const Bw=Phaser.Utils.Objects.GetValue,Lw=class extends gy{constructor(t,e){super(t,e),this.type="rexNumberBar";var i,r,n,s=Bw(e,"background",void 0),o=Bw(e,"icon",void 0),a=Bw(e,"iconMask",void 0),h=Bw(e,"slider",void 0),c=Bw(e,"text",void 0),l=Bw(e,"space.icon",0),u=Bw(e,"space.slider",0);(s&&this.addBackground(s),o&&(0===this.orientation?(h||c)&&(r={right:l}):(h||c)&&(r={bottom:l}),this.add(o,{proportion:0,align:"center",padding:r}),a&&(a=em.call(this,o,o,1))),h)&&(h.orientation=this.orientation,h.eventEmitter=this,h.value=null,h.hasOwnProperty("input")||(h.input=-1),i=new Rv(t,h),t.add.existing(i),0===this.orientation?c&&(r={right:u}):c&&(r={bottom:u}),n=0===this.orientation?void 0===Bw(h,"width",void 0)?1:0:void 0===Bw(h,"height",void 0)?1:0,this.add(i,{proportion:n,align:"center",padding:r}));c&&this.add(c),this.addChildrenMap("background",s),this.addChildrenMap("icon",o),this.addChildrenMap("iconMask",a),this.addChildrenMap("slider",i),this.addChildrenMap("text",c);var d=Bw(e,"valuechangeCallback",null);if(null!==d){var f=Bw(e,"valuechangeCallbackScope",void 0);this.on("valuechange",d,f)}this.setEnable(Bw(e,"enable",void 0)),this.setValue(Bw(e,"value",0))}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,i),this}addValue(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,i),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,i),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;return void 0===t?"":t.text?t.text:t.getData("text")}set text(t){var e=this.childrenMap.text;void 0!==e&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}};n.register("numberBar",(function(t){var e=new Lw(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.NumberBar",Lw),n.register("scrollBar",(function(t){var e=new Dv(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.ScrollBar",Dv);const Nw=Phaser.Utils.Objects.GetValue,Uw={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"},Fw=class extends _p{constructor(t,e){super(t,e),this.type="rexBadge";var i=Nw(e,"background",void 0);i&&this.addBackground(i),this.addChildrenMap("background",i);var r=Nw(e,"main",void 0);for(var n in r&&this.add(r,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",r),Uw){var s=Nw(e,n,void 0);s&&(this.add(s,{key:n,align:Uw[n],expand:!1}),this.addChildrenMap(n,s))}}};n.register("badgeLabel",(function(t){var e=new Fw(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.BadgeLabel",Fw);const zw=_p.prototype.add;var jw=function(t,e,i,r,n,s,o,a,h){return t.setVisible(!1),zw.call(this,t,e,i,r,n,s,o,a,h),this};const Vw={add:jw,addPage:jw},Gw=ys.prototype.setChildVisible;var Hw={getPage:function(t){return void 0===t?null:this.sizerChildren.hasOwnProperty(t)?this.sizerChildren[t]:null},swapPage:function(t){this._previousKey=this._currentKey;var e=this.previousPage;e&&(0===this.swapMode?(Gw.call(this,e,!1),this.emit("pageinvisible",e,this._previousKey,this)):e.destroy()),t&&!this.sizerChildren.hasOwnProperty(t)&&this.emit("createpage",t,this),this._currentKey=t;var i=this.currentPage;return i&&(Gw.call(this,i,!0),this.emit("pagevisible",i,this._currentKey,this)),this}};Object.assign(Hw,Vw);const Yw=Hw,Kw=Phaser.Utils.Objects.GetValue;class Ww extends _p{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Kw(e,"swapMode",0))}setSwapMode(t){return"string"==typeof t&&(t=Xw[t]),this.swapMode=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Ww.prototype,Yw);const Xw={invisible:0,destroy:1},qw=Ww;n.register("pages",(function(t){var e=new qw(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Pages",qw);const $w=function(t){return(t-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Jw=function(t){return t*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},Zw=function(t){var e,i=t+this.visibleLinesCount+1;switch(this.textObjectType){case 0:case 2:e=this.lines.slice(t,i).join("\n");break;case 1:var r=this.lines.getLineStartIndex(t),n=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(r,n,!0)}return e};var Qw=function(){if(this.textObject.setCrop){var t,e,i=this.textObject.rexSizer.offsetY;i<=0?(t=-i,e=this.height):(t=0,e=this.height-i),this.textObject.setCrop(0,t,this.width,e)}};const t_=function(){var t=this.textObject.rexSizer;this.textObject.y+=t.offsetY-t.preOffsetY,t.preOffsetY=t.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&Qw.call(this)},e_=function(t,e,i){if(i+=this.textLineHeight+this.textLineSpacing,this.textObjectWidth!==e||this._textObjectRealHeight!==i){switch(this.textObjectWidth=e,this._textObjectRealHeight=i,this.textObjectType){case 0:case 1:t.setFixedSize(e,i);var r=t.style,n=Math.max(e,0);0===this.textObjectType?r.wordWrapWidth=n:(0===r.wrapMode&&(r.wrapMode=1),r.wrapWidth=n);break;case 2:t.setMaxWidth(e)}this.setText()}},i_={setText:function(t){return void 0!==t&&(this.text=t),this.lines=pw(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},updateTextObject:function(){var t=Math.max(Math.floor($w.call(this,-this.textOY)),0),e=Jw.call(this,t)+this.textOY,i=Zw.call(this,t);return bw(this.textObject,i),this.textObject.rexSizer.offsetY=e,t_.call(this),this},preLayout:function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,uu.call(this),this},layoutChildren:function(){var t,e,i,r,n,s,o,a=this.left,h=this.top;(t=this.textObject).rexSizer.hidden||(r=a+(i=(e=t.rexSizer).padding).left,n=h+i.top,s=this.width-i.left-i.right,o=this.height-i.top-i.bottom,e_.call(this,t,s,o),Nl(t,r,n,s,o,e.align),e.preOffsetY=0,t_.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))}},r_=Phaser.Utils.Objects.IsPlainObject,n_=Phaser.Utils.Objects.GetValue,s_=Phaser.Display.Align.TOP_LEFT;class o_ extends ip{constructor(t,e,i,r,n,s){r_(e)?(e=n_(s=e,"x",0),i=n_(s,"y",0),r=n_(s,"width",void 0),n=n_(s,"height",void 0)):r_(r)&&(r=n_(s=r,"width",void 0),n=n_(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=n_(s,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(n_(s,"clamplTextOY",!0)),this.alwaysScrollable=n_(s,"alwaysScrollable",!1);var o=n_(s,"background",void 0),a=n_(s,"text",void 0);void 0===a&&(a=a_(t)),this.textCropEnable=n_(s,"textCrop",!!a.setCrop);var h=n_(s,"textMask",!this.textCropEnable);o&&this.addBackground(o),this.add(a),this.sizerChildren=[a];var c=this.getSizerConfig(a);c.align=s_,c.padding=tu(0),c.expand=!0,this.textObject=a,this.textObjectType=fw(a),c.preOffsetY=0,c.offsetY=0,h&&(this.textMask=em.call(this,this.textObject,this)),this.addChildrenMap("background",o),this.addChildrenMap("text",a)}destroy(t){if(this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.lines=void 0}super.destroy(t)}}setClampMode(t){return void 0===t&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(void 0===this._textLineHeight){var t;switch(this.textObjectType){case 0:case 1:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case 2:var i=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*i}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(void 0===this._textLineSpacing){var t;switch(this.textObjectType){case 0:case 1:t=this.textObject.lineSpacing;break;case 2:t=0}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return void 0===this._visibleLinesCount&&(this._visibleLinesCount=Math.floor($w.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return void 0===this._textHeight&&(this._textHeight=Jw.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(void 0===this._textVisibleHeight){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return void 0===t&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return void 0===t&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,i=this.bottomTextOY,r=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:r?t=e:n&&(t=i)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),r&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,i)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return 0===t?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var a_=function(t){return t.add.text(0,0,"")};Object.assign(o_.prototype,i_);const h_=o_,c_=Phaser.Utils.Objects.GetValue;class l_ extends eb{constructor(t,e){void 0===e&&(e={});var i=c_(e,"text",void 0),r=c_(e,"textWidth",void 0),n=c_(e,"textHeight",void 0),s=c_(e,"textCrop",!!i.setCrop),o=c_(e,"textMask",!s),a=c_(e,"content",""),h=new h_(t,{width:r,height:n,text:i,textMask:o,textCrop:s&&!o,content:a,clamplTextOY:c_(e,"clamplChildOY",!1),alwaysScrollable:c_(e,"alwaysScrollable",!1)});t.add.existing(h);var c=void 0===r?1:0,l=void 0===n;(function(t){Object.defineProperty(t,"childOY",{configurable:!0,get:function(){return t.textOY},set:function(e){t.textOY=e}}),Object.defineProperty(t,"topChildOY",{get:function(){return t.topTextOY}}),Object.defineProperty(t,"bottomChildOY",{get:function(){return t.bottomTextOY}}),Object.defineProperty(t,"childVisibleHeight",{get:function(){return t.textObjectHeight}}),Object.defineProperty(t,"childHeight",{get:function(){return t.textHeight}})})(h),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:h,proportion:c,expand:l};var u=c_(e,"space",void 0);u&&(u.child=u.text),super(t,e),this.addChildrenMap("text",i)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var u_={setText:function(t){return this.childrenMap.child.setText(t),this.resizeController(),this},appendText:function(t){return this.setText(this.text+t),this}};Object.assign(l_.prototype,u_);const d_=l_;n.register("textArea",(function(t){var e=new d_(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.TextArea",d_);var f_={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var t=this.child;return t.rexSizer.hidden?0:0===this.scrollMode?this.getChildWidth(t):0},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var t=this.child;return t.rexSizer.hidden||0===this.scrollMode?0:t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:xl(t)},getChildrenSizers:function(t){return void 0===t&&(t=[]),this.child&&this.child.isRexSizer&&t.push(this.child),t},resetChildPosition:function(){var t=this.left,e=this.top;0===this.scrollMode?e+=this.childOY:t+=this.childOY,this.child.setPosition(t,e),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},layoutChildren:function(){var t,e,i=this.child;i.rexSizer.hidden||(0===this.scrollMode?t=this.width:e=this.height,i.isRexSizer?i.runLayout(this,t,e):fd(i,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())}};Object.assign(f_,gb);const p_=f_,g_=Phaser.Utils.Objects.IsPlainObject,y_=Phaser.Utils.Objects.GetValue,m_=Phaser.Display.Align.TOP_LEFT;class v_ extends ip{constructor(t,e,i,r,n,s){g_(e)?(e=y_(s=e,"x",0),i=y_(s,"y",0),r=y_(s,"width",void 0),n=y_(s,"height",void 0)):g_(r)&&(r=y_(s=r,"width",void 0),n=y_(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(y_(s,"scrollMode",!0)),this.setClampMode(y_(s,"clamplChildOY",!0));var o=y_(s,"child",void 0),a=y_(s,"expand",!0);o.setOrigin&&o.setOrigin(0),this.add(o),this.sizerChildren=[o];var h=this.getSizerConfig(o);h.align=m_,h.expand=a,this.child=o,this.setupChildrenMask(y_(s,"mask",void 0))}destroy(t){this.scene&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return"string"==typeof t&&(t=Pv[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return void 0===t&&(t=!0),this.clampChildOY=t,this}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get childHeight(){return 0===this.scrollMode?xl(this.child):_l(this.child)}get childWidth(){return 0===this.scrollMode?_l(this.child):xl(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return void 0===t&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return void 0===t&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,i=this.bottomChildOY,r=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:r?t=e:n&&(t=i)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),r&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,i)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return 0===t?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(v_.prototype,p_);const b_=v_,w_=Phaser.Utils.Objects.GetValue,__=class extends eb{constructor(t,e){void 0===e&&(e={});var i=Ov(e),r=w_(e,"panel",void 0);void 0===r&&(r={}),r.scrollMode=i,r.clamplChildOY=w_(e,"clamplChildOY",!1);var n=new b_(t,r);t.add.existing(n);var s,o,a=w_(r,"width",void 0),h=w_(r,"height",void 0);0===i?(s=void 0===a?1:0,o=void 0===h):(s=void 0===h?1:0,o=void 0===a),e.type="rexScrollablePanel",e.child={gameObject:n,proportion:s,expand:o};var c=w_(e,"space",void 0);c&&(c.child=c.panel),super(t,e),this.addChildrenMap("panel",n.child),this.addChildrenMap("panelLayer",n.maskLayer)}setChildrenInteractive(t){return void 0===t&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Jf(this.childrenMap.child,t),this}};n.register("scrollablePanel",(function(t){var e=new __(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.ScrollablePanel",__);const x_=function(t,e){t.popUp(e)},E_=function(t,e){t.scaleDown(e)},S_=function(t,e){t.fadeIn(e)},T_=function(t,e){t.fadeOut(e)},A_=kh,C_=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length),t.length=r-i;for(var n=0,s=t.length;n<s;n++)t[n]=e[n+i];return t},k_=Phaser.Utils.Objects.GetValue;var R_=function(t,e,i){var r,n=k_(i,"reverse",!1);if(as(t[0]))if(n)for(s=(o=t.length)-1;s>=0;s--)r=R_(t[s],e,i);else for(var s=0,o=t.length;s<o;s++)r=R_(t[s],e,i);else r=P_(t,e,i);return r},P_=function(t,e,i){var r,n=k_(i,"argsConvert",void 0),s=k_(i,"argsConvertScope",void 0),o=t[0];if(I_=C_(I_,t,1),n){!0===n&&(n=bo,s=void 0);for(var a=0,h=I_.length;a<h;a++)I_[a]=s?n.call(s,I_[a],t):n(I_[a],t)}return"string"==typeof o?null==(r=e[o])&&(r=k_(e,o,null)):r=o,r.apply(e,I_)},I_=[];const O_=R_,M_=Phaser.Utils.Objects.GetValue;var D_=[];const B_={ms:0,s:1,sec:1},L_={abs:0,absolute:0,inc:1,increment:1},N_=class extends xh{constructor(t,e){super(t,e);var i=M_(e,"clock",void 0);i||(i=new A_(t)),this.clock=i,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(M_(t,"clock",void 0)),this.state=M_(t,"state",0),this.commands=M_(t,"commands",[]),this.scope=M_(t,"scope",void 0),this.setTimeUnit(M_(t,"timeUnit",0)),this.setDtMode(M_(t,"dtMode",0)),this.index=M_(t,"index",0),this.nextTime=M_(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,i){this.stop();var r=M_(i,"timeUnit",void 0);void 0!==r&&this.setTimeUnit(r);var n=M_(i,"dtMode",void 0);return void 0!==n&&this.setDtMode(n),t=t.filter((function(t){var e=t[0];return!isNaN(e)})).map((function(t){return"string"==typeof t[0]&&(t[0]=parseFloat(t[0])),t})),0===this.dtMode&&t.sort((function(t,e){var i=t[0],r=e[0];return i>r?1:i<r?-1:0})),this.commands=t,this.scope=e,this}start(t){return void 0===t&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}get isPlaying(){return this.clock.isRunning}get completed(){return 2===this.state}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var i=this.commands[this.index],r=i[1];if(as(r)||(r=C_(D_,i,1)),O_(r,this.scope),this.emit("runcommand",r,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return 1===this.timeUnit&&(e*=1e3),1===this.dtMode&&(e+=t),e}setDtMode(t){return"string"==typeof t&&(t=L_[t]),this.dtMode=t,this}setTimeUnit(t){return"string"==typeof t&&(t=B_[t]),this.timeUnit=t,this}},U_=Phaser.Utils.Objects.GetValue,F_={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},z_=class extends rm{constructor(t,e){void 0===e&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(U_(e,"duration.in",200)),this.setDisplayTime(U_(e,"duration.hold",1200)),this.setTransitOutTime(U_(e,"duration.out",200)),this.setTransitInCallback(U_(e,"transitIn",F_.popUp)),this.setTransitOutCallback(U_(e,"transitOut",F_.scaleDown)),this.player=new N_(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){this.scene&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch("string"==typeof t&&(t=F_[t]),t){case F_.popUp:t=x_;break;case F_.fadeIn:t=S_}return t||(t=f),this.transitInCallback=t,this}setTransitOutCallback(t){switch("string"==typeof t&&(t=F_[t]),t){case F_.scaleDown:t=E_;break;case F_.fadeOut:t=T_}return t||(t=f),this.transitOutCallback=t,this}setScale(t,e){return void 0===e&&(e=t),this.scaleX0=t,this.scaleY0=e,super.setScale(t,e),this}showMessage(t){if(void 0===this.scaleX0&&(this.scaleX0=this.scaleX),void 0===this.scaleY0&&(this.scaleY0=this.scaleY),void 0===t){if(0===this.messages.length)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),"string"==typeof t?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[f]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[f]]];return this.player.load(e,this).once("complete",(function(){this.showMessage()}),this).start(),this}};n.register("toast",(function(t){var e=new z_(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Toast",z_);var j_=function(t,e){return function(i,r,n,s){"panel"!==r&&n.moveChild(i,s?0:t,e)}},V_=function(t,e){return function(i,r,n,s){"panel"===r&&n.moveChild(i,s?0:t,e)}};const G_={visible:{show:function(){return function(t,e,i,r){"panel"!==e&&i.setChildVisible(t,!0)}},hide:function(){return function(t,e,i,r){"panel"!==e&&i.setChildVisible(t,!1)}}},fade:{show:function(t,e){return void 0===e&&(e=1),function(i,r,n,s){"panel"!==r&&n.fadeChild(i,s?0:t,e)}},hide:function(t,e){return void 0===e&&(e=0),function(i,r,n,s){"panel"!==r&&n.fadeChild(i,s?0:t,e)}}},move:{show:j_,hide:j_},"move-panel":{show:V_,hide:V_}},H_={showChild(t,e){var i=this.sizerChildren[t];return i&&(this.emit("showchild",i,t,this,e),this.resetChildState(i)),this},hideChild(t,e){var i=this.sizerChildren[t];return i&&(this.emit("hidechild",i,t,this,e),this.resetChildState(i)),this},swapChild(t,e){return this.currentChildKey===t||("panel"===this.currentChildKey||"panel"===t?(this.previousChildKey=this.currentChildKey,this.currentChildKey=t,this.hideChild(this.previousChildKey,e),this.showChild(this.currentChildKey,e)):(this.swapChild("panel",e),this.swapChild(t,e))),this},showPanel(t){return this.swapChild("panel",t),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return"leftSide"==this.currentChildKey&&this.showPanel(),this},hideRightSide(){return"rightSide"==this.currentChildKey&&this.showPanel(),this},hideTopSide(){return"topSide"==this.currentChildKey&&this.showPanel(),this},hideBottomSide(){return"bottomSide"==this.currentChildKey&&this.showPanel(),this},toggleLeftSide(){var t="panel"!==this.currentChildKey?"panel":"leftSide";return this.swapChild(t),this},toggleRightSide(){var t="panel"!==this.currentChildKey?"panel":"rightSide";return this.swapChild(t),this},toggleTopSide(){var t="panel"!==this.currentChildKey?"panel":"topSide";return this.swapChild(t),this},toggleBottomSide(){var t="panel"!==this.currentChildKey?"panel":"bottomSide";return this.swapChild(t),this}},Y_=ys.prototype.setChildVisible,K_={setChildVisible(t,e){if("string"==typeof t){var i=t;t=this.sizerChildren[i]}else i=mp(this.sizerChildren,t);return void 0===e&&(e=this.currentChildKey===i),Y_.call(this,t,e),this}},W_={fadeChild(t,e,i){var r;return"string"==typeof t?(r=t,t=this.sizerChildren[r]):r=mp(this.sizerChildren,t),void 0===e&&(e=500),void 0===i&&(i=this.currentChildKey===r?1:0),t.fadeIn(e,{start:t.alpha,end:i}),this},fadeChildPromise(t,e,i){return"string"==typeof t&&(t=this.sizerChildren[key]),this.fadeChild(t,e,i),t._fade?Ja(t._fade):Promise.resolve()}},X_={moveChild(t,e,i,r){var n;"string"==typeof t?(n=t,t=this.sizerChildren[n]):n=mp(this.sizerChildren,t),void 0===e&&(e=500);var s,o,a,h,c=this.currentChildKey===n;if(void 0===r)switch(n){case"leftSide":case"rightSide":r=_l(t);break;case"topSide":case"bottomSide":r=xl(t);break;default:if(c)switch(this.previousChildKey){case"leftSide":case"rightSide":r=_l(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":r=xl(this.sizerChildren[this.previousChildKey]);break;default:r=0}else switch(this.currentChildKey){case"leftSide":case"rightSide":r=_l(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":r=xl(this.sizerChildren[this.currentChildKey]);break;default:r=0}}if(c)switch(n){case"panel":switch(this.previousChildKey){case"leftSide":s=!0;break;case"rightSide":o=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0}break;case"leftSide":o=!0;break;case"rightSide":s=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0}else switch(n){case"panel":switch(this.currentChildKey){case"leftSide":o=!0;break;case"rightSide":s=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0}break;case"leftSide":s=!0;break;case"rightSide":o=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0}return s?t.moveTo(e,`-=${r}`,void 0,i):o?t.moveTo(e,`+=${r}`,void 0,i):a?t.moveTo(e,void 0,`-=${r}`,i):h?t.moveTo(e,void 0,`+=${r}`,i):t.moveTo(0),this},moveChildPromise(t,e,i,r){return"string"==typeof t&&(t=this.sizerChildren[key]),this.moveChild(t,e,i,r),t._easeMove?Ja(t._easeMove):Promise.resolve()}};var q_={};Object.assign(q_,K_,W_,X_);const $_=q_,J_=Phaser.Utils.Objects.GetValue;class Z_ extends _p{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var i=J_(e,"showChildCallback",void 0);if(i)if(cd(i)){var r=J_(e,"showChildCallbackScope",void 0);this.on("showchild",i,r);var n=J_(e,"hideChildCallback",void 0),s=J_(e,"hideChildCallbackScope",void 0);this.on("hidechild",n,s)}else{var o=function(t){var e,i,r,n;return[e,...i]="string"==typeof t?[t]:t,G_.hasOwnProperty(e)?(r=G_[e].show.apply(null,i),n=G_[e].hide.apply(null,i)):(r=f,n=f),{show:r,hide:n}}(i);this.on("showchild",o.show),this.on("hidechild",o.hide)}var a=J_(e,"background",void 0),h=J_(e,"panel",void 0),c=J_(e,"leftSide",void 0),l=J_(e,"rightSide",void 0),u=J_(e,"topSide",void 0),d=J_(e,"bottomSide",void 0);if(a&&this.addBackground(a),h&&this.add(h,"panel","center",0,!0),c){var p=J_(e,"expand.left",!0);this.add(c,"leftSide","left-top",0,{height:p})}l&&(p=J_(e,"expand.right",!0),this.add(l,"rightSide","right-top",0,{height:p})),u&&(p=J_(e,"expand.top",!0),this.add(u,"topSide","left-top",0,{width:p})),d&&(p=J_(e,"expand.bottom",!0),this.add(d,"bottomSide","left-bottom",0,{width:p}))}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Z_.prototype,H_,$_);const Q_=Z_;n.register("sides",(function(t){var e=new Q_(this.scene,t);return this.scene.add.existing(e),e})),S(window,"RexPlugins.UI.Sides",Q_);const tx=Phaser.GameObjects.GameObject,ex=function(t){return t instanceof tx};n.register("click",(function(t,e){return ex(t)||(e=t,t=this.scene),new _d(t,e)})),S(window,"RexPlugins.UI.Click",_d),n.register("tap",(function(t,e){return ex(t)||(e=t,t=this.scene),new jf(t,e)})),S(window,"RexPlugins.UI.Tap",jf),n.register("press",(function(t,e){return ex(t)||(e=t,t=this.scene),new Hf(t,e)})),S(window,"RexPlugins.UI.Press",Hf),n.register("swipe",(function(t,e){return ex(t)||(e=t,t=this.scene),new Wf(t,e)})),S(window,"RexPlugins.UI.Swipe",Wf);const ix=class extends Ud{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{},BEGIN:{enter:function(){var t=i.pointer;i.startX=t.x,i.startY=t.y,i.startWorldX=t.worldX,i.startWorldY=t.worldY}},RECOGNIZED:{enter:function(){i.emit("panstart",i,i.gameObject,i.lastPointer)},exit:function(){var t=i.lastPointer;i.endX=t.x,i.endY=t.y,i.endWorldX=t.worldX,i.endWorldY=t.worldY,i.emit("panend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=$d},eventEmitter:!1};this.setRecongizedStateObject(new Fd(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(qd(t,"threshold",10)),this}onDragStart(){this.state=Jd,0===this.dragThreshold&&(this.state=Zd)}onDragEnd(){this.state=$d}onDrag(){switch(this.state){case Jd:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Zd);break;case Zd:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var i=this.pointer;this.x=i.x,this.y=i.y,this.worldX=i.worldX,this.worldY=i.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanned(){return this.state===Zd}setDragThreshold(t){return this.dragThreshold=t,this}};n.register("pan",(function(t,e){return ex(t)||(e=t,t=this.scene),new ix(t,e)})),S(window,"RexPlugins.UI.Pan",ix);const rx=function(t){for(var e,i=t.scene.input,r=i.manager,n=r.pointersTotal,s=r.pointers,o=0;o<n;o++)if((e=s[o]).primaryDown&&0===i.getDragState(e)&&vn(t,e))return i.setDragState(e,1),i._drag[e.id]=[t],0===i.dragDistanceThreshold||0===i.dragTimeThreshold?(i.setDragState(e,3),i.processDragStartList(e)):i.setDragState(e,2),!0;return!1},nx=Phaser.Utils.Objects.GetValue,sx=Phaser.Math.Distance.Between,ox=Phaser.Math.RotateAroundDistance,ax={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},hx=class extends xh{constructor(t,e){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(nx(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(nx(t,"enable",!0)),this.setAxisMode(nx(t,"axis",0)),this.setAxisRotation(nx(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return"string"==typeof t&&(t=ax[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return rx(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,e,i){this.isDragging||(this.pointer=t)}onDrag(t,e,i){if(this.pointer===t){var r=this.parent;if(0===this.axisMode)r.x=e,r.y=i;else if(0===this.axisRotation)1===this.axisMode?r.x=e:2===this.axisMode&&(r.y=i);else{var n,s={x:e,y:i};n=sx(s.x,s.y,r.x,r.y),s=ox(s,r.x,r.y,-this.axisRotation,n),1===this.axisMode?s.y=r.y:2===this.axisMode&&(s.x=r.x),n=sx(s.x,s.y,r.x,r.y),s=ox(s,r.x,r.y,this.axisRotation,n),r.x=s.x,r.y=s.y}}}onDragEnd(t,e,i,r){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return void 0!==this.pointer}};n.register("drag",(function(t,e){return new hx(t,e)})),S(window,"RexPlugins.UI.Drag",hx);const cx=class extends xf{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.prevDistance=void 0,i.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("pinchstart",i)},exit:function(){i.emit("pinchend",i)}}},init:function(){this.state=Sf},eventEmitter:!1};this.setRecongizedStateObject(new Fd(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Ef(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Tf,0===this.dragThreshold&&(this.state=Af)}onDrag2End(){this.state=Sf}onDrag2(){switch(this.state){case Tf:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Af}break;case Af:t=this.distanceBetween,this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}get isPinched(){return this.state===Af}setDragThreshold(t){return this.dragThreshold=t,this}};n.register("pinch",(function(t){return new cx(this.scene,t)})),S(window,"RexPlugins.UI.Pinch",cx);const lx=zf;n.register("rotate",(function(t){return new lx(this.scene,t)})),S(window,"RexPlugins.UI.Rotate",lx);const ux=Phaser.Utils.Objects.IsPlainObject,dx=Phaser.Utils.Objects.GetValue,fx=function(t,e,i){var r;if(void 0===t)t=i.texture.key,e=i.frame.name;else if(ux(t)){var n=t;t=dx(n,"key",i.texture.key),e=dx(n,"frame",i.frame.name)}else"string"==typeof t||(r=t);return void 0===r&&(r=function(i){i.setTexture(t,e)}),r},px=Phaser.Utils.Objects.GetValue,gx=Phaser.Utils.Objects.GetAdvancedValue,yx=Phaser.Math.Linear,mx={x:0,horizontal:0,y:1,vertical:1},vx={front:0,back:1},bx=class extends Kh{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(gx(t,"duration",500)),this.setEase(px(t,"ease","Sine")),this.setOrientation(px(t,"orientation",0)),this.setFrontFace(px(t,"front",void 0)),this.setBackFace(px(t,"back",void 0)),this.setFace(px(t,"face",0)),this}setOrientation(t){return"string"==typeof t&&(t=mx[t]),this.orientation=t,this}get face(){return this._face}set face(t){"string"==typeof t&&(t=vx[t]),this._face=t,0===t&&this.frontFaceCallback?this.frontFaceCallback(this.parent):1===t&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=0===this.face?1:0;return this.setFace(t),this}setFrontFace(t,e){return this.frontFaceCallback=fx(t,e,this.parent),this}setBackFace(t,e){return this.backFaceCallback=fx(t,e,this.parent),this}start(){return this.timer.isRunning||(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start()),this}flip(t){return this.isRunning||(void 0!==t&&this.setDuration(t),this.start()),this}updateGameObject(t,e){e.justRestart&&this.toggleFace();var i=e.t;e.isOddIteration&&(i=1-i),i=this.easeFn(i);var r=yx(1,0,i);0===this.orientation?t.scaleX=r:t.scaleY=r}};n.register("flip",(function(t,e){return new bx(t,e)})),S(window,"RexPlugins.UI.Flip",bx),n.register("shake",(function(t,e){return new $u(t,e)})),S(window,"RexPlugins.UI.Shake",$u);const wx=Gg;n.register("touchEventStop",(function(t,e){return new wx(t,e)})),S(window,"RexPlugins.UI.TouchEventStop",wx);const _x=Phaser.Math.Vector3,xx=Phaser.Math.Matrix4;var Ex=new _x,Sx=new _x,Tx=new xx;const Ax=Phaser.GameObjects.Mesh,Cx=Phaser.Utils.Objects.IsPlainObject,kx=Phaser.Utils.Objects.GetValue,Rx=Phaser.Geom.Mesh.GenerateGridVerts,Px=Phaser.Math.RadToDeg,Ix=Phaser.Math.DegToRad,Ox=1+1/Math.sin(Ix(45)),Mx=class extends Ax{constructor(t,e,i,r,n,s){Cx(e)&&(e=kx(s=e,"x",0),i=kx(s,"y",0),r=kx(s,"key",null),n=kx(s,"frame",null)),super(t,e,i,r,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(Ox),this.hideCCW=kx(s,"hideCCW",!0);var o=kx(s,"gridWidth",32),a=kx(s,"gridHeight",o);this.resetVerts(o,a)}resetPerspective(){return this.setPerspective(this.width,this.height,45),this}resetVerts(t,e){if(void 0!==t&&(this.gridWidth=t),void 0!==e&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,0===this.width||0===this.height)return this;var i=this.frame.cutWidth,r=this.frame.cutHeight;return Rx({mesh:this,texture:this.texture.key,frame:this.frame.name,width:i/this.height,height:r/this.height,widthSegments:Math.ceil(i/this.gridWidth),heightSegments:Math.ceil(r/this.gridHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Px(this.rotationX)}set angleX(t){this.rotationX=Ix(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Px(this.rotationY)}set angleY(t){this.rotationY=Ix(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Px(this.rotationZ)}set angleZ(t){this.rotationZ=Ix(t)}transformVerts(t,e,i,r,n,s){return function(t,e,i,r,n,s,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),Ex.set(e,i,r),Sx.set(n,s,o),Tx.fromRotationXYTranslation(Sx,Ex,!0);for(var a=0,h=t.vertices.length;a<h;a++)t.vertices[a].transformMat4(Tx)}(this,t,e,i,r,n,s),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return 0===this.vertices.length?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,i=0,r=e.length;i<r;i++)e[i].color=t}setTint(t){return this.tint=t,this}},Dx=Phaser.GameObjects.RenderTexture,Bx=Phaser.Utils.Objects.IsPlainObject,Lx=Phaser.Utils.Objects.GetValue,Nx=class extends Mx{constructor(t,e,i,r,n,s){Bx(e)&&(e=Lx(s=e,"x",0),i=Lx(s,"y",0),r=Lx(s,"width",32),n=Lx(s,"height",32));var o=new Dx(t,e,i,r,n).setOrigin(.5);super(t,e,i,o.texture.key,null,s),this.type="rexPerspectiveRenderTexture",this.rt=o}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}};Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Utils.Objects.IsPlainObject,(0,Phaser.Math.DegToRad)(180),Phaser.Utils.Objects.GetValue,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const Ux=Phaser.Geom.Rectangle,Fx=Phaser.Geom.Rectangle.Union;var zx;var jx=Phaser.Utils.Objects.GetValue;const Vx=function(t){var e=t.gameObjects,i=t.renderTexture;if(0===e.length)return i&&i.setSize(1,1).clear(),i;var r,n,s=jx(t,"x",void 0),o=jx(t,"y",void 0),a=jx(t,"width",void 0),h=jx(t,"height",void 0),c=jx(t,"originX",0),l=jx(t,"originY",0);if(void 0===a||void 0===h||void 0===s||void 0===o){var u=function(t,e){var i;void 0===e?e=new Ux:!0===e&&(void 0===zx&&(zx=new Ux),e=zx);for(var r=!0,n=0,s=t.length;n<s;n++)if((i=t[n]).getBounds){var o=jl(i,!0);r?(e.setTo(o.x,o.y,o.width,o.height),r=!1):Fx(o,e,e)}return e}(e,!0);void 0!==s&&void 0!==o?(a=2*Math.max(s-u.left,u.right-s),h=2*Math.max(o-u.top,u.bottom-o),c=.5,l=.5):(s=u.x,o=u.y,a=u.width,h=u.height,c=0,l=0),r=u.x,n=u.y}else r=s+(0-c)*a,n=o+(0-l)*h;return i?(i.setPosition(s,o),i.width===a&&i.height===h||i.setSize(a,h)):i=e[0].scene.add.renderTexture(s,o,a,h),i.setOrigin(c,l),i.camera.setScroll(r,n),e=es(ke(e)),i.draw(e),i},Gx=gs.prototype.add,Hx=Phaser.Utils.Objects.GetValue,Yx=class extends Nx{constructor(t,e){var i=t.scene;super(i,t.x,t.y,1,1,e),i.add.existing(this),this.setVisible(!1),Gx.call(t,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=Hx(e,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(t){this.scene&&(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(t))}onParentDestroy(t,e){this.destroy(e)}enter(){this.exit();var t=this.rexContainer.parent;return Vx({gameObjects:t.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?t.displayWidth:void 0,height:this.useParentBounds?t.displayHeighth:void 0,originX:this.useParentBounds?t.originX:void 0,originY:this.useParentBounds?t.originY:void 0}),this.syncSize(),t.setChildVisible(this,!0),t.children.forEach((function(e){e!==this&&(t.setChildVisible(e,!1),this.visibleSibling.push(e))}),this),this.perspectiveState=!0,this}exit(){var t=this.rexContainer.parent;return this.visibleSibling.forEach((function(e){t.setChildVisible(e,!0)}),this),this.visibleSibling.length=0,t.setChildVisible(this,!1),this.perspectiveState=!1,this}};n.register("perspective",(function(t,e){return new Yx(t,e)})),S(window,"RexPlugins.UI.Perspective",Yx),n.register("anchor",(function(t,e){return new fu(t,e)})),S(window,"RexPlugins.UI.Anchor",fu);const Kx=Phaser.Utils.Objects.GetValue;const Wx=Phaser.Utils.Objects.GetValue;var Xx=void 0;const qx=class extends xh{constructor(t){super(t,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(t){this.isShutdown||(this.close(),Xx===this&&(Xx=void 0),super.shutdown(t))}open(t,e){void 0!==Xx&&Xx.close(),Xx=this,cd(t)&&(e=t,t=void 0),void 0===e&&(e=Wx(t,"onClose",void 0));var i=Wx(t,"onOpen",void 0),r=Wx(t,"onTextChanged",void 0);return this.inputText=function(t,e){void 0===e&&(e={});var i=t.scene,r=t.style,n=Kx(e,"backgroundColor",r.backgroundColor);null===n&&(n="transparent"),e.text=Kx(e,"text",t.text),e.fontFamily=Kx(e,"fontFamily",r.fontFamily),e.fontSize=Kx(e,"fontSize",r.fontSize),e.color=Kx(e,"color",r.color),e.backgroundColor=n,e.direction=Kx(e,"rtl",r.rtl)?"rtl":"ltr",e.align=Kx(e,"align",function(t){return t.hasOwnProperty("align")?t.align:t.hasOwnProperty("halign")?t.halign:"left"}(r)),"rtl"===e.direction&&lw(t)&&(e.align="right");var s=new yn(i,t.x,t.y,Kx(e,"width",t.width),Kx(e,"height",t.height),e);return s.setOrigin(t.originX,t.originY),i.add.existing(s),s}(this.parent,t).on("textchange",(function(t){var e=t.text;r?r(this.parent,e):this.parent.text=e}),this).setFocus(),this.parent.setVisible(!1),this.onClose=e,Wx(t,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,(function(){this.scene.input.once("pointerdown",this.close,this),i&&i(this.parent)}),[],this),this}close(){return Xx=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return void 0!==this.inputText}get text(){return this.isOpened?this.inputText.text:this.parent.text}},$x=function(t,e){bu(t,e)},Jx=function(t,e){wu(t,e,void 0,void 0,!1)},Zx=function(t,e){Pu(t,e)},Qx=function(t,e){Iu(t,e,!1)},tE=class extends Fd{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;t.transitionIn(),t.delayCall(t.transitInTime,this.next,this)}exit_TRANS_OPNE(){this.parent.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent,e=t.displayTime;e>=0&&t.delayCall(e,t.requestClose,t),t.onOpen()}exit_OPEN(){this.parent.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;t.transitionOut(),t.delayCall(t.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){this.parent.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){this.parent.onClose()}exit_CLOSE(){}},eE=Phaser.Utils.Objects.GetValue,iE=Phaser.Time.TimerEvent,rE={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},nE=class extends xh{constructor(t,e){super(t,e);var i=eE(e,"cover");this.cover=!1!==i?function(t,e){var i=t.scene,r=new Yg(i,e);return i.add.existing(r),t.isRexContainerLite?t.moveDepthBelow(r):i.children.moveBelow(r,t),r}(t,i):void 0,eE(e,"manualClose",!0)?this.setDisplayTime(-1):(this.setDisplayTime(eE(e,"duration.hold",2e3)),eE(e,"anyTouchClose",!0)&&this.anyTouchClose()),this.setTransitInTime(eE(e,"duration.in",200)),this.setTransitOutTime(eE(e,"duration.out",200)),this.setTransitInCallback(eE(e,"transitIn",rE.popUp)),this.setTransitOutCallback(eE(e,"transitOut",rE.scaleDown)),this.destroyParent=eE(e,"destroy",!0),this.timer=new iE,this._state=new tE(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var t=this.transitInTime;this.transitInCallback(this.parent,t);var e=this.cover;return e&&Pu(e,t,e.alpha),this}transitionOut(){var t=this.transitOutTime;this.transitOutCallback(this.parent,t);var e=this.cover;return e&&Iu(e,t,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(t,e,i){var r=this.scene.sys.events;return this.timer=this.scene.time.delayedCall(t,r.once,["postupdate",e,i],r),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(t){return this.transitInTime=t,this}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInCallback(t){switch("string"==typeof t&&(t=rE[t]),t){case rE.popUp:t=$x;break;case rE.fadeIn:t=Zx}return t||(t=f),this.transitInCallback=t,this}setTransitOutCallback(t){switch("string"==typeof t&&(t=rE[t]),t){case rE.scaleDown:t=Jx;break;case rE.fadeOut:t=Qx}return null==t&&(t=f),this.transitOutCallback=t,this}requestClose(t){return"OPEN"===this._state.state&&(this.closeEventData=arguments.length>0?t:this.parent,this._state.next()),this}};var sE=function(t,e){var i=new nE(t,e);return i.on("open",(function(){t.emit("modal.open",i)})),i.on("close",(function(e){t.emit("modal.close",e,i)})),t.on("modal.requestClose",i.requestClose,i),i.on("close",(function(){t.off("modal.requestClose",i.requestClose,i)})),i};class oE extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new n(t)}start(){this.scene.events.on("destroy",this.destroy,this)}isInTouching(t,e,i,r){return!!t.visible&&hd(t,e,i,r)}get viewport(){return hl(this.scene,!0)}}var aE={getParentSizer:kn,getTopmostSizer:Rn,hide:rd,show:id,isShown:nd,edit:function(t,e,i){return t._edit||(t._edit=new qx(t)),t._edit.open(e,i),t._edit},wrapExpandText:function(t,e){return void 0===e&&(e=0),t._minWidth=e,t.runWidthWrap=function(t){return t instanceof fo}(t)?function(t){return function(e){return t.setFixedSize(e,0).runWordWrap(),t}}(t):dw(t)?function(t){return function(e){return t.setMaxWidth(e),t}}(t):function(t){return function(e){var i=t.padding,r=e-i.left-i.right,n=t.style;return lw(t)?(n.wordWrapWidth=r,n.maxLines=0):(0===n.wrapMode&&(n.wrapMode=1),n.wrapWidth=r,n.maxLines=0),t.setFixedSize(e,0),t}}(t),t},waitEvent:$a,waitComplete:Ja,delayPromise:function(t,e){return void 0===t&&(t=0),new Promise((function(i,r){setTimeout((function(){i(e)}),t)}))},setChildrenInteractive:Jf,fadeIn:Pu,fadeOutDestroy:Iu,easeMoveTo:ju,easeMoveFrom:Vu,modal:sE,modalPromise:function(t,e){var i=sE(t,e);return new Promise((function(t,e){i.once("close",(function(e){t(e)}))}))},modalClose:function(t,e){t.emit("modal.requestClose",e)},requestDrag:rx};Object.assign(oE.prototype,aE);const hE=oE},290:(t,e,i)=>{"use strict";t.exports=i(96114).default},96114:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(28951),s=r(i(1476)),o=r(i(5003)),a=i(56512),h=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((t=>new n.Netmask(t)));function c(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}e.default=t=>{if(a.isValid(t)){const e=a.parse(t);if("ipv4"===e.kind())return function(t){for(let e of h)if(e.contains(t))return!0;return!1}(e.toNormalizedString());if("ipv6"===e.kind())return c(t)}else if(o.default(t)&&s.default.v6().test(t))return c(t)}},34155:t=>{var e,i,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var a,h=[],c=!1,l=-1;function u(){c&&a&&(c=!1,a.length?h=a.concat(h):l=-1,h.length&&d())}function d(){if(!c){var t=o(u);c=!0;for(var e=h.length;e;){for(a=h,h=[];++l<e;)a&&a[l].run();l=-1,e=h.length}a=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||c||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},54501:t=>{"use strict";var e;t.exports.timeout=function(t,i){var r,n=new e;return Promise.race([t,new Promise((function(t,e){r=setTimeout((function(){e(n)}),i)}))]).then((function(t){return clearTimeout(r),t}),(function(t){throw clearTimeout(r),t}))},(e=t.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),e.prototype.name="TimeoutError"},62100:(t,e,i)=>{"use strict";t.exports=i(89482)},89482:(t,e,i)=>{"use strict";var r=e;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=i(41173),r.BufferWriter=i(43155),r.Reader=i(51408),r.BufferReader=i(50593),r.util=i(99693),r.rpc=i(35994),r.roots=i(85054),r.configure=n,n()},51408:(t,e,i)=>{"use strict";t.exports=h;var r,n=i(99693),s=n.LongBits,o=n.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")},u=function(){return n.Buffer?function(t){return(h.create=function(t){return n.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l};function d(){var t=new s(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}h.create=u(),h.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,h.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,i):e===i?new this.buf.constructor(0):this._slice.call(this.buf,e,i)},h.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h._configure=function(t){r=t,h.create=u(),r._configure();var e=n.Long?"toLong":"toNumber";n.merge(h.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},50593:(t,e,i)=>{"use strict";t.exports=s;var r=i(51408);(s.prototype=Object.create(r.prototype)).constructor=s;var n=i(99693);function s(t){r.call(this,t)}s._configure=function(){n.Buffer&&(s.prototype._slice=n.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._configure()},85054:t=>{"use strict";t.exports={}},35994:(t,e,i)=>{"use strict";e.Service=i(77948)},77948:(t,e,i)=>{"use strict";t.exports=n;var r=i(99693);function n(t,e,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(i)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,i,n,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(t,a,e,i,n,s);if(a.rpcImpl)try{return a.rpcImpl(e,i[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(t,i){if(t)return a.emit("error",t,e),o(t);if(null!==i){if(!(i instanceof n))try{i=n[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",i,e),o(null,i)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(t,e,i)=>{"use strict";t.exports=n;var r=i(99693);function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var s=n.zero=new n(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return s;var e=t<0;e&&(t=-t);var i=t>>>0,r=(t-i)/4294967296>>>0;return e&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new n(i,r)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(r.isString(t)){if(!r.Long)return n.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):s},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,i=~this.hi>>>0;return e||(i=i+1>>>0),-(e+4294967296*i)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?s:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10}},99693:function(t,e,i){"use strict";var r=e;function n(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;++n)void 0!==t[r[n]]&&i||(t[r[n]]=e[r[n]]);return t}function s(t){function e(t,i){if(!(this instanceof e))return new e(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=i(34537),r.base64=i(97419),r.EventEmitter=i(19211),r.float=i(10945),r.inquire=i(67199),r.utf8=i(94997),r.pool=i(76662),r.LongBits=i(1945),r.isNode=Boolean(void 0!==i.g&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),r.global=r.isNode&&i.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var i=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(i.lo,i.hi,e):i.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=s,r.ProtocolError=s("ProtocolError"),r.oneOfGetter=function(t){for(var e={},i=0;i<t.length;++i)e[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;i>-1;--i)if(1===e[t[i]]&&void 0!==this[t[i]]&&null!==this[t[i]])return t[i]}},r.oneOfSetter=function(t){return function(e){for(var i=0;i<t.length;++i)t[i]!==e&&delete this[t[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,i){return new t(e,i)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},41173:(t,e,i)=>{"use strict";t.exports=u;var r,n=i(99693),s=n.LongBits,o=n.base64,a=n.utf8;function h(t,e,i){this.fn=t,this.len=e,this.next=void 0,this.val=i}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new h(c,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function f(t,e,i){e[i]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo}function y(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}u.create=d(),u.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype._push=function(t,e,i){return this.tail=this.tail.next=new h(t,e,i),this.len+=e,this},p.prototype=Object.create(h.prototype),p.prototype.fn=function(t,e,i){for(;t>127;)e[i++]=127&t|128,t>>>=7;e[i]=t},u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this._push(g,10,s.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var e=s.from(t);return this._push(g,e.length(),e)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var e=s.from(t).zzEncode();return this._push(g,e.length(),e)},u.prototype.bool=function(t){return this._push(f,1,t?1:0)},u.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var e=s.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this._push(n.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this._push(n.float.writeDoubleLE,8,t)};var m=n.Array.prototype.set?function(t,e,i){e.set(t,i)}:function(t,e,i){for(var r=0;r<t.length;++r)e[i+r]=t[r]};u.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(n.isString(t)){var i=u.alloc(e=o.length(t));o.decode(t,i,0),t=i}return this.uint32(e)._push(m,e,t)},u.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new h(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new h(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this},u.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e},u._configure=function(t){r=t,u.create=d(),r._configure()}},43155:(t,e,i)=>{"use strict";t.exports=s;var r=i(41173);(s.prototype=Object.create(r.prototype)).constructor=s;var n=i(99693);function s(){r.call(this)}function o(t,e,i){t.length<40?n.utf8.write(t,e,i):e.utf8Write?e.utf8Write(t,i):e.write(t,i)}s._configure=function(){s.alloc=n._Buffer_allocUnsafe,s.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,i){e.set(t,i)}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var r=0;r<t.length;)e[i++]=t[r++]}},s.prototype.bytes=function(t){n.isString(t)&&(t=n._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s.writeBytesBuffer,e,t),this},s.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},s._configure()},7900:(t,e,i)=>{e.publicEncrypt=i(16559),e.privateDecrypt=i(26138),e.privateEncrypt=function(t,i){return e.publicEncrypt(t,i,!0)},e.publicDecrypt=function(t,i){return e.privateDecrypt(t,i,!0)}},99199:(t,e,i)=>{var r=i(23482),n=i(89509).Buffer;function s(t){var e=n.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var i,o=n.alloc(0),a=0;o.length<e;)i=s(a++),o=n.concat([o,r("sha1").update(t).update(i).digest()]);return o.slice(0,e)}},26138:(t,e,i)=>{var r=i(70980),n=i(99199),s=i(57859),o=i(13550),a=i(23663),h=i(23482),c=i(84818),l=i(89509).Buffer;t.exports=function(t,e,i){var u;u=t.padding?t.padding:i?1:4;var d,f=r(t),p=f.modulus.byteLength();if(e.length>p||new o(e).cmp(f.modulus)>=0)throw new Error("decryption error");d=i?c(new o(e),f):a(e,f);var g=l.alloc(p-d.length);if(d=l.concat([g,d],p),4===u)return function(t,e){var i=t.modulus.byteLength(),r=h("sha1").update(l.alloc(0)).digest(),o=r.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,o+1),c=e.slice(o+1),u=s(a,n(c,o)),d=s(c,n(u,i-o-1));if(function(t,e){t=l.from(t),e=l.from(e);var i=0,r=t.length;t.length!==e.length&&(i++,r=Math.min(t.length,e.length));for(var n=-1;++n<r;)i+=t[n]^e[n];return i}(r,d.slice(0,o)))throw new Error("decryption error");for(var f=o;0===d[f];)f++;if(1!==d[f++])throw new Error("decryption error");return d.slice(f)}(f,d);if(1===u)return function(t,e,i){for(var r=e.slice(0,2),n=2,s=0;0!==e[n++];)if(n>=e.length){s++;break}var o=e.slice(2,n-1);if(("0002"!==r.toString("hex")&&!i||"0001"!==r.toString("hex")&&i)&&s++,o.length<8&&s++,s)throw new Error("decryption error");return e.slice(n)}(0,d,i);if(3===u)return d;throw new Error("unknown padding")}},16559:(t,e,i)=>{var r=i(70980),n=i(61798),s=i(23482),o=i(99199),a=i(57859),h=i(13550),c=i(84818),l=i(23663),u=i(89509).Buffer;t.exports=function(t,e,i){var d;d=t.padding?t.padding:i?1:4;var f,p=r(t);if(4===d)f=function(t,e){var i=t.modulus.byteLength(),r=e.length,c=s("sha1").update(u.alloc(0)).digest(),l=c.length,d=2*l;if(r>i-d-2)throw new Error("message too long");var f=u.alloc(i-r-d-2),p=i-l-1,g=n(l),y=a(u.concat([c,f,u.alloc(1,1),e],p),o(g,p)),m=a(g,o(y,l));return new h(u.concat([u.alloc(1),m,y],i))}(p,e);else if(1===d)f=function(t,e,i){var r,s=e.length,o=t.modulus.byteLength();if(s>o-11)throw new Error("message too long");return r=i?u.alloc(o-s-3,255):function(t){for(var e,i=u.allocUnsafe(t),r=0,s=n(2*t),o=0;r<t;)o===s.length&&(s=n(2*t),o=0),(e=s[o++])&&(i[r++]=e);return i}(o-s-3),new h(u.concat([u.from([0,i?1:2]),r,u.alloc(1),e],o))}(p,e,i);else{if(3!==d)throw new Error("unknown padding");if((f=new h(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return i?l(f,p):c(f,p)}},84818:(t,e,i)=>{var r=i(13550),n=i(89509).Buffer;t.exports=function(t,e){return n.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},57859:t=>{t.exports=function(t,e){for(var i=t.length,r=-1;++r<i;)t[r]^=e[r];return t}},54375:(t,e,i)=>{let r;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:i.g):t=>(r||(r=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))},33286:(t,e,i)=>{const{instantiate:r}=i(19824);function n(t={}){if(!n.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([e],{type:"application/wasm"})),t)}n.supported="undefined"!=typeof WebAssembly,t.exports=n},63060:(t,e,i)=>{const r=i(57118),n=i(33286);t.exports={Rabin:r,create:async(t,e,i,s,o)=>{const a=await n();return new r(a,t,e,i,s,o)}}},57118:t=>{t.exports=class{constructor(t,e=12,i=8192,r=32768,n=64,s){this.bits=e,this.min=i,this.max=r,this.asModule=t,this.rabin=new t.Rabin(e,i,r,n,s),this.polynomial=s}fingerprint(t){const{__retain:e,__release:i,__allocArray:r,__getInt32Array:n,Int32Array_ID:s,Uint8Array_ID:o}=this.asModule,a=e(r(s,new Int32Array(Math.ceil(t.length/this.min)))),h=e(r(o,t)),c=n(this.rabin.fingerprint(h,a));i(h),i(a);const l=c.indexOf(0);return l>=0?c.subarray(0,l):c}}},61798:(t,e,i)=>{"use strict";var r=i(34155),n=65536,s=i(89509).Buffer,o=i.g.crypto||i.g.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=s.allocUnsafe(t);if(t>0)if(t>n)for(var a=0;a<t;a+=n)o.getRandomValues(i.slice(a,a+n));else o.getRandomValues(i);return"function"==typeof e?r.nextTick((function(){e(null,i)})):i}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},77963:(t,e,i)=>{"use strict";var r=i(34155);function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var s=i(89509),o=i(61798),a=s.Buffer,h=s.kMaxLength,c=i.g.crypto||i.g.msCrypto,l=Math.pow(2,32)-1;function u(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>l||t<0)throw new TypeError("offset must be a uint32");if(t>h||t>e)throw new RangeError("offset out of range")}function d(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>l||t<0)throw new TypeError("size must be a uint32");if(t+e>i||t>h)throw new RangeError("buffer too small")}function f(t,e,i,n){if(r.browser){var s=t.buffer,a=new Uint8Array(s,e,i);return c.getRandomValues(a),n?void r.nextTick((function(){n(null,t)})):t}if(!n)return o(i).copy(t,e),t;o(i,(function(i,r){if(i)return n(i);r.copy(t,e),n(null,t)}))}c&&c.getRandomValues||!r.browser?(e.randomFill=function(t,e,r,n){if(!(a.isBuffer(t)||t instanceof i.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)n=e,e=0,r=t.length;else if("function"==typeof r)n=r,r=t.length-e;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return u(e,t.length),d(r,e,t.length),f(t,e,r,n)},e.randomFillSync=function(t,e,r){if(void 0===e&&(e=0),!(a.isBuffer(t)||t instanceof i.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return u(e,t.length),void 0===r&&(r=t.length-e),d(r,e,t.length),f(t,e,r)}):(e.randomFill=n,e.randomFillSync=n)},94281:t=>{"use strict";var e={};function i(t,i,r){r||(r=Error);var n=function(t){var e,r;function n(e,r,n){return t.call(this,function(t,e,r){return"string"==typeof i?i:i(t,e,r)}(e,r,n))||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n}(r);n.prototype.name=r.name,n.prototype.code=t,e[t]=n}function r(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,i){var n,s,o,a,h;if("string"==typeof e&&(s="not ",e.substr(0,s.length)===s)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}(t," argument"))o="The ".concat(t," ").concat(n," ").concat(r(e,"type"));else{var c=("number"!=typeof h&&(h=0),h+".".length>(a=t).length||-1===a.indexOf(".",h)?"argument":"property");o='The "'.concat(t,'" ').concat(c," ").concat(n," ").concat(r(e,"type"))}return o+". Received type ".concat(typeof i)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e},56753:(t,e,i)=>{"use strict";var r=i(34155),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=l;var s=i(79481),o=i(64229);i(35717)(l,s);for(var a=n(o.prototype),h=0;h<a.length;h++){var c=a[h];l.prototype[c]||(l.prototype[c]=o.prototype[c])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},82725:(t,e,i)=>{"use strict";t.exports=n;var r=i(74605);function n(t){if(!(this instanceof n))return new n(t);r.call(this,t)}i(35717)(n,r),n.prototype._transform=function(t,e,i){i(null,t)}},79481:(t,e,i)=>{"use strict";var r,n=i(34155);t.exports=T,T.ReadableState=S,i(17187).EventEmitter;var s,o=function(t,e){return t.listeners(e).length},a=i(22503),h=i(48764).Buffer,c=i.g.Uint8Array||function(){},l=i(94616);s=l&&l.debuglog?l.debuglog("stream"):function(){};var u,d,f,p=i(57327),g=i(61195),y=i(82457).getHighWaterMark,m=i(94281).q,v=m.ERR_INVALID_ARG_TYPE,b=m.ERR_STREAM_PUSH_AFTER_EOF,w=m.ERR_METHOD_NOT_IMPLEMENTED,_=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(35717)(T,a);var x=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,e,n){r=r||i(56753),t=t||{},"boolean"!=typeof n&&(n=e instanceof r),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=i(32553).s),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function T(t){if(r=r||i(56753),!(this instanceof T))return new T(t);var e=this instanceof r;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function A(t,e,i,r,n){s("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(s("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?P(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,I(t)))}}(t,a);else if(n||(o=function(t,e){var i,r;return r=e,h.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(i=new v("chunk",["string","Buffer","Uint8Array"],e)),i}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),r)a.endEmitted?x(t,new _):C(t,a,e,!0);else if(a.ended)x(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?C(t,a,e,!1):O(t,a)):C(t,a,e,!1)}else r||(a.reading=!1,O(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function C(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&P(t)),O(t,e)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),T.prototype.destroy=g.destroy,T.prototype._undestroy=g.undestroy,T.prototype._destroy=function(t,e){e(t)},T.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),i=!0),A(this,t,e,!1,i)},T.prototype.unshift=function(t){return A(this,t,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(t){u||(u=i(32553).s);var e=new u(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var k=1073741824;function R(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=k?t=k:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;s("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(s("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(I,t))}function I(t){var e=t._readableState;s("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function O(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(M,t,e))}function M(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(s("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function D(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function B(t){s("readable nexttick read 0"),t.read(0)}function L(t,e){s("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(s("flow",e.flowing);e.flowing&&null!==t.read(););}function U(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function F(t){var e=t._readableState;s("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(z,e,t))}function z(t,e){if(s("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function j(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}T.prototype.read=function(t){s("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return s("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?F(this):P(this),null;if(0===(t=R(t,e))&&e.ended)return 0===e.length&&F(this),null;var r,n=e.needReadable;return s("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&s("length less than watermark",n=!0),e.ended||e.reading?s("reading or ended",n=!1):n&&(s("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=R(i,e))),null===(r=t>0?U(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&F(this)),null!==r&&this.emit("data",r),r},T.prototype._read=function(t){x(this,new w("_read()"))},T.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,s("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===n.stdout||t===n.stderr?g:h;function h(){s("onend"),t.end()}r.endEmitted?n.nextTick(a):i.once("end",a),t.on("unpipe",(function e(n,o){s("onunpipe"),n===i&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,s("cleanup"),t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",e),i.removeListener("end",h),i.removeListener("end",g),i.removeListener("data",u),l=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}));var c=function(t){return function(){var e=t._readableState;s("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(i);t.on("drain",c);var l=!1;function u(e){s("ondata");var n=t.write(e);s("dest.write",n),!1===n&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==j(r.pipes,t))&&!l&&(s("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function d(e){s("onerror",e),g(),t.removeListener("error",d),0===o(t,"error")&&x(t,e)}function f(){t.removeListener("finish",p),g()}function p(){s("onfinish"),t.removeListener("close",f),g()}function g(){s("unpipe"),i.unpipe(t)}return i.on("data",u),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on(e,i)}(t,"error",d),t.once("close",f),t.once("finish",p),t.emit("pipe",i),r.flowing||(s("pipe resume"),i.resume()),t},T.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},T.prototype.on=function(t,e){var i=a.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,s("on readable",r.length,r.reading),r.length?P(this):r.reading||n.nextTick(B,this))),i},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(t,e){var i=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(D,this),i},T.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(D,this),e},T.prototype.resume=function(){var t=this._readableState;return t.flowing||(s("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(L,t,e))}(this,t)),t.paused=!1,this},T.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",(function(){if(s("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){s("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){s("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=i(45850)),d(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),T._fromList=U,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(t,e){return void 0===f&&(f=i(15167)),f(T,t,e)})},74605:(t,e,i)=>{"use strict";t.exports=l;var r=i(94281).q,n=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,h=i(56753);function c(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new s);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);h.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",u)}function u(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(e,i){d(t,e,i)}))}function d(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}i(35717)(l,h),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,h.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,i){i(new n("_transform()"))},l.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){h.prototype._destroy.call(this,t,(function(t){e(t)}))}},64229:(t,e,i)=>{"use strict";var r,n=i(34155);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(undefined),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=T,T.WritableState=S;var o,a={deprecate:i(94927)},h=i(22503),c=i(48764).Buffer,l=i.g.Uint8Array||function(){},u=i(61195),d=i(82457).getHighWaterMark,f=i(94281).q,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,y=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,w=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,x=u.errorOrDestroy;function E(){}function S(t,e,o){r=r||i(56753),t=t||{},"boolean"!=typeof o&&(o=e instanceof r),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,s=i.writecb;if("function"!=typeof s)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,s){--e.pendingcb,i?(n.nextTick(s,r),n.nextTick(I,t,e),t._writableState.errorEmitted=!0,x(t,r)):(s(r),t._writableState.errorEmitted=!0,x(t,r),I(t,e))}(t,i,r,e,s);else{var o=R(i)||t.destroyed;o||i.corked||i.bufferProcessing||!i.bufferedRequest||k(t,i),r?n.nextTick(C,t,i,o,s):C(t,i,o,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function T(t){var e=this instanceof(r=r||i(56753));if(!e&&!o.call(T,this))return new T(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function A(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function C(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),I(t,e)}function k(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),o=e.corkedRequestsFree;o.entry=i;for(var a=0,h=!0;i;)n[a]=i,i.isBuf||(h=!1),i=i.next,a+=1;n.allBuffers=h,A(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,l=i.encoding,u=i.callback;if(A(t,e,!1,e.objectMode?1:c.length,c,l,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function R(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function P(t,e){t._final((function(i){e.pendingcb--,i&&x(t,i),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var i=R(e);if(i&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(P,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}i(35717)(T,h),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===T&&t&&t._writableState instanceof S}})):o=function(t){return t instanceof this},T.prototype.pipe=function(){x(this,new m)},T.prototype.write=function(t,e,i){var r,s=this._writableState,o=!1,a=!s.objectMode&&(r=t,c.isBuffer(r)||r instanceof l);return a&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof i&&(i=E),s.ending?function(t,e){var i=new w;x(t,i),n.nextTick(e,i)}(this,i):(a||function(t,e,i,r){var s;return null===i?s=new b:"string"==typeof i||e.objectMode||(s=new p("chunk",["string","Buffer"],i)),!s||(x(t,s),n.nextTick(r,s),!1)}(this,s,t,i))&&(s.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i)),e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,a,r,n,s);return h}(this,s,a,t,e,i)),o},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||k(this,t))},T.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(t,e,i){i(new g("_write()"))},T.prototype._writev=null,T.prototype.end=function(t,e,i){var r=this._writableState;return"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,i){e.ending=!0,I(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}(this,r,i),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),T.prototype.destroy=u.destroy,T.prototype._undestroy=u.undestroy,T.prototype._destroy=function(t,e){e(t)}},45850:(t,e,i)=>{"use strict";var r,n=i(34155);function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=i(8610),a=Symbol("lastResolve"),h=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function g(t){var e=t[a];if(null!==e){var i=t[f].read();null!==i&&(t[u]=null,t[a]=null,t[h]=null,e(p(i,!1)))}}function y(t){n.nextTick(g,t)}var m=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(e,i){n.nextTick((function(){t[c]?i(t[c]):e(p(void 0,!0))}))}));var i,r=this[u];if(r)i=new Promise(function(t,e){return function(i,r){t.then((function(){e[l]?i(p(void 0,!0)):e[d](i,r)}),r)}}(r,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(p(s,!1));i=new Promise(this[d])}return this[u]=i,i}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var t=this;return new Promise((function(e,i){t[f].destroy(null,(function(t){t?i(t):e(p(void 0,!0))}))}))})),r),m);t.exports=function(t){var e,i=Object.create(v,(s(e={},f,{value:t,writable:!0}),s(e,a,{value:null,writable:!0}),s(e,h,{value:null,writable:!0}),s(e,c,{value:null,writable:!0}),s(e,l,{value:t._readableState.endEmitted,writable:!0}),s(e,d,{value:function(t,e){var r=i[f].read();r?(i[u]=null,i[a]=null,i[h]=null,t(p(r,!1))):(i[a]=t,i[h]=e)},writable:!0}),e));return i[u]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[h];return null!==e&&(i[u]=null,i[a]=null,i[h]=null,e(t)),void(i[c]=t)}var r=i[a];null!==r&&(i[u]=null,i[a]=null,i[h]=null,r(p(void 0,!0))),i[l]=!0})),t.on("readable",y.bind(null,i)),i}},57327:(t,e,i)=>{"use strict";function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=i(48764).Buffer,a=i(52361).inspect,h=a&&a.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return o.alloc(0);for(var e,i,r,n=o.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,i=n,r=a,o.prototype.copy.call(e,i,r),a+=s.data.length,s=s.next;return n}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,s=t>n.length?n.length:t;if(s===n.length?r+=n:r+=n.slice(0,t),0==(t-=s)){s===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(s));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=o.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,s=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,s),0==(t-=s)){s===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(s));break}++r}return this.length-=r,e}},{key:h,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],i&&s(e.prototype,i),t}()},61195:(t,e,i)=>{"use strict";var r=i(34155);function n(t,e){o(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,t)):r.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?i._writableState?i._writableState.errorEmitted?r.nextTick(s,i):(i._writableState.errorEmitted=!0,r.nextTick(n,i,t)):r.nextTick(n,i,t):e?(r.nextTick(s,i),e(t)):r.nextTick(s,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},8610:(t,e,i)=>{"use strict";var r=i(94281).q.ERR_STREAM_PREMATURE_CLOSE;function n(){}t.exports=function t(e,i,s){if("function"==typeof i)return t(e,null,i);i||(i={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}(s||n);var o=i.readable||!1!==i.readable&&e.readable,a=i.writable||!1!==i.writable&&e.writable,h=function(){e.writable||l()},c=e._writableState&&e._writableState.finished,l=function(){a=!1,c=!0,o||s.call(e)},u=e._readableState&&e._readableState.endEmitted,d=function(){o=!1,u=!0,a||s.call(e)},f=function(t){s.call(e,t)},p=function(){var t;return o&&!u?(e._readableState&&e._readableState.ended||(t=new r),s.call(e,t)):a&&!c?(e._writableState&&e._writableState.ended||(t=new r),s.call(e,t)):void 0},g=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",p),e.req?g():e.on("request",g)):a&&!e._writableState&&(e.on("end",h),e.on("close",h)),e.on("end",d),e.on("finish",l),!1!==i.error&&e.on("error",f),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",l),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",l),e.removeListener("end",d),e.removeListener("error",f),e.removeListener("close",p)}}},15167:t=>{t.exports=function(){throw new Error("Readable.from is not available in the browser")}},59946:(t,e,i)=>{"use strict";var r,n=i(94281).q,s=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function h(t,e,n,s){s=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),void 0===r&&(r=i(8610)),r(t,{readable:e,writable:n},(function(t){if(t)return s(t);a=!0,s()}));var h=!1;return function(e){if(!a&&!h)return h=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}function c(t){t()}function l(t,e){return t.pipe(e)}function u(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,n=u(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s("streams");var o=e.map((function(t,i){var s=i<e.length-1;return h(t,s,i>0,(function(t){r||(r=t),t&&o.forEach(c),s||(o.forEach(c),n(r))}))}));return e.reduce(l)}},82457:(t,e,i)=>{"use strict";var r=i(94281).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,n){var s=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,n,i);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(n?i:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}},22503:(t,e,i)=>{t.exports=i(17187).EventEmitter},88473:(t,e,i)=>{(e=t.exports=i(79481)).Stream=e,e.Readable=e,e.Writable=i(64229),e.Duplex=i(56753),e.Transform=i(74605),e.PassThrough=i(82725),e.finished=i(8610),e.pipeline=i(59946)},73692:(t,e,i)=>{"use strict";t.exports=o;var r=i(57824),n=o.prototype,s=new Date%1e9;function o(t){t=t||{},this.id=t.id||(1e9*Math.random()>>>0)+s++,this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,i,r=this.items.length;r--;)e=this.items[r],i=new Date(e.expires)-new Date,this._lookup[e.key]=e,i>0?this.expire(e.key,i):i<=0&&this.delete(e.key)}n.has=function(t){return t in this._lookup},n.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value},n.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null},n.set=function(t,e,i){var r=this._lookup[t],n=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,r?(clearTimeout(r.timeout),this.items.splice(this.items.indexOf(r),1,n)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(n),this.size++),i&&("ttl"in i&&this.expire(t,i.ttl),"meta"in i&&(n.meta=i.meta),i.refresh&&(n.refresh=i.ttl)),this},n.delete=function(t){var e=this._lookup[t];return!!e&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this)},n.expire=function(t,e){var i=e||0,n=this._lookup[t];if(!n)return this;if("string"==typeof i&&(i=r(e)),"number"!=typeof i)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(n.timeout),n.timeout=setTimeout(this.delete.bind(this,n.key),i),n.expires=Number(new Date)+i,this},n.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this},n.toJSON=function(){for(var t,e=new Array(this.items.length),i=e.length;i--;)t=this.items[i],e[i]={key:t.key,meta:t.meta,value:t.value,expires:t.expires,refresh:t.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:e}}},82916:(t,e,i)=>{"use strict";const r=i(41807);class n{constructor(t,e,i){const n=this;this._started=r(),this._rescheduled=0,this._scheduled=e,this._args=i,this._triggered=!1,this._timerWrapper=()=>{n._rescheduled>0?(n._scheduled=n._rescheduled-(r()-n._started),n._schedule(n._scheduled)):(n._triggered=!0,t.apply(null,n._args))},this._timer=setTimeout(this._timerWrapper,e)}reschedule(t){t||(t=this._scheduled);const e=r();e+t-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(t)):this._triggered?this._schedule(t):(this._started=e,this._rescheduled=t)}_schedule(t){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=t,this._timer=setTimeout(this._timerWrapper,t)}clear(){clearTimeout(this._timer)}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new n(arguments[0],arguments[1],t)}},41807:t=>{"use strict";t.exports=function(){return Date.now()}},99353:(t,e,i)=>{t.exports=i(71846)},71846:(t,e,i)=>{var r=i(41960);e.operation=function(t){var i=e.timeouts(t);return new r(i,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in t)e[i]=t[i];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],n=0;n<e.retries;n++)r.push(this.createTimeout(n,e));return t&&t.forever&&!r.length&&r.push(this.createTimeout(n,e)),r.sort((function(t,e){return t-e})),r},e.createTimeout=function(t,e){var i=e.randomize?Math.random()+1:1,r=Math.round(i*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return Math.min(r,e.maxTimeout)},e.wrap=function(t,i,r){if(i instanceof Array&&(r=i,i=null),!r)for(var n in r=[],t)"function"==typeof t[n]&&r.push(n);for(var s=0;s<r.length;s++){var o=r[s],a=t[o];t[o]=function(r){var n=e.operation(i),s=Array.prototype.slice.call(arguments,1),o=s.pop();s.push((function(t){n.retry(t)||(t&&(arguments[0]=n.mainError()),o.apply(this,arguments))})),n.attempt((function(){r.apply(t,s)}))}.bind(t,a),t[o].options=i}}},41960:t=>{function e(t,e){"boolean"==typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),i),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){i._operationTimeoutCb()}),i._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},e.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},e.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,i=0,r=0;r<this._errors.length;r++){var n=this._errors[r],s=n.message,o=(t[s]||0)+1;t[s]=o,o>=i&&(e=n,i=o)}return e}},79785:(t,e,i)=>{"use strict";var r=i(48764).Buffer,n=i(35717),s=i(3349),o=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function f(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function g(t,e,i,r,n,s,o,a){return p(t+(e^i^r)+s+o|0,a)+n|0}function y(t,e,i,r,n,s,o,a){return p(t+(e&i|~e&r)+s+o|0,a)+n|0}function m(t,e,i,r,n,s,o,a){return p(t+((e|~i)^r)+s+o|0,a)+n|0}function v(t,e,i,r,n,s,o,a){return p(t+(e&r|i&~r)+s+o|0,a)+n|0}function b(t,e,i,r,n,s,o,a){return p(t+(e^(i|~r))+s+o|0,a)+n|0}n(f,s),f.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,r=0|this._b,n=0|this._c,s=0|this._d,f=0|this._e,w=0|this._a,_=0|this._b,x=0|this._c,E=0|this._d,S=0|this._e,T=0;T<80;T+=1){var A,C;T<16?(A=g(i,r,n,s,f,t[a[T]],u[0],c[T]),C=b(w,_,x,E,S,t[h[T]],d[0],l[T])):T<32?(A=y(i,r,n,s,f,t[a[T]],u[1],c[T]),C=v(w,_,x,E,S,t[h[T]],d[1],l[T])):T<48?(A=m(i,r,n,s,f,t[a[T]],u[2],c[T]),C=m(w,_,x,E,S,t[h[T]],d[2],l[T])):T<64?(A=v(i,r,n,s,f,t[a[T]],u[3],c[T]),C=y(w,_,x,E,S,t[h[T]],d[3],l[T])):(A=b(i,r,n,s,f,t[a[T]],u[4],c[T]),C=g(w,_,x,E,S,t[h[T]],d[4],l[T])),i=f,f=s,s=p(n,10),n=r,r=A,w=S,S=E,E=p(x,10),x=_,_=C}var k=this._b+n+E|0;this._b=this._c+s+S|0,this._c=this._d+f+w|0,this._d=this._e+i+_|0,this._e=this._a+r+x|0,this._a=k},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=f},29967:(t,e,i)=>{t.exports=function(t,e,i){if("number"!=typeof e)throw new Error("second argument must be a Number");let n,s,o,a,h,c,l=!0;function u(t){function e(){i&&i(t,n),i=null}l?r(e):e()}function d(e,i,r){if(n[e]=r,i&&(h=!0),0==--o||i)u(i);else if(!h&&c<s){let e;a?(e=a[c],c+=1,t[e]((function(t,i){d(e,t,i)}))):(e=c,c+=1,t[e]((function(t,i){d(e,t,i)})))}}Array.isArray(t)?(n=[],o=s=t.length):(a=Object.keys(t),n={},o=s=a.length),c=e,o?a?a.some((function(i,r){return t[i]((function(t,e){d(i,t,e)})),r===e-1})):t.some((function(t,i){return t((function(t,e){d(i,t,e)})),i===e-1})):u(null),l=!1};const r=i(54375)},89509:(t,e,i)=>{var r=i(48764),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},2399:(t,e,i)=>{"use strict";var r,n=i(34155),s=i(48764),o=s.Buffer,a={};for(r in s)s.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(a[r]=s[r]);var h=a.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(h[r]=o[r]);if(a.Buffer.prototype=o.prototype,h.from&&h.from!==Uint8Array.from||(h.from=function(t,e,i){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,i)}),h.alloc||(h.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=o(t);return e&&0!==e.length?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a},50202:(t,e,i)=>{"use strict";var r=i(63700),n=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,h=/[\. ]+$/;function c(t,e){if("string"!=typeof t)throw new Error("Input must be string");var i=t.replace(n,e).replace(s,e).replace(o,e).replace(a,e).replace(h,e);return r(i,255)}t.exports=function(t,e){var i=e&&e.replacement||"",r=c(t,i);return""===i?r:c(r,"")}},27695:t=>{"use strict";const e=new Map;t.exports={setDelayedInterval:function(t,i,r){r=r||i;const n=`${Date.now()}:${Math.floor(1e6*Math.random())}`,s=setTimeout((()=>{!async function(t,i,r){for(;e.get(r);){try{await t()}catch(t){setTimeout((()=>{throw t}),1);break}if(!e.get(r))break;await new Promise((t=>{const n=setTimeout(t,i);e.set(r,n)}))}}(t,i,n)}),r);return e.set(n,s),n},clearDelayedInterval:function(t){const i=e.get(t);i&&(clearTimeout(i),e.delete(t))}}},24189:(t,e,i)=>{var r=i(89509).Buffer;function n(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}n.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=r.from(t,e));for(var i=this._block,n=this._blockSize,s=t.length,o=this._len,a=0;a<s;){for(var h=o%n,c=Math.min(s-a,n-h),l=0;l<c;l++)i[h+l]=t[a+l];a+=c,(o+=c)%n==0&&this._update(i)}return this._len+=s,this},n.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var r=(4294967295&i)>>>0,n=(i-r)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n},89072:(t,e,i)=>{var r=t.exports=function(t){t=t.toLowerCase();var e=r[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};r.sha=i(74448),r.sha1=i(18336),r.sha224=i(48432),r.sha256=i(67499),r.sha384=i(51686),r.sha512=i(87816)},74448:(t,e,i)=>{var r=i(35717),n=i(24189),s=i(89509).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,n.call(this,64,56)}function c(t){return t<<30|t>>>2}function l(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}r(h,n),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,s=0|this._c,a=0|this._d,h=0|this._e,u=0;u<16;++u)i[u]=t.readInt32BE(4*u);for(;u<80;++u)i[u]=i[u-3]^i[u-8]^i[u-14]^i[u-16];for(var d=0;d<80;++d){var f=~~(d/20),p=0|((e=r)<<5|e>>>27)+l(f,n,s,a)+h+i[d]+o[f];h=a,a=s,s=c(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var t=s.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},18336:(t,e,i)=>{var r=i(35717),n=i(24189),s=i(89509).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,n.call(this,64,56)}function c(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function u(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}r(h,n),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,s=0|this._c,a=0|this._d,h=0|this._e,d=0;d<16;++d)i[d]=t.readInt32BE(4*d);for(;d<80;++d)i[d]=(e=i[d-3]^i[d-8]^i[d-14]^i[d-16])<<1|e>>>31;for(var f=0;f<80;++f){var p=~~(f/20),g=c(r)+u(p,n,s,a)+h+i[f]+o[p]|0;h=a,a=s,s=l(n),n=r,r=g}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var t=s.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},48432:(t,e,i)=>{var r=i(35717),n=i(67499),s=i(24189),o=i(89509).Buffer,a=new Array(64);function h(){this.init(),this._w=a,s.call(this,64,56)}r(h,n),h.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=h},67499:(t,e,i)=>{var r=i(35717),n=i(24189),s=i(89509).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function h(){this.init(),this._w=a,n.call(this,64,56)}function c(t,e,i){return i^t&(e^i)}function l(t,e,i){return t&e|i&(t|e)}function u(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function d(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function f(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(h,n),h.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},h.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,s=0|this._c,a=0|this._d,h=0|this._e,p=0|this._f,g=0|this._g,y=0|this._h,m=0;m<16;++m)i[m]=t.readInt32BE(4*m);for(;m<64;++m)i[m]=0|(((e=i[m-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+i[m-7]+f(i[m-15])+i[m-16];for(var v=0;v<64;++v){var b=y+d(h)+c(h,p,g)+o[v]+i[v]|0,w=u(r)+l(r,n,s)|0;y=g,g=p,p=h,h=a+b|0,a=s,s=n,n=r,r=b+w|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0,this._f=p+this._f|0,this._g=g+this._g|0,this._h=y+this._h|0},h.prototype._hash=function(){var t=s.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=h},51686:(t,e,i)=>{var r=i(35717),n=i(87816),s=i(24189),o=i(89509).Buffer,a=new Array(160);function h(){this.init(),this._w=a,s.call(this,128,112)}r(h,n),h.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=h},87816:(t,e,i)=>{var r=i(35717),n=i(24189),s=i(89509).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function h(){this.init(),this._w=a,n.call(this,128,112)}function c(t,e,i){return i^t&(e^i)}function l(t,e,i){return t&e|i&(t|e)}function u(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function d(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function f(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function m(t,e){return t>>>0<e>>>0?1:0}r(h,n),h.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,n=0|this._ch,s=0|this._dh,a=0|this._eh,h=0|this._fh,v=0|this._gh,b=0|this._hh,w=0|this._al,_=0|this._bl,x=0|this._cl,E=0|this._dl,S=0|this._el,T=0|this._fl,A=0|this._gl,C=0|this._hl,k=0;k<32;k+=2)e[k]=t.readInt32BE(4*k),e[k+1]=t.readInt32BE(4*k+4);for(;k<160;k+=2){var R=e[k-30],P=e[k-30+1],I=f(R,P),O=p(P,R),M=g(R=e[k-4],P=e[k-4+1]),D=y(P,R),B=e[k-14],L=e[k-14+1],N=e[k-32],U=e[k-32+1],F=O+L|0,z=I+B+m(F,O)|0;z=(z=z+M+m(F=F+D|0,D)|0)+N+m(F=F+U|0,U)|0,e[k]=z,e[k+1]=F}for(var j=0;j<160;j+=2){z=e[j],F=e[j+1];var V=l(i,r,n),G=l(w,_,x),H=u(i,w),Y=u(w,i),K=d(a,S),W=d(S,a),X=o[j],q=o[j+1],$=c(a,h,v),J=c(S,T,A),Z=C+W|0,Q=b+K+m(Z,C)|0;Q=(Q=(Q=Q+$+m(Z=Z+J|0,J)|0)+X+m(Z=Z+q|0,q)|0)+z+m(Z=Z+F|0,F)|0;var tt=Y+G|0,et=H+V+m(tt,Y)|0;b=v,C=A,v=h,A=T,h=a,T=S,a=s+Q+m(S=E+Z|0,E)|0,s=n,E=x,n=r,x=_,r=i,_=w,i=Q+et+m(w=Z+tt|0,Z)|0}this._al=this._al+w|0,this._bl=this._bl+_|0,this._cl=this._cl+x|0,this._dl=this._dl+E|0,this._el=this._el+S|0,this._fl=this._fl+T|0,this._gl=this._gl+A|0,this._hl=this._hl+C|0,this._ah=this._ah+i+m(this._al,w)|0,this._bh=this._bh+r+m(this._bl,_)|0,this._ch=this._ch+n+m(this._cl,x)|0,this._dh=this._dh+s+m(this._dl,E)|0,this._eh=this._eh+a+m(this._el,S)|0,this._fh=this._fh+h+m(this._fl,T)|0,this._gh=this._gh+v+m(this._gl,A)|0,this._hh=this._hh+b+m(this._hl,C)|0},h.prototype._hash=function(){var t=s.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=h},33694:(t,e,i)=>{"use strict";const r=i(33310);t.exports=(t,e={})=>{if(!r(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");const{deep:i}=e,n=[],s=[],o=t=>{const e=n.indexOf(t);if(-1!==e)return s[e];const i=[];return n.push(t),s.push(i),i.push(...t.map((t=>Array.isArray(t)?o(t):r(t)?a(t):t))),i},a=t=>{const h=n.indexOf(t);if(-1!==h)return s[h];const c={},l=Object.keys(t).sort(e.compare);n.push(t),s.push(c);for(const e of l){const n=t[e];let s;s=i&&Array.isArray(n)?o(n):i&&r(n)?a(n):n,Object.defineProperty(c,e,{...Object.getOwnPropertyDescriptor(t,e),value:s})}return c};return Array.isArray(t)?i?o(t):t.slice():a(t)}},20544:t=>{"use strict";function e(t,e){return t+i(e)}function i(t){let e=t;return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),16843009*(e+(e>>4)&252645135)>>24}function r(t,e){return t[0]-e[0]}function n(t){return t[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(t,e){let i=this._internalPositionFor(t,!1);if(void 0===e)-1!==i&&(this._unsetInternalPos(i),this._unsetBit(t),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===i?(i=this._data.length,this._setBit(t),this._changedData=!0):r=!0,this._setInternalPos(i,t,e,r),this._changedLength=!0}}unset(t){this.set(t,void 0)}get(t){this._sortData();const e=this._internalPositionFor(t,!0);if(-1!==e)return this._data[e][1]}push(t){return this.set(this.length,t),this.length}get length(){if(this._sortData(),this._changedLength){const t=this._data[this._data.length-1];this._length=t?t[0]+1:0,this._changedLength=!1}return this._length}forEach(t){let e=0;for(;e<this.length;)t(this.get(e),e,this),e++}map(t){let e=0,i=new Array(this.length);for(;e<this.length;)i[e]=t(this.get(e),e,this),e++;return i}reduce(t,e){let i=0,r=e;for(;i<this.length;)r=t(r,this.get(i),i),i++;return r}find(t){let e,i,r=0;for(;r<this.length&&!e;)i=this.get(r),e=t(i),r++;return e?i:void 0}_internalPositionFor(t,r){const n=this._bytePosFor(t,r);if(n>=this._bitArrays.length)return-1;const s=this._bitArrays[n],o=t-7*n;return(s&1<<o)>0?this._bitArrays.slice(0,n).reduce(e,0)+i(s&~(4294967295<<o+1))-1:-1}_bytePosFor(t,e){const i=Math.floor(t/7),r=i+1;for(;!e&&this._bitArrays.length<r;)this._bitArrays.push(0);return i}_setBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]|=1<<t-7*e}_unsetBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]&=~(1<<t-7*e)}_setInternalPos(t,e,i,r){const n=this._data,s=[e,i];if(r)this._sortData(),n[t]=s;else{if(n.length)if(n[n.length-1][0]>=e)n.push(s);else if(n[0][0]<=e)n.unshift(s);else{const t=Math.round(n.length/2);this._data=n.slice(0,t).concat(s).concat(n.slice(t))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(t){this._data.splice(t,1)}_sortData(){this._changedData&&this._data.sort(r),this._changedData=!1}bitField(){const t=[];let e,i=8,r=0,n=0;const s=this._bitArrays.slice();for(;s.length||r;){0===r&&(e=s.shift(),r=7);const o=Math.min(r,i);n|=(e&~(255<<o))<<8-i,e>>>=o,r-=o,i-=o,i&&(r||s.length)||(t.push(n),n=0,i=8)}for(var o=t.length-1;o>0&&0===t[o];o--)t.pop();return t}compactArray(){return this._sortData(),this._data.map(n)}}},8975:(t,e,i)=>{var r;!function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(t){return a(c(t),arguments)}function o(t,e){return s.apply(null,[t].concat(e||[]))}function a(t,e){var i,r,o,a,h,c,l,u,d,f=1,p=t.length,g="";for(r=0;r<p;r++)if("string"==typeof t[r])g+=t[r];else if("object"==typeof t[r]){if((a=t[r]).keys)for(i=e[f],o=0;o<a.keys.length;o++){if(null==i)throw new Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[o],a.keys[o-1]));i=i[a.keys[o]]}else i=a.param_no?e[a.param_no]:e[f++];if(n.not_type.test(a.type)&&n.not_primitive.test(a.type)&&i instanceof Function&&(i=i()),n.numeric_arg.test(a.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(s("[sprintf] expecting number but found %T",i));switch(n.number.test(a.type)&&(u=i>=0),a.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,a.width?parseInt(a.width):0);break;case"e":i=a.precision?parseFloat(i).toExponential(a.precision):parseFloat(i).toExponential();break;case"f":i=a.precision?parseFloat(i).toFixed(a.precision):parseFloat(i);break;case"g":i=a.precision?String(Number(i.toPrecision(a.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=a.precision?i.substring(0,a.precision):i;break;case"t":i=String(!!i),i=a.precision?i.substring(0,a.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=a.precision?i.substring(0,a.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=a.precision?i.substring(0,a.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}n.json.test(a.type)?g+=i:(!n.number.test(a.type)||u&&!a.sign?d="":(d=u?"+":"-",i=i.toString().replace(n.sign,"")),c=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(d+i).length,h=a.width&&l>0?c.repeat(l):"",g+=a.align?d+i+h:"0"===c?d+h+i:h+d+i)}return g}var h=Object.create(null);function c(t){if(h[t])return h[t];for(var e,i=t,r=[],s=0;i;){if(null!==(e=n.text.exec(i)))r.push(e[0]);else if(null!==(e=n.modulo.exec(i)))r.push("%");else{if(null===(e=n.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){s|=1;var o=[],a=e[2],c=[];if(null===(c=n.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(c[1]);""!==(a=a.substring(c[0].length));)if(null!==(c=n.key_access.exec(a)))o.push(c[1]);else{if(null===(c=n.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(c[1])}e[2]=o}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}i=i.substring(e[0].length)}return h[t]=r}e.sprintf=s,e.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=o,void 0===(r=function(){return{sprintf:s,vsprintf:o}}.call(e,i,e,t))||(t.exports=r))}()},42830:(t,e,i)=>{t.exports=n;var r=i(17187).EventEmitter;function n(){r.call(this)}i(35717)(n,r),n.Readable=i(79481),n.Writable=i(64229),n.Duplex=i(56753),n.Transform=i(74605),n.PassThrough=i(82725),n.finished=i(8610),n.pipeline=i(59946),n.Stream=n,n.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",s),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",h));var o=!1;function a(){o||(o=!0,t.end())}function h(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){i.removeListener("data",n),t.removeListener("drain",s),i.removeListener("end",a),i.removeListener("close",h),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",l),i.removeListener("close",l),t.removeListener("close",l)}return i.on("error",c),t.on("error",c),i.on("end",l),i.on("close",l),t.on("close",l),t.emit("pipe",i),t}},50458:(t,e,i)=>{const r=i(31116),n=i(50590);t.exports=t=>({sink:r(t),source:n(t)})},79407:(t,e,i)=>{t.exports=i(50590),t.exports.source=i(50590),t.exports.sink=i(31116),t.exports.transform=i(95212),t.exports.duplex=i(50458)},31116:(t,e,i)=>{const r=i(22412);t.exports=t=>async e=>{e=r(e);const i=t=>{"function"==typeof t.return&&t.return()};let n=null,s=null;const o=t=>{n=t,s&&s(t),i(e)};let a=null,h=!1;const c=()=>{h=!0,a&&a()};let l=null,u=!1;const d=()=>{u=!0,l&&l()};let f=null;const p=()=>{f&&f()};t.once("error",o),t.once("close",c),t.once("finish",d);try{for await(const i of e){if(!t.writable||t.destroyed||n)break;!1===t.write(i)&&await new Promise(((e,i)=>{a=f=e,s=i,t.once("drain",p)}))}}catch(e){n||t.destroy(),n=e}try{if(t.writable&&t.end(),await(i(e),new Promise(((t,e)=>{if(h||u||n)return t();l=a=t,s=e}))),n)throw n}finally{t.removeListener("error",o),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("drain",p)}}},50590:t=>{t.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){const e=t.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)return;yield i}}finally{e.releaseLock()}}();throw new Error("unknown stream")}},95212:(t,e,i)=>{const r=i(50458);t.exports=t=>async function*(e){const i=r(t);let n;if(i.sink(e).catch((t=>{n=t})),yield*i.source,n)throw n}},38386:function(t,e,i){var r=i(34155);!function(t){"use strict";function e(t,i){return void 0===i?i=>e(t,i):i[Symbol.asyncIterator]?async function*(t,e){let i=[];for await(const r of e)i.push(r),i.length===t&&(yield i,i=[]);i.length>0&&(yield i)}(t,i):function*(t,e){let i=[];for(const r of e)i.push(r),i.length===t&&(yield i,i=[]);i.length>0&&(yield i)}(t,i)}const i=Symbol("TIMEOUT");async function*n(t,e,r){const n=r[Symbol.asyncIterator]();let s,o,a,h=[];const c=()=>{l(),[o,a]=(t=>{let e;return[new Promise((r=>{e=setTimeout((()=>r(i)),t)})),()=>{clearTimeout(e)}]})(e)},l=()=>{a&&a(),o=void 0};for(s=n.next();;){const e=await(o?Promise.race([s,o]):s);if(e===i||e.done){if(h.length&&(yield h,h=[]),l(),e!==i)break}else s=n.next(),h.push(e.value),1===h.length&&c(),h.length!==t||(yield h,h=[],l())}}function s(t){if("function"==typeof t.next)return t;if("function"==typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"==typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function o(){let t,e;return{promise:new Promise(((i,r)=>{e=i,t=r})),reject:t,resolve:e}}function a(t,e){const i=s(e),r=[],n=[];let a=!1,h=!1;async function c(){if(!h&&!(a||r.length>=t)){a=!0;try{const{done:t,value:e}=await i.next();t?h=!0:r.push({value:e})}catch(t){h=!0,r.push({error:t})}(function(){for(;n.length>0&&r.length>0;){const t=n.shift(),{error:e,value:i}=r.shift();e?t.reject(e):t.resolve({done:!1,value:i})}for(;n.length>0&&h;){const{resolve:t}=n.shift();t({done:!0,value:void 0})}})(),a=!1,c()}}const l={next:async function(){if(r.length>0){const{error:t,value:e}=r.shift();if(t)throw t;return c(),{done:!1,value:e}}if(h)return{done:!0,value:void 0};const t=o();return n.push(t),c(),t.promise},[Symbol.asyncIterator]:()=>l};return l}function h(t,e){return void 0===e?e=>h(t,e):0===t?e:e[Symbol.asyncIterator]?a(t,e):function*(t,e){const i=[];let r;try{for(const r of e)i.push(r),i.length<=t||(yield i.shift())}catch(t){r=t}for(const t of i)yield t;if(r)throw r}(t,e)}async function*c(t,e){for await(const i of e)await t(i)&&(yield i)}function l(t,e){return void 0===e?e=>c(t,e):c(t,e)}async function*u(t){for await(const e of t)e&&"string"!=typeof e&&(e[Symbol.iterator]||e[Symbol.asyncIterator])?yield*u(e):yield e}async function*d(t,e){for await(const i of e)yield await t(i)}function f(t,e){return void 0===e?e=>d(t,e):d(t,e)}function p(t,e,i){const r=s(i),n=[],a=[];let h=!1,c=!1,l=0,u=null;function d(){for(;a.length>0&&n.length>0;){const{resolve:t}=a.shift();t({done:!1,value:n.shift()})}for(;a.length>0&&0===l&&h;){const{resolve:t,reject:e}=a.shift();u?(e(u),u=null):t({done:!0,value:void 0})}}async function f(){if(h)d();else if(!(c||l+n.length>=t)){c=!0,l++;try{const{done:t,value:i}=await r.next();t?(h=!0,l--,d()):async function(t){try{const i=await e(t);if(i&&i[Symbol.asyncIterator])for await(const t of i)n.push(t);else n.push(i)}catch(t){h=!0,u=t}l--,d(),f()}(i)}catch(t){h=!0,l--,u=t,d()}c=!1,f()}}const p={next:async function(){if(0===n.length){const t=o();return a.push(t),f(),t.promise}const t=n.shift();return f(),{done:!1,value:t}},[Symbol.asyncIterator]:()=>p};return p}async function g(t){return new Promise((e=>{t.once("readable",(()=>{e()}))}))}function y(t,...e){let i=t();for(const t of e)i=t(i);return i}function m(t,e,i){return void 0===e?(e,i)=>m(t,e,i):void 0===i?i=>m(t,e,i):1===t?f(e,i):async function*(t,e,i){let r=null;const n=s(y((()=>i),h(1),(async function*(t){for await(const e of t){if(r)return;yield e}}),f((t=>({value:e(t)}))),h(t-1)));for(;;){const{value:t,done:e}=await n.next();if(e)break;try{const e=await t.value;r||(yield e)}catch(t){r=t}}if(r)throw r}(t,e,i)}async function v(t,e,i){let r=e;for await(const e of i)r=await t(r,e);return r}async function*b(t,e){for await(const i of e)await t(i),yield i}const w=t=>new Promise((e=>setTimeout(e,t)));function _(t,e,i){if(!Number.isFinite(t))throw new TypeError("Expected `limit` to be a finite number");if(t<=0)throw new TypeError("Expected `limit` to be greater than 0");if(!Number.isFinite(e))throw new TypeError("Expected `interval` to be a finite number");return async function*(){let r,n=0;for await(const s of i){if(n<t){void 0===r&&(r=Date.now()),n++,yield s;continue}const i=Date.now()-r,o=e-i;o>0&&await w(o),r=Date.now(),n=1,yield s}}()}function x(t,e){let i=t[0]+e[0],r=t[1]+e[1];if(r>=1e9){const t=r%1e9;i+=(r-t)/1e9,r=t}return[i,r]}function E(t,e,i){const r=s(i),n=[],a=[];let h=!1,c=!1,l=0,u=null;function d(){for(;a.length>0&&n.length>0;){const{resolve:t}=a.shift();t({done:!1,value:n.shift()})}for(;a.length>0&&0===l&&h;){const{resolve:t,reject:e}=a.shift();u?(e(u),u=null):t({done:!0,value:void 0})}}async function f(){if(h)d();else if(!(c||l+n.length>=t)){c=!0,l++;try{const{done:t,value:i}=await r.next();t?(h=!0,l--,d()):async function(t){try{const i=await e(t);n.push(i)}catch(t){h=!0,u=t}l--,d(),f()}(i)}catch(t){h=!0,l--,u=t,d()}c=!1,f()}}const p={next:async function(){if(0===n.length){const t=o();return a.push(t),f(),t.promise}const t=n.shift();return f(),{done:!1,value:t}},[Symbol.asyncIterator]:()=>p};return p}async function S(t,e){let i=null,r=null,n=null;const s=t=>{i=t,r&&r(t)},o=()=>{n&&n()};t.once("error",s);for await(const s of e)if(!1===t.write(s)&&await new Promise(((e,s)=>{if(i)return s(i);t.once("drain",o),n=e,r=s})),i)break;if(t.removeListener("error",s),t.removeListener("drain",o),i)throw i}t.batch=e,t.batchWithTimeout=function t(i,r,s){return void 0===s?e=>t(i,r,e):s[Symbol.asyncIterator]&&r!==1/0?n(i,r,s):e(i,s)},t.buffer=h,t.collect=function(t){return t[Symbol.asyncIterator]?async function(t){const e=[];for await(const i of t)e.push(i);return e}(t):Array.from(t)},t.concat=function(...t){return t.find((t=>void 0!==t[Symbol.asyncIterator]))?async function*(t){for await(const e of t)yield*e}(t):function*(t){for(const e of t)yield*e}(t)},t.consume=function(t){if(t[Symbol.asyncIterator])return async function(t){for await(const e of t);}(t);for(const e of t);},t.filter=l,t.flatMap=function t(e,i){return void 0===i?i=>t(e,i):l((t=>null!=t),u(f(e,i)))},t.flatTransform=function t(e,i,r){return void 0===i?(i,r)=>r?t(e,i,r):t(e,i):void 0===r?r=>t(e,i,r):l((t=>null!=t),u(p(e,i,r)))},t.flatten=u,t.fromStream=function(t){return"function"==typeof t[Symbol.asyncIterator]?t:async function*(t){for(;;){const e=t.read();if(null===e){if(t._readableState.ended)break;await g(t)}else yield e}}(t)},t.getIterator=s,t.map=f,t.merge=async function*(...t){const e=new Set(t.map(s));for(;e.size>0;)for(const t of e){const i=await t.next();i.done?e.delete(t):yield i.value}},t.parallelFlatMap=function t(e,i,r){return void 0===i?(i,r)=>r?t(e,i,r):t(e,i):void 0===r?r=>t(e,i,r):l((t=>null!=t),u(m(e,i,r)))},t.parallelMap=m,t.parallelMerge=async function*(...t){const e=t.map(s),i=new Set,r=new Map;let n=null,o=null,a=null;const h=t=>{n=t,o&&o(t)},c=t=>{a&&a(t)},l=t=>{const e=Promise.resolve(t.next()).then((async({done:n,value:s})=>{n||r.set(t,s),i.delete(e)}));i.add(e),e.then(c,h)};for(const t of e)l(t);for(;;){if(0===i.size&&0===r.size)return;await new Promise(((t,e)=>{if(n&&e(n),r.size>0)return t();a=t,o=e}));for(const[t,e]of r)r.delete(t),yield e,l(t)}},t.pipeline=y,t.reduce=function t(e,i,r){return void 0===i?(i,r)=>r?v(e,i,r):t(e,i):void 0===r?r=>t(e,i,r):v(e,i,r)},t.take=function t(e,i){return void 0===i?i=>t(e,i):i[Symbol.asyncIterator]?async function*(t,e){let i=0;for await(const r of e)if(yield await r,i++,i>=t)break}(e,i):function*(t,e){let i=0;for(const r of e)if(yield r,i++,i>=t)break}(e,i)},t.tap=function(t,e){return void 0===e?e=>b(t,e):b(t,e)},t.throttle=function(t,e,i){return void 0===i?i=>_(t,e,i):_(t,e,i)},t.time=function t(e={},i){return void 0===i?i=>t(e,i):void 0!==i[Symbol.asyncIterator]?async function*(t,e){const i=e[Symbol.asyncIterator]();let n=[0,0];for(;;){const e=r.hrtime(),{value:s,done:o}=await i.next(),a=r.hrtime(e);if(n=x(n,a),t.progress&&t.progress(a,n),o)return t.total&&t.total(n),s;yield s}}(e,i):function*(t,e){const i=e[Symbol.iterator]();let n=[0,0];for(;;){const e=r.hrtime(),{value:s,done:o}=i.next(),a=r.hrtime(e);if(n=x(n,a),t.progress&&t.progress(a,n),o)return t.total&&t.total(n),s;yield s}}(e,i)},t.transform=function t(e,i,r){return void 0===i?(i,r)=>r?t(e,i,r):t(e,i):void 0===r?r=>t(e,i,r):E(e,i,r)},t.writeToStream=function(t,e){return void 0===e?e=>S(t,e):S(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},32553:(t,e,i)=>{"use strict";var r=i(89509).Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=u,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function l(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.s=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=o(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=o(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=o(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},10715:(t,e,i)=>{"use strict";const{AbortController:r}=globalThis,n=i(82916);class s extends r{constructor(t){super(),this._ms=t,this._timer=n((()=>this.abort()),t),Object.setPrototypeOf(this,s.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n((()=>this.abort()),this._ms)}}t.exports={TimeoutController:s}},84957:t=>{!function(){t.exports=p;var e=3200,i=100982246400,r=1e3*i,n=864e13,s=4294967296,o=1e6,a=1e9,h="000000000",c=Math.trunc||function(t){var e=t-t%1;return 0===e&&(t<0||0===t&&1/t!=1/0)?-0:e},l=p.prototype;p.fromDate=function(t){return new p(+t)},p.fromInt64BE=b(0,1,2,3,0,4),p.fromInt64LE=b(3,2,1,0,4,0),p.fromString=function(t){var e,i=new p,r=(t+="").replace(/^\s*[+\-]?\d+/,(function(t){var e=+t,r=1970+(e-1970)%400;return i.year=e-r,r})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(t,i,r){return i<0&&(r*=-1),e=6e4*(60*+i+ +r),""})).replace(/\.\d+$/,(function(t){return i.nano=+(t+h).substr(1,9),""})).split(/\D+/);if(r.length>1?r[1]--:r[1]=0,i.time=e=Date.UTC.apply(Date,r)-(e||0),isNaN(e))throw new TypeError("Invalid Date");return g(i)},p.fromTimeT=function(t){return m(t,0)},l.year=0,l.time=0,l.nano=0,l.addNano=function(t){return this.nano+=+t||0,this},l.getNano=function(){var t=g(this);return(t.time%1e3*o+ +t.nano+a)%a},l.getTimeT=function(){var t=g(this),i=Math.floor(t.time/1e3),r=t.year;return r&&(i+=1168776*r*86400/e),i},l.getYear=function(){return this.toDate().getUTCFullYear()+this.year},l.toDate=function(){return y(g(this).time)},l.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},l.toString=function(t){var e=this,i=e.toDate(),r={H:function(){return _(i.getUTCHours())},L:function(){return x(i.getUTCMilliseconds(),3)},M:function(){return _(i.getUTCMinutes())},N:function(){return x(e.getNano(),9)},S:function(){return _(i.getUTCSeconds())},Y:function(){var t=e.getYear();return t>999999?"+"+t:t>9999?"+"+x(t,6):t>=0?x(t,4):t>=-999999?"-"+x(-t,6):t},a:function(){return d[i.getUTCDay()]},b:function(){return u[i.getUTCMonth()]},d:function(){return _(i.getUTCDate())},e:function(){return((t=i.getUTCDate())>9?"":" ")+(0|t);var t},m:function(){return _(i.getUTCMonth()+1)}};return function t(e){return e.replace(/%./g,(function(e){var i=e[1],n=f[i],s=r[i];return n?t(n):s?s():e}))}(t||"%Y-%m-%dT%H:%M:%S.%NZ")},l.writeInt64BE=v(0,1,2,3,0,4),l.writeInt64LE=v(3,2,1,0,4,0);var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return p;function p(t,e,i){var r=this;if(!(r instanceof p))return new p(t,e,i);r.time=+t||0,r.nano=+e||0,r.year=+i||0,g(r)}function g(t){var i,s,a=t.year,h=t.time,l=t.nano;if(l<0||o<=l){var u=Math.floor(l/o);l-=u*o,h+=u,i=1}var d=a%e;if(h<-n||n<h||d){(s=c(h/r))&&(a+=s*e,h-=s*r);var f=y(h);f.setUTCFullYear(d+f.getUTCFullYear());var p=(h=+f)+(s=c((a-=d)/e))*r;s&&-n<=p&&p<=n&&(a-=s*e,h=p),i=1}return i&&(t.year=a,t.time=h,t.nano=l),t}function y(t){var e=new Date(0);return e.setTime(t),e}function m(t,r){r|=0,t=+t||0;var n=c((r*=s)/i)+c(t/i),o=r%i+t%i,a=c(o/i);return a&&(n+=a,o-=a*i),new p(1e3*o,0,n*e)}function v(t,e,i,r,n,o){return function(t,e){var i=g(this);t||(t=new Array(8)),w(t,e|=0);var r=Math.floor(i.time/1e3),h=31556952*i.year,l=c(h/s)+c(r/s),u=h%s+r%s,d=Math.floor(u/s);return d&&(l+=d,u-=d*s),a(t,e+n,l),a(t,e+o,u),t};function a(n,s,o){n[s+t]=o>>24&255,n[s+e]=o>>16&255,n[s+i]=o>>8&255,n[s+r]=255&o}}function b(t,e,i,r,n,s){return function(t,e){w(t,e|=0);var i=o(t,e+n);return m(o(t,e+s),i)};function o(n,s){return 16777216*n[s+t]+(n[s+e]<<16|n[s+i]<<8|n[s+r])}}function w(t,e){var i=t&&t.length;if(null==i)throw new TypeError("Invalid Buffer");if(i<e+8)throw new RangeError("Out of range")}function _(t){return(t>9?"":"0")+(0|t)}function x(t,e){return(h+(0|t)).substr(-e)}}()},63700:(t,e,i)=>{"use strict";var r=i(71156),n=i(90793);t.exports=r.bind(null,n)},71156:t=>{"use strict";function e(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}t.exports=function(t,r,n){if("string"!=typeof r)throw new Error("Input must be string");for(var s,o,a=r.length,h=0,c=0;c<a;c+=1){if(s=r.charCodeAt(c),o=r[c],e(s)&&i(r.charCodeAt(c+1))&&(o+=r[c+=1]),(h+=t(o))===n)return r.slice(0,c+1);if(h>n)return r.slice(0,c-o.length+1)}return r}},90793:t=>{"use strict";function e(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}t.exports=function(t){if("string"!=typeof t)throw new Error("Input must be string");for(var r=t.length,n=0,s=null,o=null,a=0;a<r;a++)i(s=t.charCodeAt(a))?null!=o&&e(o)?n+=1:n+=3:s<=127?n+=1:s>=128&&s<=2047?n+=2:s>=2048&&s<=65535&&(n+=3),o=s;return n}},94927:(t,e,i)=>{function r(t){try{if(!i.g.localStorage)return!1}catch(t){return!1}var e=i.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}},91496:t=>{"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},20384:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},89539:(t,e,i)=>{var r=i(34155),n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,s=r.length,o=String(t).replace(n,(function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}})),h=r[i];i<s;h=r[++i])g(h)||!w(h)?o+=" "+h:o+=" "+a(h);return o},e.deprecate=function(t,n){if(v(i.g.process))return function(){return e.deprecate(t,n).apply(this,arguments)};if(!0===r.noDeprecation)return t;var s=!1;return function(){if(!s){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),s=!0}return t.apply(this,arguments)}};var s,o={};function a(t,i){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(i)?r.showHidden=i:i&&e._extend(r,i),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=h),l(r,t,r.depth)}function h(t,e){var i=a.styles[e];return i?"["+a.colors[i][0]+"m"+t+"["+a.colors[i][1]+"m":t}function c(t,e){return t}function l(t,i,r){if(t.customInspect&&i&&E(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var n=i.inspect(r,t);return m(n)||(n=l(t,n,r)),n}var s=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(m(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return y(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,i);if(s)return s;var o=Object.keys(i),a=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(i)),x(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(i);if(0===o.length){if(E(i)){var h=i.name?": "+i.name:"";return t.stylize("[Function"+h+"]","special")}if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(_(i))return t.stylize(Date.prototype.toString.call(i),"date");if(x(i))return u(i)}var c,w="",S=!1,T=["{","}"];return f(i)&&(S=!0,T=["[","]"]),E(i)&&(w=" [Function"+(i.name?": "+i.name:"")+"]"),b(i)&&(w=" "+RegExp.prototype.toString.call(i)),_(i)&&(w=" "+Date.prototype.toUTCString.call(i)),x(i)&&(w=" "+u(i)),0!==o.length||S&&0!=i.length?r<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=S?function(t,e,i,r,n){for(var s=[],o=0,a=e.length;o<a;++o)k(e,String(o))?s.push(d(t,e,i,r,String(o),!0)):s.push("");return n.forEach((function(n){n.match(/^\d+$/)||s.push(d(t,e,i,r,n,!0))})),s}(t,i,r,a,o):o.map((function(e){return d(t,i,r,a,e,S)})),t.seen.pop(),function(t,e,i){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(c,w,T)):T[0]+w+T[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,i,r,n,s){var o,a,h;if((h=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),k(r,n)||(o="["+n+"]"),a||(t.seen.indexOf(h.value)<0?(a=g(i)?l(t,h.value,null):l(t,h.value,i-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(o)){if(s&&n.match(/^\d+$/))return a;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function f(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===S(t)}function w(t){return"object"==typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===S(t)}function x(t){return w(t)&&("[object Error]"===S(t)||t instanceof Error)}function E(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(s)&&(s=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(s)){var i=r.pid;o[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,r)}}else o[t]=function(){};return o[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=p,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=w,e.isDate=_,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(20384);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=i(91496),e._extend=function(t,e){if(!e||!w(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t}},23209:t=>{t.exports=function t(e,i){var r,n=0,s=0,o=i=i||0,a=e.length;do{if(o>=a)throw t.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return t.bytes=o-i,n}},7089:t=>{t.exports=function t(i,r,n){r=r||[];for(var s=n=n||0;i>=e;)r[n++]=255&i|128,i/=128;for(;-128&i;)r[n++]=255&i|128,i>>>=7;return r[n]=0|i,t.bytes=n-s+1,r};var e=Math.pow(2,31)},13924:(t,e,i)=>{t.exports={encode:i(7089),decode:i(23209),encodingLength:i(64146)}},64146:t=>{var e=Math.pow(2,7),i=Math.pow(2,14),r=Math.pow(2,21),n=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),h=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(t){return t<e?1:t<i?2:t<r?3:t<n?4:t<s?5:t<o?6:t<a?7:t<h?8:t<c?9:10}},82838:(t,e,i)=>{"use strict";const r=i(13924);t.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const e=[];for(;t.length>0;){const i=r.decode(t);e.push(i),t=t.slice(r.decode.bytes)}return e}},26988:t=>{t.exports=function t(e,i){var r,n=0,s=0,o=i=i||0,a=e.length;do{if(o>=a||s>49)throw t.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return t.bytes=o-i,n}},1312:t=>{t.exports=function t(i,r,n){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");r=r||[];for(var s=n=n||0;i>=e;)r[n++]=255&i|128,i/=128;for(;-128&i;)r[n++]=255&i|128,i>>>=7;return r[n]=0|i,t.bytes=n-s+1,r};var e=Math.pow(2,31)},94676:(t,e,i)=>{t.exports={encode:i(1312),decode:i(26988),encodingLength:i(10082)}},10082:t=>{var e=Math.pow(2,7),i=Math.pow(2,14),r=Math.pow(2,21),n=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),h=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(t){return t<e?1:t<i?2:t<r?3:t<n?4:t<s?5:t<o?6:t<a?7:t<h?8:t<c?9:10}},97916:(t,e,i)=>{"use strict";const r=i(59134),n="object"==typeof window&&"object"==typeof document&&9===document.nodeType,s=r(),o=n&&!s,a=s&&!n,h=s&&n,c=void 0!==globalThis.process&&void 0!==globalThis.process.release&&"node"===globalThis.process.release.name&&!s,l="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,u=void 0!==globalThis.process&&void 0!==globalThis.process.env&&"test"===globalThis.process.env.NODE_ENV,d="undefined"!=typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:u,isElectron:s,isElectronMain:a,isElectronRenderer:h,isNode:c,isBrowser:o,isWebWorker:l,isEnvWithDom:n,isReactNative:d}},78419:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasCORS=void 0;let i=!1;try{i="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}e.hasCORS=i},75754:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0,e.encode=function(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){let e={},i=t.split("&");for(let t=0,r=i.length;t<r;t++){let r=i[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},75222:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0;const i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parse=function(t){const e=t,n=t.indexOf("["),s=t.indexOf("]");-1!=n&&-1!=s&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let o=i.exec(t||""),a={},h=14;for(;h--;)a[r[h]]=o[h]||"";return-1!=n&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(t,e){const i=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1),"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1),i}(0,a.path),a.queryKey=function(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(i[e]=r)})),i}(0,a.query),a}},68726:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yeast=e.decode=e.encode=void 0;const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={};let n,s=0,o=0;function a(t){let e="";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}for(e.encode=a,e.decode=function(t){let e=0;for(o=0;o<t.length;o++)e=64*e+r[t.charAt(o)];return e},e.yeast=function(){const t=a(+new Date);return t!==n?(s=0,n=t):t+"."+a(s++)};o<64;o++)r[i[o]]=o},46242:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalThisShim=void 0,e.globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},74679:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;const r=i(93481);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return r.Socket}}),e.protocol=r.Socket.protocol;var n=i(29870);Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return n.Transport}});var s=i(7385);Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return s.transports}});var o=i(89622);Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}});var a=i(75222);Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return a.parse}})},93481:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i(7385),s=i(89622),o=i(75754),a=i(75222),h=r(i(11227)),c=i(95260),l=i(1373),u=(0,h.default)("engine.io-client:socket");class d extends c.Emitter{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=(0,a.parse)(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=(0,a.parse)(e.host).host),(0,s.installTimerFunctions)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=(0,o.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){u('creating transport "%s"',t);const e=Object.assign({},this.opts.query);e.EIO=l.protocol,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return u("options: %j",i),new n.transports[t](i)}open(){let t;if(this.opts.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return u("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){u("setting transport %s",t.name),this.transport&&(u("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){u('probing transport "%s"',t);let e=this.createTransport(t),i=!1;d.priorWebsocketSuccess=!1;const r=()=>{i||(u('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(r=>{if(!i)if("pong"===r.type&&"probe"===r.data){if(u('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;d.priorWebsocketSuccess="websocket"===e.name,u('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{i||"closed"!==this.readyState&&(u("changing transport and sending upgrade packet"),c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{u('probe transport "%s" failed',t);const i=new Error("probe error");i.transport=e.name,this.emitReserved("upgradeError",i)}})))};function n(){i||(i=!0,c(),e.close(),e=null)}const s=i=>{const r=new Error("probe error: "+i);r.transport=e.name,n(),u('probe transport "%s" failed because of error: %s',t,i),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function h(t){e&&t.name!==e.name&&(u('"%s" works - aborting "%s"',t.name,e.name),n())}const c=()=>{e.removeListener("open",r),e.removeListener("error",s),e.removeListener("close",o),this.off("close",a),this.off("upgrading",h)};e.once("open",r),e.once("error",s),e.once("close",o),this.once("close",a),this.once("upgrading",h),e.open()}onOpen(){if(u("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){u("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(u('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}else u('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();u("flushing %d packets in socket",t.length),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){const i=this.writeBuffer[e].data;if(i&&(t+=(0,s.byteLength)(i)),e>0&&t>this.maxPayload)return u("only send %d out of %d packets",e,this.writeBuffer.length),this.writeBuffer.slice(0,e);t+=2}return u("payload size is %d (max: %d)",t,this.maxPayload),this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const n={type:t,data:e,options:i};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),u("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?i():t()})):this.upgrading?i():t()),this}onError(t){u("socket error %j",t),d.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(u('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const r=t.length;for(;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}e.Socket=d,d.protocol=l.protocol},29870:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;const n=i(1373),s=i(95260),o=i(89622),a=(0,r(i(11227)).default)("engine.io-client:transport");class h extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class c extends s.Emitter{constructor(t){super(),this.writable=!1,(0,o.installTimerFunctions)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new h(t,e,i)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=(0,n.decodePacket)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}e.Transport=c},7385:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;const r=i(40484),n=i(51308);e.transports={websocket:n.WS,polling:r.Polling}},40484:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.Polling=void 0;const n=i(29870),s=r(i(11227)),o=i(68726),a=i(75754),h=i(1373),c=i(26666),l=i(95260),u=i(89622),d=i(46242),f=(0,s.default)("engine.io-client:polling");function p(){}const g=null!=new c.XHR({xdomain:!1}).responseType;class y extends n.Transport{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=g&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{f("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(f("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){f("pre-pause polling complete"),--t||e()}))),this.writable||(f("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){f("pre-pause writing complete"),--t||e()})))}else e()}poll(){f("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){f("polling got data %s",t),(0,h.decodePayload)(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this.poll():f('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{f("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(f("transport open - closing"),t()):(f("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,(0,h.encodePayload)(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.yeast)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port);const r=(0,a.encode)(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new m(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){f("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}e.Polling=y;class m extends l.Emitter{constructor(t,e){super(),(0,u.installTimerFunctions)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=(0,u.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new c.XHR(t);try{f("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},f("xhr data %s",this.data),e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=m.requestsCount++,m.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=p,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete m.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(e.Request=m,m.requestsCount=0,m.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",v);else if("function"==typeof addEventListener){const t="onpagehide"in d.globalThisShim?"pagehide":"unload";addEventListener(t,v,!1)}function v(){for(let t in m.requests)m.requests.hasOwnProperty(t)&&m.requests[t].abort()}},45552:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;const r=i(46242);e.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),e.WebSocket=r.globalThisShim.WebSocket||r.globalThisShim.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"},51308:function(t,e,i){"use strict";var r=i(48764).Buffer,n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;const s=i(29870),o=i(75754),a=i(68726),h=i(89622),c=i(45552),l=n(i(11227)),u=i(1373),d=(0,l.default)("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class p extends s.Transport{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=f?{}:(0,h.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=c.usingBrowserWebSocket&&!f?e?new c.WebSocket(t,e):new c.WebSocket(t):new c.WebSocket(t,e,i)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||c.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;(0,u.encodePacket)(i,this.supportsBinary,(t=>{const e={};!c.usingBrowserWebSocket&&(i.options&&(e.compress=i.options.compress),this.opts.perMessageDeflate)&&("string"==typeof t?r.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1);try{c.usingBrowserWebSocket?this.ws.send(t):this.ws.send(t,e)}catch(t){d("websocket closed before onclose event")}n&&(0,c.nextTick)((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,a.yeast)()),this.supportsBinary||(t.b64=1);const r=(0,o.encode)(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}check(){return!!c.WebSocket}}e.WS=p},26666:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XHR=void 0;const r=i(78419),n=i(46242);e.XHR=function(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r.hasCORS))return new XMLHttpRequest}catch(t){}if(!e)try{return new(n.globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},89622:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.byteLength=e.installTimerFunctions=e.pick=void 0;const r=i(46242);e.pick=function(t,...e){return e.reduce(((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e)),{})};const n=setTimeout,s=clearTimeout;e.installTimerFunctions=function(t,e){e.useNativeTimers?(t.setTimeoutFn=n.bind(r.globalThisShim),t.clearTimeoutFn=s.bind(r.globalThisShim)):(t.setTimeoutFn=setTimeout.bind(r.globalThisShim),t.clearTimeoutFn=clearTimeout.bind(r.globalThisShim))},e.byteLength=function(t){return"string"==typeof t?function(t){let e=0,i=0;for(let r=0,n=t.length;r<n;r++)e=t.charCodeAt(r),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(r++,i+=4);return i}(t):Math.ceil(1.33*(t.byteLength||t.size))}},83087:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;const i=Object.create(null);e.PACKET_TYPES=i,i.open="0",i.close="1",i.ping="2",i.pong="3",i.message="4",i.upgrade="5",i.noop="6";const r=Object.create(null);e.PACKET_TYPES_REVERSE=r,Object.keys(i).forEach((t=>{r[i[t]]=t})),e.ERROR_PACKET={type:"error",data:"parser error"}},82469:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0;const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<i.length;t++)r[i.charCodeAt(t)]=t;e.encode=t=>{let e,r=new Uint8Array(t),n=r.length,s="";for(e=0;e<n;e+=3)s+=i[r[e]>>2],s+=i[(3&r[e])<<4|r[e+1]>>4],s+=i[(15&r[e+1])<<2|r[e+2]>>6],s+=i[63&r[e+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s},e.decode=t=>{let e,i,n,s,o,a=.75*t.length,h=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);const l=new ArrayBuffer(a),u=new Uint8Array(l);for(e=0;e<h;e+=4)i=r[t.charCodeAt(e)],n=r[t.charCodeAt(e+1)],s=r[t.charCodeAt(e+2)],o=r[t.charCodeAt(e+3)],u[c++]=i<<2|n>>4,u[c++]=(15&n)<<4|s>>2,u[c++]=(3&s)<<6|63&o;return l}},17572:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(83087),n=i(82469),s="function"==typeof ArrayBuffer,o=(t,e)=>{if(s){const i=(0,n.decode)(t);return a(i,e)}return{base64:!0,data:t}},a=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;e.default=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const i=t.charAt(0);return"b"===i?{type:"message",data:o(t.substring(1),e)}:r.PACKET_TYPES_REVERSE[i]?t.length>1?{type:r.PACKET_TYPES_REVERSE[i],data:t.substring(1)}:{type:r.PACKET_TYPES_REVERSE[i]}:r.ERROR_PACKET}},83908:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(83087),n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,o=(t,e)=>{const i=new FileReader;return i.onload=function(){const t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};e.default=({type:t,data:e},i,a)=>{return n&&e instanceof Blob?i?a(e):o(e,a):s&&(e instanceof ArrayBuffer||(h=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer instanceof ArrayBuffer))?i?a(e):o(new Blob([e]),a):a(r.PACKET_TYPES[t]+(e||""));var h}},1373:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=void 0;const r=i(83908);e.encodePacket=r.default;const n=i(17572);e.decodePacket=n.default;const s=String.fromCharCode(30);e.encodePayload=(t,e)=>{const i=t.length,n=new Array(i);let o=0;t.forEach(((t,a)=>{(0,r.default)(t,!1,(t=>{n[a]=t,++o===i&&e(n.join(s))}))}))},e.decodePayload=(t,e)=>{const i=t.split(s),r=[];for(let t=0;t<i.length;t++){const s=(0,n.default)(i[t],e);if(r.push(s),"error"===s.type)break}return r},e.protocol=4},15159:(t,e)=>{"use strict";function i(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Object.defineProperty(e,"__esModule",{value:!0}),e.Backoff=void 0,e.Backoff=i,i.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(t){this.ms=t},i.prototype.setMax=function(t){this.max=t},i.prototype.setJitter=function(t){this.jitter=t}},57046:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const n=i(3084),s=i(84168);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return s.Manager}});const o=i(98312);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=r(i(11227)).default("socket.io-client"),h={};function c(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const i=n.url(t,e.path||"/socket.io"),r=i.source,o=i.id,c=i.path,l=h[o]&&c in h[o].nsps;let u;return e.forceNew||e["force new connection"]||!1===e.multiplex||l?(a("ignoring socket cache for %s",r),u=new s.Manager(r,e)):(h[o]||(a("new io instance for %s",r),h[o]=new s.Manager(r,e)),u=h[o]),i.query&&!e.query&&(e.query=i.queryKey),u.socket(i.path,e)}e.io=c,e.connect=c,e.default=c,Object.assign(c,{Manager:s.Manager,Socket:o.Socket,io:c,connect:c});var l=i(64514);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.exports=c},84168:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const a=i(74679),h=i(98312),c=s(i(64514)),l=i(87149),u=i(15159),d=i(95260),f=o(i(11227)).default("socket.io-client:manager");class p extends d.Emitter{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,a.installTimerFunctions(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=e.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new u.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||c;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=l.on(e,"open",(function(){i.onopen(),t&&t()})),n=l.on(e,"error",(e=>{f("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",e),t?t(e):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;f("connect attempt will timeout after %d",t),0===t&&r();const i=this.setTimeoutFn((()=>{f("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}return this.subs.push(r),this.subs.push(n),this}connect(t){return this.open(t)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(l.on(t,"ping",this.onping.bind(this)),l.on(t,"data",this.ondata.bind(this)),l.on(t,"error",this.onerror.bind(this)),l.on(t,"close",this.onclose.bind(this)),l.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){f("error",t),this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new h.Socket(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return void f("socket %s is still active, skipping close",t);this._close()}_packet(t){f("writing packet %j",t);const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){f("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){f("closed due to %s",t),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();f("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const i=this.setTimeoutFn((()=>{t.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(f("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(f("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=p},87149:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,i){return t.on(e,i),function(){t.off(e,i)}}},98312:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i(64514),s=i(87149),o=i(95260),a=r(i(11227)).default("socket.io-client:socket"),h=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class c extends o.Emitter{constructor(t,e,i){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[s.on(t,"open",this.onopen.bind(this)),s.on(t,"packet",this.onpacket.bind(this)),s.on(t,"error",this.onerror.bind(this)),s.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(h.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const i={type:n.PacketType.EVENT,data:e,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++;a("emitting packet with ack id %d",t);const r=e.pop();this._registerAckCallback(t,r),i.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||r&&this.connected?this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i):a("discard packet as the transport is not currently writable"),this.flags={},this}_registerAckCallback(t,e){const i=this.flags.timeout;if(void 0===i)return void(this.acks[t]=e);const r=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&(a("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(e,1));a("event with ack id %d has timed out after %d ms",t,i),e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:n.PacketType.CONNECT,data:t})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){a("close (%s)",t),this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case n.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(t);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(t);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,a("sending ack %j",r),e.packet({type:n.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)}onconnect(t){a("socket connected with id %s",t),this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}e.Socket=c},3084:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=i(74679),s=r(i(11227)).default("socket.io-client:url");e.url=function(t,e="",i){let r=t;i=i||"undefined"!=typeof location&&location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==i?i.protocol+"//"+t:"https://"+t),s("parse %s",t),r=n.parse(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(i&&i.port===r.port?"":":"+r.port),r}},94880:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const r=i(90665);function n(t,e){if(!t)return t;if(r.isBinary(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=n(t[r],e);return i}if("object"==typeof t&&!(t instanceof Date)){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=n(t[r],e));return i}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=s(t[i],e);else if("object"==typeof t)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=s(t[i],e));return t}e.deconstructPacket=function(t){const e=[],i=t.data,r=t;return r.data=n(i,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t}},64514:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const r=i(95260),n=i(94880),s=i(90665),o=i(11227).default("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={})),e.Encoder=class{constructor(t){this.replacer=t}encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!s.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=n.deconstructPacket(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}};class h extends r.Emitter{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new c(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!s.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===a[i.type])throw new Error("unknown packet type "+i.type);if(i.type===a.BINARY_EVENT||i.type===a.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const n=t.substring(r,e);if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(n)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);i.nsp=t.substring(r,e)}else i.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(!h.isPayloadValid(i.type,r))throw new Error("invalid payload");i.data=r}return o("decoded %s as %j",t,i),i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=h;class c{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},90665:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const i="function"==typeof ArrayBuffer,r=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function o(t){return i&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||n&&t instanceof Blob||s&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,i){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(t(e[i]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}},95260:(t,e,i)=>{"use strict";function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}i.r(e),i.d(e,{Emitter:()=>r}),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<r.length;n++)if((i=r[n])===e||i.fn===e){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){r=0;for(var n=(i=i.slice(0)).length;r<n;++r)i[r].apply(this,e)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},64936:(t,e,i)=>{"use strict";i.d(e,{Dy:()=>s.D,Jx:()=>n.Jx,WU:()=>s.W,cv:()=>r.cv});var r=i(72696),n=i(61287),s=i(59787)},55580:(t,e,i)=>{"use strict";i.d(e,{Fh:()=>p,Jl:()=>h,Km:()=>l,Tp:()=>g,X0:()=>a,YX:()=>c,Zh:()=>u,cs:()=>d,kj:()=>o,or:()=>s,uN:()=>f});var r=i(59787),n=i(85590);const s=[24,256,65536,4294967296,BigInt("18446744073709551616")];function o(t,e,i){(0,n.DO)(t,e,1);const r=t[e];if(!0===i.strict&&r<s[0])throw new Error(`${n.IR} integer encoded in more bytes than necessary (strict decode)`);return r}function a(t,e,i){(0,n.DO)(t,e,2);const r=t[e]<<8|t[e+1];if(!0===i.strict&&r<s[1])throw new Error(`${n.IR} integer encoded in more bytes than necessary (strict decode)`);return r}function h(t,e,i){(0,n.DO)(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===i.strict&&r<s[2])throw new Error(`${n.IR} integer encoded in more bytes than necessary (strict decode)`);return r}function c(t,e,i){(0,n.DO)(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],a=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===i.strict&&a<s[3])throw new Error(`${n.IR} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(!0===i.allowBigInt)return a;throw new Error(`${n.IR} integers outside of the safe integer range are not supported`)}function l(t,e,i,n){return new r.W(r.D.uint,o(t,e+1,n),2)}function u(t,e,i,n){return new r.W(r.D.uint,a(t,e+1,n),3)}function d(t,e,i,n){return new r.W(r.D.uint,h(t,e+1,n),5)}function f(t,e,i,n){return new r.W(r.D.uint,c(t,e+1,n),9)}function p(t,e){return g(t,0,e.value)}function g(t,e,i){if(i<s[0]){const r=Number(i);t.push([e|r])}else if(i<s[1]){const r=Number(i);t.push([24|e,r])}else if(i<s[2]){const r=Number(i);t.push([25|e,r>>>8,255&r])}else if(i<s[3]){const r=Number(i);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(i);if(!(r<s[4]))throw new Error(`${n.IR} encountered BigInt larger than allowable range`);{const i=[27|e,0,0,0,0,0,0,0];let n=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));i[8]=255&n,n>>=8,i[7]=255&n,n>>=8,i[6]=255&n,n>>=8,i[5]=255&n,i[4]=255&s,s>>=8,i[3]=255&s,s>>=8,i[2]=255&s,s>>=8,i[1]=255&s,t.push(i)}}}p.encodedSize=function(t){return g.encodedSize(t.value)},g.encodedSize=function(t){return t<s[0]?1:t<s[1]?2:t<s[2]?3:t<s[3]?5:9},p.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0}},53929:(t,e,i)=>{"use strict";i.d(e,{UT:()=>d,ec:()=>u,r0:()=>a,wy:()=>h,yr:()=>o});var r=i(59787),n=i(55580),s=i(85590);function o(t,e,i,s){return new r.W(r.D.negint,-1-n.kj(t,e+1,s),2)}function a(t,e,i,s){return new r.W(r.D.negint,-1-n.X0(t,e+1,s),3)}function h(t,e,i,s){return new r.W(r.D.negint,-1-n.Jl(t,e+1,s),5)}const c=BigInt(-1),l=BigInt(1);function u(t,e,i,o){const a=n.YX(t,e+1,o);if("bigint"!=typeof a){const t=-1-a;if(t>=Number.MIN_SAFE_INTEGER)return new r.W(r.D.negint,t,9)}if(!0!==o.allowBigInt)throw new Error(`${s.IR} integers outside of the safe integer range are not supported`);return new r.W(r.D.negint,c-BigInt(a),9)}function d(t,e){const i=e.value,r="bigint"==typeof i?i*c-l:-1*i-1;n.Tp(t,e.type.majorEncoded,r)}d.encodedSize=function(t){const e=t.value,i="bigint"==typeof e?e*c-l:-1*e-1;return i<n.or[0]?1:i<n.or[1]?2:i<n.or[2]?3:i<n.or[3]?5:9},d.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0}},92887:(t,e,i)=>{"use strict";i.d(e,{BS:()=>l,Ii:()=>h,ME:()=>d,UQ:()=>c,hg:()=>p,zU:()=>u});var r=i(59787),n=i(85590),s=i(55580),o=i(22042);function a(t,e,i,s){(0,n.DO)(t,e,i+s);const a=(0,o.tP)(t,e+i,e+i+s);return new r.W(r.D.bytes,a,i+s)}function h(t,e,i,r){return a(t,e,1,i)}function c(t,e,i,r){return a(t,e,2,s.kj(t,e+1,r))}function l(t,e,i,r){return a(t,e,3,s.X0(t,e+1,r))}function u(t,e,i,r){return a(t,e,5,s.Jl(t,e+1,r))}function d(t,e,i,r){const o=s.YX(t,e+1,r);if("bigint"==typeof o)throw new Error(`${n.IR} 64-bit integer bytes lengths not supported`);return a(t,e,9,o)}function f(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===r.D.string?(0,o.mL)(t.value):t.value),t.encodedBytes}function p(t,e){const i=f(e);s.Tp(t,e.type.majorEncoded,i.length),t.push(i)}p.encodedSize=function(t){const e=f(t);return s.Tp.encodedSize(e.length)+e.length},p.compareTokens=function(t,e){return i=f(t),r=f(e),i.length<r.length?-1:i.length>r.length?1:(0,o.qu)(i,r);var i,r}},50768:(t,e,i)=>{"use strict";i.d(e,{Bq:()=>l,YW:()=>p,bc:()=>f,h:()=>u,nt:()=>c,q0:()=>d});var r=i(59787),n=i(85590),s=i(55580),o=i(92887),a=i(22042);function h(t,e,i,s,o){const h=i+s;(0,n.DO)(t,e,h);const c=new r.W(r.D.string,(0,a.BB)(t,e+i,e+h),h);return!0===o.retainStringBytes&&(c.byteValue=(0,a.tP)(t,e+i,e+h)),c}function c(t,e,i,r){return h(t,e,1,i,r)}function l(t,e,i,r){return h(t,e,2,s.kj(t,e+1,r),r)}function u(t,e,i,r){return h(t,e,3,s.X0(t,e+1,r),r)}function d(t,e,i,r){return h(t,e,5,s.Jl(t,e+1,r),r)}function f(t,e,i,r){const o=s.YX(t,e+1,r);if("bigint"==typeof o)throw new Error(`${n.IR} 64-bit integer string lengths not supported`);return h(t,e,9,o,r)}const p=o.hg},8278:(t,e,i)=>{"use strict";i.d(e,{HF:()=>f,Ju:()=>a,OC:()=>c,a8:()=>u,h7:()=>h,lY:()=>l,s5:()=>d});var r=i(59787),n=i(55580),s=i(85590);function o(t,e,i,n){return new r.W(r.D.array,n,i)}function a(t,e,i,r){return o(0,0,1,i)}function h(t,e,i,r){return o(0,0,2,n.kj(t,e+1,r))}function c(t,e,i,r){return o(0,0,3,n.X0(t,e+1,r))}function l(t,e,i,r){return o(0,0,5,n.Jl(t,e+1,r))}function u(t,e,i,r){const a=n.YX(t,e+1,r);if("bigint"==typeof a)throw new Error(`${s.IR} 64-bit integer array lengths not supported`);return o(0,0,9,a)}function d(t,e,i,r){if(!1===r.allowIndefinite)throw new Error(`${s.IR} indefinite length items not allowed`);return o(0,0,1,1/0)}function f(t,e){n.Tp(t,r.D.array.majorEncoded,e.value)}f.compareTokens=n.Fh.compareTokens,f.encodedSize=function(t){return n.Tp.encodedSize(t.value)}},59283:(t,e,i)=>{"use strict";i.d(e,{F2:()=>u,G:()=>h,IY:()=>l,KI:()=>f,_K:()=>a,ng:()=>d,qe:()=>c});var r=i(59787),n=i(55580),s=i(85590);function o(t,e,i,n){return new r.W(r.D.map,n,i)}function a(t,e,i,r){return o(0,0,1,i)}function h(t,e,i,r){return o(0,0,2,n.kj(t,e+1,r))}function c(t,e,i,r){return o(0,0,3,n.X0(t,e+1,r))}function l(t,e,i,r){return o(0,0,5,n.Jl(t,e+1,r))}function u(t,e,i,r){const a=n.YX(t,e+1,r);if("bigint"==typeof a)throw new Error(`${s.IR} 64-bit integer map lengths not supported`);return o(0,0,9,a)}function d(t,e,i,r){if(!1===r.allowIndefinite)throw new Error(`${s.IR} indefinite length items not allowed`);return o(0,0,1,1/0)}function f(t,e){n.Tp(t,r.D.map.majorEncoded,e.value)}f.compareTokens=n.Fh.compareTokens,f.encodedSize=function(t){return n.Tp.encodedSize(t.value)}},82428:(t,e,i)=>{"use strict";i.d(e,{CF:()=>a,MV:()=>c,ZR:()=>o,qJ:()=>s,vP:()=>h,xy:()=>l});var r=i(59787),n=i(55580);function s(t,e,i,n){return new r.W(r.D.tag,i,1)}function o(t,e,i,s){return new r.W(r.D.tag,n.kj(t,e+1,s),2)}function a(t,e,i,s){return new r.W(r.D.tag,n.X0(t,e+1,s),3)}function h(t,e,i,s){return new r.W(r.D.tag,n.Jl(t,e+1,s),5)}function c(t,e,i,s){return new r.W(r.D.tag,n.YX(t,e+1,s),9)}function l(t,e){n.Tp(t,r.D.tag.majorEncoded,e.value)}l.compareTokens=n.Fh.compareTokens,l.encodedSize=function(t){return n.Tp.encodedSize(t.value)}},73851:(t,e,i)=>{"use strict";i.d(e,{GI:()=>l,h1:()=>o,mW:()=>c,tA:()=>d,vV:()=>u,y7:()=>a});var r=i(59787),n=i(85590),s=i(55580);function o(t,e,i,s){if(!1===s.allowUndefined)throw new Error(`${n.IR} undefined values are not supported`);return!0===s.coerceUndefinedToNull?new r.W(r.D.null,null,1):new r.W(r.D.undefined,void 0,1)}function a(t,e,i,s){if(!1===s.allowIndefinite)throw new Error(`${n.IR} indefinite length items not allowed`);return new r.W(r.D.break,void 0,1)}function h(t,e,i){if(i){if(!1===i.allowNaN&&Number.isNaN(t))throw new Error(`${n.IR} NaN values are not supported`);if(!1===i.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${n.IR} Infinity values are not supported`)}return new r.W(r.D.float,t,e)}function c(t,e,i,r){return h(m(t,e+1),3,r)}function l(t,e,i,r){return h(b(t,e+1),5,r)}function u(t,e,i,r){return h(w(t,e+1),9,r)}function d(t,e,i){const n=e.value;if(!1===n)t.push([20|r.D.float.majorEncoded]);else if(!0===n)t.push([21|r.D.float.majorEncoded]);else if(null===n)t.push([22|r.D.float.majorEncoded]);else if(void 0===n)t.push([23|r.D.float.majorEncoded]);else{let e,r=!1;i&&!0===i.float64||(y(n),e=m(g,1),n===e||Number.isNaN(n)?(g[0]=249,t.push(g.slice(0,3)),r=!0):(v(n),e=b(g,1),n===e&&(g[0]=250,t.push(g.slice(0,5)),r=!0))),r||(s=n,p.setFloat64(0,s,!1),e=w(g,1),g[0]=251,t.push(g.slice(0,9)))}var s}d.encodedSize=function(t,e){const i=t.value;if(!1===i||!0===i||null==i)return 1;if(!e||!0!==e.float64){y(i);let t=m(g,1);if(i===t||Number.isNaN(i))return 3;if(v(i),t=b(g,1),i===t)return 5}return 9};const f=new ArrayBuffer(9),p=new DataView(f,1),g=new Uint8Array(f,0);function y(t){if(t===1/0)p.setUint16(0,31744,!1);else if(t===-1/0)p.setUint16(0,64512,!1);else if(Number.isNaN(t))p.setUint16(0,32256,!1);else{p.setFloat32(0,t);const e=p.getUint32(0),i=(2139095040&e)>>23,r=8388607&e;if(255===i)p.setUint16(0,31744,!1);else if(0===i)p.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=i-127;t<-24?p.setUint16(0,0):t<-14?p.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):p.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function m(t,e){if(t.length-e<2)throw new Error(`${n.IR} not enough data for float16`);const i=(t[e]<<8)+t[e+1];if(31744===i)return 1/0;if(64512===i)return-1/0;if(32256===i)return NaN;const r=i>>10&31,s=1023&i;let o;return o=0===r?s*2**-24:31!==r?(s+1024)*2**(r-25):0===s?1/0:NaN,32768&i?-o:o}function v(t){p.setFloat32(0,t,!1)}function b(t,e){if(t.length-e<4)throw new Error(`${n.IR} not enough data for float32`);const i=(t.byteOffset||0)+e;return new DataView(t.buffer,i,4).getFloat32(0,!1)}function w(t,e){if(t.length-e<8)throw new Error(`${n.IR} not enough data for float64`);const i=(t.byteOffset||0)+e;return new DataView(t.buffer,i,8).getFloat64(0,!1)}d.compareTokens=s.Fh.compareTokens},22042:(t,e,i)=>{"use strict";i.d(e,{BB:()=>h,Dz:()=>a,Pu:()=>m,mL:()=>c,nI:()=>l,qu:()=>p,tP:()=>u,un:()=>f,zo:()=>d});const r=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,n=new TextDecoder,s=new TextEncoder;function o(t){return r&&globalThis.Buffer.isBuffer(t)}function a(t){return t instanceof Uint8Array?o(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const h=r?(t,e,i)=>i-e>64?globalThis.Buffer.from(t.subarray(e,i)).toString("utf8"):y(t,e,i):(t,e,i)=>i-e>64?n.decode(t.subarray(e,i)):y(t,e,i),c=r?t=>t.length>64?globalThis.Buffer.from(t):g(t):t=>t.length>64?s.encode(t):g(t),l=t=>Uint8Array.from(t),u=r?(t,e,i)=>o(t)?new Uint8Array(t.subarray(e,i)):t.slice(e,i):(t,e,i)=>t.slice(e,i),d=r?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),a(globalThis.Buffer.concat(t,e))):(t,e)=>{const i=new Uint8Array(e);let r=0;for(let e of t)r+e.length>i.length&&(e=e.subarray(0,i.length-r)),i.set(e,r),r+=e.length;return i},f=r?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function p(t,e){if(o(t)&&o(e))return t.compare(e);for(let i=0;i<t.length;i++)if(t[i]!==e[i])return t[i]<e[i]?-1:1;return 0}function g(t,e=1/0){let i;const r=t.length;let n=null;const s=[];for(let o=0;o<r;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function y(t,e,i){const r=[];for(;e<i;){const n=t[e];let s=null,o=n>239?4:n>223?3:n>191?2:1;if(e+o<=i){let i,r,a,h;switch(o){case 1:n<128&&(s=n);break;case 2:i=t[e+1],128==(192&i)&&(h=(31&n)<<6|63&i,h>127&&(s=h));break;case 3:i=t[e+1],r=t[e+2],128==(192&i)&&128==(192&r)&&(h=(15&n)<<12|(63&i)<<6|63&r,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:i=t[e+1],r=t[e+2],a=t[e+3],128==(192&i)&&128==(192&r)&&128==(192&a)&&(h=(15&n)<<18|(63&i)<<12|(63&r)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),e+=o}return m(r)}function m(t){const e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return i}},85590:(t,e,i)=>{"use strict";i.d(e,{DO:()=>o,IR:()=>r,OO:()=>n});const r="CBOR decode error:",n="CBOR encode error:",s=[];function o(t,e,i){if(t.length-e<i)throw new Error(`${r} not enough data for type`)}s[23]=1,s[24]=2,s[25]=3,s[26]=5,s[27]=9},61287:(t,e,i)=>{"use strict";i.d(e,{Jx:()=>u});var r=i(85590),n=i(59787),s=i(53741);const o={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class a{constructor(t,e={}){this.pos=0,this.data=t,this.options=e}done(){return this.pos>=this.data.length}next(){const t=this.data[this.pos];let e=s.PS[t];if(void 0===e){const i=s.cW[t];if(!i)throw new Error(`${r.IR} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const n=31&t;e=i(this.data,this.pos,n,this.options)}return this.pos+=e.encodedLength,e}}const h=Symbol.for("DONE"),c=Symbol.for("BREAK");function l(t,e){if(t.done())return h;const i=t.next();if(i.type===n.D.break)return c;if(i.type.terminal)return i.value;if(i.type===n.D.array)return function(t,e,i){const n=[];for(let s=0;s<t.value;s++){const o=l(e,i);if(o===c){if(t.value===1/0)break;throw new Error(`${r.IR} got unexpected break to lengthed array`)}if(o===h)throw new Error(`${r.IR} found array but not enough entries (got ${s}, expected ${t.value})`);n[s]=o}return n}(i,t,e);if(i.type===n.D.map)return function(t,e,i){const n=!0===i.useMaps,s=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<t.value;a++){const u=l(e,i);if(u===c){if(t.value===1/0)break;throw new Error(`${r.IR} got unexpected break to lengthed map`)}if(u===h)throw new Error(`${r.IR} found map but not enough entries (got ${a} [no key], expected ${t.value})`);if(!0!==n&&"string"!=typeof u)throw new Error(`${r.IR} non-string keys not supported (got ${typeof u})`);const d=l(e,i);if(d===h)throw new Error(`${r.IR} found map but not enough entries (got ${a} [no value], expected ${t.value})`);n?o.set(u,d):s[u]=d}return n?o:s}(i,t,e);if(i.type===n.D.tag){if(e.tags&&"function"==typeof e.tags[i.value]){const r=l(t,e);return e.tags[i.value](r)}throw new Error(`${r.IR} tag not supported (${i.value})`)}throw new Error("unsupported")}function u(t,e){if(!(t instanceof Uint8Array))throw new Error(`${r.IR} data to decode must be a Uint8Array`);const i=(e=Object.assign({},o,e)).tokenizer||new a(t,e),n=l(i,e);if(n===h)throw new Error(`${r.IR} did not find any content to decode`);if(n===c)throw new Error(`${r.IR} got unexpected break`);if(!i.done())throw new Error(`${r.IR} too many terminals, data makes no sense`);return n}},72696:(t,e,i)=>{"use strict";i.d(e,{cv:()=>C,w$:()=>A});const r=["string","number","bigint","symbol"],n=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];var s=i(59787),o=i(22042);class a{constructor(t=256){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const i=e.length-(this.maxCursor-this.cursor)-1;e.set(t,i)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=(0,o.un)(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const i=this.chunks[0];t&&this.cursor>i.length/2?(e=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=(0,o.tP)(i,0,this.cursor)}else e=(0,o.zo)(this.chunks,this.cursor);return t&&this.reset(),e}}var h=i(85590),c=i(53741),l=i(55580),u=i(53929),d=i(92887),f=i(50768),p=i(8278),g=i(59283),y=i(82428),m=i(73851);const v={float64:!1,mapSorter:function(t,e){const i=Array.isArray(t[0])?t[0][0]:t[0],r=Array.isArray(e[0])?e[0][0]:e[0];if(i.type!==r.type)return i.type.compare(r.type);const n=i.type.major,s=b[n].compareTokens(i,r);return 0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s},quickEncodeToken:c.JN},b=function(){const t=[];return t[s.D.uint.major]=l.Fh,t[s.D.negint.major]=u.UT,t[s.D.bytes.major]=d.hg,t[s.D.string.major]=f.YW,t[s.D.array.major]=p.HF,t[s.D.map.major]=g.KI,t[s.D.tag.major]=y.xy,t[s.D.float.major]=m.tA,t}(),w=new a;class _{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${h.OO} object contains circular references`);return new _(e,t)}}const x={null:new s.W(s.D.null,null),undefined:new s.W(s.D.undefined,void 0),true:new s.W(s.D.true,!0),false:new s.W(s.D.false,!1),emptyArray:new s.W(s.D.array,0),emptyMap:new s.W(s.D.map,0)},E={number:(t,e,i,r)=>Number.isInteger(t)&&Number.isSafeInteger(t)?t>=0?new s.W(s.D.uint,t):new s.W(s.D.negint,t):new s.W(s.D.float,t),bigint:(t,e,i,r)=>t>=BigInt(0)?new s.W(s.D.uint,t):new s.W(s.D.negint,t),Uint8Array:(t,e,i,r)=>new s.W(s.D.bytes,t),string:(t,e,i,r)=>new s.W(s.D.string,t),boolean:(t,e,i,r)=>t?x.true:x.false,null:(t,e,i,r)=>x.null,undefined:(t,e,i,r)=>x.undefined,ArrayBuffer:(t,e,i,r)=>new s.W(s.D.bytes,new Uint8Array(t)),DataView:(t,e,i,r)=>new s.W(s.D.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,i,r){if(!t.length)return!0===i.addBreakTokens?[x.emptyArray,new s.W(s.D.break)]:x.emptyArray;r=_.createCheck(r,t);const n=[];let o=0;for(const e of t)n[o++]=S(e,i,r);return i.addBreakTokens?[new s.W(s.D.array,t.length),n,new s.W(s.D.break)]:[new s.W(s.D.array,t.length),n]},Object(t,e,i,r){const n="Object"!==e,o=n?t.keys():Object.keys(t),a=n?t.size:o.length;if(!a)return!0===i.addBreakTokens?[x.emptyMap,new s.W(s.D.break)]:x.emptyMap;r=_.createCheck(r,t);const h=[];let c=0;for(const e of o)h[c++]=[S(e,i,r),S(n?t.get(e):t[e],i,r)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(h,i),i.addBreakTokens?[new s.W(s.D.map,a),h,new s.W(s.D.break)]:[new s.W(s.D.map,a),h]}};E.Map=E.Object,E.Buffer=E.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))E[`${t}Array`]=E.DataView;function S(t,e={},i){const s=function(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(r.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";const i=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(n.includes(e))return e}(t);return i||"Object"}(t),o=e&&e.typeEncoders&&e.typeEncoders[s]||E[s];if("function"==typeof o){const r=o(t,s,e,i);if(null!=r)return r}const a=E[s];if(!a)throw new Error(`${h.OO} unsupported type: ${s}`);return a(t,s,e,i)}function T(t,e,i,r){if(Array.isArray(e))for(const n of e)T(t,n,i,r);else i[e.type.major](t,e,r)}function A(t,e,i){const r=S(t,i);if(!Array.isArray(r)&&i.quickEncodeToken){const t=i.quickEncodeToken(r);if(t)return t;const n=e[r.type.major];if(n.encodedSize){const t=n.encodedSize(r,i),e=new a(t);if(n(e,r,i),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return(0,o.Dz)(e.chunks[0])}}return w.reset(),T(w,r,e,i),w.toBytes(!0)}function C(t,e){return e=Object.assign({},v,e),A(t,b,e)}},53741:(t,e,i)=>{"use strict";i.d(e,{JN:()=>v,PS:()=>m,cW:()=>y});var r=i(59787),n=i(55580),s=i(53929),o=i(92887),a=i(50768),h=i(8278),c=i(59283),l=i(82428),u=i(73851),d=i(85590),f=i(22042);function p(t,e,i){throw new Error(`${d.IR} encountered invalid minor (${i}) for major ${t[e]>>>5}`)}function g(t){return()=>{throw new Error(`${d.IR} ${t}`)}}const y=[];for(let t=0;t<=23;t++)y[t]=p;y[24]=n.Km,y[25]=n.Zh,y[26]=n.cs,y[27]=n.uN,y[28]=p,y[29]=p,y[30]=p,y[31]=p;for(let t=32;t<=55;t++)y[t]=p;y[56]=s.yr,y[57]=s.r0,y[58]=s.wy,y[59]=s.ec,y[60]=p,y[61]=p,y[62]=p,y[63]=p;for(let t=64;t<=87;t++)y[t]=o.Ii;y[88]=o.UQ,y[89]=o.BS,y[90]=o.zU,y[91]=o.ME,y[92]=p,y[93]=p,y[94]=p,y[95]=g("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)y[t]=a.nt;y[120]=a.Bq,y[121]=a.h,y[122]=a.q0,y[123]=a.bc,y[124]=p,y[125]=p,y[126]=p,y[127]=g("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)y[t]=h.Ju;y[152]=h.h7,y[153]=h.OC,y[154]=h.lY,y[155]=h.a8,y[156]=p,y[157]=p,y[158]=p,y[159]=h.s5;for(let t=160;t<=183;t++)y[t]=c._K;y[184]=c.G,y[185]=c.qe,y[186]=c.IY,y[187]=c.F2,y[188]=p,y[189]=p,y[190]=p,y[191]=c.ng;for(let t=192;t<=215;t++)y[t]=l.qJ;y[216]=l.ZR,y[217]=l.CF,y[218]=l.vP,y[219]=l.MV,y[220]=p,y[221]=p,y[222]=p,y[223]=p;for(let t=224;t<=243;t++)y[t]=g("simple values are not supported");y[244]=p,y[245]=p,y[246]=p,y[247]=u.h1,y[248]=g("simple values are not supported"),y[249]=u.mW,y[250]=u.GI,y[251]=u.vV,y[252]=p,y[253]=p,y[254]=p,y[255]=u.y7;const m=[];for(let t=0;t<24;t++)m[t]=new r.W(r.D.uint,t,1);for(let t=-1;t>=-24;t--)m[31-t]=new r.W(r.D.negint,t,1);function v(t){switch(t.type){case r.D.false:return(0,f.nI)([244]);case r.D.true:return(0,f.nI)([245]);case r.D.null:return(0,f.nI)([246]);case r.D.bytes:return t.value.length?void 0:(0,f.nI)([64]);case r.D.string:return""===t.value?(0,f.nI)([96]):void 0;case r.D.array:return 0===t.value?(0,f.nI)([128]):void 0;case r.D.map:return 0===t.value?(0,f.nI)([160]):void 0;case r.D.uint:return t.value<24?(0,f.nI)([Number(t.value)]):void 0;case r.D.negint:if(t.value>=-24)return(0,f.nI)([31-Number(t.value)])}}m[64]=new r.W(r.D.bytes,new Uint8Array(0),1),m[96]=new r.W(r.D.string,"",1),m[128]=new r.W(r.D.array,0,1),m[160]=new r.W(r.D.map,0,1),m[244]=new r.W(r.D.false,!1,1),m[245]=new r.W(r.D.true,!0,1),m[246]=new r.W(r.D.null,null,1)},59787:(t,e,i)=>{"use strict";i.d(e,{D:()=>r,W:()=>n});class r{constructor(t,e,i){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}r.uint=new r(0,"uint",!0),r.negint=new r(1,"negint",!0),r.bytes=new r(2,"bytes",!0),r.string=new r(3,"string",!0),r.array=new r(4,"array",!1),r.map=new r(5,"map",!1),r.tag=new r(6,"tag",!1),r.float=new r(7,"float",!0),r.false=new r(7,"false",!0),r.true=new r(7,"true",!0),r.null=new r(7,"null",!0),r.undefined=new r(7,"undefined",!0),r.break=new r(7,"break",!0);class n{constructor(t,e,i){this.type=t,this.value=e,this.encodedLength=i,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}},37548:(t,e,i)=>{"use strict";i.r(e),i.d(e,{code:()=>h,decode:()=>l,encode:()=>c,name:()=>a});var r=i(64936),n=i(81362);const s={float64:!0,typeEncoders:{Object:function(t){if(t.asCID!==t)return null;const e=n.CID.asCID(t);if(!e)return null;const i=new Uint8Array(e.bytes.byteLength+1);return i.set(e.bytes,1),[new r.WU(r.Dy.tag,42),new r.WU(r.Dy.bytes,i)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},o={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};o.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return n.CID.decode(t.subarray(1))};const a="dag-cbor",h=113,c=t=>r.cv(t,s),l=t=>r.Jx(t,o)},28853:(t,e,i)=>{"use strict";i.d(e,{e:()=>a});var r=i(55447),n=i(64593),s=i(55565),o=i(37939);class a{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,i){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:i,value:r}of t)await this.put(i,r,e),yield{key:i,value:r}}async*getMany(t,e={}){for await(const i of t)yield this.get(i,e)}async*deleteMany(t,e={}){for await(const i of t)await this.delete(i,e),yield i}batch(){let t=[],e=[];return{put(e,i){t.push({key:e,value:i})},delete(t){e.push(t)},commit:async i=>{await n(this.putMany(t,i)),t=[],await n(this.deleteMany(e,i)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let i=this._all(t,e);if(null!=t.prefix&&(i=s(i,(e=>e.key.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(i=t.filters.reduce(((t,e)=>s(t,e)),i)),Array.isArray(t.orders)&&(i=t.orders.reduce(((t,e)=>(0,r.W)(t,e)),i)),null!=t.offset){let e=0;i=s(i,(()=>e++>=t.offset))}return null!=t.limit&&(i=o(i,t.limit)),i}queryKeys(t,e){let i=this._allKeys(t,e);if(null!=t.prefix&&(i=s(i,(e=>e.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(i=t.filters.reduce(((t,e)=>s(t,e)),i)),Array.isArray(t.orders)&&(i=t.orders.reduce(((t,e)=>(0,r.W)(t,e)),i)),null!=t.offset){let e=0;i=s(i,(()=>e++>=t.offset))}return null!=t.limit&&(i=o(i,t.limit)),i}}},80348:(t,e,i)=>{"use strict";i.r(e),i.d(e,{abortedError:()=>h,dbDeleteFailedError:()=>s,dbOpenFailedError:()=>n,dbWriteFailedError:()=>o,notFoundError:()=>a});var r=i(32114);function n(t){return t=t||new Error("Cannot open database"),r(t,"ERR_DB_OPEN_FAILED")}function s(t){return t=t||new Error("Delete failed"),r(t,"ERR_DB_DELETE_FAILED")}function o(t){return t=t||new Error("Write failed"),r(t,"ERR_DB_WRITE_FAILED")}function a(t){return t=t||new Error("Not Found"),r(t,"ERR_NOT_FOUND")}function h(t){return t=t||new Error("Aborted"),r(t,"ERR_ABORTED")}},27294:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BaseDatastore:()=>y.e,Errors:()=>O,KeyTransformDatastore:()=>w,MemoryDatastore:()=>m.MemoryDatastore,MountDatastore:()=>R,NamespaceDatastore:()=>I,ShardingDatastore:()=>S,TieredDatastore:()=>P.z,shard:()=>M});var r={};i.r(r),i.d(r,{NextToLast:()=>f,PREFIX:()=>a,Prefix:()=>u,README_FN:()=>c,SHARDING_FN:()=>h,ShardBase:()=>l,Suffix:()=>d,parseShardFun:()=>p,readShardFun:()=>g,readme:()=>o});var n=i(80348),s=i(41914);const o="This is a repository of IPLD objects. Each IPLD object is in a single file,\nnamed <base32 encoding of cid>.data. Where <base32 encoding of cid> is the\n\"base32\" encoding of the CID (as specified in\nhttps://github.com/multiformats/multibase) without the 'B' prefix.\nAll the object files are placed in a tree of directories, based on a\nfunction of the CID. This is a form of sharding similar to\nthe objects directory in git repositories. Previously, we used\nprefixes, we now use the next-to-last two charters.\n    func NextToLast(base32cid string) {\n      nextToLastLen := 2\n      offset := len(base32cid) - nextToLastLen - 1\n      return str[offset : offset+nextToLastLen]\n    }\nFor example, an object with a base58 CIDv1 of\n    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f\nhas a base32 CIDv1 of\n    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA\nand will be placed at\n    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data\nwith 'SC' being the last-to-next two characters and the 'B' at the\nbeginning of the CIDv1 string is the multibase prefix that is not\nstored in the filename.\n",a="/repo/flatfs/shard/",h="SHARDING",c="_README";class l{constructor(t){this.param=t,this.name="base",this._padding=""}fun(t){return"implement me"}toString(){return`${a}v1/${this.name}/${this.param}`}}class u extends l{constructor(t){super(t),this._padding="".padStart(t,"_"),this.name="prefix"}fun(t){return(t+this._padding).slice(0,this.param)}}class d extends l{constructor(t){super(t),this._padding="".padStart(t,"_"),this.name="suffix"}fun(t){const e=this._padding+t;return e.slice(e.length-this.param)}}class f extends l{constructor(t){super(t),this._padding="".padStart(t+1,"_"),this.name="next-to-last"}fun(t){const e=this._padding+t,i=e.length-this.param-1;return e.slice(i,i+this.param)}}function p(t){if(0===(t=t.trim()).length)throw new Error("empty shard string");if(!t.startsWith(a))throw new Error(`invalid or no path prefix: ${t}`);const e=t.slice(a.length).split("/"),i=e[0];if("v1"!==i)throw new Error(`expect 'v1' version, got '${i}'`);const r=e[1];if(!e[2])throw new Error("missing param");const n=parseInt(e[2],10);switch(r){case"prefix":return new u(n);case"suffix":return new d(n);case"next-to-last":return new f(n);default:throw new Error(`unkown sharding function: ${r}`)}}const g=async(t,e)=>{const i=new s.Key(t).child(new s.Key(h)),r="function"==typeof e.getRaw?e.getRaw.bind(e):e.get.bind(e),n=await r(i);return p((new TextDecoder).decode(n||"").trim())};var y=i(28853),m=i(43462),v=i(32121),b=i(60618);class w extends y.e{constructor(t,e){super(),this.child=t,this.transform=e}open(){return this.child.open()}put(t,e,i){return this.child.put(this.transform.convert(t),e,i)}get(t,e){return this.child.get(this.transform.convert(t),e)}has(t,e){return this.child.has(this.transform.convert(t),e)}delete(t,e){return this.child.delete(this.transform.convert(t),e)}async*putMany(t,e={}){const i=this.transform,r=this.child;yield*(0,b.pipe)(t,(async function*(t){yield*v(t,(({key:t,value:e})=>({key:i.convert(t),value:e})))}),(async function*(t){yield*r.putMany(t,e)}),(async function*(t){yield*v(t,(({key:t,value:e})=>({key:i.invert(t),value:e})))}))}async*getMany(t,e={}){const i=this.transform,r=this.child;yield*(0,b.pipe)(t,(async function*(t){yield*v(t,(t=>i.convert(t)))}),(async function*(t){yield*r.getMany(t,e)}))}async*deleteMany(t,e={}){const i=this.transform,r=this.child;yield*(0,b.pipe)(t,(async function*(t){yield*v(t,(t=>i.convert(t)))}),(async function*(t){yield*r.deleteMany(t,e)}),(async function*(t){yield*v(t,(t=>i.invert(t)))}))}batch(){const t=this.child.batch();return{put:(e,i)=>{t.put(this.transform.convert(e),i)},delete:e=>{t.delete(this.transform.convert(e))},commit:e=>t.commit(e)}}query(t,e){const i={...t};i.filters=(i.filters||[]).map((t=>({key:e,value:i})=>t({key:this.transform.convert(e),value:i})));const{prefix:r}=t;return null!=r&&"/"!==r&&(delete i.prefix,i.filters.push((({key:t})=>this.transform.invert(t).toString().startsWith(r)))),i.orders&&(i.orders=i.orders.map((t=>(e,i)=>t({key:this.transform.invert(e.key),value:e.value},{key:this.transform.invert(i.key),value:i.value})))),v(this.child.query(i,e),(({key:t,value:e})=>({key:this.transform.invert(t),value:e})))}queryKeys(t,e){const i={...t};i.filters=(i.filters||[]).map((t=>e=>t(this.transform.convert(e))));const{prefix:r}=t;return null!=r&&"/"!==r&&(delete i.prefix,i.filters.push((t=>this.transform.invert(t).toString().startsWith(r)))),i.orders&&(i.orders=i.orders.map((t=>(e,i)=>t(this.transform.invert(e),this.transform.invert(i))))),v(this.child.queryKeys(i,e),(t=>this.transform.invert(t)))}close(){return this.child.close()}}var _=i(42619);const x=new _.s(h),E=new _.s(c);class S extends y.e{constructor(t,e){super(),this.child=new w(t,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=e}async open(){await this.child.open(),this.shard=await S.create(this.child,this.shard)}_convertKey(t){const e=t.toString();return e===x.toString()||e===E.toString()?t:new _.s(this.shard.fun(e)).child(t)}_invertKey(t){const e=t.toString();return e===x.toString()||e===E.toString()?t:_.s.withNamespaces(t.list().slice(1))}static async createOrOpen(t,e){try{await S.create(t,e)}catch(t){if(t&&"datastore exists"!==t.message)throw t}return S.open(t)}static async open(t){const e=await g("/",t);return new S(t,e)}static async create(t,e){const i=await t.has(x);if(!i&&!e)throw n.dbOpenFailedError(Error("Shard is required when datastore doesn't have a shard key already."));if(!i){const i="function"==typeof t.putRaw?t.putRaw.bind(t):t.put.bind(t);return await Promise.all([i(x,(new TextEncoder).encode(e.toString()+"\n")),i(E,(new TextEncoder).encode(o))]),e}const r=await g("/",t),s=(r||"").toString(),a=e.toString();if(s!==a)throw new Error(`specified fun ${a} does not match repo shard fun ${s}`);return r}put(t,e,i){return this.child.put(t,e,i)}get(t,e){return this.child.get(t,e)}has(t,e){return this.child.has(t,e)}delete(t,e){return this.child.delete(t,e)}async*putMany(t,e={}){yield*this.child.putMany(t,e)}async*getMany(t,e={}){yield*this.child.getMany(t,e)}async*deleteMany(t,e={}){yield*this.child.deleteMany(t,e)}batch(){return this.child.batch()}query(t,e){const i={...t,filters:[({key:t})=>t.toString()!==x.toString(),({key:t})=>t.toString()!==E.toString()].concat(t.filters||[])};return this.child.query(i,e)}queryKeys(t,e){const i={...t,filters:[t=>t.toString()!==x.toString(),t=>t.toString()!==E.toString()].concat(t.filters||[])};return this.child.queryKeys(i,e)}close(){return this.child.close()}}var T=i(55565),A=i(37939),C=i(74014),k=i(55447);class R extends y.e{constructor(t){super(),this.mounts=t.slice()}async open(){await Promise.all(this.mounts.map((t=>t.datastore.open())))}_lookup(t){for(const e of this.mounts)if(e.prefix.toString()===t.toString()||e.prefix.isAncestorOf(t))return{datastore:e.datastore,mountpoint:e.prefix}}put(t,e,i){const r=this._lookup(t);if(null==r)throw n.dbWriteFailedError(new Error("No datastore mounted for this key"));return r.datastore.put(t,e,i)}get(t,e){const i=this._lookup(t);if(null==i)throw n.notFoundError(new Error("No datastore mounted for this key"));return i.datastore.get(t,e)}has(t,e){const i=this._lookup(t);return null==i?Promise.resolve(!1):i.datastore.has(t,e)}delete(t,e){const i=this._lookup(t);if(null==i)throw n.dbDeleteFailedError(new Error("No datastore mounted for this key"));return i.datastore.delete(t,e)}async close(){await Promise.all(this.mounts.map((t=>t.datastore.close())))}batch(){const t={},e=e=>{const i=this._lookup(e);if(null==i)throw new Error("No datastore mounted for this key");const r=i.mountpoint.toString();return null==t[r]&&(t[r]=i.datastore.batch()),{batch:t[r]}};return{put:(t,i)=>{e(t).batch.put(t,i)},delete:t=>{e(t).batch.delete(t)},commit:async e=>{await Promise.all(Object.keys(t).map((i=>t[i].commit(e))))}}}query(t,e){const i=this.mounts.map((i=>i.datastore.query({prefix:t.prefix,filters:t.filters},e)));let r=C(...i);if(t.filters&&t.filters.forEach((t=>{r=T(r,t)})),t.orders&&t.orders.forEach((t=>{r=(0,k.W)(r,t)})),null!=t.offset){let e=0;r=T(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=A(r,t.limit)),r}queryKeys(t,e){const i=this.mounts.map((i=>i.datastore.queryKeys({prefix:t.prefix,filters:t.filters},e)));let r=C(...i);if(t.filters&&t.filters.forEach((t=>{r=T(r,t)})),t.orders&&t.orders.forEach((t=>{r=(0,k.W)(r,t)})),null!=t.offset){let e=0;r=T(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=A(r,t.limit)),r}}var P=i(64869);class I extends w{constructor(t,e){super(t,{convert:t=>e.child(t),invert(t){if("/"===e.toString())return t;if(!e.isAncestorOf(t))throw new Error(`Expected prefix: (${e.toString()}) in key: ${t.toString()}`);return new _.s(t.toString().slice(e.toString().length),!1)}})}}const O=n,M=r},43462:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MemoryDatastore:()=>o});var r=i(28853),n=i(41914),s=i(80348);class o extends r.e{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(t,e){this.data[t.toString()]=e}async get(t){if(!await this.has(t))throw s.notFoundError();return this.data[t.toString()]}async has(t){return void 0!==this.data[t.toString()]}async delete(t){delete this.data[t.toString()]}async*_all(){yield*Object.entries(this.data).map((([t,e])=>({key:new n.Key(t),value:e})))}async*_allKeys(){yield*Object.entries(this.data).map((([t])=>new n.Key(t)))}}},64869:(t,e,i)=>{"use strict";i.d(e,{z:()=>c});var r=i(28853),n=i(80348),s=i(11227),o=i(84975),a=i(64593);const h=s("datastore:core:tiered");class c extends r.e{constructor(t){super(),this.stores=t.slice()}async open(){try{await Promise.all(this.stores.map((t=>t.open())))}catch(t){throw n.dbOpenFailedError()}}async put(t,e){try{await Promise.all(this.stores.map((i=>i.put(t,e))))}catch(t){throw n.dbWriteFailedError()}}async get(t,e){for(const i of this.stores)try{const r=await i.get(t,e);if(r)return r}catch(t){h(t)}throw n.notFoundError()}async has(t,e){for(const i of this.stores)if(await i.has(t,e))return!0;return!1}async delete(t,e){try{await Promise.all(this.stores.map((i=>i.delete(t,e))))}catch(t){throw n.dbDeleteFailedError()}}async*putMany(t,e={}){let i;const r=this.stores.map((t=>{const r=o();return a(t.putMany(r,e)).catch((t=>{i=t})),r}));try{for await(const e of t){if(i)throw i;r.forEach((t=>t.push(e))),yield e}}finally{r.forEach((t=>t.end()))}}async*deleteMany(t,e={}){let i;const r=this.stores.map((t=>{const r=o();return a(t.deleteMany(r,e)).catch((t=>{i=t})),r}));try{for await(const e of t){if(i)throw i;r.forEach((t=>t.push(e))),yield e}}finally{r.forEach((t=>t.end()))}}async close(){await Promise.all(this.stores.map((t=>t.close())))}batch(){const t=this.stores.map((t=>t.batch()));return{put:(e,i)=>{t.forEach((t=>t.put(e,i)))},delete:e=>{t.forEach((t=>t.delete(e)))},commit:async e=>{for(const i of t)await i.commit(e)}}}query(t,e){return this.stores[this.stores.length-1].query(t,e)}queryKeys(t,e){return this.stores[this.stores.length-1].queryKeys(t,e)}}},55447:(t,e,i)=>{"use strict";i.d(e,{W:()=>n});var r=i(31303);const n=(t,e)=>async function*(){const i=await r(t);yield*i.sort(e)}()},42619:(t,e,i)=>{"use strict";i.d(e,{s:()=>r.Key});var r=i(41914)},41914:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Key:()=>c});var r=i(64296),n=i(92263),s=i(52217);const o="/",a=(new TextEncoder).encode(o),h=a[0];class c{constructor(t,e){if("string"==typeof t)this._buf=(0,s.fromString)(t);else{if(!(t instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=t}if(null==e&&(e=!0),e&&this.clean(),0===this._buf.byteLength||this._buf[0]!==h)throw new Error("Invalid key")}toString(t="utf8"){return(0,n.toString)(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new c(t.join(o))}static random(){return new c((0,r.nanoid)().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||"string"==typeof t?new c(t):t.uint8Array?new c(t.uint8Array()):null}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=a),this._buf[0]!==h){const t=new Uint8Array(this._buf.byteLength+1);t.fill(h,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===h;)this._buf=this._buf.subarray(0,-1)}less(t){const e=this.list(),i=t.list();for(let t=0;t<e.length;t++){if(i.length<t+1)return!1;const r=e[t],n=i[t];if(r<n)return!0;if(r>n)return!1}return e.length<i.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(o).slice(1)}type(){return function(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(t){const e=t.split(":");return e[e.length-1]}(this.baseNamespace())}instance(t){return new c(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(o)||(t+=o),t+=this.type(),new c(t)}parent(){const t=this.list();return 1===t.length?new c(o):new c(t.slice(0,-1).join(o))}child(t){return this.toString()===o?t:t.toString()===o?this:new c(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()!==this.toString()&&t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()!==this.toString()&&this.toString().startsWith(t.toString())}isTopLevel(){return 1===this.list().length}concat(...t){return c.withNamespaces([...this.namespaces(),...(e=t.map((t=>t.namespaces())),[].concat(...e))]);var e}}},90569:(t,e,i)=>{"use strict";i.d(e,{Ue:()=>Op});var r={};i.r(r),i.d(r,{code:()=>$,createLink:()=>X,createNode:()=>W,decode:()=>Z,encode:()=>J,name:()=>q,prepare:()=>Y,validate:()=>K});var n={};i.r(n),i.d(n,{code:()=>rt,decode:()=>st,encode:()=>nt,name:()=>it});var s={};i.r(s),i.d(s,{code:()=>_t,decode:()=>Et,encode:()=>xt,name:()=>wt});var o={};i.r(o),i.d(o,{InvalidValueError:()=>Eh,MissingRepoOptionsError:()=>Sh,NonReversibleMigrationError:()=>wh,NotInitializedRepoError:()=>_h,RequiredParameterError:()=>xh});var a={};i.r(a),i.d(a,{abortedError:()=>mp,notFoundError:()=>yp});const h=i(70942);var c=i(106),l=i(11227),u=i(32114),d=i(62100);const f=d.Reader,p=d.Writer,g=d.util,y=d.roots["ipfs-unixfs"]||(d.roots["ipfs-unixfs"]={}),m=y.Data=(()=>{function t(t){if(this.blocksizes=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.Type=0,t.prototype.Data=g.newBuffer([]),t.prototype.filesize=g.Long?g.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=g.emptyArray,t.prototype.hashType=g.Long?g.Long.fromBits(0,0,!0):0,t.prototype.fanout=g.Long?g.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(t,e){if(e||(e=p.create()),e.uint32(8).int32(t.Type),null!=t.Data&&Object.hasOwnProperty.call(t,"Data")&&e.uint32(18).bytes(t.Data),null!=t.filesize&&Object.hasOwnProperty.call(t,"filesize")&&e.uint32(24).uint64(t.filesize),null!=t.blocksizes&&t.blocksizes.length)for(var i=0;i<t.blocksizes.length;++i)e.uint32(32).uint64(t.blocksizes[i]);return null!=t.hashType&&Object.hasOwnProperty.call(t,"hashType")&&e.uint32(40).uint64(t.hashType),null!=t.fanout&&Object.hasOwnProperty.call(t,"fanout")&&e.uint32(48).uint64(t.fanout),null!=t.mode&&Object.hasOwnProperty.call(t,"mode")&&e.uint32(56).uint32(t.mode),null!=t.mtime&&Object.hasOwnProperty.call(t,"mtime")&&y.UnixTime.encode(t.mtime,e.uint32(66).fork()).ldelim(),e},t.decode=function(t,e){t instanceof f||(t=f.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new y.Data;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.Type=t.int32();break;case 2:r.Data=t.bytes();break;case 3:r.filesize=t.uint64();break;case 4:if(r.blocksizes&&r.blocksizes.length||(r.blocksizes=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.blocksizes.push(t.uint64());else r.blocksizes.push(t.uint64());break;case 5:r.hashType=t.uint64();break;case 6:r.fanout=t.uint64();break;case 7:r.mode=t.uint32();break;case 8:r.mtime=y.UnixTime.decode(t,t.uint32());break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("Type"))throw g.ProtocolError("missing required 'Type'",{instance:r});return r},t.fromObject=function(t){if(t instanceof y.Data)return t;var e=new y.Data;switch(t.Type){case"Raw":case 0:e.Type=0;break;case"Directory":case 1:e.Type=1;break;case"File":case 2:e.Type=2;break;case"Metadata":case 3:e.Type=3;break;case"Symlink":case 4:e.Type=4;break;case"HAMTShard":case 5:e.Type=5}if(null!=t.Data&&("string"==typeof t.Data?g.base64.decode(t.Data,e.Data=g.newBuffer(g.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),null!=t.filesize&&(g.Long?(e.filesize=g.Long.fromValue(t.filesize)).unsigned=!0:"string"==typeof t.filesize?e.filesize=parseInt(t.filesize,10):"number"==typeof t.filesize?e.filesize=t.filesize:"object"==typeof t.filesize&&(e.filesize=new g.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");e.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)g.Long?(e.blocksizes[i]=g.Long.fromValue(t.blocksizes[i])).unsigned=!0:"string"==typeof t.blocksizes[i]?e.blocksizes[i]=parseInt(t.blocksizes[i],10):"number"==typeof t.blocksizes[i]?e.blocksizes[i]=t.blocksizes[i]:"object"==typeof t.blocksizes[i]&&(e.blocksizes[i]=new g.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0))}if(null!=t.hashType&&(g.Long?(e.hashType=g.Long.fromValue(t.hashType)).unsigned=!0:"string"==typeof t.hashType?e.hashType=parseInt(t.hashType,10):"number"==typeof t.hashType?e.hashType=t.hashType:"object"==typeof t.hashType&&(e.hashType=new g.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),null!=t.fanout&&(g.Long?(e.fanout=g.Long.fromValue(t.fanout)).unsigned=!0:"string"==typeof t.fanout?e.fanout=parseInt(t.fanout,10):"number"==typeof t.fanout?e.fanout=t.fanout:"object"==typeof t.fanout&&(e.fanout=new g.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),null!=t.mode&&(e.mode=t.mode>>>0),null!=t.mtime){if("object"!=typeof t.mtime)throw TypeError(".Data.mtime: object expected");e.mtime=y.UnixTime.fromObject(t.mtime)}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.blocksizes=[]),e.defaults){if(i.Type=e.enums===String?"Raw":0,e.bytes===String?i.Data="":(i.Data=[],e.bytes!==Array&&(i.Data=g.newBuffer(i.Data))),g.Long){var r=new g.Long(0,0,!0);i.filesize=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else i.filesize=e.longs===String?"0":0;g.Long?(r=new g.Long(0,0,!0),i.hashType=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):i.hashType=e.longs===String?"0":0,g.Long?(r=new g.Long(0,0,!0),i.fanout=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):i.fanout=e.longs===String?"0":0,i.mode=0,i.mtime=null}if(null!=t.Type&&t.hasOwnProperty("Type")&&(i.Type=e.enums===String?y.Data.DataType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(i.Data=e.bytes===String?g.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),null!=t.filesize&&t.hasOwnProperty("filesize")&&("number"==typeof t.filesize?i.filesize=e.longs===String?String(t.filesize):t.filesize:i.filesize=e.longs===String?g.Long.prototype.toString.call(t.filesize):e.longs===Number?new g.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var n=0;n<t.blocksizes.length;++n)"number"==typeof t.blocksizes[n]?i.blocksizes[n]=e.longs===String?String(t.blocksizes[n]):t.blocksizes[n]:i.blocksizes[n]=e.longs===String?g.Long.prototype.toString.call(t.blocksizes[n]):e.longs===Number?new g.LongBits(t.blocksizes[n].low>>>0,t.blocksizes[n].high>>>0).toNumber(!0):t.blocksizes[n]}return null!=t.hashType&&t.hasOwnProperty("hashType")&&("number"==typeof t.hashType?i.hashType=e.longs===String?String(t.hashType):t.hashType:i.hashType=e.longs===String?g.Long.prototype.toString.call(t.hashType):e.longs===Number?new g.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),null!=t.fanout&&t.hasOwnProperty("fanout")&&("number"==typeof t.fanout?i.fanout=e.longs===String?String(t.fanout):t.fanout:i.fanout=e.longs===String?g.Long.prototype.toString.call(t.fanout):e.longs===Number?new g.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),null!=t.mode&&t.hasOwnProperty("mode")&&(i.mode=t.mode),null!=t.mtime&&t.hasOwnProperty("mtime")&&(i.mtime=y.UnixTime.toObject(t.mtime,e)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.DataType=function(){const t={},e=Object.create(t);return e[t[0]="Raw"]=0,e[t[1]="Directory"]=1,e[t[2]="File"]=2,e[t[3]="Metadata"]=3,e[t[4]="Symlink"]=4,e[t[5]="HAMTShard"]=5,e}(),t})(),v=(y.UnixTime=(()=>{function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.Seconds=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(t,e){return e||(e=p.create()),e.uint32(8).int64(t.Seconds),null!=t.FractionalNanoseconds&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&e.uint32(21).fixed32(t.FractionalNanoseconds),e},t.decode=function(t,e){t instanceof f||(t=f.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new y.UnixTime;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.Seconds=t.int64();break;case 2:r.FractionalNanoseconds=t.fixed32();break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("Seconds"))throw g.ProtocolError("missing required 'Seconds'",{instance:r});return r},t.fromObject=function(t){if(t instanceof y.UnixTime)return t;var e=new y.UnixTime;return null!=t.Seconds&&(g.Long?(e.Seconds=g.Long.fromValue(t.Seconds)).unsigned=!1:"string"==typeof t.Seconds?e.Seconds=parseInt(t.Seconds,10):"number"==typeof t.Seconds?e.Seconds=t.Seconds:"object"==typeof t.Seconds&&(e.Seconds=new g.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),null!=t.FractionalNanoseconds&&(e.FractionalNanoseconds=t.FractionalNanoseconds>>>0),e},t.toObject=function(t,e){e||(e={});var i={};if(e.defaults){if(g.Long){var r=new g.Long(0,0,!1);i.Seconds=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else i.Seconds=e.longs===String?"0":0;i.FractionalNanoseconds=0}return null!=t.Seconds&&t.hasOwnProperty("Seconds")&&("number"==typeof t.Seconds?i.Seconds=e.longs===String?String(t.Seconds):t.Seconds:i.Seconds=e.longs===String?g.Long.prototype.toString.call(t.Seconds):e.longs===Number?new g.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),null!=t.FractionalNanoseconds&&t.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=t.FractionalNanoseconds),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),y.Metadata=(()=>{function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.MimeType="",t.encode=function(t,e){return e||(e=p.create()),null!=t.MimeType&&Object.hasOwnProperty.call(t,"MimeType")&&e.uint32(10).string(t.MimeType),e},t.decode=function(t,e){t instanceof f||(t=f.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new y.Metadata;t.pos<i;){var n=t.uint32();n>>>3==1?r.MimeType=t.string():t.skipType(7&n)}return r},t.fromObject=function(t){if(t instanceof y.Metadata)return t;var e=new y.Metadata;return null!=t.MimeType&&(e.MimeType=String(t.MimeType)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.MimeType=""),null!=t.MimeType&&t.hasOwnProperty("MimeType")&&(i.MimeType=t.MimeType),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),m),b=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],w=["directory","hamt-sharded-directory"],_=parseInt("0644",8),x=parseInt("0755",8);function E(t){if(null!=t)return"number"==typeof t?4095&t:"0"===(t=t.toString()).substring(0,1)?4095&parseInt(t,8):4095&parseInt(t,10)}function S(t){if(null==t)return;let e;if(null!=t.secs&&(e={secs:t.secs,nsecs:t.nsecs}),null!=t.Seconds&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const i=t.getTime(),r=Math.floor(i/1e3);e={secs:r,nsecs:1e3*(i-1e3*r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e&&null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw u(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}class T{static unmarshal(t){const e=v.decode(t),i=v.toObject(e,{defaults:!1,arrays:!0,longs:Number,objects:!1}),r=new T({type:b[i.Type],data:i.Data,blockSizes:i.blocksizes,mode:i.mode,mtime:i.mtime?{secs:i.mtime.Seconds,nsecs:i.mtime.FractionalNanoseconds}:void 0});return r._originalMode=i.mode||0,r}constructor(t={type:"file"}){const{type:e,data:i,blockSizes:r,hashType:n,fanout:s,mtime:o,mode:a}=t;if(e&&!b.includes(e))throw u(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE");this.type=e||"file",this.data=i,this.hashType=n,this.fanout=s,this.blockSizes=r||[],this._originalMode=0,this.mode=E(a),o&&(this.mtime=S(o),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(t){this._mode=this.isDirectory()?x:_;const e=E(t);void 0!==e&&(this._mode=e)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&w.includes(this.type))}addBlockSize(t){this.blockSizes.push(t)}removeBlockSize(t){this.blockSizes.splice(t,1)}fileSize(){if(this.isDirectory())return 0;let t=0;return this.blockSizes.forEach((e=>{t+=e})),this.data&&(t+=this.data.length),t}marshal(){let t;switch(this.type){case"raw":t=v.DataType.Raw;break;case"directory":t=v.DataType.Directory;break;case"file":t=v.DataType.File;break;case"metadata":t=v.DataType.Metadata;break;case"symlink":t=v.DataType.Symlink;break;case"hamt-sharded-directory":t=v.DataType.HAMTShard;break;default:throw u(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}let e,i,r=this.data;if(this.data&&this.data.length||(r=void 0),null!=this.mode&&(e=4294963200&this._originalMode|(E(this.mode)||0),e!==_||this.isDirectory()||(e=void 0),e===x&&this.isDirectory()&&(e=void 0)),null!=this.mtime){const t=S(this.mtime);t&&(i={Seconds:t.secs,FractionalNanoseconds:t.nsecs},0===i.FractionalNanoseconds&&delete i.FractionalNanoseconds)}const n={Type:t,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:e,mtime:i};return v.encode(n).finish()}}var A=i(81362);const C=new TextDecoder;function k(t,e){let i=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const n=t[e++];if(i+=r<28?(127&n)<<r:(127&n)*2**r,n<128)break}return[i,e]}function R(t,e){let i;[i,e]=k(t,e);const r=e+i;if(i<0||r<0)throw new Error("protobuf: invalid length");if(r>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,r),r]}function P(t,e){let i;return[i,e]=k(t,e),[7&i,i>>3,e]}function I(t){const e={},i=t.length;let r=0;for(;r<i;){let i,n;if([i,n,r]=P(t,r),1===n){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==i)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(void 0!==e.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,r]=R(t,r)}else if(2===n){if(void 0!==e.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==i)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let n;[n,r]=R(t,r),e.Name=C.decode(n)}else{if(3!==n)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${n}`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==i)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,r]=k(t,r)}}if(r>i)throw new Error("protobuf: (PBLink) unexpected end of data");return e}const O=new TextEncoder,M=2**32;function D(t,e){let i=e.length;if("number"==typeof t.Tsize){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");i=L(e,i,t.Tsize)-1,e[i]=24}if("string"==typeof t.Name){const r=O.encode(t.Name);i-=r.length,e.set(r,i),i=L(e,i,r.length)-1,e[i]=18}return t.Hash&&(i-=t.Hash.length,e.set(t.Hash,i),i=L(e,i,t.Hash.length)-1,e[i]=10),e.length-i}function B(t){let e=0;if(t.Hash){const i=t.Hash.length;e+=1+i+N(i)}if("string"==typeof t.Name){const i=O.encode(t.Name).length;e+=1+i+N(i)}return"number"==typeof t.Tsize&&(e+=1+N(t.Tsize)),e}function L(t,e,i){const r=e-=N(i);for(;i>=2147483648;)t[e++]=127&i|128,i/=128;for(;i>=128;)t[e++]=127&i|128,i>>>=7;return t[e]=i,r}function N(t){return t%2==0&&t++,Math.floor((function(t){let e=0;return t>=M&&(t=Math.floor(t/M),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+U[t]}(t)+6)/7)}const U=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],F=["Data","Links"],z=["Hash","Name","Tsize"],j=new TextEncoder;function V(t,e){if(t===e)return 0;const i=t.Name?j.encode(t.Name):[],r=e.Name?j.encode(e.Name):[];let n=i.length,s=r.length;for(let t=0,e=Math.min(n,s);t<e;++t)if(i[t]!==r[t]){n=i[t],s=r[t];break}return n<s?-1:s<n?1:0}function G(t,e){return!Object.keys(t).some((t=>!e.includes(t)))}function H(t){if("object"==typeof t.asCID){const e=A.CID.asCID(t);if(!e)throw new TypeError("Invalid DAG-PB form");return{Hash:e}}if("object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let i=A.CID.asCID(t.Hash);try{i||("string"==typeof t.Hash?i=A.CID.parse(t.Hash):t.Hash instanceof Uint8Array&&(i=A.CID.decode(t.Hash)))}catch(t){throw new TypeError(`Invalid DAG-PB form: ${t.message}`)}i&&(e.Hash=i)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof t.Name&&(e.Name=t.Name),"number"==typeof t.Tsize&&(e.Tsize=t.Tsize),e}function Y(t){if((t instanceof Uint8Array||"string"==typeof t)&&(t={Data:t}),"object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(void 0!==t.Data)if("string"==typeof t.Data)e.Data=j.encode(t.Data);else{if(!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");e.Data=t.Data}if(void 0!==t.Links){if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form");e.Links=t.Links.map(H),e.Links.sort(V)}else e.Links=[];return e}function K(t){if(!t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!G(t,F))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==t.Data&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const i=t.Links[e];if(!i||"object"!=typeof i||Array.isArray(i))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!G(i,z))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!i.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(i.Hash.asCID!==i.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==i.Name&&"string"!=typeof i.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==i.Tsize&&("number"!=typeof i.Tsize||i.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&-1===V(i,t.Links[e-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function W(t,e=[]){return Y({Data:t,Links:e})}function X(t,e,i){return H({Hash:i,Name:t,Tsize:e})}const q="dag-pb",$=112;function J(t){K(t);const e={};return t.Links&&(e.Links=t.Links.map((t=>{const e={};return t.Hash&&(e.Hash=t.Hash.bytes),void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),t.Data&&(e.Data=t.Data),function(t){const e=function(t){let e=0;if(t.Data){const i=t.Data.length;e+=1+i+N(i)}if(t.Links)for(const i of t.Links){const t=B(i);e+=1+t+N(t)}return e}(t),i=new Uint8Array(e);let r=e;if(t.Data&&(r-=t.Data.length,i.set(t.Data,r),r=L(i,r,t.Data.length)-1,i[r]=10),t.Links)for(let e=t.Links.length-1;e>=0;e--){const n=D(t.Links[e],i.subarray(0,r));r-=n,r=L(i,r,n)-1,i[r]=18}return i}(e)}function Z(t){const e=function(t){const e=t.length;let i,r,n=0,s=!1;for(;n<e;){let e,o;if([e,o,n]=P(t,n),2!==e)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${e}`);if(1===o){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,n]=R(t,n),i&&(s=!0)}else{if(2!==o)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${o}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let e;i||(i=[]),[e,n]=R(t,n),i.push(I(e))}}}if(n>e)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return r&&(o.Data=r),o.Links=i||[],o}(t),i={};return e.Data&&(i.Data=e.Data),e.Links&&(i.Links=e.Links.map((t=>{const e={};try{e.Hash=A.CID.decode(t.Hash)}catch(t){}if(!e.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),i}var Q=i(64936);const tt={float64:!0,typeEncoders:{Object:function(t){if(t.asCID!==t)return null;const e=A.CID.asCID(t);if(!e)return null;const i=new Uint8Array(e.bytes.byteLength+1);return i.set(e.bytes,1),[new Q.WU(Q.Dy.tag,42),new Q.WU(Q.Dy.bytes,i)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},et={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};et.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return A.CID.decode(t.subarray(1))};const it="dag-cbor",rt=113,nt=t=>Q.cv(t,tt),st=t=>Q.Jx(t,et);var ot=i(16441),at=i(9885),ht=i(59787),ct=i(72696),lt=i(85590),ut=i(22042);class dt extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){const e=this.inRecursive[this.inRecursive.length-1];e&&(e.type===ht.D.array&&(e.elements++,1!==e.elements&&t.push([44])),e.type===ht.D.map&&(e.elements++,1!==e.elements&&(e.elements%2==1?t.push([44]):t.push([58]))))}[ht.D.uint.major](t,e){this.prefix(t);const i=String(e.value),r=[];for(let t=0;t<i.length;t++)r[t]=i.charCodeAt(t);t.push(r)}[ht.D.negint.major](t,e){this[ht.D.uint.major](t,e)}[ht.D.bytes.major](t,e){throw new Error(`${lt.OO} unsupported type: Uint8Array`)}[ht.D.string.major](t,e){this.prefix(t);const i=(0,ut.mL)(JSON.stringify(e.value));t.push(i.length>32?(0,ut.Dz)(i):i)}[ht.D.array.major](t,e){this.prefix(t),this.inRecursive.push({type:ht.D.array,elements:0}),t.push([91])}[ht.D.map.major](t,e){this.prefix(t),this.inRecursive.push({type:ht.D.map,elements:0}),t.push([123])}[ht.D.tag.major](t,e){}[ht.D.float.major](t,e){if("break"===e.type.name){const e=this.inRecursive.pop();if(e){if(e.type===ht.D.array)t.push([93]);else{if(e.type!==ht.D.map)throw new Error("Unexpected recursive type; this should not happen!");t.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===e.value)throw new Error(`${lt.OO} unsupported type: undefined`);if(this.prefix(t),"true"===e.type.name)return void t.push([116,114,117,101]);if("false"===e.type.name)return void t.push([102,97,108,115,101]);if("null"===e.type.name)return void t.push([110,117,108,108]);const i=String(e.value),r=[];let n=!1;for(let t=0;t<i.length;t++)r[t]=i.charCodeAt(t),n||46!==r[t]&&101!==r[t]&&69!==r[t]||(n=!0);n||(r.push(46),r.push(48)),t.push(r)}}const ft={addBreakTokens:!0,mapSorter:function(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${lt.OO} complex map keys are not supported`);const i=t[0],r=e[0];if(i.type!==ht.D.string||r.type!==ht.D.string)throw new Error(`${lt.OO} non-string map keys are not supported`);if(i<r)return-1;if(i>r)return 1;throw new Error(`${lt.OO} unexpected duplicate map keys, this is not supported`)}};var pt=i(61287);class gt{constructor(t,e={}){this.pos=0,this.data=t,this.options=e,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;32===t||9===t||13===t||10===t;)t=this.data[++this.pos]}expect(t){if(this.data.length-this.pos<t.length)throw new Error(`${lt.IR} unexpected end of input at position ${this.pos}`);for(let e=0;e<t.length;e++)if(this.data[this.pos++]!==t[e])throw new Error(`${lt.IR} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){const t=this.pos;let e=!1,i=!1;const r=t=>{for(;!this.done();){const e=this.ch();if(!t.includes(e))break;this.pos++}};if(45===this.ch()&&(e=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new ht.W(ht.D.uint,0,this.pos-t);this.pos++,i=!0}if(r([48,49,50,51,52,53,54,55,56,57]),e&&this.pos===t+1)throw new Error(`${lt.IR} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(i)throw new Error(`${lt.IR} unexpected token at position ${this.pos}`);i=!0,this.pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(i=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,r([48,49,50,51,52,53,54,55,56,57]));const n=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),s=parseFloat(n);return i?new ht.W(ht.D.float,s,this.pos-t):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new ht.W(s>=0?ht.D.uint:ht.D.negint,s,this.pos-t):new ht.W(s>=0?ht.D.uint:ht.D.negint,BigInt(n),this.pos-t)}parseString(){if(34!==this.ch())throw new Error(`${lt.IR} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let t=this.pos,e=0;t<this.data.length&&e<65536;t++,e++){const i=this.data[t];if(92===i||i<32||i>=128)break;if(34===i){const i=String.fromCharCode.apply(null,this.data.subarray(this.pos,t));return this.pos=t+1,new ht.W(ht.D.string,i,e)}}const t=this.pos,e=[],i=()=>{if(this.pos+4>=this.data.length)throw new Error(`${lt.IR} unexpected end of unicode escape sequence at position ${this.pos}`);let t=0;for(let e=0;e<4;e++){let e=this.ch();if(e>=48&&e<=57)e-=48;else if(e>=97&&e<=102)e=e-97+10;else{if(!(e>=65&&e<=70))throw new Error(`${lt.IR} unexpected unicode escape character at position ${this.pos}`);e=e-65+10}t=16*t+e,this.pos++}return t},r=()=>{const t=this.ch();let i,r,n,s,o=null,a=t>239?4:t>223?3:t>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${lt.IR} unexpected unicode sequence at position ${this.pos}`);switch(a){case 1:t<128&&(o=t);break;case 2:i=this.data[this.pos+1],128==(192&i)&&(s=(31&t)<<6|63&i,s>127&&(o=s));break;case 3:i=this.data[this.pos+1],r=this.data[this.pos+2],128==(192&i)&&128==(192&r)&&(s=(15&t)<<12|(63&i)<<6|63&r,s>2047&&(s<55296||s>57343)&&(o=s));break;case 4:i=this.data[this.pos+1],r=this.data[this.pos+2],n=this.data[this.pos+3],128==(192&i)&&128==(192&r)&&128==(192&n)&&(s=(15&t)<<18|(63&i)<<12|(63&r)<<6|63&n,s>65535&&s<1114112&&(o=s))}null===o?(o=65533,a=1):o>65535&&(o-=65536,e.push(o>>>10&1023|55296),o=56320|1023&o),e.push(o),this.pos+=a};for(;!this.done();){const n=this.ch();let s;switch(n){case 92:if(this.pos++,this.done())throw new Error(`${lt.IR} unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:e.push(s);break;case 98:e.push(8);break;case 116:e.push(9);break;case 110:e.push(10);break;case 102:e.push(12);break;case 114:e.push(13);break;case 117:e.push(i());break;default:throw new Error(`${lt.IR} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new ht.W(ht.D.string,(0,ut.Pu)(e),this.pos-t);default:if(n<32)throw new Error(`${lt.IR} invalid control character at position ${this.pos}`);n<128?(e.push(n),this.pos++):r()}}throw new Error(`${lt.IR} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new ht.W(ht.D.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new ht.W(ht.D.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new ht.W(ht.D.null,null,4);case 102:return this.expect([102,97,108,115,101]),new ht.W(ht.D.false,!1,5);case 116:return this.expect([116,114,117,101]),new ht.W(ht.D.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${lt.IR} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new ht.W(ht.D.break,void 0,1);if(44!==this.ch())throw new Error(`${lt.IR} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new ht.W(ht.D.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new ht.W(ht.D.break,void 0,1);if(44!==this.ch())throw new Error(`${lt.IR} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new ht.W(ht.D.break,void 0,1);const t=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${lt.IR} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${lt.IR} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function yt(t){const e=at.base64.encode(t).slice(1);return[new Q.WU(Q.Dy.map,1/0,1),new Q.WU(Q.Dy.string,"/",1),new Q.WU(Q.Dy.map,1/0,1),new Q.WU(Q.Dy.string,"bytes",5),new Q.WU(Q.Dy.string,e,e.length),new Q.WU(Q.Dy.break,void 0,1),new Q.WU(Q.Dy.break,void 0,1)]}const mt={typeEncoders:{Object:function(t){if(t.asCID!==t)return null;const e=ot.k0.asCID(t);if(!e)return null;const i=e.toString();return[new Q.WU(Q.Dy.map,1/0,1),new Q.WU(Q.Dy.string,"/",1),new Q.WU(Q.Dy.string,i,i.length),new Q.WU(Q.Dy.break,void 0,1)]},Uint8Array:yt,Buffer:yt,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class vt extends gt{constructor(t,e){super(t,e),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const t=this._next();if(t.type===Q.Dy.map){const t=this._next();if(t.type===Q.Dy.string&&"/"===t.value){const t=this._next();if(t.type===Q.Dy.string){if(this._next().type!==Q.Dy.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(t),new Q.WU(Q.Dy.tag,42,0)}if(t.type===Q.Dy.map){const t=this._next();if(t.type===Q.Dy.string&&"bytes"===t.value){const t=this._next();if(t.type===Q.Dy.string){for(let t=0;t<2;t++)if(this._next().type!==Q.Dy.break)throw new Error("Invalid encoded Bytes form");const e=at.base64.decode(`m${t.value}`);return new Q.WU(Q.Dy.bytes,e,t.value.length)}this.tokenBuffer.push(t)}this.tokenBuffer.push(t)}this.tokenBuffer.push(t)}this.tokenBuffer.push(t)}return t}}const bt={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};bt.tags[42]=ot.k0.parse;const wt="dag-json",_t=297,xt=t=>{return e=t,i=mt,i=Object.assign({},ft,i),(0,ct.w$)(e,new dt,i);var e,i},Et=t=>function(t,e){return e=Object.assign({tokenizer:new gt(t,e)},e),(0,pt.Jx)(t,e)}(t,Object.assign(bt,{tokenizer:new vt(t,bt)}));var St=i(28630),Tt=i.t(St,2),At=i(78103),Ct=i(48789);class kt extends Error{constructor(t="not initialized"){super(t),this.name="NotInitializedError",this.code=kt.code}}kt.code="ERR_NOT_INITIALIZED";class Rt extends Error{constructor(t="cannot initialize an initializing node"){super(t),this.name="AlreadyInitializingError",this.code=Pt.code}}Rt.code="ERR_ALREADY_INITIALIZING";class Pt extends Error{constructor(t="cannot re-initialize an initialized node"){super(t),this.name="AlreadyInitializedError",this.code=Pt.code}}Pt.code="ERR_ALREADY_INITIALIZED";class It extends Error{constructor(t="not started"){super(t),this.name="NotStartedError",this.code=It.code}}It.code="ERR_NOT_STARTED";class Ot extends Error{constructor(t="cannot start, already startin"){super(t),this.name="AlreadyStartingError",this.code=Ot.code}}Ot.code="ERR_ALREADY_STARTING";class Mt extends Error{constructor(t="cannot start, already started"){super(t),this.name="AlreadyStartedError",this.code=Mt.code}}Mt.code="ERR_ALREADY_STARTED";class Dt extends Error{constructor(t="not enabled"){super(t),this.name="NotEnabledError",this.code=Dt.code}}Dt.code="ERR_NOT_ENABLED";var Bt=i(52217),Lt=i(24981),Nt=i(41914),Ut=i(10715),Ft=i(32044);let zt=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function jt(t="",e="ms"){var i=null;return(t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(zt,(function(t,e,r){(r=Vt(r))&&(i=(i||0)+parseFloat(e,10)*r)})),i&&i/(Vt(e)||1)}function Vt(t){return jt[t]||jt[t.toLowerCase().replace(/s$/,"")]}jt.nanosecond=jt.ns=1e-6,jt["s"]=jt["s"]=jt.us=jt.microsecond=.001,jt.millisecond=jt.ms=jt[""]=1,jt.second=jt.sec=jt.s=1e3*jt.ms,jt.minute=jt.min=jt.m=60*jt.s,jt.hour=jt.hr=jt.h=60*jt.m,jt.day=jt.d=24*jt.h,jt.week=jt.wk=jt.w=7*jt.d,jt.month=jt.b=30.4375*jt.d,jt.year=jt.yr=jt.y=365.25*jt.d;const Gt=jt;class Ht extends Error{constructor(t="request timed out"){super(t),this.name="TimeoutError",this.code=Ht.code}}function Yt(t,e){return(...i)=>{const r=i[null==e?i.length-1:e];if(!r||!r.timeout)return t(...i);const n="string"==typeof r.timeout?Gt(r.timeout):r.timeout,s=new Ut.TimeoutController(n);r.signal=(0,Ft.anySignal)([r.signal,s.signal]);const o=t(...i),a=new Promise(((t,e)=>{s.signal.addEventListener("abort",(()=>{e(new Ht)}))})),h=Date.now(),c=()=>{if(s.signal.aborted)throw new Ht;if(Date.now()-h>n)throw s.abort(),new Ht};return o[Symbol.asyncIterator]?async function*(){const t=o[Symbol.asyncIterator]();try{for(;;){const{value:e,done:i}=await Promise.race([t.next(),a]);if(i)break;c(),yield e}}catch(t){throw c(),t}finally{s.clear(),t.return&&t.return()}}():(async()=>{try{const t=await Promise.race([o,a]);return c(),t}catch(t){throw c(),t}finally{s.clear()}})()}}Ht.code="ERR_TIMEOUT";const Kt="/ipfs/";function Wt(t){if(t instanceof Uint8Array)try{t=A.CID.decode(t)}catch(t){throw u(t,"ERR_INVALID_CID")}let e=A.CID.asCID(t);if(e)return{cid:e,path:void 0};(t=t.toString()).startsWith(Kt)&&(t=t.substring(Kt.length));const i=t.split("/");let r;try{e=A.CID.parse(i.shift()||"")}catch(t){throw u(t,"ERR_INVALID_CID")}return i.length&&(r=`/${i.join("/")}`),{cid:e,path:r}}const Xt="This command must be run in online mode. Try running 'ipfs daemon' first.",qt=new Nt.Key("/local/filesroot"),$t=262144,Jt=t=>t instanceof Uint8Array?A.CID.decode(t).toString():(0===(t=t.toString()).indexOf("/ipfs/")&&(t=t.substring("/ipfs/".length)),"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t),Zt=async function(t,e,i,r={}){const{cid:n,path:s}=Wt(i);s&&(r.path=s);let o=n,a=r.path||"";if(a.startsWith("/")&&(a=a.substring(1)),r.path)try{for await(const{value:i,remainderPath:s}of ee(n,r.path,e,t,{signal:r.signal})){if(!A.CID.asCID(i))break;a=s,o=i}}catch(t){throw t.message.startsWith("Object has no property")&&(t.message=`no link named "${a.split("/")[0]}" under ${o}`,t.code="ERR_NO_LINK"),t}return{cid:o,remainderPath:a||""}},Qt=t=>{if("file"!==t.type&&"directory"!==t.type&&"raw"!==t.type)throw new Error(`Unknown node type '${t.type}'`);const e={cid:t.cid,path:t.path,name:t.name,size:t.size,type:"file"};return"directory"===t.type&&(e.type="dir"),"file"===t.type&&(e.size=t.unixfs.fileSize()),"file"!==t.type&&"directory"!==t.type||(e.mode=t.unixfs.mode,void 0!==t.unixfs.mtime&&(e.mtime=t.unixfs.mtime)),e},te=Yt((async(t,e)=>await t)),ee=async function*(t,e,i,r,n){const s=async t=>{const e=await i.getCodec(t.code),s=await r.blocks.get(t,n);return e.decode(s)},o=e.split("/").filter(Boolean);let a=await s(t),h=t;for(;o.length;){const i=o.shift();if(!i)throw u(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(t.code===$&&Array.isArray(a.Links)){const t=a.Links.find((t=>t.Name===i));if(t){yield{value:t.Hash,remainderPath:o.join("/")},a=await s(t.Hash),h=t.Hash;continue}}if(!Object.prototype.hasOwnProperty.call(a,i))throw u(new Error(`no link named "${i}" under ${h}`),"ERR_NO_LINK");a=a[i],yield{value:a,remainderPath:o.join("/")},A.CID.asCID(a)&&(h=a,a=await s(a))}yield{value:a,remainderPath:""}};class ie{static create({start:t,stop:e}){return new ie(t,e)}static async start(t,e){const{state:i,activate:r}=t;switch(i.status){case"stopped":try{const i=r(e);t.state={status:"starting",ready:i};const n=await i;return t.state={status:"started",value:n},n}catch(e){throw t.state={status:"stopped"},e}case"starting":throw new Ot;case"started":throw new Mt;case"stopping":return await i.ready,await ie.start(t,e);default:return ie.panic(t)}}static async stop(t){const{state:e,deactivate:i}=t;switch(e.status){case"stopped":break;case"starting":try{await e.ready}catch(t){}return await ie.stop(t);case"stopping":return await e.ready;case"started":i&&await i(e.value),t.state={status:"stopped"};break;default:ie.panic(e)}}static try({state:t}){return"started"===t.status?t.value:null}static async use({state:t},e){switch(t.status){case"started":return t.value;case"starting":return await te(t.ready,e);default:throw new It}}static panic({state:t}){const e=JSON.stringify({status:t.status});throw RangeError(`Service in invalid state ${e}, should never happen if you see this please report a bug`)}constructor(t,e){this.activate=t,this.deactivate=e,this.state={status:"stopped"}}async use(t){return await ie.use(this,t)}try(){return ie.try(this)}}var re=i(70248),ne=i(45860),se=i(67137);const oe=new class{constructor(t){this.lru=re(t)}get(t){const e=this.lru.get(t);if(e)return e.expire&&e.expire<Date.now()?void this.lru.remove(t):e.value}set(t,e,i){this.lru.set(t,{value:e,expire:Date.now()+i})}has(t){return!!this.get(t)}remove(t){this.lru.remove(t)}clear(){this.lru.clear()}}(1e3),ae=new(ne.default?ne.default:ne)({concurrency:4}),he=t=>{if(t.Path)return t.Path;throw new Error(t.Message)};var ce=i(88785);var le=i(93093);async function*ue(t){if(null==t)throw u(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");const e=A.CID.asCID(t);if(e)yield de({cid:e});else{if(!(t instanceof String||"string"==typeof t)){if(null!=t.cid||null!=t.path)return yield de(t);if(Symbol.iterator in t){const e=t[Symbol.iterator](),i=e.next();if(i.done)return e;if(A.CID.asCID(i.value)||i.value instanceof String||"string"==typeof i.value){yield de({cid:i.value});for(const t of e)yield de({cid:t});return}if(null!=i.value.cid||null!=i.value.path){yield de(i.value);for(const t of e)yield de(t);return}throw u(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){const e=t[Symbol.asyncIterator](),i=await e.next();if(i.done)return e;if(A.CID.asCID(i.value)||i.value instanceof String||"string"==typeof i.value){yield de({cid:i.value});for await(const t of e)yield de({cid:t});return}if(null!=i.value.cid||null!=i.value.path){yield de(i.value);for await(const t of e)yield de(t);return}throw u(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw u(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}yield de({path:t})}}function de(t){const e=t.cid||`${t.path}`;if(!e)throw u(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const i={path:e,recursive:!1!==t.recursive};return null!=t.metadata&&(i.metadata=t.metadata),i}const fe={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function pe(t,e,i){const r={type:t,cid:e};return i&&(r.metadata=i),r}class ge{constructor({codecs:t,repo:e}){const i=function({repo:t,codecs:e}){return Yt((async function*(i,r={}){const n=async function*(){for await(const{path:r,recursive:n,metadata:s}of ue(i)){const{cid:i}=await Zt(t,e,r),{reason:o}=await t.pins.isPinnedWithType(i,[fe.recursive,fe.direct]);if("recursive"===o&&!n)throw new Error(`${i} already pinned recursively`);n?await t.pins.pinRecursively(i,{metadata:s}):await t.pins.pinDirectly(i,{metadata:s}),yield i}};if(!Boolean(r.lock))return void(yield*n());const s=await t.gcLock.readLock();try{yield*n()}finally{s()}}))}({codecs:t,repo:e});this.addAll=i,this.add=function({addAll:t}){return(e,i={})=>{let r;const n=A.CID.asCID(e);return r=t(n?[{cid:n,...i}]:[{path:e.toString(),...i}],i),le(r)}}({addAll:i});const r=function({repo:t,codecs:e}){return Yt((async function*(i,r={}){const n=await t.gcLock.readLock();try{for await(const{path:r,recursive:n}of ue(i)){const{cid:i}=await Zt(t,e,r),{pinned:s,reason:o}=await t.pins.isPinnedWithType(i,fe.all);if(!s)throw new Error(`${i} is not pinned`);switch(o){case fe.recursive:if(!n)throw new Error(`${i} is pinned recursively`);await t.pins.unpin(i),yield i;break;case fe.direct:await t.pins.unpin(i),yield i;break;default:throw new Error(`${i} is pinned indirectly under ${o}`)}}}finally{n()}}))}({codecs:t,repo:e});this.rmAll=r,this.rm=function({rmAll:t}){return async function(e,i={}){const r=await le(t([{path:e,...i}],i));if(!r)throw new Error("CID expected");return r}}({rmAll:r}),this.ls=function({repo:t,codecs:e}){return Yt((async function*(i={}){let r=fe.all;if(i.type&&(r=i.type,!Object.keys(fe).includes(r)))throw u(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(i.paths){let n=!1;for await(const{path:s}of ue(i.paths)){const{cid:i}=await Zt(t,e,s),{reason:o,pinned:a,parent:h,metadata:c}=await t.pins.isPinnedWithType(i,r);if(!a)throw u(new Error(`path '${s}' is not pinned`),"ERR_NOT_PINNED");switch(o){case fe.direct:case fe.recursive:n=!0,yield pe(o,i,c);break;default:n=!0,yield pe(`${fe.indirect} through ${h}`,i,c)}}if(!n)throw new Error("No match found")}else{if(r===fe.recursive||r===fe.all)for await(const{cid:e,metadata:i}of t.pins.recursiveKeys())yield pe(fe.recursive,e,i);if(r===fe.indirect||r===fe.all)for await(const e of t.pins.indirectKeys(i))yield pe(fe.indirect,e);if(r===fe.direct||r===fe.all)for await(const{cid:e,metadata:i}of t.pins.directKeys())yield pe(fe.direct,e,i)}}))}({codecs:t,repo:e}),this.remote={add:(t,e={})=>Promise.reject(new Error("Not implemented")),ls:async function*(t,e={}){return Promise.reject(new Error("Not implemented"))},rm:(t,e={})=>Promise.reject(new Error("Not implemented")),rmAll:(t,e={})=>Promise.reject(new Error("Not implemented")),service:{add:(t,e)=>Promise.reject(new Error("Not implemented")),rm:(t,e={})=>Promise.reject(new Error("Not implemented")),ls:(t={})=>Promise.reject(new Error("Not implemented"))}}}}var ye=i(80348),me=i(92263),ve=i(19588),be=i(84957),we=i(82204),_e=i(28924),xe=i(22817),Ee=i(20605),Se=i(43720);const Te=d.Reader,Ae=d.Writer,Ce=d.util,ke=d.roots["ipfs-ipns"]||(d.roots["ipfs-ipns"]={}),Re=ke.IpnsEntry=(()=>{function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.value=Ce.newBuffer([]),t.prototype.signature=Ce.newBuffer([]),t.prototype.validityType=0,t.prototype.validity=Ce.newBuffer([]),t.prototype.sequence=Ce.Long?Ce.Long.fromBits(0,0,!0):0,t.prototype.ttl=Ce.Long?Ce.Long.fromBits(0,0,!0):0,t.prototype.pubKey=Ce.newBuffer([]),t.prototype.signatureV2=Ce.newBuffer([]),t.prototype.data=Ce.newBuffer([]),t.encode=function(t,e){return e||(e=Ae.create()),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(10).bytes(t.value),null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(18).bytes(t.signature),null!=t.validityType&&Object.hasOwnProperty.call(t,"validityType")&&e.uint32(24).int32(t.validityType),null!=t.validity&&Object.hasOwnProperty.call(t,"validity")&&e.uint32(34).bytes(t.validity),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&e.uint32(40).uint64(t.sequence),null!=t.ttl&&Object.hasOwnProperty.call(t,"ttl")&&e.uint32(48).uint64(t.ttl),null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(58).bytes(t.pubKey),null!=t.signatureV2&&Object.hasOwnProperty.call(t,"signatureV2")&&e.uint32(66).bytes(t.signatureV2),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(74).bytes(t.data),e},t.decode=function(t,e){t instanceof Te||(t=Te.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new ke.IpnsEntry;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.value=t.bytes();break;case 2:r.signature=t.bytes();break;case 3:r.validityType=t.int32();break;case 4:r.validity=t.bytes();break;case 5:r.sequence=t.uint64();break;case 6:r.ttl=t.uint64();break;case 7:r.pubKey=t.bytes();break;case 8:r.signatureV2=t.bytes();break;case 9:r.data=t.bytes();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof ke.IpnsEntry)return t;var e=new ke.IpnsEntry;switch(null!=t.value&&("string"==typeof t.value?Ce.base64.decode(t.value,e.value=Ce.newBuffer(Ce.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),null!=t.signature&&("string"==typeof t.signature?Ce.base64.decode(t.signature,e.signature=Ce.newBuffer(Ce.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),t.validityType){case"EOL":case 0:e.validityType=0}return null!=t.validity&&("string"==typeof t.validity?Ce.base64.decode(t.validity,e.validity=Ce.newBuffer(Ce.base64.length(t.validity)),0):t.validity.length&&(e.validity=t.validity)),null!=t.sequence&&(Ce.Long?(e.sequence=Ce.Long.fromValue(t.sequence)).unsigned=!0:"string"==typeof t.sequence?e.sequence=parseInt(t.sequence,10):"number"==typeof t.sequence?e.sequence=t.sequence:"object"==typeof t.sequence&&(e.sequence=new Ce.LongBits(t.sequence.low>>>0,t.sequence.high>>>0).toNumber(!0))),null!=t.ttl&&(Ce.Long?(e.ttl=Ce.Long.fromValue(t.ttl)).unsigned=!0:"string"==typeof t.ttl?e.ttl=parseInt(t.ttl,10):"number"==typeof t.ttl?e.ttl=t.ttl:"object"==typeof t.ttl&&(e.ttl=new Ce.LongBits(t.ttl.low>>>0,t.ttl.high>>>0).toNumber(!0))),null!=t.pubKey&&("string"==typeof t.pubKey?Ce.base64.decode(t.pubKey,e.pubKey=Ce.newBuffer(Ce.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.signatureV2&&("string"==typeof t.signatureV2?Ce.base64.decode(t.signatureV2,e.signatureV2=Ce.newBuffer(Ce.base64.length(t.signatureV2)),0):t.signatureV2.length&&(e.signatureV2=t.signatureV2)),null!=t.data&&("string"==typeof t.data?Ce.base64.decode(t.data,e.data=Ce.newBuffer(Ce.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},t.toObject=function(t,e){e||(e={});var i={};if(e.defaults){if(e.bytes===String?i.value="":(i.value=[],e.bytes!==Array&&(i.value=Ce.newBuffer(i.value))),e.bytes===String?i.signature="":(i.signature=[],e.bytes!==Array&&(i.signature=Ce.newBuffer(i.signature))),i.validityType=e.enums===String?"EOL":0,e.bytes===String?i.validity="":(i.validity=[],e.bytes!==Array&&(i.validity=Ce.newBuffer(i.validity))),Ce.Long){var r=new Ce.Long(0,0,!0);i.sequence=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else i.sequence=e.longs===String?"0":0;Ce.Long?(r=new Ce.Long(0,0,!0),i.ttl=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):i.ttl=e.longs===String?"0":0,e.bytes===String?i.pubKey="":(i.pubKey=[],e.bytes!==Array&&(i.pubKey=Ce.newBuffer(i.pubKey))),e.bytes===String?i.signatureV2="":(i.signatureV2=[],e.bytes!==Array&&(i.signatureV2=Ce.newBuffer(i.signatureV2))),e.bytes===String?i.data="":(i.data=[],e.bytes!==Array&&(i.data=Ce.newBuffer(i.data)))}return null!=t.value&&t.hasOwnProperty("value")&&(i.value=e.bytes===String?Ce.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value),null!=t.signature&&t.hasOwnProperty("signature")&&(i.signature=e.bytes===String?Ce.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),null!=t.validityType&&t.hasOwnProperty("validityType")&&(i.validityType=e.enums===String?ke.IpnsEntry.ValidityType[t.validityType]:t.validityType),null!=t.validity&&t.hasOwnProperty("validity")&&(i.validity=e.bytes===String?Ce.base64.encode(t.validity,0,t.validity.length):e.bytes===Array?Array.prototype.slice.call(t.validity):t.validity),null!=t.sequence&&t.hasOwnProperty("sequence")&&("number"==typeof t.sequence?i.sequence=e.longs===String?String(t.sequence):t.sequence:i.sequence=e.longs===String?Ce.Long.prototype.toString.call(t.sequence):e.longs===Number?new Ce.LongBits(t.sequence.low>>>0,t.sequence.high>>>0).toNumber(!0):t.sequence),null!=t.ttl&&t.hasOwnProperty("ttl")&&("number"==typeof t.ttl?i.ttl=e.longs===String?String(t.ttl):t.ttl:i.ttl=e.longs===String?Ce.Long.prototype.toString.call(t.ttl):e.longs===Number?new Ce.LongBits(t.ttl.low>>>0,t.ttl.high>>>0).toNumber(!0):t.ttl),null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(i.pubKey=e.bytes===String?Ce.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey),null!=t.signatureV2&&t.hasOwnProperty("signatureV2")&&(i.signatureV2=e.bytes===String?Ce.base64.encode(t.signatureV2,0,t.signatureV2.length):e.bytes===Array?Array.prototype.slice.call(t.signatureV2):t.signatureV2),null!=t.data&&t.hasOwnProperty("data")&&(i.data=e.bytes===String?Ce.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.ValidityType=function(){const t={},e=Object.create(t);return e[t[0]="EOL"]=0,e}(),t})();function Pe(t){const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),i=String(t).trim().match(e);if(!i)throw new Error("Invalid format");const r=parseInt(i[1],10),n=parseInt(i[2],10)-1,s=parseInt(i[3],10),o=parseInt(i[4],10),a=parseInt(i[5],10),h=parseInt(i[6],10),c=parseInt(i[7].slice(0,-6),10);return new Date(Date.UTC(r,n,s,o,a,h,c))}const Ie="ERR_UNRECOGNIZED_VALIDITY",Oe="ERR_SIGNATURE_VERIFICATION",Me="ERR_UNDEFINED_PARAMETER",De=Object.assign(l("jsipns"),{error:l("jsipns:error")}),Be=At.identity.code,Le=(0,Bt.fromString)("/ipns/"),Ne="/ipns/",Ue=Ne.length,Fe=(t,e,i,r,n)=>{const s={Value:t,Validity:e,ValidityType:i,Sequence:r,TTL:n};return Q.cv(s)},ze=async(t,e)=>{const{value:i,validityType:r,validity:n}=e;let s,o,a;e.signatureV2&&e.data?(o=e.signatureV2,s=Xe(e.data),je(e)):(o=e.signature,s=We(i,r,n));try{a=await t.verify(s,o)}catch(t){a=!1}if(!a)throw De.error("record signature verification failed"),u(new Error("record signature verification failed"),Oe);if(r===Re.ValidityType.EOL){let t;try{t=Pe((0,me.toString)(n))}catch(t){throw De.error("unrecognized validity format (not an rfc3339 format)"),u(new Error("unrecognized validity format (not an rfc3339 format)"),"ERR_UNRECOGNIZED_FORMAT")}if(t.getTime()<Date.now())throw De.error("record has expired"),u(new Error("record has expired"),"ERR_IPNS_EXPIRED_RECORD")}else if(r)throw De.error("unrecognized validity type"),u(new Error("unrecognized validity type"),Ie);De(`ipns entry for ${i} is valid`)},je=t=>{if(!t.data)throw u(new Error("Record data is missing"),"ERR_INVALID_RECORD_DATA");const e=Q.Jx(t.data);if(Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),!(0,ve.equals)(e.Value,t.value))throw u(new Error('Field "value" did not match between protobuf and CBOR'),Oe);if(!(0,ve.equals)(e.Validity,t.validity))throw u(new Error('Field "validity" did not match between protobuf and CBOR'),Oe);if(e.ValidityType!==t.validityType)throw u(new Error('Field "validityType" did not match between protobuf and CBOR'),Oe);if(e.Sequence!==t.sequence)throw u(new Error('Field "sequence" did not match between protobuf and CBOR'),Oe);if(e.TTL!==t.ttl)throw u(new Error('Field "ttl" did not match between protobuf and CBOR'),Oe)},Ve=async(t,e)=>{if(!e||!t){const t=new Error("one or more of the provided parameters are not defined");throw De.error(t),u(t,Me)}let i;if(e.pubKey){try{i=we.keys.unmarshalPublicKey(e.pubKey)}catch(t){throw De.error(t),t}if(!(await ce.createFromPubKey(e.pubKey)).equals(t))throw u(new Error("Embedded public key did not match PeerID"),"ERR_INVALID_EMBEDDED_KEY")}else t.pubKey&&(i=t.pubKey);if(i)return i;throw u(new Error("no public key is available"),Me)},Ge=t=>xe.base32upper.encode(t).slice(1),He=t=>new Nt.Key(`/ipns/${Ge(t)}`),Ye=t=>{const e=(0,Bt.fromString)("/pk/"),i=(0,Bt.fromString)("/ipns/");return{routingPubKey:new Nt.Key((0,Ee.concat)([e,t]),!1),pkKey:new Nt.Key(Ge((0,Ee.concat)([e,t]))),routingKey:new Nt.Key((0,Ee.concat)([i,t]),!1),ipnsKey:new Nt.Key(Ge((0,Ee.concat)([i,t])))}},Ke=(t,e,i,r)=>{try{const n=We(e,i,r);return t.sign(n)}catch(t){throw De.error("record signature creation failed"),u(new Error("record signature creation failed: "+t.message),"ERR_SIGNATURE_CREATION")}},We=(t,e,i)=>{const r=(0,Bt.fromString)((t=>{if("0"===t.toString())return"EOL";const e=new Error(`unrecognized validity type ${t.toString()}`);throw De.error(e),u(e,Ie)})(e));return(0,Ee.concat)([t,i,r])},Xe=t=>{const e=(0,Bt.fromString)("ipns-signature:");return(0,Ee.concat)([e,t])},qe=t=>Re.encode({...t,sequence:Se.fromString(t.sequence.toString()),ttl:null==t.ttl?void 0:Se.fromString(t.ttl.toString())}).finish(),$e=t=>{const e=Re.decode(t),i=Re.toObject(e,{defaults:!1,arrays:!0,objects:!1});return{value:i.value,signature:i.signature,validityType:i.validityType,validity:i.validity,sequence:Object.hasOwnProperty.call(i,"sequence")?BigInt(`${i.sequence}`):0,pubKey:i.pubKey,ttl:Object.hasOwnProperty.call(i,"ttl")?BigInt(`${i.ttl}`):void 0,signatureV2:i.signatureV2,data:i.data}},Je={validate:async(t,e)=>{const i=$e(t),r=e.slice(Le.length),n=ce.createFromBytes(r),s=await Ve(n,i);await ze(s,i)},select:(t,e)=>{const i=$e(t),r=$e(e);if(i.signatureV2&&!r.signatureV2)return 0;if(r.signatureV2&&!i.signatureV2)return 1;if(i.sequence>r.sequence)return 0;if(i.sequence<r.sequence)return 1;const n=Pe((0,me.toString)(i.validity));return Pe((0,me.toString)(r.validity)).getTime()>n.getTime()?1:0}},Ze=Object.assign(l("ipfs:ipns:publisher"),{error:l("ipfs:ipns:publisher:error")}),Qe=(0,ye.notFoundError)().code,ti=36e5;class ei{constructor(t,e){this._routing=t,this._datastore=e}async publishWithEOL(t,e,i){if(!t||!t.bytes)throw u(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");const r=await ce.createFromPrivKey(t.bytes),n=await this._updateOrCreateRecord(t,e,i,r);return this._putRecordToRouting(n,r)}publish(t,e){return this.publishWithEOL(t,e,ti)}async _putRecordToRouting(t,e){if(!ce.isPeerId(e)){const t="peerId received is not valid";throw Ze.error(t),u(new Error(t),"ERR_INVALID_PEER_ID")}const i=e.pubKey,r=await(async(t,e)=>{if(!t||!t.bytes||!e){const t=new Error("one or more of the provided parameters are not defined");throw De.error(t),u(t,Me)}let i,r;try{i=await ce.createFromPubKey(t.bytes)}catch(t){throw u(t,"ERR_PEER_ID_FROM_PUBLIC_KEY")}try{r=(t=>{const e=_e.decode(t.id);return e.code!==Be?null:we.keys.unmarshalPublicKey(e.digest)})(i)}catch(t){throw De.error(t),u(t,"ERR_PUBLIC_KEY_FROM_ID")}if(r)return null;try{e.pubKey=we.keys.marshalPublicKey(t)}catch(t){throw De.error(t),t}return e})(i,t),n=Ye(e.toBytes());return await this._publishEntry(n.routingKey,r||t),r||t}async _publishEntry(t,e){const i=Nt.Key.asKey(t);if(!i){const t="datastore key does not have a valid format";throw Ze.error(t),u(new Error(t),"ERR_INVALID_DATASTORE_KEY")}let r;try{r=qe(e)}catch(t){throw Ze.error(t),t}try{const t=await this._routing.put(i.uint8Array(),r);return Ze(`ipns record for ${(0,me.toString)(i.uint8Array(),"base32")} was stored in the routing`),t}catch(t){const e=`ipns record for ${(0,me.toString)(i.uint8Array(),"base32")} could not be stored in the routing - ${t.stack}`;throw Ze.error(e),Ze.error(t),u(new Error(e),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(t,e={}){if(!ce.isPeerId(t)){const t="peerId received is not valid";throw Ze.error(t),u(new Error(t),"ERR_INVALID_PEER_ID")}const i=!1!==e.checkRouting;try{const e=await this._datastore.get(He(t.id));return this._unmarshalData(e)}catch(e){if(e.code!==Qe){const e=`unexpected error getting the ipns record ${t.id} from datastore`;throw Ze.error(e),u(new Error(e),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!i)throw u(e,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{const e=Ye(t.toBytes()),i=await this._routing.get(e.routingKey.uint8Array());return this._unmarshalData(i)}catch(t){throw Ze.error(t),t}}}_unmarshalData(t){try{return $e(t)}catch(t){throw u(t,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(t,e,i,r){if(!ce.isPeerId(r)){const t="peerId received is not valid";throw Ze.error(t),u(new Error(t),"ERR_INVALID_PEER_ID")}const n={checkRouting:!0};let s;try{s=await this._getPublished(r,n)}catch(t){if(t.code!==Qe){const e=`unexpected error when determining the last published IPNS record for ${r.id} ${t.stack}`;throw Ze.error(e),u(new Error(e),"ERR_DETERMINING_PUBLISHED_RECORD")}}let o,a=0;s&&void 0!==s.sequence&&(a=(0,ve.equals)(s.value,e)?BigInt(s.sequence):BigInt(s.sequence)+BigInt(1));try{o=await((t,e,i,r)=>{const n=new be(Date.now()+Number(r)),s=Re.ValidityType.EOL,[o,a]=r.toString().split(".");return(async(t,e,i,r,n,s)=>{i=BigInt(i);const o=(0,Bt.fromString)(n.toString()),a=await Ke(t,e,r,o),h=Fe(e,o,r,i,s),c=Xe(h),l={value:e,signature:a,validityType:r,validity:o,sequence:i,ttl:s,signatureV2:await t.sign(c),data:h};return De(`ipns entry for ${e} created`),l})(t,e,i,s,n,BigInt(o)*BigInt(1e5)+BigInt(a||0))})(t,e,a,i)}catch(t){const i=`ipns record for ${e} could not be created`;throw Ze.error(t),u(new Error(i),"ERR_CREATING_IPNS_RECORD")}try{const t=qe(o);return await this._datastore.put(He(r.id),t),Ze(`ipns record for ${(0,me.toString)(e,"base32")} was stored in the datastore`),o}catch(t){const i=`ipns record for ${e} could not be stored in the datastore`;throw Ze.error(i),u(new Error(i),"ERR_STORING_IN_DATASTORE")}}}ei.defaultRecordLifetime=ti;const ii=Object.assign(l("ipfs:ipns:republisher"),{error:l("ipfs:ipns:republisher:error")});class ri{constructor(t,e,i,r,n={pass:""}){this._publisher=t,this._datastore=e,this._peerId=i,this._keychain=r,this._options=n,this._republishHandle=null}async start(){if(this._republishHandle)throw u(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const t={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:e=>{t._timeoutId=setTimeout((async()=>{t._timeoutId=null;try{t._inflightTask=t._task(),await t._inflightTask,t._task&&t.runPeriodically(e)}catch(t){ii.error(t)}}),e())},cancel:async()=>{null!=t._timeoutId&&clearTimeout(t._timeoutId),t._task=null,await t._inflightTask}},{privKey:e}=this._peerId,{pass:i}=this._options;let r=!0;t._task=()=>this._republishEntries(e,i),t.runPeriodically((()=>r?(r=!1,this._options.initialBroadcastInterval||6e4):this._options.broadcastInterval||144e5)),this._republishHandle=t}async stop(){const t=this._republishHandle;if(!t)throw u(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await t.cancel()}async _republishEntries(t,e){try{await this._republishEntry(t)}catch(t){const e="cannot republish entry for the node's private key";return void ii.error(e)}if(e)try{const t=await this._keychain.listKeys();for(const i of t){if("self"===i.name)continue;const t=await this._keychain.exportKey(i.name,e),r=await we.keys.import(t,e);await this._republishEntry(r)}}catch(t){ii.error(t)}}async _republishEntry(t){if(!t||!t.bytes)throw u(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");try{const e=await ce.createFromPrivKey(t.bytes),i=await this._getPreviousValue(e);await this._publisher.publishWithEOL(t,i,864e5)}catch(t){if("ERR_NO_ENTRY_FOUND"===t.code)return;throw t}}async _getPreviousValue(t){if(!ce.isPeerId(t))throw u(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const e=await this._datastore.get(He(t.id));if(!(e instanceof Uint8Array))throw u(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return $e(e).value}catch(t){throw ii.error(t),u(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(e){if(e&&e.notFound)throw u(new Error(`no previous entry for record with id: ${t.id}`),"ERR_NO_ENTRY_FOUND");throw e}}}const ni=Object.assign(l("ipfs:ipns:resolver"),{error:l("ipfs:ipns:resolver:error")}),si=ye.notFoundError().code;class oi{constructor(t){this._routing=t}async resolve(t,e={}){if("string"!=typeof t)throw u(new Error("invalid name"),"ERR_INVALID_NAME");const i=e.recursive&&"true"===e.recursive.toString(),r=t.split("/");if(3!==r.length||""!==r[0])throw u(new Error("invalid name"),"ERR_INVALID_NAME");const n=r[2];let s=1/0;i&&(s=32);const o=await this.resolver(n,s);return ni(`${t} was locally resolved correctly`),o}async resolver(t,e){if(0===e){const t="could not resolve name (recursion limit of 32 exceeded)";throw ni.error(t),u(new Error(t),"ERR_RESOLVE_RECURSION_LIMIT")}const i=await this._resolveName(t),r=i.split("/");return"ipfs"!==r[1]&&e?this.resolver(r[2],e-1):i}async _resolveName(t){const e=ce.parse(t),{routingKey:i}=Ye(e.toBytes());let r,n;try{r=await this._routing.get(i.uint8Array())}catch(i){if(ni.error("could not get record from routing",i),i.code===si)throw u(new Error(`record requested for ${t} was not found in the network`),"ERR_NO_RECORD_FOUND");throw u(new Error(`unexpected error getting the ipns record ${e.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}try{n=$e(r)}catch(t){throw ni.error("could not unmarshal record",t),u(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_RECORD_RECEIVED")}return this._validateRecord(e,n)}async _validateRecord(t,e){const i=await Ve(t,e);return await ze(i,e),(0,me.toString)(e.value)}}class ai{constructor(t){this.lru=re(t)}get(t){const e=this.lru.get(t);if(e)return e.expire&&e.expire<Date.now()?void this.lru.remove(t):e.value}set(t,e,i){this.lru.set(t,{value:e,expire:Date.now()+i})}has(t){return!!this.get(t)}remove(t){this.lru.remove(t)}clear(){this.lru.clear()}}const hi=Object.assign(l("ipfs:ipns"),{error:l("ipfs:ipns:error")});class ci{constructor(t,e,i,r,n){this.publisher=new ei(t,e),this.republisher=new ri(this.publisher,e,i,r,n),this.resolver=new oi(t),this.cache=new ai(1e3),this.routing=t}async publish(t,e,i=ei.defaultRecordLifetime){try{const r=await(0,ce.createFromPrivKey)(t.bytes);await this.publisher.publishWithEOL(t,e,i),hi(`IPNS value ${(0,me.toString)(e,"base32")} was published correctly`);const n=r.toB58String(),s=parseFloat(i),o=s<6e4?s:6e4;return this.cache.set(n,e,o),hi(`IPNS value ${(0,me.toString)(e,"base32")} was cached correctly`),{name:n,value:e}}catch(t){throw hi.error(t),t}}async resolve(t,e={}){if("string"!=typeof t)throw u(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!e.nocache&&!e.recursive){const e=t.split("/")[2],i=this.cache.get(e);if(i)return i}try{const i=await this.resolver.resolve(t,e);return hi(`IPNS record from ${t} was resolved correctly`),i}catch(t){throw hi.error(t),t}}async initializeKeyspace(t,e){return this.publish(t,e,ei.defaultRecordLifetime)}}var li=i(64869),ui=i(26905),di=i(99086),fi=i(42619),pi=i(27294);const gi="/record/";function yi(t){return(0,me.toString)(t,"base32")}function mi(t){return("string"==typeof t||t instanceof String)&&(t=(0,Bt.fromString)(t.toString())),`/record/${(0,me.toString)(t,"base64url")}`}const vi=Object.assign(l("datastore-pubsub:publisher"),{error:l("datastore-pubsub:publisher:error")});class bi extends pi.BaseDatastore{constructor(t,e,i,r,n){if(super(),!r)throw u(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!=typeof r.validate)throw u(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!=typeof r.select)throw u(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(n&&"function"!=typeof n)throw u(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=t,this._datastore=e,this._peerId=i,this._validator=r,this._handleSubscriptionKeyFn=n,this._onMessage=this._onMessage.bind(this)}async put(t,e){if(!(t instanceof Uint8Array)){const t="datastore key does not have a valid format";throw vi.error(t),u(new Error(t),"ERR_INVALID_DATASTORE_KEY")}if(!(e instanceof Uint8Array)){const t="received value is not a Uint8Array";throw vi.error(t),u(new Error(t),"ERR_INVALID_VALUE_RECEIVED")}const i=mi(t);vi(`publish value for topic ${i}`),await this._pubsub.publish(i,e)}async get(t){if(!(t instanceof Uint8Array)){const t="datastore key does not have a valid format";throw vi.error(t),u(new Error(t),"ERR_INVALID_DATASTORE_KEY")}const e=mi(t),i=await this._pubsub.getTopics();if(i&&Array.isArray(i)&&i.indexOf(e)>-1)return this._getLocal(t);try{this._pubsub.on(e,this._onMessage),await this._pubsub.subscribe(e)}catch(t){const i=`cannot subscribe topic ${e}`;throw vi.error(i),u(new Error(i),"ERR_SUBSCRIBING_TOPIC")}return vi(`subscribed values for key ${e}`),this._getLocal(t)}unsubscribe(t){const e=mi(t);return this._pubsub.removeListener(e,this._onMessage),this._pubsub.unsubscribe(e)}async _getLocal(t){const e=new fi.s("/"+yi(t),!1);let i;try{i=await this._datastore.get(e)}catch(t){if("ERR_NOT_FOUND"!==t.code){const t=`unexpected error getting the ipns record for ${e.toString()}`;throw vi.error(t),u(new Error(t),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const i=`local record requested was not found for ${e.toString()}`;throw vi.error(i),u(new Error(i),"ERR_NOT_FOUND")}if(!(i instanceof Uint8Array)){const t="found record that we couldn't convert to a value";throw vi.error(t),u(new Error(t),"ERR_INVALID_RECORD_RECEIVED")}return i}async _onMessage(t){const{data:e,from:i,topicIDs:r}=t;let n;try{n=function(t){if(t.substring(0,gi.length)!==gi)throw u(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const e=t.substring(gi.length);return(0,Bt.fromString)(e,"base64url")}(r[0])}catch(t){return void vi.error(t)}if(vi(`message received for topic ${r[0]}`),i!==this._peerId.toB58String()){if(this._handleSubscriptionKeyFn){let t;try{t=await this._handleSubscriptionKeyFn(n)}catch(t){return void vi.error("message discarded by the subscriptionKeyFn")}n=t}try{await this._storeIfSubscriptionIsBetter(n,e)}catch(t){vi.error(t)}}else vi("message discarded as it is from the same peer")}async _storeIfSubscriptionIsBetter(t,e){let i=!1;try{i=await this._isBetter(t,e)}catch(t){if("ERR_NOT_VALID_RECORD"!==t.code)throw t}i&&await this._storeRecord(t,e)}async _validateRecord(t,e){return this._validator.validate(t,e)}async _selectRecord(t,e){return 0===await this._validator.select(t,e)}async _isBetter(t,e){try{await this._validateRecord(e,t)}catch(t){const e="record received through pubsub is not valid";throw vi.error(e),u(new Error(e),"ERR_NOT_VALID_RECORD")}const i=new fi.s(t);let r;try{r=await this._getLocal(i.uint8Array())}catch(t){return!0}return!(0,ve.equals)(r,e)&&this._selectRecord(t,[r,e])}async _storeRecord(t,e){const i=new fi.s("/"+yi(t),!1);await this._datastore.put(i,e),vi(`record for ${mi(t)} was stored in the datastore`)}}const wi=Object.assign(l("ipfs:ipns:pubsub"),{error:l("ipfs:ipns:pubsub:error")});class _i{constructor(t,e,i){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new bi(t,e,i,Je,this._handleSubscriptionKey)}async put(t,e){try{await this._pubsubDs.put(t,e)}catch(t){throw wi.error(t),t}}async get(t){let e,i;try{e=await this._pubsubDs.get(t)}catch(t){i=t}const r=t.slice(0,Ue);if((0,me.toString)(r)===Ne){const e=di.base58btc.encode(t).substring(1),i=di.base58btc.encode(t.slice(Ue)).substring(1);this._subscriptions[e]=i,wi(`subscribed to pubsub topic ${e}, id ${i}`)}if(i)throw i;return e}_handleSubscriptionKey(t){t instanceof Uint8Array&&(t=(0,me.toString)(t,"base58btc"));const e=this._subscriptions[t];if(!e)throw u(new Error(`key ${t} does not correspond to a subscription`),"ERR_INVALID_KEY");let i;try{i=Ye((0,Bt.fromString)(e,"base58btc"))}catch(t){throw wi.error(t),t}return i.routingKey.uint8Array()}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map((t=>`/ipns/${t}`))}async cancel(t){if("string"!=typeof t)throw u(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");t.startsWith(Ne)&&(t=t.substring(Ue));const e=Object.keys(this._subscriptions).find((e=>this._subscriptions[e]===t));if(!e)return{canceled:!1};const i=(0,Bt.fromString)(e);return this._pubsubDs.unsubscribe(i),delete this._subscriptions[e],wi(`unsubscribed pubsub ${e}: ${t}`),{canceled:!0}}}var xi=i(45469);const Ei=Object.assign(l("ipfs:ipns:offline-datastore"),{error:l("ipfs:ipns:offline-datastore:error")});class Si{constructor(t){this._repo=t,this.stores=[]}async put(t,e){if(!(t instanceof Uint8Array))throw u(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(e instanceof Uint8Array))throw u(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let i;try{i=this._routingKey(t)}catch(t){throw Ei.error(t),u(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const r=new xi.Record(t,e);return this._repo.datastore.put(i,r.serialize())}async get(t){if(!(t instanceof Uint8Array))throw u(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let e;try{e=this._routingKey(t)}catch(t){throw Ei.error(t),u(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const i=await this._repo.datastore.get(e);let r;try{r=xi.Record.deserialize(i)}catch(t){throw Ei.error(t),t}return r.value}_routingKey(t){return new Nt.Key("/dht/record/"+(0,me.toString)(t,"base32"),!1)}}var Ti=i(64593);const Ai=Object.assign(l("ipfs:ipns:dht-datastore"),{error:l("ipfs:ipns:dht-datastore:error")});class Ci{constructor(t){this._dht=t}async put(t,e){try{await Ti(this._dht.put(t,e))}catch(t){throw Ai.error(t),t}}async get(t){for await(const e of this._dht.get(t))if("VALUE"===e.name)return e.value;throw(0,ye.notFoundError)()}}const ki=l("ipfs:components:ipns");class Ri{constructor(t={pass:""}){this.options=t,this.offline=null,this.online=null}getIPNS(){const t=this.online||this.offline;if(t)return t;throw new kt}get routing(){return this.getIPNS().routing}startOffline({repo:t,peerId:e,keychain:i}){if(null!=this.offline)throw new Pt;ki("initializing IPNS keyspace");const r=new Si(t),n=new ci(r,t.datastore,e,i,this.options);this.offline=n}async startOnline({libp2p:t,repo:e,peerId:i,keychain:r}){if(null!=this.online)throw new Pt;const n=function({libp2p:t,repo:e,peerId:i,options:r}){const n=[];let s;if(ui(r,"EXPERIMENTAL.ipnsPubsub",!1)){const r=t.pubsub,o=e.datastore;s=new _i(r,o,i),n.push(s)}if(!ui(r,"offline",!1)&&t._config&&t._config.dht&&t._config.dht.enabled&&n.push(new Ci(t._dht)),ui(r,"offline",!1)||0===n.length){const t=new Si(e);n.push(t)}return new li.z(n)}({libp2p:t,repo:e,peerId:i,options:this.options}),s=new ci(n,e.datastore,i,r,this.options);await s.republisher.start(),this.online=s}async stop(){const t=this.online;t&&(await t.republisher.stop(),this.online=null)}publish(t,e,i){return this.getIPNS().publish(t,e,i)}resolve(t,e){return this.getIPNS().resolve(t,e)}initializeKeyspace(t,e){return this.getIPNS().initializeKeyspace(t,e)}}async function Pi({ipns:t,repo:e,codecs:i},r,n){if(Lt.ipnsPath(r))return t.resolve(r);const{cid:s,path:o}=Wt(r);await Ti(ee(s,o||"",i,e,n))}const Ii=Object.assign(l("ipfs:name:publish"),{error:l("ipfs:name:publish:error")});var Oi=i(98441),Mi=i(82734);const Di=h.bind({ignoreUndefined:!0}),Bi=Object.assign(l("ipfs:name:resolve"),{error:l("ipfs:name:resolve:error")}),Li=(t,e)=>e.length>0?t+"/"+e.join("/"):t;function Ni(t,e){if(!t||!e||!e.ipnsPubsub)throw u(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(t.routing instanceof _i)return t.routing;const i=(t.routing.stores||[]).find((t=>t instanceof _i));if(!i)throw u(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return i}class Ui{constructor({ipns:t,options:e}){this.cancel=function({ipns:t,options:e}){const i=e.EXPERIMENTAL;return Yt((async function(e,r={}){return Ni(t,i).cancel(e,r)}))}({ipns:t,options:e}),this.state=function({ipns:t,options:e}){const i=e.EXPERIMENTAL;return Yt((async function(e={}){try{return{enabled:Boolean(Ni(t,i))}}catch(t){return{enabled:!1}}}))}({ipns:t,options:e}),this.subs=function({ipns:t,options:e}){const i=e.EXPERIMENTAL;return Yt((async function(e={}){return Ni(t,i).getSubscriptions(e)}))}({ipns:t,options:e})}}class Fi{constructor({dns:t,ipns:e,repo:i,codecs:r,peerId:n,isOnline:s,keychain:o,options:a}){this.publish=function({ipns:t,repo:e,codecs:i,peerId:r,isOnline:n,keychain:s}){const o=async t=>{if("self"===t)return r.privKey;try{const e=await s.exportKey(t,"temp");return await we.keys.import(e,"temp")}catch(t){throw Ii.error(t),u(t,"ERR_CANNOT_GET_KEY")}};return Yt((async function(r,s={}){const a=!(!1===s.resolve),h=s.lifetime||"24h",c=s.key||"self";if(!n())throw u(new Error(Xt),"OFFLINE_ERROR");try{r=(t=>{if(A.CID.asCID(t))return`/ipfs/${t}`;const e=t.toString();try{return`/ipfs/${A.CID.parse(e)}`}catch{}if(Lt.path(e))return e;throw u(new Error(`invalid path: ${t}`),"ERR_BAD_PATH")})(r)}catch(t){throw Ii.error(t),t}let l=0;try{l=Gt(h)||0,l=parseFloat(l.toFixed(6))}catch(t){throw Ii.error(t),t}const d=await Promise.all([o(c),a?Pi({ipns:t,repo:e,codecs:i},r):Promise.resolve()]),f=(0,Bt.fromString)(r),p=await t.publish(d[0],f,l);return{name:p.name,value:(0,me.toString)(p.value)}}))}({ipns:e,repo:i,codecs:r,peerId:n,isOnline:s,keychain:o}),this.resolve=function({dns:t,ipns:e,peerId:i,isOnline:r,options:{offline:n}}){return Yt((async function*(s,o={}){if(o=Di({nocache:!1,recursive:!0},o),n&&o&&o.nocache)throw u(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!r()&&!n)throw u(new Error(Xt),"OFFLINE_ERROR");s||(s=i.toB58String()),s.startsWith("/ipns/")||(s=`/ipns/${s}`);let[a,h,...c]=s.slice(1).split("/");try{if("1"===h.substring(0,1)){const t=ce.parse(h),e=_e.decode(t.toBytes());h=A.CID.createV1(114,e).toString(Oi.base36)}else{const t=A.CID.parse(h);1===t.version&&(h=t.toString(Oi.base36))}}catch(e){if(Mi(h))return void(yield Li(await t(h,o),c));throw Bi.error(e),u(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}const l=await e.resolve(`/${a}/${h}`,o);yield Li(l instanceof Uint8Array?(0,me.toString)(l):l,c)}))}({dns:t,ipns:e,peerId:n,isOnline:s,options:a}),this.pubsub=new Ui({ipns:e,options:a})}}const zi=(0,ye.notFoundError)().code,ji="<dst>";async function*Vi(t,e,i,r,n){const s=await t(r,n),{cid:o}=Wt(s),a=null!=n.maxDepth?n.maxDepth:1/0,h=n.unique||!1;for await(const t of async function*(t,e,i,r,n,s){const o=new Set;yield*async function*i(a,h){const c=h+1;if(!(c>r))try{for await(const r of async function*(t,e,i,r){const n=await t.blocks.get(i,r),s=(await e.getCodec(i.code)).decode(n),o=i.code===$,a=[];for(const[t,e]of Hi(s,a)){if(o){const i=t.match(/^Links\/(\d+)\/Hash$/);if(i){const t=Number(i[1]);if(t<s.Links.length){yield{name:s.Links[t].Name,cid:e};continue}}}yield{name:t,cid:e}}}(t,e,a.cid,s))yield{parent:a,node:r,isDuplicate:n&&o.has(r.cid.toString())},n&&o.add(r.cid.toString()),yield*i(r,c)}catch(t){throw t.code===zi&&(t.message=`Could not find object with CID: ${a.cid}`),t}}({cid:i},0)}(e,i,o,a,h,n))t.parent&&(t.isDuplicate||(yield{ref:Gi(t.parent.cid,t.node.cid,t.node.name,n.format)}))}function Gi(t,e,i="",r="<dst>"){let n=r.replace(/<src>/g,t.toString());return n=n.replace(/<dst>/g,e.toString()),n=n.replace(/<linkname>/g,i),n}const Hi=function*(t,e){if(null!=t&&!(t instanceof Uint8Array)){for(const[i,r]of Object.entries(t)){const t=[...e,i];if(null!=r&&"object"==typeof r)if(Array.isArray(r))for(const[e,i]of r.entries()){const r=[...t,e],n=A.CID.asCID(i);n?yield[r.join("/"),n]:"object"==typeof i&&(yield*Hi(i,r))}else{const e=A.CID.asCID(r);e?yield[t.join("/"),e]:yield*Hi(r,t)}}return[]}};function Yi({repo:t}){return Yt((async function*(e={}){for await(const i of t.blocks.queryKeys({},{signal:e.signal}))yield{ref:i.toString()}}))}function Ki({network:t}){return Yt((async function(e={}){const i=(await t.use(e)).bitswap,r=i.stat().snapshot;return{provideBufLen:parseInt(r.providesBufferLength.toString()),blocksReceived:BigInt(r.blocksReceived.toString()),wantlist:Array.from(i.getWantlist()).map((t=>t[1].cid)),peers:i.peers().map((t=>t.toB58String())),dupBlksReceived:BigInt(r.dupBlksReceived.toString()),dupDataReceived:BigInt(r.dupDataReceived.toString()),dataReceived:BigInt(r.dataReceived.toString()),blocksSent:BigInt(r.blocksSent.toString()),dataSent:BigInt(r.dataSent.toString())}}))}class Wi{constructor({network:t}){this.wantlist=function({network:t}){return Yt((async function(e={}){const{bitswap:i}=await t.use(e),r=i.getWantlist();return Array.from(r).map((t=>t[1].cid))}))}({network:t}),this.wantlistForPeer=function({network:t}){return Yt((async function(e,i={}){const{bitswap:r}=await t.use(i),n=r.wantlistForPeer(ce.createFromB58String(e));return Array.from(n).map((t=>t[1].cid))}))}({network:t}),this.unwant=function({network:t}){return Yt((async function(e,i={}){const{bitswap:r}=await t.use(i);return Array.isArray(e)||(e=[e]),r.unwant(e)}))}({network:t}),this.stat=Ki({network:t})}}var Xi=i(29175);function qi(t){try{return Xi.IPFS.matches(t)}catch(t){return!1}}var $i=i(46584);class Ji{constructor({repo:t}){this.add=function({repo:t}){return Yt((async function(e,i={}){if(!qi(e))throw new Error(`${e} is not a valid Multiaddr`);const r=await t.config.getAll(i),n=r.Bootstrap||[];return n.push(e.toString()),r.Bootstrap=Array.from(new Set(n)).sort(((t,e)=>t.localeCompare(e))),await t.config.replace(r),{Peers:[e]}}))}({repo:t}),this.list=function({repo:t}){return Yt((async function(e={}){return{Peers:(await t.config.get("Bootstrap",e)||[]).map((t=>new $i.Multiaddr(t)))}}))}({repo:t}),this.rm=function({repo:t}){return Yt((async function(e,i={}){if(!qi(e))throw new Error(`${e} is not a valid Multiaddr`);const r=await t.config.getAll(i);return r.Bootstrap=(r.Bootstrap||[]).filter((t=>t.toString()!==e.toString())),await t.config.replace(r),{Peers:[e]}}))}({repo:t}),this.clear=function({repo:t}){return Yt((async function(e={}){const i=await t.config.getAll(e),r=i.Bootstrap||[];return i.Bootstrap=[],await t.config.replace(i),{Peers:r.map((t=>new $i.Multiaddr(t)))}}))}({repo:t}),this.reset=function({repo:t}){return Yt((async function(e={}){const i=await t.config.getAll(e);return i.Bootstrap=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],await t.config.replace(i),{Peers:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"].map((t=>new $i.Multiaddr(t)))}}))}({repo:t})}}var Zi=i(58869),Qi=i(32121),tr=i(55565),er=i(60618);function ir(t){return t instanceof Uint8Array?A.CID.decode(t):A.CID.parse(t.toString())}class rr{constructor({codecs:t,hashers:e,preload:i,repo:r}){this.get=function({preload:t,repo:e}){return Yt((async function(i,r={}){return!1!==r.preload&&t(i),e.blocks.get(i,r)}))}({preload:i,repo:r}),this.put=function({codecs:t,hashers:e,repo:i,preload:r}){return Yt((async function(n,s={}){const o=s.pin?await i.gcLock.readLock():null;try{const a=null!=s.version?s.version:0,h=s.format||(0===a?"dag-pb":"raw"),c=await e.getHasher(s.mhtype||"sha2-256"),l=await c.digest(n),u=await t.getCodec(h),d=A.CID.create(a,u.code,l);return await i.blocks.put(d,n,{signal:s.signal}),!1!==s.preload&&r(d),!0===s.pin&&await i.pins.pinRecursively(d,{signal:s.signal}),d}finally{o&&o()}}))}({codecs:t,hashers:e,preload:i,repo:r}),this.rm=function({repo:t}){return Yt((async function*(e,i={}){Array.isArray(e)||(e=[e]);const r=await t.gcLock.writeLock();try{yield*(0,er.pipe)(e,(e=>Qi(e,(e=>async()=>{const r={cid:e=ir(e)};try{if(!await t.blocks.has(e))throw u(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await t.blocks.delete(e)}catch(t){i.force||(t.message=`cannot remove ${e}: ${t.message}`,r.error=t)}return r}))),(t=>Zi(t,{concurrency:8})),(t=>tr(t,(()=>!i.quiet))))}finally{r()}}))}({repo:r}),this.stat=function({repo:t,preload:e}){return Yt((async function(i,r={}){return i=ir(i),!1!==r.preload&&e(i),{cid:i,size:(await t.blocks.get(i)).length}}))}({preload:i,repo:r})}}var nr=i(86154),sr=i(23294),or=i(28132),ar=i(31303);function hr(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function cr(t){return t.constructor&&("Blob"===t.constructor.name||"File"===t.constructor.name)&&"function"==typeof t.stream}function lr(t){return"object"==typeof t&&(t.path||t.content)}const ur=t=>t&&"function"==typeof t.getReader;async function*dr(t){yield t}async function fr(t){if(hr(t))return dr(pr(t));if("string"==typeof t||t instanceof String)return dr(pr(t.toString()));if(cr(t))return sr(t);if(ur(t)&&(t=nr(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=or(t),{value:i,done:r}=await e.peek();if(r)return dr(new Uint8Array(0));if(e.push(i),Number.isInteger(i))return dr(Uint8Array.from(await ar(e)));if(hr(i)||"string"==typeof i||i instanceof String)return Qi(e,pr)}throw u(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function pr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):(0,Bt.fromString)(t.toString())}async function gr(t,e){const{path:i,mode:r,mtime:n,content:s}=t,o={path:i||"",mode:E(r),mtime:S(n)};return s?o.content=await e(s):i||(o.content=await e(t)),o}function yr(t){return async function*(t,e){if(null==t)throw u(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if("string"==typeof t||t instanceof String)yield gr(t.toString(),e);else if(hr(t)||cr(t))yield gr(t,e);else{if(ur(t)&&(t=nr(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const i=or(t),{value:r,done:n}=await i.peek();if(n)return void(yield{content:[]});if(i.push(r),Number.isInteger(r)||hr(r)||"string"==typeof r||r instanceof String)return void(yield gr(i,e));throw u(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!lr(t))throw u(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield gr(t,e)}}(t,fr)}var mr=i(84810),vr=i(56155),br=i(7225),wr=i(40469);(0,br.D)({name:"murmur3-32",code:35,encode:t=>function(t){const e=new Array(4);for(let i=0;i<4;i++)e[i]=255&t,t>>=8;return new Uint8Array(e)}(wr.x86.hash32(t))});const _r=(0,br.D)({name:"murmur3-128",code:34,encode:t=>ot.aI.fromHex(wr.x64.hash128(t))}),xr={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:vr.sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:async function(t){return(await _r.encode(t)).slice(0,8).reverse()},hamtHashCode:34,hamtBucketBits:8},Er=async(t,e,i)=>{i.codec||(i.codec=r),i.hasher||(i.hasher=vr.sha256),void 0===i.cidVersion&&(i.cidVersion=1),i.codec===r&&i.hasher!==vr.sha256&&(i.cidVersion=1);const n=await i.hasher.digest(t),s=A.CID.create(i.cidVersion,i.codec.code,n);return i.onlyHash||await e.put(s,t,{signal:i.signal}),s},Sr=async(t,e,i)=>{const r=new T({type:"directory",mtime:t.mtime,mode:t.mode}),n=J(Y({Data:r.marshal()}));return{cid:await Er(n,e,i),path:t.path,unixfs:r,size:n.length}};var Tr=i(96945);var Ar=i(78165);async function Cr(t,e,i){const r=[];for await(const n of Ar(t,i.maxChildrenPerNode))r.push(await e(n));return r.length>1?Cr(r,e,i):r[0]}class kr{constructor(t,e,i=0){this.maxDepth=t,this.layerRepeat=e,this.currentDepth=1,this.iteration=i,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const t=this._findParent(this.node,this.currentDepth);return!t||(this._addNextNodeToParent(t),!1)}_addNextNodeToParent(t){this.parent=t;const e={children:[],depth:t.depth+1,parent:t,maxDepth:this.maxDepth,maxChildren:Math.floor(t.children.length/this.layerRepeat)*this.layerRepeat};t.children.push(e),this.currentDepth=e.depth,this.node=e}append(t){this.node.data=t}reduce(t){return this._reduce(this.root,t)}async _reduce(t,e){let i=[];return t.children.length&&(i=await Promise.all(t.children.filter((t=>t.data)).map((t=>this._reduce(t,e))))),e((t.data||[]).concat(i))}_findParent(t,e){const i=t.parent;if(i&&0!==i.depth)return i.children.length!==i.maxChildren&&i.maxChildren?i:this._findParent(i,e)}}class Rr extends kr{constructor(t){super(0,t),this.root.depth=0,this.currentDepth=1}addChild(t){this.root.children.push(t)}reduce(t){return t((this.root.data||[]).concat(this.root.children))}}const Pr=async function*(t,e,i){for await(let n of t.content)yield async()=>{let s;i.progress(n.length,t.path);const o={codec:r,cidVersion:i.cidVersion,hasher:i.hasher,onlyHash:i.onlyHash};return i.rawLeaves?(o.codec=Tr,o.cidVersion=1):(s=new T({type:i.leafType,data:n}),n=J({Data:s.marshal(),Links:[]})),{cid:await Er(n,e,o),unixfs:s,size:n.length}}},Ir={flat:async function(t,e){return e(await ar(t))},balanced:function(t,e,i){return Cr(t,e,i)},trickle:async function(t,e,i){const r=new Rr(i.layerRepeat);let n=0,s=1,o=r;for await(const a of Ar(t,i.maxChildrenPerNode))o.isFull()&&(o!==r&&r.addChild(await o.reduce(e)),n&&n%i.layerRepeat==0&&s++,o=new kr(s,i.layerRepeat,n),n++),o.append(a);return o&&o!==r&&r.addChild(await o.reduce(e)),r.reduce(e)}},Or=function(t,e,i){const n=Ir[i.strategy];if(!n)throw u(new Error(`Unknown importer build strategy name: ${i.strategy}`),"ERR_BAD_STRATEGY");return n(async function*(t,e,i){let r,n,s=-1;n="function"==typeof i.bufferImporter?i.bufferImporter:Pr;for await(const o of mr(n(t,e,i),i.blockWriteConcurrency))s++,0!==s?(1===s&&r&&(yield r,r=null),yield o):r=o;r&&(r.single=!0,yield r)}(t,e,i),((t,e,i)=>async function(n){if(1===n.length&&n[0].single&&i.reduceSingleLeafToSelf){const s=n[0];if(void 0!==t.mtime||void 0!==t.mode){let n=await e.get(s.cid);s.unixfs=new T({type:"file",mtime:t.mtime,mode:t.mode,data:n}),n=J(Y({Data:s.unixfs.marshal()})),s.cid=await Er(n,e,{...i,codec:r,hasher:i.hasher,cidVersion:i.cidVersion}),s.size=n.length}return{cid:s.cid,path:t.path,unixfs:s.unixfs,size:s.size}}const s=new T({type:"file",mtime:t.mtime,mode:t.mode}),o=n.filter((t=>!(t.cid.code!==Tr.code||!t.size)||!(!t.unixfs||t.unixfs.data||!t.unixfs.fileSize())||Boolean(t.unixfs&&t.unixfs.data&&t.unixfs.data.length))).map((t=>t.cid.code===Tr.code?(s.addBlockSize(t.size),{Name:"",Tsize:t.size,Hash:t.cid}):(t.unixfs&&t.unixfs.data?s.addBlockSize(t.unixfs.data.length):s.addBlockSize(t.unixfs&&t.unixfs.fileSize()||0),{Name:"",Tsize:t.size,Hash:t.cid}))),a={Data:s.marshal(),Links:o},h=J(Y(a));return{cid:await Er(h,e,i),path:t.path,unixfs:s,size:h.length+a.Links.reduce(((t,e)=>t+e.Tsize),0)}})(t,e,i),i)};var Mr=i(9668),Dr=i(63060);const Br=async function*(t,e){let i,r,n;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)n=e.avgChunkSize,i=e.minChunkSize,r=e.maxChunkSize;else{if(!e.avgChunkSize)throw u(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");n=e.avgChunkSize,i=n/3,r=n+n/2}if(i<16)throw u(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");r<i&&(r=i),n<i&&(n=i);const s=Math.floor(Math.log2(n));for await(const n of async function*(t,e){const i=await(0,Dr.create)(e.bits,e.min,e.max,e.window),r=new Mr;for await(const e of t){r.append(e);const t=i.fingerprint(e);for(let e=0;e<t.length;e++){const i=t[e],n=r.slice(0,i);r.consume(i),yield n}}r.length&&(yield r.slice(0))}(t,{min:i,max:r,bits:s,window:e.window,polynomial:e.polynomial}))yield n},Lr=async function*(t,e){let i=new Mr,r=0,n=!1;const s=e.maxChunkSize;for await(const e of t)for(i.append(e),r+=e.length;r>=s;)if(yield i.slice(0,s),n=!0,s===i.length)i=new Mr,r=0;else{const t=new Mr;t.append(i.shallowSlice(s)),i=t,r-=s}n&&!r||(yield i.slice(0,r))},Nr=async function*(t){for await(const e of t){if(void 0===e.length)throw u(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"==typeof e||e instanceof String)yield(0,Bt.fromString)(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else{if(!(e instanceof Uint8Array))throw u(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield e}}};function Ur(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(e=t,Symbol.iterator in e)return async function*(){yield*t}();if(function(t){return Symbol.asyncIterator in t}(t))return t}catch{throw u(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}var e;throw u(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}const Fr=async function*(t,e,i){for await(const r of t)if(r.path&&("./"===r.path.substring(0,2)&&(i.wrapWithDirectory=!0),r.path=r.path.split("/").filter((t=>t&&"."!==t)).join("/")),r.content){let t,n;t="function"==typeof i.chunker?i.chunker:"rabin"===i.chunker?Br:Lr,n="function"==typeof i.chunkValidator?i.chunkValidator:Nr;const s={path:r.path,mtime:r.mtime,mode:r.mode,content:t(n(Ur(r.content),i),i)};yield()=>Or(s,e,i)}else{if(!r.path)throw new Error("Import candidate must have content or path or both");{const t={path:r.path,mtime:r.mtime,mode:r.mode};yield()=>Sr(t,e,i)}}},zr=class{constructor(t,e){this.options=e||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}async put(t,e){}get(t){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(t){}},jr=class extends zr{constructor(t,e){super(t,e),this._children={}}async put(t,e){this.cid=void 0,this.size=void 0,this._children[t]=e}get(t){return Promise.resolve(this._children[t])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const t=Object.keys(this._children);for(let e=0;e<t.length;e++){const i=t[e];yield{key:i,child:this._children[i]}}}async*flush(t){const e=Object.keys(this._children),i=[];for(let r=0;r<e.length;r++){let n=this._children[e[r]];if(n instanceof zr)for await(const e of n.flush(t))n=e,yield n;null!=n.size&&n.cid&&i.push({Name:e[r],Tsize:n.size,Hash:n.cid})}const r=new T({type:"directory",mtime:this.mtime,mode:this.mode}),n={Data:r.marshal(),Links:i},s=J(Y(n)),o=await Er(s,t,this.options),a=s.length+n.Links.reduce(((t,e)=>t+(null==e.Tsize?0:e.Tsize)),0);this.cid=o,this.size=a,yield{cid:o,unixfs:r,path:this.path,size:a}}};var Vr=i(54563);const Gr=class extends zr{constructor(t,e){super(t,e),this._bucket=(0,Vr.createHAMT)({hashFn:e.hamtHashFn,bits:e.hamtBucketBits})}async put(t,e){await this._bucket.put(t,e)}get(t){return this._bucket.get(t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:t,value:e}of this._bucket.eachLeafSeries())yield{key:t,child:e}}async*flush(t){for await(const e of Hr(this._bucket,t,this,this.options))yield{...e,path:this.path}}};async function*Hr(t,e,i,r){const n=t._children,s=[];let o=0;for(let t=0;t<n.length;t++){const i=n.get(t);if(!i)continue;const a=t.toString(16).toUpperCase().padStart(2,"0");if(i instanceof Vr.Bucket){let t;for await(const n of await Hr(i,e,null,r))t=n;if(!t)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:a,Tsize:t.size,Hash:t.cid}),o+=t.size}else if("function"==typeof i.value.flush){const t=i.value;let r;for await(const i of t.flush(e))r=i,yield r;const n=a+i.key;s.push({Name:n,Tsize:r.size,Hash:r.cid}),o+=r.size}else{const t=i.value;if(!t.cid)continue;const e=a+i.key,r=t.size;s.push({Name:e,Tsize:r,Hash:t.cid}),o+=r}}const a=Uint8Array.from(n.bitField().reverse()),h=new T({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:r.hamtHashCode,mtime:i&&i.mtime,mode:i&&i.mode}),c=J(Y({Data:h.marshal(),Links:s})),l=await Er(c,e,r),u=c.length+o;yield{cid:l,unixfs:h,size:u}}const Yr=async function t(e,i,r,n){let s=i;i instanceof jr&&i.directChildrenCount()>=r&&(s=await async function(t,e){const i=new Gr({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(const{key:e,child:r}of t.eachChildSeries())await i.put(e,r);return i}(i,n));const o=s.parent;if(o){if(s!==i){if(e&&(e.parent=s),!s.parentKey)throw new Error("No parent key found");await o.put(s.parentKey,s)}return t(s,o,r,n)}return s};async function Kr(t,e,i){const r=((t="")=>(t.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean))(t.path||""),n=r.length-1;let s=e,o="";for(let a=0;a<r.length;a++){const h=r[a];o+=`${o?"/":""}${h}`;const c=a===n;if(s.dirty=!0,s.cid=void 0,s.size=void 0,c)await s.put(h,t),e=await Yr(null,s,i.shardSplitThreshold,i);else{let t=await s.get(h);t&&t instanceof zr||(t=new jr({root:!1,dir:!0,parent:s,parentKey:h,path:o,dirty:!0,flat:!0,mtime:t&&t.unixfs&&t.unixfs.mtime,mode:t&&t.unixfs&&t.unixfs.mode},i)),await s.put(h,t),s=t}}return e}async function*Wr(t,e){t instanceof zr?yield*t.flush(e):t&&t.unixfs&&t.unixfs.isDirectory()&&(yield t)}const Xr=async function*(t,e,i){let r=new jr({root:!0,dir:!0,path:"",dirty:!0,flat:!0},i);for await(const e of t)e&&(r=await Kr(e,r,i),e.unixfs&&e.unixfs.isDirectory()||(yield e));if(i.wrapWithDirectory)yield*Wr(r,e);else for await(const t of r.eachChildSeries())t&&(yield*Wr(t.child,e))};async function*qr(t,e,i={}){const r=((t={})=>h.bind({ignoreUndefined:!0})(xr,t))(i);let n,s,o;n="function"==typeof i.dagBuilder?i.dagBuilder:Fr,s="function"==typeof i.treeBuilder?i.treeBuilder:Xr,o=Symbol.asyncIterator in t||Symbol.iterator in t?t:[t];for await(const t of s(mr(n(o,e,r),r.fileImportConcurrency),e,r))yield{cid:t.cid,path:t.path,unixfs:t.unixfs,size:t.size}}async function*$r(t,e){if("string"==typeof t||t instanceof String||hr(t)||cr(t)||t._readableState)throw u(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(ur(t)&&(t=nr(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const i=or(t),{value:r,done:n}=await i.peek();if(n)return void(yield*[]);if(i.push(r),Number.isInteger(r))throw u(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState)return void(yield*Qi(i,(t=>Jr({content:t},e))));if(hr(r))return void(yield Jr({content:i},e));if(lr(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||ur(r)||cr(r))return void(yield*Qi(i,(t=>Jr(t,e))))}if(lr(t))throw u(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw u(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function Jr(t,e){const{path:i,mode:r,mtime:n,content:s}=t,o={path:i||"",mode:E(r),mtime:S(n)};return s?o.content=await e(s):i||(o.content=await e(t)),o}const Zr=t=>{if(t){if(t.startsWith("size-")){const e=t.split("-")[1],i=parseInt(e);if(isNaN(i))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:i}}if(t.startsWith("rabin"))return{chunker:"rabin",...Qr(t)};throw new Error(`Unrecognized chunker option: ${t}`)}return{chunker:"fixed"}},Qr=t=>{const e={},i=t.split("-");switch(i.length){case 1:e.avgChunkSize=262144;break;case 2:e.avgChunkSize=tn(i[1],"avg");break;case 4:e.minChunkSize=tn(i[1],"min"),e.avgChunkSize=tn(i[2],"avg"),e.maxChunkSize=tn(i[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return e},tn=(t,e)=>{const i=parseInt(t);if(isNaN(i))throw new Error(`Chunker parameter ${e} must be an integer`);return i},en=h.bind({ignoreUndefined:!0});const rn={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};rn.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return A.CID.decode(t.subarray(1))};const nn=t=>Q.Jx(t,rn),sn=async function(t){return(await _r.encode(t)).slice(0,8).reverse()},on=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),an=async(t,e,i,r,n)=>{if(!r){const t=(0,Vr.createHAMT)({hashFn:sn});r={rootBucket:t,hamtDepth:1,lastBucket:t}}await((t,e,i)=>Promise.all(t.map((t=>{if(null==t.Name)throw new Error("Unexpected Link without a Name");if(2===t.Name.length){const r=parseInt(t.Name,16);return e._putObjectAt(r,new Vr.Bucket({hash:i._options.hash,bits:i._options.bits},e,r))}return i.put(t.Name.substring(2),!0)}))))(t.Links,r.lastBucket,r.rootBucket);const s=await r.rootBucket._findNewBucketAndPos(e);let o=on(s.pos);const a=(t=>{let e=t.bucket;const i=[];for(;e._parent;)i.push(e),e=e._parent;return i.push(e),i.reverse()})(s);a.length>r.hamtDepth&&(r.lastBucket=a[r.hamtDepth],o=on(r.lastBucket._posAtParent));const h=t.Links.find((t=>{if(null==t.Name)return!1;const i=t.Name.substring(0,2),r=t.Name.substring(2);return i===o&&(!r||r===e)}));return h?null!=h.Name&&h.Name.substring(2)===e?h.Hash:(r.hamtDepth++,t=Z(await i.get(h.Hash,n)),an(t,e,i,r,n)):null},hn=an,cn=function(t,e,i,r){const n=e+t.length;return i>=n||r<e?new Uint8Array(0):(r>=e&&r<n&&(t=t.slice(0,r-e)),i>=e&&i<n&&(t=t.slice(i-e)),t)},ln=(t,e,i)=>{if(e||(e=0),e<0)throw u(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>t)throw u(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(i||0===i||(i=t-e),i<0)throw u(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+i>t&&(i=t-e),{offset:e,length:i}};async function*un(t,e,i,r,n=0,s){if(e instanceof Uint8Array){const t=cn(e,n,i,r);return t.length&&(yield t),n+t.length}if(null==e.Data)throw u(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let o;try{o=T.unmarshal(e.Data)}catch(t){throw u(t,"ERR_NOT_UNIXFS")}if(o.data&&o.data.length){const t=cn(o.data,n,i,r);t.length&&(yield t),n+=o.data.length}let a=n;for(let h=0;h<e.Links.length;h++){const c=e.Links[h],l=n+o.blockSizes[h];if(i>=a&&i<l||r>a&&r<=l||i<a&&r>l){const e=await t.get(c.Hash,{signal:s.signal});let o;switch(c.Hash.code){case $:o=await Z(e);break;case Tr.code:o=e;break;case 113:o=await nn(e);break;default:throw Error(`Unsupported codec: ${c.Hash.code}`)}for await(const e of un(t,o,i,r,n,s))n+=e.length,yield e}n=l,a=l+1}}const dn=(t,e,i,r,n,s,o)=>function(t={}){const r=i.fileSize();if(void 0===r)throw new Error("File was a directory");const{offset:n,length:s}=ln(r,t.offset,t.length);return un(o,e,n,n+s,0,t)};async function*fn(t,e,i,r,n,s){const o=t.Links;for(const a of o){const o=null!=a.Name?a.Name.substring(2):null;if(o){const t=await i(a.Hash,o,`${e}/${o}`,[],r+1,n,s);yield t.entry}else{t=Z(await n.get(a.Hash));for await(const o of fn(t,e,i,r,n,s))yield o}}}const pn={raw:dn,file:dn,directory:(t,e,i,r,n,s,o)=>async function*(t={}){const i=t.offset||0,a=t.length||e.Links.length,h=e.Links.slice(i,a);for(const e of h){const i=await n(e.Hash,e.Name||"",`${r}/${e.Name||""}`,[],s+1,o,t);i.entry&&(yield i.entry)}},"hamt-sharded-directory":(t,e,i,r,n,s,o)=>function(t={}){return fn(e,r,n,s,o,t)},metadata:(t,e,i,r,n,s,o)=>()=>[],symlink:(t,e,i,r,n,s,o)=>()=>[]},gn={[$]:async(t,e,i,r,n,s,o,a)=>{const h=Z(await o.get(t,a));let c,l;if(e||(e=t.toString()),null==h.Data)throw u(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{c=T.unmarshal(h.Data)}catch(t){throw u(t,"ERR_NOT_UNIXFS")}if(i||(i=e),r.length){let t;if(t=c&&"hamt-sharded-directory"===c.type?await hn(h,r[0],o):((t,e)=>{const i=t.Links.find((t=>t.Name===e));return i&&i.Hash})(h,r[0]),!t)throw u(new Error("file does not exist"),"ERR_NOT_FOUND");const e=r.shift();l={cid:t,toResolve:r,name:e||"",path:`${i}/${e}`}}return{entry:{type:c.isDirectory()?"directory":"file",name:e,path:i,cid:t,content:pn[c.type](t,h,c,i,n,s,o),unixfs:c,depth:s,node:h,size:c.fileSize()},next:l}},[Tr.code]:async(t,e,i,r,n,s,o,a)=>{if(r.length)throw u(new Error(`No link named ${i} found in raw node ${t}`),"ERR_NOT_FOUND");const h=await o.get(t,a);return{entry:{type:"raw",name:e,path:i,cid:t,content:(c=h,async function*(t={}){const{offset:e,length:i}=ln(c.length,t.offset,t.length);yield cn(c,0,e,e+i)}),depth:s,size:h.length,node:h}};var c},113:async(t,e,i,r,n,s,o,a)=>{const h=await o.get(t),c=nn(h);let l=c,d=i;for(;r.length;){const n=r[0];if(!(n in l))throw u(new Error(`No property named ${n} found in cbor node ${t}`),"ERR_NO_PROP");{r.shift(),d=`${d}/${n}`;const o=A.CID.asCID(l[n]);if(o)return{entry:{type:"object",name:e,path:i,cid:t,node:h,depth:s,size:h.length,content:async function*(){yield c}},next:{cid:o,name:n,path:d,toResolve:r}};l=l[n]}}return{entry:{type:"object",name:e,path:i,cid:t,node:h,depth:s,size:h.length,content:async function*(){yield c}}}},[At.identity.code]:async(t,e,i,r,n,s,o,a)=>{if(r.length)throw u(new Error(`No link named ${i} found in raw node ${t}`),"ERR_NOT_FOUND");const h=await _e.decode(t.multihash.bytes);return{entry:{type:"identity",name:e,path:i,cid:t,content:(c=h.digest,async function*(t={}){const{offset:e,length:i}=ln(c.length,t.offset,t.length);yield cn(c,0,e,e+i)}),depth:s,size:h.digest.length,node:h.digest}};var c}},yn=function t(e,i,r,n,s,o,a){const h=gn[e.code];if(!h)throw u(new Error(`No resolver for code ${e.code}`),"ERR_NO_RESOLVER");return h(e,i,r,n,t,s,o,a)};async function*mn(t,e,i={}){let{cid:r,toResolve:n}=(t=>{if(t instanceof Uint8Array)return{cid:A.CID.decode(t),toResolve:[]};const e=A.CID.asCID(t);if(e)return{cid:e,toResolve:[]};if("string"==typeof t){0===t.indexOf("/ipfs/")&&(t=t.substring(6));const e=((t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean))(t);return{cid:A.CID.parse(e[0]),toResolve:e.slice(1)}}throw u(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")})(t),s=r.toString(),o=s;const a=n.length;for(;;){const h=await yn(r,s,o,n,a,e,i);if(!h.entry&&!h.next)throw u(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(h.entry&&(yield h.entry),!h.next)return;n=h.next.toResolve,r=h.next.cid,s=h.next.name,o=h.next.path}}async function vn(t,e,i={}){const r=await le(mn(t,e,i));if(!r)throw u(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return r}async function*bn(t,e,i={}){const r=await vn(t,e,i);if(r&&(yield r,"directory"===r.type))for await(const t of async function*t(e,i){for await(const r of e.content(i))yield r,r instanceof Uint8Array||"directory"===r.type&&(yield*t(r,i))}(r,i))yield t}var wn=i(22169),_n=i(99591),xn=i(33053);class En{constructor({preload:t,repo:e,hashers:i,options:r}){const n=function({repo:t,preload:e,hashers:i,options:r}){const n=r&&r.sharding;return Yt((async function*(r,s={}){const o=en({shardSplitThreshold:n?1e3:1/0,strategy:"balanced"},s,{...Zr(s.chunker)});o.hashAlg&&"sha2-256"!==o.hashAlg&&1!==o.cidVersion&&(o.cidVersion=1),o.trickle&&(o.strategy="trickle"),"trickle"===o.strategy&&(o.leafType="raw",o.reduceSingleLeafToSelf=!1),o.cidVersion>0&&void 0===o.rawLeaves&&(o.rawLeaves=!0),void 0!==o.hashAlg&&void 0===o.rawLeaves&&(o.rawLeaves=!0),delete o.trickle;const a={};if(o.progress){const t=o.progress;o.progress=(e,i)=>{a[i]||(a[i]=0),a[i]+=e,t(a[i],i)}}let h;null!=o.hashAlg&&(h=await i.getHasher(o.hashAlg));const c=(0,er.pipe)($r(r,fr),(e=>qr(e,t.blocks,{...o,hasher:h,pin:!1})),function(t){return async function*(e){for await(const i of e){let e=i.cid;1===t.cidVersion&&(e=e.toV1());let r=i.path?i.path:e.toString();t.wrapWithDirectory&&!i.path&&(r=""),yield{path:r,cid:e,size:i.size,mode:i.unixfs&&i.unixfs.mode,mtime:i.unixfs&&i.unixfs.mtime}}}}(o),function(t,e){return async function*(i){for await(const r of i)(!r.path||e.wrapWithDirectory?""===r.path:!r.path.includes("/"))&&!e.onlyHash&&!1!==e.preload&&t(r.cid),yield r}}(e,o),function(t,e){return async function*(i){for await(const r of i){const i=!(r.path&&r.path.includes("/"));(null==e.pin||e.pin)&&i&&!e.onlyHash&&await t.pins.pinRecursively(r.cid),yield r}}}(t,o)),l=await t.gcLock.readLock();try{for await(const t of c)delete a[t.path],yield t}finally{l()}}))}({preload:t,repo:e,options:r,hashers:i});this.addAll=n,this.add=function({addAll:t}){return async function(e,i={}){const r=await le(t(yr(e),i));if(null==r)throw Error("Failed to add a file, if you see this please report a bug");return r}}({addAll:n}),this.cat=function({repo:t,preload:e}){return Yt((async function*(i,r={}){if(i=Jt(i),!1!==r.preload){const t=i.split("/");e(A.CID.parse(t[0]))}const n=await vn(i,t.blocks,r);if("directory"===n.type)throw new Error("this dag node is a directory");if(!n.content)throw new Error("this dag node has no content");yield*n.content(r)}))}({repo:e,preload:t}),this.get=function({repo:t,preload:e}){return Yt((async function*(i,r={}){if(null!=r.compressionLevel&&(r.compressionLevel<-1||r.compressionLevel>9))throw u(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(!1!==r.preload){let t;try{t=Jt(i).split("/")}catch(t){throw u(t,"ERR_INVALID_PATH")}e(A.CID.parse(t[0]))}const n=A.CID.asCID(i)||i,s=await vn(n,t.blocks,r);if("file"===s.type||"raw"===s.type){const t=[];return r.compress&&!0!==r.archive?t.push(s.content):t.push([{header:{name:s.path,mode:"file"===s.type&&s.unixfs.mode,mtime:"file"===s.type&&s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,size:s.size,type:"file"},body:s.content()}],(0,wn.pack)(),(t=>Qi(t,(t=>t.slice())))),r.compress&&t.push((async function*(t){const e=await xn(t);yield _n.gzip(e,{level:r.compressionLevel||6})})),void(yield*(0,er.pipe)(...t))}if("directory"!==s.type)throw u(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");{const e=[bn(n,t.blocks,r),async function*(t){for await(const e of t){const t={header:{name:e.path,size:e.size}};if("file"===e.type)t.header.type="file",t.header.mode=null!=e.unixfs.mode?e.unixfs.mode:void 0,t.header.mtime=e.unixfs.mtime?new Date(1e3*e.unixfs.mtime.secs):void 0,t.body=e.content();else if("raw"===e.type)t.header.type="file",t.body=e.content();else{if("directory"!==e.type)throw u(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");t.header.type="directory",t.header.mode=null!=e.unixfs.mode?e.unixfs.mode:void 0,t.header.mtime=e.unixfs.mtime?new Date(1e3*e.unixfs.mtime.secs):void 0}yield t}},(0,wn.pack)(),t=>Qi(t,(t=>t.slice()))];if(r.compress){if(!r.archive)throw u(new Error("file is not regular"),"ERR_INVALID_PATH");r.compress&&e.push((async function*(t){const e=await xn(t);yield _n.gzip(e,{level:r.compressionLevel||6})}))}yield*(0,er.pipe)(...e)}}))}({repo:e,preload:t}),this.ls=function({repo:t,preload:e}){return Yt((async function*(i,r={}){const n=Jt(i),s=n.split("/");!1!==r.preload&&e(A.CID.parse(s[0]));const o=A.CID.asCID(n)||n,a=await vn(o,t.blocks,r);if("file"!==a.type){if("directory"!==a.type)throw u(new Error(`Unknown UnixFS type ${a.type}`),"ERR_UNKNOWN_UNIXFS_TYPE");for await(const t of a.content())yield Qt(t)}else yield Qt(a)}))}({repo:e,preload:t})}}const Sn="0.14.3",Tn=Object.assign(l("ipfs:components:id"),{error:l("ipfs:components:id:error")});var An=i(59840);const Cn={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:t=>(An(t,"Discovery.MDNS.Enabled",!1),An(t,"Discovery.webRTCStar.Enabled",!1),t.Swarm={...t.Swarm||{},DisableNatPortMap:!0},t)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:t=>(An(t,"Discovery.MDNS.Enabled",!0),An(t,"Discovery.webRTCStar.Enabled",!0),An(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:t=>{const e={Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]};return An(t,"Addresses.API",e.API?"/ip4/127.0.0.1/tcp/0":""),An(t,"Addresses.Gateway",e.Gateway?"/ip4/127.0.0.1/tcp/0":""),An(t,"Addresses.Swarm",e.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),An(t,"Addresses.Delegates",[]),An(t,"Bootstrap",[]),An(t,"Discovery.MDNS.Enabled",!1),An(t,"Discovery.webRTCStar.Enabled",!1),An(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!0}),t}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:t=>{const e={Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},i={MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},r=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"];return An(t,"Addresses.API",e.API),An(t,"Addresses.Gateway",e.Gateway),An(t,"Addresses.Swarm",e.Swarm),An(t,"Addresses.Delegates",e.Delegates),An(t,"Bootstrap",r),An(t,"Discovery.MDNS.Enabled",i.MDNS.Enabled),An(t,"Discovery.webRTCStar.Enabled",i.webRTCStar.Enabled),An(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:t=>{const e=t.Swarm||{},i=e.ConnMgr||{};return i.LowWater=20,i.HighWater=40,e.ConnMgr=i,t.Swarm=e,t}},"default-power":{description:'Inverse of "lowpower" profile.',transform:t=>(t.Swarm={ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},t)}},kn=l("ipfs:core:config");async function Rn(t){return Object.keys(Cn).map((t=>({name:t,description:Cn[t].description})))}const Pn=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),In=function*(t,e){if(null!=t&&!(t instanceof Uint8Array))for(const[i,r]of Object.entries(t)){const t=[...e,i];if(null!=r&&"object"==typeof r)if(Array.isArray(r))for(const[e,i]of r.entries()){const r=[...t,e],n=ot.k0.asCID(i);n?yield[r.join("/"),n]:"object"==typeof i&&(yield*In(i,r))}else{const e=ot.k0.asCID(r);e?yield[t.join("/"),e]:yield*In(r,t)}}},On=function*(t,e){if(null!=t)for(const[i,r]of Object.entries(t)){const t=[...e,i];if(yield t.join("/"),!(null==r||r instanceof Uint8Array||"object"!=typeof r||ot.k0.asCID(r)))if(Array.isArray(r))for(const[e,i]of r.entries()){const r=[...t,e];yield r.join("/"),"object"!=typeof i||ot.k0.asCID(i)||(yield*On(i,r))}else yield*On(r,t)}};class Mn{constructor({cid:t,bytes:e,value:i}){if(!t||!e||void 0===i)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:Pn(),bytes:Pn(),value:Pn(),asBlock:Pn()})}links(){return In(this.value,[])}tree(){return On(this.value,[])}get(t="/"){return((t,e)=>{let i=t;for(const[t,r]of e.entries()){if(i=i[r],null==i)throw new Error(`Object has no property at ${e.slice(0,t+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const n=ot.k0.asCID(i);if(n)return{value:n,remaining:e.slice(t+1).join("/")}}return{value:i}})(this.value,t.split("/").filter(Boolean))}}const Dn=({bytes:t,cid:e,value:i,codec:r})=>{const n=void 0!==i?i:r&&r.decode(t);if(void 0===n)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Mn({cid:e,bytes:t,value:n})};var Bn=i(94676);function Ln(t){const e=nt({version:1,roots:t}),i=Bn.encode(e.length),r=new Uint8Array(i.length+e.length);return r.set(i,0),r.set(e,i.length),r}function Nn(){}const Un={Null:t=>null===t,Int:t=>Number.isInteger(t),Float:t=>"number"==typeof t&&Number.isFinite(t),String:t=>"string"==typeof t,Bool:t=>"boolean"==typeof t,Bytes:t=>t instanceof Uint8Array,Link:t=>!Un.Null(t)&&"object"==typeof t&&t.asCID===t,List:t=>Array.isArray(t),Map:t=>!Un.Null(t)&&"object"==typeof t&&t.asCID!==t&&!Un.List(t)&&!Un.Bytes(t)},Fn={Int:Un.Int,"CarHeader > version":t=>Fn.Int(t),"CarHeader > roots (anon) > valueType (anon)":Un.Link,"CarHeader > roots (anon)":t=>Un.List(t)&&Array.prototype.every.call(t,Fn["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":t=>Fn["CarHeader > roots (anon)"](t),CarHeader:t=>{const e=t&&Object.keys(t);return Un.Map(t)&&["version"].every((t=>e.includes(t)))&&Object.entries(t).every((([t,e])=>Fn["CarHeader > "+t]&&Fn["CarHeader > "+t](e)))}},zn=Fn.CarHeader;async function jn(t){const e=await t.upTo(8);if(!e.length)throw new Error("Unexpected end of data");const i=Bn.decode(e);return t.seek(Bn.decode.bytes),i}async function Vn(t,e){const i=await jn(t);if(0===i)throw new Error("Invalid CAR header (zero length)");const r=await t.exactly(i);t.seek(i);const n=st(r);if(!zn(n))throw new Error("Invalid CAR header format");if(1!==n.version&&2!==n.version||void 0!==e&&n.version!==e)throw new Error(`Invalid CAR version: ${n.version}${void 0!==e?` (expected ${e})`:""}`);const s=Array.isArray(n.roots);if(1===n.version&&!s||2===n.version&&s)throw new Error("Invalid CAR header format");if(1===n.version)return n;const o=await async function(t){const e=await t.exactly(40),i=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=0;const n={version:2,characteristics:[i.getBigUint64(r,!0),i.getBigUint64(r+=8,!0)],dataOffset:Number(i.getBigUint64(r+=8,!0)),dataSize:Number(i.getBigUint64(r+=8,!0)),indexOffset:Number(i.getBigUint64(r+=8,!0))};return t.seek(40),n}(t);t.seek(o.dataOffset-t.pos);const a=await Vn(t,1);return Object.assign(a,o)}async function Gn(t){const e=await t.exactly(2);if(18===e[0]&&32===e[1]){const e=await t.exactly(34);t.seek(34);const i=_e.decode(e);return A.CID.create(0,112,i)}const i=await jn(t);if(1!==i)throw new Error(`Unexpected CID version (${i})`);const r=await jn(t),n=await async function(t){const e=await t.upTo(8);Bn.decode(e);const i=Bn.decode.bytes,r=Bn.decode(e.subarray(Bn.decode.bytes)),n=i+Bn.decode.bytes+r,s=await t.exactly(n);return t.seek(n),s}(t),s=_e.decode(n);return A.CID.create(i,r,s)}async function Hn(t){const e=t.pos;let i=await jn(t);if(0===i)throw new Error("Invalid CAR section (zero length)");return i+=t.pos-e,{cid:await Gn(t),length:i,blockLength:i-Number(t.pos-e)}}async function Yn(t){const{cid:e,blockLength:i}=await Hn(t),r=await t.exactly(i);return t.seek(i),{bytes:r,cid:e}}async function Kn(t){const e=t.pos,{cid:i,length:r,blockLength:n}=await Hn(t),s={cid:i,length:r,blockLength:n,offset:e,blockOffset:t.pos};return t.seek(s.blockLength),s}function Wn(t){let e=0;return{upTo:async i=>t.subarray(e,e+Math.min(i,t.length-e)),async exactly(i){if(i>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+i)},seek(t){e+=t},get pos(){return e}}}class Xn{constructor(t,e){this._encoder=e,this._mutex=e.setRoots(t),this._ended=!1}async put(t){if(!(t.bytes instanceof Uint8Array&&t.cid))throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const e=A.CID.asCID(t.cid);if(!e)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:e,bytes:t.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(t){t=function(t){if(void 0===t)return[];if(!Array.isArray(t)){const e=A.CID.asCID(t);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");return[e]}const e=[];for(const i of t){const t=A.CID.asCID(i);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(t)}return e}(t);const{encoder:e,iterator:i}=$n();return{writer:new Xn(t,e),out:new qn(i)}}static createAppender(){const{encoder:t,iterator:e}=$n();return t.setRoots=()=>Promise.resolve(),{writer:new Xn([],t),out:new qn(e)}}static async updateRootsInBytes(t,e){const i=Wn(t);await Vn(i);const r=Ln(e);if(Number(i.pos)!==r.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${i.pos} bytes, new header is ${r.length} bytes)`);return t.set(r,0),t}}class qn{constructor(t){this._iterator=t}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function $n(){const t=function(){const t=[];let e=null,i=Nn,r=!1,n=null,s=Nn;const o=()=>(e||(e=new Promise((t=>{i=()=>{e=null,i=Nn,t()}}))),e),a={write(e){t.push(e);const i=o();return s(),i},async end(){r=!0;const t=o();s(),await t}},h={async next(){const e=t.shift();return e?(0===t.length&&i(),{done:!1,value:e}):r?(i(),{done:!0,value:void 0}):(n||(n=new Promise((t=>{s=()=>(n=null,s=Nn,t(h.next()))}))),n)}};return{writer:a,iterator:h}}(),{writer:e,iterator:i}=t,r=function(t){return{async setRoots(e){const i=Ln(e);await t.write(i)},async writeBlock(e){const{cid:i,bytes:r}=e;await t.write(new Uint8Array(Bn.encode(i.bytes.length+r.length))),await t.write(i.bytes),r.length&&await t.write(r)},async close(){await t.end()}}}(e);return{encoder:r,iterator:i}}var Jn=i(40950);const Zn=async({cid:t,load:e,seen:i})=>{i=i||new Set;const r=t.toString(di.base58btc);if(i.has(r))return;const n=await e(t);if(i.add(r),null!==n)for(const[,t]of n.links())await Zn({cid:t,load:e,seen:i})},Qn=l("ipfs:components:dag:import"),ts=[Tr.code,Jn.code];var es=i(72262);class is extends class{constructor(t,e,i){this._version=t,this._roots=e,this._iterable=i,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(t){const{version:e,roots:i,iterator:r}=await async function(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return rs(Wn(t))}(t);return new is(e,i,r)}static async fromIterable(t){const{version:e,roots:i,iterator:r}=await async function(t){if(!t||"function"!=typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return rs(function(t){const e=t[Symbol.asyncIterator]();return function(t){let e=0,i=0,r=0,n=new Uint8Array(0);const s=async e=>{i=n.length-r;const s=[n.subarray(r)];for(;i<e;){const e=await t();if(null==e)break;i<0?e.length>i&&s.push(e.subarray(-i)):s.push(e),i+=e.length}n=new Uint8Array(s.reduce(((t,e)=>t+e.length),0));let o=0;for(const t of s)n.set(t,o),o+=t.length;r=0};return{upTo:async t=>(n.length-r<t&&await s(t),n.subarray(r,r+Math.min(n.length-r,t))),async exactly(t){if(n.length-r<t&&await s(t),n.length-r<t)throw new Error("Unexpected end of data");return n.subarray(r,r+t)},seek(t){e+=t,r+=t},get pos(){return e}}}((async function(){const t=await e.next();return t.done?null:t.value}))}(t))}(t);return new is(e,i,r)}}async function rs(t){const e=function(t){const e=(async()=>{const e=await Vn(t);if(2===e.version){const i=t.pos-e.dataOffset;t=function(t,e){let i=0;return{async upTo(r){let n=await t.upTo(r);return n.length+i>e&&(n=n.subarray(0,e-i)),n},async exactly(r){const n=await t.exactly(r);if(n.length+i>e)throw new Error("Unexpected end of data");return n},seek(e){i+=e,t.seek(e)},get pos(){return t.pos}}}(t,e.dataSize-i)}return e})();return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await Yn(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await Kn(t)}}}(t),{version:i,roots:r}=await e.header();return{version:i,roots:r,iterator:e.blocks()}}Symbol.asyncIterator;const ns=l("ipfs:components:dag:import");async function ss(t,e,i){const r=await is.fromIterable(i),n=await r.getRoots();return await Ti(t.blocks.putMany(Qi(r,(({cid:t,bytes:e})=>(ns(`Import block ${t}`),{key:t,value:e}))),{signal:e.signal})),n}class os{constructor({repo:t,codecs:e,hashers:i,preload:r}){this.export=function({repo:t,preload:e,codecs:i}){return Yt((async function*(r,n={}){!1!==n.preload&&e(r);const s=A.CID.asCID(r);if(!s)throw new Error(`Unexpected error converting CID type: ${r}`);Qn(`Exporting ${s} as car`);const{writer:o,out:a}=await Xn.create([s]);let h=null;(async()=>{try{const e=function(t,e,i,r){return async n=>{const s=await r.getCodec(n.code);if(!s)throw new Error(`Can't decode links in block with codec 0x${n.code.toString(16)} to form complete DAG`);const o=await t.blocks.get(n,i);return Qn(`Adding block ${n} to car`),await e.put({cid:n,bytes:o}),ts.includes(n.code)?null:Dn({bytes:o,cid:n,codec:s})}}(t,o,{signal:n.signal,timeout:n.timeout},i);await Zn({cid:s,load:e})}catch(t){h=t}finally{o.close()}})();for await(const t of a){if(h)break;yield t}if(h)throw h}))}({repo:t,preload:r,codecs:e}),this.get=function({codecs:t,repo:e,preload:i}){return Yt((async function(r,n={}){if(!1!==n.preload&&i(r),n.path){const i=n.localResolve?await es(ee(r,n.path,t,e,n)):await le(ee(r,n.path,t,e,n));if(!i)throw u(new Error("Not found"),"ERR_NOT_FOUND");return i}const s=await t.getCodec(r.code),o=await e.blocks.get(r,n);return{value:s.decode(o),remainderPath:""}}))}({codecs:e,repo:t,preload:r}),this.import=function({repo:t}){return Yt((async function*(e,i={}){const r=await t.gcLock.readLock();try{const n={signal:i.signal,timeout:i.timeout},s=or(e),{value:o,done:a}=await s.peek();if(a)return;let h;o&&s.push(o),h=o instanceof Uint8Array?[s]:s;for await(const e of h){const r=await ss(t,n,e);if(!1!==i.pinRoots)for(const e of r){let i="";try{await t.blocks.has(e)?(ns(`Pinning root ${e}`),await t.pins.pinRecursively(e)):i="blockstore: block not found"}catch(t){i=t.message}yield{root:{cid:e,pinErrorMsg:i}}}}}finally{r()}}))}({repo:t}),this.resolve=function({repo:t,codecs:e,preload:i}){return Yt((async function(r,n={}){const{cid:s}=Wt(r);return!1!==n.preload&&i(s),Zt(t,e,r,n)}))}({repo:t,codecs:e,preload:r}),this.put=function({repo:t,codecs:e,hashers:i,preload:r}){return Yt((async function(n,s={}){const o=s.pin?await t.gcLock.readLock():null;try{const a=await e.getCodec(s.storeCodec||"dag-cbor");if(!a)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");const t=await e.getCodec(s.inputCodec);if(!t)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);n=t.decode(n)}const h=null!=s.version?s.version:1,c=await i.getHasher(s.hashAlg||"sha2-256");if(!c)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);const l=a.encode(n),u=await c.digest(l),d=A.CID.create(h,a.code,u);return await t.blocks.put(d,l,{signal:s.signal}),s.pin&&await t.pins.pinRecursively(d),!1!==s.preload&&r(d),d}finally{o&&o()}}))}({repo:t,codecs:e,hashers:i,preload:r})}}var as=i(95700),hs=i(6323);const cs=Object.assign(l("ipfs:preload"),{error:l("ipfs:preload:error")}),ls=new(ne.default?ne.default:ne)({concurrency:4});function us(t,e={}){return cs(t),ls.add((async()=>{const i=(await se.post(t,{signal:e.signal})).body.getReader();try{for(;;){const{done:t}=await i.read();if(t)return}}finally{i.releaseLock()}}))}const ds=Object.assign(l("ipfs:preload"),{error:l("ipfs:preload:error")});function fs(t={}){if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],t.cache=t.cache||1e3,!t.enabled||!t.addresses.length){ds("preload disabled");const t=()=>{};return Object.assign(t,{start:()=>{},stop:()=>{}})}let e=!0,i=[];const r=t.addresses.map(as),n=re(t.cache),s=async t=>{try{if(e)throw new Error(`preload ${t} but preloader is not started`);const s=t.toString();if(n.has(s))return;n.set(s,!0);const o=hs(r);let a=!1;const h=Date.now();for(const t of o){if(e)throw new Error(`preload aborted for ${s}`);let r;try{r=new AbortController,i=i.concat(r),await us(`${t}/api/v0/refs?r=true&arg=${encodeURIComponent(s)}`,{signal:r.signal}),a=!0}catch(t){"aborted"!==t.type&&ds.error(t)}finally{i=i.filter((t=>t!==r))}if(a)break}ds(`${a?"":"un"}successfully preloaded ${s} in ${Date.now()-h}ms`)}catch(t){ds.error(t)}};return s.start=()=>{e=!1},s.stop=()=>{e=!0,ds(`aborting ${i.length} pending preload request(s)`),i.forEach((t=>t.abort())),i=[]},s}const ps=Object.assign(l("ipfs:mfs-preload"),{error:l("ipfs:mfs-preload:error")});var gs=i(86481);let ys;function ms(t=!1){if(ys)return ys;const e=gs({singleProcess:t});return ys={readLock:t=>async(...i)=>{const r=await e.readLock();try{return await t.apply(null,i)}finally{r()}},writeLock:t=>async(...i)=>{const r=await e.writeLock();try{return await t.apply(null,i)}finally{r()}}},ys}const vs=l("ipfs:mfs:utils:with-mfs-root");async function bs(t,e){if(e&&e.signal&&e.signal.aborted)throw u(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});let i;await t.repo.datastore.open();try{const e=await t.repo.datastore.get(qt);i=A.CID.decode(e)}catch(r){if("ERR_NOT_FOUND"!==r.code)throw r;vs("Creating new MFS root");const n=J({Data:new T({type:"directory"}).marshal(),Links:[]}),s=await vr.sha256.digest(n);if(i=A.CID.createV0(s),await t.repo.blocks.put(i,n),e&&e.signal&&e.signal.aborted)throw u(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.put(qt,i.bytes)}return vs(`Loaded MFS root /ipfs/${i}`),i}function ws(t=""){return(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}const _s=async(t,e,i)=>{const r=await bs(t,i);let n={entryType:"file"},s="";if(s=A.CID.asCID(e)?`/ipfs/${e}`:e.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw u(new Error("paths must not be empty"),"ERR_NO_PATH");if("/"!==s.substring(0,1))throw u(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");"/"===s.substring(s.length-1)&&(s=s.substring(0,s.length-1));const o=ws(s);if("ipfs"===o[0]){let t;t=2===o.length?`/${o.join("/")}`:`/${o.slice(0,o.length-1).join("/")}`,n={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:`/${o.join("/")}`,mfsDirectory:t,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}else{const t=`/ipfs/${r}${o.length?"/"+o.join("/"):""}`,e=`/ipfs/${r}/${o.slice(0,o.length-1).join("/")}`;n={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:e,mfsPath:t,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}const a="mfs"===n.type?n.mfsPath:n.path;try{const e=await vn(a,t.repo.blocks,i);n.cid=e.cid,n.mfsPath=`/ipfs/${e.path}`,n.entryType=e.type,n.content=e.content,"file"!==n.entryType&&"directory"!==n.entryType||"file"!==e.type&&"directory"!==e.type||(n.unixfs=e.unixfs)}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}return n.exists=Boolean(n.cid),n},xs=h.bind({ignoreUndefined:!0}),Es=l("ipfs:mfs:stat"),Ss={withLocal:!1};function Ts(t){return Yt((async function(e,i={}){i=xs(Ss,i),Es(`Fetching stats for ${e}`);const{type:r,cid:n,mfsPath:s}=await _s(t,e,i),o="ipfs"===r&&n?n:s;let a;try{a=await vn(o,t.repo.blocks)}catch(t){if("ERR_NOT_FOUND"===t.code)throw u(new Error(`${e} does not exist`),"ERR_NOT_FOUND");throw t}if(!As[a.type])throw new Error(`Cannot stat codec ${a.cid.code}`);return As[a.type](a)}))}const As={raw:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:t=>{const e={cid:t.cid,type:"file",size:t.unixfs.fileSize(),cumulativeSize:J(t.node).length+(t.node.Links||[]).reduce(((t,e)=>t+(e.Tsize||0)),0),blocks:t.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},directory:t=>{const e={cid:t.cid,type:"directory",size:0,cumulativeSize:J(t.node).length+(t.node.Links||[]).reduce(((t,e)=>t+(e.Tsize||0)),0),blocks:t.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},object:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})},Cs=l("ipfs:mfs:utils:to-trail");async function ks(t,e){Cs(`Creating trail for path ${e}`);const i=[];for await(const r of mn(e,t.repo.blocks))i.push({name:r.name,cid:r.cid,size:r.size,type:r.type});return i}const Rs=async(t,e,i)=>{i.codec||(i.codec=r),i.hasher||(i.hasher=vr.sha256),void 0===i.cidVersion&&(i.cidVersion=1),i.codec===r&&i.hasher!==vr.sha256&&(i.cidVersion=1);const n=await i.hasher.digest(t),s=A.CID.create(i.cidVersion,i.codec.code,n);return i.onlyHash||await e.put(s,t,{signal:i.signal}),s},Ps=_r.code;async function Is(t){return(await _r.encode(t)).slice(0,8).reverse()}class Os extends class{constructor(t,e){this.options=e||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}async put(t,e){}get(t){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(t){}}{constructor(t,e){super(t,e),this._bucket=(0,Vr.createHAMT)({hashFn:Is,bits:8})}async put(t,e){await this._bucket.put(t,e)}get(t){return this._bucket.get(t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:t,value:e}of this._bucket.eachLeafSeries())yield{key:t,child:e}}async*flush(t){yield*Ms(this._bucket,t,this,this.options)}}async function*Ms(t,e,i,r){const n=t._children,s=[];let o=0;for(let t=0;t<n.length;t++){const i=n.get(t);if(!i)continue;const a=t.toString(16).toUpperCase().padStart(2,"0");if(i instanceof Vr.Bucket){let t;for await(const n of await Ms(i,e,null,r))t=n;if(!t)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:a,Tsize:t.size,Hash:t.cid}),o+=t.size}else if("function"==typeof i.value.flush){const t=i.value;let r;for await(const i of t.flush(e))r=i,yield r;const n=a+i.key;s.push({Name:n,Tsize:r.size,Hash:r.cid}),o+=r.size}else{const t=i.value;if(!t.cid)continue;const e=a+i.key,r=t.size;s.push({Name:e,Tsize:r,Hash:t.cid}),o+=r}}const a=Uint8Array.from(n.bitField().reverse()),h={Data:new T({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:Ps,mtime:i&&i.mtime,mode:i&&i.mode}).marshal(),Links:s},c=J(Y(h)),l=await Rs(c,e,r),u=c.length+o;yield{cid:l,node:h,size:u}}const Ds=l("ipfs:mfs:core:utils:hamt-utils"),Bs=async(t,e,i,r)=>{if(!r.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");const n=Uint8Array.from(i._children.bitField().reverse()),s=T.unmarshal(r.parent.Data),o=new T({type:"hamt-sharded-directory",data:n,fanout:i.tableSize(),hashType:Ps,mode:s.mode,mtime:s.mtime}),a=await t.hashers.getHasher(r.hashAlg),h={Data:o.marshal(),Links:e.sort(((t,e)=>(t.Name||"").localeCompare(e.Name||"")))},c=J(h),l=await a.digest(c),u=A.CID.create(r.cidVersion,$,l);return r.flush&&await t.repo.blocks.put(u,c),{node:h,cid:u,size:e.reduce(((t,e)=>t+(e.Tsize||0)),c.length)}},Ls=async(t,e,i,r,n)=>{const s=new Vr.Bucket({hash:i._options.hash,bits:i._options.bits},r,n);return r._putObjectAt(n,s),await Us(t,e,s,i),s},Ns=async t=>{const e=(0,Vr.createHAMT)({hashFn:Is,bits:8});return await Promise.all(t.map((async t=>{const i=t.Name||"";if(2===i.length){const t=parseInt(i,16),r=new Vr.Bucket({hash:e._options.hash,bits:e._options.bits},e,t);return e._putObjectAt(t,r),Promise.resolve()}return e.put(i.substring(2),{size:t.Tsize,cid:t.Hash})}))),e},Us=async(t,e,i,r)=>{await Promise.all(e.map((async e=>{const n=e.Name||"";if(2===n.length){Ds("Populating sub bucket",n);const s=parseInt(n,16),o=Z(await t.repo.blocks.get(e.Hash)),a=new Vr.Bucket({hash:r._options.hash,bits:r._options.bits},i,s);return i._putObjectAt(s,a),await Us(t,o.Links,a,r),Promise.resolve()}return r.put(n.substring(2),{size:e.Tsize,cid:e.Hash})})))},Fs=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),zs=l("ipfs:mfs:core:utils:add-link");async function js(t,e){let i=e.parent;if(e.parentCid){const r=A.CID.asCID(e.parentCid);if(null===r)throw u(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(r.code!==$)throw u(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");zs(`Loading parent node ${r}`),i=Z(await t.repo.blocks.get(r))}if(!i)throw u(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!e.cid)throw u(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!e.name)throw u(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!e.size&&0!==e.size)throw u(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!i.Data)throw u(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");const r=T.unmarshal(i.Data);return"hamt-sharded-directory"===r.type?(zs("Adding link to sharded directory"),Hs(t,{...e,parent:i})):i.Links.length>=e.shardSplitThreshold?(zs("Converting directory to sharded directory"),Vs(t,{...e,parent:i,mtime:r.mtime,mode:r.mode})):(zs(`Adding ${e.name} (${e.cid}) to regular directory`),Gs(t,{...e,parent:i}))}const Vs=async(t,e)=>{const i=await(async(t,e,i={})=>{const r=new Os({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:i.mtime,mode:i.mode},i);for(let t=0;t<e.length;t++)await r._bucket.put(e[t].name,{size:e[t].size,cid:e[t].cid});const n=await le(r.flush(t.repo.blocks));if(!n)throw new Error("Flushing shard yielded no result");return n})(t,e.parent.Links.map((t=>({name:t.Name||"",size:t.Tsize||0,cid:t.Hash}))).concat({name:e.name,size:e.size,cid:e.cid}),e);return zs(`Converted directory to sharded directory ${i.cid}`),i},Gs=async(t,e)=>{const i=e.parent.Links.filter((t=>t.Name!==e.name));if(i.push({Name:e.name,Tsize:e.size,Hash:e.cid}),!e.parent.Data)throw u(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");const r=T.unmarshal(e.parent.Data);let n;if(r.mtime){const t=Date.now(),e=Math.floor(t/1e3);r.mtime={secs:e,nsecs:1e3*(t-1e3*e)},n=r.marshal()}else n=e.parent.Data;e.parent=Y({Data:n,Links:i});const s=await t.hashers.getHasher(e.hashAlg),o=J(e.parent),a=await s.digest(o),h=A.CID.create(e.cidVersion,$,a);return e.flush&&await t.repo.blocks.put(h,o),{node:e.parent,cid:h,size:o.length}},Hs=async(t,e)=>{const{shard:i,path:r}=await Ys(t,e),n=await le(i.flush(t.repo.blocks));if(!n)throw new Error("No result from flushing shard");const s=Z(await t.repo.blocks.get(n.cid)),o=e.parent.Links.filter((t=>(t.Name||"").substring(0,2)!==r[0].prefix)),a=s.Links.find((t=>(t.Name||"").substring(0,2)===r[0].prefix));if(!a)throw new Error(`No link found with prefix ${r[0].prefix}`);return o.push(a),Bs(t,o,r[0].bucket,e)},Ys=async(t,e)=>{const i={name:e.name,cid:e.cid,size:e.size};if(!e.parent.Data)throw u(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");const r=await Ns(e.parent.Links),n=T.unmarshal(e.parent.Data),s=new Os({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:n.mode},e);s._bucket=r,n.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});const o=await r._findNewBucketAndPos(i.name),a=Ks(o);a[0].node=e.parent;let h=0;for(;h<a.length;){const e=a[h];h++;const n=e.node;if(!n)throw new Error("Segment had no node");const s=n.Links.find((t=>(t.Name||"").substring(0,2)===e.prefix));if(!s){zs(`Link ${e.prefix}${i.name} will be added`),h=a.length;break}if(s.Name===`${e.prefix}${i.name}`){zs(`Link ${e.prefix}${i.name} will be replaced`),h=a.length;break}if((s.Name||"").length>2){zs(`Link ${s.Name} ${s.Hash} will be replaced with a subshard`),h=a.length;break}zs(`Found subshard ${e.prefix}`);const o=Z(await t.repo.blocks.get(s.Hash));if(!a[h]){zs(`Loaded new subshard ${e.prefix}`),await Ls(t,o.Links,r,e.bucket,parseInt(e.prefix,16));const n=await r._findNewBucketAndPos(i.name);a.push({bucket:n.bucket,prefix:Fs(n.pos),node:o});break}const c=a[h];await Us(t,o.Links,c.bucket,r),c.node=o}return await s._bucket.put(i.name,{size:i.size,cid:i.cid}),{shard:s,path:a}},Ks=t=>{const e=[{bucket:t.bucket,prefix:Fs(t.pos)}];let i=t.bucket._parent,r=t.bucket._posAtParent;for(;i;)e.push({bucket:i,prefix:Fs(r)}),r=i._posAtParent,i=i._parent;return e.reverse(),e},Ws=l("ipfs:mfs:utils:update-tree"),Xs={shardSplitThreshold:1e3};async function qs(t,e,i){i=Object.assign({},Xs,i),Ws("Trail",e),e=e.slice().reverse();let r,n=0;for await(const s of t.repo.blocks.getMany(e.map((t=>t.cid)))){const o=Z(s),a=e[n].cid,h=e[n].name;if(n++,!r){r={cid:a,name:h,size:s.length};continue}const c=await js(t,{parent:o,name:r.name,cid:r.cid,size:r.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});r={cid:c.cid,name:h,size:c.size}}const{cid:s}=r;return Ws(`Final CID ${s}`),s}const $s=l("ipfs:mfs:utils:update-mfs-root");async function Js(t,e,i){if(i&&i.signal&&i.signal.aborted)throw u(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return $s(`New MFS root will be ${e}`),await t.repo.datastore.put(qt,e.bytes),e}const Zs=h.bind({ignoreUndefined:!0}),Qs=l("ipfs:mfs:mkdir"),to={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function eo(t){return Yt((async function(e,i={}){const r=Zs(to,i);if(!e)throw new Error("no path given to Mkdir");if("/"===(e=e.trim())){if(r.parents)return;throw u(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if("/"!==e.substring(0,1))throw u(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");Qs(`Creating ${e}`);const n=ws(e);if("ipfs"===n[0])throw u(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const s=await bs(t,r);let o;const a=[],h=await async function(t,e,i){const r=new T({type:"directory",mode:i.mode,mtime:i.mtime}),n=await t.hashers.getHasher(i.hashAlg),s={Data:r.marshal(),Links:[]},o=J(s),a=await n.digest(o),h=A.CID.create(i.cidVersion,$,a);return i.flush&&await t.repo.blocks.put(h,o),{cid:h,node:s}}(t,0,r);for(let i=0;i<=n.length;i++){const c=n.slice(0,i),l=`/ipfs/${s}/${c.join("/")}`;try{if(o=await vn(l,t.repo.blocks),"file"!==o.type&&"directory"!==o.type)throw u(new Error(`${e} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(i===n.length){if(r.parents)return;throw u(new Error("file already exists"),"ERR_ALREADY_EXISTS")}a.push({name:o.name,cid:o.cid})}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e;if(i<n.length&&!r.parents)throw u(new Error(`Intermediate directory path ${l} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await io(t,c[c.length-1],h,a[a.length-1],a,r)}}const c=await qs(t,a,r);await Js(t,c,r)}))}const io=async(t,e,i,r,n,s)=>{Qs(`Adding empty dir called ${e} to ${r.cid}`);const o=await js(t,{parent:r.node,parentCid:r.cid,size:0,cid:i.cid,name:e,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});n[n.length-1].cid=o.cid,n.push({name:e,cid:i.cid})},ro=h.bind({ignoreUndefined:!0}),no=l("ipfs:mfs:cp"),so={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function oo(t){return Yt((async function(e,i,r={}){const n=ro(so,r);Array.isArray(e)||(e=[e]);const s=await Promise.all(e.map((e=>_s(t,e,n))));let o=await _s(t,i,n);if(!s.length||!o)throw u(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");const a=s.find((t=>!t.exists));if(a)throw u(new Error(`${a.path} does not exist`),"ERR_INVALID_PARAMS");const h=ao(o);if(o.exists){if(no("Destination exists"),1===s.length&&!h)throw u(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(no("Destination does not exist"),s.length>1){if(!n.parents)throw u(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await eo(t)(o.path,n),o=await _s(t,o.path,n)}else if(o.parts.length>1){const e=`/${o.parts.slice(0,-1).join("/")}`;try{await Ts(t)(e,n)}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i;if(!n.parents)throw u(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await eo(t)(e,n),o=await _s(t,o.path,n)}}const c=ao(o)?o.mfsPath:o.mfsDirectory,l=await ks(t,c);if(1===s.length){const e=s.pop();if(!e)throw u(new Error("could not find source"),"ERR_INVALID_PARAMS");const i=h?e.name:o.name;return no(`Only one source, copying to destination ${h?"directory":"file"} ${i}`),ho(t,e,i,l,n)}return no("Multiple sources, wrapping in a directory"),co(t,s,o,l,n)}))}const ao=t=>t.unixfs&&t.unixfs.type&&t.unixfs.type.includes("directory"),ho=async(t,e,i,r,n)=>{let s=r.pop();if(!s)throw u(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await lo(t,e,i,s,n),r.push(s);const o=await qs(t,r,n);await Js(t,o,n)},co=async(t,e,i,r,n)=>{for(let r=0;r<e.length;r++){const s=e[r];i=await lo(t,s,s.name,i,n)}r[r.length-1]=i;const s=await qs(t,r,n);await Js(t,s,n)},lo=async(t,e,i,r,n)=>{const s=await t.repo.blocks.get(e.cid),{node:o,cid:a,size:h}=await js(t,{parentCid:r.cid,size:s.length,cid:e.cid,name:i,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});return r.node=o,r.cid=a,r.size=h,r},uo=l("ipfs:mfs:core:utils:remove-link"),fo=async(t,e,i,r)=>{const n=e.pop();if(!n)throw u(new Error("Could not find parent"),"EINVALIDPARENT");const{bucket:s,prefix:o,node:a}=n;if(!a)throw u(new Error("Could not find parent"),"EINVALIDPARENT");const h=a.Links.find((t=>(t.Name||"").substring(0,2)===o));if(!h)throw u(new Error(`No link found with prefix ${o} for file ${i}`),"ERR_NOT_FOUND");if(h.Name===`${o}${i}`){uo(`Removing existing link ${h.Name}`);const e=a.Links.filter((t=>t.Name!==h.Name));return await s.del(i),Bs(t,e,s,r)}uo(`Descending into sub-shard ${h.Name} for ${o}${i}`);const c=await fo(t,e,i,r);let l=c.cid,d=c.size,f=o;if(1===c.node.Links.length){uo(`Removing subshard for ${o}`);const t=c.node.Links[0];f=`${o}${(t.Name||"").substring(2)}`,l=t.Hash,d=t.Tsize||0}return uo(`Updating shard ${o} with name ${f}`),po(t,s,a,o,f,d,l,r)},po=(t,e,i,r,n,s,o,a)=>{const h=i.Links.filter((t=>t.Name!==r));return h.push({Name:n,Tsize:s,Hash:o}),Bs(t,h,e,a)},go=h.bind({ignoreUndefined:!0}),yo={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function mo(t){return Yt((async function(e,i={}){const r=go(yo,i);Array.isArray(e)||(e=[e]);const n=await Promise.all(e.map((e=>_s(t,e,r))));if(!n.length)throw u(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");n.forEach((t=>{if("/"===t.path)throw u(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const e of n)await vo(t,e.path,r)}))}const vo=async(t,e,i)=>{const r=await _s(t,e,i),n=await ks(t,r.mfsPath),s=n[n.length-1];n.pop();const o=n[n.length-1];if(!o)throw u(new Error(`${e} does not exist`),"ERR_NOT_FOUND");if("directory"===s.type&&!i.recursive)throw u(new Error(`${e} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:a}=await async function(t,e){let i=e.parent;if(e.parentCid){const r=A.CID.asCID(e.parentCid);if(null===r)throw u(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");uo(`Loading parent node ${r}`),i=Z(await t.repo.blocks.get(r))}if(!i)throw u(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!e.name)throw u(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!i.Data)throw u(new Error("Parent node had no data"),"ERR_INVALID_NODE");return"hamt-sharded-directory"===T.unmarshal(i.Data).type?(uo(`Removing ${e.name} from sharded directory`),(async(t,e)=>{const{rootBucket:i,path:r}=await(async(t,e,i)=>{const r=await Ns(i.Links),n=await r._findNewBucketAndPos(e),s=[{bucket:n.bucket,prefix:Fs(n.pos)}];let o=n.bucket;for(;o!==r;)s.push({bucket:o,prefix:Fs(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=i;for(let i=0;i<s.length;i++){const n=s[i];if(!n.node)throw new Error("Could not generate HAMT path");const o=n.node.Links.filter((t=>(t.Name||"").substring(0,2)===n.prefix)).pop();if(!o){Ds(`Link ${n.prefix}${e} will be added`);continue}if(o.Name===`${n.prefix}${e}`){Ds(`Link ${n.prefix}${e} will be replaced`);continue}Ds(`Found subshard ${n.prefix}`);const a=Z(await t.repo.blocks.get(o.Hash));if(!s[i+1]){Ds(`Loaded new subshard ${n.prefix}`),await Ls(t,a.Links,r,n.bucket,parseInt(n.prefix,16));const i=await r._findNewBucketAndPos(e);s.push({bucket:i.bucket,prefix:Fs(i.pos),node:a});continue}const h=s[i+1];await Us(t,a.Links,h.bucket,r),h.node=a}return await r.put(e,!0),s.reverse(),{rootBucket:r,path:s}})(t,e.name,e.parent);await i.del(e.name);const{node:n}=await fo(t,r,e.name,e);return Bs(t,n.Links,i,e)})(t,{...e,parent:i})):(uo(`Removing link ${e.name} regular directory`),(async(t,e)=>{e.parent.Links=e.parent.Links.filter((t=>t.Name!==e.name));const i=await J(e.parent),r=await t.hashers.getHasher(e.hashAlg),n=await r.digest(i),s=A.CID.create(e.cidVersion,$,n);return await t.repo.blocks.put(s,i),uo(`Updated regular directory ${s}`),{node:e.parent,cid:s}})(t,{...e,parent:i}))}(t,{parentCid:o.cid,name:s.name,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});o.cid=a;const h=await qs(t,n,i);await Js(t,h,i)},bo=h.bind({ignoreUndefined:!0}),wo=l("ipfs:mfs:touch"),_o={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function xo(t,e){if(t instanceof String||"string"==typeof t){const i=`${t}`;t=i.match(/^\d+$/g)?parseInt(i,8):0+i.split(",").reduce(((t,i)=>function(t,e,i){e||(e=0);const r=t.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!r)throw new Error(`Invalid file mode: ${t}`);let[,n,s,o]=r;"a"!==n&&n||(n="ugo");let a=function(t,e,i){let r=0;return(t.includes("x")||t.includes("X")&&(i||1&e||8&e||64&e))&&(r+=1),t.includes("w")&&(r+=2),t.includes("r")&&(r+=4),r}(o,e,i);return a=function(t,e){let i=0;return t.includes("u")&&(i+=e<<6),t.includes("g")&&(i+=e<<3),t.includes("o")&&(i+=e),i}(n,a),a=function(t,e,i){return e.includes("t")&&(i+=parseInt("1000",8)),e.includes("s")&&(t.includes("u")&&(i+=parseInt("4000",8)),t.includes("g")&&(i+=parseInt("2000",8))),i}(n,o,a),"="===s?(n.includes("u")&&(e&=parseInt("7077",8),e|=a),n.includes("g")&&(e&=parseInt("7707",8),e|=a),n.includes("o")&&(e&=parseInt("7770",8),e|=a),e):"+"===s?a|e:"-"===s?a^e:e}(i,t,e.isDirectory())),e.mode||0)}return t}const Eo=h.bind({ignoreUndefined:!0}),So={},To=h.bind({ignoreUndefined:!0}),Ao={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3},Co=h.bind({ignoreUndefined:!0}),ko=l("ipfs:mfs:touch"),Ro={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"},Po=h.bind({ignoreUndefined:!0}),Io={offset:0,length:1/0},Oo=l("ipfs:mfs:utils:to-async-iterator"),Mo=h.bind({ignoreUndefined:!0}),Do=l("ipfs:mfs:write"),Bo={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(t,e)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3},Lo=async(t,e,i,r)=>{i.exists?Do(`Overwriting file ${i.cid} offset ${r.offset} length ${r.length}`):Do(`Writing file offset ${r.offset} length ${r.length}`);const n=[];if(r.offset>0)if(i.unixfs){if(Do(`Writing first ${r.offset} bytes of original file`),n.push((()=>i.content({offset:0,length:r.offset}))),i.unixfs.fileSize()<r.offset){const t=r.offset-i.unixfs.fileSize();Do(`Writing zeros for extra ${t} bytes`),n.push(Uo(t))}}else Do(`Writing zeros for first ${r.offset} bytes`),n.push(Uo(r.offset));n.push(No(e,r.length));const s=zo(Fo(n),(t=>{if(i.unixfs&&!r.truncate){const e=i.unixfs.fileSize();if(e>t)return Do(`Writing last ${e-t} of ${e} bytes from original file starting at offset ${t}`),i.content({offset:t});Do("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let o,a;void 0!==r.mode&&null!==r.mode?o=E(r.mode):i&&i.unixfs&&(o=i.unixfs.mode),null!=r.mtime?a=S(r.mtime):i&&i.unixfs&&(a=i.unixfs.mtime);const h=await t.hashers.getHasher(r.hashAlg),c=await le(qr([{content:s,mode:o,mtime:a}],t.repo.blocks,{progress:r.progress,hasher:h,cidVersion:r.cidVersion,strategy:r.strategy,rawLeaves:r.rawLeaves,reduceSingleLeafToSelf:r.reduceSingleLeafToSelf,leafType:r.leafType}));if(!c)throw u(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return Do(`Wrote ${c.cid}`),{cid:c.cid,size:c.size}},No=(t,e)=>async function*(){let i=0;for await(const r of t){if(i+=r.length,i>e)return void(yield r.slice(0,e-i));yield r}},Uo=(t,e=262144)=>{const i=new Uint8Array(e);return No(async function*(){for(;;)yield i.slice()}(),t)},Fo=async function*(t){for(let e=0;e<t.length;e++)yield*t[e]()},zo=async function*(t,e){let i=0;for await(const e of t)i+=e.length,yield e;for await(const t of e(i))i+=t.length,yield t},jo=t=>{const e={cid:t.cid,name:t.name,type:"directory"===t.type?"directory":"file",size:t.size};return"file"!==t.type&&"directory"!==t.type||(e.mode=t.unixfs.mode,e.mtime=t.unixfs.mtime),e},Vo={stat:Ts},Go={chmod:function(t){return Yt((async function(e,i,r={}){const n=bo(_o,r);wo(`Fetching stats for ${e}`);const{cid:s,mfsDirectory:o,name:a}=await _s(t,e,n);if(s.code!==$)throw u(new Error(`${e} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(n.recursive){const r=await(0,er.pipe)((async function*(){for await(const r of bn(s,t.repo.blocks)){if("file"!==r.type&&"directory"!==r.type)throw u(new Error(`${e} was not a UnixFS node`),"ERR_NOT_UNIXFS");r.unixfs.mode=xo(i,r.unixfs);const t=Y({Data:r.unixfs.marshal(),Links:r.node.Links});yield{path:r.path,content:t}}}),(e=>qr(e,t.repo.blocks,{...n,pin:!1,dagBuilder:async function*(t,e,i){for await(const r of t)yield async function(){const t=r.content,n=J(t),s=await Rs(n,e,i);if(!t.Data)throw u(new Error(`${s} had no data`),"ERR_INVALID_NODE");const o=T.unmarshal(t.Data);return{cid:s,size:n.length,path:r.path,unixfs:o}}}})),(t=>le(t)));if(!r)throw u(new Error(`Could not chmod ${e}`),"ERR_COULD_NOT_CHMOD");return await mo(t)(e,n),void await oo(t)(`/ipfs/${r.cid}`,e,n)}const h=Z(await t.repo.blocks.get(s));if(!h.Data)throw u(new Error(`${s} had no data`),"ERR_INVALID_NODE");const c=T.unmarshal(h.Data);c.mode=xo(i,c);const l=J({Data:c.marshal(),Links:h.Links}),d=n.hashAlg||_o.hashAlg,f=await t.hashers.getHasher(d),p=await f.digest(l),g=A.CID.create(n.cidVersion,$,p);n.flush&&await t.repo.blocks.put(g,l);const y=await ks(t,o),m=y[y.length-1],v=A.CID.decode(m.cid.bytes),b=Z(await t.repo.blocks.get(v)),w=await js(t,{parent:b,name:a,cid:g,size:l.length,flush:n.flush,hashAlg:d,cidVersion:s.version,shardSplitThreshold:1/0});m.cid=w.cid;const _=await qs(t,y,n);await Js(t,_,n)}))},cp:oo,flush:function(t){return Yt((async function(e,i={}){i=Eo(So,i);const{cid:r}=await Ts(t)(e,i);return r}))},mkdir:eo,mv:function(t){return Yt((async function(e,i,r={}){const n=To(Ao,r);await oo(t)(e,i,n),await mo(t)(e,{...n,recursive:!0})}))},rm:mo,touch:function(t){return Yt((async function(e,i={}){const r=Co(Ro,i);r.mtime=r.mtime||new Date,ko(`Touching ${e} mtime: ${r.mtime}`);const{cid:n,mfsDirectory:s,name:o,exists:a}=await _s(t,e,r),h=i.hashAlg||Ro.hashAlg,c=await t.hashers.getHasher(h);let l,d,f=r.cidVersion;if(a){if(n.code!==$)throw u(new Error(`${e} was not a UnixFS node`),"ERR_NOT_UNIXFS");f=n.version;const i=Z(await t.repo.blocks.get(n));if(!i.Data)throw u(new Error(`${e} had no data`),"ERR_INVALID_NODE");const s=T.unmarshal(i.Data);s.mtime=r.mtime,l=J({Data:s.marshal(),Links:i.Links});const o=await c.digest(l);d=A.CID.create(r.cidVersion,$,o),r.flush&&await t.repo.blocks.put(d,l)}else{l=J({Data:new T({type:"file",mtime:r.mtime}).marshal(),Links:[]});const e=await c.digest(l);d=A.CID.create(r.cidVersion,$,e),r.flush&&await t.repo.blocks.put(d,l)}const p=await ks(t,s),g=p[p.length-1],y=g.cid,m=Z(await t.repo.blocks.get(y)),v=await js(t,{parent:m,name:o,cid:d,size:l.length,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:f});g.cid=v.cid;const b=await qs(t,p,r);await Js(t,b,r)}))}},Ho={write:function(t){return Yt((async function(e,i,r={}){const n=Mo(Bo,r);let s,o,a;if(Do("Reading source, destination and parent"),await ms().readLock((async()=>{s=await function(t){if(!t)throw u(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"==typeof t||t instanceof String)&&(Oo("Content was a string"),t=(0,Bt.fromString)(t.toString())),t.length)return Oo("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield t}};if(t[Symbol.asyncIterator])return Oo("Content was an async iterator"),t;if(t[Symbol.iterator])return Oo("Content was an iterator"),t;if(global.Blob&&t instanceof global.Blob){Oo("Content was an HTML5 Blob");let e=0;const i={next:()=>e>t.size?{done:!0}:new Promise(((i,r)=>{const n=t.slice(e,$t);e+=$t;const s=new global.FileReader,o=t=>{if(s.removeEventListener("loadend",o,!1),t.error)return r(t.error);i({done:!1,value:new Uint8Array(s.result)})};s.addEventListener("loadend",o),s.readAsArrayBuffer(n)}))};return{[Symbol.asyncIterator]:()=>i}}throw u(new Error(`Don't know how to convert ${t} into an async iterator`),"ERR_INVALID_PARAMS")}(i),o=await _s(t,e,n),a=await _s(t,o.mfsDirectory,n)}))(),Do("Read source, destination and parent"),!n.parents&&!a.exists)throw u(new Error("directory does not exist"),"ERR_NO_EXIST");if(null==s)throw u(new Error("could not create source"),"ERR_NO_SOURCE");if(null==o)throw u(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!n.create&&!o.exists)throw u(new Error("file does not exist"),"ERR_NO_EXIST");if("file"!==o.entryType)throw u(new Error("not a file"),"ERR_NOT_A_FILE");return(async(t,e,i,r,n)=>{const s=await Lo(t,i,r,n);await ms().writeLock((async()=>{const i=ws(e),r=i.pop();if(null==r)throw u(new Error("source does not exist"),"ERR_NO_EXIST");let o=!1;try{await Ts(t)(`/${i.join("/")}`,n),o=!0}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}o||await eo(t)(`/${i.join("/")}`,n);const a=await _s(t,e,n),h=await ks(t,a.mfsDirectory),c=h[h.length-1];if(!c)throw u(new Error("directory does not exist"),"ERR_NO_EXIST");if(!c.type||!c.type.includes("directory"))throw u(new Error(`cannot write to ${c.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const l=Z(await t.repo.blocks.get(c.cid)),d=await js(t,{parent:l,name:r,cid:s.cid,size:s.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});c.cid=d.cid;const f=await qs(t,h,n);await Js(t,f,n)}))()})(t,e,s,o,n)}))},read:function(t){return Yt((function(e,i={}){return i=Po(Io,i),{[Symbol.asyncIterator]:async function*(){const r=await _s(t,e,i),n=await vn(r.mfsPath,t.repo.blocks);if("file"!==n.type)throw u(new Error(`${e} was not a file`),"ERR_NOT_FILE");if(!n.content)throw u(new Error(`Could not load content stream from ${e}`),"ERR_NO_CONTENT");for await(const t of n.content({offset:i.offset,length:i.length}))yield t}}}))},ls:function(t){return Yt((async function*(e,i={}){const r=await _s(t,e,i),n=await vn(r.mfsPath,t.repo.blocks);"directory"!==n.type?yield jo(n):yield*Qi(n.content(i),jo)}))}},Yo=({options:t,mfs:e,operations:i,lock:r})=>{Object.keys(i).forEach((n=>{e[n]=r(i[n](t))}))},Ko={repoOwner:!0,repo:null};const Wo="ed25519";class Xo{constructor({keychain:t}){this.gen=function({keychain:t}){return Yt(((e,i={type:Wo,size:2048})=>t.createKey(e,i.type||Wo,i.size||2048)))}({keychain:t}),this.list=function({keychain:t}){return Yt((()=>t.listKeys()))}({keychain:t}),this.rm=function({keychain:t}){return Yt((e=>t.removeKey(e)))}({keychain:t}),this.rename=function({keychain:t}){return Yt((async(e,i)=>{const r=await t.renameKey(e,i);return{was:e,now:r.name,id:r.id,overwrite:!1}}))}({keychain:t}),this.export=function({keychain:t}){return Yt(((e,i)=>t.exportKey(e,i)))}({keychain:t}),this.import=function({keychain:t}){return Yt(((e,i,r)=>t.importKey(e,i,r)))}({keychain:t}),this.info=function({keychain:t}){return Yt((e=>t.findKeyByName(e)))}({keychain:t})}}function qo({repo:t,preload:e}){return Yt((async function(i,r={}){return!1!==r.preload&&e(i),Z(await t.blocks.get(i,r))}))}function $o(t,e=[]){for(const i in t){const r=t[i];if("/"===i&&1===Object.keys(t).length)try{e.push({Name:"",Tsize:0,Hash:A.CID.parse(r)});continue}catch(t){}const n=A.CID.asCID(r);n?e.push({Name:"",Tsize:0,Hash:n}):(Array.isArray(r)&&$o(r,e),r&&"object"==typeof r&&$o(r,e))}return e}function Jo({repo:t,codecs:e}){return Yt((async function(i,r={}){const n=await e.getCodec(i.code),s=await t.blocks.get(i,r),o=n.decode(s);switch(i.code){case Tr.code:return[];case $:return o.Links;case rt:case _t:return $o(o);default:throw new Error(`Cannot resolve links from codec ${i.code}`)}}))}function Zo({repo:t,preload:e}){return Yt((async function(i,r={}){const n=await t.gcLock.readLock();try{const s=J(i),o=await vr.sha256.digest(s),a=A.CID.createV1($,o);return await t.blocks.put(a,s,{signal:r.signal}),!1!==r.preload&&e(a),r.pin&&await t.pins.pinRecursively(a,{signal:r.signal}),a}finally{n()}}))}class Qo{constructor({repo:t,preload:e}){this.addLink=function({repo:t,preload:e}){const i=qo({repo:t,preload:e}),r=Zo({repo:t,preload:e});return Yt((async function(t,e,n={}){const s=await i(t,n);return r({...s,Links:s.Links.concat([e])},n)}))}({repo:t,preload:e}),this.appendData=function({repo:t,preload:e}){const i=qo({repo:t,preload:e}),r=Zo({repo:t,preload:e});return Yt((async function(t,e,n={}){const s=await i(t,n),o=(0,Ee.concat)([s.Data||[],e]);return r({...s,Data:o},n)}))}({repo:t,preload:e}),this.rmLink=function({repo:t,preload:e}){const i=qo({repo:t,preload:e}),r=Zo({repo:t,preload:e});return Yt((async function(t,e,n={}){const s=await i(t,n),o=("string"==typeof e?e:e.Name)||"";return s.Links=s.Links.filter((t=>t.Name!==o)),r(s,n)}))}({repo:t,preload:e}),this.setData=function({repo:t,preload:e}){const i=qo({repo:t,preload:e}),r=Zo({repo:t,preload:e});return Yt((async function(t,e,n={}){const s=await i(t,n);return r({...s,Data:e},n)}))}({repo:t,preload:e})}}class ta{constructor({repo:t,codecs:e,preload:i}){this.data=function({repo:t,preload:e}){const i=qo({repo:t,preload:e});return Yt((async function(t,e={}){return(await i(t,e)).Data||new Uint8Array(0)}))}({repo:t,preload:i}),this.get=qo({repo:t,preload:i}),this.links=Jo({repo:t,codecs:e}),this.new=function({repo:t,preload:e}){return Yt((async function(i={}){let r;if(i.template){if("unixfs-dir"!==i.template)throw new Error("unknown template");r=new T({type:"directory"}).marshal()}const n=J({Data:r,Links:[]}),s=await vr.sha256.digest(n),o=A.CID.createV0(s);return await t.blocks.put(o,n,{signal:i.signal}),!1!==i.preload&&e(o),o}))}({repo:t,preload:i}),this.put=Zo({repo:t,preload:i}),this.stat=function({repo:t,preload:e}){const i=qo({repo:t,preload:e});return Yt((async function(t,e={}){const r=await i(t,e),n=J(r).length,s=r.Links.reduce(((t,e)=>t+(e.Tsize||0)),0);return{Hash:t,NumLinks:r.Links.length,BlockSize:n,LinksSize:n-(r.Data||[]).length,DataSize:(r.Data||[]).length,CumulativeSize:n+s}}))}({repo:t,preload:i}),this.patch=new Qo({repo:t,preload:i})}}const ea=l("ipfs:repo:gc");function ia({repo:t}){return Yt((async function(e={}){const i=await t.stat();return{numObjects:BigInt(i.numObjects.toString()),repoSize:BigInt(i.repoSize.toString()),repoPath:i.repoPath,version:`${i.version}`,storageMax:BigInt(i.storageMax.toString())}}))}class ra{constructor({repo:t,hashers:e}){this.gc=function({repo:t,hashers:e}){return Yt((async function*(i={}){const r=Date.now();let n;try{n=await bs({repo:t,hashers:e},i),await t.pins.pinRecursively(n),yield*t.gc()}finally{n&&await t.pins.unpin(n)}ea(`Complete (${Date.now()-r}ms)`)}))}({repo:t,hashers:e}),this.stat=ia({repo:t}),this.version=function({repo:t}){return Yt((async function(e={}){try{await t._checkInitialized(e)}catch(t){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((e=>e.test(t.message))))return 12;throw t}return t.version.get()}))}({repo:t}),this.setApiAddr=e=>t.apiAddr.set(e)}}function na(t,e){let i;if(i=t.metrics?e.peer?t.metrics.forPeer(ce.parse(e.peer)):e.proto?t.metrics.forProtocol(e.proto):t.metrics.global:void 0,!i)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};const{movingAverages:r,snapshot:n}=i;return{totalIn:BigInt(n.dataReceived.integerValue().toString()),totalOut:BigInt(n.dataSent.integerValue().toString()),rateIn:r.dataReceived[6e4].movingAverage()/60,rateOut:r.dataSent[6e4].movingAverage()/60}}class sa{constructor({repo:t,network:e}){this.repo=ia({repo:t}),this.bw=function({network:t}){return Yt((async function*(e={}){const{libp2p:i}=await t.use(e);if(!e.poll)return void(yield na(i,e));const r=e.interval||1e3;let n,s=-1;try{if(s="string"==typeof r?Gt(r)||-1:r,!s||s<0)throw new Error("invalid duration")}catch(t){throw u(t,"ERR_INVALID_POLL_INTERVAL")}try{for(;;)yield na(i,e),await new Promise((t=>{n=setTimeout(t,s)}))}finally{clearTimeout(n)}}))}({network:e}),this.bitswap=Ki({network:e})}}var oa=i(44874),aa=i(93975);const ha=l("ipfs:repo:migrator:migration-8");function ca(t){return t.child?ca(t.child):t}function la(t){try{const e=xe.base32.decode(`b${t.toString().toLowerCase().slice(1)}`),i=A.CID.decode(e).multihash.bytes,r=xe.base32.encode(i).slice(1).toUpperCase();return new Nt.Key(`/${r}`,!1)}catch(e){return t}}function ua(t){try{const e=xe.base32.decode(`b${t.toString().toLowerCase().slice(1)}`),i=_e.decode(e),r=xe.base32.encode(A.CID.createV1(Tr.code,i).bytes).slice(1);return new Nt.Key(`/${r.toUpperCase()}`,!1)}catch{return t}}async function da(t,e,i){const r=t.blocks;await r.open();const n=ca(r),s=await aa(n.queryKeys({filters:[t=>i(t).toString()!==t.toString()]}));try{let t=0;for await(const r of n.query({})){const o=i(r.key);o.toString()!==r.key.toString()&&(t+=1,ha(`Migrating Block from ${r.key} to ${o}`,await n.has(r.key)),await n.delete(r.key),await n.put(o,r.value),e(t/s*100,`Migrated Block from ${r.key} to ${o}`))}}finally{await r.close()}}const fa={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(t,e=(()=>{}))=>da(t,e,la),revert:(t,e=(()=>{}))=>da(t,e,ua)},pa=d.Reader,ga=d.Writer,ya=(d.util,d.roots.default||(d.roots.default={})),ma=ya.ipfs=(()=>{const t={};return t.pin=function(){const t={};return t.Set=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(t,e){return e||(e=ga.create()),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&e.uint32(8).uint32(t.version),null!=t.fanout&&Object.hasOwnProperty.call(t,"fanout")&&e.uint32(16).uint32(t.fanout),null!=t.seed&&Object.hasOwnProperty.call(t,"seed")&&e.uint32(29).fixed32(t.seed),e},t.decode=function(t,e){t instanceof pa||(t=pa.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new ya.ipfs.pin.Set;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.version=t.uint32();break;case 2:r.fanout=t.uint32();break;case 3:r.seed=t.fixed32();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof ya.ipfs.pin.Set)return t;var e=new ya.ipfs.pin.Set;return null!=t.version&&(e.version=t.version>>>0),null!=t.fanout&&(e.fanout=t.fanout>>>0),null!=t.seed&&(e.seed=t.seed>>>0),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.version=0,i.fanout=0,i.seed=0),null!=t.version&&t.hasOwnProperty("version")&&(i.version=t.version),null!=t.fanout&&t.hasOwnProperty("fanout")&&(i.fanout=t.fanout),null!=t.seed&&t.hasOwnProperty("seed")&&(i.seed=t.seed),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t}(),t})();var va=i(96132);const ba=new Nt.Key("/local/pins"),wa=A.CID.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),_a="direct",xa="recursive";function Ea(t){return new Nt.Key(`/${xe.base32.encode(t.multihash.bytes).toUpperCase().substring(1)}`)}var Sa=i(18764);const Ta=ma.pin.Set;async function*Aa(t,e){const i=function(t){const e=t.Data;if(!e)throw new Error("No data present");const i=Bn.decode(e),r=Bn.decode.bytes;if(r<=0)throw new Error("Invalid Set header length");if(r+i>e.length)throw new Error("Impossibly large set header length");const n=e.slice(r,i+r),s=Ta.toObject(Ta.decode(n),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==s.version)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>t.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:e.slice(i+r)}}(e);let r=0;for(const n of e.Links){if(r<i.header.fanout){const e=n.Hash;if(!wa.equals(e)){const i=Z(await t.get(e));yield*Aa(t,i)}}else yield n.Hash;r++}}async function*Ca(t,e,i){const r=e.Links.find((t=>t.Name===i));if(!r)throw new Error("No link found with name "+i);const n=Z(await t.get(r.Hash));yield*Aa(t,n)}async function ka(t,e,i){const r=await function(t,e){return async function e(i,r){const n=Ta.encode({version:1,fanout:256,seed:r}).finish(),s=Bn.encode(n.length),o=(0,Ee.concat)([s,n]),a=[];for(let t=0;t<256;t++)a.push({Name:"",Tsize:1,Hash:wa});if(i.length<=8192){const t=i.map((t=>({link:{Name:"",Tsize:1,Hash:t.key},data:t.data||new Uint8Array}))).sort(((t,e)=>(0,Sa.compare)(t.link.Hash.bytes,e.link.Hash.bytes))),e=a.concat(t.map((t=>t.link)));return{Data:(0,Ee.concat)([o,...t.map((t=>t.data))]),Links:e}}{const t=i.reduce(((t,e)=>{const i=function(t,e){const i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,t,!0);const r=(0,Bt.fromString)(e.toString()),n=(0,Ee.concat)([i,r],i.byteLength+r.byteLength);return va((0,me.toString)(n))}(r,e.key)%256;return t[i]=i in t?t[i].concat([e]):[e],t}),[]);let n=0;for(const i of t){const t=await e(i,r+1);await h(t,n),n++}return{Data:o,Links:a}}async function h(e,i){const r=J(e),n=await vr.sha256.digest(r),s=A.CID.createV0(n);await t.put(s,r);const o=e.Links.reduce(((t,e)=>t+(e.Tsize||0)),0)+r.length;a[i]={Name:"",Tsize:o,Hash:s}}}(e,0)}(t,i.map((t=>({key:t})))),n=J(r),s=await vr.sha256.digest(n),o=A.CID.createV0(s);return await t.put(o,n),{Name:e,Tsize:r.Links.reduce(((t,e)=>t+e.Tsize),0)+n.length,Hash:o}}async function Ra(t,e,i,r){if(!await e.has(ba))return;const n=await e.get(ba),s=A.CID.decode(n),o=Z(await t.get(s));let a=0;const h=await aa(Ca(t,o,xa))+await aa(Ca(t,o,_a));for await(const e of Ca(t,o,xa)){a++;const t={depth:1/0};0!==e.version&&(t.version=e.version),e.code!==$&&(t.codec=e.code),await i.put(Ea(e),Q.cv(t)),r(a/h*100,`Migrated recursive pin ${e}`)}for await(const e of Ca(t,o,_a)){a++;const t={depth:0};0!==e.version&&(t.version=e.version),e.code!==$&&(t.codec=e.code),await i.put(Ea(e),Q.cv(t)),r(a/h*100,`Migrated direct pin ${e}`)}await t.delete(s),await e.delete(ba)}async function Pa(t,e,i,r){const n=[],s=[];let o=0;const a=await aa(i.queryKeys({}));for await(const{key:t,value:e}of i.query({})){o++;const i=Q.Jx(e),h=A.CID.create(i.version||0,i.codec||$,_e.decode(xe.base32.decode("b"+t.toString().toLowerCase().split("/").pop())));0===i.depth?(r(o/a*100,`Reverted direct pin ${h}`),s.push(h)):(r(o/a*100,`Reverted recursive pin ${h}`),n.push(h))}r(100,"Updating pin root");const h=J({Links:[await ka(t,_a,s),await ka(t,xa,n)]}),c=await vr.sha256.digest(h),l=A.CID.createV0(c);await t.put(l,h),await e.put(ba,l.bytes)}async function Ia(t,e,i){const r=t.blocks,n=t.datastore,s=t.pins;await r.open(),await n.open(),await s.open();try{await i(r,n,s,e)}finally{await s.close(),await n.close(),await r.close()}}const Oa={version:9,description:"Migrates pins to datastore",migrate:(t,e=(()=>{}))=>Ia(t,e,Ra),revert:(t,e=(()=>{}))=>Ia(t,e,Pa)},Ma=new Nt.Key("/config"),Da=new Nt.Key("/version");function Ba(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,"level-js"===e.type||"Level"===e.constructor.name)return e}function La(t){const e=t.get.bind(t),i=t.has.bind(t);return t.get=r=>async function(t,e,i,r){if(await i(t))return e(t);const n=Ba(r);if(!n)throw(0,ye.notFoundError)();return new Promise(((e,i)=>{const r=n.store("readonly").get(t.toString());r.transaction.onabort=()=>{i(r.transaction.error)},r.transaction.oncomplete=()=>{if(r.result)return e(r.result);i((0,ye.notFoundError)())}}))}(r,e,i,t),t.has=e=>async function(t,e,i){const r=await e(t);if(r)return r;const n=Ba(i);return!!n&&new Promise(((e,i)=>{const r=n.store("readonly").get(t.toString());r.transaction.onabort=()=>{i(r.transaction.error)},r.transaction.oncomplete=()=>{e(Boolean(r.result))}}))}(e,i,t),t}function Na(t){return{...t,root:La(t.root),datastore:La(t.datastore),pins:La(t.pins),keys:La(t.keys)}}async function Ua(t,e,i=(()=>{})){const r=Ba(e);r?(i(`Upgrading ${t}`),await Ga(r,((t,e)=>[{type:"del",key:t},{type:"put",key:(0,Bt.fromString)(t),value:e}]))):i(`${t} did not need an upgrade`)}async function Fa(t,e,i=(()=>{})){const r=Ba(e);r?(i(`Downgrading ${t}`),await Ga(r,((t,e)=>[{type:"del",key:t},{type:"put",key:(0,me.toString)(t),value:e}]))):i(`${t} did not need a downgrade`)}function za(t){return t.child?za(t.child):t}async function ja(t,e,i){const r=Object.entries(t).map((([t,e])=>({key:t,backend:za(e)}))).filter((({key:t,backend:e})=>"LevelDatastore"===e.constructor.name)).map((({key:t,backend:e})=>({name:t,store:e})));e(0,`Migrating ${r.length} dbs`);let n=0;const s=t=>{e(Math.round(n/r.length*100),t)};for(const{name:t,store:e}of r){await e.open();try{await i(t,e,s)}finally{n++,await e.close()}}e(100,`Migrated ${r.length} dbs`)}const Va={version:10,description:"Migrates datastore-level keys to binary",migrate:(t,e=(()=>{}))=>ja(t,e,Ua),revert:(t,e=(()=>{}))=>ja(t,e,Fa)};function Ga(t,e){return new Promise(((i,r)=>{const n=t.iterator();n._deserializeKey=n._deserializeValue=t=>t,function s(){n.next(((o,a,h)=>{if(o||void 0===a){const t=t=>{t?r(t):i()};n.end(t)}else!function(e,i){const r=t.store("readwrite"),n=r.transaction;let s,o=0;n.onabort=()=>i(s||n.error||new Error("aborted by user")),n.oncomplete=()=>i(),function t(){const i=e[o++],a=i.key;let h;try{h="del"===i.type?r.delete(a):r.put(i.value,a)}catch(t){return s=t,void n.abort()}o<e.length&&(h.onsuccess=t)}()}(e(a,h),s)}))}()}))}const Ha=new Nt.Key("/local/filesroot"),Ya={version:11,description:"Store mfs root in the datastore",migrate:async function(t,e=(()=>{})){if(e(100,"Migrating MFS root to repo datastore"),await t.root.open(),await t.datastore.open(),await t.root.has(Ha)){const e=await t.root.get(Ha);await t.datastore.put(Ha,e),await t.root.delete(Ha)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo datastore")},revert:async function(t,e=(()=>{})){if(e(100,"Migrating MFS root to repo root datastore"),await t.root.open(),await t.datastore.open(),await t.datastore.has(Ha)){const e=await t.datastore.get(Ha);await t.root.put(Ha,e),await t.datastore.delete(Ha)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo root datastore")}},Ka=d.Reader,Wa=d.Writer,Xa=d.util,qa=d.roots.default||(d.roots.default={}),$a=qa.Protocols=(()=>{function t(t){if(this.protocols=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.protocols=Xa.emptyArray,t.encode=function(t,e){if(e||(e=Wa.create()),null!=t.protocols&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)e.uint32(10).string(t.protocols[i]);return e},t.decode=function(t,e){t instanceof Ka||(t=Ka.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new qa.Protocols;t.pos<i;){var n=t.uint32();n>>>3==1?(r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(t.string())):t.skipType(7&n)}return r},t.fromObject=function(t){if(t instanceof qa.Protocols)return t;var e=new qa.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");e.protocols=[];for(var i=0;i<t.protocols.length;++i)e.protocols[i]=String(t.protocols[i])}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var r=0;r<t.protocols.length;++r)i.protocols[r]=t.protocols[r]}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),Ja=d.Reader,Za=d.Writer,Qa=d.util,th=d.roots.default||(d.roots.default={}),eh=th.Addresses=(()=>{function t(t){if(this.addrs=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.addrs=Qa.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(t,e){if(e||(e=Za.create()),null!=t.addrs&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)th.Addresses.Address.encode(t.addrs[i],e.uint32(10).fork()).ldelim();return null!=t.certifiedRecord&&Object.hasOwnProperty.call(t,"certifiedRecord")&&th.Addresses.CertifiedRecord.encode(t.certifiedRecord,e.uint32(18).fork()).ldelim(),e},t.decode=function(t,e){t instanceof Ja||(t=Ja.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new th.Addresses;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.addrs&&r.addrs.length||(r.addrs=[]),r.addrs.push(th.Addresses.Address.decode(t,t.uint32()));break;case 2:r.certifiedRecord=th.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof th.Addresses)return t;var e=new th.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");e.addrs=[];for(var i=0;i<t.addrs.length;++i){if("object"!=typeof t.addrs[i])throw TypeError(".Addresses.addrs: object expected");e.addrs[i]=th.Addresses.Address.fromObject(t.addrs[i])}}if(null!=t.certifiedRecord){if("object"!=typeof t.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");e.certifiedRecord=th.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addrs=[]),e.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var r=0;r<t.addrs.length;++r)i.addrs[r]=th.Addresses.Address.toObject(t.addrs[r],e)}return null!=t.certifiedRecord&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=th.Addresses.CertifiedRecord.toObject(t.certifiedRecord,e)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.Address=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}let e;return t.prototype.multiaddr=Qa.newBuffer([]),t.prototype.isCertified=null,Object.defineProperty(t.prototype,"_isCertified",{get:Qa.oneOfGetter(e=["isCertified"]),set:Qa.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=Za.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),null!=t.isCertified&&Object.hasOwnProperty.call(t,"isCertified")&&e.uint32(16).bool(t.isCertified),e},t.decode=function(t,e){t instanceof Ja||(t=Ja.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new th.Addresses.Address;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.multiaddr=t.bytes();break;case 2:r.isCertified=t.bool();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof th.Addresses.Address)return t;var e=new th.Addresses.Address;return null!=t.multiaddr&&("string"==typeof t.multiaddr?Qa.base64.decode(t.multiaddr,e.multiaddr=Qa.newBuffer(Qa.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),null!=t.isCertified&&(e.isCertified=Boolean(t.isCertified)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.multiaddr="":(i.multiaddr=[],e.bytes!==Array&&(i.multiaddr=Qa.newBuffer(i.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(i.multiaddr=e.bytes===String?Qa.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),null!=t.isCertified&&t.hasOwnProperty("isCertified")&&(i.isCertified=t.isCertified,e.oneofs&&(i._isCertified="isCertified")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t.CertifiedRecord=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.seq=Qa.Long?Qa.Long.fromBits(0,0,!0):0,t.prototype.raw=Qa.newBuffer([]),t.encode=function(t,e){return e||(e=Za.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&e.uint32(8).uint64(t.seq),null!=t.raw&&Object.hasOwnProperty.call(t,"raw")&&e.uint32(18).bytes(t.raw),e},t.decode=function(t,e){t instanceof Ja||(t=Ja.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new th.Addresses.CertifiedRecord;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.seq=t.uint64();break;case 2:r.raw=t.bytes();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof th.Addresses.CertifiedRecord)return t;var e=new th.Addresses.CertifiedRecord;return null!=t.seq&&(Qa.Long?(e.seq=Qa.Long.fromValue(t.seq)).unsigned=!0:"string"==typeof t.seq?e.seq=parseInt(t.seq,10):"number"==typeof t.seq?e.seq=t.seq:"object"==typeof t.seq&&(e.seq=new Qa.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),null!=t.raw&&("string"==typeof t.raw?Qa.base64.decode(t.raw,e.raw=Qa.newBuffer(Qa.base64.length(t.raw)),0):t.raw.length&&(e.raw=t.raw)),e},t.toObject=function(t,e){e||(e={});var i={};if(e.defaults){if(Qa.Long){var r=new Qa.Long(0,0,!0);i.seq=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else i.seq=e.longs===String?"0":0;e.bytes===String?i.raw="":(i.raw=[],e.bytes!==Array&&(i.raw=Qa.newBuffer(i.raw)))}return null!=t.seq&&t.hasOwnProperty("seq")&&("number"==typeof t.seq?i.seq=e.longs===String?String(t.seq):t.seq:i.seq=e.longs===String?Qa.Long.prototype.toString.call(t.seq):e.longs===Number?new Qa.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),null!=t.raw&&t.hasOwnProperty("raw")&&(i.raw=e.bytes===String?Qa.base64.encode(t.raw,0,t.raw.length):e.bytes===Array?Array.prototype.slice.call(t.raw):t.raw),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t})(),ih=d.Reader,rh=d.Writer,nh=d.util,sh=d.roots.default||(d.roots.default={}),oh=sh.Peer=(()=>{function t(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}let e;return t.prototype.addresses=nh.emptyArray,t.prototype.protocols=nh.emptyArray,t.prototype.metadata=nh.emptyArray,t.prototype.pubKey=null,t.prototype.peerRecordEnvelope=null,Object.defineProperty(t.prototype,"_pubKey",{get:nh.oneOfGetter(e=["pubKey"]),set:nh.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_peerRecordEnvelope",{get:nh.oneOfGetter(e=["peerRecordEnvelope"]),set:nh.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=rh.create()),null!=t.addresses&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)sh.Address.encode(t.addresses[i],e.uint32(10).fork()).ldelim();if(null!=t.protocols&&t.protocols.length)for(i=0;i<t.protocols.length;++i)e.uint32(18).string(t.protocols[i]);if(null!=t.metadata&&t.metadata.length)for(i=0;i<t.metadata.length;++i)sh.Metadata.encode(t.metadata[i],e.uint32(26).fork()).ldelim();return null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(34).bytes(t.pubKey),null!=t.peerRecordEnvelope&&Object.hasOwnProperty.call(t,"peerRecordEnvelope")&&e.uint32(42).bytes(t.peerRecordEnvelope),e},t.decode=function(t,e){t instanceof ih||(t=ih.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new sh.Peer;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(sh.Address.decode(t,t.uint32()));break;case 2:r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(t.string());break;case 3:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(sh.Metadata.decode(t,t.uint32()));break;case 4:r.pubKey=t.bytes();break;case 5:r.peerRecordEnvelope=t.bytes();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof sh.Peer)return t;var e=new sh.Peer;if(t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".Peer.addresses: array expected");e.addresses=[];for(var i=0;i<t.addresses.length;++i){if("object"!=typeof t.addresses[i])throw TypeError(".Peer.addresses: object expected");e.addresses[i]=sh.Address.fromObject(t.addresses[i])}}if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Peer.protocols: array expected");for(e.protocols=[],i=0;i<t.protocols.length;++i)e.protocols[i]=String(t.protocols[i])}if(t.metadata){if(!Array.isArray(t.metadata))throw TypeError(".Peer.metadata: array expected");for(e.metadata=[],i=0;i<t.metadata.length;++i){if("object"!=typeof t.metadata[i])throw TypeError(".Peer.metadata: object expected");e.metadata[i]=sh.Metadata.fromObject(t.metadata[i])}}return null!=t.pubKey&&("string"==typeof t.pubKey?nh.base64.decode(t.pubKey,e.pubKey=nh.newBuffer(nh.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.peerRecordEnvelope&&("string"==typeof t.peerRecordEnvelope?nh.base64.decode(t.peerRecordEnvelope,e.peerRecordEnvelope=nh.newBuffer(nh.base64.length(t.peerRecordEnvelope)),0):t.peerRecordEnvelope.length&&(e.peerRecordEnvelope=t.peerRecordEnvelope)),e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addresses=[],i.protocols=[],i.metadata=[]),t.addresses&&t.addresses.length){i.addresses=[];for(var r=0;r<t.addresses.length;++r)i.addresses[r]=sh.Address.toObject(t.addresses[r],e)}if(t.protocols&&t.protocols.length)for(i.protocols=[],r=0;r<t.protocols.length;++r)i.protocols[r]=t.protocols[r];if(t.metadata&&t.metadata.length)for(i.metadata=[],r=0;r<t.metadata.length;++r)i.metadata[r]=sh.Metadata.toObject(t.metadata[r],e);return null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(i.pubKey=e.bytes===String?nh.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey,e.oneofs&&(i._pubKey="pubKey")),null!=t.peerRecordEnvelope&&t.hasOwnProperty("peerRecordEnvelope")&&(i.peerRecordEnvelope=e.bytes===String?nh.base64.encode(t.peerRecordEnvelope,0,t.peerRecordEnvelope.length):e.bytes===Array?Array.prototype.slice.call(t.peerRecordEnvelope):t.peerRecordEnvelope,e.oneofs&&(i._peerRecordEnvelope="peerRecordEnvelope")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),ah=(sh.Address=(()=>{function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}let e;return t.prototype.multiaddr=nh.newBuffer([]),t.prototype.isCertified=null,Object.defineProperty(t.prototype,"_isCertified",{get:nh.oneOfGetter(e=["isCertified"]),set:nh.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=rh.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),null!=t.isCertified&&Object.hasOwnProperty.call(t,"isCertified")&&e.uint32(16).bool(t.isCertified),e},t.decode=function(t,e){t instanceof ih||(t=ih.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new sh.Address;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.multiaddr=t.bytes();break;case 2:r.isCertified=t.bool();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof sh.Address)return t;var e=new sh.Address;return null!=t.multiaddr&&("string"==typeof t.multiaddr?nh.base64.decode(t.multiaddr,e.multiaddr=nh.newBuffer(nh.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),null!=t.isCertified&&(e.isCertified=Boolean(t.isCertified)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.multiaddr="":(i.multiaddr=[],e.bytes!==Array&&(i.multiaddr=nh.newBuffer(i.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(i.multiaddr=e.bytes===String?nh.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),null!=t.isCertified&&t.hasOwnProperty("isCertified")&&(i.isCertified=t.isCertified,e.oneofs&&(i._isCertified="isCertified")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),sh.Metadata=(()=>{function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.key="",t.prototype.value=nh.newBuffer([]),t.encode=function(t,e){return e||(e=rh.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).string(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).bytes(t.value),e},t.decode=function(t,e){t instanceof ih||(t=ih.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new sh.Metadata;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.key=t.string();break;case 2:r.value=t.bytes();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof sh.Metadata)return t;var e=new sh.Metadata;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&("string"==typeof t.value?nh.base64.decode(t.value,e.value=nh.newBuffer(nh.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(i.key="",e.bytes===String?i.value="":(i.value=[],e.bytes!==Array&&(i.value=nh.newBuffer(i.value)))),null!=t.key&&t.hasOwnProperty("key")&&(i.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(i.value=e.bytes===String?nh.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),d.Reader),hh=d.Writer,ch=d.util,lh=d.roots.default||(d.roots.default={}),uh=lh.Envelope=(()=>{function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.publicKey=ch.newBuffer([]),t.prototype.payloadType=ch.newBuffer([]),t.prototype.payload=ch.newBuffer([]),t.prototype.signature=ch.newBuffer([]),t.encode=function(t,e){return e||(e=hh.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.payloadType&&Object.hasOwnProperty.call(t,"payloadType")&&e.uint32(18).bytes(t.payloadType),null!=t.payload&&Object.hasOwnProperty.call(t,"payload")&&e.uint32(26).bytes(t.payload),null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),e},t.decode=function(t,e){t instanceof ah||(t=ah.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new lh.Envelope;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.publicKey=t.bytes();break;case 2:r.payloadType=t.bytes();break;case 3:r.payload=t.bytes();break;case 5:r.signature=t.bytes();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof lh.Envelope)return t;var e=new lh.Envelope;return null!=t.publicKey&&("string"==typeof t.publicKey?ch.base64.decode(t.publicKey,e.publicKey=ch.newBuffer(ch.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),null!=t.payloadType&&("string"==typeof t.payloadType?ch.base64.decode(t.payloadType,e.payloadType=ch.newBuffer(ch.base64.length(t.payloadType)),0):t.payloadType.length&&(e.payloadType=t.payloadType)),null!=t.payload&&("string"==typeof t.payload?ch.base64.decode(t.payload,e.payload=ch.newBuffer(ch.base64.length(t.payload)),0):t.payload.length&&(e.payload=t.payload)),null!=t.signature&&("string"==typeof t.signature?ch.base64.decode(t.signature,e.signature=ch.newBuffer(ch.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.publicKey="":(i.publicKey=[],e.bytes!==Array&&(i.publicKey=ch.newBuffer(i.publicKey))),e.bytes===String?i.payloadType="":(i.payloadType=[],e.bytes!==Array&&(i.payloadType=ch.newBuffer(i.payloadType))),e.bytes===String?i.payload="":(i.payload=[],e.bytes!==Array&&(i.payload=ch.newBuffer(i.payload))),e.bytes===String?i.signature="":(i.signature=[],e.bytes!==Array&&(i.signature=ch.newBuffer(i.signature)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(i.publicKey=e.bytes===String?ch.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),null!=t.payloadType&&t.hasOwnProperty("payloadType")&&(i.payloadType=e.bytes===String?ch.base64.encode(t.payloadType,0,t.payloadType.length):e.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),null!=t.payload&&t.hasOwnProperty("payload")&&(i.payload=e.bytes===String?ch.base64.encode(t.payload,0,t.payload.length):e.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),null!=t.signature&&t.hasOwnProperty("signature")&&(i.signature=e.bytes===String?ch.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t})(),dh=d.Reader,fh=d.Writer,ph=d.util,gh=d.roots.default||(d.roots.default={}),yh=gh.PeerRecord=(()=>{function t(t){if(this.addresses=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.peerId=ph.newBuffer([]),t.prototype.seq=ph.Long?ph.Long.fromBits(0,0,!0):0,t.prototype.addresses=ph.emptyArray,t.encode=function(t,e){if(e||(e=fh.create()),null!=t.peerId&&Object.hasOwnProperty.call(t,"peerId")&&e.uint32(10).bytes(t.peerId),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&e.uint32(16).uint64(t.seq),null!=t.addresses&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)gh.PeerRecord.AddressInfo.encode(t.addresses[i],e.uint32(26).fork()).ldelim();return e},t.decode=function(t,e){t instanceof dh||(t=dh.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new gh.PeerRecord;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.peerId=t.bytes();break;case 2:r.seq=t.uint64();break;case 3:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(gh.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof gh.PeerRecord)return t;var e=new gh.PeerRecord;if(null!=t.peerId&&("string"==typeof t.peerId?ph.base64.decode(t.peerId,e.peerId=ph.newBuffer(ph.base64.length(t.peerId)),0):t.peerId.length&&(e.peerId=t.peerId)),null!=t.seq&&(ph.Long?(e.seq=ph.Long.fromValue(t.seq)).unsigned=!0:"string"==typeof t.seq?e.seq=parseInt(t.seq,10):"number"==typeof t.seq?e.seq=t.seq:"object"==typeof t.seq&&(e.seq=new ph.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");e.addresses=[];for(var i=0;i<t.addresses.length;++i){if("object"!=typeof t.addresses[i])throw TypeError(".PeerRecord.addresses: object expected");e.addresses[i]=gh.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.addresses=[]),e.defaults)if(e.bytes===String?i.peerId="":(i.peerId=[],e.bytes!==Array&&(i.peerId=ph.newBuffer(i.peerId))),ph.Long){var r=new ph.Long(0,0,!0);i.seq=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else i.seq=e.longs===String?"0":0;if(null!=t.peerId&&t.hasOwnProperty("peerId")&&(i.peerId=e.bytes===String?ph.base64.encode(t.peerId,0,t.peerId.length):e.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),null!=t.seq&&t.hasOwnProperty("seq")&&("number"==typeof t.seq?i.seq=e.longs===String?String(t.seq):t.seq:i.seq=e.longs===String?ph.Long.prototype.toString.call(t.seq):e.longs===Number?new ph.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var n=0;n<t.addresses.length;++n)i.addresses[n]=gh.PeerRecord.AddressInfo.toObject(t.addresses[n],e)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.AddressInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.multiaddr=ph.newBuffer([]),t.encode=function(t,e){return e||(e=fh.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),e},t.decode=function(t,e){t instanceof dh||(t=dh.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new gh.PeerRecord.AddressInfo;t.pos<i;){var n=t.uint32();n>>>3==1?r.multiaddr=t.bytes():t.skipType(7&n)}return r},t.fromObject=function(t){if(t instanceof gh.PeerRecord.AddressInfo)return t;var e=new gh.PeerRecord.AddressInfo;return null!=t.multiaddr&&("string"==typeof t.multiaddr?ph.base64.decode(t.multiaddr,e.multiaddr=ph.newBuffer(ph.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.multiaddr="":(i.multiaddr=[],e.bytes!==Array&&(i.multiaddr=ph.newBuffer(i.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(i.multiaddr=e.bytes===String?ph.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t})();d.util.Long=void 0,d.configure();const mh={version:12,description:"Store each peerstore peer under a single datastore key",migrate:async function(t,e=(()=>{})){e(0,"Storing each peerstore key under a single datastore key"),await t.datastore.open();const i={},r=[];for await(const{key:e,value:n}of t.datastore.query({prefix:"/peers"})){r.push(e);const t=e.toString(),[s,o,a,h,c]=t.split("/");if("peers"===o&&["protos","addrs","metadata","keys"].includes(a)&&h)if(i[h]=i[h]||{addresses:[],protocols:[],metadata:[]},"protos"===a){const t=$a.decode(n);i[h].protocols=t.protocols.sort()}else if("addrs"===a){const t=eh.decode(n);i[h].addresses=t.addrs.sort(((t,e)=>new $i.Multiaddr(t.multiaddr).toString().localeCompare(new $i.Multiaddr(e.multiaddr).toString()))),t.certifiedRecord&&t.certifiedRecord.raw&&(i[h].peerRecordEnvelope=t.certifiedRecord.raw)}else"metadata"===a?i[h].metadata.push({key:c,value:n}):"keys"===a&&(i[h].pubKey=n)}e(33,"Read peer data from store");for(const e of r)await t.datastore.delete(e);e(66,"Removed existing peer data from store");for(const e of Object.keys(i)){const r=i[e];r.metadata=r.metadata.sort(((t,e)=>t.key.localeCompare(e.key)));const n=oh.encode(r).finish();await t.datastore.put(new Nt.Key(`/peers/${e}`),n)}await t.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")},revert:async function(t,e=(()=>{})){e(0,"Storing each peerstore key under a multiple datastore keys"),await t.datastore.open();const i={},r=[];for await(const{key:e,value:n}of t.datastore.query({prefix:"/peers"})){r.push(e);const t=e.toString(),[s,o,a]=t.split("/");i[a]=oh.decode(n)}e(33,"Read peer data from store");for(const e of r)await t.datastore.delete(e);e(66,"Removed existing peer data from store");for(const[e,r]of Object.entries(i)){if(r.protocols&&r.protocols.length>0&&await t.datastore.put(new Nt.Key(`/peers/protos/${e}`),$a.encode({protocols:r.protocols}).finish()),r.addresses&&r.addresses.length>0){const i=r.peerRecordEnvelope;let n;if(i){const t=uh.decode(i);n={raw:i,seq:yh.decode(t.payload).seq}}await t.datastore.put(new Nt.Key(`/peers/addrs/${e}`),eh.encode({addrs:r.addresses,certifiedRecord:n}).finish())}if(r.metadata&&r.metadata.length>0)for(const{key:i,value:n}of r.metadata)await t.datastore.put(new Nt.Key(`/peers/metadata/${e}/${i}`),n);r.pubKey&&await t.datastore.put(new Nt.Key(`/peers/keys/${e}`),r.pubKey)}await t.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}},vh={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},bh=[Object.assign({version:1},vh),Object.assign({version:2},vh),Object.assign({version:3},vh),Object.assign({version:4},vh),Object.assign({version:5},vh),Object.assign({version:6},vh),Object.assign({version:7},vh),fa,Oa,Va,Ya,mh];class wh extends Error{constructor(t){super(t),this.name="NonReversibleMigrationError",this.code=wh.code,this.message=t}}wh.code="ERR_NON_REVERSIBLE_MIGRATION";class _h extends Error{constructor(t){super(t),this.name="NotInitializedRepoError",this.code=_h.code,this.message=t}}_h.code="ERR_NOT_INITIALIZED_REPO";class xh extends Error{constructor(t){super(t),this.name="RequiredParameterError",this.code=xh.code,this.message=t}}xh.code="ERR_REQUIRED_PARAMETER";class Eh extends Error{constructor(t){super(t),this.name="InvalidValueError",this.code=Eh.code,this.message=t}}Eh.code="ERR_INVALID_VALUE";class Sh extends Error{constructor(t){super(t),this.name="MissingRepoOptionsError",this.code=Sh.code,this.message=t}}Sh.code="ERR_MISSING_REPO_OPTIONS";const Th=l("ipfs:repo:migrator:repo:init");async function Ah(t){if(!await async function(t){if(!t)throw new Sh("Please pass repo options when trying to open a repo");const e=t.root;try{await e.open();const t=await e.has(Da),i=await e.has(Ma);return!(!t||!i)||(Th(`Version entry present: ${t}`),Th(`Config entry present: ${i}`),!1)}catch(t){return Th("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(void 0!==e)try{await e.close()}catch{}}}(t))throw new _h("Repo is not initialized!");const e=t.root;await e.open();try{return parseInt((0,me.toString)(await e.get(Da)))}finally{await e.close()}}async function Ch(t,e){if(!e)throw new Sh("Please pass repo options when trying to open a repo");const i=e.root;await i.open(),await i.put(Da,(0,Bt.fromString)(String(t))),await i.close()}const kh=l("ipfs:repo:migrator");function Rh(t,e,i,r=!1){let n=0;for(const s of t){if(s.version>i)break;if(s.version>e){if(r&&!s.revert)throw new Ph.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${s.version} is not reversible. Cancelling reversion.`);n++}}if(n!==i-e)throw new Ph.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${i}`)}const Ph=o;var Ih=i(24137);class Oh extends Error{constructor(t){super(t),this.name="LockExistsError",this.code=Oh.code}}Oh.code="ERR_LOCK_EXISTS";class Mh extends Error{constructor(t){super(t),this.name="NotFoundError",this.code=Mh.code}}Mh.code="ERR_NOT_FOUND";class Dh extends Error{constructor(t){super(t),this.name="InvalidRepoVersionError",this.code=Dh.code}}Dh.code="ERR_INVALID_REPO_VERSION";const Bh="ERR_REPO_NOT_INITIALIZED";async function Lh(t,e,i){const r=await e(t);if(r)return r;const n=Uh(i);return!!n&&new Promise(((e,i)=>{const r=n.store("readonly").get(t.toString());r.transaction.onabort=()=>{i(r.transaction.error)},r.transaction.oncomplete=()=>{e(Boolean(r.result))}}))}async function Nh(t,e,i,r){if(await i(t))return e(t);const n=Uh(r);if(!n)throw new Mh;return new Promise(((e,i)=>{const r=n.store("readonly").get(t.toString());r.transaction.onabort=()=>{i(r.transaction.error)},r.transaction.oncomplete=()=>{if(r.result)return e(r.result);i(new Mh)}}))}function Uh(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,"level-js"===e.type||"Level"===e.constructor.name)return e}const Fh=l("ipfs:repo:version"),zh=new Nt.Key("version"),jh=ne.default?ne.default:ne,Vh=new Nt.Key("config");var Gh=i(33694);const Hh=new fi.s("datastore_spec"),Yh=new Nt.Key("api");var Kh=i(84975);function Wh(t){const e=A.CID.asCID(t);if(null==e)throw u(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==At.identity.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}const Xh=l("ipfs:repo:lock:memory"),qh="repo.lock",$h={},Jh={lock:async function(t){const e=t+"/"+qh;if(Xh("locking %s",e),!0===$h[e])throw new Oh(`Lock already being held for file: ${e}`);return $h[e]=!0,{async close(){$h[e]&&delete $h[e]}}},locked:async function(t){const e=t+"/"+qh;return Xh(`checking lock: ${e}`),Boolean($h[e])}},Zh={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:Jh},Qh={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function tc(t){const e=ot.k0.asCID(t);if(null==e)throw u(new Error("Not a valid cid"),"ERR_INVALID_CID");const i=xe.base32.encode(e.multihash.bytes);return new Nt.Key("/"+i.slice(1).toUpperCase(),!1)}function ec(t){return _e.decode(xe.base32.decode(`b${t.toString().toLowerCase().substring(1)}`))}const ic=l("ipfs:repo:utils:walk-dag");async function*rc(t,e,i,r){try{const n=await e.get(t,r),s=await i(t.code),o=Dn({bytes:n,cid:t,codec:s});for(const[,t]of o.links())yield t,yield*rc(t,e,i,r)}catch(e){throw ic("Could not walk DAG for CID",t.toString(),e),e}}class nc{constructor({pinstore:t,blockstore:e,loadCodec:i}){this.pinstore=t,this.blockstore=e,this.loadCodec=i,this.log=l("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(t,e={}){await this.blockstore.get(t,e);const i={depth:0};return 0!==t.version&&(i.version=t.version),t.code!==$&&(i.codec=t.code),e.metadata&&(i.metadata=e.metadata),this.pinstore.put(tc(t),Q.cv(i))}unpin(t,e){return this.pinstore.delete(tc(t),e)}async pinRecursively(t,e={}){await this.fetchCompleteDag(t,e);const i={depth:1/0};0!==t.version&&(i.version=t.version),t.code!==$&&(i.codec=t.code),e.metadata&&(i.metadata=e.metadata),await this.pinstore.put(tc(t),Q.cv(i))}async*directKeys(t){for await(const t of this.pinstore.query({filters:[t=>0===Q.Jx(t.value).depth]})){const e=Q.Jx(t.value),i=e.version||0,r=null!=e.codec?e.codec:$,n=ec(t.key);yield{cid:A.CID.create(i,r,n),metadata:e.metadata}}}async*recursiveKeys(t){for await(const t of this.pinstore.query({filters:[t=>Q.Jx(t.value).depth===1/0]})){const e=Q.Jx(t.value),i=e.version||0,r=null!=e.codec?e.codec:$,n=ec(t.key);yield{cid:A.CID.create(i,r,n),metadata:e.metadata}}}async*indirectKeys(t){for await(const{cid:e}of this.recursiveKeys())for await(const i of rc(e,this.blockstore,this.loadCodec,t)){const t=[fe.recursive];(await this.isPinnedWithType(i,t)).pinned||(yield i)}}async isPinnedWithType(t,e,i){Array.isArray(e)||(e=[e]);const r=e.includes(fe.all),n=e.includes(fe.direct),s=e.includes(fe.recursive),o=e.includes(fe.indirect);if(s||n||r){const i=await es(this.pinstore.query({prefix:tc(t).toString(),filters:[t=>{if(r)return!0;const i=Q.Jx(t.value);return e.includes(0===i.depth?fe.direct:fe.recursive)}],limit:1}));if(i){const e=Q.Jx(i.value);return{cid:t,pinned:!0,reason:0===e.depth?fe.direct:fe.recursive,metadata:e.metadata}}}const a=this;if(r||o){const e=await es(async function*(t,e){for await(const{cid:i}of e)for await(const e of rc(i,a.blockstore,a.loadCodec))if(e.equals(t))return void(yield i)}(t,this.recursiveKeys()));if(e)return{cid:t,pinned:!0,reason:fe.indirect,parent:e}}return{cid:t,pinned:!1}}async fetchCompleteDag(t,e){const i=new Set,r=async(t,e)=>{if(i.has(t.toString()))return;i.add(t.toString());const n=await this.blockstore.get(t,e),s=await this.loadCodec(t.code),o=Dn({bytes:n,cid:t,codec:s});await Promise.all([...o.links()].map((([,t])=>r(t,e))))};await r(t,e)}static checkPinType(t){if("string"!=typeof t||!Object.keys(fe).includes(t))throw function(t){return u(new Error(`Invalid type '${t}', must be one of {direct, indirect, recursive, all}`),"ERR_INVALID_PIN_TYPE")}(t);return!0}}async function sc(t,e){const{pinned:i,reason:r}=await e.isPinnedWithType(t,fe.all);if(i)throw u(new Error(`pinned: ${r}`),"ERR_BLOCK_PINNED")}var oc=i(74014);const ac=l("ipfs:repo:gc"),hc=(0,ye.notFoundError)().code,cc=new Nt.Key("/local/filesroot");const lc=l("ipfs:repo"),uc=Number.MAX_SAFE_INTEGER;class dc{constructor(t,e,i,r){if("string"!=typeof t)throw new Error("missing repo path");if("function"!=typeof e)throw new Error("missing codec loader");this.options=h(Zh,r),this.closed=!0,this.path=t,this.root=i.root,this.datastore=i.datastore,this.keys=i.keys;const n=i.blocks,s=i.pins;this.pins=new nc({pinstore:s,blockstore:n,loadCodec:e});const o=(a=this.pins,c=n,{open:()=>c.open(),close:()=>c.close(),query:(t,e)=>c.query(t,e),queryKeys:(t,e)=>c.queryKeys(t,e),get:async(t,e)=>c.get(t,e),async*getMany(t,e){yield*c.getMany(t,e)},async put(t,e,i){await c.put(t,e,i)},async*putMany(t,e){yield*c.putMany(t,e)},has:(t,e)=>c.has(t,e),delete:async(t,e)=>(await sc(t,a),c.delete(t,e)),deleteMany:(t,e)=>c.deleteMany(Qi(t,(async t=>(await sc(t,a),t))),e),batch:()=>c.batch()});var a,c;this.blocks=function(t){return{open:()=>t.open(),close:()=>t.close(),query:(e,i)=>t.query(e,i),queryKeys:(e,i)=>t.queryKeys(e,i),async get(e,i){const r=Wh(e);return r.isIdentity?Promise.resolve(r.digest):t.get(e,i)},async*getMany(t,e){for await(const i of t)yield this.get(i,e)},async put(e,i,r){const{isIdentity:n}=Wh(e);n||await t.put(e,i,r)},async*putMany(e,i){const r=Kh();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{await Ti(t.putMany(async function*(){for await(const{key:t,value:i}of e)Wh(t).isIdentity||(yield{key:t,value:i}),r.push({key:t,value:i})}())),r.end()}catch(t){r.end(t)}})),yield*r},has(e,i){const{isIdentity:r}=Wh(e);return r?Promise.resolve(!0):t.has(e,i)},delete(e,i){const{isIdentity:r}=Wh(e);return r?Promise.resolve():t.delete(e,i)},deleteMany:(e,i)=>t.deleteMany(tr(e,(t=>!Wh(t).isIdentity)),i),batch(){const e=t.batch();return{put(t,i){const{isIdentity:r}=Wh(t);r||e.put(t,i)},delete(t){const{isIdentity:i}=Wh(t);i||e.delete(t)},commit:t=>e.commit(t)}}}}(o),this.version=function(t){return{exists:async()=>Lh(zh,t.has.bind(t),t),async get(){const e=await Nh(zh,t.get.bind(t),t.has.bind(t),t);return parseInt((0,me.toString)(e),10)},set:e=>t.put(zh,(0,Bt.fromString)(String(e))),async check(t){const e=await this.get();return Fh("comparing version: %s and %s",e,t),e===t||6===e&&7===t||6===t&&7===e}}}(this.root),this.config=function(t){const e=new jh({concurrency:1}),i={async getAll(e={}){const i=await Nh(Vh,t.get.bind(t),t.has.bind(t),t);return JSON.parse((0,me.toString)(i))},async get(t,e={}){if(null==t)throw new Mh(`Key ${t} does not exist in config`);const i=await this.getAll(e),r=oa(i,t);if(void 0===r)throw new Mh(`Key ${t} does not exist in config`);return r},set(t,i,n={}){if("string"!=typeof t&&!(t instanceof String))throw u(new Error("Invalid key type: "+typeof t),"ERR_INVALID_KEY");if(void 0===i||i instanceof Uint8Array)throw u(new Error("Invalid value type: "+typeof i),"ERR_INVALID_VALUE");return e.add((()=>r({key:t,value:i},n.signal)))},replace(t,i={}){if(!t||t instanceof Uint8Array)throw u(new Error("Invalid value type: "+typeof t),"ERR_INVALID_VALUE");return e.add((()=>r({key:void 0,value:t},i.signal)))},exists:async()=>Lh(Vh,t.has.bind(t),t)};return i;async function r(t,e){if(e&&e.aborted)return;const r=t.key,s=t.value;if(r){const t=await i.getAll();return"object"==typeof t&&null!==t&&An(t,r,s),n(t)}return n(s)}function n(e){const i=(0,Bt.fromString)(JSON.stringify(e,null,2));return t.put(Vh,i)}}(this.root),this.spec=function(t){return{exists:()=>t.has(Hh),async get(){const e=await t.get(Hh);return JSON.parse((0,me.toString)(e))},set:async e=>t.put(Hh,(0,Bt.fromString)(JSON.stringify(Gh(e,{deep:!0}))))}}(this.root),this.apiAddr=function(t){return{async get(){const e=await t.get(Yh);return e&&e.toString()},set:e=>t.put(Yh,(0,Bt.fromString)(e.toString())),delete:()=>t.delete(Yh)}}(this.root),this.gcLock=gs(t,{singleProcess:!1!==this.options.repoOwner}),this.gc=function({gcLock:t,pins:e,blockstore:i,root:r,loadCodec:n}){return async function*(){const s=Date.now();ac("Creating set of marked blocks");const o=await t.writeLock();try{const t=await async function({pins:t,blockstore:e,loadCodec:i,root:r}){const n=async function*(){let t;try{t=await r.get(cc)}catch(t){if(t.code===hc)return void ac("No blocks in MFS");throw t}const n=A.CID.decode(t);yield n,yield*rc(n,e,i)}(),s=oc(Qi(t.recursiveKeys(),(({cid:t})=>t)),t.indirectKeys(),Qi(t.directKeys(),(({cid:t})=>t)),n),o=new Set;for await(const t of oc(s,n))o.add(xe.base32.encode(t.multihash.bytes));return o}({pins:e,blockstore:i,root:r,loadCodec:n}),a=i.queryKeys({});yield*async function*({blockstore:t},e,i){let r=0,n=0;yield*(0,er.pipe)(mr(Qi(i,(async i=>async function(){r++;try{const r=xe.base32.encode(i.multihash.bytes);if(e.has(r))return null;try{await t.delete(i),n++}catch(t){return{err:new Error(`Could not delete block with CID ${i}: ${t.message}`)}}return{cid:i}}catch(t){const e=`Could delete block with CID ${i}`;return ac(e,t),{err:new Error(e+`: ${t.message}`)}}})),256),(t=>tr(t,Boolean))),ac(`Marked set has ${e.size} unique blocks. Blockstore has ${r} blocks. Deleted ${n} blocks.`)}({blockstore:i},t,a),ac(`Complete (${Date.now()-s}ms)`)}finally{o()}}}({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:e})}async init(t){var e;lc("initializing at: %s",this.path),await this._openRoot(),await this.config.replace((e=t,e.Datastore=Object.assign({},Qh,oa(e,"datastore")),e)),await this.spec.set(function(t){const e={...Qh.Spec,...oa(t,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map((t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc})))}}(t)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(t){return!1}}async open(){if(!this.closed)throw u(new Error("repo is already open"),"ERR_REPO_ALREADY_OPEN");lc("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),lc("acquired repo.lock"),!await this.version.check(12)){if(!await this._isAutoMigrationEnabled())throw new Dh("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys})}lc("creating datastore"),await this.datastore.open(),lc("creating blocks"),await this.blocks.open(),lc("creating keystore"),await this.keys.open(),lc("creating pins"),await this.pins.pinstore.open(),this.closed=!1,lc("all opened")}catch(t){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){lc("error removing lock",t)}throw t}}async _openRoot(){try{await this.root.open()}catch(t){if("Already open"!==t.message)throw t}}async _openLock(){const t=await this.options.repoLock.lock(this.path);if("function"!=typeof t.close)throw u(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return t}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){let t;lc("init check");try{[t]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){if("ERR_NOT_FOUND"===t.code)throw u(new Error("repo is not initialized yet"),Bh,{path:this.path});throw t}if(!t)throw u(new Error("repo is not initialized yet"),Bh,{path:this.path})}async close(){if(this.closed)throw u(new Error("repo is already closed"),"ERR_REPO_ALREADY_CLOSED");lc("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(t){if(t.code!==Bh&&!t.message.startsWith("ENOENT"))throw t}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((t=>t&&t.close()))),lc("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[t,e,i,r,n]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),fc(this.datastore),fc(this.keys)]),s=e.size+r+n;return{repoPath:this.path,storageMax:t,version:i,numObjects:e.count,repoSize:s}}throw u(new Error("repo is not initialized yet"),Bh,{path:this.path})}async _isAutoMigrationEnabled(){if(void 0!==this.options.autoMigrate)return this.options.autoMigrate;let t;try{t=await this.config.get("repoAutoMigrate")}catch(e){if(e.code!==Mh.code)throw e;t=!0}return t}async _migrate(t,e){return await this.version.get()>t?(lc(`reverting to version ${t}`),async function(t,e,i,r,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||bh,!t)throw new Ph.RequiredParameterError("Path argument is required!");if(!i)throw new Ph.RequiredParameterError("repoOptions argument is required!");if(!r)throw new Ph.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(r)||r<=0)throw new Ph.InvalidValueError("Version has to be positive integer!");e=Na(e);const h=await Ah(e);if(h===r)return void kh("Nothing to revert.");if(h<r)throw new Ph.InvalidValueError(`Current repo's version (${h}) is lower then toVersion (${r}), you probably wanted to migrate it?`);let c;Rh(a,r,h,!0),o||n||(c=await i.repoLock.lock(t)),kh(`Reverting from version ${h} to ${r}`);try{const t=a.slice().reverse();for(const i of t){if(i.version<=r)break;if(!(i.version>h)){kh(`Reverting migration version ${i.version}`);try{if(!o){let t=()=>{};s&&(t=(t,e)=>s(i.version,t.toFixed(2),e)),await i.revert(e,t)}}catch(t){const r=i.version;throw kh(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${r}`),await Ch(r,e),t.message=`During reversion to version ${i.version} exception was raised: ${t.message}`,t}kh(`Reverting to version ${i.version} finished`)}}o||await Ch(r,e),kh(`All migrations successfully reverted to version ${r}!`)}finally{o||n||!c||await c.close()}}(this.path,e,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(lc(`migrating to version ${t}`),async function(t,e,i,r,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||bh,!t)throw new Ph.RequiredParameterError("Path argument is required!");if(!i)throw new Ph.RequiredParameterError("repoOptions argument is required!");if(!r)throw new Ph.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(r)||r<=0)throw new Ph.InvalidValueError("Version has to be positive integer!");e=Na(e);const h=await Ah(e);if(h===r)return void kh("Nothing to migrate.");if(h>r)throw new Ph.InvalidValueError(`Current repo's version (${h}) is higher then toVersion (${r}), you probably wanted to revert it?`);let c;Rh(a,h,r),o||n||(c=await i.repoLock.lock(t));try{for(const t of a){if(void 0!==r&&t.version>r)break;if(!(t.version<=h)){kh(`Migrating version ${t.version}`);try{if(!o){let i=()=>{};s&&(i=(e,i)=>s(t.version,e.toFixed(2),i)),await t.migrate(e,i)}}catch(i){const r=t.version-1;throw kh(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${r}`),await Ch(r,e),new Error(`During migration to version ${t.version} exception was raised: ${i.stack||i.message||i}`)}kh(`Migrating to version ${t.version} finished`)}}o||await Ch(r||function(t){return t=t||bh,Array.isArray(t)&&0!==t.length?t[t.length-1].version:0}(a),e),kh("Repo successfully migrated",void 0!==r?`to version ${r}!`:"to latest version!")}finally{o||n||!c||await c.close()}}(this.path,e,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const t=await this.config.get("Datastore.StorageMax");return BigInt(Ih(t))}catch(t){return BigInt(uc)}}async _blockStat(){let t=BigInt(0),e=BigInt(0);if(this.blocks)for await(const{key:i,value:r}of this.blocks.query({}))t+=BigInt(1),e+=BigInt(r.byteLength),e+=BigInt(i.bytes.byteLength);return{count:t,size:e}}}async function fc(t){let e=BigInt(0);for await(const i of t.query({}))e+=BigInt(i.value.byteLength),e+=BigInt(i.key.uint8Array().byteLength);return e}var pc=i(37939),gc=i(97515),yc=i(21301);class mc extends pi.BaseDatastore{constructor(t,e){super(),this.path=t,this.opts=e,e&&e.db?(this.database=e.db,delete e.db):this.database=yc}_initDb(){return new Promise(((t,e)=>{this.db=this.database(this.path,{...this.opts,valueEncoding:"binary",compression:!1},(i=>{if(i)return e(i);t(this.db)}))}))}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(t){throw pi.Errors.dbOpenFailedError(t)}}async put(t,e){try{await this.db.put(t.toString(),e)}catch(t){throw pi.Errors.dbWriteFailedError(t)}}async get(t){let e;try{e=await this.db.get(t.toString())}catch(t){if(t.notFound)throw pi.Errors.notFoundError(t);throw pi.Errors.dbWriteFailedError(t)}return e}async has(t){try{await this.db.get(t.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(t){try{await this.db.del(t.toString())}catch(t){throw pi.Errors.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){const t=[];return{put:(e,i)=>{t.push({type:"put",key:e.toString(),value:i})},delete:e=>{t.push({type:"del",key:e.toString()})},commit:()=>this.db.batch(t)}}query(t){let e=this._query({values:!0,prefix:t.prefix});Array.isArray(t.filters)&&(e=t.filters.reduce(((t,e)=>tr(t,e)),e)),Array.isArray(t.orders)&&(e=t.orders.reduce(((t,e)=>gc(t,e)),e));const{offset:i,limit:r}=t;if(i){let t=0;e=tr(e,(()=>t++>=i))}return r&&(e=pc(e,r)),e}queryKeys(t){let e=Qi(this._query({values:!1,prefix:t.prefix}),(({key:t})=>t));Array.isArray(t.filters)&&(e=t.filters.reduce(((t,e)=>tr(t,e)),e)),Array.isArray(t.orders)&&(e=t.orders.reduce(((t,e)=>gc(t,e)),e));const{offset:i,limit:r}=t;if(i){let t=0;e=tr(e,(()=>t++>=i))}return r&&(e=pc(e,r)),e}_query(t){const e={keys:!0,keyAsBuffer:!0,values:t.values};if(null!=t.prefix){const i=t.prefix.toString();e.gte=i,e.lt=i+""}return i=this.db.iterator(e),{[Symbol.asyncIterator]:()=>({next:()=>new Promise(((t,e)=>{i.next(((r,n,s)=>r?e(r):null==n?i.end((i=>{if(i)return e(i);t({done:!0,value:void 0})})):void t({done:!1,value:{key:new fi.s(n,!1),value:s}})))})),return:()=>new Promise(((t,e)=>{i.end((i=>{if(i)return e(i);t({done:!0,value:void 0})}))}))})};var i}}const vc=(t,e)=>async function*(){const i=await ar(t);yield*i.sort(e)}();class bc{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,i){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:i,value:r}of t)await this.put(i,r,e),yield{key:i,value:r}}async*getMany(t,e={}){for await(const i of t)yield this.get(i,e)}async*deleteMany(t,e={}){for await(const i of t)await this.delete(i,e),yield i}batch(){let t=[],e=[];return{put(e,i){t.push({key:e,value:i})},delete(t){e.push(t)},commit:async i=>{await Ti(this.putMany(t,i)),t=[],await Ti(this.deleteMany(e,i)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let i=this._all(t,e);if(null!=t.prefix&&(i=tr(i,(e=>e.key.toString().startsWith(t.prefix||"")))),Array.isArray(t.filters)&&(i=t.filters.reduce(((t,e)=>tr(t,e)),i)),Array.isArray(t.orders)&&(i=t.orders.reduce(((t,e)=>vc(t,e)),i)),null!=t.offset){let e=0;i=tr(i,(()=>e++>=(t.offset||0)))}return null!=t.limit&&(i=pc(i,t.limit)),i}queryKeys(t,e){let i=this._allKeys(t,e);if(null!=t.prefix&&(i=tr(i,(e=>e.toString().startsWith(t.prefix||"")))),Array.isArray(t.filters)&&(i=t.filters.reduce(((t,e)=>tr(t,e)),i)),Array.isArray(t.orders)&&(i=t.orders.reduce(((t,e)=>vc(t,e)),i)),null!=t.offset){let e=0;i=tr(i,(()=>e++>=t.offset))}return null!=t.limit&&(i=pc(i,t.limit)),i}}function wc(t){const e=A.CID.asCID(t);if(!e)throw u(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Nt.Key("/"+xe.base32.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function _c(t){return A.CID.createV1(Tr.code,_e.decode(xe.base32.decode("b"+t.toString().slice(1).toLowerCase())))}function xc(t){const e=t.substring(0,1);if("/"===e)return xc(t.substring(1));let i,r;i="b"===e.toLowerCase()?t=>xe.base32.decode(t.toLowerCase()).subarray(2):"c"===e.toLowerCase()?t=>xe.base32pad.decode(t.toLowerCase()).subarray(2):"z"===e?t=>di.base58btc.decode(t).subarray(2):"Q"===e?t=>di.base58btc.decode("z"+t):t=>xe.base32.decode("b"+t.toLowerCase()).subarray(2);for(let e=1;e<t.length;e++)try{r=i(t.substring(0,e))}catch(t){if("Unexpected end of data"!==t.message)throw t}let n="/C";return r&&(n=`/${xe.base32.encode(r).slice(1,-1).toUpperCase()||"C"}`),n}class Ec extends bc{constructor(t){super(),this.child=t}open(){return this.child.open()}close(){return this.child.close()}async*query(t,e){for await(const{key:i,value:r}of this.child.query(function(t){return{...t,prefix:t.prefix?xc(t.prefix):void 0,filters:t.filters?t.filters.map((t=>e=>t({key:_c(e.key),value:e.value}))):void 0,orders:t.orders?t.orders.map((t=>(e,i)=>t({key:_c(e.key),value:e.value},{key:_c(i.key),value:i.value}))):void 0}}(t),e))yield{key:_c(i),value:r}}async*queryKeys(t,e){for await(const i of this.child.queryKeys(function(t){return{...t,prefix:t.prefix?xc(t.prefix):void 0,filters:t.filters?t.filters.map((t=>e=>t(_c(e)))):void 0,orders:t.orders?t.orders.map((t=>(e,i)=>t(_c(e),_c(i)))):void 0}}(t),e))yield _c(i)}async get(t,e){return this.child.get(wc(t),e)}async*getMany(t,e){for await(const i of t)yield this.get(i,e)}async put(t,e,i){await this.child.put(wc(t),e,i)}async*putMany(t,e){const i=Kh();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{const r=this.child;await Ti(this.child.putMany(async function*(){for await(const n of t){const t=wc(n.key);await r.has(t,e)||(yield{key:t,value:n.value}),i.push(n)}}())),i.end()}catch(t){i.end(t)}})),yield*i}has(t,e){return this.child.has(wc(t),e)}delete(t,e){return this.child.delete(wc(t),e)}deleteMany(t,e){const i=Kh();return Ti(this.child.deleteMany(async function*(){for await(const e of t)yield wc(e),i.push(e);i.end()}(),e)).catch((t=>{i.end(t)})),i}}function Sc(t,e,i){const r=i.path||"ipfs";return function(t,i,r,n){return new dc(t,(t=>e.getCodec(t)),r,n)}(r,0,{root:new mc(r,{prefix:"",version:2}),blocks:new Ec(new mc(`${r}/blocks`,{prefix:"",version:2})),datastore:new mc(`${r}/datastore`,{prefix:"",version:2}),keys:new mc(`${r}/keys`,{prefix:"",version:2}),pins:new mc(`${r}/pins`,{prefix:"",version:2})},{autoMigrate:i.autoMigrate,onMigrationProgress:i.onMigrationProgress||t,repoLock:Jh})}var Tc=i(95391);const Ac={gossipsub:Tc};var Cc=i(27780),kc=i(82786);const Rc=t=>Promise.reject(new Error(`No base found for "${t}"`));class Pc{constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||Rc;for(const e of t.bases)this.addBase(e)}addBase(t){if(this._basesByName[t.name]||this._basesByPrefix[t.prefix])throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t])return this._basesByName[t];if(this._basesByPrefix[t])return this._basesByPrefix[t];const e=await this._loadBase(t);return null==this._basesByName[e.name]&&null==this._basesByPrefix[e.prefix]&&this.addBase(e),e}listBases(){return Object.values(this._basesByName)}}const Ic=t=>Promise.reject(new Error(`No codec found for "${t}"`));class Oc{constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||Ic;for(const e of t.codecs)this.addCodec(e)}addCodec(t){if(this._codecsByName[t.name]||this._codecsByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const e="string"==typeof t?this._codecsByName:this._codecsByCode;if(e[t])return e[t];const i=await this._loadCodec(t);return null==e[t]&&this.addCodec(i),i}listCodecs(){return Object.values(this._codecsByName)}}const Mc=t=>Promise.reject(new Error(`No hasher found for "${t}"`));class Dc{constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||Mc;for(const e of t.hashers)this.addHasher(e)}addHasher(t){if(this._hashersByName[t.name]||this._hashersByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const e="string"==typeof t?this._hashersByName:this._hashersByCode;if(e[t])return e[t];const i=await this._loadHasher(t);return null==e[t]&&this.addHasher(i),i}listHashers(){return Object.values(this._hashersByName)}}function Bc(t){try{t=as(new $i.Multiaddr(t))}catch(t){}return t.toString()}const Lc=l("ipfs-http-client:lib:error-handler"),Nc=h.bind({ignoreUndefined:!0}),Uc=c.isBrowser||c.isWebWorker?location.protocol:"http",Fc=c.isBrowser||c.isWebWorker?location.hostname:"localhost",zc=c.isBrowser||c.isWebWorker?location.port:"5001",jc=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){const i=await t.json();Lc(i),e=i.Message||i.message}else e=await t.text()}catch(t){Lc("Failed to parse error response",t),e=t.message}let i=new se.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(i=new se.TimeoutError),e&&e.includes("context deadline exceeded")&&(i=new se.TimeoutError)),e&&e.includes("request timed out")&&(i=new se.TimeoutError),e&&(i.message=e),i},Vc=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Gc=t=>t.replace(Vc,(function(t){return"-"+t.toLowerCase()}));class Hc extends se{constructor(t={}){const e=((t={})=>{let e,i,r={};if("string"==typeof t||$i.Multiaddr.isMultiaddr(t))e=new URL(Bc(t));else if(t instanceof URL)e=t;else if("string"==typeof t.url||$i.Multiaddr.isMultiaddr(t.url))e=new URL(Bc(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};const i=(r.protocol||Uc).replace(":",""),n=(r.host||Fc).split(":")[0],s=r.port||zc;e=new URL(`${i}://${n}:${s}`)}if(r.apiPath?e.pathname=r.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),c.isNode){const t=void 0;i=r.agent||new t({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:i}})(t);var i;super({timeout:(i=e.timeout||0,("string"==typeof i?Gt(i):i)||void 0),headers:e.headers,base:`${e.url}`,handleError:jc,transformSearchParams:t=>{const e=new URLSearchParams;for(const[i,r]of t)"undefined"!==r&&"null"!==r&&"signal"!==i&&e.append(Gc(i),r),"timeout"!==i||isNaN(r)||e.append(Gc(i),r);return e},agent:e.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=(t,i={})=>("string"!=typeof t||t.startsWith("/")||(t=`${e.url}/${t}`),r.call(this,t,Nc(i,{method:"POST"})))}}se.HTTPError;const Yc=t=>e=>t(new Hc(e),e);function Kc(t){if(null!=t)return"string"==typeof t?t:t.toString(8).padStart(4,"0")}function Wc(t){if(null==t)return;let e;if(null!=t.secs&&(e={secs:t.secs,nsecs:t.nsecs}),null!=t.Seconds&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const i=t.getTime(),r=Math.floor(i/1e3);e={secs:r,nsecs:1e3*(i-1e3*r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e&&null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw u(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function Xc({arg:t,searchParams:e,hashAlg:i,mtime:r,mode:n,...s}={}){e&&(s={...s,...e}),i&&(s.hash=i),null!=r&&(r=Wc(r),s.mtime=r.secs,s.mtimeNsecs=r.nsecs),null!=n&&(s.mode=Kc(n)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),null==t?t=[]:Array.isArray(t)||(t=[t]);const o=new URLSearchParams(s);return t.forEach((t=>o.append("arg",t))),o}const qc=Yc((t=>async function(e={}){return((await(await t.post("bitswap/wantlist",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json()).Keys||[]).map((t=>A.CID.parse(t["/"])))})),$c=Yc((t=>async function(e,i={}){return((await(await t.post("bitswap/wantlist",{signal:i.signal,searchParams:Xc({...i,peer:e.toString()}),headers:i.headers})).json()).Keys||[]).map((t=>A.CID.parse(t["/"])))})),Jc=Yc((t=>async function(e={}){const i=await t.post("bitswap/stat",{searchParams:Xc(e),signal:e.signal,headers:e.headers});return function(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map((t=>A.CID.parse(t["/"]))),peers:t.Peers||[],blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}(await i.json())})),Zc=Yc((t=>async function(e,i={}){return(await t.post("bitswap/unwant",{signal:i.signal,searchParams:Xc({arg:e.toString(),...i}),headers:i.headers})).json()}));function Qc(t){return{wantlist:qc(t),wantlistForPeer:$c(t),unwant:Zc(t),stat:Jc(t)}}const tl=Yc((t=>async function(e,i={}){const r=await t.post("block/get",{signal:i.signal,searchParams:Xc({arg:e.toString(),...i}),headers:i.headers});return new Uint8Array(await r.arrayBuffer())}));async function el(t){if(hr(t))return new Blob([t]);if("string"==typeof t||t instanceof String)return new Blob([t.toString()]);if(cr(t))return t;if(ur(t)&&(t=nr(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=or(t),{value:i,done:r}=await e.peek();if(r)return il(e);if(e.push(i),Number.isInteger(i))return new Blob([Uint8Array.from(await ar(e))]);if(hr(i)||"string"==typeof i||i instanceof String)return il(e)}throw u(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function il(t){const e=[];for await(const i of t)e.push(i);return new Blob(e)}function rl(t){if(null!=t)return"string"==typeof t?t:t.toString(8).padStart(4,"0")}async function nl(t,e,i={}){const r=[],n=new FormData;let s=0,o=0;for await(const{content:e,path:i,mode:a,mtime:h}of $r(t,el)){let t="";s>0&&(t=`-${s}`);let c=(e?"file":"dir")+t;const l=[];if(null!=a&&l.push(`mode=${rl(a)}`),null!=h){const{secs:t,nsecs:e}=h;l.push(`mtime=${t}`),null!=e&&l.push(`mtime-nsecs=${e}`)}if(l.length&&(c=`${c}?${l.join("&")}`),e){n.set(c,e,null!=i?encodeURIComponent(i):void 0);const t=o+e.size;r.push({name:i,start:o,end:t}),o=t}else{if(null==i)throw new Error("path or content or both must be set");n.set(c,new File([""],encodeURIComponent(i),{type:"application/x-directory"}))}s++}return{total:o,parts:r,headers:i,body:n}}function sl(...t){return(0,Ft.anySignal)(function(t){return t.filter(Boolean)}(t))}const ol=Yc((t=>async function e(i,r={}){const n=sl((new AbortController).signal,r.signal);let s;try{const e=await t.post("block/put",{signal:n,searchParams:Xc(r),...await nl([i],0,r.headers)});s=await e.json()}catch(t){if("dag-pb"===r.format)return e(i,{...r,format:"protobuf"});if("dag-cbor"===r.format)return e(i,{...r,format:"cbor"});throw t}return A.CID.parse(s.Key)})),al=Yc((t=>async function*(e,i={}){Array.isArray(e)||(e=[e]);const r=await t.post("block/rm",{signal:i.signal,searchParams:Xc({arg:e.map((t=>t.toString())),"stream-channels":!0,...i}),headers:i.headers});for await(const t of r.ndjson())yield hl(t)}));function hl(t){const e={cid:A.CID.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}const cl=Yc((t=>async function(e,i={}){const r=await t.post("block/stat",{signal:i.signal,searchParams:Xc({arg:e.toString(),...i}),headers:i.headers}),n=await r.json();return{cid:A.CID.parse(n.Key),size:n.Size}}));function ll(t){return{get:tl(t),put:ol(t),rm:al(t),stat:cl(t)}}const ul=Yc((t=>async function(e,i={}){const r=await t.post("bootstrap/add",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),{Peers:n}=await r.json();return{Peers:n.map((t=>new $i.Multiaddr(t)))}})),dl=Yc((t=>async function(e={}){const i=await t.post("bootstrap/rm",{signal:e.signal,searchParams:Xc({...e,all:!0}),headers:e.headers}),{Peers:r}=await i.json();return{Peers:r.map((t=>new $i.Multiaddr(t)))}})),fl=Yc((t=>async function(e={}){const i=await t.post("bootstrap/list",{signal:e.signal,searchParams:Xc(e),headers:e.headers}),{Peers:r}=await i.json();return{Peers:r.map((t=>new $i.Multiaddr(t)))}})),pl=Yc((t=>async function(e={}){const i=await t.post("bootstrap/add",{signal:e.signal,searchParams:Xc({...e,default:!0}),headers:e.headers}),{Peers:r}=await i.json();return{Peers:r.map((t=>new $i.Multiaddr(t)))}})),gl=Yc((t=>async function(e,i={}){const r=await t.post("bootstrap/rm",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),{Peers:n}=await r.json();return{Peers:n.map((t=>new $i.Multiaddr(t)))}}));function yl(t){return{add:ul(t),clear:dl(t),list:fl(t),reset:pl(t),rm:gl(t)}}const ml=Yc((t=>async function(e,i={}){const r=await t.post("config/profile/apply",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),n=await r.json();return{original:n.OldCfg,updated:n.NewCfg}}));function vl(t){if(null==t)return t;const e=/^[A-Z]+$/;return Object.keys(t).reduce(((i,r)=>(e.test(r)?i[r.toLowerCase()]=t[r]:e.test(r[0])?i[r[0].toLowerCase()+r.slice(1)]=t[r]:i[r]=t[r],i)),{})}const bl=Yc((t=>async function(e={}){const i=await t.post("config/profile/list",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return(await i.json()).map((t=>vl(t)))}));function wl(t){return{apply:ml(t),list:bl(t)}}const _l=Yc((t=>async(e,i={})=>{if(!e)throw new Error("key argument is required");const r=await t.post("config",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});return(await r.json()).Value})),xl=Yc((t=>async(e={})=>{const i=await t.post("config/show",{signal:e.signal,searchParams:Xc({...e}),headers:e.headers});return await i.json()})),El=Yc((t=>async(e,i={})=>{const r=sl((new AbortController).signal,i.signal),n=await t.post("config/replace",{signal:r,searchParams:Xc(i),...await nl([(0,Bt.fromString)(JSON.stringify(e))],0,i.headers)});await n.text()})),Sl=Yc((t=>async(e,i,r={})=>{if("string"!=typeof e)throw new Error("Invalid key type");const n={...r,...Tl(e,i)},s=await t.post("config",{signal:r.signal,searchParams:Xc(n),headers:r.headers});await s.text()})),Tl=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function Al(t){return{getAll:xl(t),get:_l(t),set:Sl(t),replace:El(t),profiles:wl(t)}}const Cl=Yc((t=>async function*(e,i={}){const r=await t.post("dag/export",{signal:i.signal,searchParams:Xc({arg:e.toString()}),headers:i.headers});yield*r.iterator()}));async function*kl(t,e,i,r,n){const s=async t=>{const e=await i.getCodec(t.code),s=await r(t,n);return e.decode(s)},o=e.split("/").filter(Boolean);let a=await s(t),h=t;for(;o.length;){const t=o.shift();if(!t)throw u(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,t))throw u(new Error(`no link named "${t}" under ${h}`),"ERR_NO_LINK");a=a[t],yield{value:a,remainderPath:o.join("/")};const i=A.CID.asCID(a);i&&(h=i,a=await s(a))}yield{value:a,remainderPath:""}}const Rl=(t,e)=>{const i=Yc(((e,i)=>{const r=tl(i);return async(e,i={})=>{if(i.path){const n=i.localResolve?await es(kl(e,i.path,t,r,i)):await le(kl(e,i.path,t,r,i));if(!n)throw u(new Error("Not found"),"ERR_NOT_FOUND");return n}const n=await t.getCodec(e.code),s=await r(e,i);return{value:n.decode(s),remainderPath:""}}}));return i(e)},Pl=Yc((t=>async function*(e,i={}){const r=sl((new AbortController).signal,i.signal),{headers:n,body:s}=await nl(e,0,i.headers),o=await t.post("dag/import",{signal:r,headers:n,body:s,searchParams:Xc({"pin-roots":i.pinRoots})});for await(const{Root:t}of o.ndjson())if(void 0!==t){const{Cid:{"/":e},PinErrorMsg:i}=t;yield{root:{cid:A.CID.parse(e),pinErrorMsg:i}}}})),Il=(t,e)=>{const i=Yc((e=>async(i,r={})=>{const n={storeCodec:"dag-cbor",hashAlg:"sha2-256",...r};let s;if(n.inputCodec){if(!(i instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=i}else s=(await t.getCodec(n.storeCodec)).encode(i),n.inputCodec=n.storeCodec;const o=sl((new AbortController).signal,n.signal),a=await e.post("dag/put",{timeout:n.timeout,signal:o,searchParams:Xc(n),...await nl([s],0,n.headers)}),h=await a.json();return A.CID.parse(h.Cid["/"])}));return i(e)},Ol=Yc((t=>async(e,i={})=>{const r=await t.post("dag/resolve",{signal:i.signal,searchParams:Xc({arg:`${e}${i.path?`/${i.path}`.replace(/\/[/]+/g,"/"):""}`,...i}),headers:i.headers}),n=await r.json();return{cid:A.CID.parse(n.Cid["/"]),remainderPath:n.RemPath}}));function Ml(t,e){return{export:Cl(e),get:Rl(t,e),import:Pl(e),put:Il(t,e),resolve:Ol(e)}}const Dl=t=>{if(0===t.Type)return{to:t.ID,name:"SENDING_QUERY",type:t.Type};if(1===t.Type)return{from:t.ID,name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map((({ID:t,Addrs:e})=>({id:t,multiaddrs:e.map((t=>new $i.Multiaddr(t)))}))),providers:(t.Responses||[]).map((({ID:t,Addrs:e})=>({id:t,multiaddrs:e.map((t=>new $i.Multiaddr(t)))})))};if(2===t.Type){let e={id:t.ID,multiaddrs:[]};return t.Responses&&t.Responses.length&&(e={id:t.Responses[0].ID,multiaddrs:t.Responses[0].Addrs.map((t=>new $i.Multiaddr(t)))}),{from:t.ID,name:"FINAL_PEER",type:t.Type,peer:e}}if(3===t.Type)return{from:t.ID,name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(4===t.Type)return{from:t.ID,name:"PROVIDER",type:t.Type,providers:t.Responses.map((({ID:t,Addrs:e})=>({id:t,multiaddrs:e.map((t=>new $i.Multiaddr(t)))})))};if(5===t.Type)return{from:t.ID,name:"VALUE",type:t.Type,value:(0,Bt.fromString)(t.Extra,"base64pad")};if(6===t.Type){const e=t.Responses.map((({ID:t})=>t));if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(7===t.Type)return{name:"DIALING_PEER",type:t.Type,peer:t.ID};throw new Error("Unknown DHT event type")},Bl=Yc((t=>async function*(e,i={}){const r=await t.post("dht/findpeer",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});for await(const t of r.ndjson())yield Dl(t)})),Ll=Yc((t=>async function*(e,i={}){const r=await t.post("dht/findprovs",{signal:i.signal,searchParams:Xc({arg:e.toString(),...i}),headers:i.headers});for await(const t of r.ndjson())yield Dl(t)})),Nl=Yc((t=>async function*(e,i={}){const r=await t.post("dht/get",{signal:i.signal,searchParams:Xc({arg:e instanceof Uint8Array?(0,me.toString)(e):e.toString(),...i}),headers:i.headers});for await(const t of r.ndjson())yield Dl(t)})),Ul=Yc((t=>async function*(e,i={recursive:!1}){const r=Array.isArray(e)?e:[e],n=await t.post("dht/provide",{signal:i.signal,searchParams:Xc({arg:r.map((t=>t.toString())),...i}),headers:i.headers});for await(const t of n.ndjson())yield Dl(t)})),Fl=Yc((t=>async function*(e,i,r={}){const n=sl((new AbortController).signal,r.signal),s=await t.post("dht/put",{signal:n,searchParams:Xc({arg:e instanceof Uint8Array?(0,me.toString)(e):e.toString(),...r}),...await nl([i],0,r.headers)});for await(const t of s.ndjson())yield Dl(t)})),zl=Yc((t=>async function*(e,i={}){const r=await t.post("dht/query",{signal:i.signal,searchParams:Xc({arg:e.toString(),...i}),headers:i.headers});for await(const t of r.ndjson())yield Dl(t)}));function jl(t){return{findPeer:Bl(t),findProvs:Ll(t),get:Nl(t),provide:Ul(t),put:Fl(t),query:zl(t)}}const Vl=Yc((t=>async function(e={}){return(await t.post("diag/cmds",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json()})),Gl=Yc((t=>async function(e={}){return(await t.post("diag/net",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json()})),Hl=Yc((t=>async function(e={}){return(await t.post("diag/sys",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json()}));function Yl(t){return{cmds:Vl(t),net:Gl(t),sys:Hl(t)}}const Kl=Yc((t=>async function(e,i,r={}){const n=await t.post("files/chmod",{signal:r.signal,searchParams:Xc({arg:e,mode:i,...r}),headers:r.headers});await n.text()})),Wl=Yc((t=>async function(e,i,r={}){const n=Array.isArray(e)?e:[e],s=await t.post("files/cp",{signal:r.signal,searchParams:Xc({arg:n.concat(i).map((t=>A.CID.asCID(t)?`/ipfs/${t}`:t)),...r}),headers:r.headers});await s.text()})),Xl=Yc((t=>async function(e,i={}){if(!e||"string"!=typeof e)throw new Error("ipfs.files.flush requires a path");const r=await t.post("files/flush",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),n=await r.json();return A.CID.parse(n.Cid)}));function ql(t){const e=vl(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}const $l=Yc((t=>async function*(e,i={}){if(!e)throw new Error("ipfs.files.ls requires a path");const r=await t.post("files/ls",{signal:i.signal,searchParams:Xc({arg:A.CID.asCID(e)?`/ipfs/${e}`:e,long:!0,...i,stream:!0}),headers:i.headers});for await(const t of r.ndjson())if("Entries"in t)for(const e of t.Entries||[])yield Jl(ql(e));else yield Jl(ql(t))}));function Jl(t){return t.hash&&(t.cid=A.CID.parse(t.hash)),delete t.hash,t.type=1===t.type?"directory":"file",t}const Zl=Yc((t=>async function(e,i={}){const r=await t.post("files/mkdir",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});await r.text()})),Ql=Yc((t=>async function(e,i,r={}){Array.isArray(e)||(e=[e]);const n=await t.post("files/mv",{signal:r.signal,searchParams:Xc({arg:e.concat(i),...r}),headers:r.headers});await n.text()}));var tu=i(50590);const eu=Yc((t=>async function*(e,i={}){const r=await t.post("files/read",{signal:i.signal,searchParams:Xc({arg:e,count:i.length,...i}),headers:i.headers});yield*tu(r.body)})),iu=Yc((t=>async function(e,i={}){const r=await t.post("files/rm",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),n=await r.text();if(""!==n){const t=new se.HTTPError(r);throw t.message=n,t}})),ru=Yc((t=>async function(e,i={}){const r=await t.post("files/stat",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),n=await r.json();return n.WithLocality=n.WithLocality||!1,(s=ql(n)).cid=A.CID.parse(s.hash),delete s.hash,s;var s})),nu=Yc((t=>async function(e,i={}){const r=await t.post("files/touch",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});await r.text()})),su=Yc((t=>async function(e,i,r={}){const n=sl((new AbortController).signal,r.signal),s=await t.post("files/write",{signal:n,searchParams:Xc({arg:e,streamChannels:!0,count:r.length,...r}),...await nl([{content:i,path:"arg",mode:Kc(r.mode),mtime:Wc(r.mtime)}],0,r.headers)});await s.text()}));function ou(t){return{chmod:Kl(t),cp:Wl(t),flush:Xl(t),ls:$l(t),mkdir:Zl(t),mv:Ql(t),read:eu(t),rm:iu(t),stat:ru(t),touch:nu(t),write:su(t)}}const au=Yc((t=>async(t,e,i={})=>{throw u(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),hu=Yc((t=>async function(e,i={type:"rsa",size:2048}){const r=await t.post("key/gen",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});return vl(await r.json())})),cu=Yc((t=>async function(e,i,r,n={}){const s=await t.post("key/import",{signal:n.signal,searchParams:Xc({arg:e,pem:i,password:r,...n}),headers:n.headers});return vl(await s.json())})),lu=Yc((t=>async(t,e={})=>{throw u(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),uu=Yc((t=>async function(e={}){const i=await t.post("key/list",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return((await i.json()).Keys||[]).map((t=>vl(t)))})),du=Yc((t=>async function(e,i,r={}){const n=await t.post("key/rename",{signal:r.signal,searchParams:Xc({arg:[e,i],...r}),headers:r.headers});return vl(await n.json())})),fu=Yc((t=>async function(e,i={}){const r=await t.post("key/rm",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});return vl((await r.json()).Keys[0])}));function pu(t){return{export:au(t),gen:hu(t),import:cu(t),info:lu(t),list:uu(t),rename:du(t),rm:fu(t)}}const gu=Yc((t=>async function(e,i,r={}){const n=await t.post("log/level",{signal:r.signal,searchParams:Xc({arg:[e,i],...r}),headers:r.headers});return vl(await n.json())})),yu=Yc((t=>async function(e={}){const i=await t.post("log/ls",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return(await i.json()).Strings})),mu=Yc((t=>async function*(e={}){const i=await t.post("log/tail",{signal:e.signal,searchParams:Xc(e),headers:e.headers});yield*i.ndjson()}));function vu(t){return{level:gu(t),ls:yu(t),tail:mu(t)}}const bu=Yc((t=>async function(e,i={}){const r=await t.post("name/publish",{signal:i.signal,searchParams:Xc({arg:`${e}`,...i}),headers:i.headers});return vl(await r.json())})),wu=Yc((t=>async function*(e,i={}){const r=await t.post("name/resolve",{signal:i.signal,searchParams:Xc({arg:e,stream:!0,...i}),headers:i.headers});for await(const t of r.ndjson())yield t.Path})),_u=Yc((t=>async function(e,i={}){const r=await t.post("name/pubsub/cancel",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});return vl(await r.json())})),xu=Yc((t=>async function(e={}){const i=await t.post("name/pubsub/state",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return vl(await i.json())})),Eu=Yc((t=>async function(e={}){const i=await t.post("name/pubsub/subs",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return(await i.json()).Strings||[]}));function Su(t){return{cancel:_u(t),state:xu(t),subs:Eu(t)}}function Tu(t){return{publish:bu(t),resolve:wu(t),pubsub:Su(t)}}const Au=Yc((t=>async function(e,i={}){const r=await t.post("object/data",{signal:i.signal,searchParams:Xc({arg:`${e instanceof Uint8Array?A.CID.decode(e):e}`,...i}),headers:i.headers}),n=await r.arrayBuffer();return new Uint8Array(n,0,n.byteLength)})),Cu=Yc((t=>async function(e,i={}){const r=await t.post("object/get",{signal:i.signal,searchParams:Xc({arg:`${e instanceof Uint8Array?A.CID.decode(e):e}`,dataEncoding:"base64",...i}),headers:i.headers}),n=await r.json();return{Data:(0,Bt.fromString)(n.Data,"base64pad"),Links:(n.Links||[]).map((t=>({Name:t.Name,Hash:A.CID.parse(t.Hash),Tsize:t.Size})))}})),ku=Yc((t=>async function(e,i={}){const r=await t.post("object/links",{signal:i.signal,searchParams:Xc({arg:`${e instanceof Uint8Array?A.CID.decode(e):e}`,...i}),headers:i.headers});return((await r.json()).Links||[]).map((t=>({Name:t.Name,Tsize:t.Size,Hash:A.CID.parse(t.Hash)})))})),Ru=Yc((t=>async function(e={}){const i=await t.post("object/new",{signal:e.signal,searchParams:Xc({arg:e.template,...e}),headers:e.headers}),{Hash:r}=await i.json();return A.CID.parse(r)})),Pu=(t,e)=>{const i=Yc((i=>{const r=Il(t,e);return async function(t,e={}){return r(t,{...e,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}}));return i(e)},Iu=Yc((t=>async function(e,i={}){const r=await t.post("object/stat",{signal:i.signal,searchParams:Xc({arg:`${e}`,...i}),headers:i.headers}),n=await r.json();return{...n,Hash:A.CID.parse(n.Hash)}})),Ou=Yc((t=>async function(e,i,r={}){const n=await t.post("object/patch/add-link",{signal:r.signal,searchParams:Xc({arg:[`${e}`,i.Name||i.name||"",(i.Hash||i.cid||"").toString()||null],...r}),headers:r.headers}),{Hash:s}=await n.json();return A.CID.parse(s)})),Mu=Yc((t=>async function(e,i,r={}){const n=sl((new AbortController).signal,r.signal),s=await t.post("object/patch/append-data",{signal:n,searchParams:Xc({arg:`${e}`,...r}),...await nl([i],0,r.headers)}),{Hash:o}=await s.json();return A.CID.parse(o)})),Du=Yc((t=>async function(e,i,r={}){const n=await t.post("object/patch/rm-link",{signal:r.signal,searchParams:Xc({arg:[`${e}`,i.Name||i.name||null],...r}),headers:r.headers}),{Hash:s}=await n.json();return A.CID.parse(s)})),Bu=Yc((t=>async function(e,i,r={}){const n=sl((new AbortController).signal,r.signal),s=await t.post("object/patch/set-data",{signal:n,searchParams:Xc({arg:[`${e}`],...r}),...await nl([i],0,r.headers)}),{Hash:o}=await s.json();return A.CID.parse(o)}));function Lu(t){return{addLink:Ou(t),appendData:Mu(t),rmLink:Du(t),setData:Bu(t)}}function Nu(t,e){return{data:Au(e),get:Cu(e),links:ku(e),new:Ru(e),put:Pu(t,e),stat:Iu(e),patch:Lu(e)}}const Uu=Yc((t=>async function*(e,i={}){for await(const{path:r,recursive:n,metadata:s}of ue(e)){const e=await t.post("pin/add",{signal:i.signal,searchParams:Xc({...i,arg:r,recursive:n,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:i.headers});for await(const t of e.ndjson())if(t.Pins)for(const e of t.Pins)yield A.CID.parse(e);else yield A.CID.parse(t)}}));function Fu(t){const e=Uu(t);return Yc((()=>async function(t,i={}){return le(e([{path:t,...i}],i))}))(t)}function zu(t,e,i){const r={type:t,cid:A.CID.parse(e)};return i&&(r.metadata=i),r}const ju=Yc((t=>async function*(e={}){let i=[];e.paths&&(i=Array.isArray(e.paths)?e.paths:[e.paths]);const r=await t.post("pin/ls",{signal:e.signal,searchParams:Xc({...e,arg:i.map((t=>`${t}`)),stream:!0}),headers:e.headers});for await(const t of r.ndjson()){if(t.Keys){for(const e of Object.keys(t.Keys))yield zu(t.Keys[e].Type,e,t.Keys[e].Metadata);return}yield zu(t.Type,t.Cid,t.Metadata)}})),Vu=Yc((t=>async function*(e,i={}){for await(const{path:r,recursive:n}of ue(e)){const e=new URLSearchParams(i.searchParams);e.append("arg",`${r}`),null!=n&&e.set("recursive",String(n));const s=await t.post("pin/rm",{signal:i.signal,headers:i.headers,searchParams:Xc({...i,arg:`${r}`,recursive:n})});for await(const t of s.ndjson())t.Pins?yield*t.Pins.map((t=>A.CID.parse(t))):yield A.CID.parse(t)}})),Gu=t=>{const e=Vu(t);return Yc((()=>async function(t,i={}){return le(e([{path:t,...i}],i))}))(t)},Hu=({Name:t,Status:e,Cid:i})=>({cid:A.CID.parse(i),name:t,status:e}),Yu=t=>{if("string"==typeof t&&""!==t)return t;throw new TypeError("service name must be passed")},Ku=t=>{if(A.CID.asCID(t))return t.toString();throw new TypeError("CID instance expected instead of "+typeof t)},Wu=({service:t,cid:e,name:i,status:r,all:n})=>{const s=Xc({service:Yu(t),name:i,force:!!n||void 0});if(e)for(const t of e)s.append("cid",Ku(t));if(r)for(const t of r)s.append("status",t);return s},Xu=({cid:t,service:e,background:i,name:r,origins:n})=>{const s=Xc({arg:Ku(t),service:Yu(e),name:r,background:!!i||void 0});if(n)for(const t of n)s.append("origin",t.toString());return s};function qu(t){return async function(e,{timeout:i,signal:r,headers:n,...s}){const o=await t.post("pin/remote/add",{timeout:i,signal:r,headers:n,searchParams:Xu({cid:e,...s})});return Hu(await o.json())}}function $u(t){return async function*({timeout:e,signal:i,headers:r,...n}){const s=await t.post("pin/remote/ls",{timeout:e,signal:i,headers:r,searchParams:Wu(n)});for await(const t of s.ndjson())yield Hu(t)}}function Ju(t){return async function({timeout:e,signal:i,headers:r,...n}){await t.post("pin/remote/rm",{timeout:e,signal:i,headers:r,searchParams:Wu({...n,all:!1})})}}function Zu(t){return async function({timeout:e,signal:i,headers:r,...n}){await t.post("pin/remote/rm",{timeout:e,signal:i,headers:r,searchParams:Wu({...n,all:!0})})}}function Qu(t){const e=String(t);if("undefined"===e)throw Error("endpoint is required");return"/"===e[e.length-1]?e.slice(0,-1):e}function td(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:ed(t.Stat)}}}function ed(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:i,Queued:r,Failed:n}=t.PinCount;return{status:"valid",pinCount:{queued:r,pinning:e,pinned:i,failed:n}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function id(t){return async function(e,i){const{endpoint:r,key:n,headers:s,timeout:o,signal:a}=i;await t.post("pin/remote/service/add",{timeout:o,signal:a,searchParams:Xc({arg:[e,Qu(r),n]}),headers:s})}}function rd(t){return async function(e={}){const{stat:i,headers:r,timeout:n,signal:s}=e,o=await t.post("pin/remote/service/ls",{timeout:n,signal:s,headers:r,searchParams:!0===i?Xc({stat:i}):void 0}),{RemoteServices:a}=await o.json();return a.map(td)}}function nd(t){return async function(e,i={}){await t.post("pin/remote/service/rm",{signal:i.signal,headers:i.headers,searchParams:Xc({arg:e})})}}function sd(t){const e=new Hc(t);return{add:id(e),ls:rd(e),rm:nd(e)}}function od(t){const e=new Hc(t);return{add:qu(e),ls:$u(e),rm:Ju(e),rmAll:Zu(e),service:sd(t)}}function ad(t){return{addAll:Uu(t),add:Fu(t),ls:ju(t),rmAll:Vu(t),rm:Gu(t),remote:od(t)}}const hd=t=>Array.isArray(t)?t.map(cd):t,cd=t=>(0,me.toString)(ld(t)),ld=t=>at.base64url.decode(t),ud=t=>at.base64url.encode((0,Bt.fromString)(t)),dd=Yc((t=>async function(e={}){const{Strings:i}=await(await t.post("pubsub/ls",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json();return hd(i)||[]})),fd=Yc((t=>async function(e,i={}){const r=await t.post("pubsub/peers",{signal:i.signal,searchParams:Xc({arg:ud(e),...i}),headers:i.headers}),{Strings:n}=await r.json();return n||[]})),pd=Yc((t=>async function(e,i,r={}){const n=Xc({arg:ud(e),...r}),s=sl((new AbortController).signal,r.signal),o=await t.post("pubsub/pub",{signal:s,searchParams:n,...await nl([i],0,r.headers)});await o.text()})),gd=l("ipfs-http-client:pubsub:subscribe"),yd=(t,e)=>Yc((t=>async function(i,r,n={}){let s,o;n.signal=e.subscribe(i,r,n.signal);const a=new Promise(((t,e)=>{s=t,o=e})),h=setTimeout((()=>s()),1e3);return t.post("pubsub/sub",{signal:n.signal,searchParams:Xc({arg:ud(i),...n}),headers:n.headers}).catch((t=>{e.unsubscribe(i,r),o(t)})).then((t=>{clearTimeout(h),t&&(async function(t,{onMessage:e,onEnd:i,onError:r}){r=r||gd;try{for await(const i of t.ndjson())try{if(!i.from)continue;e({from:i.from,data:ld(i.data),seqno:ld(i.seqno),topicIDs:hd(i.topicIDs)})}catch(t){t.message=`Failed to parse pubsub message: ${t.message}`,r(t,!1,i)}}catch(t){md(t)||r(t,!0)}finally{i()}}(t,{onMessage:r,onEnd:()=>e.unsubscribe(i,r),onError:n.onError}),s())})),a}))(t),md=t=>{switch(t.type){case"aborted":case"abort":return!0;default:return"AbortError"===t.name}};class vd{constructor(){this._subs=new Map}subscribe(t,e,i){const r=this._subs.get(t)||[];if(r.find((t=>t.handler===e)))throw new Error(`Already subscribed to ${t} with this handler`);const n=new AbortController;return this._subs.set(t,[{handler:e,controller:n}].concat(r)),i&&i.addEventListener("abort",(()=>this.unsubscribe(t,e))),n.signal}unsubscribe(t,e){const i=this._subs.get(t)||[];let r;e?(this._subs.set(t,i.filter((t=>t.handler!==e))),r=i.filter((t=>t.handler===e))):(this._subs.set(t,[]),r=i),(this._subs.get(t)||[]).length||this._subs.delete(t),r.forEach((t=>t.controller.abort()))}}function bd(t){const e=new vd;return{ls:dd(t),peers:fd(t),publish:pd(t),subscribe:yd(t,e),unsubscribe:(i=e,async function(t,e){i.unsubscribe(t,e)})};var i}const wd=Yc((t=>async function*(e={}){const i=await t.post("refs/local",{signal:e.signal,transform:vl,searchParams:Xc(e),headers:e.headers});yield*i.ndjson()})),_d=Yc(((t,e)=>Object.assign((async function*(e,i={}){const r=Array.isArray(e)?e:[e],n=await t.post("refs",{signal:i.signal,searchParams:Xc({arg:r.map((t=>`${t instanceof Uint8Array?A.CID.decode(t):t}`)),...i}),headers:i.headers,transform:vl});yield*n.ndjson()}),{local:wd(e)}))),xd=Yc((t=>async function*(e={}){const i=await t.post("repo/gc",{signal:e.signal,searchParams:Xc(e),headers:e.headers,transform:t=>({err:t.Error?new Error(t.Error):null,cid:(t.Key||{})["/"]?A.CID.parse(t.Key["/"]):null})});yield*i.ndjson()})),Ed=Yc((t=>async function(e={}){const i=await t.post("repo/stat",{signal:e.signal,searchParams:Xc(e),headers:e.headers}),r=await i.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}})),Sd=Yc((t=>async function(e={}){return(await(await t.post("repo/version",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json()).Version}));function Td(t){return{gc:xd(t),stat:Ed(t),version:Sd(t)}}const Ad=Yc((t=>async function*(e={}){const i=await t.post("stats/bw",{signal:e.signal,searchParams:Xc(e),headers:e.headers,transform:t=>({totalIn:BigInt(t.TotalIn),totalOut:BigInt(t.TotalOut),rateIn:parseFloat(t.RateIn),rateOut:parseFloat(t.RateOut)})});yield*i.ndjson()}));function Cd(t){return{bitswap:Jc(t),repo:Ed(t),bw:Ad(t)}}const kd=Yc((t=>async function(e={}){const i=await t.post("swarm/addrs",{signal:e.signal,searchParams:Xc(e),headers:e.headers}),{Addrs:r}=await i.json();return Object.keys(r).map((t=>({id:t,addrs:(r[t]||[]).map((t=>new $i.Multiaddr(t)))})))})),Rd=Yc((t=>async function(e,i={}){const r=await t.post("swarm/connect",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),{Strings:n}=await r.json();return n||[]})),Pd=Yc((t=>async function(e,i={}){const r=await t.post("swarm/disconnect",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),{Strings:n}=await r.json();return n||[]})),Id=Yc((t=>async function(e={}){const i=await t.post("swarm/addrs/local",{signal:e.signal,searchParams:Xc(e),headers:e.headers}),{Strings:r}=await i.json();return(r||[]).map((t=>new $i.Multiaddr(t)))})),Od=Yc((t=>async function(e={}){const i=await t.post("swarm/peers",{signal:e.signal,searchParams:Xc(e),headers:e.headers}),{Peers:r}=await i.json();return(r||[]).map((t=>({addr:new $i.Multiaddr(t.Addr),peer:t.Peer,muxer:t.Muxer,latency:t.Latency,streams:t.Streams,direction:null==t.Direction?void 0:0===t.Direction?"inbound":"outbound"})))}));function Md(t){return{addrs:kd(t),connect:Rd(t),disconnect:Pd(t),localAddrs:Id(t),peers:Od(t)}}const Dd=Yc((t=>async function*(e,i={}){const r=sl((new AbortController).signal,i.signal),{headers:n,body:s,total:o,parts:a}=await nl(e,0,i.headers),[h,c]="function"==typeof i.progress?Bd(o,a,i.progress):[void 0,void 0],l=await t.post("add",{searchParams:Xc({"stream-channels":!0,...i,progress:Boolean(h)}),onUploadProgress:c,signal:r,headers:n,body:s});for await(let t of l.ndjson())t=vl(t),void 0!==t.hash?yield Nd(t):h&&h(t.bytes||0,t.name)})),Bd=(t,e,i)=>e?[void 0,Ld(t,e,i)]:[i,void 0],Ld=(t,e,i)=>{let r=0;const n=e.length;return({loaded:s,total:o})=>{const a=Math.floor(s/o*t);for(;r<n;){const{start:t,end:n,name:s}=e[r];if(a<n){i(a-t,s);break}i(n-t,s),r+=1}}};function Nd({name:t,hash:e,size:i,mode:r,mtime:n,mtimeNsecs:s}){const o={path:t,cid:A.CID.parse(e),size:parseInt(i)};return null!=r&&(o.mode=parseInt(r,8)),null!=n&&(o.mtime={secs:n,nsecs:s||0}),o}function Ud(t){const e=Dd(t);return Yc((()=>async function(t,i={}){return await le(e(yr(t),i))}))(t)}const Fd=Yc((t=>async function*(e,i={}){const r=await t.post("cat",{signal:i.signal,searchParams:Xc({arg:e.toString(),...i}),headers:i.headers});yield*r.iterator()})),zd=Yc((t=>async(e={})=>(await t.post("commands",{signal:e.signal,searchParams:Xc(e),headers:e.headers})).json())),jd=Yc((t=>async(e,i={})=>{const r=await t.post("dns",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers});return(await r.json()).Path})),Vd=Yc((t=>()=>{const e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}})),Gd=Yc((t=>async function*(e,i={}){const r={arg:`${e instanceof Uint8Array?A.CID.decode(e):e}`,...i};r.compressionLevel&&(r["compression-level"]=r.compressionLevel,delete r.compressionLevel);const n=await t.post("get",{signal:i.signal,searchParams:Xc(r),headers:i.headers});yield*n.iterator()})),Hd=Yc((t=>async function(e={}){const i=await t.post("id",{signal:e.signal,searchParams:Xc({arg:e.peerId?e.peerId.toString():void 0,...e}),headers:e.headers}),r={...vl(await i.json())};return r.addresses&&(r.addresses=r.addresses.map((t=>new $i.Multiaddr(t)))),r})),Yd=t=>{const e=Hd(t);return async function(t={}){const i=await e(t);return Boolean(i&&i.addresses&&i.addresses.length)}},Kd=Yc(((t,e)=>async function*(i,r={}){const n=`${i instanceof Uint8Array?A.CID.decode(i):i}`;async function s(t){let i=t.Hash;if(i.includes("/")){const t=i.startsWith("/ipfs/")?i:`/ipfs/${i}`;i=(await ru(e)(t)).cid}else i=A.CID.parse(i);const r={name:t.Name,path:n+(t.Name?`/${t.Name}`:""),size:t.Size,cid:i,type:Wd(t)};return t.Mode&&(r.mode=parseInt(t.Mode,8)),void 0!==t.Mtime&&null!==t.Mtime&&(r.mtime={secs:t.Mtime},void 0!==t.MtimeNsecs&&null!==t.MtimeNsecs&&(r.mtime.nsecs=t.MtimeNsecs)),r}const o=await t.post("ls",{signal:r.signal,searchParams:Xc({arg:n,...r}),headers:r.headers});for await(let t of o.ndjson()){if(t=t.Objects,!t)throw new Error("expected .Objects in results");if(t=t[0],!t)throw new Error("expected one array in results.Objects");const e=t.Links;if(!Array.isArray(e))throw new Error("expected one array in results.Objects[0].Links");if(!e.length)return void(yield s(t));yield*e.map(s)}}));function Wd(t){switch(t.Type){case 1:case 5:return"dir";default:return"file"}}const Xd=Yc((t=>async function(e={}){const i=await t.post("dns",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return vl(await i.json())})),qd=Yc((t=>async function*(e,i={}){const r=await t.post("ping",{signal:i.signal,searchParams:Xc({arg:`${e}`,...i}),headers:i.headers,transform:vl});yield*r.ndjson()})),$d=Yc((t=>async function(e,i={}){const r=await t.post("resolve",{signal:i.signal,searchParams:Xc({arg:e,...i}),headers:i.headers}),{Path:n}=await r.json();return n})),Jd=Yc((t=>async(t={})=>{throw u(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),Zd=Yc((t=>async function(e={}){const i=await t.post("shutdown",{signal:e.signal,searchParams:Xc(e),headers:e.headers});await i.text()})),Qd=Yc((t=>async function(e={}){const i=await t.post("version",{signal:e.signal,searchParams:Xc(e),headers:e.headers});return{...vl(await i.json()),"ipfs-http-client":"1.0.0"}}));i(42611),i(46953);var tf=i(29846),ef=i(44389),rf=i(1267),nf=i(42641),sf=i(40683);const of={func:(t,e)=>Je.validate(e,t)};function af(t,e){return Je.select(e[0],e[1])}var hf=i(63100),cf=i(51613);const lf=h.bind({ignoreUndefined:!0});function uf({options:t={},peerId:e,multiaddrs:i=[],repo:o,keychainConfig:a={},config:h={}}){const{datastore:c,keys:l}=o,d=function({options:t,config:e,datastore:i,keys:o,keychainConfig:a,peerId:h,multiaddrs:c}){const l={datastore:i,peerId:h,modules:{}},d={modules:{pubsub:(()=>{const t=ui(e,"Pubsub.Router")||"gossipsub";if(!Ac[t])throw u(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${t} router.`),"ERR_NOT_SUPPORTED");return Ac[t]})(),contentRouting:[],peerRouting:[]},config:{peerDiscovery:{mdns:{enabled:ui(t,"config.Discovery.MDNS.Enabled",ui(e,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:ui(t,"config.Discovery.webRTCStar.Enabled",ui(e,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:ui(t,"config.Bootstrap",ui(e,"Bootstrap",[]))}},relay:{enabled:ui(t,"relay.enabled",ui(e,"relay.enabled",!0)),hop:{enabled:ui(t,"relay.hop.enabled",ui(e,"relay.hop.enabled",!1)),active:ui(t,"relay.hop.active",ui(e,"relay.hop.active",!1))}},dht:{enabled:"none"!==ui(e,"Routing.Type","dhtclient"),clientMode:"dhtserver"!==ui(e,"Routing.Type","dht"),kBucketSize:ui(t,"dht.kBucketSize",20),validators:{ipns:Je}},pubsub:{enabled:ui(t,"config.Pubsub.Enabled",ui(e,"Pubsub.Enabled",!0))},nat:{enabled:!ui(e,"Swarm.DisableNatPortMap",!1)}},addresses:{listen:c.map((t=>t.toString())),announce:ui(t,"addresses.announce",ui(e,"Addresses.Announce",[])),noAnnounce:ui(t,"addresses.noAnnounce",ui(e,"Addresses.NoAnnounce",[]))},connectionManager:ui(t,"connectionManager",{maxConnections:ui(t,"config.Swarm.ConnMgr.HighWater",ui(e,"Swarm.ConnMgr.HighWater")),minConnections:ui(t,"config.Swarm.ConnMgr.LowWater",ui(e,"Swarm.ConnMgr.LowWater"))}),keychain:{datastore:o,...a},host:{agentVersion:"js-ipfs/0.14.3"}};let f=ui(t,"libp2p",void 0);"function"==typeof f&&(f=void 0);const p=lf(l,{dialer:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4},modules:{transport:[tf,ef],streamMuxer:[rf],connEncryption:[nf.NOISE],peerDiscovery:[],dht:sf,pubsub:Tc},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0}},dht:{kBucketSize:20,enabled:!0,clientMode:!0,validators:{ipns:of},selectors:{ipns:af}},pubsub:{enabled:!0,emitSelf:!0},nat:{enabled:!1}},metrics:{enabled:!0},peerStore:{persistence:!0}},d,f);ui(p,"config.peerDiscovery.bootstrap.list",[]).length>0&&p.modules.peerDiscovery.push(hf);const g=ui(t,"config.Addresses.Delegates",ui(e,"Addresses.Delegates",[]));if(g.length>0){const t=g[Math.floor(Math.random()*g.length)],e=new $i.Multiaddr(t).toOptions(),i=function(t={}){const e={name:At.identity.name,code:At.identity.code,encode:t=>t,decode:t=>t},i=Object.values(Ct.gh);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach((t=>i.push(t)));const o=new Pc({bases:i,loadBase:t.ipld&&t.ipld.loadBase}),a=Object.values(Ct.QB);[r,n,s,Tt,e].concat(t.ipld&&t.ipld.codecs||[]).forEach((t=>a.push(t)));const h=new Oc({codecs:a,loadCodec:t.ipld&&t.ipld.loadCodec}),c=Object.values(Ct.kq);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach((t=>c.push(t)));const l=new Dc({hashers:c,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:Ud(t),addAll:Dd(t),bitswap:Qc(t),block:ll(t),bootstrap:yl(t),cat:Fd(t),commands:zd(t),config:Al(t),dag:Ml(h,t),dht:jl(t),diag:Yl(t),dns:jd(t),files:ou(t),get:Gd(t),getEndpointConfig:Vd(t),id:Hd(t),isOnline:Yd(t),key:pu(t),log:vu(t),ls:Kd(t),mount:Xd(t),name:Tu(t),object:Nu(h,t),pin:ad(t),ping:qd(t),pubsub:bd(t),refs:_d(t),repo:Td(t),resolve:$d(t),start:Jd(t),stats:Cd(t),stop:Zd(t),swarm:Md(t),version:Qd(t),bases:o,codecs:h,hashers:l}}({host:e.host,protocol:443===parseInt(e.port)?"https":"http",port:e.port});d.modules.contentRouting=d.modules.contentRouting||[],d.modules.contentRouting.push(new kc(h,i)),d.modules.peerRouting=d.modules.peerRouting||[],d.modules.peerRouting.push(new Cc(i))}return p}({options:t,config:h,datastore:c,keys:l,keychainConfig:a,peerId:e,multiaddrs:i});return"function"==typeof t.libp2p?t.libp2p({libp2pOptions:d,options:t,config:h,datastore:c,peerId:e}):cf.create(d)}const df=h.bind({ignoreUndefined:!0}),ff=l("ipfs:components:peer:storage");class pf{constructor(t,e,i,r,n){this.print=r,this.peerId=t,this.keychain=e,this.repo=i,this.print=r,this.isNew=n}static async start(t,e,i){const{repoAutoMigrate:r,repo:n,onMigrationProgress:s}=i,o="string"==typeof n||null==n?Sc(t,e,{path:n,autoMigrate:r,onMigrationProgress:s}):n,{peerId:a,keychain:h,isNew:c}=await gf(t,o,i);return new pf(a,h,o,t,c)}}const gf=async(t,e,i)=>{if(!e.closed)return{...await wf(e,i),isNew:!1};try{return await e.open(),{...await wf(e,i),isNew:!1}}catch(r){if(r.code!==Bh)throw r;if(i.init&&!1===i.init.allowNew)throw new Dt("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await yf(t,e,i),isNew:!0}}},yf=async(t,e,i)=>{const r=i.init||{},n=await e.exists();if(ff("repo exists?",n),!0===n)throw new Error("repo already exists");const s=r.privateKey?await mf(r.privateKey):await vf(t,r),o=bf(s);ff("peer identity: %s",o.PeerID);const a={...df(xf({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}},r.profiles),i.config),Identity:o};await e.init(a),await e.open(),ff("repo opened");const h={pass:i.pass};try{h.dek=await e.config.get("Keychain.DEK")}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}const c=await uf({options:void 0,multiaddrs:void 0,peerId:s,repo:e,config:a,keychainConfig:h});return c.keychain&&c.keychain.opts&&(await c.loadKeychain(),await e.config.set("Keychain",{DEK:c.keychain.opts.dek})),{peerId:s,keychain:c.keychain}},mf=t=>(ff("using user-supplied private-key"),"object"==typeof t?t:ce.createFromPrivKey((0,Bt.fromString)(t,"base64pad"))),vf=(t,{algorithm:e="Ed25519",bits:i=2048})=>(t("generating %s keypair...",e),ce.create({keyType:e,bits:i})),bf=t=>({PeerID:t.toB58String(),PrivKey:(0,me.toString)(t.privKey.bytes,"base64pad")}),wf=async(t,e)=>{const i=e.config,r=e.init&&e.init.profiles||[],n=e.pass,s=await t.config.getAll(),o=_f(xf(s,r),i);if(s!==o&&await t.config.replace(o),!o.Identity||!o.Identity.PrivKey)throw new kt("No private key was found in the config, please intialize the repo");const a=await ce.createFromPrivKey(o.Identity.PrivKey),h=await uf({options:void 0,multiaddrs:void 0,peerId:a,repo:t,config:o,keychainConfig:{pass:n,...o.Keychain}});return h.keychain&&await h.loadKeychain(),{peerId:a,keychain:h.keychain}},_f=(t,e)=>e?df(t,e):t,xf=(t,e)=>(e||[]).reduce(((t,e)=>{const i=Cn[e];if(!i)throw new Error(`Could not find profile with name '${e}'`);return ff("applying profile %s",e),i.transform(t)}),t);var Ef=i(82838);const Sf=function(t){let e=new Uint8Array(t.reduce(((t,e)=>t+Bn.encodingLength(e)),0)),i=0;for(const r of t)e=Bn.encode(r,e,i),i+=Bn.encodingLength(r);return e};class Tf{constructor(t,e,i){this._refCounter=1,this.cid=t,this.priority=e||1,this.wantType=i}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(di.base58btc)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(t){return this._refCounter===t._refCounter&&this.cid.equals(t.cid)&&this.priority===t.priority&&this.wantType===t.wantType}}const Af=d.Reader,Cf=d.Writer,kf=d.util,Rf=d.roots["ipfs-bitswap"]||(d.roots["ipfs-bitswap"]={}),Pf=Rf.Message=(()=>{function t(t){if(this.blocks=[],this.payload=[],this.blockPresences=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.wantlist=null,t.prototype.blocks=kf.emptyArray,t.prototype.payload=kf.emptyArray,t.prototype.blockPresences=kf.emptyArray,t.prototype.pendingBytes=0,t.encode=function(t,e){if(e||(e=Cf.create()),null!=t.wantlist&&Object.hasOwnProperty.call(t,"wantlist")&&Rf.Message.Wantlist.encode(t.wantlist,e.uint32(10).fork()).ldelim(),null!=t.blocks&&t.blocks.length)for(var i=0;i<t.blocks.length;++i)e.uint32(18).bytes(t.blocks[i]);if(null!=t.payload&&t.payload.length)for(i=0;i<t.payload.length;++i)Rf.Message.Block.encode(t.payload[i],e.uint32(26).fork()).ldelim();if(null!=t.blockPresences&&t.blockPresences.length)for(i=0;i<t.blockPresences.length;++i)Rf.Message.BlockPresence.encode(t.blockPresences[i],e.uint32(34).fork()).ldelim();return null!=t.pendingBytes&&Object.hasOwnProperty.call(t,"pendingBytes")&&e.uint32(40).int32(t.pendingBytes),e},t.decode=function(t,e){t instanceof Af||(t=Af.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new Rf.Message;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.wantlist=Rf.Message.Wantlist.decode(t,t.uint32());break;case 2:r.blocks&&r.blocks.length||(r.blocks=[]),r.blocks.push(t.bytes());break;case 3:r.payload&&r.payload.length||(r.payload=[]),r.payload.push(Rf.Message.Block.decode(t,t.uint32()));break;case 4:r.blockPresences&&r.blockPresences.length||(r.blockPresences=[]),r.blockPresences.push(Rf.Message.BlockPresence.decode(t,t.uint32()));break;case 5:r.pendingBytes=t.int32();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof Rf.Message)return t;var e=new Rf.Message;if(null!=t.wantlist){if("object"!=typeof t.wantlist)throw TypeError(".Message.wantlist: object expected");e.wantlist=Rf.Message.Wantlist.fromObject(t.wantlist)}if(t.blocks){if(!Array.isArray(t.blocks))throw TypeError(".Message.blocks: array expected");e.blocks=[];for(var i=0;i<t.blocks.length;++i)"string"==typeof t.blocks[i]?kf.base64.decode(t.blocks[i],e.blocks[i]=kf.newBuffer(kf.base64.length(t.blocks[i])),0):t.blocks[i].length&&(e.blocks[i]=t.blocks[i])}if(t.payload){if(!Array.isArray(t.payload))throw TypeError(".Message.payload: array expected");for(e.payload=[],i=0;i<t.payload.length;++i){if("object"!=typeof t.payload[i])throw TypeError(".Message.payload: object expected");e.payload[i]=Rf.Message.Block.fromObject(t.payload[i])}}if(t.blockPresences){if(!Array.isArray(t.blockPresences))throw TypeError(".Message.blockPresences: array expected");for(e.blockPresences=[],i=0;i<t.blockPresences.length;++i){if("object"!=typeof t.blockPresences[i])throw TypeError(".Message.blockPresences: object expected");e.blockPresences[i]=Rf.Message.BlockPresence.fromObject(t.blockPresences[i])}}return null!=t.pendingBytes&&(e.pendingBytes=0|t.pendingBytes),e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.blocks=[],i.payload=[],i.blockPresences=[]),e.defaults&&(i.wantlist=null,i.pendingBytes=0),null!=t.wantlist&&t.hasOwnProperty("wantlist")&&(i.wantlist=Rf.Message.Wantlist.toObject(t.wantlist,e)),t.blocks&&t.blocks.length){i.blocks=[];for(var r=0;r<t.blocks.length;++r)i.blocks[r]=e.bytes===String?kf.base64.encode(t.blocks[r],0,t.blocks[r].length):e.bytes===Array?Array.prototype.slice.call(t.blocks[r]):t.blocks[r]}if(t.payload&&t.payload.length)for(i.payload=[],r=0;r<t.payload.length;++r)i.payload[r]=Rf.Message.Block.toObject(t.payload[r],e);if(t.blockPresences&&t.blockPresences.length)for(i.blockPresences=[],r=0;r<t.blockPresences.length;++r)i.blockPresences[r]=Rf.Message.BlockPresence.toObject(t.blockPresences[r],e);return null!=t.pendingBytes&&t.hasOwnProperty("pendingBytes")&&(i.pendingBytes=t.pendingBytes),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.Wantlist=function(){function t(t){if(this.entries=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.entries=kf.emptyArray,t.prototype.full=!1,t.encode=function(t,e){if(e||(e=Cf.create()),null!=t.entries&&t.entries.length)for(var i=0;i<t.entries.length;++i)Rf.Message.Wantlist.Entry.encode(t.entries[i],e.uint32(10).fork()).ldelim();return null!=t.full&&Object.hasOwnProperty.call(t,"full")&&e.uint32(16).bool(t.full),e},t.decode=function(t,e){t instanceof Af||(t=Af.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new Rf.Message.Wantlist;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.entries&&r.entries.length||(r.entries=[]),r.entries.push(Rf.Message.Wantlist.Entry.decode(t,t.uint32()));break;case 2:r.full=t.bool();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof Rf.Message.Wantlist)return t;var e=new Rf.Message.Wantlist;if(t.entries){if(!Array.isArray(t.entries))throw TypeError(".Message.Wantlist.entries: array expected");e.entries=[];for(var i=0;i<t.entries.length;++i){if("object"!=typeof t.entries[i])throw TypeError(".Message.Wantlist.entries: object expected");e.entries[i]=Rf.Message.Wantlist.Entry.fromObject(t.entries[i])}}return null!=t.full&&(e.full=Boolean(t.full)),e},t.toObject=function(t,e){e||(e={});var i={};if((e.arrays||e.defaults)&&(i.entries=[]),e.defaults&&(i.full=!1),t.entries&&t.entries.length){i.entries=[];for(var r=0;r<t.entries.length;++r)i.entries[r]=Rf.Message.Wantlist.Entry.toObject(t.entries[r],e)}return null!=t.full&&t.hasOwnProperty("full")&&(i.full=t.full),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.WantType=function(){const t={},e=Object.create(t);return e[t[0]="Block"]=0,e[t[1]="Have"]=1,e}(),t.Entry=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.block=kf.newBuffer([]),t.prototype.priority=0,t.prototype.cancel=!1,t.prototype.wantType=0,t.prototype.sendDontHave=!1,t.encode=function(t,e){return e||(e=Cf.create()),null!=t.block&&Object.hasOwnProperty.call(t,"block")&&e.uint32(10).bytes(t.block),null!=t.priority&&Object.hasOwnProperty.call(t,"priority")&&e.uint32(16).int32(t.priority),null!=t.cancel&&Object.hasOwnProperty.call(t,"cancel")&&e.uint32(24).bool(t.cancel),null!=t.wantType&&Object.hasOwnProperty.call(t,"wantType")&&e.uint32(32).int32(t.wantType),null!=t.sendDontHave&&Object.hasOwnProperty.call(t,"sendDontHave")&&e.uint32(40).bool(t.sendDontHave),e},t.decode=function(t,e){t instanceof Af||(t=Af.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new Rf.Message.Wantlist.Entry;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.block=t.bytes();break;case 2:r.priority=t.int32();break;case 3:r.cancel=t.bool();break;case 4:r.wantType=t.int32();break;case 5:r.sendDontHave=t.bool();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof Rf.Message.Wantlist.Entry)return t;var e=new Rf.Message.Wantlist.Entry;switch(null!=t.block&&("string"==typeof t.block?kf.base64.decode(t.block,e.block=kf.newBuffer(kf.base64.length(t.block)),0):t.block.length&&(e.block=t.block)),null!=t.priority&&(e.priority=0|t.priority),null!=t.cancel&&(e.cancel=Boolean(t.cancel)),t.wantType){case"Block":case 0:e.wantType=0;break;case"Have":case 1:e.wantType=1}return null!=t.sendDontHave&&(e.sendDontHave=Boolean(t.sendDontHave)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.block="":(i.block=[],e.bytes!==Array&&(i.block=kf.newBuffer(i.block))),i.priority=0,i.cancel=!1,i.wantType=e.enums===String?"Block":0,i.sendDontHave=!1),null!=t.block&&t.hasOwnProperty("block")&&(i.block=e.bytes===String?kf.base64.encode(t.block,0,t.block.length):e.bytes===Array?Array.prototype.slice.call(t.block):t.block),null!=t.priority&&t.hasOwnProperty("priority")&&(i.priority=t.priority),null!=t.cancel&&t.hasOwnProperty("cancel")&&(i.cancel=t.cancel),null!=t.wantType&&t.hasOwnProperty("wantType")&&(i.wantType=e.enums===String?Rf.Message.Wantlist.WantType[t.wantType]:t.wantType),null!=t.sendDontHave&&t.hasOwnProperty("sendDontHave")&&(i.sendDontHave=t.sendDontHave),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t}(),t.Block=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.prefix=kf.newBuffer([]),t.prototype.data=kf.newBuffer([]),t.encode=function(t,e){return e||(e=Cf.create()),null!=t.prefix&&Object.hasOwnProperty.call(t,"prefix")&&e.uint32(10).bytes(t.prefix),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),e},t.decode=function(t,e){t instanceof Af||(t=Af.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new Rf.Message.Block;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.prefix=t.bytes();break;case 2:r.data=t.bytes();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof Rf.Message.Block)return t;var e=new Rf.Message.Block;return null!=t.prefix&&("string"==typeof t.prefix?kf.base64.decode(t.prefix,e.prefix=kf.newBuffer(kf.base64.length(t.prefix)),0):t.prefix.length&&(e.prefix=t.prefix)),null!=t.data&&("string"==typeof t.data?kf.base64.decode(t.data,e.data=kf.newBuffer(kf.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.prefix="":(i.prefix=[],e.bytes!==Array&&(i.prefix=kf.newBuffer(i.prefix))),e.bytes===String?i.data="":(i.data=[],e.bytes!==Array&&(i.data=kf.newBuffer(i.data)))),null!=t.prefix&&t.hasOwnProperty("prefix")&&(i.prefix=e.bytes===String?kf.base64.encode(t.prefix,0,t.prefix.length):e.bytes===Array?Array.prototype.slice.call(t.prefix):t.prefix),null!=t.data&&t.hasOwnProperty("data")&&(i.data=e.bytes===String?kf.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t.BlockPresenceType=function(){const t={},e=Object.create(t);return e[t[0]="Have"]=0,e[t[1]="DontHave"]=1,e}(),t.BlockPresence=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.cid=kf.newBuffer([]),t.prototype.type=0,t.encode=function(t,e){return e||(e=Cf.create()),null!=t.cid&&Object.hasOwnProperty.call(t,"cid")&&e.uint32(10).bytes(t.cid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(16).int32(t.type),e},t.decode=function(t,e){t instanceof Af||(t=Af.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new Rf.Message.BlockPresence;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.cid=t.bytes();break;case 2:r.type=t.int32();break;default:t.skipType(7&n)}}return r},t.fromObject=function(t){if(t instanceof Rf.Message.BlockPresence)return t;var e=new Rf.Message.BlockPresence;switch(null!=t.cid&&("string"==typeof t.cid?kf.base64.decode(t.cid,e.cid=kf.newBuffer(kf.base64.length(t.cid)),0):t.cid.length&&(e.cid=t.cid)),t.type){case"Have":case 0:e.type=0;break;case"DontHave":case 1:e.type=1}return e},t.toObject=function(t,e){e||(e={});var i={};return e.defaults&&(e.bytes===String?i.cid="":(i.cid=[],e.bytes!==Array&&(i.cid=kf.newBuffer(i.cid))),i.type=e.enums===String?"Have":0),null!=t.cid&&t.hasOwnProperty("cid")&&(i.cid=e.bytes===String?kf.base64.encode(t.cid,0,t.cid.length):e.bytes===Array?Array.prototype.slice.call(t.cid):t.cid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=e.enums===String?Rf.Message.BlockPresenceType[t.type]:t.type),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),t})();var If=i(39350);const Of=Pf.Wantlist.WantType.Block,Mf=Pf.Wantlist.WantType.Have;class Df{constructor(t,e){this.set=e?If({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:e.metrics}):new Map,this._stats=t}get length(){return this.set.size}add(t,e,i){const r=t.toString(di.base58btc),n=this.set.get(r);n?(n.inc(),n.priority=e,n.wantType===Mf&&i===Of&&(n.wantType=i)):(this.set.set(r,new Tf(t,e,i)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(t){const e=t.toString(di.base58btc),i=this.set.get(e);i&&(i.dec(),i.hasRefs()||(this.set.delete(e),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(t){this.set.has(t)&&this.set.delete(t)}forEach(t){return this.set.forEach(t)}entries(){return this.set.entries()}sortedEntries(){return new Map((t=t=>t[1].key,e=Array.from(this.set.entries()),Array.prototype.slice.call(e,0).sort(((e,i)=>{const r=t(e),n=t(i);return r<n?-1:r>n?1:0}))));var t,e}contains(t){const e=t.toString(di.base58btc);return this.set.has(e)}get(t){const e=t.toString(di.base58btc);return this.set.get(e)}}Df.Entry=Tf;const Bf=Df.Entry;class Lf{constructor(t,e,i,r,n){this.entry=new Bf(t,e,i),this.cancel=Boolean(r),this.sendDontHave=Boolean(n)}get cid(){return this.entry.cid}set cid(t){this.entry.cid=t}get priority(){return this.entry.priority}set priority(t){this.entry.priority=t}get wantType(){return this.entry.wantType}set wantType(t){this.entry.wantType=t}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(di.base58btc)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(t){return this.cancel===t.cancel&&this.sendDontHave===t.sendDontHave&&this.wantType===t.wantType&&this.entry.equals(t.entry)}}const Nf=(t,e)=>{const i=["bitswap"];return e&&i.push(e),t&&i.push(`${t.toB58String().slice(0,8)}`),Object.assign(l(i.join(":")),{error:l(i.concat(["error"]).join(":"))})},Uf=(t,e)=>{if(t.size!==e.size)return!1;for(const[i,r]of t){const t=e.get(i);if(void 0===t)return!1;if(r instanceof Uint8Array&&t instanceof Uint8Array&&!(0,ve.equals)(r,t))return!1;if(r instanceof Lf&&t instanceof Lf&&!r.equals(t))return!1}return!0};class Ff{constructor(t){this.full=t,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}addEntry(t,e,i,r,n){null==i&&(i=Ff.WantType.Block);const s=t.toString(di.base58btc),o=this.wantlist.get(s);o?(o.wantType===i&&(o.priority=e),r&&(o.cancel=Boolean(r)),n&&(o.sendDontHave=Boolean(n)),i===Ff.WantType.Block&&o.wantType===Ff.WantType.Have&&(o.wantType=i)):this.wantlist.set(s,new Lf(t,e,i,r,n))}addBlock(t,e){const i=t.toString(di.base58btc);this.blocks.set(i,e)}addHave(t){const e=t.toString(di.base58btc);this.blockPresences.has(e)||this.blockPresences.set(e,Ff.BlockPresenceType.Have)}addDontHave(t){const e=t.toString(di.base58btc);this.blockPresences.has(e)||this.blockPresences.set(e,Ff.BlockPresenceType.DontHave)}cancel(t){const e=t.toString(di.base58btc);this.wantlist.delete(e),this.addEntry(t,0,Ff.WantType.Block,!0,!1)}setPendingBytes(t){this.pendingBytes=t}serializeToBitswap100(){const t={wantlist:{entries:Array.from(this.wantlist.values()).map((t=>({block:t.cid.bytes,priority:Number(t.priority),cancel:Boolean(t.cancel)}))),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return Pf.encode(t).finish()}serializeToBitswap110(){const t={wantlist:{entries:Array.from(this.wantlist.values()).map((t=>({block:t.cid.bytes,priority:Number(t.priority),wantType:t.wantType,cancel:Boolean(t.cancel),sendDontHave:Boolean(t.sendDontHave)}))),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(const[e,i]of this.blocks.entries()){const r=A.CID.parse(e),n=r.version,s=r.code,o=r.multihash.code,a=r.multihash.digest.length,h=Sf([n,s,o,a]);t.payload.push(new Pf.Block({prefix:h,data:i}))}for(const[e,i]of this.blockPresences)t.blockPresences.push(new Pf.BlockPresence({cid:A.CID.parse(e).bytes,type:i}));return this.pendingBytes>0&&(t.pendingBytes=this.pendingBytes),Pf.encode(t).finish()}equals(t){return!!(this.full===t.full&&this.pendingBytes===t.pendingBytes&&Uf(this.wantlist,t.wantlist)&&Uf(this.blocks,t.blocks)&&Uf(this.blockPresences,t.blockPresences))}get[Symbol.toStringTag](){const t=Array.from(this.wantlist.keys()),e=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${t}, blocks: ${e}>`}}Ff.deserialize=async(t,e)=>{const i=Pf.decode(t),r=i.wantlist&&i.wantlist.full||!1,n=new Ff(r);return i.wantlist&&i.wantlist.entries&&i.wantlist.entries.forEach((t=>{if(!t.block)return;const e=A.CID.decode(t.block);n.addEntry(e,t.priority||0,t.wantType,Boolean(t.cancel),Boolean(t.sendDontHave))})),i.blockPresences&&i.blockPresences.forEach((t=>{if(!t.cid)return;const e=A.CID.decode(t.cid);t.type===Ff.BlockPresenceType.Have?n.addHave(e):n.addDontHave(e)})),i.blocks.length>0?(await Promise.all(i.blocks.map((async t=>{const e=await vr.sha256.digest(t),i=A.CID.createV0(e);n.addBlock(i,t)}))),n):i.payload.length>0?(await Promise.all(i.payload.map((async t=>{if(!t.prefix||!t.data)return;const i=Ef(t.prefix),r=i[0],s=i[1],o=i[2],a=o===vr.sha256.code?vr.sha256:e&&await e.getHasher(o);if(!a)throw u(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");const h=await a.digest(t.data),c=A.CID.create(r,s,h);n.addBlock(c,t.data)}))),n.setPendingBytes(i.pendingBytes),n):n},Ff.blockPresenceSize=t=>t.bytes.length+1,Ff.Entry=Lf,Ff.WantType={Block:Pf.Wantlist.WantType.Block,Have:Pf.Wantlist.WantType.Have},Ff.BlockPresenceType={Have:Pf.BlockPresenceType.Have,DontHave:Pf.BlockPresenceType.DontHave};const zf=Math.pow(2,31)-1;var jf=i(61708);class Vf{constructor(t,e,i){this.peerId=e,this.network=i,this.refcnt=1,this._entries=[],this._log=Nf(t,"msgqueue"),this.sendEntries=jf(this._sendEntries.bind(this),1)}addMessage(t){t.empty||this.send(t)}addEntries(t){this._entries=this._entries.concat(t),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const t=new Ff(!1);this._entries.forEach((e=>{e.cancel?t.cancel(e.cid):t.addEntry(e.cid,e.priority)})),this._entries=[],this.addMessage(t)}async send(t){try{await this.network.connectTo(this.peerId)}catch(t){return void this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),t.message)}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,t).catch((t=>{this._log.error("send error: %s",t.message)}))}}class Gf{constructor(t,e,i,r){this.peers=If({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:r.metrics}),this.wantlist=new Df(i,r),this.network=e,this._stats=i,this._peerId=t,this._log=Nf(t,"want")}_addEntries(t,e,i){const r=t.map(((t,i)=>new Ff.Entry(t,zf-i,Ff.WantType.Block,e)));r.forEach((t=>{t.cancel?i?this.wantlist.removeForce(t.cid.toString(di.base58btc)):this.wantlist.remove(t.cid):(this._log("adding to wl"),this.wantlist.add(t.cid,t.priority))}));for(const t of this.peers.values())t.addEntries(r)}_startPeerHandler(t){let e=this.peers.get(t.toB58String());if(e)return void e.refcnt++;e=new Vf(this._peerId,t,this.network);const i=new Ff(!0);for(const t of this.wantlist.entries())i.addEntry(t[1].cid,t[1].priority);return e.addMessage(i),this.peers.set(t.toB58String(),e),e}_stopPeerHandler(t){const e=this.peers.get(t.toB58String());e&&(e.refcnt--,e.refcnt>0||this.peers.delete(t.toB58String()))}wantBlocks(t,e={}){this._addEntries(t,!1),e&&e.signal&&e.signal.addEventListener("abort",(()=>{this.cancelWants(t)}))}unwantBlocks(t){this._log("unwant blocks: %s",t.length),this._addEntries(t,!0,!0)}cancelWants(t){this._log("cancel wants: %s",t.length),this._addEntries(t,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(t){this._startPeerHandler(t)}disconnected(t){this._stopPeerHandler(t)}start(){}stop(){this.peers.forEach((t=>this.disconnected(t.peerId)))}}var Hf=i(48963),Yf=i(98497);const Kf="/ipfs/bitswap/1.0.0",Wf="/ipfs/bitswap/1.1.0",Xf="/ipfs/bitswap/1.2.0";class qf{constructor(t,e,i,r={}){this._log=Nf(t.peerId,"network"),this._libp2p=t,this._bitswap=e,this._protocols=[Kf],r.b100Only||(this._protocols.unshift(Wf),this._protocols.unshift(Xf)),this._stats=i,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=r.hashLoader}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection);const t=new Yf({multicodecs:this._protocols,handlers:{onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}});this._registrarId=await this._libp2p.registrar.register(t);for await(const t of this._libp2p.peerStore.getPeers()){const e=this._libp2p.connectionManager.get(t.id);e&&this._onPeerConnect(e.remotePeer)}}async stop(){this._running=!1,await this._libp2p.unhandle(this._protocols),null!=this._registrarId&&this._libp2p.registrar.unregister(this._registrarId)}async _onConnection({protocol:t,stream:e,connection:i}){if(this._running){this._log("incoming new bitswap %s connection from %s",t,i.remotePeer.toB58String());try{await(0,er.pipe)(e,Hf.decode(),(async t=>{for await(const e of t)try{const t=await Ff.deserialize(e.slice(),this._hashLoader);await this._bitswap._receiveMessage(i.remotePeer,t)}catch(t){this._bitswap._receiveError(t);break}}))}catch(t){this._log(t)}}}_onPeerConnect(t){this._bitswap._onPeerConnected(t)}_onPeerDisconnect(t){this._bitswap._onPeerDisconnected(t)}findProviders(t,e,i={}){return this._libp2p.contentRouting.findProviders(t,{timeout:1e4,maxNumProviders:e})}async findAndConnect(t,e){const i=[];for await(const r of this.findProviders(t,3,e))this._log(`connecting to provider ${r.id}`),i.push(this.connectTo(r.id,e).catch((t=>{this._log.error(t)})));await Promise.all(i)}async provide(t,e){await this._libp2p.contentRouting.provide(t,e)}async sendMessage(t,e){if(!this._running)throw new Error("network isn't running");const i=t.toB58String();this._log("sendMessage to %s",i,e);const r=await this._libp2p.dial(t),{stream:n,protocol:s}=await r.newStream([Xf,Wf,Kf]);let o;switch(s){case Kf:o=e.serializeToBitswap100();break;case Wf:case Xf:o=e.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+s)}!async function(t,e,i){try{await(0,er.pipe)([e],Hf.encode(),t)}catch(t){i(t)}}(n,o,this._log),this._updateSentStats(t,e.blocks)}async connectTo(t,e){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(t,e)}_updateSentStats(t,e){const i=t.toB58String();if(this._stats){for(const t of e.values())this._stats.push(i,"dataSent",t.length);this._stats.push(i,"blocksSent",e.size)}}}class $f{constructor(t){this.partner=t,this.wantlist=new Df,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(t){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=t}receivedBytes(t){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=t}wants(t,e,i){this.wantlist.add(t,e,i)}cancelWant(t){this.wantlist.remove(t)}wantlistContains(t){return this.wantlist.get(t)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}class Jf extends Map{constructor(t,e){super(),this._cmp=e||this._defaultSort,this._keys=[];for(const[e,i]of t||[])this.set(e,i)}update(t){if(t<0||t>=this._keys.length)return;const e=this._keys[t];this._keys.splice(t,1);const i=this._find(e);this._keys.splice(i,0,e)}set(t,e){if(this.has(t)){const e=this.indexOf(t);this._keys.splice(e,1)}super.set(t,e);const i=this._find(t);return this._keys.splice(i,0,t),this}clear(){super.clear(),this._keys=[]}delete(t){if(!this.has(t))return!1;const e=this.indexOf(t);return this._keys.splice(e,1),super.delete(t)}indexOf(t){if(!this.has(t))return-1;const e=this._find(t);if(this._keys[e]===t)return e;for(let i=1;i<this._keys.length;i++){if(this._keys[e+i]===t)return e+i;if(this._keys[e-i]===t)return e-i}return-1}_find(t){let e=0,i=this._keys.length;for(;e<i;){const r=e+i>>>1,n=this._kCmp(this._keys[r],t);if(n<0)e=r+1;else{if(!(n>0))return r;i=r}}return e}*keys(){for(const t of this._keys)yield t}*values(){for(const t of this._keys)yield this.get(t)}*entries(){for(const t of this._keys)yield[t,this.get(t)]}*[Symbol.iterator](){yield*this.entries()}forEach(t,e){if(t)for(const i of this._keys)t.apply(e,[[i,this.get(i)]])}_defaultSort(t,e){return t[0]<e[0]?-1:e[0]<t[0]?1:0}_kCmp(t,e){return this._cmp([t,this.get(t)],[e,this.get(e)])}}const Zf={hasNewInfo:()=>!1,merge(){}};class Qf{constructor(t=Zf){this._taskMerger=t,this._byPeer=new Jf([],tp.compare)}pushTasks(t,e){let i=this._byPeer.get(t.toB58String());i||(i=new tp(t,this._taskMerger)),i.pushTasks(e),this._byPeer.set(t.toB58String(),i)}popTasks(t){const e=this._head();if(void 0===e)return{tasks:[],pendingSize:0};const{tasks:i,pendingSize:r}=e.popTasks(t);if(0===i.length)return{tasks:i,pendingSize:r};const n=e.peerId;return e.isIdle()?this._byPeer.delete(n.toB58String()):this._byPeer.update(0),{peerId:n,tasks:i,pendingSize:r}}_head(){if(0!==this._byPeer.size)for(const[,t]of this._byPeer)return t}remove(t,e){const i=this._byPeer.get(e.toB58String());i&&i.remove(t)}tasksDone(t,e){const i=this._byPeer.get(t.toB58String());if(!i)return;const r=this._byPeer.indexOf(t.toB58String());for(const t of e)i.taskDone(t);this._byPeer.update(r)}}class tp{constructor(t,e){this.peerId=t,this._taskMerger=e,this._activeTotalSize=0,this._pending=new ep,this._active=new Set}pushTasks(t){for(const e of t)this._pushTask(e)}_pushTask(t){if(!this._taskHasMoreInfoThanActiveTasks(t))return;const e=this._pending.get(t.topic);if(e)return t.priority>e.priority&&this._pending.updatePriority(t.topic,t.priority),void this._taskMerger.merge(t,e);this._pending.add(t)}_taskHasMoreInfoThanActiveTasks(t){const e=[];for(const i of this._active)i.topic===t.topic&&e.push(i);return 0===e.length||this._taskMerger.hasNewInfo(t,e)}popTasks(t){let e=0;const i=[],r=this._pending.tasks();for(let n=0;n<r.length&&e<t;n++){const t=r[n];i.push(t),e+=t.size,this._pending.delete(t.topic),this._activeTotalSize+=t.size,this._active.add(t)}return{tasks:i,pendingSize:this._pending.totalSize}}taskDone(t){this._active.has(t)&&(this._activeTotalSize-=t.size,this._active.delete(t))}remove(t){this._pending.delete(t)}isIdle(){return 0===this._pending.length&&0===this._active.size}static compare(t,e){return 0===t[1]._pending.length?1:0===e[1]._pending.length?-1:t[1]._activeTotalSize===e[1]._activeTotalSize?e[1]._pending.length-t[1]._pending.length:t[1]._activeTotalSize-e[1]._activeTotalSize}}class ep{constructor(){this._tasks=new Jf([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce(((t,e)=>t+e.task.size),0)}get(t){return(this._tasks.get(t)||{}).task}add(t){this._tasks.set(t.topic,{created:Date.now(),task:t})}delete(t){this._tasks.delete(t)}tasks(){return[...this._tasks.values()].map((t=>t.task))}updatePriority(t,e){const i=this._tasks.get(t);if(!i)return;const r=this._tasks.indexOf(t);i.task.priority=e,this._tasks.update(r)}_compare(t,e){return t[1].task.priority===e[1].task.priority?t[1].created-e[1].created:e[1].task.priority-t[1].task.priority}}const ip={hasNewInfo(t,e){let i=!1,r=!1;for(const t of e)t.data.haveBlock&&(i=!0),t.data.isWantBlock&&(r=!0);return!(r||!t.data.isWantBlock)||!(i||!t.data.haveBlock)},merge(t,e){const i=t.data,r=e.data;!r.haveBlock&&i.haveBlock&&(r.haveBlock=i.haveBlock,r.blockSize=i.blockSize),!r.isWantBlock&&i.isWantBlock&&(r.isWantBlock=!0,r.haveBlock&&!i.haveBlock||(r.haveBlock=i.haveBlock,e.size=t.size)),r.isWantBlock&&r.haveBlock&&(e.size=r.blockSize)}},rp=Ff.WantType;class np{constructor(t,e,i,r,n,s={}){this._log=Nf(t,"engine"),this.blockstore=e,this.network=i,this._stats=r,this._opts=this._processOpts(s),this.ledgerMap=If({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:n.metrics}),this._running=!1,this._requestQueue=new Qf(ip)}_processOpts(t){return{maxSizeReplaceHasWithBlock:1024,targetMessageSize:16384,...t}}_scheduleProcessTasks(){setTimeout((()=>{this._processTasks()}))}async _processTasks(){if(!this._running)return;const{peerId:t,tasks:e,pendingSize:i}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(0===e.length)return;const r=new Ff(!1);r.setPendingBytes(i);const n=[],s=new Map;for(const t of e){const e=A.CID.parse(t.topic);t.data.haveBlock?t.data.isWantBlock?(n.push(e),s.set(t.topic,t.data)):r.addHave(e):r.addDontHave(e)}const o=await this._getBlocks(n);for(const[t,e]of s){const i=A.CID.parse(t),n=o.get(t);n?r.addBlock(i,n):e.sendDontHave&&r.addDontHave(i)}if(r.empty)return t&&this._requestQueue.tasksDone(t,e),void this._scheduleProcessTasks();try{t&&await this.network.sendMessage(t,r);for(const[e,i]of o.entries())t&&this.messageSent(t,A.CID.parse(e),i)}catch(t){this._log.error(t)}t&&this._requestQueue.tasksDone(t,e),this._scheduleProcessTasks()}wantlistForPeer(t){const e=t.toB58String(),i=this.ledgerMap.get(e);return i?i.wantlist.sortedEntries():new Map}ledgerForPeer(t){const e=t.toB58String(),i=this.ledgerMap.get(e);return i?{peer:i.partner,value:i.debtRatio(),sent:i.accounting.bytesSent,recv:i.accounting.bytesRecv,exchanged:i.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((t=>t.partner))}receivedBlocks(t){if(t.length){for(const e of this.ledgerMap.values())for(const i of t){const t=e.wantlistContains(i.cid);if(!t)continue;const r=i.data.length,n=this._sendAsBlock(t.wantType,r);let s=r;n||(s=Ff.blockPresenceSize(t.cid)),this._requestQueue.pushTasks(e.partner,[{topic:t.cid.toString(di.base58btc),priority:t.priority,size:s,data:{blockSize:r,isWantBlock:n,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(t,e){const i=this._findOrCreate(t);if(e.empty)return;if(e.full&&(i.wantlist=new Df),this._updateBlockAccounting(e.blocks,i),0===e.wantlist.size)return void this._scheduleProcessTasks();const r=[],n=[];e.wantlist.forEach((t=>{t.cancel?(i.cancelWant(t.cid),r.push(t.cid)):(i.wants(t.cid,t.priority,t.wantType),n.push(t))})),this._cancelWants(t,r),await this._addWants(t,n),this._scheduleProcessTasks()}_cancelWants(t,e){for(const i of e)this._requestQueue.remove(i.toString(di.base58btc),t)}async _addWants(t,e){const i=await this._getBlockSizes(e.map((t=>t.cid))),r=[];for(const n of e){const e=n.cid.toString(di.base58btc),s=i.get(e);if(null==s)n.sendDontHave&&r.push({topic:e,priority:n.priority,size:Ff.blockPresenceSize(n.cid),data:{isWantBlock:n.wantType===rp.Block,blockSize:0,haveBlock:!1,sendDontHave:n.sendDontHave}});else{const t=this._sendAsBlock(n.wantType,s);let i=s;t||(i=Ff.blockPresenceSize(n.cid)),r.push({topic:e,priority:n.priority,size:i,data:{isWantBlock:t,blockSize:s,haveBlock:!0,sendDontHave:n.sendDontHave}})}this._requestQueue.pushTasks(t,r)}}_sendAsBlock(t,e){return t===rp.Block||e<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(t){const e=await this._getBlocks(t);return new Map([...e].map((([t,e])=>[t,e.length])))}async _getBlocks(t){const e=new Map;return await Promise.all(t.map((async t=>{try{const i=await this.blockstore.get(t);e.set(t.toString(di.base58btc),i)}catch(e){"ERR_NOT_FOUND"!==e.code&&this._log.error("failed to query blockstore for %s: %s",t,e)}}))),e}_updateBlockAccounting(t,e){for(const i of t.values())this._log("got block (%s bytes)",i.length),e.receivedBytes(i.length)}messageSent(t,e,i){const r=this._findOrCreate(t);r.sentBytes(i.length),r.wantlist.remove(e)}numBytesSentTo(t){return this._findOrCreate(t).accounting.bytesSent}numBytesReceivedFrom(t){return this._findOrCreate(t).accounting.bytesRecv}peerDisconnected(t){this.ledgerMap.delete(t.toB58String())}_findOrCreate(t){const e=t.toB58String(),i=this.ledgerMap.get(e);if(i)return i;const r=new $f(t);return this.ledgerMap.set(e,r),this._stats&&this._stats.push(e,"peerCount",1),r}start(){this._running=!0}stop(){this._running=!1}}var sp=i(17187);const op=t=>`unwant:${(0,me.toString)(t.multihash.bytes,"base64")}`,ap=t=>`block:${(0,me.toString)(t.multihash.bytes,"base64")}`;class hp extends sp.EventEmitter{constructor(t){super(),this.setMaxListeners(1e3),this._log=Nf(t,"notif")}hasBlock(t,e){const i=ap(t);this._log(i),this.emit(i,e)}wantBlock(t,e={}){if(!t)throw new Error("Not a valid cid");const i=ap(t),r=op(t);return this._log(`wantBlock:${t}`),new Promise(((n,s)=>{const o=()=>{this.removeListener(i,a),s(new Error(`Block for ${t} unwanted`))},a=t=>{this.removeListener(r,o),n(t)};this.once(r,o),this.once(i,a),e&&e.signal&&e.signal.addEventListener("abort",(()=>{this.removeListener(i,a),this.removeListener(r,o),s(new Error(`Want for ${t} aborted`))}))}))}unwantBlock(t){const e=op(t);this._log(e),this.emit(e)}}var cp=i(63573);class lp extends sp.EventEmitter{constructor(t,e){super(),this._options=e,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),t.forEach((t=>{this._stats[t]=BigInt(0),this._movingAverages[t]={},this._options.movingAverageIntervals.forEach((e=>{(this._movingAverages[t][e]=cp(e)).push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(t,e){this._enabled&&(this._queue.push([t,e,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const t=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-t),0)}_update(){if(this._timeout=null,this._queue.length){let t;for(;this._queue.length;){const e=t=this._queue.shift();e&&this._applyOp(e)}t&&this._updateFrequency(t[2]),this.emit("update",this._stats)}}_updateFrequency(t){const e=t-this._frequencyLastTime;e&&Object.keys(this._stats).forEach((i=>{this._updateFrequencyFor(i,e,t)})),this._frequencyLastTime=t}_updateFrequencyFor(t,e,i){const r=this._frequencyAccumulators[t]||0;this._frequencyAccumulators[t]=0;const n=r/e*1e3;let s=this._movingAverages[t];s||(s=this._movingAverages[t]={}),this._options.movingAverageIntervals.forEach((t=>{let e=s[t];e||(e=s[t]=cp(t)),e.push(i,n)}))}_applyOp(t){const e=t[0],i=t[1];if("number"!=typeof i)throw new Error(`invalid increment number: ${i}`);Object.prototype.hasOwnProperty.call(this._stats,e)||(this._stats[e]=BigInt(0)),this._stats[e]=BigInt(this._stats[e])+BigInt(i),this._frequencyAccumulators[e]||(this._frequencyAccumulators[e]=0),this._frequencyAccumulators[e]+=i}}const up={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]};class dp extends sp.EventEmitter{constructor(t,e=[],i=up){super();const r=Object.assign({},up,i);if("number"!=typeof r.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof r.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=r,this._enabled=this._options.enabled,this._global=new lp(e,r),this._global.on("update",(t=>this.emit("update",t))),this._peers=If({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:t.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const t of this._peers)t[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(t){const e="string"!=typeof t&&t.toB58String?t.toB58String():`${t}`;return this._peers.get(e)}push(t,e,i){if(this._enabled&&(this._global.push(e,i),t)){let r=this._peers.get(t);r||(r=new lp(this._initialCounters,this._options),this._peers.set(t,r)),r.push(e,i)}}disconnected(t){const e=t.toB58String(),i=this._peers.get(e);i&&(i.stop(),this._peers.delete(e))}}const fp={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},pp=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];class gp extends bc{constructor(t,e,i={}){super(),this._libp2p=t,this._log=Nf(this.peerId),this._options=Object.assign({},fp,i),this._stats=new dp(t,pp,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new qf(t,this,this._stats,{hashLoader:i.hashLoader}),this.blockstore=e,this.engine=new np(this.peerId,e,this.network,this._stats,t),this.wm=new Gf(this.peerId,this.network,this._stats,t),this.notifications=new hp(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(t,e){try{await this.engine.messageReceived(t,e)}catch(t){this._log("failed to receive message",e)}if(0===e.blocks.size)return;const i=[];for(const[t,r]of e.blocks.entries()){const e=A.CID.parse(t);i.push({wasWanted:this.wm.wantlist.contains(e),cid:e,data:r})}this.wm.cancelWants(i.filter((({wasWanted:t})=>t)).map((({cid:t})=>t))),await Promise.all(i.map((({cid:e,wasWanted:i,data:r})=>this._handleReceivedBlock(t,e,r,i))))}async _handleReceivedBlock(t,e,i,r){this._log("received block");const n=await this.blockstore.has(e);this._updateReceiveCounters(t.toB58String(),e,i,n),r&&await this.put(e,i)}_updateReceiveCounters(t,e,i,r){this._stats.push(t,"blocksReceived",1),this._stats.push(t,"dataReceived",i.length),r&&(this._stats.push(t,"dupBlksReceived",1),this._stats.push(t,"dupDataReceived",i.length))}_receiveError(t){this._log.error("ReceiveError: %s",t.message)}_onPeerConnected(t){this.wm.connected(t)}_onPeerDisconnected(t){this.wm.disconnected(t),this.engine.peerDisconnected(t),this._stats.disconnected(t)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(t,e){return this.engine.wantlistForPeer(t)}ledgerForPeer(t){return this.engine.ledgerForPeer(t)}async get(t,e={}){const i=(t,e)=>(this.wm.wantBlocks([t],e),this.notifications.wantBlock(t,e));let r=!1;const n=new AbortController,s=e.signal?(0,Ft.anySignal)([e.signal,n.signal]):n.signal,o=await Promise.race([this.notifications.wantBlock(t,{signal:s}),(async(t,e)=>{try{return await this.blockstore.get(t,e)}catch(n){if("ERR_NOT_FOUND"!==n.code)throw n;return r||(r=!0,this.network.findAndConnect(t).catch((t=>this._log.error(t)))),i(t,e)}})(t,{signal:s})]);return n.abort(),o}async*getMany(t,e={}){for await(const i of t)yield this.get(i,e)}unwant(t){const e=Array.isArray(t)?t:[t];this.wm.unwantBlocks(e),e.forEach((t=>this.notifications.unwantBlock(t)))}cancelWants(t){this.wm.cancelWants(Array.isArray(t)?t:[t])}async put(t,e,i){await this.blockstore.put(t,e),this._sendHaveBlockNotifications(t,e)}async*putMany(t,e){for await(const{key:i,value:r}of this.blockstore.putMany(t,e))this._sendHaveBlockNotifications(i,r),yield{key:i,value:r}}_sendHaveBlockNotifications(t,e){this.notifications.hasBlock(t,e),this.engine.receivedBlocks([{cid:t,data:e}]),this.network.provide(t).catch((t=>{this._log.error("Failed to provide: %s",t.message)}))}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}}function yp(t){return t=t||new Error("Not Found"),u(t,"ERR_NOT_FOUND")}function mp(t){return t=t||new Error("Aborted"),u(t,"ERR_ABORTED")}class vp extends bc{constructor(t,e){super(),this.child=t,this.bitswap=e}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(t,e,i={}){await this.has(t)||(this.bitswap.isStarted()?await this.bitswap.put(t,e,i):await this.child.put(t,e,i))}async*putMany(t,e={}){const i=tr(t,(async({key:t})=>!await this.has(t)));this.bitswap.isStarted()?yield*this.bitswap.putMany(i,e):yield*this.child.putMany(i,e)}async get(t,e={}){return!await this.has(t)&&this.bitswap.isStarted()?this.bitswap.get(t,e):this.child.get(t,e)}async*getMany(t,e={}){const i=Kh(),r=Kh();Promise.resolve().then((async()=>{for await(const e of t)!await this.has(e)&&this.bitswap.isStarted()?i.push(e):r.push(e);i.end(),r.end()})),yield*oc(this.bitswap.getMany(i,e),this.child.getMany(r,e))}async delete(t,e){await this.child.delete(t,e)}async*deleteMany(t,e){yield*this.child.deleteMany(t,e)}async has(t,e={}){return this.child.has(t,e)}async*query(t,e={}){yield*this.child.query(t,e)}async*queryKeys(t,e={}){yield*this.child.queryKeys(t,e)}}class bp{constructor(t,e,i,r,n){this.peerId=t,this.libp2p=e,this.bitswap=i,this.repo=r,this.blockstore=n}static async start({peerId:t,repo:e,print:i,hashers:r,options:n}){e.closed&&await e.open();const s=await e.config.getAll(),o=await uf({options:n,repo:e,peerId:t,multiaddrs:wp(t,s),config:s,keychainConfig:void 0});o.keychain&&await o.loadKeychain(),await o.start();for(const e of o.multiaddrs)i(`Swarm listening on ${e}/p2p/${t.toB58String()}`);const a=((t,e,i={})=>new gp(t,e,i))(o,e.blocks,{statsEnabled:!0,hashLoader:r});await a.start();const h=new vp(e.blocks,a);return e.blocks=h,e.pins.blockstore=h,new bp(t,o,a,e,h)}static async stop(t){t.repo.blocks=t.blockstore.unwrap(),t.repo.pins.blockstore=t.blockstore.unwrap(),await t.bitswap.stop(),await t.libp2p.stop()}}const wp=(t,e)=>{const i=t.toB58String(),r=[],n=e.Addresses&&e.Addresses.Swarm||[];for(const t of n){let e=new $i.Multiaddr(t);if(e.protoCodes().includes(_p))throw u(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");const n=e.getPeerId();n&&n!==i&&(e=e.encapsulate(`/p2p/${i}`)),r.push(e)}return r},_p=479;class xp{constructor({network:t}){this.addrs=function({network:t}){return Yt((async function(e={}){const i=[],{libp2p:r}=await t.use(e);for await(const t of r.peerStore.getPeers())i.push({id:t.id.toB58String(),addrs:t.addresses.map((t=>t.multiaddr))});return i}))}({network:t}),this.connect=function({network:t}){return Yt((async function(e,i={}){const{libp2p:r}=await t.use(i);await r.dial(e,i)}))}({network:t}),this.disconnect=function({network:t}){return Yt((async function(e,i={}){const{libp2p:r}=await t.use(i);await r.hangUp(e)}))}({network:t}),this.localAddrs=function({network:t}){return Yt((async function(e={}){const{libp2p:i}=await t.use(e);return i.multiaddrs}))}({network:t}),this.peers=function({network:t}){return Yt((async function(e={}){const{libp2p:i}=await t.use(e),r=[];for(const[t,n]of i.connections)for(const i of n){const n={addr:i.remoteAddr,peer:t};(e.verbose||e.direction)&&(n.direction=i.stat.direction),e.verbose&&(n.muxer=i.stat.multiplexer,n.latency="n/a",n.streams=[]),r.push(n)}return r}))}({network:t})}}const Ep={success:!0,time:0,text:""},Sp="/ipns/";function Tp(t){let e;if(t.startsWith(Sp)&&(t=t.substring(Sp.length)),"1"!==t[0]&&"Q"!==t[0]||(t=`z${t}`),"z"===t[0]&&(e=di.base58btc.decode(t)),"k"===t[0]&&(e=Oi.base36.decode(t)),!e)throw new Error("Could not parse string");if(1!==e[0]&&114!==e[1]&&(e=(0,Ee.concat)([[1,114],e])),40!==e.length)throw new Error("Incorrect length "+e.length);return(0,Ee.concat)([(0,Bt.fromString)(Sp),e.subarray(2)])}function Ap(t){if("SENDING_QUERY"===t.name)return{type:t.type,name:t.name,to:t.to.toB58String()};if("PEER_RESPONSE"===t.name)return{type:t.type,name:t.name,messageType:t.messageType,messageName:t.messageName,closer:t.closer.map((({id:t,multiaddrs:e})=>({id:t.toB58String(),multiaddrs:e}))),providers:t.providers.map((({id:t,multiaddrs:e})=>({id:t.toB58String(),multiaddrs:e}))),record:t.record,from:t.from.toB58String()};if("FINAL_PEER"===t.name)return{type:t.type,name:t.name,from:t.from.toB58String(),peer:{id:t.peer.id.toB58String(),multiaddrs:t.peer.multiaddrs}};if("QUERY_ERROR"===t.name)return{type:t.type,name:t.name,error:t.error,from:t.from.toB58String()};if("PROVIDER"===t.name)return{type:t.type,name:t.name,providers:t.providers.map((({id:t,multiaddrs:e})=>({id:t.toB58String(),multiaddrs:e}))),from:t.from.toB58String()};if("VALUE"===t.name)return{type:t.type,name:t.name,value:t.value,from:t.from.toB58String()};if("ADDING_PEER"===t.name)return{type:t.type,name:t.name,peer:t.peer.toB58String()};if("DIALING_PEER"===t.name)return{type:t.type,name:t.name,peer:t.peer.toB58String()};throw u(new Error("Unknown DHT event type"),"ERR_UNKNOWN_DHT_EVENT")}const Cp=async(t,e,i)=>{const r=await t.use(i);if(ui(r.libp2p,"_config.dht.enabled",!1))return r;{const t=async function*(){yield{from:e,name:"QUERY_ERROR",type:3,error:new Dt("dht not enabled")}};return{libp2p:{_dht:{get:t,put:t,findProvs:t,findPeer:t,provide:t,query:t}}}}},kp=async()=>{throw new Dt("pubsub not enabled")},Rp=h.bind({ignoreUndefined:!0}),Pp=Object.assign(l("ipfs"),{error:l("ipfs:error")});class Ip{constructor({print:t,storage:e,codecs:i,options:r}){const{peerId:n,repo:s,keychain:o}=e,a=ie.create(bp),h=fs(r.preload),c=Yt((async(t,e={recursive:!0})=>{if("string"!=typeof t)throw new Error("Invalid arguments, domain must be a string");return async function(t,e){return(async(t,e={})=>{const i=new URLSearchParams(e);i.set("arg",t);const r=i.toString();if(!e.nocache&&oe.has(r)){const t=oe.get(r);return he(t)}const n=await ae.add((async()=>{const t=await se.get("https://ipfs.io/api/v0/dns",{searchParams:i}),e=new URL(t.url).search.slice(1),r=await t.json();return oe.set(e,r,6e4),r}));return he(n)})(t,e)}(t=function(t){return t.endsWith(".eth")&&(t=t.replace(/.eth$/,".eth.link")),t}(t),e)})),l=function({network:t}){return()=>{const e=t.try();return null!=e&&Boolean(e.libp2p.isStarted())}}({network:a}),d=new Ri(r),f=Object.values(Ct.kq);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach((t=>f.push(t))),this.hashers=new Dc({hashers:f,loadHasher:r.ipld&&r.ipld.loadHasher});const p=Object.values(Ct.gh);(r.ipld&&r.ipld.bases?r.ipld.bases:[]).forEach((t=>p.push(t))),this.bases=new Pc({bases:p,loadBase:r.ipld&&r.ipld.loadBase});const g=new ge({repo:s,codecs:i}),y=new rr({codecs:i,hashers:this.hashers,preload:h,repo:s}),m=new Fi({dns:c,ipns:d,repo:s,codecs:i,peerId:n,isOnline:l,keychain:o,options:r}),v=function({repo:t,codecs:e,bases:i,name:r}){return Yt((async function(n,s={}){if(!Lt.path(n))throw new Error("invalid argument "+n);if(Lt.ipnsPath(n))for await(const t of r.resolve(n,s))n=t;const[,o,a,...h]=n.split("/"),c=s.cidBase?await i.getBase(s.cidBase):void 0,l=function(t){try{return ce.parse(t).toBytes()}catch{return A.CID.parse(t).bytes}}(a);if(0===h.length)return`/${o}/${c?c.encoder.encode(l):a}`;const u=A.CID.decode(l);n=h.join("/");const d=ee(u,n,e,t,s);let f=u,p=n;for await(const t of d)A.CID.asCID(t.value)&&(f=t.value,p=t.remainderPath);return`/ipfs/${f.toString(c&&c.encoder)}${p?"/"+p:""}`}))}({repo:s,codecs:i,bases:this.bases,name:m}),b=new os({repo:s,codecs:i,hashers:this.hashers,preload:h}),w=Object.assign(function({repo:t,codecs:e,resolve:i,preload:r}){return async function*(n,s={}){if(0===s.maxDepth)return;if(s.edges&&s.format&&s.format!==ji)throw new Error("Cannot set edges to true and also specify format");if(s.format=s.edges?"<src> -> <dst>":s.format,"number"!=typeof s.maxDepth&&(s.maxDepth=s.recursive?1/0:1),s.timeout){const t=[new Ut.TimeoutController(s.timeout).signal];s.signal&&t.push(s.signal),s.signal=(0,Ft.anySignal)(t)}const o=(Array.isArray(n)?n:[n]).map((t=>function(t,e,i){const{cid:r,path:n}=Wt(e);return!1!==i.preload&&t(r),`/ipfs/${r}${n||""}`}(r,t,s)));for(const r of o)try{yield*Vi(i,t,e,r,s)}catch(t){yield{ref:"",err:t.message}}}}({repo:s,codecs:i,resolve:v,preload:h}),{local:Yi({repo:e.repo})}),{add:_,addAll:x,cat:E,get:S,ls:T}=new En({preload:h,repo:s,options:r.EXPERIMENTAL,hashers:this.hashers}),C=function({repo:t,preload:e,hashers:i,options:r}){const n=function(t){const{repoOwner:e}=Object.assign({},Ko||{},t),i=ms(e),r={};return Yo({options:t,mfs:r,operations:Vo,lock:t=>i.readLock(t)}),Yo({options:t,mfs:r,operations:Go,lock:t=>i.writeLock(t)}),Object.keys(Ho).forEach((e=>{r[e]=Ho[e](t)})),r}({repo:t,repoOwner:Boolean(r.repoOwner),hashers:i}),s=t=>(...i)=>{const r=i.filter((t=>Lt.ipfsPath(t)||Lt.cid(t)));if(r.length){const t=i[i.length-1];t&&!1!==t.preload&&r.forEach((t=>e(t)))}return t(...i)};return{...n,chmod:n.chmod,cp:s(n.cp),mkdir:n.mkdir,stat:s(n.stat),rm:n.rm,read:s(n.read),touch:n.touch,write:n.write,mv:s(n.mv),flush:n.flush,ls:s((async function*(...t){for await(const e of n.ls(...t))yield{...e,size:e.size||0}}))}}({repo:s,preload:h,hashers:this.hashers,options:r}),k=function({preload:t,files:e,options:i={}}){if(i.interval=i.interval||3e4,!i.enabled){ps("MFS preload disabled");const t=async()=>{};return{start:t,stop:t}}let r,n="";const s=async()=>{try{const o=await e.stat("/"),a=o.cid.toString();n!==a&&(ps(`preloading updated MFS root ${n} -> ${o.cid}`),await t(o.cid),n=a)}catch(t){ps.error("failed to preload MFS root",t)}finally{r=setTimeout(s,i.interval)}};return{async start(){const t=await e.stat("/");n=t.cid.toString(),ps(`monitoring MFS root ${t.cid}`),r=setTimeout(s,i.interval)},stop(){clearTimeout(r)}}}({files:C,preload:h,options:r.preload});this.preload=h,this.name=m,this.ipns=d,this.pin=g,this.resolve=v,this.block=y,this.refs=w,this.start=function({network:t,preload:e,peerId:i,keychain:r,repo:n,ipns:s,mfsPreload:o,print:a,hashers:h,options:c}){return async()=>{const{libp2p:l}=await ie.start(t,{peerId:i,repo:n,print:a,hashers:h,options:c});await Promise.all([s.startOnline({keychain:r,libp2p:l,peerId:i,repo:n}),e.start(),o.start()])}}({network:a,peerId:n,repo:s,preload:h,ipns:d,mfsPreload:k,print:t,keychain:o,hashers:this.hashers,options:r}),this.stop=function({network:t,preload:e,ipns:i,repo:r,mfsPreload:n}){return async()=>{await Promise.all([e.stop(),i.stop(),n.stop()]),await ie.stop(t),await r.close()}}({network:a,preload:h,mfsPreload:k,ipns:d,repo:s}),this.dht=function({network:t,repo:e,peerId:i}){const{get:r,put:n,findProvs:s,findPeer:o,provide:a,query:h}={async*get(e,r={}){const{libp2p:n}=await Cp(t,i,r),s=e instanceof Uint8Array?e:Tp(e);yield*Qi(n._dht.get(s,r),Ap)},async*put(e,r,n){const{libp2p:s}=await Cp(t,i,n),o=e instanceof Uint8Array?e:Tp(e);yield*Qi(s._dht.put(o,r),Ap)},async*findProvs(e,r={}){const{libp2p:n}=await Cp(t,i,r);yield*Qi(n._dht.findProviders(e,{signal:r.signal}),Ap)},async*findPeer(e,r={}){const{libp2p:n}=await Cp(t,i,r);yield*Qi(n._dht.findPeer(ce.parse(e),{signal:r.signal}),Ap)},async*provide(r,n={recursive:!1}){const{libp2p:s}=await Cp(t,i,n);if(!await e.blocks.has(r))throw u(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(n.recursive)throw u(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");yield*Qi(s._dht.provide(r),Ap)},async*query(e,r={}){const{libp2p:n}=await Cp(t,i,r);let s;const o=A.CID.asCID(e);s=null!=o?o.multihash.bytes:ce.parse(e.toString()).toBytes(),yield*Qi(n._dht.getClosestPeers(s,r),Ap)}};return{get:Yt(r),put:Yt(n),findProvs:Yt(s),findPeer:Yt(o),provide:Yt(a),query:Yt(h)}}({network:a,repo:s,peerId:n}),this.pubsub=function({network:t,config:e}){const i=ui(e||{},"Pubsub.Enabled",!0);return{subscribe:i?Yt((async function(e,i,r={}){const{libp2p:n}=await t.use(r);return n.pubsub.subscribe(e,i,r)})):kp,unsubscribe:i?Yt((async function(e,i,r={}){const{libp2p:n}=await t.use(r);n.pubsub.unsubscribe(e,i,r)})):kp,publish:i?Yt((async function(e,i,r={}){const{libp2p:n}=await t.use(r);if(!i)throw u(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await n.pubsub.publish(e,i)})):kp,ls:i?Yt((async function(e={}){const{libp2p:i}=await t.use(e);return i.pubsub.getTopics()})):kp,peers:i?Yt((async function(e,i={}){const{libp2p:r}=await t.use(i);return r.pubsub.getSubscribers(e)})):kp}}({network:a,config:r.config}),this.dns=c,this.isOnline=l,this.id=function({peerId:t,network:e}){return Yt((async function(i={}){const r=e.try();if(!r){if(i.peerId)throw new It;return{id:t.toB58String(),publicKey:(0,me.toString)(t.pubKey.bytes,"base64pad"),addresses:[],agentVersion:"js-ipfs/0.14.3",protocolVersion:"9000",protocols:[]}}const{libp2p:n}=r,s=i.peerId?ce.parse(i.peerId):t,o=await async function(t,e,i){let r=await e.peerStore.get(t);r||(r=await async function(t,e,i){for await(const r of e._dht.findPeer(t,i))if("FINAL_PEER"===r.name)break;const r=await e.peerStore.get(t);if(!r)throw u(new Error("Could not find peer"),"ERR_NOT_FOUND");return r}(t,e,i));let n=t.pubKey?t.pubKey:await e.peerStore.keyBook.get(t);if(!n)try{n=await e._dht.getPublicKey(t,i)}catch(e){Tn.error("Could not load public key for",t.toB58String(),e)}return{...r,publicKey:n,metadata:r.metadata||new Map,addresses:r.addresses.map((t=>t.multiaddr))}}(s,n,i),a=(0,me.toString)(o.metadata.get("AgentVersion")||new Uint8Array),h=(0,me.toString)(o.metadata.get("ProtocolVersion")||new Uint8Array),c=o.id.toB58String(),l=o.publicKey?(0,me.toString)(o.publicKey.bytes,"base64pad"):"";return{id:c,publicKey:l,addresses:(o.addresses||[]).map((t=>{const e=t.toString();return e.endsWith(`/p2p/${c}`)?e:`${e}/p2p/${c}`})).sort().map((t=>new $i.Multiaddr(t))),agentVersion:a,protocolVersion:h,protocols:(o.protocols||[]).sort()}}))}({network:a,peerId:n}),this.version=function({repo:t}){return Yt((async function(e={}){const i=await t.version.get();return{version:Sn,commit:"",repo:`${i}`,"ipfs-core":Sn,"interface-ipfs-core":"^0.154.3"}}))}({repo:s}),this.bitswap=new Wi({network:a}),this.bootstrap=new Ji({repo:s}),this.config=function({repo:t}){return{getAll:Yt((async function(e={}){return t.config.getAll(e)})),get:Yt((async function(e,i){return e?t.config.get(e,i):Promise.reject(new Error("key argument is required"))})),set:Yt((async function(e,i,r){return t.config.set(e,i,r)})),replace:Yt((async function(e,i){return t.config.replace(e,i)})),profiles:{apply:Yt((async function(e,i={dryRun:!1}){const{dryRun:r}=i,n=Cn[e];if(!n)throw new Error(`No profile with name '${e}' exists`);try{const e=await t.config.getAll(i);let s=JSON.parse(JSON.stringify(e));return s=n.transform(s),r||await t.config.replace(s,i),delete e.Identity.PrivKey,delete s.Identity.PrivKey,{original:e,updated:s}}catch(t){throw kn(t),new Error(`Could not apply profile '${e}' to config: ${t.message}`)}})),list:Yt(Rn)}}}({repo:s}),this.ping=function({network:t}){return Yt((async function*(e,i={}){const{libp2p:r}=await t.use();i.count=i.count||10;const n=ce.createFromB58String(e),s=await r.peerStore.get(n);let o=s&&s.id;if(!o){yield{...Ep,text:`Looking up peer ${e}`};const t=await r.peerRouting.findPeer(n);o=t&&t.id}if(!o)throw new Error("Peer was not found");yield{...Ep,text:`PING ${o.toB58String()}`};let a=0,h=0;for(let t=0;t<i.count;t++)try{const t=await r.ping(o);h+=t,a++,yield{...Ep,time:t}}catch(t){yield{...Ep,success:!1,text:t.toString()}}if(a){const t=h/a;yield{...Ep,text:`Average latency: ${t}ms`}}}))}({network:a}),this.add=_,this.addAll=x,this.cat=E,this.get=S,this.ls=T,this.dag=b,this.files=C,this.key=new Xo({keychain:o}),this.object=new ta({preload:h,codecs:i,repo:s}),this.repo=new ra({repo:s,hashers:this.hashers}),this.stats=new sa({repo:s,network:a}),this.swarm=new xp({network:a}),Object.defineProperty(this,"libp2p",{get(){const t=a.try();return t?t.libp2p:void 0}});const R=()=>Promise.reject(u(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED"));this.commands=R,this.diag={cmds:R,net:R,sys:R},this.log={level:R,ls:R,tail:async function*(){throw u(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}},this.mount=R,this.codecs=i}async init(){throw new Pt}}i(64009);const Op=async function(t={}){const e=(t=Rp({start:!0,EXPERIMENTAL:{},preload:{enabled:!c.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}},t)).init||{},i={name:At.identity.name,code:At.identity.code,encode:t=>t,decode:t=>t},o=Object.values(Ct.QB);[r,n,s,Tt,i].concat(t.ipld&&t.ipld.codecs||[]).forEach((t=>o.push(t)));const a=new Oc({codecs:o,loadCodec:t.ipld&&t.ipld.loadCodec}),h=t.silent?Pp:console.log;Pp("creating repo");const l=await pf.start(h,a,t);Pp("getting repo config");const u=await l.repo.config.getAll(),d=new Ip({storage:l,print:h,codecs:a,options:{...t,config:u}});if(Pp("starting preload"),await d.preload.start(),Pp("starting storage"),d.ipns.startOffline(l),l.isNew&&!e.emptyRepo){const t=await(async t=>{const e=J({Data:new T({type:"directory"}).marshal(),Links:[]}),i=await t.block.put(e,{mhtype:"sha2-256",format:"dag-pb"});return await t.pin.add(i),i})(d);Pp("adding default assets"),await void d.addAll,Pp("initializing IPNS keyspace"),await d.ipns.initializeKeyspace(l.peerId.privKey,(0,Bt.fromString)(`/ipfs/${t}`))}return!1!==t.start&&(Pp("starting node"),await d.start()),d}},89880:(t,e,i)=>{"use strict";i.d(e,{kU:()=>l,Dp:()=>c,ET:()=>u});var r=i(95934);class n{constructor(t,e,i){this.name=t,this.prefix=e,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class s{constructor(t,e,i){this.name=t,this.prefix=e,this.baseDecode=i}decode(t){if("string"==typeof t){if(t[0]===this.prefix)return this.baseDecode(t.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(t){return a(this,t)}}class o{constructor(t){this.decoders=t}or(t){return a(this,t)}decode(t){const e=t[0],i=this.decoders[e];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const a=(t,e)=>new o({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class h{constructor(t,e,i,r){this.name=t,this.prefix=e,this.baseEncode=i,this.baseDecode=r,this.encoder=new n(t,e,i),this.decoder=new s(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const c=({name:t,prefix:e,encode:i,decode:r})=>new h(t,e,i,r),l=({prefix:t,name:e,alphabet:i})=>{const{encode:n,decode:s}=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(255!==i[o])throw new TypeError(s+" is ambiguous");i[o]=n}var a=t.length,h=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function u(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var r=0,n=0;t[e]===h;)r++,e++;for(var s=(t.length-e)*c+1>>>0,o=new Uint8Array(s);t[e];){var l=i[t.charCodeAt(e)];if(255===l)return;for(var u=0,d=s-1;(0!==l||u<n)&&-1!==d;d--,u++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");n=u,e++}if(" "!==t[e]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var i=0,r=0,n=0,s=e.length;n!==s&&0===e[n];)n++,i++;for(var o=(s-n)*l+1>>>0,c=new Uint8Array(o);n!==s;){for(var u=e[n],d=0,f=o-1;(0!==u||d<r)&&-1!==f;f--,d++)u+=256*c[f]>>>0,c[f]=u%a>>>0,u=u/a>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,n++}for(var p=o-r;p!==o&&0===c[p];)p++;for(var g=h.repeat(i);p<o;++p)g+=t.charAt(c[p]);return g},decodeUnsafe:u,decode:function(t){var i=u(t);if(i)return i;throw new Error(`Non-${e} character`)}}}(i,e);return c({prefix:t,name:e,encode:n,decode:t=>(0,r.coerce)(s(t))})},u=({name:t,prefix:e,bitsPerChar:i,alphabet:r})=>c({prefix:e,name:t,encode:t=>((t,e,i)=>{const r="="===e[e.length-1],n=(1<<i)-1;let s="",o=0,a=0;for(let r=0;r<t.length;++r)for(a=a<<8|t[r],o+=8;o>i;)o-=i,s+=e[n&a>>o];if(o&&(s+=e[n&a<<i-o]),r)for(;s.length*i&7;)s+="=";return s})(t,r,i),decode:e=>((t,e,i,r)=>{const n={};for(let t=0;t<e.length;++t)n[e[t]]=t;let s=t.length;for(;"="===t[s-1];)--s;const o=new Uint8Array(s*i/8|0);let a=0,h=0,c=0;for(let e=0;e<s;++e){const s=n[t[e]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);h=h<<i|s,a+=i,a>=8&&(a-=8,o[c++]=255&h>>a)}if(a>=i||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o})(e,r,i,t)})},84835:(t,e,i)=>{"use strict";i.r(e),i.d(e,{base16:()=>n,base16upper:()=>s});var r=i(89880);const n=(0,r.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),s=(0,r.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})},22817:(t,e,i)=>{"use strict";i.r(e),i.d(e,{base32:()=>n,base32hex:()=>h,base32hexpad:()=>l,base32hexpadupper:()=>u,base32hexupper:()=>c,base32pad:()=>o,base32padupper:()=>a,base32upper:()=>s,base32z:()=>d});var r=i(89880);const n=(0,r.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,r.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o=(0,r.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,r.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),h=(0,r.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c=(0,r.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,r.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),u=(0,r.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,r.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},98441:(t,e,i)=>{"use strict";i.r(e),i.d(e,{base36:()=>n,base36upper:()=>s});var r=i(89880);const n=(0,r.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),s=(0,r.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},99086:(t,e,i)=>{"use strict";i.r(e),i.d(e,{base58btc:()=>n,base58flickr:()=>s});var r=i(89880);const n=(0,r.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,r.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},9885:(t,e,i)=>{"use strict";i.r(e),i.d(e,{base64:()=>n,base64pad:()=>s,base64url:()=>o,base64urlpad:()=>a});var r=i(89880);const n=(0,r.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,r.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),o=(0,r.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,r.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},48789:(t,e,i)=>{"use strict";i.d(e,{gh:()=>x,QB:()=>S,kq:()=>E});var r={};i.r(r),i.d(r,{identity:()=>c});var n={};i.r(n),i.d(n,{base2:()=>l});var s={};i.r(s),i.d(s,{base8:()=>u});var o={};i.r(o),i.d(o,{base10:()=>d});var a=i(89880),h=i(95934);const c=(0,a.Dp)({prefix:"\0",name:"identity",encode:t=>(0,h.toString)(t),decode:t=>(0,h.fromString)(t)}),l=(0,a.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),u=(0,a.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),d=(0,a.kU)({prefix:"9",name:"base10",alphabet:"0123456789"});var f=i(84835),p=i(22817),g=i(98441),y=i(99086),m=i(9885),v=i(56155),b=i(78103),w=i(96945),_=i(40950);i(16441);const x={...r,...n,...s,...o,...f,...p,...g,...y,...m},E={...v,...b},S={raw:w,json:_}},95934:(t,e,i)=>{"use strict";i.r(e),i.d(e,{coerce:()=>a,empty:()=>r,equals:()=>o,fromHex:()=>s,fromString:()=>c,isBinary:()=>h,toHex:()=>n,toString:()=>l});const r=new Uint8Array(0),n=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),s=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map((t=>parseInt(t,16)))):r},o=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let i=0;i<t.byteLength;i++)if(t[i]!==e[i])return!1;return!0},a=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},h=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),c=t=>(new TextEncoder).encode(t),l=t=>(new TextDecoder).decode(t)},81362:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CID:()=>h});var r=i(4714),n=i(28924),s=i(99086),o=i(22817),a=i(95934);class h{constructor(t,e,i,r){this.code=e,this.version=t,this.multihash=i,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:m,byteLength:m,code:y,version:y,multihash:y,bytes:y,_baseCache:m,asCID:m})}toV0(){if(0===this.version)return this;{const{code:t,multihash:e}=this;if(t!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==f)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return h.createV0(e)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,i=n.create(t,e);return h.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&n.equals(this.multihash,t.multihash)}toString(t){const{bytes:e,version:i,_baseCache:r}=this;return 0===i?l(e,r,t||s.base58btc.encoder):u(e,r,t||o.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return v(/^0\.0/,b),!(!t||!t[g]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof h)return t;if(null!=t&&t.asCID===t){const{version:e,code:i,multihash:r,bytes:n}=t;return new h(e,i,r,n||p(e,i,r.bytes))}if(null!=t&&!0===t[g]){const{version:e,multihash:i,code:r}=t,s=n.decode(i);return h.create(e,r,s)}return null}static create(t,e,i){if("number"!=typeof e)throw new Error("String codecs are no longer supported");switch(t){case 0:if(e!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new h(t,e,i,i.bytes);case 1:{const r=p(t,e,i.bytes);return new h(t,e,i,r)}default:throw new Error("Invalid version")}}static createV0(t){return h.create(0,d,t)}static createV1(t,e){return h.create(1,t,e)}static decode(t){const[e,i]=h.decodeFirst(t);if(i.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=h.inspectBytes(t),i=e.size-e.multihashSize,r=(0,a.coerce)(t.subarray(i,i+e.multihashSize));if(r.byteLength!==e.multihashSize)throw new Error("Incorrect length");const s=r.subarray(e.multihashSize-e.digestSize),o=new n.Digest(e.multihashCode,e.digestSize,s,r);return[0===e.version?h.createV0(o):h.createV1(e.codec,o),t.subarray(e.size)]}static inspectBytes(t){let e=0;const i=()=>{const[i,n]=r.Jx(t.subarray(e));return e+=n,i};let n=i(),s=d;if(18===n?(n=0,e=0):1===n&&(s=i()),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const o=e,a=i(),h=i(),c=e+h;return{version:n,codec:s,multihashCode:a,digestSize:h,multihashSize:c-o,size:c}}static parse(t,e){const[i,r]=c(t,e),n=h.decode(r);return n._baseCache.set(i,t),n}}const c=(t,e)=>{switch(t[0]){case"Q":{const i=e||s.base58btc;return[s.base58btc.prefix,i.decode(`${s.base58btc.prefix}${t}`)]}case s.base58btc.prefix:{const i=e||s.base58btc;return[s.base58btc.prefix,i.decode(t)]}case o.base32.prefix:{const i=e||o.base32;return[o.base32.prefix,i.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},l=(t,e,i)=>{const{prefix:r}=i;if(r!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${i.name} encoding`);const n=e.get(r);if(null==n){const n=i.encode(t).slice(1);return e.set(r,n),n}return n},u=(t,e,i)=>{const{prefix:r}=i,n=e.get(r);if(null==n){const n=i.encode(t);return e.set(r,n),n}return n},d=112,f=18,p=(t,e,i)=>{const n=r.P$(t),s=n+r.P$(e),o=new Uint8Array(s+i.byteLength);return r.mL(t,o,0),r.mL(e,o,n),o.set(i,s),o},g=Symbol.for("@ipld/js-cid/CID"),y={writable:!1,configurable:!1,enumerable:!0},m={writable:!1,enumerable:!1,configurable:!1},v=(t,e)=>{if(!t.test("0.0.0-dev"))throw new Error(e);console.warn(e)},b="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},40950:(t,e,i)=>{"use strict";i.r(e),i.d(e,{code:()=>o,decode:()=>h,encode:()=>a,name:()=>s});const r=new TextEncoder,n=new TextDecoder,s="json",o=512,a=t=>r.encode(JSON.stringify(t)),h=t=>JSON.parse(n.decode(t))},96945:(t,e,i)=>{"use strict";i.r(e),i.d(e,{code:()=>s,decode:()=>a,encode:()=>o,name:()=>n});var r=i(95934);const n="raw",s=85,o=t=>(0,r.coerce)(t),a=t=>(0,r.coerce)(t)},28924:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Digest:()=>h,create:()=>s,decode:()=>o,equals:()=>a});var r=i(95934),n=i(4714);const s=(t,e)=>{const i=e.byteLength,r=n.P$(t),s=r+n.P$(i),o=new Uint8Array(s+i);return n.mL(t,o,0),n.mL(i,o,r),o.set(e,s),new h(t,i,e,o)},o=t=>{const e=(0,r.coerce)(t),[i,s]=n.Jx(e),[o,a]=n.Jx(e.subarray(s)),c=e.subarray(s+a);if(c.byteLength!==o)throw new Error("Incorrect length");return new h(i,o,c,e)},a=(t,e)=>t===e||t.code===e.code&&t.size===e.size&&(0,r.equals)(t.bytes,e.bytes);class h{constructor(t,e,i,r){this.code=t,this.size=e,this.digest=i,this.bytes=r}}},7225:(t,e,i)=>{"use strict";i.d(e,{D:()=>n});var r=i(28924);const n=({name:t,code:e,encode:i})=>new s(t,e,i);class s{constructor(t,e,i){this.name=t,this.code=e,this.encode=i}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?r.create(this.code,e):e.then((t=>r.create(this.code,t)))}throw Error("Unknown type, must be binary type")}}},78103:(t,e,i)=>{"use strict";i.r(e),i.d(e,{identity:()=>o});var r=i(95934),n=i(28924);const s=r.coerce,o={code:0,name:"identity",encode:s,digest:t=>n.create(0,s(t))}},56155:(t,e,i)=>{"use strict";i.r(e),i.d(e,{sha256:()=>s,sha512:()=>o});var r=i(7225);const n=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),s=(0,r.D)({name:"sha2-256",code:18,encode:n("SHA-256")}),o=(0,r.D)({name:"sha2-512",code:19,encode:n("SHA-512")})},16441:(t,e,i)=>{"use strict";i.d(e,{aI:()=>n,k0:()=>r.CID});var r=i(81362),n=(i(4714),i(95934));i(7225),i(28924)},4714:(t,e,i)=>{"use strict";i.d(e,{Jx:()=>p,mL:()=>g,P$:()=>y});var r=Math.pow(2,31),n=Math.pow(2,7),s=Math.pow(2,14),o=Math.pow(2,21),a=Math.pow(2,28),h=Math.pow(2,35),c=Math.pow(2,42),l=Math.pow(2,49),u=Math.pow(2,56),d=Math.pow(2,63);const f={encode:function t(e,i,n){i=i||[];for(var s=n=n||0;e>=r;)i[n++]=255&e|128,e/=128;for(;-128&e;)i[n++]=255&e|128,e>>>=7;return i[n]=0|e,t.bytes=n-s+1,i},decode:function t(e,i){var r,n=0,s=0,o=i=i||0,a=e.length;do{if(o>=a)throw t.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return t.bytes=o-i,n},encodingLength:function(t){return t<n?1:t<s?2:t<o?3:t<a?4:t<h?5:t<c?6:t<l?7:t<u?8:t<d?9:10}},p=t=>[f.decode(t),f.decode.bytes],g=(t,e,i=0)=>(f.encode(t,e,i),e),y=t=>f.encodingLength(t)},64296:(t,e,i)=>{"use strict";i.r(e),i.d(e,{customAlphabet:()=>o,customRandom:()=>s,nanoid:()=>a,random:()=>n,urlAlphabet:()=>r});let r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",n=t=>crypto.getRandomValues(new Uint8Array(t)),s=(t,e,i)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*r*e/t.length);return(s=e)=>{let o="";for(;;){let e=i(n),a=n;for(;a--;)if(o+=t[e[a]&r]||"",o.length===s)return o}}},o=(t,e=21)=>s(t,e,n),a=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")),"")},18764:(t,e,i)=>{"use strict";function r(t,e){for(let i=0;i<t.byteLength;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}i.r(e),i.d(e,{compare:()=>r})},20605:(t,e,i)=>{"use strict";function r(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const i=new Uint8Array(e);let r=0;for(const e of t)i.set(e,r),r+=e.length;return i}i.r(e),i.d(e,{concat:()=>r})},19588:(t,e,i)=>{"use strict";function r(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let i=0;i<t.byteLength;i++)if(t[i]!==e[i])return!1;return!0}i.r(e),i.d(e,{equals:()=>r})},52217:(t,e,i)=>{"use strict";i.r(e),i.d(e,{fromString:()=>n});var r=i(67645);function n(t,e="utf8"){const i=r.Z[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return i.decoder.decode(`${i.prefix}${t}`)}},37466:(t,e,i)=>{"use strict";i.r(e),i.d(e,{compare:()=>r.compare,concat:()=>n.concat,equals:()=>s.equals,fromString:()=>o.fromString,toString:()=>a.toString,xor:()=>h.xor});var r=i(18764),n=i(20605),s=i(19588),o=i(52217),a=i(92263),h=i(45599)},92263:(t,e,i)=>{"use strict";i.r(e),i.d(e,{toString:()=>n});var r=i(67645);function n(t,e="utf8"){const i=r.Z[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return i.encoder.encode(t).substring(1)}},67645:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var r=i(48789);function n(t,e,i,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:i},decoder:{decode:r}}}const s=n("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),o=n("ascii","a",(t=>{let e="a";for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e}),(t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e})),a={utf8:s,"utf-8":s,hex:r.gh.base16,latin1:o,ascii:o,binary:o,...r.gh}},45599:(t,e,i)=>{"use strict";function r(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t[r]^e[r];return i}i.r(e),i.d(e,{xor:()=>r})},44946:t=>{"use strict";t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},75207:t=>{"use strict";t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:t=>{"use strict";t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},29799:t=>{"use strict";t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},18597:t=>{"use strict";t.exports={i8:"6.5.4"}},7311:t=>{"use strict";t.exports=JSON.parse("[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106000,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82000,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91000,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,80000,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24000,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46000,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22000,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2000,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104000,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61000,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29000,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156000,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1000,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19000,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174000,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8000,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48000,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44000,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782]")},28362:t=>{"use strict";t.exports=JSON.parse('{"name":"libp2p","version":"0.36.2","description":"JavaScript implementation of libp2p, a modular peer to peer network stack","leadMaintainer":"Jacob Heun <jacobheun@gmail.com>","main":"src/index.js","types":"dist/src/index.d.ts","typesVersions":{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},"files":["dist","src"],"scripts":{"lint":"aegir lint","build":"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:fetch && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:fetch":"pbjs -t static-module -w commonjs -r libp2p-fetch --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/fetch/proto.js ./src/fetch/proto.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:peer":"pbjs -t static-module -w commonjs -r libp2p-peer --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/pb/peer.js ./src/peer-store/pb/peer.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:fetch && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:fetch":"pbts -o src/fetch/proto.d.ts src/fetch/proto.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:peer":"pbts -o src/peer-store/pb/peer.d.ts src/peer-store/pb/peer.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js","test":"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":"aegir test -t node -f \\"./test/**/*.{node,spec}.js\\"","test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all","test:interop":"LIBP2P_JS=$PWD npx aegir test -t node -f ./node_modules/libp2p-interop/test/*","prepare":"npm run build","coverage":"nyc --reporter=text --reporter=lcov npm run test:node"},"repository":{"type":"git","url":"https://github.com/libp2p/js-libp2p.git"},"keywords":["libp2p","network","p2p","peer","peer-to-peer","IPFS"],"bugs":{"url":"https://github.com/libp2p/js-libp2p/issues"},"homepage":"https://libp2p.io","license":"MIT","engines":{"node":">=15.0.0"},"browser":{"nat-api":false},"eslintConfig":{"extends":"ipfs","ignorePatterns":["!.aegir.js","test/ts-use","*.d.ts"]},"dependencies":{"@vascosantos/moving-average":"^1.1.0","abortable-iterator":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^3.0.0","bignumber.js":"^9.0.1","class-is":"^1.1.0","datastore-core":"^7.0.0","debug":"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0","events":"^3.3.0","hashlru":"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-foreach":"^0.1.1","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-sort":"^1.0.1","it-take":"^1.0.0","libp2p-crypto":"^0.21.2","libp2p-interfaces":"^4.0.0","libp2p-utils":"^0.4.0","mafmt":"^10.0.0","merge-options":"^3.0.4","mortice":"^2.0.1","multiaddr":"^10.0.0","multiformats":"^9.0.0","multistream-select":"^3.0.0","mutable-proxy":"^1.0.0","nat-api":"^0.3.1","node-forge":"^1.2.1","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.16.0","private-ip":"^2.1.0","protobufjs":"^6.10.2","retimer":"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^3.0.0","uint8arrays":"^3.0.0","varint":"^6.0.0","wherearewe":"^1.0.0","xsalsa20":"^1.1.0"},"devDependencies":{"@chainsafe/libp2p-noise":"^5.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^1.0.0","@types/varint":"^6.0.0","aegir":"^36.0.0","buffer":"^6.0.3","delay":"^5.0.0","into-stream":"^6.0.0","ipfs-http-client":"^54.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0","libp2p":".","libp2p-bootstrap":"^0.14.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.11.1","libp2p-interfaces-compliance-tests":"^4.0.8","libp2p-interop":"^0.7.1","libp2p-kad-dht":"^0.28.6","libp2p-mdns":"^0.18.0","libp2p-mplex":"^0.10.4","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.25.0","libp2p-websockets":"^0.16.0","nock":"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0","rimraf":"^3.0.2","sinon":"^12.0.1","util":"^0.12.3"},"contributors":["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Krger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","dirkmc <dirkmdev@gmail.com>","Volker Mische <volker.mische@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Robert Kiel <robert.kiel@hoprnet.org>","Richard Littauer <richard.littauer@gmail.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","  <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","Vt Habada <vithabada93@gmail.com>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Alan Smithee <ggnore.alan.smithee@gmail.com>","Elven <mon.samuel@qq.com>","Samlior <samlior@foxmail.com>","Didrik Nordstrm <didrik.nordstrom@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","TJKoury <TJKoury@gmail.com>","TheStarBoys <41286328+TheStarBoys@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","Tim Daubenschtz <tim@daubenschuetz.de>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","greenSnot <greenSnot@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","patrickwoodhead <91056047+patrickwoodhead@users.noreply.github.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","tuyennhv <vutuyen2636@gmail.com>","Snke Hahn <soenkehahn@gmail.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Joo Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Marston Connell <34043723+TheMarstonConnell@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>"]}')},22562:t=>{"use strict";t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}}]);